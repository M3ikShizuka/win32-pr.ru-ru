---
description: Извлекает общую поверхность DirectX, которая осуществляет резервное копирование заданного окна. Эту область можно записать в, чтобы обновить содержимое окна.
ms.assetid: 500CF5B4-0D56-4201-91F4-7333E45DACEE
title: Функция Двмдксжетвиндовшаредсурфаце
ms.topic: reference
ms.date: 11/27/2018
topic_type:
- APIRef
- kbSyntax
api_type:
- DllExport
api_location:
- Dwmapi.dll
api_name:
- DwmDxGetWindowSharedSurface
ms.openlocfilehash: 15e7829383ce23e5bc06bb61ab9c0c224ab18182
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105711553"
---
# <a name="dwmdxgetwindowsharedsurface-function"></a>Функция Двмдксжетвиндовшаредсурфаце

Извлекает общую поверхность DirectX, которая осуществляет резервное копирование заданного окна. Эту область можно записать в, чтобы обновить содержимое окна.

## <a name="syntax"></a>Синтаксис

```C++
HRESULT WINAPI DwmDxGetWindowSharedSurface(
  _In_     HWND        hwnd,
  _In_     LUID        luidAdapter,
  _In_opt_ HMONITOR    hmonitorAssociation,
  _In_     DWORD       dwFlags,
  _Inout_  DXGI_FORMAT *pfmtWindow,
  _Out_    HANDLE      *phDxSurface,
  _Out_    UINT64      *puiUpdateId
);
```

## <a name="parameters"></a>Параметры

`hwnd`

[**HWND**](/windows/desktop/winprog/windows-data-types) , указывающий обновляемое окно.

`luidAdapter`

[**LUID**](/previous-versions/bb401655(v%3dmsdn.10)) адаптера, на котором должна располагаться поверхность.

`hmonitorAssociation`

Зарезервировано.

`dwFlags`

Этот параметр может принимать одно из следующих значений или побитовое сочетание или несколько значений, если это уместно.

| Значение | Значение |
|-|-|
| <span id="DWM_REDIRECTION_FLAG_WAIT"></span><span id="dwm_redirection_flag_wait"></span><dl> <dt>**DWM \_ \_ \_ Время ожидания для флага перенаправления**</dt> <dt>0</dt> </dl> | Заставляет функцию блокироваться до тех пор, пока не будет пройдена вертикальная синхронизация (вертикальной синхронизации) со времени последнего вызова функции. |
| <span id="DWM_REDIRECTION_FLAG_SUPPORT_PRESENT_TO_GDI_SURFACE"></span><span id="dwm_redirection_flag_support_present_to_gdi_surface"></span><dl> <dt>**DWM \_ \_Поддержка флага перенаправления \_ \_ \_ на \_ \_ поверхности GDI,**</dt> <dt>0x10</dt> </dl> | Указывает, что вызывающее приложение может выполнять демонстрацию к общей поверхности GDI. |

`pfmtWindow`

На входе — желаемый формат поверхности. На выходе фактический формат возвращаемой поверхности.

`phDxSurface`

В выходных данных — общий маркер для поверхности.

`puiUpdateId`

На выходе — идентификатор обновления.

## <a name="return-value"></a>Возвращаемое значение

Эта функция может возвращать одно из этих значений.

| Код возврата | Описание |
|-|-|
| **\_ОК** | Вызов выполнен успешно, и вы должны обновить поверхность, убедиться, что идентификатор обновления передается в [D3DKMTRender](/windows-hardware/drivers/ddi/content/d3dkmthk/nf-d3dkmthk-d3dkmtrender) (в элементе **пресенсисторитокен** структуры подготовки к **\_ просмотру** при отправке обновления, а [**двмдксупдатевиндовшаредсурфаце**](dwmdxupdatewindowsharedsurface.md) должен вызываться с тем же идентификатором обновления. Обратите внимание, что **двмдксупдатевиндовшаредсурфаце** должен вызываться независимо от фактического обновления поверхности. |
| **\_ \_ \_ поверхность перенаправления GDI DWM S \_** | Вызов был произведен, и необходимо обновить поверхность, вызвав [D3DKMTPresent](/windows-hardware/drivers/ddi/content/d3dkmthk/nf-d3dkmthk-d3dkmtpresent)и установив для модели **Пресенсисторитокен** Member значение  **D3DKMT \_ PM \_ redirectd \_ БЛТ** и указав идентификатор обновления в элементе **БЛТ** объединения. Это значение возвращается, только если в *dwFlags* указана **\_ \_ Поддержка флага перенаправления DWM \_ \_ \_ для \_ \_ поверхности GDI** . |
| **\_адаптер DWM \_ E \_ не \_ найден** | Недопустимое значение *луидадаптер* . |
| **DWM \_ E \_ компоситиондисаблед** | DWM сейчас не включен, и приложение должно предоставить другой способ. |

## <a name="remarks"></a>Комментарии

Этот API предназначен для реализации графического драйвера или среды выполнения. Приложение не может вызывать этот метод. Эта документация действительна только для Windows 7, и этот API не гарантирует существование и не работает аналогичным образом в других версиях Windows. Эта функция отсутствует в заголовке или библиотеке статической компоновки, она находится по порядковому номеру 100 в dwmapi.dll.

## <a name="requirements"></a>Требования

| Требование | Значение |
|-|-|
| Минимальная версия клиента | \[Только классические приложения Windows 7\] |
| Минимальная версия сервера | Ни одна версия не поддерживается |
| Окончание поддержки клиента | Windows 7 |
| Заголовок | Н/Д |
| DLL | Dwmapi.dll |
