---
description: Общее правило заключается в том, что классическое приложение может вызывать API среда выполнения Windows (WinRT). Однако некоторые API, включая API пользовательского интерфейса XAML, занимают у вызывающего приложения удостоверение пакета.
ms.assetid: F3808C28-72DE-49B5-A389-EB085EFC02CC
title: Интерфейсы API WinRT, вызываемые из классического приложения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9083fbfb16391c626f49b79176fed7a81068c028
ms.sourcegitcommit: 0c786b1682063d0cae0fc43180945183fa2c7981
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/24/2020
ms.locfileid: "104070847"
---
# <a name="calling-winrt-apis-from-a-desktop-app"></a>Вызов API-интерфейсов WinRT из классического приложения

Общее правило заключается в том, что классическое приложение может вызывать API WinRT. Однако некоторые API, включая API пользовательского интерфейса XAML, занимают у вызывающего приложения удостоверение пакета. Приложения UWP имеют четко определенную модель приложения и имеют удостоверение пакета. Другие типы классических приложений не имеют четко определенной модели приложения или удостоверения пакета. Поэтому, если для API требуется удостоверение пакета, приложение WPF, Windows Forms или Win32 не может вызвать его, если приложение [не упаковано в пакет MSIX](/windows/msix/desktop/desktop-to-uwp-root).

## <a name="the-dualapipartition-attribute"></a>Атрибут Дуалапипартитион

Это процесс, который необходимо выполнить при наличии определенного WinRT, который вы хотите вызвать из классического приложения. Этот процесс отвечает на вопрос, разрешен ли вызов API из классического приложения. Сначала посетите Справочник по [API Windows для Среда выполнения Windows приложений](/uwp/), найдите справочный раздел по интересующему вас классу или API-элементу и проверьте, присутствует ли атрибут [**Дуалапипартитион**](/uwp/api/Windows.Foundation.Metadata.DualApiPartitionAttribute) в разделе Attributes.

## <a name="if-the-dualapipartition-attribute-is-listed"></a>Если указан атрибут Дуалапипартитион

Если указан атрибут Дуалапипартитион, то API не требует, чтобы вызывающее приложение имело удостоверение пакета, а API-интерфейс может быть вызван из любого классического приложения. [**Windows. Devices. Географическое расположение. геоуказатель**](/uwp/api/Windows.Devices.Geolocation.Geolocator) является примером; для выполнения задач по расположению не требуется уникально идентифицировать приложение.

## <a name="if-the-dualapipartition-attribute-is-not-listed"></a>Если атрибут Дуалапипартитион отсутствует в списке

Если атрибут Дуалапипартитион отсутствует в списке, то API-интерфейсу не требуется, чтобы вызывающее приложение имело удостоверение пакета. Поэтому приложение WPF, Windows Forms или Win32 не может вызывать API, пока приложение не будет преобразовано в приложение UWP. Пример: [**Windows. UI. XAML. Controls. Button**](/uwp/api/Windows.UI.Xaml.Controls.Button) .
