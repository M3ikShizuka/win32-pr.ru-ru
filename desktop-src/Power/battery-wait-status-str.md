---
description: Содержит сведения об условиях, при которых будет получено состояние аккумулятора.
ms.assetid: 1750fe0f-ba3d-4118-938c-789c6d62c3f7
title: Структура BATTERY_WAIT_STATUS (Покласс. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- BATTERY_WAIT_STATUS
api_type:
- HeaderDef
api_location:
- Poclass.h
- Batclass.h
ms.openlocfilehash: 52885b75c7f9afba7ff336b3210ecf1b852f85b0091afe13026616816e43d7ff
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119143597"
---
# <a name="battery_wait_status-structure"></a>\_ \_ Структура состояния ожидания аккумулятора

Содержит сведения об условиях, при которых будет получено состояние аккумулятора. Эта структура используется кодом управления [**\_ \_ \_ состоянием запроса батареи ioctl**](ioctl-battery-query-status.md) .

## <a name="syntax"></a>Синтаксис


```C++
typedef struct _BATTERY_WAIT_STATUS {
  ULONG BatteryTag;
  ULONG Timeout;
  ULONG PowerState;
  ULONG LowCapacity;
  ULONG HighCapacity;
} BATTERY_WAIT_STATUS, *PBATTERY_WAIT_STATUS;
```



## <a name="members"></a>Члены

<dl> <dt>

**баттеритаг**
</dt> <dd>

Текущий тег батареи для аккумулятора. Могут быть возвращены только сведения о батарее, соответствующем тегу. Если это значение не соответствует текущему тегу батареи, операция [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) завершится ошибкой с кодом ошибки \_ \_ не \_ найден, что указывает вызывающему объекту, что батарея, для которой он имеет тег, больше не установлена. вызывающий объект может использовать операцию [**\_ \_ запроса \_ на батарею**](ioctl-battery-query-tag.md) , чтобы определить тег только что установленного аккумулятора (при наличии). Кроме того, если запрос выполняется после удаления батареи или при изменении тега, операция прерывается с состоянием " \_ файл \_ не \_ найден". (Дополнительные сведения см. в разделе " [теги батареи](battery-information.md) ".)

</dd> <dt>

**Timeout**
</dt> <dd>

Число миллисекунд, в течение которых запрос будет ожидать условие, заданное членами **PowerState**, **ловкапаЦити** и **хигхкапаЦити** , перед завершением. Значение-1 указывает, что запрос будет ожидать неограниченное время ожидания условий. Нулевое значение указывает, что запрошенные сведения о батарее должны возвращаться немедленно, независимо от других условий. Любое другое значение указывает на то, что запрос должен ждать в течение времени или до тех пор, пока не будет выполнено какое-либо другое условие.

Если компьютер перешел в спящий режим, часы будут продолжать выполняться, но исчерпание счетчика не приведет к выходу компьютера из спящего режима. Если счетчик будет исчерпан, когда компьютер пробудится, и выполняются другие условия, вызов немедленно возвратится при пробуждении.

</dd> <dt>

**Установлен**
</dt> <dd>

Ноль, один или несколько следующих битов состояния, которые указывают состояние аккумулятора. Он идентичен элементу **PowerState** структуры [**\_ состояния аккумулятора**](battery-status-str.md) .



| Значение                                                                                                                                                                                                                                                   | Значение                                                                                              |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|
| <span id="BATTERY_CHARGING"></span><span id="battery_charging"></span><dl> <dt>**Батарея \_ ЗАРЯДка**</dt> <dt>0x00000004</dt> </dl>                  | Указывает, что батарея в настоящий момент заряжается.<br/>                                         |
| <span id="BATTERY_CRITICAL"></span><span id="battery_critical"></span><dl> <dt>**Батарея \_ КРИТическая**</dt> <dt>0x00000008</dt> </dl>                  | Указывает, что сбой батареи приближается. Дополнительные сведения см. в разделе "Примечания".<br/> |
| <span id="BATTERY_DISCHARGING"></span><span id="battery_discharging"></span><dl> <dt>**Батарея \_**</dt>Выставление счетов <dt>0x00000002</dt> </dl>         | Указывает, что батарея в настоящее время расряжается.<br/>                                      |
| <span id="BATTERY_POWER_ON_LINE"></span><span id="battery_power_on_line"></span><dl> <dt>**Батарея \_ ПИТАНИЕ \_ в \_ строке**</dt> <dt>0x00000001</dt> </dl> | Указывает, что батарея имеет доступ к питанию от сети.<br/>                                        |



 

</dd> <dt>

**ловкапаЦити**
</dt> <dd>

Текущая емкость аккумулятора в mWh (или относительное значение). Это значение идентично значению элемента **Capacity** структуры [**\_ состояния аккумулятора**](battery-status-str.md) .

</dd> <dt>

**хигхкапаЦити**
</dt> <dd>

Текущая емкость аккумулятора в mWh (или относительное значение). Это значение идентично значению элемента **Capacity** структуры [**\_ состояния аккумулятора**](battery-status-str.md) .

</dd> </dl>

## <a name="remarks"></a>Remarks

Запросы сведений о батарее откладываются до тех пор, пока не произойдет одно из следующих событий:

-   Время ожидания истекает (если **время ожидания** не равно-1).
-   Текущее состояние батареи не соответствует **PowerState**.
-   Емкость батареи ниже **ловкапаЦити**.
-   Емкость батареи выше **хигхкапаЦити**.
-   Изменился тег аккумулятора.

Когда выполняется какое-либо из этих условий, данные собираются и операция возвращает. Это позволяет приложениям отслеживать типичные сведения о динамических батареях без опроса устройства.

Прежде чем использовать одно из двух условий емкости, убедитесь, что батарея поддерживает их, используя код элемента управления [**\_ \_ \_ аккумулятора ioctl**](ioctl-battery-query-status.md) с нулевым временем ожидания. Проверьте результаты, чтобы определить, поддерживается ли элемент **емкости** (то есть \_ неизвестная емкость батареи \_ ).

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows \[Только классические приложения XP\]<br/>                                                                                                                                                                                                                         |
| Минимальная версия сервера<br/> | Windows Только для \[ настольных приложений сервера 2003\]<br/>                                                                                                                                                                                                                |
| Header<br/>                   | <dl> <dt>Покласс. h;</dt> <dt>баткласс. h на Windows server 2008 R2, Windows 7, Windows server 2008, Windows Vista, Windows Server 2003 и Windows XP</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**\_состояние аккумулятора**](battery-status-str.md)
</dt> <dt>

[**\_ \_ состояние запроса аккумулятора \_ ioctl**](ioctl-battery-query-status.md)
</dt> <dt>

[**\_тег запроса на батарею ioctl \_ \_**](ioctl-battery-query-tag.md)
</dt> </dl>

 

