---
description: Событие управления питанием системы — это изменение состояния питания системы, рабочего режима устройства или системы или значения параметра питания.
ms.assetid: f73b072a-1f69-4e26-9712-dab428edca18
title: События управления питанием системы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7ab18fad9116cfff9e1cd35703e32a49e3b12c8b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105663101"
---
# <a name="system-power-management-events"></a>События управления питанием системы

Событие управления питанием системы — это изменение состояния питания системы, рабочего режима устройства или системы или значения параметра питания. Так как эти события могут повлиять на работу приложений и устанавливаемых драйверов, система уведомляет все приложения и устанавливаемые драйверы, выполнив широковещательную рассылку уведомлений для каждого события. Приложения и службы регистрируются для получения уведомлений с помощью функции [**RegisterPowerSettingNotification**](/windows/desktop/api/WinUser/nf-winuser-registerpowersettingnotification) . Уведомления поступают через сообщение [**WM \_ поверброадкаст**](wm-powerbroadcast.md) , которое содержит событие управления питанием и все связанные данные события.

## <a name="system-power-status-events"></a>События состояния питания системы

*Событие состояния системы питания* возникает при изменении источника питания или в состоянии аккумулятора системы. Например, система передает событие [ПБТ \_ апмповерстатусчанже](pbt-apmpowerstatuschange.md) всякий раз, когда пользователь переключается от аккумулятора к питанию от сети или наоборот. Это событие возникает также, если уровень заряда батареи становится ниже заданного пользователем порога или изменяется на заданную величину в процентах.

## <a name="operational-mode-events"></a>События рабочего режима

*Событие рабочего режима* возникает при изменении энергопотребления, например при переключении системы в состояние сна из-за неактивности или при ручном переводе системы в спящий режим. Система передает события об этих изменениях до внесения изменений в энергопотребление. Например, если система определяет, что она бездействует, она передает событие [ПБТ \_ апмсуспенд](pbt-apmsuspend.md) , которое уведомляет о том, что приложения и драйверы, которые он собирается приостановить, приостанавливают работу и спящий режим для экономии энергии. Приложения и драйверы могут подготовиться к переходу в спящий режим путем закрытия файлов и сохранения данных во избежание возможной потери данных.

Когда система выполняет *критическую приостановку*, система немедленно переходит в спящий режим из-за критической ситуации, такой как оповещение о критическом аккумуляторе. В отличие от обычного перехода в спящий режим, система не уведомляет приложения и драйверы перед выполнением критической приостановки. Поэтому приложения должны быть готовы к обработке критических приостановк.

Когда Системная операция восстанавливается после приостановки, система уведомляет все приложения и драйверы. Он также указывает, возобновляется ли система с критической приостановки, чтобы приложение или драйвер могли предпринять соответствующие меры для восстановления данных и продолжения работы.

Приложения должны выполнять каждую попытку обработать переход в состояние сна без вмешательства пользователя, так как может быть невозможно ответить пользователю. Например, крышка на компьютере ноутбука может быть закрыта. Когда приложение получает уведомление о том, что система собирается перейти в спящий режим, она должна быстро выполнять все необходимые операции и возвращать из цикла обработки сообщений. Система допускает не более двух секунд на приложение при обработке этого сообщения до истечения времени ожидания.

## <a name="power-setting-change-events"></a>События изменения параметров питания

Событие изменения параметра питания возникает при изменении значения параметра питания. Например, пользователь изменяет схему управления питанием с высокой производительности на сбалансированную в приложении "Параметры электропитания" на панели управления. В этом случае система рассылает событие, указывающее на изменение схемы управления питанием. Это событие включает новое значение параметра питания.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Сведения об управлении питанием](about-power-management.md)
</dt> </dl>

 

 



