---
description: Батареи могут предоставить питание для портативных компьютеров и компьютеров, работающих на источнике бесперебойного питания (ИБП).
ms.assetid: 3580b37d-611c-46b4-9300-4943833d6852
title: Сведения о батарее
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d3b1afd2461985ec85a07d40bd309c588a5404e4b59be7555a01fc6c147eb221
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119143697"
---
# <a name="battery-information"></a>Сведения о батарее

Батареи могут предоставить питание для портативных компьютеров и компьютеров, работающих на источнике бесперебойного питания (ИБП). На этих компьютерах операционная система предоставляет сведения о состоянии аккумулятора, чтобы приложения могли предоставлять пользователям полезные функции. (Некоторые старые нестандартные системы аккумулятора и ИБП не поддерживаются.)

Обратите внимание, что в этом обзоре предполагается, что вы знакомы с [управлением устройствами](/windows/desktop/DevIO/device-management).

Чтобы получить сведения о состоянии аккумулятора, используйте функцию [**GetSystemPowerStatus**](/windows/desktop/api/Winbase/nf-winbase-getsystempowerstatus) , которая возвращает общие сведения обо всех источниках питания в системе. При возможности следует использовать **GetSystemPowerStatus** .

Однако в некоторых случаях требуется подробная информация о каждом отдельном батарее. Для этой цели каждое батареное устройство предоставляет интерфейс IOCTL. Следующие операции IOCTL выполняются с помощью функции [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) :

<dl>

[**\_ \_ сведения о запросе от аккумулятора ioctl \_**](ioctl-battery-query-information.md)  
[**\_ \_ состояние запроса аккумулятора \_ ioctl**](ioctl-battery-query-status.md)  
[**\_тег запроса на батарею ioctl \_ \_**](ioctl-battery-query-tag.md)  
[**\_ \_ сведения о настройке аккумулятора ioctl \_**](ioctl-battery-set-information.md)  
</dl>

Чтобы использовать этот интерфейс, приложение должно выполнить несколько шагов. Во-первых, он должен использовать программы установки для перечисления всех устройств, имеющих интерфейс класса аккумулятора. Обратите внимание, что эти устройства представляют порты батареи, а не фактические батареи в системе. После этого приложение должно открыть обработчик для каждого устройства, чтобы он мог использовать функцию [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) для отправки запросов на устройство, а затем получать теги для всех вставленных батарей. После выполнения этих действий приложение может отсылать запросы на каждое устройство с батареей.

## <a name="battery-tags"></a>Теги аккумулятора

Так как каждое устройство батареи представляет собой слот, в который можно вставить батарею, необходимо определить, когда батарея будет удалена, заменена или изменена любым другим способом. Для этого каждой батареей в определенном слоте назначается тег. Этот тег должен использоваться для всех запросов для получения сведений. Если тег, предоставленный приложением, не соответствует батарее, запрос завершается неудачей, указывая на то, что батарея изменилась. Для успешного выполнения запроса требуется новый тег батареи. Получите тег с помощью операции [**с \_ \_ \_ тегом запроса аккумулятора**](ioctl-battery-query-tag.md) . Если в этом слоте есть батарея, возвращаемый тег может быть передан любым другим функциям IOCTL от аккумулятора для выполнения других функций. В системе с несколькими батареями каждое устройство батареи (слот) выдает Теги аккумулятора независимо, поэтому тег из двух отдельных устройств может быть одинаковым.

Изменение в теге батареи не обязательно означает, что батарея была удалена, повторно вставлена или заменена. Новый тег может быть создан при изменении любого из данных, которые обычно являются статическими. Например, после зарядки аккумулятора может измениться последняя полностью заряженная емкость. Кроме того, тег может измениться, если батарея была временно утрачена или если в BIOS возникло неправильное уведомление. В некоторых системах тег аккумулятора может обновляться при каждом изменении состояния сети. Такое поведение обусловлено характеристикой системы аккумулятора и не является распространенным.

При обновлении тега батареи батарея должна считаться новым аккумулятором, а все кэшированные данные должны быть прочитаны повторно. Если приложению необходимо узнать, имеется ли тот же физический аккумулятор, то при вызове с уровнем информации **баттерюникуеид** он должен проверить значение **баттерюникуеид** в выходном буфере [**\_ \_ запроса \_ на батарею ioctl**](ioctl-battery-query-information.md) .

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Сведения об управлении питанием](about-power-management.md)
</dt> <dt>

[Перечисление устройств с батареей](enumerating-battery-devices.md)
</dt> </dl>

 

 
