---
description: Приложение может восстановить состояние компьютера в спящем режиме до рабочего состояния с помощью запланированного таймера или события устройства.
ms.assetid: b7326b09-0829-4e76-80d0-e4ecdf7f556e
title: События пробуждения системы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f13332305ef023d932f2912f7299aa12cd402733
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673791"
---
# <a name="system-wake-up-events"></a>События пробуждения системы

Следующие сведения относятся к пробуждению из [спящего режима (S3) и гибернации (S4)](/windows-hardware/drivers/kernel/system-sleeping-states). Сведения о пробуждении из современного режима ожидания (низкое энергопотребление S0) см. в статье [переходы в режиме простоя в состояние "активно](/windows-hardware/design/device-experiences/transition-from-idle-to-active)".

Приложение может восстановить состояние компьютера в спящем режиме до рабочего состояния с помощью запланированного таймера или события устройства. Это называется *событием пробуждения*. Используйте [объект таймера](/windows/desktop/Sync/waitable-timer-objects) с возможностью ожидания, чтобы указать время, когда система должна пробудиться. Чтобы создать объект, используйте функцию [**сбой createwaitabletimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) . Чтобы задать таймер, используйте функцию [**сетваитаблетимер**](/windows/desktop/api/synchapi/nf-synchapi-setwaitabletimer) . Параметр *пдуетиме* указывает, когда таймер будет получать сигнал. Чтобы указать, что система должна пробудиться при получении сигнала таймера, установите  для параметра Фресуме **значение true**.

При автоматическом пробуждении системы из-за события (отличного от выключателя питания или активности пользователя) система автоматически устанавливает таймер бездействия автоматического простоя в течение не менее 2 минут. Этот таймер предоставляет приложениям достаточно времени для вызова функции [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) , чтобы указать, что они заняты. На этот раз система может быстро вернуться в спящий режим после того, как компьютер больше не требуется. Следующие критерии определяют, возвращается ли система к состоянию сна:

-   Если система автоматически выходит из спящего режима (то есть никакие действия пользователя отсутствуют), работа завершается сразу же после истечения таймера автоматического простоя, предполагая, что ни одно приложение не вызвало [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) , чтобы указать, что система является обязательной.
-   Пробуждение на основе устройства активирует таймер автоматического простоя по умолчанию, если драйвер устройства не указывает на присутствие пользователя. Если драйвер указывает на присутствие пользователя, то используется таймер простоя системы.
-   Если система автоматически выходит из системы, но пользователь предоставляет новые входные данные во время обработки события, система не возвращается автоматически в спящий режим на основе таймера автоматического простоя. Вместо этого система возвращается в спящий режим на основе таймера простоя системы.
-   Если система пробуждается из-за активности пользователя, система не автоматически возвращается в спящий режим на основе таймера автоматического простоя. Вместо этого система возвращается в спящий режим на основе таймера простоя системы.

Когда система автоматически пробуждается, она передает событие [ПБТ \_ апмресумеаутоматик](pbt-apmresumeautomatic.md) всем приложениям. Поскольку пользователь отсутствует, большинство приложений не должны выполнять никаких действий. Приложения обработки событий, такие как факс-серверы, должны обрабатывать свои события. Чтобы определить, находится ли система в этом состоянии, вызовите функцию [**иссистемресумеаутоматик**](/windows/desktop/api/Winbase/nf-winbase-issystemresumeautomatic) . При автоматическом пробуждении системы отображение не включается автоматически.

Если система выходит из-за активности пользователя, система сначала передает событие [ПБТ \_ апмресумеаутоматик](pbt-apmresumeautomatic.md) , за которым следует событие [ПБТ \_ апмресумесуспенд](pbt-apmresumesuspend.md) . Кроме того, система будет включать дисплей. Приложение должно повторно открывать закрытые файлы, когда система перешла в спящий режим, и подготовиться к вводу данных пользователем.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Сведения об управлении питанием](about-power-management.md)
</dt> <dt>

[Критерии спящего режима системы](system-sleep-criteria.md)
</dt> </dl>

 

 
