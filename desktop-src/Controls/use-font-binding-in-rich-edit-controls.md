---
title: Использование привязки шрифтов в элементах управления Rich Edit
description: Microsoft Rich Edit 3,0 присваивает набор символов обычным текстовым символам в зависимости от контекста.
ms.assetid: 975B9C33-6766-4FF1-A93E-2169C140CEE9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ea17c2f8e0e8c1b57611839a5bbf992f9af6bf65
ms.sourcegitcommit: f0ca63c18dc52c357d3398af7be766d2bdd40be7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/17/2020
ms.locfileid: "103890348"
---
# <a name="how-to-use-font-binding-in-rich-edit-controls"></a>Использование привязки шрифтов в элементах управления Rich Edit

Microsoft Rich Edit 3,0 присваивает набор символов обычным текстовым символам в зависимости от контекста. Ниже приведены некоторые примеры.

-   Греческим символам присваивается **Греческий \_ символ charset**.
-   Символам хангыль назначается **\_ знак азбуки хангыль**.
-   Китайские иероглифы назначаются **символов shiftjis \_ CharSet** , если рядом с ними расположены символы Кана, или **GB2312 \_ CharSet** , если поблизости не найдено ни одного символа Кана.
-   Ненейтральные знаки ANSI присваиваются набору символов **ANSI \_** в любом событии.

> [!Note]  
> Элемент управления "поле форматированного ввода" использует Юникод внутренним образом, поэтому использование наборов символов отличается от исходного, используемого в спецификациях шрифтов. Но структура [**чарформат**](/windows/win32/api/richedit/ns-richedit-charformata) имеет четко определенное место для кодировки.

 

Независимым символам, таким как пробелы и цифры, присваивается набор символов в зависимости от контекста. Например, пустая строка, заключенная в символы одного набора символов, получает эту кодировку. Нейтральные знаки и цифры, используемые для двунаправленного текста, назначаются наборам символов способом, основанным на двунаправленном алгоритме Юникода.

## <a name="what-you-need-to-know"></a>Что необходимо знать

### <a name="technologies"></a>Технологии

-   [Элементы управления Windows](window-controls.md)

### <a name="prerequisites"></a>Предварительные условия

-   C/C++
-   Программирование пользовательского интерфейса Windows

## <a name="instructions"></a>Инструкции

### <a name="use-font-binding-in-a-rich-edit-control"></a>Использовать привязку шрифтов в элементе управления Rich Edit

После того как кодировка будет назначена, Расширенное редактирование просматривает текст вокруг точки вставки вперед и назад, чтобы найти ближайшие шрифты, которые использовались для наборов символов. Если для кодировки не найден шрифт, Rich Edit использует шрифт, выбранный клиентом для этой кодировки. Если клиент не указал шрифт для кодировки, Rich Edit использует шрифт по умолчанию для этой кодировки. Если клиенту требуется какой бы то ни было другой шрифт, клиент всегда может изменить его, но этот подход будет работать в большинстве случаев. Текущий выбор шрифта по умолчанию основан на следующей таблице. Обратите внимание, что шрифты по умолчанию задаются для каждого процесса, и существуют отдельные списки для использования пользовательского интерфейса и для использования без пользовательского интерфейса.



| Язык                    | Имя шрифта пользовательского интерфейса  | Размер шрифта пользовательского интерфейса | имя шрифта, не относящегося к пользовательскому интерфейсу | Размер шрифта, не относящегося к пользовательскому интерфейсу |
|-----------------------------|---------------|--------------|------------------|------------------|
| Западная, CE, ME, вьетнамский | Tahoma        | 8            | Arial            | 10               |
| Японский                    | Microsoft UI Gothic  | 9            | MS P Gothic      | 10               |
| Корейский                      | Gulim         | 9            | Gulim            | 9                |
| Китайский (упрощенный)          | SimSun        | 9            | SimSun           | 10               |
| Китайский (традиционный)         | пминглиу      | 9            | пминглиу         | 9                |
| Тайский                        | MS Sans Serif | 8            | Tahoma           | 14               |
| Символы                     | Шрифт     | 8            | Шрифт        | 10               |
| Девангари                  | Mangal        | 8            | Mangal           | 10               |
| Тамильский                       | ласа         | 8            | ласа            | 10               |
| Грузинский, армянский          | Arial Unicode | 8            | Arial Unicode    | 10               |



 

Таким образом, в таблице привязки шрифтов по умолчанию (записи имеют кодировку, имя шрифта и размер), форматированное редактирование позволяет кодировке ANSI \_ соответствовать нескольким наборам символов, в то время как соответствующий набор символов соответствует другим шрифтам в зависимости от типа "один к одному". Точнее, форматированное редактирование использует набор \_ символов ANSI всякий раз, когда не будет найден другой альтернативный вариант. Вы сможете указать большую степень детализации, чем это. Например, назначьте конкретный набор символов АРАБСКого алфавита \_ для арабских запусков, конкретный Греческий шрифт для греческого языка и т. д. Такая более детальная степень детализации также будет использована, если шрифт с требуемой отметкой набора символов находится где-то в документе перед областью, привязанной к шрифту.

Обратите внимание, что Расширенное редактирование в настоящее время не обрабатывает отсутствующий глиф в шрифте, который требует поддержки набора символов, но является неполным. Во время показа в сложном сценарии Расширенное редактирование позволяет понять, что такой глиф отсутствует, но не приводит к тому, что в резервном хранилище будет использоваться новый шрифт. Как правило, это достигается с помощью базового шрифта, связывающего операционную систему.

## <a name="remarks"></a>Комментарии

**Расширенное редактирование 4,1:** Чтобы задать шрифт по умолчанию для скрипта, вызовите [**EM \_ Сетчарформат**](em-setcharformat.md) с [**CHARFORMAT2**](/windows/desktop/api/Richedit/ns-richedit-charformat2a), указав значения для элементов **ихеигхт**, **бчарсет**, **бпитчандфамили**, **сзфаценаме** и **LCID** . Кроме того, чтобы получить шрифт по умолчанию для конкретной кодовой страницы, вызовите [**EM \_ Жетчарформат**](em-getcharformat.md) с **CHARFORMAT2**, указав значения для элементов **бчарсет** и **LCID** .

## <a name="related-topics"></a>См. также

<dl> <dt>

[Использование элементов управления Rich Edit](using-rich-edit-controls.md)
</dt> <dt>

[Демонстрация стандартных элементов управления Windows (Кппвиндовскоммонконтролс)](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/master/OneCodeTeam/Windows%20common%20controls%20demo%20(CppWindowsCommonControls)/%5BC++%5D-Windows%20common%20controls%20demo%20(CppWindowsCommonControls)/C++/CppWindowsCommonControls)
</dt> </dl>

 

 




