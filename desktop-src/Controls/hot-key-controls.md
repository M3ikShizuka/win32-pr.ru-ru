---
title: Сведения об элементах управления горячей клавиши
description: Ключевой элемент управления — это окно, которое позволяет пользователю ввести сочетание клавиш, которое будет использоваться в качестве сочетания клавиш.
ms.assetid: 5f011459-4c30-45d4-9668-19f575b041ce
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 256fcfde87a1fb6603f90e8a2a41cb4f2cc9356f9f45d861efdc6836aa5344fc
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118672251"
---
# <a name="about-hot-key-controls"></a>Сведения об элементах управления горячей клавиши

Ключевой элемент управления — это окно, которое позволяет пользователю ввести сочетание клавиш, которое будет использоваться в качестве сочетания клавиш. Горячая клавиша — это сочетание клавиш, которое пользователь может нажать для быстрого выполнения действия. Например, пользователь может создать горячую клавишу, которая активирует заданное окно и переводит его в начало z-порядка. Элемент управления горячими ключами отображает варианты выбора пользователя и гарантирует, что пользователь выбрал допустимое сочетание клавиш. На следующем снимке экрана показано, как при нажатии клавиши ALT в диалоговом окне появляется элемент управления "горячие клавиши".

![снимок экрана с диалоговым окном, содержащим элемент управления "горячая" клавиша](images/hotkey.png)

## <a name="using-hot-key-controls"></a>Использование элементов управления горячими ключами

Когда пользователь вводит сочетание клавиш для использования в качестве сочетания клавиш, имена ключей отображаются в элементе управления горячего ключа. Сочетание клавиш может состоять из клавиши-модификатора (например, CTRL, ALT или SHIFT) и сопутствующего ключа (например, клавиши с символом, клавиши со стрелкой, клавиши-функции и т. д.).

После того как пользователь выбрал сочетание клавиш, приложение извлекает сочетание клавиш из элемента управления горячими ключами и использует его для настройки сочетания клавиш в системе. Информация, полученная из элемента управления "горячая клавиша", включает флаг, указывающий клавишу-модификатор и код виртуального ключа сопутствующего ключа.

Приложение может использовать сведения, предоставляемые ключевым элементом управления для настройки глобального горячего ключа или сочетания клавиш для конкретного потока. Глобальный горячий ключ связан с определенным окном; Он позволяет пользователю активировать окно из любой части системы. Приложение устанавливает глобальный горячий ключ с помощью сообщения [**WM \_ сесоткэй**](/windows/desktop/inputdev/wm-sethotkey) . Когда пользователь нажимает на глобальную горячую клавишу, окно, указанное в **WM \_ сесоткэй** , получает сообщение [**WM \_ сискомманд**](/windows/desktop/menurc/wm-syscommand) , которое указывает значение [**\_ сочетания клавиш SC**](/windows/desktop/inputdev/wm-sethotkey) . Это сообщение активирует окно, которое его получает. Сочетание клавиш остается действительным до тех пор, пока приложение, вызвавшее **WM \_ сесоткэй** , не завершит работу.

Горячая клавиша для конкретного потока создает сообщение [**с \_ сочетанием клавиш WM**](/windows/desktop/inputdev/wm-hotkey) , которое публикуется в начале определенного потока, чтобы оно было удалено следующей итерацией цикла обработки сообщений. Приложение устанавливает горячую клавишу для конкретного потока с помощью функции [**RegisterHotKey**](/windows/desktop/api/winuser/nf-winuser-registerhotkey) .

### <a name="hot-key-control-messages"></a>Управляющие сообщения горячих ключей

После создания элемента управления горячим ключом приложение взаимодействует с ним с помощью трех сообщений: [**ХКМ \_ сетрулес**](hkm-setrules.md), [**ХКМ \_ сесоткэй**](hkm-sethotkey.md)и ХКМ- [**\_ горячих клавиш**](hkm-gethotkey.md).

Приложение может отправить сообщение [**ХКМ \_ сетрулес**](hkm-setrules.md) , чтобы задать сочетание клавиш CTRL, Alt и Shift, которые считаются недопустимыми сочетаниями клавиш. Если в приложении указано недопустимое сочетание клавиш, необходимо также указать сочетание модификатора по умолчанию, которое будет использоваться, когда пользователь выберет недопустимую комбинацию. Когда пользователь вводит недопустимое сочетание, система выполняет логическую операцию OR с недопустимым сочетанием и сочетанием по умолчанию. Результат считается допустимым сочетанием; он преобразуется в строку и отображается в элементе управления.

Сообщение [**ХКМ \_ сесоткэй**](hkm-sethotkey.md) позволяет приложению установить сочетание клавиш для элемента управления "горячая клавиша". Это сообщение также обычно используется при создании элемента управления "горячие клавиши".

Приложения используют сообщение [**ХКМ \_**](hkm-gethotkey.md) для получения виртуального ключа и флаги модификатора для горячих клавиш, выбранных пользователем.

### <a name="hot-key-control-notifications"></a>Уведомления об управлении ключами

Элемент управления "горячий ключ" не отправляет коды уведомлений через сообщение [**WM \_ Notify**](wm-notify.md) . Однако при изменении содержимого элемента управления будет отправлено уведомление о [ \_ смене на короткое](en-change.md) время через сообщение [**\_ командной строки WM**](/windows/desktop/menurc/wm-command) .

### <a name="default-hot-key-message-processing"></a>Обработка сообщений об активных ключах по умолчанию

В этом разделе описываются сообщения окна, обрабатываемые процедурой окна для предварительно определенного класса стандартного окна [**\_ класса**](common-control-window-classes.md) , используемого с элементами управления горячими ключами.

|    Message                                            |    Обработка выполнена                               |
|------------------------------------------------|--------------------------------------------------------------|
| [**WM \_ char**](/windows/desktop/inputdev/wm-char)               | Извлекает код виртуального ключа.             |
| [**\_Создание WM**](/windows/desktop/winmsg/wm-create)             | Инициализирует элемент управления горячими ключами, очищает все правила горячего ключа и использует системный шрифт.   |
| [**WM \_ ерасебкгнд**](/windows/desktop/winmsg/wm-erasebkgnd)     | Скрывает курсор, вызывает функцию [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) и снова отображает курсор.   |
| [**WM \_ жетдлгкоде**](/windows/desktop/dlgbox/wm-getdlgcode)     | Возвращает сочетание значений [**длгк \_ Вантчарс**](/windows/desktop/dlgbox/wm-getdlgcode) и [**длгк \_ вантарровс**](/windows/desktop/dlgbox/wm-getdlgcode) .   |
| [**WM, \_ Шрифт**](/windows/desktop/winmsg/wm-getfont)           | Извлекает шрифт.                         |
| [**WM \_ KeyDown**](/windows/desktop/inputdev/wm-keydown)         | Вызывает функцию [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) , если КЛАВИШа введена, табуляция, пробела, Del, ESC или BACKSPACE. Если клавиша SHIFT, CTRL или ALT, она проверяет, является ли комбинация допустимой, и, если это так, устанавливает горячие клавиши, используя сочетание. Все остальные ключи задаются в виде горячих ключей без проверки их достоверности первыми. |
| [**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup)             | Извлекает код виртуального ключа.             |
| [**WM \_ киллфокус**](/windows/desktop/inputdev/wm-killfocus)     | Уничтожает курсор.                         |
| [**WM \_ лбуттондовн**](/windows/desktop/inputdev/wm-lbuttondown) | Устанавливает фокус на окно.               |
| [**WM \_ нккреате**](/windows/desktop/winmsg/wm-nccreate)         | Задает стиль окна [**WS \_ ex \_ клиентедже**](/windows/desktop/winmsg/extended-window-styles) .        |
| [**WM \_ Paint**](/windows/desktop/gdi/wm-paint)                  | Закрашивает элемент управления горячим ключом.                 |
| [**WM \_ SETFOCUS**](/windows/desktop/inputdev/wm-setfocus)       | Создает и отображает курсор.                |
| [**WM \_ сетфонт**](/windows/desktop/winmsg/wm-setfont)           | Задает шрифт.                              |
| [**WM \_ сисчар**](/windows/desktop/menurc/wm-syschar)           | Извлекает код виртуального ключа.             |
| [**WM \_ сискэйдовн**](/windows/desktop/inputdev/wm-syskeydown)   | Вызывает функцию [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) , если КЛАВИШа введена, табуляция, пробела, Del, ESC или BACKSPACE. Если клавиша SHIFT, CTRL или ALT, она проверяет, является ли комбинация допустимой, и, если это так, устанавливает горячие клавиши, используя сочетание. Все остальные ключи задаются в виде горячих ключей без проверки их достоверности первыми. |
| [**WM \_ сискэйуп**](/windows/desktop/inputdev/wm-syskeyup)       | Извлекает код виртуального ключа.             |
