---
title: Сведения об элементах управления Up-Down
description: Элемент управления "вверх-вниз" — это пара кнопок со стрелками, которые пользователь может щелкнуть для увеличения или уменьшения значения, например, для прокрутки или числа, отображаемого в сопровождающем элементе управления (называемом дружественным окном).
ms.assetid: ae2c0283-9cad-40d1-b8a6-a90484a95f56
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 749014a4b9959b8afd6e769919a0dc9df19e99ce4edeabca774e535f26f4cf8d
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120132163"
---
# <a name="about-up-down-controls"></a>Сведения об элементах управления Up-Down

Элемент управления "вверх-вниз" — это пара кнопок со стрелками, которые пользователь может щелкнуть для увеличения или уменьшения значения, например, для прокрутки или числа, отображаемого в сопровождающем элементе управления (называемом дружественным окном).

Для пользователя элемент управления "вверх-вниз" и его окно часто выглядят как один элемент управления. Можно указать, что элемент управления "вверх-вниз" автоматически располагается рядом с окном собеседника и автоматически задает заголовок окна собеседника в его текущем положении. Например, можно использовать элемент управления "вверх-вниз" с элементом управления "поле ввода", чтобы запросить у пользователя числовые входные данные. На следующем рисунке показан элемент управления "вверх/вниз" с элементом управления "поле ввода" в качестве своего окна собеседника — сочетание, которое иногда называют элементом управления "Счетчик".

![снимок экрана с коротким, широким прямоугольным элементом управления со стрелками вверх и вниз на правой границе](images/updown.jpg)

В этом разделе рассматриваются следующие темы.

-   [Стили элементов управления "вверх/вниз"](#up-down-control-styles)
-   [Позиционирование и ускорение](#position-and-acceleration)
-   [Up-Down по умолчанию управляет обработкой сообщений](#default-up-down-controls-message-processing)

## <a name="up-down-control-styles"></a>Стили элементов управления Up-Down

С помощью стилей окон можно управлять характеристиками элемента управления "вверх/вниз", например, как он позиционируется относительно окна собеседника, определяет, задается ли текст его собеседника и обрабатывает ли он клавиши Стрелка вверх и стрелка вниз.

Элемент управления "вверх-вниз" с стилем [**доменов обновления \_ Алигнлефт**](up-down-control-styles.md) или [**доменов обновления \_ алигнригхт**](up-down-control-styles.md) соответствует левому или правому краю окна собеседника. Ширина окна собеседника уменьшается в соответствии с шириной элемента управления "вверх-вниз".

Элемент управления "вверх-вниз" с стилем [**доменов обновления \_ сетбуддинт**](up-down-control-styles.md) устанавливает заголовок его окна при каждом изменении текущей должности. Элемент управления вставляет разделитель тысяч между всеми тремя цифрами десятичной строки, если не [**указан \_ стиль доменов обновления**](up-down-control-styles.md) . Если окно «собеседник» является списком, то элемент управления "вверх-вниз" задает его текущий выбор, а не его заголовок.

Можно указать стиль [**доменов обновления \_ арровкэйс**](up-down-control-styles.md) , чтобы предоставить интерфейс клавиатуры для элемента управления "вверх/вниз". Если этот стиль указан, элемент управления обрабатывает клавиши со стрелками вверх и вниз. Элемент управления также подклассают окно, чтобы он мог обработать эти ключи, когда в окне собеседника находится фокус.

Если для горизонтальной прокрутки используется элемент управления "вверх-вниз", можно указать стиль [**доменов обновления \_ горизонтали**](up-down-control-styles.md) . Этот стиль приводит к тому, что стрелки вверх-вниз элемента управления указываются слева и справа, а не вверх и вниз.

По умолчанию Текущая позиции не изменяется, если пользователь пытается увеличить или уменьшить значение, выходящее за пределы максимального или минимального значения. Это поведение можно изменить с помощью стиля [**\_ переноса доменов обновления**](up-down-control-styles.md) , чтобы значение "переносится" на противоположный крайний край. Например, приращение после верхнего предела переносит обратно к нижнему пределу.

## <a name="position-and-acceleration"></a>Позиционирование и ускорение

После создания элемента управления "вверх-вниз" можно изменить текущую, минимальную и максимальную координаты элемента управления, отправив сообщения. Кроме того, можно изменить базу системы счисления, используемую для вывода текущей позиции в окне собеседника, и скорость, с которой текущая позиции изменяется при щелчке стрелки вверх или вниз.

Чтобы получить текущую точку элемента управления "вверх-вниз", используйте сообщение [**\_ жетпос UDM**](udm-getpos.md) . Для элемента управления "вверх/вниз" с дружественным окном текущее расположение является числом в заголовке окна собеседника. Так как заголовок мог быть изменен (например, пользователь мог изменить текст элемента управления "поле ввода"), элемент управления "вверх-вниз" получает текущий заголовок и обновляет его текущую точку соответственно.

Заголовок окна собеседника может быть десятичной или шестнадцатеричной строкой в зависимости от основания системы счисления (то есть с основанием 10 или 16) элемента управления "вверх/вниз". Вы можете задать основание системы счисления с помощью сообщения [**\_ сетбасе UDM**](udm-setbase.md) и получить основание системы счисления с помощью сообщения polybase [**UDM \_**](udm-getbase.md) .

В [**сообщении \_ сетпос UDM**](udm-setpos.md) задается текущее расположение дружественного окна. Обратите внимание, что в отличие от полосы прокрутки, элемент управления "вверх-вниз" автоматически меняет свое текущее расположение при нажатии клавиш со стрелками вверх и вниз. Поэтому приложению не нужно задавать текущую точку при обработке сообщения [**WM \_ VSCROLL**](wm-vscroll.md) или [**WM \_ HSCROLL**](wm-hscroll.md) .

Минимальное и максимальное положение элемента управления "вверх/вниз" можно изменить с помощью сообщения [**\_ SETRANGE UDM**](udm-setrange.md) . Максимальное значение может быть меньше минимального, а в этом случае при нажатии кнопки со стрелкой вверх текущее расположение уменьшается. Чтобы поместить его другим способом, можно перейти к максимальному положению. Чтобы получить минимальные и максимальные позиции для элемента управления "вверх/вниз", [**Используйте \_ сообщение "многомерная модель UDM**](udm-getrange.md) ".

Можно управлять частотой изменения позиции, когда пользователь удерживает кнопку со стрелкой, настроив ускоренный элемент управления. Ускорение определяется массивом структур [**удакцел**](/windows/desktop/api/Commctrl/ns-commctrl-udaccel) . Каждая структура задает интервал времени и число единиц, на которое увеличивается или уменьшается в конце этого интервала. Чтобы задать ускорение, используйте сообщение [**\_ сетакцел UDM**](udm-setaccel.md) . Чтобы получить сведения об ускорении, используйте сообщение необязательности [**UDM \_**](udm-getaccel.md) .

## <a name="default-up-down-controls-message-processing"></a>Up-Down по умолчанию управляет обработкой сообщений

в этом разделе описываются стандартные Windows сообщения, обрабатываемые элементом управления "вверх/вниз".



| Message                                        | Обработка выполнена                                                                                                                                                                                         |
|------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**\_Создание WM**](/windows/desktop/winmsg/wm-create)             | Выделяет и инициализирует закрытую структуру данных и сохраняет ее адрес как данные окна.                                                                                                                     |
| [**WM \_ destroy**](/windows/desktop/winmsg/wm-destroy)           | Освобождает данные, выделенные во время обработки с [**\_ созданием WM**](/windows/desktop/winmsg/wm-create) .                                                                                                                                   |
| [**\_Включение WM**](/windows/desktop/winmsg/wm-enable)             | Делает недействительным окно.                                                                                                                                                                                      |
| [**WM \_ KeyDown**](/windows/desktop/inputdev/wm-keydown)         | Изменяет текущую точку в случае нажатия клавиши со стрелкой вверх или стрелки вниз.                                                                                                                                   |
| [**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup)             | Завершает изменение расположения.                                                                                                                                                                               |
| [**WM \_ лбуттондовн**](/windows/desktop/inputdev/wm-lbuttondown) | Захватывает мышь. Если окно собеседника является полем редактирования или списком, оно устанавливает фокус на окно собеседника. Если мышь находится над кнопкой вверх или вниз, она начинает изменять расположение и устанавливает таймер. |
| [**WM \_ лбуттонуп**](/windows/desktop/inputdev/wm-lbuttonup)     | Завершает изменение расположения и отпускает захват мыши, если элемент управления "вверх-вниз" захватил мышь. Если окно собеседника является элементом управления редактированием, он выделяет весь текст в элементе управления Edit.             |
| [**WM \_ Paint**](/windows/desktop/gdi/wm-paint)                  | Закрашивает элемент управления "вверх-вниз". Если параметр *wParam* не равен null, то элемент управления предполагает, что значение является **HDC** и рисует его с помощью контекста устройства.                                                    |
| [**\_таймер WM**](/windows/desktop/winmsg/wm-timer)               | Изменяет текущую точку, если мышь удерживается над кнопкой, и пройдет достаточный интервал.                                                                                            |



 

 

 