---
title: Вспомогательные темы высокая контрастность
description: В этом разделе сравнивается поддержка тем с высокой контрастностью в Windows 8 и более ранних версий Windows, а также объясняется, как поддерживать темы с высокой контрастностью в приложениях Windows 8.
ms.assetid: 6E4F1198-E69C-4C60-B3B0-2702AECAA203
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2068d64b585f302f578296c9e156895c23b9bce9
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "103891113"
---
# <a name="supporting-high-contrast-themes"></a>Вспомогательные темы высокая контрастность

В этом разделе сравнивается поддержка тем с высокой контрастностью в Windows 8 и более ранних версий Windows, а также объясняется, как поддерживать темы с высокой контрастностью в приложениях Windows 8.

Он включает в себя следующие разделы.

-   [Общие сведения о поддержке для высокая контрастностьных тем](#overview-of-support-for-high-contrast-themes)
-   [Поддержка тем высокая контрастность в Windows 8 и более поздних версиях](#supporting-high-contrast-themes-in-windows-8-and-later)
-   [Добавление раздела "совместимость" в манифест приложения](#adding-a-compatibility-section-to-your-application-manifest)
-   [Обнаружение высокая контрастность в предыдущих версиях Windows](#detecting-high-contrast-in-previous-versions-of-windows)
-   [См. также](#related-topics)

## <a name="overview-of-support-for-high-contrast-themes"></a>Общие сведения о поддержке для высокая контрастностьных тем

Windows 7 и более ранние версии поддерживают две модели, включая классическую модель Windows и текущие стили оформления. Классическая модель Windows была сохранена в Windows 7 главным образом для поддержки различных тем высокой контрастности. Однако классическая модель Windows имеет ряд недостатков:

-   Нет поддержки тем, которые используют стили оформления, например Windows Aero. Пользователи с темами с высокой контрастностью должны использовать классический пользовательский интерфейс Windows.
-   Не поддерживаются функции пользовательского интерфейса, которые используют диспетчер окон рабочего стола (DWM) для выполнения, такие как предварительный просмотр эскизов и полноэкранная экранная лупа, появившаяся в Windows 7.
-   Разработчики должны поддерживать два отдельных пути кода для поддержки двух разных моделей.

В ОС Windows 8 и более поздних версиях следующие изменения в модели позволяют устранить предыдущие недостатки:

-   Модель классической модели Windows больше не поддерживается, что позволяет разработчикам поддерживать только один путь кода для приложений, предназначенных только для Windows 8.
-   Поскольку стили оформления и DWM включены в Windows 8, пользователи с высокой контрастностью имеют доступ к таким функциям, как предварительный просмотр эскизов и полноэкранная экранная лупа.
-   Визуальные стили поддерживают настройку цветов различных элементов пользовательского интерфейса, позволяя пользователям с высокой контрастностью настраивать пользовательский интерфейс в соответствии с индивидуальными потребностями и предпочтениями.
-   В Windows 8 реализована поддержка совместимости для существующих приложений, предназначенных для использования высококонтрастных тем, основанных на классической модели Windows.

## <a name="supporting-high-contrast-themes-in-windows-8-and-later"></a>Поддержка тем высокая контрастность в Windows 8 и более поздних версиях

В Windows 8, поскольку стили оформления включены в режиме высокой контрастности, поддержка тем с высокой контрастностью очень проста, если вы хотите следовать приведенным ниже рекомендациям.

-   Размеры шрифта и элементов управления. Чтобы обеспечить доступность пользовательского интерфейса для пользователей с ограниченными возможностями, установите размеры шрифтов в соответствии с текущими параметрами темы. Установите размер элементов управления как минимум по размеру по умолчанию.
-   "Цвета". Старайтесь не использовать жестко запрограммированные цвета. Вместо этого используйте системные цвета, так как они основаны на текущей теме. Использование пользовательских цветов может помешать и переопределить цвета в темах с высокой контрастностью.
-   Манифест приложения. Для приложений, предназначенных для работы с новыми темами с высокой контрастностью, в манифесте должен быть определен раздел совместимости приложений, содержащий идентификаторы GUID совместимости с Windows 8. В противном случае Windows предполагает, что приложение предназначено для более старой версии Windows и отображает пользовательский интерфейс приложения, имитируя модель классической модели Windows.

## <a name="adding-a-compatibility-section-to-your-application-manifest"></a>Добавление раздела "совместимость" в манифест приложения

Манифест приложения — это XML-файл, описывающий требования к приложению. Раздел Compatibility (совместимость) манифеста определяет версии Windows, поддерживаемые приложением. Следующие идентификаторы GUID используются в разделе "совместимость" для обнаружения различных версий Windows.

| Версия       | Код GUID                                   |
|---------------|----------------------------------------|
| Windows Vista | {e2011457-1546-43c5-a5fe-008deee3d3f0} |
| Windows 7     | {35138b9a-5d96-4fbd-8e2d-a2440225f93a} |
| Windows 8     | {4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38} |



 

В разделе "совместимость" можно указать несколько версий Windows, но каждая из них должна содержаться в своем собственном `<supportedOS/>` теге. В следующем примере показан манифест приложения, задающий Windows 7 и Windows 8 в разделе Compatibility:


```C++
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
        <application>
            <!--The ID below indicates application support for Windows 8 -->
            <supportedOS Id="{4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}"/>

            <!--The ID below indicates application support for Windows 7 -->
            <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>
        </application>
    </compatibility>
</assembly>
```



Если приложение не имеет манифеста совместимости, предполагается, что оно является приложением Windows Vista и не использует элементы управления темами в клиентской области при активной теме с высокой контрастностью. Кроме того, влияет поведение некоторых функций визуальных стилей. Например, [**иссемеактиве**](/windows/desktop/api/Uxtheme/nf-uxtheme-isthemeactive), [**искомпоситионактиве**](/windows/desktop/api/Uxtheme/nf-uxtheme-iscompositionactive)и [**исаппсемед**](/windows/desktop/api/Uxtheme/nf-uxtheme-isappthemed) возвращают значение false, а [**опенсемедата**](/windows/desktop/api/Uxtheme/nf-uxtheme-openthemedata) и [**опенсемедатаекс**](/windows/desktop/api/Uxtheme/nf-uxtheme-openthemedataex) возвращают нулевой маркер. Это обеспечивает поддержку совместимости, поэтому приложения, созданные до Windows 8, могут по-прежнему отображать пользовательский интерфейс в том же виде, что и режим высокой контрастности в предыдущих версиях Windows, где стили оформления недоступны.

В Windows 8 приложение по-прежнему получает преимущества композиции рабочего стола. Это означает, например, что приложения для удобства использования, такие как полноэкранная экранная лупа, не зависят от состояния манифеста отдельного приложения. Приложение для удобства использования продолжит работать в режиме высокой контрастности с приложением, которое не определяет себя как совместимое с Windows 8 в манифесте.

На следующих изображениях показано простое диалоговое окно с высокой контрастностью в Windows 7.

![диалоговое окно «контрастность целях»](images/win7-high-contrast.png)

На этом рисунке показано то же диалоговое окно с высокой контрастностью в Windows 8, но с совместимостью Windows 7, указанным в манифесте приложения:

![диалоговое окно «высокая контрастность» W8](images/win7-compat.png)

На этом рисунке показано то же диалоговое окно с высокой контрастностью в Windows 8, в котором Windows 8 указана в манифесте приложения:

![диалоговое окно высокой контрастности W8 с манифестом](images/win8-manifest.png)

## <a name="detecting-high-contrast-in-previous-versions-of-windows"></a>Обнаружение высокая контрастность в предыдущих версиях Windows

Приложения, работающие в предыдущих версиях Windows, не имеют доступа к новым темам с высокой контрастностью. Если приложение должно работать в предыдущих версиях, следует включить поддержку визуализации пользовательского интерфейса в высоком Контравиндовсст в классической модели Windows. Приложение может определить, активна ли тема с высокой контрастностью, вызвав функцию [**системпараметерсинфо**](/windows/desktop/api/winuser/nf-winuser-systemparametersinfoa) с флагом **SPI \_ жесигхконтраст** .

## <a name="related-topics"></a>См. также

<dl> <dt>

[Включение стилей оформления](cookbook-overview.md)
</dt> <dt>

[Стили оформления](themes-overview.md)
</dt> </dl>

 

 