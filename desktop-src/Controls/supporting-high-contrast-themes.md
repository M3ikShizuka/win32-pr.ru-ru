---
title: Вспомогательные темы высокая контрастность
description: в этом разделе сравнивается поддержка тем с высокой контрастностью в Windows 8 с предыдущими версиями Windows и объясняется, как поддерживать темы с высокой контрастностью в приложении Windows 8.
ms.assetid: 6E4F1198-E69C-4C60-B3B0-2702AECAA203
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7f32c89302daeb7190174a0d6b9e822e1c55d3e530ad29baedd00c5ffdefc97b
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118670643"
---
# <a name="supporting-high-contrast-themes"></a>Вспомогательные темы высокая контрастность

в этом разделе сравнивается поддержка тем с высокой контрастностью в Windows 8 с предыдущими версиями Windows и объясняется, как поддерживать темы с высокой контрастностью в приложении Windows 8.

Он включает в себя следующие разделы.

-   [Общие сведения о поддержке для высокая контрастностьных тем](#overview-of-support-for-high-contrast-themes)
-   [поддержка тем высокая контрастность в Windows 8 и более поздних версиях](#supporting-high-contrast-themes-in-windows-8-and-later)
-   [Добавление раздела "совместимость" в манифест приложения](#adding-a-compatibility-section-to-your-application-manifest)
-   [Обнаружение высокая контрастность в предыдущих версиях Windows](#detecting-high-contrast-in-previous-versions-of-windows)
-   [Связанные темы](#related-topics)

## <a name="overview-of-support-for-high-contrast-themes"></a>Общие сведения о поддержке для высокая контрастностьных тем

Windows 7 и более ранних версий поддерживают две модели, включая классическую модель Windows классической модели и текущие стили оформления. классическая модель Windows была сохранена в Windows 7 главным образом для поддержки различных тем высокой контрастности. однако Windows классическая модель имеет ряд недостатков:

-   нет поддержки тем, которые используют стили оформления, например Windows Aero. пользователи с темами с высокой контрастностью должны использовать классический пользовательский интерфейс Windows.
-   не поддерживаются функции пользовательского интерфейса, которые используют диспетчер окон рабочего стола (DWM) для выполнения, такие как предварительный просмотр эскизов и полноэкранная экранная лупа, появившаяся в Windows 7.
-   Разработчики должны поддерживать два отдельных пути кода для поддержки двух разных моделей.

в Windows 8 и более поздних версиях следующие изменения в модели позволяют устранить предыдущие недостатки:

-   Windows модель классической модели больше не поддерживается, что позволяет разработчикам поддерживать только один путь кода для приложений, предназначенных только для Windows 8.
-   так как стили оформления и DWM включены в Windows 8, пользователи с высокой контрастностью имеют доступ к таким функциям, как предварительный просмотр эскизов и полноэкранная экранная лупа.
-   Визуальные стили поддерживают настройку цветов различных элементов пользовательского интерфейса, позволяя пользователям с высокой контрастностью настраивать пользовательский интерфейс в соответствии с индивидуальными потребностями и предпочтениями.
-   Windows 8 включает поддержку совместимости для существующих приложений, предназначенных для использования высококонтрастных тем, основанных на Windows классической модели.

## <a name="supporting-high-contrast-themes-in-windows-8-and-later"></a>поддержка тем высокая контрастность в Windows 8 и более поздних версиях

в Windows 8, поскольку стили оформления включены в режиме высокой контрастности, поддержка высококонтрастных тем очень проста, если вы хотите следовать приведенным ниже рекомендациям.

-   Размеры шрифта и элементов управления. Чтобы обеспечить доступность пользовательского интерфейса для пользователей с ограниченными возможностями, установите размеры шрифтов в соответствии с текущими параметрами темы. Установите размер элементов управления как минимум по размеру по умолчанию.
-   "Цвета". Старайтесь не использовать жестко запрограммированные цвета. Вместо этого используйте системные цвета, так как они основаны на текущей теме. Использование пользовательских цветов может помешать и переопределить цвета в темах с высокой контрастностью.
-   Манифест приложения. для приложений, предназначенных для работы с новыми темами с высокой контрастностью, в манифесте должен быть определен раздел совместимости приложений, содержащий идентификаторы guid совместимости Windows 8. в противном случае Windows предполагает, что приложение предназначено для более ранней версии Windows и отображает пользовательский интерфейс приложения путем имитации Windows классической модели.

## <a name="adding-a-compatibility-section-to-your-application-manifest"></a>Добавление раздела "совместимость" в манифест приложения

Манифест приложения — это XML-файл, описывающий требования к приложению. раздел compatibility (совместимость) манифеста определяет версии Windows, поддерживаемые приложением. Следующие идентификаторы GUID используются в разделе "совместимость" для обнаружения различных версий Windows.

| Версия       | GUID                                   |
|---------------|----------------------------------------|
| Windows Vista | {e2011457-1546-43c5-a5fe-008deee3d3f0} |
| Windows 7     | {35138b9a-5d96-4fbd-8e2d-a2440225f93a} |
| Windows 8     | {4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38} |



 

в разделе "совместимость" можно указать несколько версий Windows, но каждая из них должна содержаться в своем собственном `<supportedOS/>` теге. в следующем примере показан манифест приложения, указывающий Windows 7 и Windows 8 в разделе compatibility:


```C++
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
        <application>
            <!--The ID below indicates application support for Windows 8 -->
            <supportedOS Id="{4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}"/>

            <!--The ID below indicates application support for Windows 7 -->
            <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>
        </application>
    </compatibility>
</assembly>
```



если приложение не имеет манифеста совместимости, предполагается, что это приложение Windows Vista и не использует элементы управления темами в клиентской области при активной теме с высокой контрастностью. Кроме того, влияет поведение некоторых функций визуальных стилей. Например, [**иссемеактиве**](/windows/desktop/api/Uxtheme/nf-uxtheme-isthemeactive), [**искомпоситионактиве**](/windows/desktop/api/Uxtheme/nf-uxtheme-iscompositionactive)и [**исаппсемед**](/windows/desktop/api/Uxtheme/nf-uxtheme-isappthemed) возвращают значение false, а [**опенсемедата**](/windows/desktop/api/Uxtheme/nf-uxtheme-openthemedata) и [**опенсемедатаекс**](/windows/desktop/api/Uxtheme/nf-uxtheme-openthemedataex) возвращают нулевой маркер. это обеспечивает поддержку совместимости, поэтому приложения, созданные до Windows 8, по-прежнему могут визуализировать свой интерфейс в том же виде, что и режим высокой контрастности в предыдущих версиях Windows, где визуальные стили недоступны.

на Windows 8 приложение по-прежнему получает преимущества композиции рабочего стола. Это означает, например, что приложения для удобства использования, такие как полноэкранная экранная лупа, не зависят от состояния манифеста отдельного приложения. приложение для удобства использования продолжит работать в режиме высокой контрастности с приложением, которое не расповодилось как Windows 8 совместимо в манифесте.

на следующих изображениях показано простое диалоговое окно с высокой контрастностью в Windows 7.

![диалоговое окно «контрастность целях»](images/win7-high-contrast.png)

на этом рисунке показано то же диалоговое окно с высокой контрастностью Windows 8, но с совместимостью Windows 7, указанной в манифесте приложения:

![диалоговое окно «высокая контрастность» W8](images/win7-compat.png)

на этом рисунке показано то же диалоговое окно с высокой контрастностью в Windows 8 с Windows 8, указанным в манифесте приложения:

![диалоговое окно высокой контрастности W8 с манифестом](images/win8-manifest.png)

## <a name="detecting-high-contrast-in-previous-versions-of-windows"></a>Обнаружение высокая контрастность в предыдущих версиях Windows

приложения, работающие в предыдущих версиях Windows, не имеют доступа к новым темам с высокой контрастностью. если приложение должно работать в предыдущих версиях, следует включить поддержку визуализации пользовательского интерфейса в высоком контравиндовсст в классической модели Windows. Приложение может определить, активна ли тема с высокой контрастностью, вызвав функцию [**системпараметерсинфо**](/windows/desktop/api/winuser/nf-winuser-systemparametersinfoa) с флагом **SPI \_ жесигхконтраст** .

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Включение стилей оформления](cookbook-overview.md)
</dt> <dt>

[Стили оформления](themes-overview.md)
</dt> </dl>

 

 