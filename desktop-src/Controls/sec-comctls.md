---
title: Вопросы безопасности элементы управления Microsoft Windows
description: В этом разделе содержатся сведения о вопросах безопасности, связанных с элементами управления Windows.
ms.assetid: d5396fa1-452e-40e1-beaf-ae04690048f1
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e29ba986ddd1db980134f428c8abf152321617ef
ms.sourcegitcommit: 773fa6257ead6c74154ad3cf46d21e49adc900aa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/09/2020
ms.locfileid: "104134734"
---
# <a name="security-considerations-microsoft-windows-controls"></a>Вопросы безопасности: элементы управления Microsoft Windows

В этом разделе содержатся сведения о вопросах безопасности, связанных с элементами управления Windows. Сведения в этом разделе не предоставляют все, что нужно знать о проблемах безопасности — используйте его в качестве отправной точки и ссылки для этой области.

Взаимодействие между компьютерами является типичным; главным фактором разработчика должна быть безопасность приложений. В следующих разделах рассматриваются некоторые потенциальные проблемы безопасности, которые следует учитывать при программировании элементов управления Windows.

-   [Управляющие сообщения, заканчивающиеся нулем](#null-terminated-control-messages)
-   [Использование строк](#string-use)
-   [Проверка входных данных](#input-validation)
-   [Использование пароля](#password-use)
-   [Оповещения системы безопасности](#security-alerts)
-   [См. также](#related-topics)

## <a name="null-terminated-control-messages"></a>Управляющие сообщения, заканчивающиеся нулем

Многие управляющие сообщения и макросы имеют строковые параметры. Часто эти сообщения не проверяют входные строки, в частности, не выполняют проверку на завершение `'\0'` . При вызове сообщения, использующего строку в качестве параметра, явно указывает, что строка завершается нулем.

## <a name="string-use"></a>Использование строк

При программировании элементов управления Windows необходимо управлять строками. Почти каждый элемент управления требует вставки текста. Например, чтобы заполнить окно списка, необходимо загрузить строки в элемент управления. Поскольку неправильное использование строк часто приводит к переполнению буфера, примите меры предосторожности, чтобы избежать этой угрозы безопасности.

Дополнительные сведения о переполнении буфера см. в статье *написание безопасного кода* с помощью Майкла Ховарда и Дэвида Леблана, Microsoft Press, 2002 и рекомендаций [по использованию API-интерфейсов безопасности](/windows/desktop/SecBP/best-practices-for-the-security-apis).

## <a name="input-validation"></a>Проверка входных данных

Следующие управляющие сообщения могут представлять проблемы безопасности.

-   [**\_ЖЕТЛБТЕКСТ CB**](cb-getlbtext.md)
-   [**LVM \_ жетисеарчстринг**](lvm-getisearchstring.md)
-   [**SB ( \_ SMS)**](sb-gettext.md)
-   [**SB \_ жеттиптекст**](sb-gettiptext.md)
-   [**\_ЖЕТБУТТОНТЕКСТ ТБ**](tb-getbuttontext.md)
-   [**ТТМ \_ gettext**](ttm-gettext.md)
-   [**TVM \_ жетисеарчстринг**](tvm-getisearchstring.md)

Если текст изменяется между вызовом для получения длины текста и времени отображения или использования текста, может произойти переполнение буфера. Чтобы избежать этого, необходимо проверить строку перед ее использованием. Кроме того, сообщения, которые получают текст, [**CB \_ жетлбтекст**](cb-getlbtext.md), [**ТБ \_ жетбуттонтекст**](tb-getbuttontext.md)и [**ТТМ \_ gettext**](ttm-gettext.md), не имеют параметра размера буфера, который представляет потенциал для переполнения буфера.

При использовании [**\_ жетлбтекст CB**](cb-getlbtext.md) или SB необходимо сначала вызвать [**CB \_ жетлбтекстлен**](cb-getlbtextlen.md) или [**SB \_ жеттекстленгс**](sb-gettextlength.md) , чтобы получить размер буфера. [**\_**](sb-gettext.md) Некоторые из этих сообщений, [**ТБ \_ жетбуттонтекст**](tb-getbuttontext.md), [**LVM \_ жетисеарчстринг**](lvm-getisearchstring.md)и [**TVM \_ жетисеарчстринг**](tvm-getisearchstring.md), можно вызвать с **нулевым** значением параметра, чтобы получить длину строки перед вызовом сообщения для получения строки.

Сообщение о том, что следует обратить особое внимание на, — это строка состояния с сообщением о [**\_ жеттиптекст**](sb-gettiptext.md) . Это сообщение не дает возможности запрашивать длину извлекаемой строки.

## <a name="password-use"></a>Использование пароля

Если вы используете защищенные паролем элементы управления редактирования (например,[**\_ пароль ES**](edit-control-styles.md) ), буфер, содержащий полученный текст, должен быть установлен в значение 0 как можно скорее, чтобы избежать предоставления пароля пользователя в памяти.

## <a name="security-alerts"></a>Оповещения системы безопасности

В следующей таблице перечислены функции, которые при неправильном использовании могут поставить под угрозу безопасность приложений. Указанные здесь сообщения не содержат параметр, указывающий размер буфера.



| Функция                                               | Меры по снижению риска                                                                                                                                              |
|-------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**длгдирлисткомбобокс**](/windows/desktop/api/Winuser/nf-winuser-dlgdirlistcomboboxa)      | Убедитесь, что буфер, используемый функцией, может быть записан в и завершается нулем.                                                                     |
| [**\_ЖЕТЛБТЕКСТ CB**](cb-getlbtext.md)                 | Вызовите [**CB \_ жетлбтекстлен**](cb-getlbtextlen.md) , чтобы получить размер буфера, а затем вызовите [**CB \_ жетлбтекст**](cb-getlbtext.md) , чтобы получить строку. |
| [**LVM \_ жетисеарчстринг**](lvm-getisearchstring.md) | Вызовите сообщение с **нулевым** значением параметра, чтобы получить размер буфера, а затем вызовите сообщение еще раз, чтобы получить строку.             |
| [**SB ( \_ SMS)**](sb-gettext.md)                     | Вызовите [**SB \_ жеттекстленгс**](sb-gettextlength.md) , чтобы получить размер буфера, а затем вызовите [**SB \_ gettext**](sb-gettext.md) , чтобы получить строку.   |
| [**\_ЖЕТБУТТОНТЕКСТ ТБ**](tb-getbuttontext.md)         | Вызовите сообщение с **нулевым** значением параметра, чтобы получить размер буфера, а затем вызовите сообщение еще раз, чтобы получить строку.             |
| [**ТТМ \_ gettext**](ttm-gettext.md)                   | Это сообщение не дает способа определить или указать размер буфера.                                                                  |
| [**TVM \_ жетисеарчстринг**](tvm-getisearchstring.md) | Вызовите сообщение, передав значение параметра **null** , чтобы получить размер буфера, а затем вызовите сообщение еще раз, чтобы получить строку.       |



 

## <a name="related-topics"></a>См. также

<dl> <dt>

**Другие ресурсы**
</dt> <dt>

[Microsoft Security](https://www.microsoft.com/security/default.aspx)
</dt> <dt>

[Безопасность](/windows/desktop/security)
</dt> <dt>

[Материалы по безопасности TechNet](https://www.microsoft.com/technet/security/Bulletin/MS10-059.mspx)
</dt> <dt>

[Рекомендации по использованию API безопасности](/windows/desktop/SecBP/best-practices-for-the-security-apis)
</dt> </dl>

 

 