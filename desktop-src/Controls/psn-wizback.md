---
title: Код уведомления PSN_WIZBACK (Пршт. h)
description: Уведомляет страницу о том, что пользователь щелкнул кнопку назад в мастере. Этот код уведомления отправляется в виде \_ сообщения WM notify.
ms.assetid: 784f92e7-6f10-40fc-b513-bea022f13ae1
keywords:
- PSN_WIZBACK кода уведомления элементы управления Windows
topic_type:
- apiref
api_name:
- PSN_WIZBACK
api_location:
- Prsht.h
api_type:
- HeaderDef
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: aed1cdd742d78473266db07899796de5a5450310
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "103891414"
---
# <a name="psn_wizback-notification-code"></a>\_Код уведомления PSN визбакк

Уведомляет страницу о том, что пользователь щелкнул кнопку **назад** в мастере. Этот код уведомления отправляется в виде сообщения [**WM \_ Notify**](wm-notify.md) .


```C++
PSN_WIZBACK 

    lppsn = (LPPSHNOTIFY) lParam; 
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*lParam* 
</dt> <dd>

Указатель на структуру [**пшнотифи**](/windows/desktop/api/Prsht/ns-prsht-pshnotify) , содержащую сведения о коде уведомления. Эта структура содержит структуру [**NMHDR**](/windows/desktop/api/richedit/ns-richedit-nmhdr) в качестве первого элемента, **HDR**. Элемент **хвндфром** этой структуры **NMHDR** содержит маркер для страницы свойств. Член **lParam** структуры **пшнотифи** не содержит никаких сведений.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Возвращает значение 0, чтобы разрешить мастеру переходить на предыдущую страницу. Возвращает значение-1, чтобы мастер не изменял страницы. Чтобы отобразить определенную страницу, возвращается идентификатор ее ресурса диалогового окна. Если диалоговое окно было указано с флагом [**PSP \_ длгиндирект**](/windows/desktop/api/Prsht/ns-prsht-propsheetpagea_v2) , это уведомление возвращает указатель на шаблон диалогового окна.

## <a name="remarks"></a>Комментарии

Чтобы задать возвращаемое значение, процедура диалогового окна для страницы должна вызвать функцию [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) со значением **DWL \_ Мсгресулт** и вернуть значение **true**. Пример:

``` syntax
case PSN_WIZBACK :
    SetWindowLong(hDlg, DWL_MSGRESULT, 0);
    break;

case PSN_WIZNEXT :
    ...
```

> [!Note]  
> Страница свойств находится в процессе управления списком страниц при \_ отправке кода уведомления PSN визбакк. В ответ на эти коды уведомлений можно добавлять, вставлять или удалять страницы, но при вставке или удалении страниц перед текущей страницей необходимо учитывать особое внимание.

 

При вставке или удалении страниц перед текущей страницей необходимо вернуть (до **DWL \_ мсгресулт**) ненулевое значение, чтобы указать нужную новую страницу. Однако обратите внимание, что при вставке или удалении страницы, расположенной перед текущей страницей (с меньшим индексом, чем текущая страница), [PSN \_ киллактиве](psn-killactive.md) может быть отправлен на неправильную страницу.

По этой причине рекомендуется, чтобы мастера, которые динамически добавляют и удаляют страницы в ответ на [PSN \_ ВИЗНЕКСТ](psn-wiznext.md) и PSN \_ визбакк, могли делать это только на страницах в конце списка. Если вы хотите, чтобы мастер удалил страницы точно, сохраните динамические страницы в конце списка и вернитесь к постоянным страницам, прежде чем удалять их.

Например, предположим, что мастер состоит из вводной страницы, серии динамических страниц и страницы завершения, и вы хотите удалить динамические страницы, когда пользователь достигнет страницы завершения.

1.  Мастер начнет работу с двумя страницами: «введение» и «завершение». Пользователь начинает со страницы "Введение".
    1.  Введение (пользователь здесь)
    2.  Completion
2.  Когда пользователь выходит из "введения", мастер добавляет динамические страницы и помещает пользователя на первую динамическую страницу, возвращая (до **DWL \_ мсгресулт**) идентификатор диалога для страницы "Dynamic 1". В этом примере есть три динамические страницы.
    1.  Введение
    2.  Completion
    3.  Динамический 1 (пользователь здесь)
    4.  Динамический 2
    5.  Динамический 3
3.  После того как пользователь перейдет по динамическим страницам в "Dynamic 3", а затем перейдет к следующей странице, приложение должно поместить пользователя на страницу "завершение". Опять же, это делается путем возврата (до **DWL \_ мсгресулт**) идентификатора диалогового окна "завершение".
    1.  Введение
    2.  Завершение (пользователь здесь)
    3.  Динамический 1
    4.  Динамический 2
    5.  Динамический 3
4.  Затем приложение может безопасно удалить три динамические страницы (с номерами от трех до пяти).
    1.  Введение
    2.  Завершение (пользователь здесь)

Обратите внимание, что этот метод необходим только в том случае, если мастер удаляет страницы динамически. Если мастер добавляет только страницы динамически, этот процесс не является обязательным.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Только для \[ классических приложений Windows Vista\]<br/>                                     |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2003\]<br/>                               |
| Header<br/>                   | <dl> <dt>Пршт. h</dt> </dl> |



 

