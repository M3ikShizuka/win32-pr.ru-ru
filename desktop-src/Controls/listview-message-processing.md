---
title: Обработка сообщений по умолчанию List-View
description: В этом разделе перечислены процессы обработки сообщений окна, выполняемые элементом управления "представление списка".
ms.assetid: c634c446-37e5-4f7c-b337-306c29961e58
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 27daa334b8640c855c150216f68e8b243cacbc7b2fe9a218a7e3e17bf69402b8
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119698844"
---
# <a name="default-list-view-message-processing"></a>Обработка сообщений по умолчанию List-View

В этом разделе перечислены процессы обработки сообщений окна, выполняемые элементом управления "представление списка".

## <a name="message-processing"></a>Обработка сообщений

В следующей таблице описывается обработка сообщений окна, выполняемая элементом управления "представление списка".



| Message                  | Обработка выполнена                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|--------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **WM \_ char**             | Выполняет поиск элемента представления списка, который начинается с указанного символа, и, если элемент найден, выбирает и устанавливает фокус на элемент. Несколько символов, получаемых в течение интервала времени ожидания (в данный момент исправлено на одну секунду), объединяются, а элемент управления "представление списка" выполняет поиск элемента, который начинается с результирующей строки.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **\_команда WM**          | Обрабатывает коды уведомлений " [en \_ Update](en-update.md) " и " [en \_ киллфокус](en-killfocus.md) " и пересылает все остальные уведомления элемента управления Edit в родительское окно.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **\_Создание WM**           | Выполняет инициализацию, дополнительную для [**WM \_ нккреате**](/windows/desktop/winmsg/wm-nccreate). Если не указан стиль окна [**LVS \_ шареимажелистс**](list-view-window-styles.md) , элемент управления "представление списка" создает на этом этапе список изображений значок и маленький значок.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **WM \_ destroy**          | Освобождает ресурсы, выделенные во время [**\_ создания WM**](/windows/desktop/winmsg/wm-create).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **WM \_ ерасебкгнд**       | Стирает фон окна, используя текущий цвет фона для элемента управления "представление списка". Если цвет фона равен \_ значению CLR None, элемент управления "представление списка" пересылает сообщение родительскому окну.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **WM \_ жетдлгкоде**       | Возвращает сочетание \_ значений длгк ванттаб и длгк \_ вантарровс.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **WM, \_ Шрифт**          | Возвращает маркер для текущего шрифта метки.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **WM \_ HSCROLL**          | Прокручивает элемент управления «список» по горизонтали.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **WM \_ KeyDown**          | Обрабатывает клавиши «пробел», «ввод» и «стрелка» и отправляет код уведомления [ЛВН \_ KeyDown](lvn-keydown.md) в родительское окно.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **WM \_ киллфокус**        | Перерисовывает элемент списка с упором, если он есть, и отправляет в родительское окно код уведомления [NM \_ киллфокус](nm-killfocus.md) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **WM \_ лбуттондблклк**    | Отправляет родительское окно с кодом уведомления [NM \_ дблклк (представление списка)](nm-dblclk-list-view.md) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **WM \_ лбуттондовн**      | Обрабатывается различными способами в зависимости от того, инициируется ли операция щелчка или перетаскивания. Чтобы определить, какая операция задействована, элемент управления "представление списка" переходит в модальный цикл обработки сообщений до тех пор, пока кнопка не будет отпущена или не будет перемещена мышь. В случае щелчка элемент управления "представление списка" может изменить, какой элемент имеет фокус и какие элементы выбраны, принимая во внимание позицию курсора, состояние клавиш SHIFT и CTRL и т. д. Затем элемент управления "представление списка" отправляет свое родительское окно в виде кода уведомления [ \_ Click (представление списка) NM](nm-click-list-view.md) .<br/> Если перетаскивание начинается над элементом, элемент управления "представление списка" выбирает и устанавливает фокус на элемент. Затем он отправляет код уведомления [ЛВН \_ бегиндраг](lvn-begindrag.md) в родительское окно. Родительское окно несет ответственность за фактическое проведение операции перетаскивания.<br/> Если перетаскивание начинается над фоном окна, элемент управления "представление списка" переходит в другой модальный цикл обработки сообщений, позволяя пользователю формировать прямоугольник, перетаскивая указатель мыши. Выделены элементы внутри прямоугольника.<br/> |
| **WM \_ нккреате**         | Выделяет и инициализирует внутреннюю структуру данных, а затем вызывает функцию [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **WM \_ нкдестрой**        | Освобождает ресурсы, выделенные элементом управления "представление списка". Если не используется стиль [**LVS \_ шареимажелистс**](list-view-window-styles.md) , это включает удаление полноразмерных и мелких списков изображений.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **\_уведомление WM**           | Обрабатывает коды уведомлений элемента управления "заголовок".                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **WM \_ Paint**            | Отображает все элементы в области обновления. Для элементов обратного вызова элемент управления сначала отправляет код уведомления [ЛВН \_ жетдиспинфо](lvn-getdispinfo.md) в окно владельца, чтобы запросить отображаемую информацию. Если параметр *wParam* не равен null, то элемент управления предполагает, что значение является HDC и рисует его с помощью контекста устройства.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **WM \_ рбуттондовн**      | Обрабатывается так же, как [**сообщение \_ лбуттондовн WM**](/windows/desktop/inputdev/wm-lbuttondown) , за исключением того, что элемент управления отправляет код уведомления [NM \_ ркликк (представление списка](nm-rclick-list-view.md) ) (вместо [NM \_ Click (представление списка)](nm-click-list-view.md)) и код уведомления [ЛВН \_ бегинрдраг](lvn-beginrdrag.md) (вместо [ЛВН \_ бегиндраг](lvn-begindrag.md)). Обратите внимание, что элемент управления обрабатывает соответствующее сообщение [**WM \_ рбуттонуп**](/windows/desktop/inputdev/wm-rbuttonup) и не отправляет его. Поэтому приложения не могут видеть это сообщение даже путем подкласса элемента управления.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **WM \_ SETFOCUS**         | Перерисовывает элемент списка с упором, если он есть, и отправляет код уведомления [NM \_ SETFOCUS](nm-setfocus.md) в родительское окно.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **WM \_ сетфонт**          | Сохраняет указанный маркер шрифта, перенаправляет сообщение в окно заголовка, если оно есть, и перерисовывает его с помощью нового шрифта.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **WM \_ сетредрав**        | Включает или выключает перерисовку.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **\_таймер WM**            | Начинает редактирование метки элемента. Если пользователь щелкает метку элемента с заголовком, элемент управления "представление списка" устанавливает таймер вместо немедленного входа в режим редактирования. Таймер позволяет элементу управления "список" *не* перейти в режим редактирования, если пользователь дважды щелкнет метку.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **WM \_ VSCROLL**          | Прокручивает элемент управления «список» по вертикали.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **WM \_ виндовпосчанжед** | Обновляет полосы прокрутки окна. Если текущее представление является значком или небольшим представлением значка и задан стиль [**\_ автоупорядочивания LVS**](list-view-window-styles.md) , элемент управления "представление списка" также будет упорядочивать элементы списка.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **WM \_ вининичанже**     | Обрабатывает изменения системных метрик.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |



 

 

