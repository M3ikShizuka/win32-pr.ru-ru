---
title: Сообщение TB_SETIMAGELIST (Коммктрл. h)
description: Задает список изображений, используемый панелью инструментов для отображения кнопок, которые находятся в состоянии по умолчанию.
ms.assetid: 432ffdfc-bb63-4405-90da-9392910fdbb6
keywords:
- элементы управления Windows сообщений TB_SETIMAGELIST
topic_type:
- apiref
api_name:
- TB_SETIMAGELIST
api_location:
- Commctrl.h
api_type:
- HeaderDef
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: bb0b7ad631e8b56824ae65a2b262c5478611e75f
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127166608"
---
# <a name="tb_setimagelist-message"></a>\_Сообщение СЕТИМАЖЕЛИСТ ТБ

Задает список изображений, используемый панелью инструментов для отображения кнопок, которые находятся в состоянии по умолчанию.

## <a name="parameters"></a>Параметры

<dl> <dt>

*wParam* 
</dt> <dd>

[Версия 5,80.](common-control-versions.md) Индекс списка. Если используется только один список изображений или более ранняя версия стандартных элементов управления, установите параметр *wParam* в значение 0. Дополнительные сведения об использовании нескольких списков изображений см. в разделе Примечания.

</dd> <dt>

*lParam* 
</dt> <dd>

Обрабатываемый список изображений. Если этот параметр имеет **значение NULL**, изображения на кнопках не отображаются.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Возвращает маркер списка изображений, который ранее использовался для отображения кнопок в состоянии по умолчанию, или **значение NULL** , если список изображений ранее не был задан.

## <a name="remarks"></a>Remarks

> [!Note]  
> Приложение несет ответственность за освобождение списка образов после уничтожения панели инструментов.

 

Сообщение **\_ Сетимажелист в ТБ** не может быть объединено с [**ТБ \_ аддбитмап**](tb-addbitmap.md). Его также нельзя использовать с панелями инструментов, созданными с помощью [**креатетулбарекс**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex), которая вызывает **ТБ \_ аддбитмап** внутри. Когда вы создаете панель инструментов с **креатетулбарекс** или **используете \_ аддбитмап ТБ** для добавления изображений, панель инструментов управляет списком изображений на внутреннем уровне. Попытка изменить ее с помощью **ТБ \_ сетимажелист** имеет непредсказуемые последствия.

В [версии 5,80](common-control-versions.md) или более поздних стандартных элементов управления изображения кнопок не должны поступать из одного и того же списка изображений. Чтобы использовать несколько списков изображений для кнопок панели инструментов, сделайте следующее:

1.  Включите несколько списков изображений, отправив элемент управления ToolBar [**\_ Сетверсион сообщение CCM**](ccm-setversion.md) с параметром *wParam* (номер версии), равным 5.
2.  Для каждого списка изображений, который вы хотите использовать, отправляйте панель инструментов с сообщением **\_ сетимажелист ТБ** . Присвойте параметру *wParam* определенное приложением значение *wParam* , которое будет использоваться для определения списка. Задайте параметр *lParam* для обработчика химажелист списка.
3.  Для каждой кнопки установите для элемента **ибитмап** структуры [**тббуттон**](/windows/desktop/api/Commctrl/ns-commctrl-tbbutton) этой кнопки значение макелонг (*ииндекс*, *иимажеид*). Значение *иимажеид* — это идентификатор соответствующего списка изображений, который был определен на шаге 2. Значение *ииндекс* — это индекс конкретного изображения в этом списке.
4.  Добавьте кнопки, отправив элемент управления ToolBar с сообщением [**\_ Аддбуттонс (ТБ**](tb-addbuttons.md) ).

В следующем фрагменте кода показано, как добавить на панель инструментов пять кнопок с изображениями из трех различных списков изображений. Поддержка нескольких списков изображений включается с помощью сообщения [**CCM \_ сетверсион**](ccm-setversion.md) . Затем в списках изображений задаются и назначаются идентификаторы 0-2. Кнопки назначаются изображениям из списков изображений следующим образом:

-   Кнопка 0 находится в списке изображений ноль (Ахим \[ 0 \] ) с индексом 1.
-   Кнопка 1 находится в списке изображений One (Ахим \[ 1 \] ) с индексом 1.
-   Кнопка 2 из списка изображений Two (Ахим \[ 2 \] ) с индексом 1.
-   Кнопка 3 из списка изображений ноль (Ахим \[ 0 \] ) с индексом 2.
-   Кнопка 4 находится в списке изображений One (Ахим \[ 1 \] ) с индексом 3.

Наконец, кнопки добавляются в элемент управления ToolBar с сообщением [**\_ аддбуттонс ТБ**](tb-addbuttons.md) .


```
//Enable multiple image lists
    SendMessage(hwndTB, CCM_SETVERSION, (WPARAM) 5, 0); 

    //Set the image lists and assign them IDs of 0-2
    SendMessage(hwndTB, TB_SETIMAGELIST, 0, (LPARAM)ahiml[0]);
    SendMessage(hwndTB, TB_SETIMAGELIST, 1, (LPARAM)ahiml[1]);
    SendMessage(hwndTB, TB_SETIMAGELIST, 2, (LPARAM)ahiml[2]);

    // Create the five buttons
    TBBUTTON rgtb[5];
    
    //... initialize the TBBUTTON structures as usual ...
    
    //Assign images to each button
    rgtb[0].iBitmap = MAKELONG(1, 0);
    rgtb[1].iBitmap = MAKELONG(1, 1);
    rgtb[2].iBitmap = MAKELONG(1, 2);
    rgtb[3].iBitmap = MAKELONG(2, 0);
    rgtb[4].iBitmap = MAKELONG(3, 1);

    // Add the five buttons to the toolbar control
    SendMessage(hwndTB, TB_ADDBUTTONS, 5, (LPARAM)(&rgtb);
```



## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|---------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows \[Только классические приложения Vista\]<br/>                                        |
| Минимальная версия сервера<br/> | Windows Только для \[ настольных приложений сервера 2003\]<br/>                                  |
| Заголовок<br/>                   | <dl> <dt>Коммктрл. h</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**макелонг**](/previous-versions/windows/desktop/legacy/ms632660(v=vs.85))
</dt> </dl>

 

