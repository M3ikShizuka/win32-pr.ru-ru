---
title: Элементы управления "календарь месяца"
description: Элемент управления "Календарь на месяц" реализует пользовательский интерфейс, подобный календарю.
ms.assetid: 81b8f233-272e-4043-92ff-5ff47b0610d6
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f21fba66f9fb71ad45f8853578821ad5f83da00e
ms.sourcegitcommit: 0f7a8198bacd5493ab1e78a9583c7a3578794765
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/25/2021
ms.locfileid: "110423754"
---
# <a name="about-month-calendar-controls"></a>Элементы управления "календарь месяца"

Элемент управления "Календарь на месяц" реализует пользовательский интерфейс, подобный календарю. Это дает пользователю интуитивно понятный и распознаваемый метод ввода или выбора даты. Элемент управления также предоставляет приложению средства для получения и задания сведений о датах в элементе управления с использованием существующих типов данных.

-   [Функции управления календарем месяца](#month-calendar-control-features)
    -   [Выбор дня](#selecting-a-day)
    -   [Выбор несмежного месяца](#selecting-a-nonadjacent-month)
    -   [Выбор другого года](#selecting-a-different-year)
-   [Локализация](#localization)
-   [Время в элементе управления ' календарь на месяц '](#times-in-the-month-calendar-control)

## <a name="month-calendar-control-features"></a>Функции управления календарем месяца

На следующем снимке экрана показан элемент управления "месячный календарь" с размером, равным двум месяцам.

![снимок экрана: диалоговое окно с элементом управления "месячный календарь" с двумя месяцами рядом](images/mc-simple.png)

> [!Note]  
> Внешний вид и поведение элемента управления "Календарь на месяц" немного отличаются в разных версиях библиотеки времени выполнения. Этот раздел посвящен элементу управления, отображаемому в Windows Vista версии 6 Comctl32.dll.

 

Элемент управления на рисунке содержит следующие дополнительные функции.

-   Текущая дата отображается в отдельной строке в нижней части элемента управления. Этот стиль используется по умолчанию.
-   «Текущий круг» (фактически прямоугольник в этой версии) отображается вокруг текущего дня, а «сегодня» — как визуальная подсказка. Этот стиль используется по умолчанию.
-   Номера недель отображаются в левой части каждой строки дней. Необходимо указать этот стиль.
-   Некоторые даты отображаются полужирным шрифтом в соответствии с состоянием дня, установленным приложением. Например, даты, для которых запланированы собрания, могут отображаться полужирным шрифтом. Необходимо указать этот стиль.

> [!Note]
>
> Windows не поддерживает даты до 1601. Дополнительные сведения см. в разделе [**fileTime**](/windows/desktop/api/minwinbase/ns-minwinbase-filetime) .
>
> Элемент управления "месячный календарь" основан на григорианском календаре, который появился в 1753. В нем не будут вычисляться даты, которые соответствуют юлианском календарю, который использовался до 1753.

 

### <a name="selecting-a-day"></a>Выбор дня

По умолчанию, когда пользователь нажимает кнопки со стрелками в верхнем левом или верхнем правом углу элемента управления "Календарь", элемент управления обновляет свой экран, чтобы показать предыдущий или следующий месяц. Пользователь также может выполнить то же действие, щелкнув часть месяцев, отображаемых до первого месяца и после последнего месяца.

Для перемещения выделенной области также можно использовать следующие команды клавиатуры. Календарь всегда прокручивается при необходимости для отображения выбранного дня. (В таблице показаны [**коды виртуальных ключей**](/windows/desktop/inputdev/virtual-key-codes) .)



|    Команда      |    Описание                    |
|-------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Стрелка влево (VK \_ слева)   | Выберите предыдущий день.                                                                                                                                                                                                                 |
| Стрелка вправо (VK \_ справа) | Выберите следующий день.                                                                                                                                                                                                                     |
| Стрелка вверх (VK \_ up)       | Выберите тот же день предыдущей недели.                                                                                                                                                                                                |
| Стрелка вниз (VK \_ вниз)   | Выберите тот же день в следующей неделе.                                                                                                                                                                                                    |
| Страница вверх (VK \_ ранее)     | Выберите тот же день предыдущего месяца. (Если этот месяц не имеет дня, выбирается ближайший день; например, выбор перемещается с 31 марта по 28 февраля или 29.)                                                      |
| СТРАНИЦА вниз (VK \_ Далее)    | Выберите тот же день в следующем месяце.                                                                                                                                                                                                   |
| Главная ( \_ Домашняя страница VK)         | Выберите первый день текущего месяца.                                                                                                                                                                                               |
| КОНЕЦ (VK \_ конец)           | Выберите последний день текущего месяца.                                                                                                                                                                                                |
| CTRL + HOME             | Прокрутите на один месяц назад и выберите день в крайнем левом столбце.                                                                                                                                                                       |
| CTRL + END              | Прокрутите на один месяц вперед и выберите день в крайнем правом столбце.                                                                                                                                                                       |
| CTRL + PAGE UP          | Выберите тот же день в предыдущем месяце. Число месяцев, на которое перемещается выделение, — это число месяцев, отображаемых в элементе управления. Например, если отображаются два месяца, выбор будет перенесен с 6 июня на 6 мая.    |
| CTRL + PAGE DOWN        | Выберите тот же день в предыдущем месяце. Число месяцев, на которое перемещается выделение, — это число месяцев, отображаемых в элементе управления. Например, если отображаются два месяца, выбор будет перенесен с 6 июня на 6 августа. |



 

Если в элементе управления "календарь месяца" не используется стиль [**MCS \_ Today**](month-calendar-control-styles.md) , пользователь может вернуться к текущему дню, щелкнув текст "сегодня" в нижней части элемента управления. Если текущий день не отображается, элемент управления обновляет его отображение, чтобы отобразить его.

Приложение может изменить число месяцев, на которое элемент управления обновляет свое отображение, с помощью сообщения [**MCM \_ сетмонсделта**](mcm-setmonthdelta.md) или соответствующего макроса [**монскал \_ сетмонсделта**](/windows/desktop/api/Commctrl/nf-commctrl-monthcal_setmonthdelta). Тем не менее ключи PAGE UP и PAGE DOWN изменяют выбранный месяц на один, независимо от числа отображаемых месяцев или значения, заданного параметром **MCM \_ сетмонсделта**.

### <a name="selecting-a-nonadjacent-month"></a>Выбор несмежного месяца

Когда пользователь щелкает имя отображаемого месяца, отображаются все месяцы в году (в более ранних версиях это всплывающее меню). Пользователь может выбрать месяц в списке. Если выбранный пользователь не отображается, элемент управления "месячный календарь" прокручивает его отображение, чтобы отобразить выбранный месяц. На следующем снимке экрана элемент управления "месячный календарь" показывает месяцы двух смежных лет.

![снимок экрана — диалоговое окно с элементом управления "месячный календарь" с отображением всех месяцев 2007 и 2008](images/mc-months.png)

### <a name="selecting-a-different-year"></a>Выбор другого года

Если пользователь щелкнет год, появится группа лет, и пользователь сможет выбрать другой, как показано на следующем снимке экрана.

![снимок экрана с элементом управления "месячный календарь", в котором показаны все годы с 1999 по 2020](images/mc-years.png)

## <a name="localization"></a>Локализация

Элемент управления "месячный календарь" получает свой формат и все строки из национальной настройки \_ пользователя \_ по умолчанию.

## <a name="times-in-the-month-calendar-control"></a>Время в элементе управления ' календарь на месяц '

Элемент управления "календарь месяца" не отображает время. Однако структура [**SYSTEMTIME**](/windows/desktop/api/minwinbase/ns-minwinbase-systemtime) , используемая для задания и извлечения выбранной даты или текущей даты, содержит поля времени. Если дата задана программно, то элемент управления копирует поля времени по мере их первого или проверяет их, а затем, если они являются недопустимыми, сохраняет текущее время по умолчанию. Ниже приведен список сообщений, которые задают дату и описание того, как обрабатываются поля времени.



|  Сообщение         |  Описание            |
|---------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**MCM \_ сеткурсел**](mcm-setcursel.md)     | Элемент управления копирует поля времени по мере их возникновения без проверки или изменения.                                                                                                                                        |
| [**MCM \_ SETRANGE**](mcm-setrange.md)       | Проверяются поля времени переданных структур. Если они допустимы, поля времени копируются без изменения. Если они недопустимы, элемент управления копирует поля времени из сегодняшних данных.                  |
| [**MCM \_ сетселранже**](mcm-setselrange.md) | Проверяются поля времени переданных структур. Если они допустимы, поля времени копируются без изменения. Если они недопустимы, элемент управления оставляет поля времени из выбранных диапазонов. |
| [**MCM \_ сеттодай**](mcm-settoday.md)       | Элемент управления копирует поля времени по мере их возникновения без проверки или изменения.                                                                                                                                        |



 

При получении даты из элемента управления поля времени копируются из сохраненного времени без изменения. Обработка полей времени с помощью элемента управления обеспечивает удобство программиста. Элемент управления не проверяет или не изменяет поля времени в результате любой операции, отличной от перечисленных выше.

 

 