---
title: Сведения об элементах управления ComboBoxEx
description: Элементы управления ComboBoxEx — это поля со списком, обеспечивающие встроенную поддержку изображений элементов.
ms.assetid: a4b1aa79-40c4-4eff-801c-4f308d86fb35
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 427abef015474047d1842d13e5fb40640d0406c5
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "103891153"
---
# <a name="about-comboboxex-controls"></a>Сведения об элементах управления ComboBoxEx

Элементы управления ComboBoxEx — это поля со списком, обеспечивающие встроенную поддержку изображений элементов. Для облегчения доступа к изображениям элементов элемент управления предоставляет поддержку списка изображений. С помощью этого элемента управления можно предоставить функциональные возможности поля со списком без необходимости ручной прорисовки графики элементов.

В этом разделе содержатся следующие подразделы.

-   [Создание элементов управления ComboBoxEx](#creating-comboboxex-controls)
-   [Стили элемента управления ComboBoxEx](#comboboxex-control-styles)
-   [Элементы элемента управления ComboBoxEx](#comboboxex-control-items)
-   [Элементы обратного вызова](#callback-items)
-   [Списки изображений элемента управления ComboBoxEx](#comboboxex-control-image-lists)
-   [О сообщениях об уведомлениях элемента управления ComboBoxEx](#about-comboboxex-control-notification-messages)
-   [Пересылка сообщений управления ComboBoxEx](#comboboxex-control-message-forwarding)

## <a name="creating-comboboxex-controls"></a>Создание элементов управления ComboBoxEx

Фактически элемент управления ComboBoxEx создает дочернее поле со списком и выполняет задачи рисования, созданные владельцем, на основе списка назначенных изображений. Таким образом, стиль [**CBS \_ овнердравфиксед**](combo-box-styles.md) является подразумеваемым, и его не обязательно использовать при создании элемента управления. Так как списки изображений используются для предоставления графических элементов, использовать [**стиль \_ овнердраввариабле CBS**](combo-box-styles.md) нельзя.

Элемент управления ComboBoxEx должен быть инициализирован путем вызова функции [**InitCommonControlsEx**](/windows/desktop/api/Commctrl/nf-commctrl-initcommoncontrolsex) , задавая классы ICC \_ усерекс \_ в сопровождающей [**InitCommonControlsEx**](/windows/win32/api/commctrl/ns-commctrl-initcommoncontrolsex) структуре.

Вы можете создать элемент управления ComboBoxEx с помощью функции [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) и указать [**WC \_ ComboBoxEx**](common-control-window-classes.md) в качестве класса Window. Класс регистрируется при вызове функции [**InitCommonControlsEx**](/windows/desktop/api/Commctrl/nf-commctrl-initcommoncontrolsex) , как описано выше.

Элементы управления ComboBoxEx создаются без списка изображений по умолчанию. Чтобы использовать изображения элементов, необходимо создать список изображений для элемента управления ComboBoxEx и назначить его элементу управления с помощью сообщения [**кбем \_ сетимажелист**](cbem-setimagelist.md) . Если не назначить список изображений элементу управления ComboBoxEx, элемент управления отображает только текст элемента.

## <a name="comboboxex-control-styles"></a>Стили элемента управления ComboBoxEx

Элементы управления ComboBoxEx поддерживают только следующие стили ComboBox:

-   \_простой CBS
-   \_раскрывающийся список CBS
-   DROPDOWNLIST для CBS \_
-   \_дочерний элемент WS

Существует также несколько [ComboBoxEx элементов управления расширенными стилями](comboboxex-control-extended-styles.md) , которые используются только ComboBoxEx.

> [!Note]  
> В некоторых случаях [**\_ простой стиль CBS**](combo-box-styles.md) может работать неправильно.

 

Поскольку элемент управления ComboBoxEx выполняет задачи, рисуемые владельцем на основе списка назначенных изображений, то стиль [**CBS \_ овнердравфиксед**](combo-box-styles.md) является подразумеваемым. его не нужно использовать при создании элемента управления. Так как списки изображений используются для предоставления графических элементов, использовать [**стиль \_ овнердраввариабле CBS**](combo-box-styles.md) нельзя. Элемент управления ComboBoxEx также поддерживает [Расширенные стили управления ComboBoxEx](comboboxex-control-extended-styles.md) , предоставляющие дополнительные возможности.

## <a name="comboboxex-control-items"></a>Элементы элемента управления ComboBoxEx

Элементы управления ComboBoxEx сохраняют сведения об элементе с помощью структуры [**комбобоксекситем**](/windows/win32/api/commctrl/ns-commctrl-comboboxexitema) . Эта структура включает элементы для индексов элементов, индексов изображений (нормальных, состояний выбора и наложений), значений отступов, текстовых строк и значений, относящихся к элементам.

Элемент управления ComboBoxEx обеспечивает простой доступ к элементам и управление ими с помощью обмена сообщениями. Чтобы добавить или удалить элемент, отправьте сообщение [**кбем \_ INSERTITEM**](cbem-insertitem.md) или [**кбем \_ DELETEITEM**](cbem-deleteitem.md) . Элементы, находящиеся в элементе управления, можно изменить с помощью сообщения [**кбем \_ сетитем**](cbem-setitem.md) .

## <a name="callback-items"></a>Элементы обратного вызова

Элементы управления ComboBoxEx поддерживают атрибуты элемента обратного вызова. Вы можете указать элемент в качестве элемента обратного вызова при его добавлении в элемент управления с помощью [**кбем \_ INSERTITEM**](cbem-insertitem.md). При присвоении значений структуре [**комбобоксекситем**](/windows/win32/api/commctrl/ns-commctrl-comboboxexitema) элемента необходимо указать соответствующие значения флага обратного вызова. Ниже приведены элементы структуры **комбобоксекситем** и соответствующие им значения флагов обратного вызова.



| Член             | Значение обратного вызова      |
|--------------------|---------------------|
| **псзтекст**        | LPSTR \_ тексткаллбакк |
| **иимаже**         | я \_ имажекаллбакк    |
| **иселектедимаже** | я \_ имажекаллбакк    |
| **иоверлай**       | я \_ имажекаллбакк    |
| **ииндент**        | я \_ инденткаллбакк   |



 

Элемент управления будет запрашивать сведения об элементах обратного вызова, отправляя коды уведомлений [кбен \_ жетдиспинфо](cben-getdispinfo.md) . Это уведомление отправляется в виде сообщения [**WM \_ Notify**](wm-notify.md) . Когда приложение обрабатывает это сообщение, оно должно предоставить запрошенную информацию для элемента управления. Если задать для элемента **маски** сопутствующей структуры [**комбобоксекситем**](/windows/win32/api/commctrl/ns-commctrl-comboboxexitema) значение кбеиф \_ di \_ сетитем, элемент управления сохранит данные элемента и не запросит его снова.

## <a name="comboboxex-control-image-lists"></a>Списки изображений элемента управления ComboBoxEx

Если требуется, чтобы элементы управления ComboBoxEx отображали значки с элементами, необходимо указать список изображений. Элементы управления ComboBoxEx поддерживают до трех изображений для элемента — один для выбранного состояния, один для его невыбранного состояния, а другой — для изображения оверлея. Назначьте существующий список изображений элементу управления ComboBoxEx с помощью сообщения [**кбем \_ сетимажелист**](cbem-setimagelist.md) .

Структура [**комбобоксекситем**](/windows/win32/api/commctrl/ns-commctrl-comboboxexitema) содержит элементы, представляющие индексы изображений для каждого списка изображений (выбранного, невыделенного и наложения). Для каждого элемента задайте для этих элементов отображение нужных изображений. Нет необходимости указывать индексы изображений для каждого типа изображения. Вы можете сочетать и сопоставлять типы изображений по своему усмотрению, но всегда устанавливайте элемент **Mask** структуры **комбобоксекситем** , чтобы указать, какие элементы используются. Элемент управления не учитывает элементы, которые не были помечены как допустимые.

> [!Note]  
> Если используется простой стиль [**CBS \_**](combo-box-styles.md) , значки не отображаются.

 

## <a name="about-comboboxex-control-notification-messages"></a>О сообщениях об уведомлениях элемента управления ComboBoxEx

Элемент управления ComboBoxEx отправляет уведомления об изменениях в пределах самого себя или на запрос сведений об элементе обратного вызова. Родительский элемент управления получает все сообщения [**\_ команды WM**](/windows/desktop/menurc/wm-command) из поля со списком, содержащегося в элементе управления ComboBoxEx. Элемент управления ComboBoxEx отправляет собственные уведомления с помощью [**WM \_ Notify**](wm-notify.md) messages. В результате владелец элемента управления должен быть готов обрабатывать обе формы сообщений уведомления.

Ниже приведены коды уведомлений, относящиеся к ComboBoxEx, которые отправляются через сообщения [**\_ уведомления WM**](wm-notify.md) .



| Уведомление                              | **Описание**                                                                                                            |
|-------------------------------------------|----------------------------------------------------------------------------------------------------------------------------|
| [КБЕН \_ BEGINEDIT](cben-beginedit.md)     | Сигнализирует, что пользователь активировал раскрывающийся список или щелкнул поле ввода элемента управления.                               |
| [КБЕН \_ ENDEDIT](cben-endedit.md)         | Сигнализирует, что пользователь выбрал элемент из раскрывающегося списка или завершил операцию изменения в поле ввода. |
| [КБЕН \_ DELETEITEM](cben-deleteitem.md)   | Сообщает об удалении элемента.                                                                                          |
| [КБЕН \_ жетдиспинфо](cben-getdispinfo.md) | Запрашивает сведения об атрибутах элемента.                                                                           |
| [КБЕН \_ INSERTITEM](cben-insertitem.md)   | Сигнализирует, что элемент был вставлен в элемент управления.                                                                          |



 

## <a name="comboboxex-control-message-forwarding"></a>Пересылка сообщений управления ComboBoxEx

Ниже приведены стандартные сообщения поля со списком, которые элемент управления ComboBoxEx пересылает в свое дочернее поле со списком. Некоторые из этих сообщений могут обрабатываться элементом управления ComboBoxEx до или после пересылки сообщения.

-   [**\_ДЕЛЕТЕСТРИНГ CB**](cb-deletestring.md)
-   [**\_ФИНДСТРИНЖЕКСАКТ CB**](cb-findstringexact.md)
-   [**\_число CB**](cb-getcount.md)
-   [**CB \_**](cb-getcursel.md)
-   [**\_ЖЕТДРОППЕДКОНТРОЛРЕКТ CB**](cb-getdroppedcontrolrect.md)
-   [**\_ЖЕТДРОППЕДСТАТЕ CB**](cb-getdroppedstate.md)
-   [**\_ЖЕТИТЕМДАТА CB**](cb-getitemdata.md)
-   [**\_GETITEMHEIGHT CB**](cb-getitemheight.md)
-   [**\_ЖЕТЛБТЕКСТ CB**](cb-getlbtext.md)
-   [**\_ЖЕТЛБТЕКСТЛЕН CB**](cb-getlbtextlen.md)
-   [**\_ЖЕТЕКСТЕНДЕДУИ CB**](cb-getextendedui.md)
-   [**\_ЛИМИТТЕКСТ CB**](cb-limittext.md)
-   [**\_РЕСЕТКОНТЕНТ CB**](cb-resetcontent.md)
-   [**\_СЕТКУРСЕЛ CB**](cb-setcursel.md)
-   [**\_СЕТДРОППЕДВИДС CB**](cb-setdroppedwidth.md)
-   [**\_СЕТЕКСТЕНДЕДУИ CB**](cb-setextendedui.md)
-   [**\_СЕТИТЕМДАТА CB**](cb-setitemdata.md)
-   [**\_СЕТИТЕМХЕИГХТ CB**](cb-setitemheight.md)
-   [**\_ШОВДРОПДОВН CB**](cb-showdropdown.md)

Ниже приведены сообщения Windows о том, что элемент управления ComboBoxEx пересылается в свое родительское окно:

-   [**WM \_ (Сюда**](/windows/desktop/menurc/wm-command) входят все \_ уведомления КБН).
-   [**\_уведомление WM**](wm-notify.md)

 

 