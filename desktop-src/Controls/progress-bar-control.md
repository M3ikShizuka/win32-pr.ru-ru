---
title: Сведения об элементах управления "индикатор выполнения"
description: Индикатор выполнения — это окно, которое приложение может использовать для указания хода выполнения длительной операции. Он состоит из прямоугольника, который анимируется как ход выполнения операции.
ms.assetid: 1db7a5c9-71cd-4ebc-86b8-8159f30348fa
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f00c80b1f9e97cec1657fe979a19437f607251b8
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "103793987"
---
# <a name="about-progress-bar-controls"></a>Сведения об элементах управления "индикатор выполнения"

Индикатор выполнения — это окно, которое приложение может использовать для указания хода выполнения длительной операции.

Он состоит из прямоугольника, который анимируется как ход выполнения операции.

На следующем рисунке показан индикатор выполнения, в котором не используются стили оформления.

![снимок экрана индикатора выполнения, добавляющего прямоугольники в линии для обозначения хода выполнения](images/pb-oldstyle.png)

На следующем рисунке показан индикатор выполнения с использованием стилей оформления. Внешний вид элемента управления будет зависеть от операционной системы и выбранной темы. Дополнительные сведения см. в разделе [стили визуальных элементов](themes-overview.md).

![снимок экрана индикатора выполнения, который позволяет увеличить анимированный зеленый прямоугольник для индикации хода выполнения](images/pb-newstyle.png)

Дополнительные сведения содержатся в следующих заголовках.

-   [Использование индикаторов выполнения](#using-progress-bars)
    -   [Диапазон и текущее расположение](#range-and-current-position)
    -   [Обработка сообщений индикатора выполнения по умолчанию](#default-progress-bar-message-processing)
    -   [Стиль бегущей строки](#marquee-style)

## <a name="using-progress-bars"></a>Использование индикаторов выполнения

Вы можете создать индикатор выполнения с помощью функции [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) , указав класс окна [**Progress. \_**](common-control-window-classes.md) Этот класс окна регистрируется при загрузке библиотеки DLL общих элементов управления. Дополнительные сведения см. в разделе [Общие элементы управления](common-controls-intro.md).

Элемент управления также доступен на панели элементов Microsoft Visual Studio, где он называется элементом управления хода выполнения.

### <a name="range-and-current-position"></a>Диапазон и текущее расположение

*Диапазон* индикатора выполнения представляет всю длительность операции, а *Текущая координата* представляет ход выполнения, выполняемый приложением для завершения операции. В процедуре окна используется диапазон и текущая координата для определения процента индикатора выполнения для заполнения цветом выделения.

Если значения в диапазоне не заданы, система устанавливает минимальное значение 0, а максимальное значение — 100. Можно настроить диапазон для использования удобных целых чисел с помощью сообщения " [**PBM \_ SETRANGE**](pbm-setrange.md) ".

Индикатор выполнения предоставляет несколько сообщений, которые можно использовать для задания текущей должности. В сообщении [**PBM \_ сетпос**](pbm-setpos.md) устанавливается расположение с заданным значением. Сообщение [**\_ делтапос PBM**](pbm-deltapos.md) перемещает позицию, добавляя указанное значение в текущую позицию.

Сообщение [**\_ сетстеп PBM**](pbm-setstep.md) позволяет указать шаг шага для индикатора выполнения. Впоследствии при отправке сообщения [**\_ степит**](pbm-stepit.md) в индикатор выполнения текущая позицию увеличивается на указанное приращение. По умолчанию шаг с шагом равен 10.

### <a name="default-progress-bar-message-processing"></a>Обработка сообщений индикатора выполнения по умолчанию

В этом разделе описываются сообщения, обрабатываемые процедурой окна для [**класса \_ класса Progress**](common-control-window-classes.md) .



| Сообщение            | Обработка выполнена                                                                                                                                                               |
|--------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **\_Создание WM**     | Выделяет и инициализирует начальную структуру.                                                                                                                                    |
| **WM \_ destroy**    | Освобождает все ресурсы, связанные с индикатором выполнения.                                                                                                                              |
| **WM \_ ерасебкгнд** | Рисует фон и границы индикатора выполнения.                                                                                                                              |
| **WM, \_ Шрифт**    | Возвращает маркер текущего шрифта. Сейчас индикатор выполнения не рисует текст, поэтому отправка этого сообщения не влияет на элемент управления.                                       |
| **WM \_ Paint**      | Рисует индикатор выполнения. Если параметр *wParam* не равен **null**, то элемент управления предполагает, что значение является HDC и рисует его с помощью контекста устройства.                              |
| **WM \_ сетфонт**    | Сохраняет маркер в новый шрифт и возвращает его предыдущий шрифт. Сейчас индикатор выполнения не рисует текст, поэтому отправка этого сообщения не влияет на элемент управления. |



 

### <a name="marquee-style"></a>Стиль бегущей строки

Создав элемент управления "индикатор выполнения" с стилем [**\_ области PBS**](progress-bar-control-styles.md) , можно анимировать его таким образом, чтобы он выводит действие, но не указывает, какая часть задачи завершена. Выделенная часть индикатора выполнения перемещается повторно по длине полосы. Можно запускать и прекращать анимацию, а также управлять скоростью, отправляя сообщение [**PBM \_ сетмаркуи**](pbm-setmarquee.md) . У полос хода выполнения области нет диапазона или расположения.

На следующем рисунке показан индикатор выполнения в режиме бегущей строки. Выделенная часть перемещается по полосе.

![снимок экрана индикатора выполнения, который перемещает зеленое выделение через серый прямоугольник для обозначения хода выполнения](images/pb-marquee.png)

 

 