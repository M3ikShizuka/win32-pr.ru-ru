---
title: Как взаимодействовать с текущим выделением
description: Пользователь может выбрать текст в элементе управления Rich Edit с помощью мыши или клавиатуры.
ms.assetid: A529792C-DFA7-4BE1-8607-5A1556B64626
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6ec776ab0c8e07bb61dcc0e12d13af46b17d094a
ms.sourcegitcommit: f0ca63c18dc52c357d3398af7be766d2bdd40be7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/17/2020
ms.locfileid: "103789360"
---
# <a name="how-to-interact-with-the-current-selection"></a>Как взаимодействовать с текущим выделением

Пользователь может выбрать текст в элементе управления Rich Edit с помощью мыши или клавиатуры. *Текущий выделенный фрагмент* — это диапазон выбранных символов или позиция точки вставки, если ни одна из символов не выбрана. Приложение может получить сведения о текущем выделении, задать его, определить, когда оно изменяется, а также показать или скрыть выделение выделения.

## <a name="what-you-need-to-know"></a>Что необходимо знать

### <a name="technologies"></a>Технологии

-   [Элементы управления Windows](window-controls.md)

### <a name="prerequisites"></a>Предварительные условия

-   C/C++
-   Программирование пользовательского интерфейса Windows

## <a name="instructions"></a>Инструкции

### <a name="interact-with-the-current-selection"></a>Взаимодействие с текущим выделением

Чтобы определить текущее выделение в элементе управления Rich Edit, используйте сообщение [**EM \_ ексжетсел**](em-exgetsel.md) . Чтобы задать текущее выделение, используйте сообщение [**EM \_ екссетсел**](em-exsetsel.md) . Структура [**чарранже**](/windows/desktop/api/Richedit/ns-richedit-charrange) используется с обоими сообщениями и задает диапазон символов. Чтобы получить сведения о содержимом текущего выделения, можно использовать сообщение [**EM \_ селектионтипе**](em-selectiontype.md) .

Приложение может обнаружить, когда текущее выделение изменится, обрабатывая код уведомления [en \_ селчанже](en-selchange.md) . Код уведомления указывает структуру [**селчанже**](/windows/desktop/api/Richedit/ns-richedit-selchange) , содержащую сведения о новом выделенном фрагменте. Форматированный элемент управления "поле ввода" отправляет этот код уведомления только в том случае, если он включен с помощью сообщения [**EM \_ SETEVENTMASK**](em-seteventmask.md) .

По умолчанию элемент управления с расширенным редактированием показывает и скрывает выделение выделения при получении и потере фокуса. Выделение выделения можно показать или скрыть в любое время с помощью сообщения [**EM \_ хидеселектион**](em-hideselection.md) . Например, приложение может предоставить диалоговое окно поиска для поиска текста в элементе управления Rich Edit. Приложение может выбрать соответствующий текст, не закрывая диалоговое окно. в этом случае для выделения выбранного фрагмента необходимо использовать сообщение **EM \_ хидеселектион** .

Как и в случае с элементами управления "поле ввода", можно задать стиль окна [**ES \_ нохидесел**](edit-control-styles.md) , чтобы запретить элементу управления Rich Edit выделение выделения при потере фокуса.

В качестве альтернативы использованию сообщений [**EM \_ Ексжетсел**](em-exgetsel.md) и [**EM \_ екссетсел**](em-exsetsel.md) можно получить и установить текущий выбор с помощью управляющих сообщений [**EM \_ жетсел**](em-getsel.md) и [**EM \_ сетсел**](em-setsel.md) . Пакеты **\_ жетсел** сообщений с пакетом EM 2 16-разрядные индексы в 32-битное возвращаемое значение и, следовательно, работают только для выбора, которые полностью находятся в пределах первых 64 КБ. Тем не менее, элемент управления "поле ввода" никогда не будет содержать более 32 000 символов текста, если не расширить это ограничение с помощью сообщения [**EM \_ Лимиттекст**](em-limittext.md) или [**EM \_ екслимиттекст**](em-exlimittext.md) . Для выбора, который выходит за пределы первых 64 КБ текста, **сообщение \_ жетсел EM** возвращает значение – 1. В этом случае можно по-прежнему использовать значения, возвращаемые в *wParam* и *lParam* , для поиска начального и конечного символов выделения.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Использование элементов управления Rich Edit](using-rich-edit-controls.md)
</dt> <dt>

[Демонстрация стандартных элементов управления Windows (Кппвиндовскоммонконтролс)](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/master/OneCodeTeam/Windows%20common%20controls%20demo%20(CppWindowsCommonControls)/%5BC++%5D-Windows%20common%20controls%20demo%20(CppWindowsCommonControls)/C++/CppWindowsCommonControls)
</dt> </dl>

 

 




