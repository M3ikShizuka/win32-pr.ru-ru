---
title: Упаковщик приложений (MakeAppx.exe)
description: Упаковщик приложений (MakeAppx.exe) создает пакет приложения из файлов на диске или извлекает файлы из пакета приложения на диск.
ms.assetid: 9B7BF420-8E19-4BFD-B378-D09E61F68A39
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 41595550f3bee7b1149959886ed649e9212224b2
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "104133702"
---
# <a name="app-packager-makeappxexe"></a>Упаковщик приложений (MakeAppx.exe)

> [!Note]  
> Рекомендации по использованию этого средства для UWP см. в статье [Создание пакета приложения с помощью средства MakeAppx.exe](/windows/msix/package/create-app-package-with-makeappx-tool).

 

Упаковщик приложений (MakeAppx.exe) создает пакет приложения из файлов на диске или извлекает файлы из пакета приложения на диск. Начиная с Windows 8.1, упаковщик приложений также создает набор пакетов приложений из пакетов приложений на диске или извлекает пакеты приложений из пакета приложений на диск. Он включен в Microsoft Visual Studio и пакет средств разработки программного обеспечения Windows (SDK) для Windows 8 или пакета средств разработки программного обеспечения Windows (SDK) для Windows 8.1. Посетите страницу [downloads для разработчиков]( https://msdn.microsoft.com/windows/apps/br229516.aspx) , чтобы получить их.

Средство MakeAppx.exe обычно находится в следующих расположениях:

-   На x86: C: \\ Program Files (x86) \\ Windows Kit \\ 8,0 \\ bin \\ x86 \\makeappx.exe или C: \\ Program files (x86) \\ Windows Kit \\ 8,1 \\ bin \\ x86 \\makeappx.exe
-   На x64 в двух местах:
    -   C: \\ Program Files (x86) \\ Windows Kit \\ 8,0 \\ bin \\ x86 \\makeappx.exe или C: \\ Program files (x86) \\ Windows Kits \\ 8,1 \\ bin \\ x86 \\makeappx.exe
    -   C: \\ Program Files (x86) \\ Windows Kit \\ 8,0 \\ bin \\ x64 \\makeappx.exe или C: \\ Program files (x86) \\ Windows Kits \\ 8,1 \\ bin \\ x64 \\makeappx.exe

Версия ARM средства отсутствует.

-   [Создание пакета с помощью структуры каталогов](#to-create-a-package-using-a-directory-structure)
-   [Создание пакета с помощью файла сопоставления](#to-create-a-package-using-a-mapping-file)
-   [Подпись пакета с помощью средства SignTool](#to-sign-the-package-using-signtool)
-   [Извлечение файлов из пакета](#to-extract-files-from-a-package)
-   [Создание пакета пакетов с помощью структуры каталогов](#to-create-a-package-bundle-using-a-directory-structure)
-   [Создание пакета пакетов с помощью файла сопоставления](#to-create-a-package-bundle-using-a-mapping-file)
-   [Извлечение пакетов из пакета](#to-extract-packages-from-a-bundle)
-   [Шифрование пакета с помощью файла ключа](#to-encrypt-a-package-with-a-key-file)
-   [Шифрование пакета с помощью глобального тестового ключа](#to-encrypt-a-package-with-a-global-test-key)
-   [Расшифровка пакета с помощью файла ключа](#to-decrypt-a-package-with-a-key-file)
-   [Расшифровка пакета с помощью глобального тестового ключа](#to-decrypt-a-package-with-a-global-test-key)
-   [Использование](#usage)

## <a name="using-app-packager"></a>Использование упаковщика приложений

> [!Note]  
> Относительные пути поддерживаются во всем средстве.

 

### <a name="to-create-a-package-using-a-directory-structure"></a>Создание пакета с помощью структуры каталогов

Поместите AppxManifest.xml в корневой каталог каталога, содержащего все полезные файлы приложения. Для пакета приложения создается идентичная структура каталога, которая будет доступна при извлечении пакета во время развертывания.

1.  Разместите все файлы в одной структуре каталогов, создавая нужные подкаталоги.

2.  Создайте допустимый манифест пакета, AppxManifest.xml и поместите его в корневой каталог.

3.  Выполните следующую команду:

    **Программе makeappx Pack/d** *Вход \_ DirectoryPath* **/p** _FilePath_**. appx**

### <a name="to-create-a-package-using-a-mapping-file"></a>Создание пакета с помощью файла сопоставления

1.  Создайте допустимый манифест пакета, AppxManifest.xml.

2.  Создайте файл сопоставления. В первой строке содержатся **\[ файлы \]** строк, а в строках, следующих за ними, указываются пути к источнику (диску) и месту назначения (пакетов) в строках в кавычках.

    ``` syntax
    [Files]
    "C:\MyApp\StartPage.htm"     "default.html"
    "C:\MyApp\readme.txt"        "doc\readme.txt"
    "\\MyServer\path\icon.png"   "icon.png"
    "MyCustomManifest.xml"       "AppxManifest.xml"
    ```

3.  Выполните следующую команду:

    **Программе makeappx Pack/f** *сопоставление \_ FilePath* **/p** _FilePath_**. appx**

### <a name="to-sign-the-package-using-signtool"></a>Подпись пакета с помощью средства SignTool

1.  Создайте сертификат. Издатель, указанный в манифесте, должен соответствовать сведениям о субъекте издателя сертификата подписи. Дополнительные сведения о создании сертификата для подписи см. [в разделе Создание сертификата для подписи пакета приложения](how-to-create-a-package-signing-certificate.md).

2.  Запустите SignTool.exe, чтобы подписать пакет:

    **Подписывание SignTool/a/v/FD** *hashAlgorithm* **/f** *цертфиленаме* _FilePath_**. appx**

    *HashAlgorithm* должен соответствовать хэш-алгоритму, используемому для создания блоккмап при упаковке приложения. С помощью служебной программы упаковки программе makeappx по умолчанию алгоритм хеширования appx блоккмап имеет значение **SHA256**. Запустите SignTool.exe указав **SHA256** в качестве алгоритма файлового дайджеста (/FD):

    **Подписывание SignTool/a/v/FD SHA256/F** *цертфиленаме* _FilePath_**. appx**

    Дополнительные сведения о том, как подписывать пакеты, см. [в разделе как подписать пакет приложения с помощью средства SignTool](how-to-sign-a-package-using-signtool.md).

### <a name="to-extract-files-from-a-package"></a>Извлечение файлов из пакета

1.  Выполните следующую команду:

    **Программе makeappx распаковки, параметр/p** _File_**. appx/d** *выходной \_ Каталог*

2.  Распакованный пакет имеет ту же структуру, что и установленный пакет.

### <a name="to-create-a-package-bundle-using-a-directory-structure"></a>Создание пакета пакетов с помощью структуры каталогов

Мы используем команду **пакета** для создания пакета приложений в <output bundle name> путем добавления всех пакетов <content directory> (включая вложенные папки). Если <content directory> содержит манифест пакета, AppxBundleManifest.xml, он игнорируется.

1.  Разместите все пакеты в одной структуре каталогов, создавая нужные подкаталоги.

2.  Выполните следующую команду:

    **Программе makeappx пакета/d** *Вход \_ DirectoryPath* **/p** _FilePath_**. appxbundle**

### <a name="to-create-a-package-bundle-using-a-mapping-file"></a>Создание пакета пакетов с помощью файла сопоставления

Мы используем команду **пакета** для создания пакета приложений в <output bundle name> путем добавления всех пакетов из списка пакетов в <mapping file> . Если <mapping file> содержит манифест пакета, AppxBundleManifest.xml, он игнорируется.

1.  Создайте таблицу <mapping file>. Первая строка содержит **\[ файлы \]** строк, а следующие строки указывают пакеты для добавления в пакет. Каждый пакет описывается парой путей в кавычках, разделенных пробелами или символами табуляции. Пара путей представляет источник пакета (на диске) и назначение (в пакете). Все имена целевых пакетов должны иметь расширение Appx.

    ``` syntax
        [Files]
        "C:\MyApp\MyApp_x86.appx"                 "MyApp_x86.appx"
        "C:\Program Files (x86)\ResPack.appx"    "resources\resPack.appx"
        "\\MyServer\path\ResPack.appx"           "Respack.appx"
        "my app files\respack.appx"              "my app files\respack.appx"
    ```

2.  Выполните следующую команду:

    **Программе makeappx пакет/f** *сопоставление \_ FilePath* **/p** _FilePath_**. appxbundle**

### <a name="to-extract-packages-from-a-bundle"></a>Извлечение пакетов из пакета

1.  Выполните следующую команду:

    **Программе makeappx unbundle/p** _\_ имя пакета_**. appxbundle/d** *выходной \_ Каталог*

2.  Распакованный пакет имеет ту же структуру, что и установленный пакет пакетов.

### <a name="to-encrypt-a-package-with-a-key-file"></a>Шифрование пакета с помощью файла ключа

1.  Создайте файл ключа. Файлы ключей должны начинаться со строки "Keys", содержащей строку " \[ ключи \] ", за которой следуют строки, описывающие ключи для шифрования пакета. Каждый ключ описывается парой строк в кавычках, разделенных пробелами или символами табуляции. Первая строка представляет идентификатор ключа, а вторая — ключ шифрования в шестнадцатеричном формате.

    ``` syntax
        [Keys]
        "0"                 "1AC4CDCFF1924D2885A0607269787BA6BF09B7FFEBF74ED4B9D86E423CF9186B"
    ```

2.  Выполните следующую команду:

    **MakeAppx.exe Encrypt/p** _\_ имя пакета_**. appx/EP** имя _зашифрованного \_ \_ пакета_**. еаппкс/КФ** _keyfile \_ Name_**. txt**

3.  Входной пакет будет зашифрован в указанный зашифрованный пакет с помощью указанного файла ключа.

### <a name="to-encrypt-a-package-with-a-global-test-key"></a>Шифрование пакета с помощью глобального тестового ключа

1.  Выполните следующую команду:

    **MakeAppx.exe Encrypt/p** _\_ имя пакета_**. appx/EP** _\_ \_ имя зашифрованного пакета_**. еаппкс/КТ**

2.  Входной пакет будет зашифрован в указанный зашифрованный пакет с помощью глобального ключа теста.

### <a name="to-decrypt-a-package-with-a-key-file"></a>Расшифровка пакета с помощью файла ключа

1.  Создайте файл ключа. Файлы ключей должны начинаться со строки "Keys", содержащей строку " \[ ключи \] ", за которой следуют строки, описывающие ключи для шифрования пакета. Каждый ключ описывается парой строк в кавычках, разделенных пробелами или символами табуляции. Первая строка представляет идентификатор ключа в кодировке Base64 (32-байт), а вторая строка представляет ключ шифрования 32-байт в кодировке Base64.

    ``` syntax
        [Keys]
        "OWVwSzliRGY1VWt1ODk4N1Q4R2Vqc04zMzIzNnlUREU="                 "MjNFTlFhZGRGZEY2YnVxMTBocjd6THdOdk9pZkpvelc="
    ```

2.  Выполните следующую команду:

    **MakeAppx.exe расшифровка/p** _\_ имя пакета_**. appx/EP** _незашифрованное \_ \_ имя пакета_**. еаппкс/КФ** _keyfile \_ Name_**. txt**

3.  Входной пакет будет расшифрован в указанный незашифрованный пакет с помощью указанного файла ключа.

### <a name="to-decrypt-a-package-with-a-global-test-key"></a>Расшифровка пакета с помощью глобального тестового ключа

1.  Выполните следующую команду:

    **MakeAppx.exe расшифровка/p** _\_ имя пакета_**. appx/EP** _незашифрованное \_ \_ имя пакета_**. еаппкс/КТ**

2.  Входной пакет будет расшифрован в указанный незашифрованный пакет с помощью глобального ключа теста.

## <a name="usage"></a>Использование

Аргумент командной строки **/p** всегда является обязательным и имеет значение **/d**, **/f** или **/EP**. Обратите внимание, что **/d**, **/f** и **/EP** являются взаимоисключающими.

**\[ Параметры \] пакета программе makeappx** **/p** *\<output package name\>* **/d***\<content directory\>*

**\[ Параметры \] пакета программе makeappx** **/p** *\<output package name\>* **/f***\<mapping file\>*

**Программе makeappx распаковки \[ параметров \]** **/p** *\<input package name\>* **/d***\<output directory\>*

**\[ Параметры \] пакета программе makeappx** **/p** *\<output bundle name\>* **/d***\<content directory\>*

**\[ Параметры \] пакета программе makeappx** **/p** *\<output bundle name\>* **/f***\<mapping file\>*

**Программе makeappx \[ Параметры \] разпакета** **/p** *\<input bundle name\>* **/d***\<output directory\>*

**\[ Параметры \] шифрования программе makeappx** **/p** *\<input package name\>* **/EP***\<output package name\>*

**\[ Параметры \] расшифровки программе makeappx** **/p** *\<input package name\>* **/EP***\<output package name\>*

## <a name="command-line-syntax"></a>Синтаксис для командной строки

Ниже приведен пример общего синтаксиса использования для программе makeappx в командной строке.

**Программе makeappx \[ пакет распаковки \| \| \| unpackть \| Encrypt \| \]** \[ **/h** **/КФ** **/КТ** **/l** **/o** **/но** **/НВ** **/v** **/ПФН** **/?**\]

**Программе makeappx** пакеты или распаковать файлы в пакете, упаковывает или раз пакеты в пакете, либо шифрует или расшифровывает пакет приложения или набор в указанном входном каталоге или файле сопоставления. Ниже приведен список параметров, которые применяются к **пакету программе makeappx**, **программе makeappx распаковки**, пакету **программе makeappx**, **программе makeappx unpack**, **программе makeappx Encrypt** или **программе makeappx дешифровки**.

<dl> <dt>

<span id="_l"></span><span id="_L"></span>**/l**
</dt> <dd>

Этот параметр используется для локализованных пакетов. Пути проверки по умолчанию для локализованных пакетов. Этот параметр отключает только эту конкретную проверку без необходимости отключать все проверки.

</dd> <dt>

<span id="_o"></span><span id="_O"></span>**/o**
</dt> <dd>

Перезапишите выходной файл, если он существует. Если вы не укажете этот параметр или параметр **/но** , пользователь получит запрос на перезапись файла.

Этот параметр нельзя использовать с **/но**.

</dd> <dt>

<span id="_no"></span><span id="_NO"></span>**/но**
</dt> <dd>

Предотвращает перезапись выходного файла, если он существует. Если не указать этот параметр или параметр **/o** , пользователь получит запрос на перезапись файла.

Этот параметр нельзя использовать с **/o**.

</dd> <dt>

<span id="_nv"></span><span id="_NV"></span>**/нв**
</dt> <dd>

Пропустить семантическую проверку. Если не указать этот параметр, средство выполняет полную проверку пакета.

</dd> <dt>

<span id="_v"></span><span id="_V"></span>**/v**
</dt> <dd>

Включите подробный вывод журнала в консоль.

</dd> <dt>

<span id="__"></span>**/?**
</dt> <dd>

Отображение текста справки.

</dd> </dl>

**Программе makeappx Pack** , **программе makeappx, распаковка** , **программе makeappx**, **программе makeappx unpack**, **программе makeappx Encrypt** и **программе makeappx дешифровки** являются взаимоисключающими командами. Ниже приведены параметры командной строки, которые применяются специально для каждой команды:

**Пакет программе makeappx** \[ **з**\]

Создает пакет.

<dl> <dt>

<span id="_h_algorithm"></span><span id="_H_ALGORITHM"></span> *алгоритм* /h
</dt> <dd>

Указывает хэш-алгоритм, используемый при создании сопоставления блоков. Ниже приведены допустимые значения для *алгоритма*.

<dl> <dd>SHA256 (по умолчанию)</dd> <dd>SHA384</dd> <dd>SHA512</dd> </dl>

Этот параметр нельзя использовать с командой **unpack** .

</dd> </dl>

**Программе makeappx распаковать** \[ **PFN**\]

Извлекает все файлы в указанном пакете в указанный выходной каталог. Выходные данные имеют ту же структуру каталогов, что и пакет.

<dl> <dt>

<span id="_pfn"></span><span id="_PFN"></span>**/пфн**
</dt> <dd>

Указывает каталог с именем с полным именем пакета. Этот каталог создается в указанном расположении выходных данных. Этот параметр нельзя использовать с командой **Pack** .

</dd> </dl>

**Программе makeappx распакетировать** \[ **PFN**\]

Распаковать все пакеты в подкаталог с указанным выходным путем, названный после полного имени пакета. Выходные данные имеют ту же структуру каталогов, что и установленный пакет пакетов.

<dl> <dt>

<span id="_pfn"></span><span id="_PFN"></span>**/пфн**
</dt> <dd>

Указывает каталог с именем с полным именем пакета пакетов. Этот каталог создается в указанном расположении выходных данных. Этот параметр нельзя использовать с командой **пакета** .

</dd> </dl>

**Программе makeappx шифрование** \[ **КФ**, **kt**\]

Создает зашифрованный пакет приложения из указанного входного пакета приложения в указанном выходном пакете.

<dl> <dt>

<span id="_kf__key_file_"></span><span id="_KF__KEY_FILE_"></span>**/КФ***<key file>*
</dt> <dd>

Шифрует пакет или набор с помощью ключа из указанного файла ключей. Этот параметр нельзя использовать с **kt**.

</dd> <dt>

<span id="_kt"></span><span id="_KT"></span>**/кт**
</dt> <dd>

Шифрует пакет или набор с помощью глобального тестового ключа. Этот параметр нельзя использовать с **КФ**.

</dd> </dl>

**Программе makeappx расшифровку** \[ **КФ**, **kt**\]

Создает незашифрованный пакет приложения из указанного входного пакета приложения в указанном выходном пакете.

<dl> <dt>

<span id="_kf__key_file_"></span><span id="_KF__KEY_FILE_"></span>**/КФ***<key file>*
</dt> <dd>

Расшифровывает пакет или набор с помощью ключа из указанного файла ключей. Этот параметр нельзя использовать с **kt**.

</dd> <dt>

<span id="_kt"></span><span id="_KT"></span>**/кт**
</dt> <dd>

Расшифровывает пакет или набор с помощью глобального тестового ключа. Этот параметр нельзя использовать с **КФ**.

</dd> </dl>

## <a name="semantic-validation-performed-by-makeappx"></a>Семантическая проверка, выполняемая программе makeappx

Программе makeappx выполняет ограниченную семантическую проверку, которая предназначена для перехвата наиболее распространенных ошибок развертывания и обеспечения допустимости пакета приложения.

Эта проверка гарантирует следующее:

-   все файлы, ссылки на которые присутствуют в манифесте пакета, входят в состав пакета приложения;
-   в приложении нет двух идентичных ключей;
-   Приложение не регистрируется для запрещенного протокола из этого списка: SMB, FILE, MS-ВВА-WEB, MS-ВВА.

Эта семантическая проверка не завершена, и пакеты, созданные программе makeappx, не гарантированно будут устанавливаться.

 

 