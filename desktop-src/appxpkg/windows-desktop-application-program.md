---
title: Программа для разработчиков классических приложений для Windows
description: вы можете получить подробные данные телеметрии и аналитические отчеты, которые позволяют увидеть, как Windows настольные приложения выполняются с помощью новой программы Windows классических приложений.
ms.assetid: F1ED72A5-E1CD-4924-A81B-ED6FAF5E2AA3
ms.topic: article
ms.date: 11/02/2018
ms.openlocfilehash: 90483194654d5656060c57e3ad7593410a08660c2b8fc71bbbe9e42f08f17c45
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118105732"
---
# <a name="windows-desktop-application-program"></a>Программа для разработчиков классических приложений для Windows

вы можете получить подробные данные телеметрии и аналитические отчеты, которые позволяют увидеть, как Windows настольные приложения выполняются с помощью новой программы Windows классических приложений.

для доступа к этим данным не взимается плата. [зарегистрируйтесь](https://login.microsoftonline.com/common/oauth2/authorize?client_id=4990cffe-04e8-4e8b-808a-1175604b879f&response_mode=form_post&response_type=code+id_token&scope=openid+profile&state=OpenIdConnect.AuthenticationProperties%3deJsPaLaK4fU55nKvN21CjU6FsdJ0aPGfhsjGAZ0HR9bE6rgwHHX4izvRt_w-0VUlIF0ClCya4cVY6Uv4qTAqDrH8LTwFpjFGWVW2BAIJmAAuxBLZGTPS_DYy0wwgvTh1orWTCMvBdlOu_kF8vwNe4mjtk9JRMvYaETyspKrJi-s5Z2K7lKIPqnlFkwSU-aoot-3NxTeQ0wu6_RJ1nf_kLFatEkVAqokDSYTKkpv7zF6gA3YYriMFoC9_f2uxuXpI-STckg&nonce=637177463062493881.YjhiOTZjYTMtOTVhZS00OGM1LWI4MDItNWE5MThjMjA1ZjZmMTAyZDRiMGQtMDJhNC00ZDJmLWFkM2QtM2FjZDJkNjcxYWQy&redirect_uri=https%3a%2f%2fpartner.microsoft.com%2faad%2fauthPostGateway&resource=797f4846-ba00-4fd7-ba43-dac1f8f63013&mkt=en-US) и примите [соглашение о программе Windows классических приложений](https://go.microsoft.com/fwlink/?linkid=853677), а затем отправьте подписанный файл, используя тот же сертификат, который использовался для подписания исполняемых файлов приложения.

## <a name="join-the-windows-desktop-application-program"></a>присоединение к программе Windows классических приложений

**Если у вашей компании уже есть учетная запись центра партнеров**: Войдите в свою учетную запись центра партнеров (используя учетная запись Майкрософт, связанную с владельцем учетной записи) и перейдите на страницу **программы** (в разделе **Параметры учетной записи** или выберите **все** в левом меню навигации). в разделе **программа Windows классических приложений** щелкните **Начало работы** , чтобы присоединиться к программе без дополнительных затрат. если у вас есть клиент Azure AD, связанный с учетной записью центра партнеров, добавленные пользователи смогут получить доступ к программе Windows классическое приложение. В ближайшее время мы можем настроить более детализированный доступ к этой программе.

> [!Tip]  
> Если у вашей компании есть учетная запись центра партнеров, но у вас нет доступа к ней, попросите администратора [добавить вас в качестве пользователя](/windows/uwp/publish/add-users-groups-and-azure-ad-applications). обратите внимание, что только владелец учетной записи может присоединиться к программе Windows классических приложений.

 

**если у вашей компании нет учетной записи центра партнеров**, вы можете [зарегистрироваться для участия в программе Windows классических приложений напрямую](https://login.microsoftonline.com/common/oauth2/authorize?client_id=4990cffe-04e8-4e8b-808a-1175604b879f&response_mode=form_post&response_type=code+id_token&scope=openid+profile&state=OpenIdConnect.AuthenticationProperties%3dWc5R_wIKVD0EbOy2UUxS0_0GQJnIAbD-eisMn7Gb4cJL18fRdelvbtj5_R0zoGlsebcnAxIvwKS5kx4Ma4mLMbU4l9ULsE9ajiZU4wtchLJXyJGsPCjCBUNV7TY1SzwXAI-LepSoXkqa8xSywVb7JZ3Xed-Lcw-kwEShFOwt0SdSdc1nNevHbPOhotOeFQcqbo0HESVYXk6pZORJ_OYimG99onp_zSTyludOvvaTd9GYKUgX9exCU5IHReP7MzJDHOgqTg&nonce=637177463071243612.NDU4MjE2ZTMtNmVkMi00YWNiLWEzZGEtMjYyNDRkODI0M2FmOTM3MmE1NzgtMzQ1OC00M2ZkLWJhMDktYzI4YTNhNzdiYTk0&redirect_uri=https%3a%2f%2fpartner.microsoft.com%2faad%2fauthPostGateway&resource=797f4846-ba00-4fd7-ba43-dac1f8f63013&mkt=en-US) без каких-либо затрат. В ближайшее время мы предоставим возможность [связать клиент Azure AD с вашей учетной записью](/windows/uwp/publish/add-users-groups-and-azure-ad-applications) , чтобы другие пользователи в вашей организации также могли войти в систему.

## <a name="add-your-desktop-applications"></a>Добавление классических приложений

после присоединения к программе необходимо добавить Windows настольные приложения на панель мониторинга, чтобы можно было приступить к отображению аналитических отчетов.

Мы используем подписывание кода для определения личности компании и получения аналитики для публикуемых приложений.

Мы предоставим вам файл и попросим вас подписать его с помощью тех же действительных неистекших сертификатов подписи кода, которые вы используете для подписания настольных приложений. После этого подписанный файл будет отправлен на панель мониторинга. Это позволяет нам понять, что все настольные приложения, подписанные с помощью того же сертификата, принадлежат вашей учетной записи. Мы не используем сведения о сертификате для других целей.

> [!Important]  
> Повтор этого процесса при освобождении нового классического приложения не требуется. После отправки подписанного файла мы автоматически выберем все новые приложения, подписанные с помощью того же сертификата, и мы автоматически получаем аналитику для этих продуктов. Кроме того, вам не нужно распространять предоставленный файл в приложениях или отправлять любые виды сопоставления для ваших продуктов.

 

**Добавление одного или нескольких классических приложений**

1.  На панели мониторинга выберите **Добавить классические приложения**.
2.  На следующей странице Скачайте подписанный файл, выбрав **загрузить файл**, а затем сохраните файл на компьютере.
3.  Подпишите только что скачанный файл, используя тот же сертификат подписи кода, который используется для проверки подлинности настольных приложений. для подписи этого файла можно использовать SignTool.exe (доступно в Microsoft Visual Studio и в составе [Windows SDK](https://developer.microsoft.com/windows/downloads/windows-10-sdk)). Дополнительные сведения об этом процессе описаны ниже.
4.  Upload файл, который вы только что подписали, перетащив его в поле (или щелкните, чтобы просмотреть файлы).
5.  Нажмите кнопку **Отправить** , чтобы завершить процесс.

![действия по добавлению классических приложений](images/uploadcert.png)

Если вы используете более одного сертификата подписи кода, вы можете повторить описанные выше действия для каждого из сертификатов. Вы можете скачать, подписать и отправить файл для каждого текущего сертификата, который используется для подписания приложений. Однако можно использовать только один сертификат для каждого скачанного файла.

после выполнения этих действий мы обсудим, какие Windows настольные приложения подписаны тем же сертификатом, который использовался для подписи нашего файла. В большинстве случаев мы начинаем выводить аналитические отчеты в течение 48 часов, хотя иногда это может занять немного больше времени.

## <a name="use-signtoolexe-to-sign-the-downloaded-file"></a>Подписывание скачанного файла с помощью signtool.exe

корпорация майкрософт предоставляет средство для подписывания файлов, SignTool.exe с Visual Studio и в [Windows SDK](https://developer.microsoft.com/windows/downloads/windows-10-sdk). С помощью этого средства можно выполнять и проверять процесс подписывания кода. Дополнительные сведения о SignTool.exe доступны [здесь](/dotnet/framework/tools/signtool-exe).

Ниже приведены два наиболее распространенных способа использования этого средства для подписывания подписанного файла.

-   если у вас есть доступ к сертификату подписи кода в качестве файла [личных сведений Exchange (PFX)](/windows-hardware/drivers/install/personal-information-exchange---pfx--files) :

    ``` syntax
    signtool sign /f MyCert.pfx /p MyCertPassword /v SignableFile.bin
    ```

    ![Снимок экрана, показывающий окно командной строки с командой "Подсказка" SignTool Sign/f MyCert. pfx/p Мицертпассворд/v Сигнаблефиле. bin ".](images/signtool2.png)

-   Если сертификат подписи кода доступен в локальном хранилище сертификатов:

    ``` syntax
    Signtool sign /v /s MY /n CertSubjectName SignableFile.bin
    ```

    ![окно командной строки, показывающее эту команду](images/signtool.png)

После подписания файла можно убедиться, что он успешно подписан с помощью действительного сертификата со следующим адресом:

``` syntax
signtool verify /a SignableFile.bin
```

## <a name="viewing-your-analytic-data"></a>Просмотр аналитических данных

После отправки подписанных файлов и определения настольных приложений на панели мониторинга отобразится Обзор приложений, а также ключевые метрики.

В данных телеметрии будут отображаться такие сведения о работоспособности, как сбои для каждого приложения, связанного с сертификатом. На панели мониторинга отображаются общие сведения о приложениях, а также ключевые метрики. Можно выбрать любое приложение для просмотра его [отчета о работоспособности](#health-report), [установки отчета](#installs-report)и [блокировки отчета](#application-blocks-report) на панели мониторинга. [аналитические данные также можно получить программным путем с помощью API Microsoft Store analytics](#retrieve-analytic-data-using-the-microsoft-store-analytics-api).

> [!Note]  
> Если мы обнаружите, что метаданные приложения были обновлены для использования нового имени, мы начинаем сообщать о новых данных под новым именем. Исторические данные, связанные со старым именем, будут сохраняться в течение 30 дней.
> 
> Аналитика будет недоступна для приложения, пока не установится на устройствах не менее 100.


### <a name="health-report"></a>Отчет о работоспособности

Отчет о **работоспособности** позволяет получать данные, связанные с производительностью и качеством приложения, включая сбои и неотвечающие события. Там, где это применимо, вы можете просмотреть трассировки стека и/или CAB-файлы для более подробной отладки.

![отчет о работоспособности — программа для классических приложений Windows](images/health.png)

Данные можно отфильтровать несколькими способами, что позволяет:

-   Просмотр сводки всех типов сбоев, отсортированных по числу попаданий
-   Выполните детализацию определенного сбоя и скачайте трассировки стека, чтобы ускорить отладку проблемы.
-   Сравнение нового выпуска приложения с предыдущими выпусками
-   Просмотр данных о работоспособности в составе или по регионам, что позволяет изолировать проблемы, характерные для региона
-   сравните производительность настольных приложений в разных версиях Windows или в определенной версии, например в последнем выпуске Windows 10
-   Просмотр сведений о работоспособности для одного конкретного исполняемого файла, входящего в приложение

выберите **Upload символы** в верхней части таблицы " **ошибки** ", чтобы отправить файл .zip, содержащий [файлы символов](/windows-hardware/drivers/debugger/symbols-and-symbol-files)приложения. Эти файлы символов будут индексироваться и использоваться для получения более точных трассировок стека. Файлы символов в .zip должны иметь тип. pdb, .dll или .exe. После успешной отправки файла .zip вы должны увидеть меньше **! Неизвестные** значения для новых сбоев в списке ошибок приложения приблизительно 5 дней.

### <a name="installs-report"></a>Отчет об установках

Отчет **установки** позволяет увидеть, сколько устройств было установлено приложением в течение определенного дня, и среднее число устройств, которые были установлены в течение последних 30 дней.

Данные можно отфильтровать несколькими способами, что позволяет:

-   Просмотр сводки установок, отсортированных по популярности
-   Сравнение нового выпуска приложения с предыдущими выпусками
-   Просмотр данных установки в агрегатной функции или по регионам
-   сравните производительность настольных приложений в разных версиях Windows или в определенной версии, например в последней Windows 10 выпуске или Windows быстро и медленных выпусках.

### <a name="application-blocks-report"></a>Отчет о блоках приложений

отчет **блокировки приложений** позволяет просматривать сведения об Windows 10 устройствах, на которых приложение влияет на Windows 10 обновлений. Вы можете увидеть, сколько устройств затронуло на определенный день, а также среднее число устройств за последние 30 дней.

Существуют следующие типы блоков обновления: 

<table>
<tr><th>Категория</th><th>Проблема</th><th>Описание</th><th>Руководство, предоставленное пользователям</th></tr>
<tr><td>Потенциальные седимент</td><td>Будет блокировать обновление</td><td>Приложение не будет работать в новой версии выпуска ОС. Для продолжения обновления требуется действие пользователя во время установки.</td><td>Удалите приложение перед обновлением и обратитесь к разработчику для использования совместимой версии приложения.</td></tr>
<tr><td>Временный седимент</td><td>Может препятствовать обновлению. Необходимо протестировать приложение.</td><td>Корпорация Майкрософт изучает проблемы обновления, связанные с этим приложением. Обновление не будет выдаваться для пользователей, которые могут повлиять на работу.</td><td>Удалите приложение перед обновлением и обратитесь к разработчику для использования совместимой версии приложения.</td></tr>
<tr><td>Уведомление среды выполнения</td><td>Может работать неправильно в новой версии выпуска ОС, но не будет блокировать обновление</td><td>Приложение не будет препятствовать обновлению, но обнаружены проблемы, которые могут помешать его правильной работе в новой версии выпуска ОС.</td><td>Для продолжения обновления не требуется предпринимать никаких действий, но обязательно протестируйте приложение в новой версии выпуска ОС и при необходимости проверьте наличие совместимой версии у разработчика.</td></tr>
</table>

### <a name="retrieve-analytic-data-using-the-microsoft-store-analytics-api"></a>получение аналитических данных с помощью API Microsoft Store analytics

API Microsoft Store analytics позволяет программно получать данные аналитики для приложений, добавленных в учетную запись.

этот API предлагает следующие методы, характерные для программы Windows классических приложений:

-   [Выборе](/windows/uwp/monetize/get-desktop-app-installs)
-   [Сбои](/windows/uwp/monetize/get-desktop-application-error-reporting-data)
-   [Сведения об ошибке](/windows/uwp/monetize/get-details-for-an-error-in-your-desktop-application)
-   [Трассировка стека](/windows/uwp/monetize/get-the-stack-trace-for-an-error-in-your-desktop-application)
-   [CAB-файл](/windows/uwp/monetize/download-the-cab-file-for-an-error-in-your-desktop-application)
-   [Блоки обновления](/windows/uwp/monetize/get-desktop-block-data)
-   [Сведения о блоке обновления](/windows/uwp/monetize/get-desktop-block-data-details)


Дополнительные сведения об использовании этого API см. в статье [доступ к аналитическим данным с помощью служб хранилища](/windows/uwp/monetize/access-analytics-data-using-windows-store-services).

## <a name="managing-your-desktop-application-metadata"></a>Управление метаданными настольного приложения

Мы используем имя файла, версию файла, имя продукта и метаданные версии продукта в исполняемых файлах, чтобы вывести логические группы исполняемых файлов в приложения. Если исполняемые файлы не имеют точных метаданных, они могут отображаться вместе с **неизвестным** именем приложения, а имя приложения по умолчанию будет использоваться в качестве имени отдельного исполняемого файла.

Своевременное обновление метаданных приложений и файлов помогает убедиться, что они правильно представлены на панели мониторинга. Вот несколько рекомендаций.

-   Используйте сертификат, чтобы подписывать каждый исполняемый файл, который требуется просмотреть в отчете аналитики, а не только исполняемые файлы программы установки.
-   Укажите целостное название продукта и сведения о версии продукта для всех исполняемых файлов, входящих в одно приложение (т. е. *мое приложение*). Если некоторые из исполняемых файлов распространяются вместе с несколькими приложениями, присвойте им уникальные имена (т. е. *Общие компоненты*), чтобы можно было просматривать аналитические исполняемые файлы отдельно от приложений, с которыми они были распространены.
-   Каждый раз при внесении изменений в метаданные на панели мониторинга может появиться новая запись для приложения. При внесении изменений новые входящие данные телеметрии будут отражать изменения, но старые данные телеметрии по-прежнему будут отображаться как **неизвестное** приложение.
-   При пересмотре файла обязательно обновите версию приложения и номера версий продукта.
    > [!Tip]  
    > Используйте ресурсы [**versionInfo**](/windows/desktop/menurc/versioninfo-resource) , чтобы задать **филедескриптион**, **FileVersion**, **ProductName** и **ProductVersion** для файлов и приложений. В следующем примере определяется ресурс **versionInfo** :
    >
    > ``` syntax
    > #define VER_PRODUCTNAME_STR      "Sample App"
    > #define VER_PRODUCTVERSION       3,10,349,0
    > #define VER_PRODUCTVERSION_STR   "3.10.349.0\0"
    > #define VER_FILEDESCRIPTION_STR  "Sample File"
    > #define VER_FILEVERSION          3,10,349,0
    > #define VER_FILEVERSION_STR      "3.10.349.0\0"
    > #define VER_COMPANYNAME_STR     "XYZ Corp."
    > #define VER_LEGALCOPYRIGHT_STR   "Copyright \251 XYZ Corp." 
    >  
    > VS_VERSION_INFO VERSIONINFO
    > FILEVERSION VER_FILEVERSION
    > PRODUCTVERSION VER_PRODUCTVERSION
    > FILEFLAGSMASK VER_FILEFLAGSMASK
    > FILEFLAGS VER_FILEFLAGS
    > FILEOS VER_FILEOS
    > FILETYPE VER_FILETYPE
    > FILESUBTYPE VER_FILESUBTYPE
    > BEGIN
    >     BLOCK "StringFileInfo"
    >     BEGIN
    >         BLOCK "040904E4"
    >         BEGIN
    >             VALUE "ProductName",      VER_PRODUCTNAME_STR
    >             VALUE "ProductVersion",   VER_PRODUCTVERSION_STR
    >             VALUE "FileDescription",  VER_FILEDESCRIPTION_STR
    >             VALUE "FileVersion",      VER_FILEVERSION_STR
    >             VALUE "CompanyName",      VER_COMPANYNAME_STR
    >             VALUE "LegalCopyright",   VER_LEGALCOPYRIGHT_STR
    >         END
    >     END
    >      
    > END 
    > ```

     

## <a name="add-and-manage-account-users"></a>Добавление пользователей учетной записи и управление ими

Azure Active Directory можно использовать для добавления дополнительных пользователей в учетную запись приложения Windows для настольных систем и управления ими. Вы можете добавить отдельных пользователей, группы пользователей или приложения Azure AD, предоставив каждой из них предопределенную роль (руководителя или разработчика).

### <a name="associate-azure-active-directory-with-your-account"></a>связывание Azure Active Directory с вашей учетной записью

Чтобы добавить пользователей учетной записи и управлять ими, необходимо сначала связать учетную запись с Azure Active Directory организации. Если ваша организация уже использует Office 365 или другие бизнес-службы от Майкрософт, то у вас уже есть Azure AD. В противном случае вы можете создать новый клиент Azure AD без дополнительной платы.

дополнительные сведения см. в статье [связывание Azure Active Directory с учетной записью центра партнеров](/windows/uwp/publish/associate-azure-ad-with-dev-center) . хотя в этом разделе основное внимание уделяется программе разработчика Windows apps, связывание клиента выполняется так же, как и для приложения Windows классических приложений.

### <a name="add-users-groups-and-azure-ad-applications-to-your-account"></a>Добавление пользователей, групп и приложений Azure AD в учетную запись

После настройки сопоставления Azure AD можно добавить пользователей, перейдя в раздел "Пользователи" в разделе "Параметры учетной записи". Каждому пользователю назначается роль, определяющая их доступ к учетной записи. Вы также можете добавить группы пользователей и приложения Azure AD, чтобы предоставить им доступ к учетной записи центра партнеров. Дополнительные сведения о добавлении пользователей см. в статье [Добавление пользователей, групп и приложений Azure AD](/windows/uwp/publish/add-users-groups-and-azure-ad-applications).

Каждому пользователю, группе или приложению Azure AD, добавленному в учетную запись, должна быть назначена роль. Этот процесс описан в статье [Установка ролей или пользовательских разрешений для пользователей учетных записей](/windows/uwp/publish/set-custom-permissions-for-account-users). однако обратите внимание, что для приложения Windows классических приложений не существует возможности назначения пользовательских разрешений или ограничения доступа по продуктам. Вместо этого каждому пользователю должна быть назначена одна из следующих стандартных ролей.



| Роль      | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|-----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Manager   | Может отправлять и удалять сертификаты, а также просматривать все аналитические данные. Имеет полный доступ к учетной записи, за исключением изменяющихся финансовых сведений. Сюда входит управление пользователями, но обратите внимание, что возможность создания и удаления пользователей в клиенте Azure AD зависит от разрешения учетной записи в Azure AD. То есть если пользователю назначена роль руководителя, но у него нет разрешений глобального администратора в Azure AD Организации, он не сможет создавать новых пользователей или удалять пользователей из каталога (хотя они могут изменять роль учетной записи пользователя).<br/> Обратите внимание, что если ваша учетная запись связана с несколькими клиентами Azure AD, диспетчер не сможет просмотреть полные сведения для пользователя (включая имя, фамилию, электронную почту для восстановления пароля и то, являются ли они глобальным администратором Azure AD), если только они не вошли в тот же клиент с учетной записью, имеющей разрешения глобального администратора для этого клиента. Однако они могут добавлять и удалять пользователей в любом клиенте, связанном с учетной записью. <br/> |
| Разработчик | Может просматривать приложения и сведения о сертификате, связанные с учетной записью, а также просматривать отчет о **работоспособности** и **установке** . Не может просматривать финансовые сведения или параметры учетной записи.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |



 

## <a name="faq"></a>ВОПРОСЫ И ОТВЕТЫ

-   **Почему не отображаются данные для приложения?** Мы не будем выводить данные, пока не обнаружите достаточного количества пользователей для сбора осмысленной информации. Если вы только что выпустили приложение, для достижения этого минимального порога перехода может потребоваться некоторое время. Еще одна причина, по которой данные могут не отображаться, — если вы не подписали файл с сертификатом для определенного приложения. Убедитесь, что вы отправляете файлы, подписанные с помощью каждого сертификата, который используется для подписания приложений.
-   **Можно ли получить доступ к этим данным через API?** Да, данные будут доступны через общедоступный API, когда программа будет доступна всем разработчикам.
-   **Как насчет приложений с более старыми сертификатами?** К сожалению, мы не поддерживаем отправку сертификатов, срок действия которых истек или отозван, даже если обновить их с помощью одного и того же ключа.
-   **Почему я вижу приложение, которое я не знаю?** Если сертификат, используемый для подписи файлов в приложении, также используется другим лицом в вашей компании для подписи другого приложения, вы увидите данные телеметрии для этого приложения. В будущем мы предоставим возможность скрыть приложения на панели мониторинга. Если ваша учетная запись организации подключена к клиенту Azure AD, вы можете попросить администратора изменить разрешения пользователя, чтобы только определенные приложения были видны Вам.
-   **Как можно отправить отзыв о работе или получить поддержку?** Если вам нужна помощь, можно создать запрос в службу поддержки [здесь](https://developer.microsoft.com/windows/support/). Чтобы поделиться своими отзывами, используйте ссылку **обратной** связи (в разделе **Параметры учетной записи**) и выберите область **аналитика** , чтобы сообщить нам о том, что вы думаете. 
 

