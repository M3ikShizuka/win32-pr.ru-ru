---
description: Описание появления библиотек для Windows 7.
ms.assetid: 83c47963-4c8e-45ee-b707-bd45cfe048cd
title: Библиотеки оболочки Windows в Windows 7
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fb94551d80d0230966626f1bd6499801aff889c4
ms.sourcegitcommit: 3bdf30edb314e0fcd17dc4ddbc70e4ec7d3596e6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/10/2021
ms.locfileid: "105684724"
---
# <a name="windows-shell-libraries-in-windows"></a>Библиотеки оболочки Windows в Windows

В этом разделе описаны общие сведения о библиотеках для Windows 7 и более поздних версий. Библиотеки — это функция оболочки Windows. Для доступа к функциональным возможностям оболочки Windows, таким как библиотеки, сторонние разработчики приложений Windows Search должны сначала реализовать хранилище данных оболочки. Дополнительные сведения см. [в разделе Реализация базовых интерфейсов объекта папки](/previous-versions/windows/desktop/legacy/cc144093(v=vs.85)).

Этот раздел организован следующим образом:

- [Libraries](#libraries)
  - [Точки входа пользовательских данных](#user-data-entry-points)
  - [Коллекции папок](#collections-of-folders)
  - [Поддерживаемые папки в библиотеках](#supported-folders-in-libraries)
  - [Резервное хранилище](#storage-backed)
  - [Контейнеры оболочки, не относящиеся к файловой системе](#non-file-system-shell-containers)
  - [Описания библиотек](#library-descriptions)
- [См. также](#related-topics)

## <a name="libraries"></a>Библиотеки

В Windows 7 и более поздних версиях библиотеки являются репозиторием пользовательских данных по умолчанию. Пользователи могут просматривать свои файлы точно так же, как в папке, или просматривать их файлы по свойствам, таким как дата, тип и автор. В отличие от папки Библиотека не хранит элементы, но отображает файлы, хранящиеся в нескольких папках одновременно. Библиотеки предоставляют единую точку доступа и сводные представления для пользователей их агрегированного содержимого. Например, если у пользователя есть музыкальные файлы в папках на внешнем диске, а не в папке **«Моя музыка** », они смогут немедленно получить доступ ко всем музыкальным файлам через библиотеку музыки.

### <a name="user-data-entry-points"></a>Точки входа пользовательских данных

Библиотеки по умолчанию ( **«Мои документы**», **«Мои рисунки**» и т. д.) эквивалентны [известной папке](/previous-versions/windows/desktop/legacy/bb776911(v=vs.85)). Библиотеки по умолчанию предоставляют пользователям привычные точки входа, но поскольку содержимое библиотеки не ограничено известными библиотеками содержимого папок, пользователям предоставляется больше возможностей для определения места хранения документов и мультимедиа. Библиотеки предоставляются через пространство имен оболочки (источник данных оболочки). Приложение может предоставить пользователям те же знакомые точки входа в данные, включив поддержку библиотеки и просмотр.

### <a name="collections-of-folders"></a>Коллекции папок

Библиотеки представляют собой определяемые пользователем коллекции содержимого. Windows Search индексирует поддерживаемые папки, если они включены в библиотеки. Это позволяет осуществлять мгновенный поиск и упорядочение стеков на основе свойств в библиотеках.

### <a name="supported-folders-in-libraries"></a>Поддерживаемые папки в библиотеках

Для поддержки папок в библиотеках они должны быть индексированы на локальном компьютере и индексироваться на удаленном компьютере Windows или индексироваться на сервере с файлами, индексированными с помощью службы поиска Windows.

Пользователям в диалоговом окне управления библиотекой Windows запрещено добавлять неподдерживаемые папки. Если неиндексированные удаленные папки добавляются в библиотеку с помощью API [ишелллибрари](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) , то взаимодействие с пользователем библиотеки вернется в режим «в **безопасности** библиотеки». В таких функциях **безопасного режима** , как представления стека на основе свойств, предложения по фильтрации и поддержка поиска в **меню «Пуск** », удаляются из затронутой библиотеки.

В следующей таблице перечислены папки, содержащиеся в библиотеках, с помощью диалогового окна управления библиотекой Windows Explorer, и папки, которые не поддерживаются в **защищенном режиме**.

| Поддерживаемые папки                                                                                                                            | Неподдерживаемые папки                                                                                     |
|----------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|
| Фиксированные и внешние жесткие диски NTFS и FAT32                                                                                                | Съемные носители (например, сумбдривес и SD-карты)                                                     |
| Общие папки, индексируемые службой поиска Windows (например, серверы подразделений и на компьютерах под управлением Windows 10 и Windows 7 Домашняя) | Съемные носители (например, компакт-диски и DVD)                                                                  |
| Общие папки, доступные вне сети (например, **перенаправленные документы**, **кэш на стороне клиента**)                                               | Сетевые папки, которые недоступны для автономной и удаленной индексации (например, для дисков NAS);             |
| Недоступно                                                                                                                                          | Другие источники данных (например, Microsoft SharePoint, Microsoft Exchange, Microsoft OneDrive и т. д.) |

### <a name="storage-backed"></a>Storage-Backed

Библиотеки представляют собой коллекции папок хранилища. Пользователи могут сохранять и копировать файлы непосредственно в библиотеку, поскольку для отправки этих файлов в каждой библиотеке существует расположение для сохранения по умолчанию. Для библиотек по умолчанию это известная пользователем папка, включенная в библиотеку (например, **Мои документы**), или первая папка, добавленная в пользовательскую библиотеку. Это папка, куда файлы перемещаются, когда пользователь перетаскивает и удаляет файлы в библиотеке или сохраняет их в библиотеке с помощью диалогового окна common File. Пользователь может изменить место сохранения библиотеки по умолчанию в любой момент, но если она удалит расположение для сохранения по умолчанию, в качестве нового расположения для сохранения будет выбрана следующая папка в библиотеке. Пользователи могут дополнительно сохранить в любой папке, к которой у них есть разрешения, которые были добавлены в библиотеку.

### <a name="non-file-system-shell-containers"></a>Контейнеры оболочки, не относящиеся к файловой системе

Библиотеки могут содержать системные контейнеры оболочки, такие как **компьютер** и **Панель управления**, но содержат элементы файловой системы. Папки и содержимое библиотеки можно перечислить и получить доступ к ним с помощью интерфейсов API для файлов и папок файловой системы в предыдущих операционных системах. Если приложение сильно зависит от специфических интерфейсов API для файловой системы, то API [ишелллибрари](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) можно использовать для получения путей файловой системы к папкам и файлам в библиотеках. В большинстве случаев рекомендуется использовать модель программирования оболочки для поддержки нескольких версий Windows и гибкости элементов. Дополнительные сведения см. [в разделе Навигация по пространству имен оболочки](https://msdn.microsoft.com/library/dd378496(VS.85).aspx).

### <a name="library-descriptions"></a>Описания библиотек

Описания библиотек сохраняются на диске в виде XML-файла в папке библиотеки Microsoft Windows% AppData% \\ \\ (и, возможно, в виде **\_ библиотек FOLDERID**). Дополнительные сведения о **\_ библиотеках FOLDERID** см. в разделе [кновнфолдерид](/windows/desktop/shell/knownfolderid).

Файлы описания библиотеки — это XML-файлы с расширением Library-MS. Эти файлы никогда не должны быть доступны или изменены приложениями. Текст пути к папке, сохраненный в файлах описания библиотеки, не всегда является текущим. Папки библиотеки сохраняются в файле описания библиотеки в формате ссылок на сериализованную двоичную [оболочку](/windows/desktop/shell/links) . Дополнительные сведения о библиотеках и схеме описания библиотеки см. в разделе [Библиотека описание схемы](../shell/library-schema-entry.md). Дополнительные сведения о соединителях федеративного поиска и схеме описания соединителя поиска см. в [схеме описания соединителя](search-sconn-desc-schema-entry.md).

> [ПРИМЕЧАНИЕ]  
> Приложения всегда используют модель программирования оболочки или API [ишелллибрари](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) для работы с содержимым библиотеки и никогда не пытаются вручную получить доступ к файлу описания библиотеки или изменить его.

## <a name="related-topics"></a>См. также

[Поиск Windows 7](./-search-3x-wds-overview.md)

[Новый для поиска Windows 7](new-for-windows-7-search.md)

[Определение приоритетов индексирования и событий набора строк в Windows 7](indexing-prioritization-and-rowset-events.md)