---
description: Описание создания файла описания OpenSearch (. OSDX-) для подключения внешних хранилищ данных к клиенту Windows через протокол OpenSearch.
ms.assetid: 62cd88cd-e6ff-4e46-887d-e62f7018c065
title: Создание файла описания OpenSearch в федеративного поиска Windows
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 406b166d6963517d692ef9de8292190d7eb92102
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103990971"
---
# <a name="creating-an-opensearch-description-file-in-windows-federated-search"></a>Создание файла описания OpenSearch в федеративного поиска Windows

Описание создания файла описания OpenSearch (. OSDX-) для подключения внешних хранилищ данных к клиенту Windows через протокол [OpenSearch](https://github.com/dewitt/opensearch) . Федеративный поиск позволяет пользователям выполнять поиск в удаленном хранилище данных и просматривать результаты в проводнике Windows.

В этом разделе содержатся следующие подразделы.

-   [Файл описания OpenSearch](#opensearch-description-file)
    -   [Минимальная обязательные дочерние элементы](#mininum-required-child-elements)
-   [Стандартные элементы в федеративного поиска Windows](#standard-elements-in-windows-federated-search)
    -   [ShortName](#shortname)
    -   [Описание](#description)
    -   [Шаблон URL-адреса для результатов RSS/Atom](#url-template-for-rssatom-results)
    -   [Шаблон URL-адреса для результатов в Интернете](#url-template-for-web-results)
    -   [Параметры шаблона URL-адреса](#url-template-parameters)
    -   [Страничные результаты](#paged-results)
    -   [Разбиение на страницы с помощью индекса элемента](#paging-using-the-item-index)
    -   [Разбиение на страницы с помощью индекса страниц](#paging-using-the-page-index)
    -   [Page Size](#page-size)
-   [Расширенные элементы в федеративного поиска Windows](#extended-elements-in-windows-federated-search)
    -   [Максимальное число результатов](#maximum-result-count)
    -   [Сопоставление свойств](#property-mapping)
-   [Предварительные версии](#previews)
-   [Открыть пункт меню "расположение файла"](#open-file-location-menu-item)
-   [Дополнительные ресурсы](#additional-resources)
-   [См. также](#related-topics)

## <a name="opensearch-description-file"></a>Файл описания OpenSearch

Файл описания OpenSearch (. OSDX-) для федеративного поиска Windows должен соблюдать следующие правила.

-   Быть допустимым документом описания OpenSearch, как определено в спецификации [OpenSearch](https://github.com/dewitt/opensearch) 1,1.
-   Укажите шаблон URL-адреса с типом формата RSS или Atom.
-   Используйте расширение имени файла OSDX-или сопоставлено с расширением имени файла OSDX-при скачивании из Интернета. Например, сервер не обязательно должен использовать. OSDX-. Сервер может возвратить файл с любым расширением файла, например. XML, и обрабатываться так, как если бы он был OSDX--файлом, если он использует правильный тип MIME для документов описания OpenSearch (OSDX--файлов).
-   Укажите значение элемента **ShortName** (рекомендуется).

### <a name="mininum-required-child-elements"></a>Минимальная обязательные дочерние элементы

В следующем примере файл. OSDX-состоит из параметра **ShortName** и `Url` элементов, которые являются минимально необходимыми дочерними элементами.


```
<OpenSearchDescription xmlns="https://a9.com/-/spec/opensearch/1.1/">
    <ShortName>My web Service</ShortName>
    <Url format="application/rss+xml" 
        template="https://example.com/rss.php?query=
        {searchTerms}&amp;start={startIndex}&amp;cnt={count}" />
</OpenSearchDescription>
```



## <a name="standard-elements-in-windows-federated-search"></a>Стандартные элементы в федеративного поиска Windows

В дополнение к минимальным дочерним элементам, федеративный поиск поддерживает следующие стандартные элементы.

### <a name="shortname"></a>ShortName

Windows использует значение элемента **ShortName** для именования файла. сеарчконнектор-MS (поискового соединителя), который создается, когда пользователь открывает файл OSDX-. Windows гарантирует, что созданное имя файла будет использовать только символы, разрешенные в именах файлов Windows. Если значение параметра **ShortName** не указано, файл. сеарчконнектор-MS пытается использовать вместо него имя файла OSDX-.

В следующем коде показано, как использовать элемент **ShortName** в файле с расширением OSDX-.


```
<OpenSearchDescription xmlns="https://a9.com/-/spec/opensearch/1.1/">
    <ShortName>My web Service</ShortName>
    ...
</OpenSearchDescription>
```



### <a name="description"></a>Описание

Windows использует значение элемента **Description** для заполнения описания файла, отображаемого в области Подробности проводника Windows, когда пользователь выбирает файл сеарчконнектор-MS.


```
<OpenSearchDescription xmlns="https://a9.com/-/spec/opensearch/1.1/">
    ...
    <Description>Searches the example company book catalog</Description>
</OpenSearchDescription>
```



### <a name="url-template-for-rssatom-results"></a>Шаблон URL-адреса для результатов RSS/Atom

Файл. OSDX-должен включать один элемент **формата URL** и атрибут **шаблона** (шаблон URL-адреса), который ВОЗВРАЩАЕТ результаты в формате RSS или Atom. Атрибуту format необходимо присвоить значение `application/rss+xml` для отформатированных результатов RSS или `application/atom+xml` для отформатированных результатов Atom, как показано в следующем коде.

> [!Note]  
> Элемент **форматирования URL-адреса** и атрибут **шаблона** обычно НАЗЫВАЮТСЯ шаблоном URL-адреса.

 


```
<OpenSearchDescription xmlns="https://a9.com/-/spec/opensearch/1.1/">
   ...
        <Url format="application/rss+xml" template="https://example.com/rss.php?query=
            {searchTerms}&amp;start={startIndex}&amp;cnt={count}" />
</OpenSearchDescription>
```



### <a name="url-template-for-web-results"></a>Шаблон URL-адреса для результатов в Интернете

Если существует версия результатов поиска, которую можно просмотреть в веб-браузере, необходимо предоставить **URL-адрес формата** , `text/html` элемент и атрибут **шаблона** , как показано в следующем коде.


```
<OpenSearchDescription xmlns="https://a9.com/-/spec/opensearch/1.1/">
    ...
    <Url format="text/html" template="https://example.com/html.php?query={searchTerms}" />
</OpenSearchDescription>
```



Если указать элемент **URL Format = "text/html"** и атрибут **шаблона** , в командной строке проводника Windows появится кнопка, как показано на следующем снимке экрана, которая позволяет пользователю открывать веб-браузер для просмотра результатов поиска при выполнении запроса пользователем.

![снимок экрана, показывающий кнопку перехода по веб-поиску.](images/websearchroll-overcommandbarbutton.png)

Откат запроса к веб-ИНТЕРФЕЙСу хранилища данных важен в некоторых сценариях. Например, пользователю может потребоваться просмотреть более 100 результатов (по умолчанию число элементов, запрашиваемых поставщиком OpenSearch). Если да, то пользователь может также использовать функции поиска, доступные только на веб-сайте хранилища данных, например повторное выполнение запросов с другим порядком сортировки или сведение и фильтрация запроса с помощью связанных метаданных.

### <a name="url-template-parameters"></a>Параметры шаблона URL-адреса

Поставщик OpenSearch всегда выполняет следующие действия:

1.  Использует шаблон URL-адреса для отправки запроса веб-службе.
2.  Пытается заменить токены, найденные в шаблоне URL, перед отправкой запроса веб-службе следующим образом:
    -   Заменяет стандартные токены OpenSearch, перечисленные в следующей таблице.
    -   Удаляет все токены, которые не перечислены в следующей таблице.



| Поддерживаемый токен  | Использование поставщика OpenSearch                                                                                                                 |
|------------------|-------------------------------------------------------------------------------------------------------------------------------------------------|
| {Сеарчтермс}    | Заменяются терминами поиска, которые пользователь вводит в поле ввода поиска проводника Windows.<br/>                                         |
| startIndex     | Используется при получении результатов в "Pages".<br/> Заменяется индексом для первого возвращаемого элемента результата.<br/>                        |
| StartPage      | Используется при получении результатов в "Pages".<br/> Заменяется номером страницы набора возвращаемых результатов поиска.<br/>               |
| расчета          | Используется при получении результатов в "Pages".<br/> Заменяется на число результатов поиска на каждой странице, запрашиваемых проводником Windows.<br/> |
| языке       | Заменяется строкой, указывающей язык отправляемого запроса.<br/>                                                          |
| {Инпутенкодинг}  | Заменяется строкой (например, UTF-16), которая указывает кодировку отправляемого запроса.<br/>                                |
| OutputEncoding | Заменяется строкой (например, "UTF-16"), указывающей требуемую кодировку символов для ответа от веб-службы.<br/>       |



 

### <a name="paged-results"></a>Страничные результаты

Может потребоваться ограничить количество возвращаемых результатов на запрос. Можно выбрать возврат "страницы" для получения результатов за раз или предоставить поставщику OpenSearch дополнительные страницы результатов по номеру элемента или номеру страницы. Например, при отправке двадцати результатов на страницу первая отправляемая страница начинается с индекса позиции 1 и на странице 1. Вторая отправляемая страница начинается с индекса позиции 21 и на странице 2. Вы можете определить, как поставщик OpenSearch должен запрашивать элементы, используя либо `{startItem}` `{startPage}` маркер в шаблоне URL-адреса.

### <a name="paging-using-the-item-index"></a>Разбиение на страницы с помощью индекса элемента

Индекс элемента определяет первый результирующий элемент на странице результатов. Если требуется, чтобы клиенты отправляли запросы с помощью индекса элемента, можно использовать `{startIndex}` маркер в атрибуте **шаблона** элемента **URL** , как показано в следующем коде.


```
<Url format="application/rss+xml" 
    template="https://example.com/rss.php?query={searchTerms}&amp;start={startIndex}" />
```



Затем поставщик [OpenSearch](https://github.com/dewitt/opensearch) заменяет маркер в URL-адресе начальным значением индекса. Первый запрос начинается с первого элемента, как показано в следующем примере:


```
https://example.com/rss.php?query=frogs&start=1
```



Поставщик OpenSearch может получить дополнительные элементы, изменив `{startIndex}` значение параметра и выполнив новый запрос. Поставщик повторяет этот процесс до тех пор, пока не получит достаточное количество результатов, чтобы удовлетворить его предел, или достигнут конец результатов. Поставщик OpenSearch проверяет количество элементов, возвращаемых веб-службой, на первой странице результатов и устанавливает для ожидаемого размера страницы это число. Он использует это число, чтобы увеличить `{startIndex}` значение для последующих запросов. Например, если веб-служба возвращает 20 результатов в первом запросе, то поставщик устанавливает для ожидаемого размера страницы значение 20. Для следующего запроса поставщик заменяет `{startIndex}` значение 21, чтобы получить следующие 20 элементов.

> [!Note]  
> Если страница результатов, возвращенная веб-службой, содержит меньше элементов, чем ожидалось, то поставщик OpenSearch считает, что он получил последнюю страницу результатов и прекращает выполнение запросов.

 

### <a name="paging-using-the-page-index"></a>Разбиение на страницы с помощью индекса страниц

Индекс страницы определяет указанную страницу результатов. Если требуется, чтобы клиенты отправляли запросы с помощью номера страницы, можно использовать `{startPage}` маркер в атрибуте **шаблона** элемента **URL-адреса** , чтобы указать, что, как показано в следующем примере:


```
<Url format="application/rss+xml" 
    template="https://example.com/rss.php?query={searchTerms}&amp;page={startPage}" />
```



Затем поставщик OpenSearch заменяет маркер в URL-адресе параметром номера страницы. Первый запрос начинается с первой страницы, как показано в следующем примере:


```
https://example.com/rss.php?query=frogs&page=1
```



> [!Note]  
> Если страница результатов, возвращенная веб-службой, содержит меньше элементов, чем ожидалось, то поставщик OpenSearch считает, что он получил последнюю страницу результатов и прекращает выполнение запросов.

 

### <a name="page-size"></a>Page Size

Может потребоваться настроить веб-службу, чтобы позволить запросу указывать размер страниц с помощью некоторого параметра в URL-адресе. Запрос должен быть указан в OSDX--файле с помощью `{count}` токена следующим образом:


```
<Url format="application/rss+xml" 
    template="https://example.com/rss.php?query={searchTerms}&amp;start={startIndex}&amp;cnt={count}" />
```



Поставщик [OpenSearch](https://github.com/dewitt/opensearch) может установить требуемый размер страницы в количестве результатов на страницу, как показано в следующем примере:


```
https://example.com/rss.php?query=frogs&start=1&cnt=50
```



По умолчанию поставщик OpenSearch выполняет запросы, используя размер страницы 50. Если требуется другой размер страницы, не выведите `{count}` маркер и вместо этого поместите требуемое число непосредственно в элемент **шаблона URL-адреса** .

Поставщик OpenSearch определяет размер страницы на основе числа результатов, возвращенных при первом запросе. Если первая страница полученных результатов содержит меньше элементов, чем запрошенное количество, поставщик сбрасывает размер страницы для всех последующих запросов страницы. Если последующие запросы страницы возвращают меньшее количество элементов, чем было запрошено, поставщик OpenSearch предполагает, что достигнут конец результатов.

## <a name="extended-elements-in-windows-federated-search"></a>Расширенные элементы в федеративного поиска Windows

Помимо стандартных элементов, федеративный поиск поддерживает следующие расширенные элементы: **максимумресулткаунт** и **ресултспроцессинг**.

Поскольку эти расширенные дочерние элементы не поддерживаются в спецификации [OpenSearch](https://github.com/dewitt/opensearch) v 1.1, их необходимо добавить с помощью следующего пространства имен:


```
http://schemas.microsoft.com/opensearchext/2009/
```



### <a name="maximum-result-count"></a>Максимальное число результатов

По умолчанию поисковые соединители ограничены 100 результатами на запрос пользователя. Это ограничение можно настроить, включив элемент **максимумресулткаунт** в файл OSD, как показано в следующем примере:


```
<OpenSearchDescription xmlns="https://a9.com/-/spec/opensearch/1.1/" 
    xmlns:ms-ose="http://schemas.microsoft.com/opensearchext/2009/">
        ...
        <ms-ose:MaximumResultCount>200</ms-ose:MaximumResultCount>
</OpenSearchDescription>
```



В предыдущем примере префикс пространства имен объявляется `ms-ose` в элементе **опенсеарчдескриптион** верхнего уровня, а затем используется в качестве префикса в имени элемента. Это объявление является обязательным, так как **максимумресулткаунт** не поддерживается в спецификации [OpenSearch](https://github.com/dewitt/opensearch) v 1.1.

### <a name="property-mapping"></a>Сопоставление свойств

Когда веб-служба возвращает результаты в виде канала RSS или Atom, поставщик OpenSearch должен сопоставлять метаданные элементов в веб-каналах со свойствами, которые может использовать оболочка Windows. На следующем снимке экрана показано, как поставщик OpenSearch сопоставляет некоторые из элементов RSS по умолчанию.

![снимок экрана с встроенными сопоставлениями свойств RSS-to-Windows-Shell](images/built-inrsstowindowsshellpropertymappings.png)

### <a name="default-mappings"></a>Сопоставления по умолчанию

По умолчанию сопоставления XML-элементов RSS с системными свойствами оболочки Windows перечислены в следующей таблице. Пути XML задаются относительно элемента Item. `"media:"`Префикс определяется пространством имен [поиска Yahoo](https://www.rssboard.org/media-rss) .



| XML-путь RSS                  | Свойство оболочки Windows (каноническое имя) |
|-------------------------------|-----------------------------------------|
| Ссылка                          | System. Итемурл                          |
| Заголовок                         | System. ItemName                         |
| Автор                        | System.Author                           |
| pubDate                       | System. DateModified                     |
| Описание                   | System. автосводка                      |
| Категория                      | System.Keywords                         |
| enclosure/@type               | System. MIMEType                         |
| enclosure/@length             | System. size                             |
| enclosure/@url                | System. Контентурл                       |
| носитель: Категория                | System.Keywords                         |
| media:content/@fileSize       | System. size                             |
| media:content/@type           | System. MIMEType                         |
| media:content/@url            | System. Контентурл                       |
| media:group/content/@fileSize | System. size                             |
| media:group/content/@type     | System. MIMEType                         |
| media:group/content/@url      | System. Контентурл                       |
| media:thumbnail/@url          | System. Итемсумбнаилурл                 |



 

> [!Note]  
> Помимо сопоставления по умолчанию стандартных элементов RSS или Atom, можно сопоставить другие системные свойства оболочки Windows, включив дополнительные XML-элементы в пространство имен Windows для каждого свойства. Можно также сопоставлять элементы из других существующих пространств имен XML, таких как Медиарсс, iTunes и т. д., путем добавления пользовательского сопоставления свойств в OSDX--файл.

 

### <a name="custom-property-mappings"></a>Сопоставления пользовательских свойств

Вы можете настроить сопоставление элементов из выходных данных RSS с системными свойствами оболочки Windows, указав сопоставление в OSDX--файле.

В выходных данных RSS указывается:

-   Пространство имен XML и
-   Для любого дочернего элемента элемента — имя элемента для сопоставлений.

OSDX--файл определяет свойство оболочки Windows для каждого имени элемента в пространстве имен. Сопоставления свойств, определенные в файле. OSDX-, переопределяют сопоставления по умолчанию, если они существуют, для указанных свойств.

На следующей схеме показано, как расширение RSS сопоставляется со свойствами Windows (каноническое имя).

![Схема, показывающая, что сочетание пространства имен XML и пути XML создает каноническое имя](images/rssextensionsusexmlnamespaceandpathstomaptowindowsproperties.png)

### <a name="example-rss-results-and-osd-property-mapping"></a>Пример отображения результатов в формате RSS и свойства OSD

Следующий пример выходных данных RSS идентифицирует `https://example.com/schema/2009` как пространство имен XML с префиксом "example". Этот префикс должен отображаться еще раз перед элементом **электронной почты** .


```
<rss version="2.0" xmlns:example="https://example.com/schema/2009">
   ...
    <item>
      <title>Someone</title>
      <example:email>Someone@example.com</example:email>
    </item>
```



В следующем примере файла. OSDX-элемент **электронной почты** XML сопоставляется со свойством оболочки Windows [System. Contact. EmailAddress](../properties/props-system-contact-emailaddress.md).


```
<OpenSearchDescription xmlns="https://a9.com/-/spec/opensearch/1.1/"
    xmlns:ms-ose="http://schemas.microsoft.com/opensearchext/2009/">
...
 <ms-ose:ResultsProcessing format="application/rss+xml">
   <ms-ose:PropertyMapList>
     <ms-ose:PropertyMap sourceNamespaceURI="https://example.com/schema/2009/" >
       <ms-ose:Source path="email">
         <ms-ose:Property schema="http://schemas.microsoft.com/windows/2008/propertynamespace" name="System.Contact.EmailAddress" />
       </ms-ose:Source>
     </ms-ose:PropertyMap>
   </ms-ose:PropertyMapList>
 </ms-ose:ResultsProcessing>
...
</OpenSearchDescription>
```



Некоторые свойства не могут быть сопоставлены, так как их значения либо переопределены позже, либо не являются изменяемыми. Например, невозможно сопоставить [System. итемфолдерпасдисплай](../properties/props-system-itempathdisplay.md) или [System. итемпасдисплайнарров](../properties/props-system-itempathdisplaynarrow.md) , так как они вычисляются по значению URL-адреса, указанного в элементах Link или enclosure.

### <a name="thumbnails"></a>Эскизы

URL-адреса изображений можно предоставить для любого элемента с помощью элемента **Media: thumbnail URL = ""** . Идеальное разрешение составляет 150 x 150 пикселей. Поддерживаются максимальные эскизы 256 x 256 пикселей. Предоставление большего количества образов требует больше пропускной способности, что не дает пользователю никаких дополнительных преимуществ.

### <a name="open-file-location-context-menu"></a>Открыть контекстное меню расположения файлов

Windows предоставляет контекстное меню с именем **открыть расположение файлов** для результатов. Если пользователь выбирает элемент из этого меню, открывается "родительский" URL-адрес для выбранного элемента. Если это URL-адрес, например `https://...` , веб-браузер открывается и переходит по этому URL-адресу. Для каждого элемента веб-канал должен предоставить настраиваемый URL для того, чтобы в Windows открывался допустимый URL-адрес. Это можно сделать, включив URL-адрес внутри элемента внутри XML элемента, как показано в следующем примере:


```
<rss version="2.0" xmlns:example="https://example.com/schema/2009" 
    xmlns:win="http://schemas.microsoft.com/windows/2008/propertynamespace">
...
   <item>
      <title>Someone</title>
      <link>https://example.com/pictures.aspx?id=01</link>
      <win:System.ItemFolderPathDisplay>https://example.com/pictures_list.aspx
   </win:System.ItemFolderPathDisplay>
   </item>
...
```



Если это свойство не задано явно в XML-коде элемента, поставщик OpenSearch устанавливает его в качестве родительской папки для URL-адреса элемента. В приведенном выше примере поставщик OpenSearch будет использовать значение Link и установить для свойства оболочки Windows [System. итемфолдерпасдисплай](../properties/props-system-itemfolderpathdisplay.md) значение `"https://example.com/"` .

### <a name="customize-windows-explorer-views-with-property-description-lists"></a>Настройка представлений проводника Windows с помощью списков описания свойств

Некоторые макеты представления проводника Windows определяются списками описания свойств или проплистс. Проплист — это разделенный точками с запятой список свойств, таких как `"prop:System.ItemName; System.Author"` , который используется для управления отображением результатов в проводнике Windows.

Области пользовательского интерфейса проводника Windows, которые можно настроить с помощью проплистс, показаны на следующем снимке экрана:

![снимок экрана, в котором показаны области пользовательского интерфейса проводника Windows, которые можно настроить с помощью проплистс](images/areasofwindowsexplorerthatyoucancontrolwithproplists.png)

Каждая область проводника имеет связанный набор проплистс, которые сами указываются как свойства. Можно указать пользовательские проплистс для отдельных элементов в результирующих наборах или для всех элементов в наборе результатов.



| Область пользовательского интерфейса для настройки               | Свойство оболочки Windows, которое реализует настройку |
|------------------------------------|----------------------------------------------------------|
| Режим просмотра содержимого (при поиске) | System. Проплист. Контентвиевмодефорсеарч                 |
| Режим просмотра содержимого (при просмотре)  | System. Проплист. Контентвиевмодефорбровсе                 |
| Режим мозаичного представления                     | System. Проплист. Тилеинфо                                 |
| Область сведений                       | System. Проплист. Превиевдетаилс                           |
| Подсказка (Подсказка при наведении элемента)     | System. Проплист. всплывающая подсказка                                  |



 

 

**Чтобы указать уникальный проплист для отдельного элемента, сделайте следующее:**

1.  В выходных данных RSS Добавьте настраиваемый элемент, представляющий проплист, который необходимо настроить. Например, в следующем примере задается список для области сведений:
    ```
    <win:System.PropList.PreviewDetails>
        prop:System.ItemName;System.Author</win:System.PropList.PreviewDetails>
    ```

    

2.  Чтобы применить свойство к каждому элементу в результатах поиска без изменения выходных данных RSS, укажите проплист в элементе **MS-OSE: пропертидефаултвалуес** в файле OSDX-, как показано в следующем примере:

    ```
    <ms-ose:ResultsProcessing format="application/rss+xml">
        <ms-ose:PropertyDefaultValues>
          <ms-ose:Property schema="http://schemas.microsoft.com/windows/2008/propertynamespace"
            name="System.PropList.ContentViewModeForSearch">prop:~System.ItemNameDisplay;System.Photo.DateTaken;
            ~System.ItemPathDisplay;~System.Search.AutoSummary;System.Size;System.Author;System.Keywords</ms-ose:Property>
        </ms-ose:PropertyDefaultValues>
      </ms-ose:ResultsProcessing>
    ```

    

### <a name="content-view-mode-layout-of-properties"></a>Макет свойств в режиме просмотра содержимого

Список свойств, указанных в свойствах **System. проплист. контентвиевмодефорсеарч** и **System. проплист. контентвиевмодефорбровсе** проплистс, определяет, что отображается в режиме просмотра содержимого. Дополнительные сведения о списках свойств см. в разделе [проплист](/windows/win32/api/propsys/nf-propsys-ipropertysystem-getpropertydescriptionlistfromstring).

Свойства размещаются в соответствии с числами, указанными в следующем шаблоне макета:

![снимок экрана, показывающий шаблон макета по умолчанию в представлении содержимого](images/propertiesnumberslayoutpattern.png)

Если используется следующий список свойств,


```
prop:~System.ItemNameDisplay;System.Author;System.ItemPathDisplay;~System.Search.AutoSummary;
    System.Size;System.Photo.DateTaken;System.Keywords
```



Затем отображаются следующие сведения:

![снимок экрана с примером макета свойства.](images/samplepropertylayout.png)

> [!Note]  
> Для лучшей удобочитаемости свойства, отображаемые в крайнем правом столбце, должны иметь метку.

 

### <a name="property-list-flags"></a>Флаги списка свойств

Только один из флагов, определенных в документации проплистс, применяется к отображению элементов в макетах в режиме просмотра содержимого: ` "~"` . В предыдущих примерах в представлении проводника Windows отображаются метки некоторых свойств, например `Tags: animals; zoo; lion` . Это поведение по умолчанию при указании свойства в списке. Например, проплист, `"System.Author"` который отображается как `"Authors: value"` . Если необходимо скрыть метку свойства, поместите `"~"` перед именем свойства. Например, если проплист имеет `"~System.Size"` значение, свойство отображается в виде значения, без метки.

## <a name="previews"></a>Предварительный просмотр

Когда пользователь выбирает элемент результата в проводнике Windows, а панель предварительного просмотра открыта, содержимое элемента отображается предварительно.

Содержимое, отображаемое в предварительной версии, задается URL-адресом, который определяется следующим образом:

1.  Если для элемента задано свойство оболочки Windows **System. вебпревиевурл** , используйте этот URL-адрес.
    > [!Note]  
    > Свойство должно быть предоставлено в RSS с помощью пространства имен оболочки Windows или явно сопоставлено в OSDX--файле.

     

2.  Если это не так, используйте вместо этого URL-адрес ссылки.

Эта логика показана в следующей блок-схеме.

![Блок-схема, показывающая, как проводник Windows выбирает URL, используемый для предварительных версий](images/howwindowsexploreridentifieswhichurltouseforpreviews.png)

Можно использовать другой URL-адрес для предварительного просмотра, чем для самого элемента. Это означает, что если указать разные URL-адреса для ссылки и вложение, то `media:content URL` проводник Windows использует URL-адрес ссылки для предварительного просмотра элемента, но использует другой URL-адрес для обнаружения типа файла, открытия, загрузки и т. д.

Как проводник Windows определяет, какой URL-адрес следует использовать:

1.  Если указать сопоставление для [System. итемфолдерпасдисплай](../properties/props-system-itemfolderpathdisplay.md), проводник Windows использует этот URL-адрес.
2.  Если сопоставление не указано, проводник Windows определяет, различаются ли URL-адреса ссылок и вложений. Если это так, проводник Windows использует URL-адрес ссылки.
3.  Если URL-адреса одинаковы или если имеется только URL-адрес ссылки, проводник Windows анализирует ссылку, чтобы найти родительский контейнер, удалив имя файла из полного URL-адреса.
    > [!Note]  
    > Если вы знаете, что синтаксический анализ URL-адреса приведет к невозможности ссылок для службы, необходимо предоставить явное сопоставление для свойства.

     

## <a name="open-file-location-menu-item"></a>Открыть пункт меню "расположение файла"

При щелчке элемента правой кнопкой мыши отображается команда меню **открыть расположение файла** . Эта команда переводит пользователя в контейнер для или расположения этого элемента. Например, в поиске SharePoint при выборе этого параметра для файла в библиотеке документов открывается корневой каталог библиотеки документов в веб-браузере.

Когда пользователь нажимает кнопку **открыть расположение файла**, проводник Windows пытается найти родительский контейнер, используя логику, показанную в следующей блок-схеме:

![Блок-схема, показывающая, как проводник Windows определяет родительский контейнер](images/howwindowsexploreridentifiesaparentcontainer.png)

## <a name="additional-resources"></a>Дополнительные ресурсы

Дополнительные сведения о реализации Федерации поиска в удаленных хранилищах данных с помощью технологий OpenSearch в Windows 7 и более поздних версиях см. в разделе "дополнительные ресурсы" в [Федеративной функции поиска в Windows](/previous-versions//dd742958(v=vs.85)).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Федеративный поиск в Windows](-search-federated-search-overview.md)
</dt> <dt>

[начало работы с федеративными поиском в Windows](getting-started-with-federated-search-in-windows.md)
</dt> <dt>

[Подключение веб-службы в Федеративной службе поиска Windows](-search-federated-search-web-service.md)
</dt> <dt>

[Включение хранилища данных в федеративный поиск Windows](-search-federated-search-data-store.md)
</dt> <dt>

[Следующие рекомендации по использованию федеративного поиска Windows](-search-fedsearch-best.md)
</dt> <dt>

[Развертывание соединителей поиска в федеративного поиска Windows](-search-federated-search-deploying.md)
</dt> </dl>

 

 
