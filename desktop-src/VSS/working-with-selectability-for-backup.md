---
description: В следующей таблице описаны четыре типа компонентов, которые могут быть задействованы в операции резервного копирования.
ms.assetid: d94e015b-6735-4a88-9d24-b73f0b5f6542
title: Работа с выборкой для резервного копирования
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 82081bb9cef51572afc2a8b5c08cf845ee22736dd8fdc20edf60fa0082ce8c9b
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118842318"
---
# <a name="working-with-selectability-for-backup"></a>Работа с выборкой для резервного копирования

В следующей таблице описаны четыре типа компонентов, которые могут быть задействованы в операции резервного копирования.



| Тип компонента                                                                                                                                                                                                               | Описание                                                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------|
| <span id="Nonselectable-for-backup_components"></span><span id="nonselectable-for-backup_components"></span><span id="NONSELECTABLE-FOR-BACKUP_COMPONENTS"></span>Невыбираемые компоненты для резервного копирования<br/>             | В логических путях нет выбранных предков для резервного копирования.<br/>                              |
| <span id="Selectable-for-backup_components"></span><span id="selectable-for-backup_components"></span><span id="SELECTABLE-FOR-BACKUP_COMPONENTS"></span>Компоненты, которые вы выбрали для резервного копирования<br/>                         | В логических путях нет выбранных предков для резервного копирования.<br/>                              |
| <span id="Nonselectable-for-backup_subcomponents"></span><span id="nonselectable-for-backup_subcomponents"></span><span id="NONSELECTABLE-FOR-BACKUP_SUBCOMPONENTS"></span>Невыбираемые компоненты для резервного копирования<br/> | Невыбираемые компоненты для резервного копирования с выбираемыми для резервного копирования предками в пути.<br/> |
| <span id="Selectable-for-backup_subcomponents"></span><span id="selectable-for-backup_subcomponents"></span><span id="SELECTABLE-FOR-BACKUP_SUBCOMPONENTS"></span>Подкомпоненты выборки для резервного копирования<br/>             | Выбираемые компоненты для резервного копирования с выбираемыми для резервного копирования предками в пути.<br/>    |



 

Кроме того, любой компонент, который может быть выбран для резервного копирования, независимо от того, есть ли у него предшественники с возможностью выбора для резервного копирования или нет — определяет [*набор компонентов*](vssgloss-c.md) , если он имеет другие компоненты в качестве предка в логических путях.

Правила, управляющие выбором компонентов для резервного копирования, можно суммировать следующим образом.

-   Если какой-либо компонент без выделенного предка в логическом пути — возможность выбора компонента (для резервного копирования или невыбираемого для резервного копирования) включена в резервную копию, она должна быть [*включена явным образом*](vssgloss-e.md). Это означает, что метаданные для этих компонентов добавляются в документ компонентов резервного копирования.

    Инициаторы запроса явно добавляют эти компоненты с помощью метода [**ивссбаккупкомпонентс:: AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent) .

-   Невыбираемые компоненты для резервного копирования всегда включаются в резервную копию [*неявно*](vssgloss-i.md) . Это означает, что метаданные для этих компонентов не являются частью документа компонента резервного копирования.
-   Вложенные компоненты, доступные для резервного копирования, неявно включаются, если этот предок явно включен в резервную копию. В этом случае метаданные для этих компонентов не добавляются в документ компонентов резервного копирования. Если компонент, неявно выбираемый для резервного копирования, определяет набор компонентов, также неявно выбираются члены этого набора компонентов.
-   Выбираемые подкомпоненты для резервного копирования, которые можно выбрать для предка, не включаются в резервную копию явным образом инициатором запроса с помощью метода [**ивссбаккупкомпонентс:: AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent) . Метаданные для компонента будут добавлены в документ компонентов резервного копирования. Кроме того, если подкомпонент выборки для резервного копирования определяет набор компонентов, члены этого набора компонентов неявно включаются в резервную копию.

В качестве примера можно использовать вариант "Мивритер", описанный в разделе " [логические пути к компонентам](logical-pathing-of-components.md) ", чтобы продемонстрировать возможность выбора для резервного копирования.



| Имя компонента | Логический путь            | Выбор для резервного копирования |
|----------------|-------------------------|-----------------------|
| Исполняемые файлы  | ""                      | Нет                     |
| "Конфигфилес"  | Исполняемые файлы           | Нет                     |
| "Лиценсеинфо"  | ""                      | Д                     |
| Security     | ""                      | Д                     |
| UserInfo     | Security              | Нет                     |
| Сертификаты | Security              | Нет                     |
| "Вритердата"   | ""                      | Д                     |
| Set1         | "Вритердата"            | Нет                     |
| Янв          | "Вритердата \\ Set1"      | Нет                     |
| Уменьшение          | "Вритердата \\ Set1"      | Нет                     |
| Set2         | "Вритердата"            | Нет                     |
| Янв          | "Вритердата \\ Set2"      | Нет                     |
| Уменьшение          | "Вритердата \\ Set2"      | Нет                     |
| Выбор        | "Вритердата \\ куерилогс" | Нет                     |
| Загрузка        | "Вритердата"            | Д                     |
| Янв          | " \\ Использование вритердата"     | Нет                     |
| Уменьшение          | " \\ Использование вритердата"     | Нет                     |



 

При каждом резервном копировании "Мивритер" явно, включая компонент "исполняемые объекты", использующий метод [**ивссбаккупкомпонентс:: AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent) , неявно включает компонент "конфигфилес".

Компонент «Лиценсеинфо» является отдельным выбираемым компонентом для резервного копирования. Его можно выбрать с помощью метода [**ивссбаккупкомпонентс:: AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent) по собственному инициатору запроса, но в его выборе не будут выбраны другие компоненты.

Компонент "безопасность", который вы выбрали для резервного копирования, определяет простой набор компонентов, содержащий два невыбираемых подкомпонентов — для резервного копирования, "UserInfo" и "сертификаты". Если параметр "безопасность" явно включен в резервную копию, то также включаются и сертификаты "UserInfo" и "Certificates". Невозможно включить в операцию резервного копирования подкомпоненты "UserInfo" или "сертификаты", если не включена защита.

Если выбран компонент «Вритердата», то невыбираемые компоненты для резервного копирования «set1», «set2» и «запрос», а также «использование» для компонента резервного копирования выбираются неявно. Каждый из этих компонентов имеет подкомпоненты, которые неявно выбираются для резервного копирования. Ни одна из их метаданных не будет добавлена в документ компонентов резервного копирования.

Если компонент "Вритердата" не выбран, для резервного копирования не будут включены компоненты, не выбранные для резервного копирования "set1", "set2" и "Query".

Тем не менее, инициаторы запроса могут явно включить возможность выбора для компонента резервного копирования "использование". Метаданные для этого компонента будут добавлены в документ компонентов резервного копирования. Подкомпоненты "использование" и "Декабрь" будут неявно добавляться в резервную копию, но их сведения не будут добавлены в документ компонентов резервного копирования.

Явное включение компонента для резервного копирования приведет к созданию соответствующего экземпляра [**ивсскомпонент**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) в документе компонента резервного копирования.

Инициатор запроса будет получать сведения о явно включаемых компонентах из документа его компонентов резервного копирования путем проверки этих модулей записи (с помощью [**ивссбаккупкомпонентс:: жетвритеркомпонентс**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents)), которые содержатся в документе, и получения сохраненных объектов [**ивсскомпонент**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) .

Так как ни информация о наборе файлов (спецификация файла, путь и флаг рекурсии) компонентов, имеющихся в документе архивных компонентов, отсутствует, а сведения о неявных добавленных компонентах будут представлены, инициатору запроса потребуется получить полные сведения обо всех компонентах, включенных в документ архивных компонентов.

 

 




