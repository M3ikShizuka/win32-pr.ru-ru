---
description: Параметры восстановления позволяют запрашивающим устройствам передавать настраиваемые параметры восстановления в модули записи.
ms.assetid: 364550a1-070a-4f7e-bd62-84672959dc21
title: Настройка параметров восстановления VSS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 58f3ca56a516148bcc11a12fc72aaa6941b0436236525c06c63142107bd18b59
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118121999"
---
# <a name="setting-vss-restore-options"></a>Настройка параметров восстановления VSS

Параметры восстановления позволяют запрашивающим устройствам передавать настраиваемые параметры восстановления в модули записи.

## <a name="restore-options"></a>Параметры восстановления

Стандартизация формата параметров восстановления позволяет модулям записи и инициаторам обработки распространенных пользовательских запросов. Параметры восстановления задаются инициатором запроса путем вызова метода [**ивссбаккупкомпонентс:: сетрестореоптионс**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setrestoreoptions) до одного раза на выбранный компонент для резервного копирования перед вызовом метода [**rerestore ивссбаккупкомпонентс::P**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) . Строка, передаваемая в параметр *всзрестореоптионс* методу **сетрестореоптионс** , может содержать несколько значений, как описано ниже.

## <a name="format"></a>Формат

Формат параметров восстановления представляет собой одну или несколько пар "имя-значение", разделенных запятыми, и имя, по желанию, имя подкомпонента, к которому он применяется. Имена компонентов и имена параметров не учитывают регистр. Чувствительность к регистру значений определяется модулем записи. Пример:

``` syntax
"Child1":"Option1"="Value1","Option2"="Value2","Child2\Grandchild3":"Option3"="Value3"
```

В этом примере "параметр1" применяется только к подкомпоненту "child1" и его потомкам, параметр "параметр2" применяется ко всем компонентам и их потомкам, а "Option3" применяется только к \\ подкомпонентам "Child2 Grandchild3" и его потомкам.

Метод [**сетрестореоптионс**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setrestoreoptions) может быть вызван только для компонентов, которые могут быть выбраны для резервного копирования, тогда как узлы-потомки нельзя выбирать для резервного копирования, они могут быть доступны для восстановления.

## <a name="common-restore-options"></a>Общие параметры восстановления

Эти общие параметры восстановления были определены для повышения совместимости между модулями записи и запрашивающими стороны.

-   Заслуживающего

    Параметр "полномочное" поддерживает несколько значений "элемент", но только одно значение "все".

    Весь этот компонент является полномочным.

    ``` syntax
    "Authoritative"="All"
    ```

    Только указанный элемент является полномочным. Формат именованного элемента определяется модулем записи. Распространенными конструкциями являются " \* " для обозначения всех файлов, "..." для указания всех файлов и подкаталогов указанного компонента.

    ``` syntax
    "Authoritative"="Item:XXX"
    ```

-   Накат

    После восстановления базы данных модули записи обычно направляются в журналы, чтобы обеспечить актуальность базы данных. В случае добавочного или разностного восстановления инициатор запроса использует метод [**ивссбаккупкомпонентс:: сетаддитионалресторес**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) для частичного управления поведением обработки журнала. Этот вариант восстановления позволяет более детально управлять.

    Не переносите журналы.

    ``` syntax
    "Roll Forward"="None"
    ```

    Выполните все журналы.

    ``` syntax
    "Roll Forward"="All"
    ```

    Накат журналов до указанной точки. Формат указанной точки определяется модулем записи.

    ``` syntax
    "Roll Forward"="Partial:XXX"
    ```

-   Имя нового компонента

    Модуль записи может потребоваться восстановить новое имя компонента. Например, восстановление базы данных с другим именем для восстановления отдельного элемента; При восстановлении с тем же именем все данные мы рекомендуем, чтобы модули записи приняли допустимый логический путь и имя компонента в качестве значения этого параметра. Это часто будет использоваться с [*направленным целевым объектом*](vssgloss-d.md).

    ``` syntax
    "New Component Name"="Logical Path\Component Name"
    ```

 

 



