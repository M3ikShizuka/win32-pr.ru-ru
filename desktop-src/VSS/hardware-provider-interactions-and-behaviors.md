---
description: Взаимодействие и поведение поставщика оборудования
ms.assetid: 059968cf-43e5-4442-b757-80afdd66799f
title: Взаимодействие и поведение поставщика оборудования
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5aa30add6b34a7f3a0c45c88346c32c43e99398e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104264026"
---
# <a name="hardware-provider-interactions-and-behaviors"></a>Взаимодействие и поведение поставщика оборудования

Поставщики оборудования могут поддерживать теневые копии копирования при записи и (или) копирования зеркальных копий (разностных и (или) плексов). Выделение ресурсов для теневых копий должно соответствовать контексту, указанному инициатором запроса в [**ивссбаккупкомпонентс:: SetContext**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setcontext), перечисленном в [**\_ \_ \_ контексте моментальных снимков VSS**](/windows/desktop/api/Vss/ne-vss-vss_snapshot_context), для набора теневых копий.

-   Если инициатор запроса указывает контекст теневой копии, поддерживаемый поставщиком, поставщик должен создать теневую копию с помощью этого метода.
-   Если инициатор запроса указывает контекст теневой копии, который не поддерживается поставщиком, поставщик не должен пытаться создать теневую копию и вернуть **значение false** с помощью параметра *пбиссуппортед* в [**ивсшардвареснапшотпровидер:: арелунссуппортед**](/windows/desktop/api/VsProv/nf-vsprov-ivsshardwaresnapshotprovider-arelunssupported).
-   Если в инициаторе запроса явно не указан контекст теневой копии, то поставщик должен использовать разумное поведение по умолчанию при создании теневой копии.

Поставщики оборудования, связанные с подсистемами RAID SAN, должны поддерживать перепереносимые теневые копии, чтобы разрешить перемещение между узлами в сети SAN.

Поставщики оборудования, запущенные на нескольких компьютерах в сети SAN, пока управляют одной и той же подсистемой RAID, не нуждаются в координации между поставщиками в сети хранения данных. Координатор сохраняет все необходимое состояние. Распознаются два вида состояний:

-   Состояние, необходимое для поддержки доступа к данным на томах, содержащихся в аппаратной теневой копии. Сюда входит любое добавление тегов тома в режим «только для чтения» или «скрытый». Это состояние должно быть на LUN оборудования и в поездках с LUN. Это состояние сохраняется во всех эпохах загрузки и (или) обнаружении устройства. Служба VSS управляет этим состоянием во время существования теневой копии.
-   Состояние, необходимое для распознавания определенного тома в составе набора теневых копий. Это состояние сохраняется VSS в сочетании с инициатором запроса, который изначально создал набор теневых копий.

Дополнительные сведения см. в следующих разделах:

-   [Процесс создания теневой копии](the-shadow-copy-creation-process.md)
-   [Требуемые поведения для поставщиков теневого копирования](required-behaviors-for-shadow-copy-providers.md)
-   [Переходы состояний в поставщиках теневого копирования](state-transitions-in-shadow-copy-providers.md)
-   [Обработка ошибок в поставщиках теневого копирования](error-handling-in-shadow-copy-providers.md)

 

 



