---
description: При разработке собственного приложения VSS следует учитывать следующие рекомендации и ограничения.
ms.assetid: d4edc16c-f768-4095-9b2a-b706f19f9e61
title: Совместимость приложений VSS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5b9cc19b6a6d88365a67569bc4729855077c9da9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104343582"
---
# <a name="vss-application-compatibility"></a>Совместимость приложений VSS

При разработке собственного приложения VSS следует учитывать следующие рекомендации и ограничения. Может оказаться полезным ознакомиться с примером кода для инициаторов запросов VSS, поставщиков и модулей записи, предоставляемых пакетом SDK для Microsoft Windows.

> [!Note]  
> Windows SDK можно использовать для разработки приложений VSS только для Windows Vista и более поздних версий операционной системы Windows. Его нельзя использовать для разработки запросов VSS, поставщиков или модулей записи для Windows Server 2003 R2, Windows Server 2003 или Windows XP.

 

**Windows server 2003 R2, Windows server 2003 и Windows XP:** Служба VSS доступна в пакете SDK для служба теневого копирования томов 7,2, который можно скачать из [https://www.microsoft.com/download/details.aspx?id=23490](https://www.microsoft.com/download/details.aspx?id=23490) . Обратите внимание, что \\ для 64-разрядных версий Windows server 2003 R2, Windows server 2003 и Windows XP можно использовать 64-битные файлы вссапи. lib в каталогах, которые находятся в каталоге файлов Win2003. Этот пакет SDK также содержит образцы кода для инициаторов запросов VSS, поставщиков и модулей записи.

## <a name="compiling-vss-applications"></a>Компиляция приложений VSS

При разработке инициатора запроса, например приложения резервного копирования:

-   Включите следующие заголовки: <dl> VSS. h  
    Всвритер. h  
    Всбаккуп. h  
    </dl>
-   Link the following library: <dl> Вссапи. lib  
    </dl>

При разработке модуля записи:

-   Включите следующие заголовки: <dl> VSS. h  
    Всвритер. h  
    </dl>
-   Link the following library: <dl> Вссапи. lib  
    </dl>

## <a name="supported-configurations-and-restrictions"></a>Поддерживаемые конфигурации и ограничения

В следующем списке перечислены поддерживаемые конфигурации и ограничения.

-   Служба VSS предоставляется и поддерживается в версиях операционной системы Windows, начиная с Windows XP.
-   В следующей таблице приведены сведения о совместимости между версиями Windows. Обратите внимание, что если приложение VSS "скомпилировано для" указанной версии Windows, это означает, что приложение было скомпилировано с использованием файлов заголовков и библиотек, относящихся к этой версии.

    > [!Note]  
    > Поставщики оборудования будут работать только в версиях операционных систем Windows Server. Они не будут работать в версиях клиентских операционных систем Windows.

     

    > [!Note]  
    > В следующих таблицах Windows Server 2008 с пакетом обновления 2 (SP2) должен рассматриваться как Windows Server 2008. Дополнительные сведения о Windows Server 2008 с пакетом обновления 2 (SP2) см. в разделе <https://go.microsoft.com/fwlink/p/?linkid=178730> . Windows Server 2003 R2 следует рассматривать как Windows Server 2003.

     

    > [!Note]  
    > Если приложение VSS скомпилировано для Windows Server 2003 или более поздней версии, оно также будет работать в более поздних версиях Windows.

     

    

    <table>
    <colgroup>
    <col style="width: 50%" />
    <col style="width: 50%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th>Инициаторы запросов, модули записи и поставщики VSS, скомпилированные для</th>
    <th>Будет выполняться на</th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td>Windows Server 2008 R2 (64-разрядная версия), Windows 7 (64-bit), Windows Server 2008 (64-bit) и Windows Vista (64-bit)</td>
    <td>Windows Server 2008 R2 (64-разрядная версия), Windows 7 (64-bit), Windows Server 2008 (64-bit) и Windows Vista (64-bit)</td>
    </tr>
    <tr class="even">
    <td>Windows Server 2008 R2 (32-разрядная версия), Windows 7 (32-bit), Windows Server 2008 (32-bit) и Windows Vista (32-bit)</td>
    <td>Windows Server 2008 R2 (32-разрядная версия), Windows 7 (32-bit), Windows Server 2008 (32-bit) и Windows Vista (32-bit)</td>
    </tr>
    <tr class="odd">
    <td>Windows Server 2003 (64-разрядная версия)</td>
    <td>Windows Server 2008 R2 (64-разрядная версия), Windows 7 (64-bit), Windows Server 2008 (64-разрядная), Windows Vista (64-bit) и Windows Server 2003 (64-bit)</td>
    </tr>
    <tr class="even">
    <td>Windows Server 2003 (32-разрядная версия)</td>
    <td>Windows Server 2008 R2 (32-разрядная версия), Windows 7 (32-bit), Windows Server 2008 (32-разрядная), Windows Vista (32-bit) и Windows Server 2003 (32-bit) <blockquote>
    [!Note]<br />
Инициаторы запроса также будут работать на Windows Server 2003 (64-bit).
    </blockquote>
    <br/></td>
    </tr>
    <tr class="odd">
    <td>Windows XP 64-bit Edition</td>
    <td>Windows Server 2003 (64-bit) и Windows XP 64-bit Edition</td>
    </tr>
    <tr class="even">
    <td>Windows XP (32-разрядная версия)</td>
    <td>Windows XP (32-разрядная версия)</td>
    </tr>
    </tbody>
    </table>

    

     

    

    | Компиляция инициатора запроса, модуля записи или поставщика VSS для        | Использовать                                                                                                                                       |
    |------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
    | Windows Server 2008 R2 или Windows 7                        | Windows SDK для Windows 7 (доступно в [центре загрузки Windows](https://www.microsoft.com/download/details.aspx?id=8279)).                |
    | Windows Server 2008 или Windows Vista                       | Windows SDK для Windows Server 2008 (доступно в [центре разработчиков Windows SDK](https://msdn.microsoft.com/windows/bb980924.aspx)). |
    | Windows Server 2003 R2, Windows Server 2003 или Windows XP | [Пакет SDK для служба теневого копирования томов 7,2](https://www.microsoft.com/download/details.aspx?id=23490)                                                      |

    

     

-   Все 32-разрядные приложения VSS (инициаторы запросов, поставщики и модули записи) должны выполняться как собственные 32-разрядные или 64-разрядные приложения. Их запуск в эмуляторе WOW64 не поддерживается.

    **Windows Server 2003 и Windows XP:** Запуск 32-разрядов запросов VSS в эмуляторе WOW64 поддерживается, но не для резервных копий состояния системы. Запуск 32-разрядных поставщиков VSS и модулей записи в эмуляторе WOW64 не поддерживается. Поддержка запуска 32-разрядных запросов в подсистеме WOW64 была удалена в Windows Vista и последующих версиях.

-   Теневую копию, созданную в Windows Server 2003 R2 или Windows Server 2003, нельзя использовать на компьютере под Windows Server 2008 R2 или Windows Server 2008. Теневую копию, созданную в Windows Server 2008 R2 или Windows Server 2008, нельзя использовать на компьютере под Windows Server 2003. Однако теневую копию, созданную в Windows Server 2008, можно использовать на компьютере, работающем под Windows Server 2008 R2, и наоборот.
-   Для поддержки теневых копий система, в которой работает VSS, должна иметь по крайней мере одну файловую систему NTFS. В этой файловой системе будет размещена область инструмента для копирования теневой копии. Дополнительные сведения см. в разделе [поставщик системы](providers.md).
-   С учетом наличия одной файловой системы NTFS и выбора соответствующего контекста (см. раздел [конфигурации контекста теневого копирования](shadow-copy-context-configurations.md)) любая поддерживаемая локальная файловая система может быть теневой.
-   Теневые копии можно создавать только для локально подключенных файловых систем. Удаленные общие папки и другие перекрестные файловые системы не могут быть скопированы системой, в которой они будут подключены. Эти файловые системы могут быть теневыми копиями только системами, которые обслуживают файловые системы.
-   Модули записи и инициаторы должны указывать только локальные ресурсы. Локальные ресурсы — это наборы файлов, абсолютный путь к которым начинается с буквы диска, а буква диска не может быть связана с подключенной папкой в удаленной общей папке.
-   Максимальное число теневых копий программного обеспечения для каждого тома — 512. Однако по умолчанию вы можете поддерживать 64 теневых копий, используемых теневыми копиями компонента "Общие папки". Чтобы изменить ограничение для теневых копий компонента "Общие папки", используйте раздел реестра [максшадовкопиес](../backup/registry-keys-for-backup-and-restore.md) .
-   Инфраструктура компонентов резервного копирования не поддерживает резервное копирование ресурсов кластера в качестве компонентов модуля записи. Для резервного копирования ресурсов кластера приложения должны предположить, что путь является локальным для указанного узла кластера.
-   [!Note]  
    > Корпорация Майкрософт не предоставляет техническую поддержку для разработчиков и ИТ-специалистов по внедрению оперативного восстановления состояния системы в Windows (все выпуски).

     

    При резервном копировании и восстановлении состояния системы рекомендуемой стратегией является резервное копирование и восстановление системных и загрузочных томов в дополнение к файлам, перечисленным модулями записи состояния системы.

    > [!Note]  
    > Модули записи состояния системы — это модули записи, для которых в качестве атрибута [**\_ \_ типа использования VSS**](/windows/win32/api/VsWriter/ne-vswriter-vss_usage_type) задано значение VSS \_ UT \_ бутаблесистемстате или VSS \_ UT \_ системсервице.

     

 

 
