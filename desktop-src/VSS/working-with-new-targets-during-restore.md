---
description: Инициатору запроса может потребоваться восстановить файлы в расположении, указанном не по стандартному пути к набору файлов или сопоставлению альтернативного расположения.
ms.assetid: ce11485c-da0e-4c16-962e-eeedc2da3de4
title: Работа с новыми целевыми объектами во время восстановления
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9f7b9a614b043a423dd90868b0a66b505ee194ef968daed4952b0ba60fec6b0
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118590468"
---
# <a name="working-with-new-targets-during-restore"></a>Работа с новыми целевыми объектами во время восстановления

Инициатору запроса может потребоваться восстановить файлы в расположении, указанном не по стандартному пути к набору файлов или [*сопоставлению альтернативного расположения*](vssgloss-a.md). Существует множество причин, по которым это может произойти, например, ни одно место назначения восстановления недоступно, либо пользователь, запросивший запрос, намеренно запрашивает восстановление файлов в неизвестном месте. В этом случае инициатор запроса использует новый целевой механизм, чтобы указать средствам записи о восстановлении файла в другую область на диске.

Не все модули записи поддерживают инициатор запроса, изменяя место назначения для восстановления файла. Инициатору запроса необходимо проверить поддержку модуля записи, проверив маску схемы резервного копирования (возвращенную [**ивссексаминевритерметадата:: жетбаккупсчема**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema)) записи и убедившись, что она содержит модуль записи в VSS, \_ \_ \_ поддерживает \_ новый \_ целевой флаг.

Инициатор запроса указывает на такое восстановление с помощью метода [**ивссбаккупкомпонентс:: аддневтаржет**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget) . Помимо указания спецификации файла и исходного и нового назначения восстановления, инициатор запроса указывает сведения о компоненте — логический путь и имя компонента.

Сведения об используемых компонентах зависят от того, был ли компонент, управляющий файлом с новым целевым объектом, был [*явно включен*](vssgloss-e.md) или [*неявно включен*](vssgloss-i.md) в резервную копию.

Если управляющий компонент был явно включен, то используются его сведения. Если управляющий компонент был неявно включен, то он является подкомпонентом в наборе компонентов. В этом случае используются сведения о компоненте, определяющем набор компонентов.

При обработке события, записывающего [**событие, модули**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-postrestore) записи должны проверить, не были ли восстановлены файлы в новом расположении. Это можно сделать с помощью методов [**ивсскомпонент:: жетневтаржеткаунт**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtargetcount) и [**Ивсскомпонент:: жетневтаржет**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtarget) .

Используемый экземпляр интерфейса [**ивсскомпонент**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) зависит от того, был ли управляющий компонент файла явно или неявно добавлен в резервную копию.

 

 



