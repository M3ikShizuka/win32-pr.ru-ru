---
description: В следующем примере Рабочая станция блокируется с помощью функции Локкворкстатион. Система отображает диалоговое окно Блокировка рабочей станции. В диалоговом окне появляется сообщение о том, что Рабочая станция используется и заблокирована пользователем.
ms.assetid: 7cbf9a0a-dfab-42e6-9a71-bb240121f59f
title: Как заблокировать рабочую станцию
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa6c198816613a13914c44a5a51f5317e2019f92
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103910331"
---
# <a name="how-to-lock-the-workstation"></a>Как заблокировать рабочую станцию

В следующем примере Рабочая станция блокируется с помощью функции [**локкворкстатион**](/windows/desktop/api/Winuser/nf-winuser-lockworkstation) . Система отображает диалоговое окно **Блокировка рабочей станции** . В диалоговом окне появляется сообщение о том, что Рабочая станция используется и заблокирована пользователем.


```C++
#include <windows.h>
#include <stdio.h>

#pragma comment( lib, "user32.lib" )

void main()
{
    // Lock the workstation.

    if( !LockWorkStation() )
        printf ("LockWorkStation failed with %d\n", GetLastError());
}
```



Чтобы определить, заблокирована ли Рабочая станция, проверьте, является ли окно видимым.

Рабочая станция может быть разблокирована пользователем или администратором. Чтобы разблокировать систему, нажмите клавиши Ctrl + Alt + Del и войдите в систему. Чтобы получить уведомление при входе пользователя в систему, используйте функцию [**втсрегистерсессионнотификатион**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsregistersessionnotification) , чтобы зарегистрироваться для получения сообщений об [**\_ \_ изменениях в WM втссессион**](../termserv/wm-wtssession-change.md) . При получении этого сообщения проверьте, равен ли параметр *wParam* \_ блокировке сеанса ВТС \_ .

 

 
