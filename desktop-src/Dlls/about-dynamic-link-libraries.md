---
description: Динамическая компоновка позволяет модулю включать только сведения, необходимые для локализации экспортируемой функции DLL во время загрузки или во время выполнения.
ms.assetid: df2a8e4c-7ad0-46ea-9643-1528a9ea1503
title: Сведения о библиотеках Dynamic-Link
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2bdb24048e17e9164aaf39d0ab337aea33576c95
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103898142"
---
# <a name="about-dynamic-link-libraries"></a>Сведения о библиотеках Dynamic-Link

Динамическая компоновка позволяет модулю включать только сведения, необходимые для локализации экспортируемой функции DLL во время загрузки или во время выполнения. Динамическая компоновка отличается от более привычной статической компоновки, при которой компоновщик копирует код библиотечной функции в каждый модуль, который ее вызывает.

## <a name="types-of-dynamic-linking"></a>Типы динамической компоновки

Существует два метода вызова функции в библиотеке DLL:

-   При *динамической компоновке во время загрузки* модуль выполняет явные вызовы экспортированных функций DLL, как если бы они были локальными функциями. Для этого необходимо связать модуль с библиотекой импорта для библиотеки DLL, содержащей функции. Библиотека импорта предоставляет системе сведения, необходимые для загрузки библиотеки DLL, и нахождение экспортированных функций DLL при загрузке приложения.
-   При *динамической компоновке во время выполнения* модуль использует функцию [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) или [**LoadLibraryEx**](/windows/desktop/api/LibLoaderAPI/nf-libloaderapi-loadlibraryexa) для загрузки библиотеки DLL во время выполнения. После загрузки библиотеки DLL модуль вызывает функцию [**GetProcAddress**](/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress) для получения адресов экспортированных функций DLL. Модуль вызывает экспортированные функции DLL с помощью указателей функций, возвращаемых **GetProcAddress**. Это устраняет необходимость в библиотеке импорта.

## <a name="dlls-and-memory-management"></a>Библиотеки DLL и управление памятью

Каждый процесс, загружающий библиотеку DLL, сопоставляет его с виртуальным адресным пространством. После того как процесс загрузит библиотеку DLL в свой виртуальный адрес, он может вызвать экспортированные функции DLL.

Система поддерживает счетчик ссылок по процессам для каждой библиотеки DLL. Когда поток загружает библиотеку DLL, счетчик ссылок увеличивается на единицу. Когда процесс завершается или значение счетчика ссылок становится нулевым (только динамическая компоновка во время выполнения), Библиотека DLL выгружается из виртуального адресного пространства процесса.

Как и любая другая функция, экспортированная функция DLL выполняется в контексте потока, который ее вызывает. Поэтому применяются следующие условия.

-   Потоки процесса, вызвавшие библиотеку DLL, могут использовать дескрипторы, открытые функцией DLL. Аналогичным образом дескрипторы, открытые в любом потоке вызывающего процесса, можно использовать в функции DLL.
-   Библиотека DLL использует стек вызывающего потока и виртуальное адресное пространство вызывающего процесса.
-   Библиотека DLL выделяет память из виртуального адресного пространства вызывающего процесса.

Дополнительные сведения о библиотеках DLL см. в следующих разделах:

-   [Преимущества динамической компоновки](advantages-of-dynamic-linking.md)
-   [Создание библиотеки динамической компоновки](dynamic-link-library-creation.md)
-   [Функция Entry-Point библиотеки динамической компоновки](dynamic-link-library-entry-point-function.md)
-   [Динамическая компоновка во время загрузки](load-time-dynamic-linking.md)
-   [Динамическая компоновка во время выполнения](run-time-dynamic-linking.md)
-   [Порядок поиска библиотеки динамической компоновки (DLL)](dynamic-link-library-search-order.md)
-   [Данные библиотеки динамической компоновки](dynamic-link-library-data.md)
-   [Перенаправление библиотек динамической компоновки](dynamic-link-library-redirection.md)
-   [Обновления библиотеки динамической компоновки](dynamic-link-library-updates.md)
-   [Безопасность библиотеки динамической компоновки](dynamic-link-library-security.md)
-   [Библиотеки DLL и безопасная загрузка](secure-boot-and-appinit-dlls.md)

 

 
