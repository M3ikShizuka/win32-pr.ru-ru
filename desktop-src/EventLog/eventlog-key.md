---
description: Журнал событий содержит следующие стандартные журналы, а также пользовательские журналы.
ms.assetid: 87d860e3-2495-4e15-bb42-341e92935e55
title: Ключ EventLog
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3eed1e64d3084d6b952693957c65766b257cb552a861c9989ea0550111e9b224
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119383774"
---
# <a name="eventlog-key"></a>Ключ EventLog

Журнал событий содержит следующие стандартные журналы, а также пользовательские журналы.



| Журнал             | Описание                                                                                                                                                                                                                                  |
|-----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Приложение** | Содержит события, регистрируемые приложениями. Например, приложение базы данных может записать ошибку файла. Разработчик приложения решает, какие события следует записывать.                                                                             |
| **Безопасность**    | Содержит такие события, как допустимые и недопустимые попытки входа в систему, а также события, связанные с использованием ресурсов, такие как создание, открытие или удаление файлов или других объектов. Администратор может начать аудит для записи событий в журнал безопасности. |
| **Система**      | Содержит события, регистрируемые системными компонентами, например сбой драйвера или другого системного компонента для загрузки во время запуска.                                                                                                               |
| *CustomLog*     | Содержит события, регистрируемые приложениями, которые создают пользовательский журнал. Использование пользовательского журнала позволяет приложению управлять размером журнала или присоединять списки управления доступом в целях безопасности, не затрагивая другие приложения.                         |



 

Служба ведения журнала событий использует сведения, хранящиеся в разделе реестра **EventLog** . Раздел **EventLog** содержит несколько подразделов, называемых *журналами*. Каждый журнал содержит сведения, используемые службой ведения журнала событий для выявления ресурсов при записи приложения в журнал событий и считывании из него.

Структура раздела **журнала событий** выглядит следующим образом:

```
HKEY_LOCAL_MACHINE
   SYSTEM
      CurrentControlSet
         Services
            Eventlog
               Application
               Security
               System
               CustomLog
```

Обратите внимание, что контроллеры домена регистрируют события в журналах службы **каталогов** и **репликации файлов** , а DNS-серверы записывают события на **DNS-сервере**.

Каждый журнал может содержать следующие значения реестра.



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Значение реестра</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>С таможней</strong></td>
<td>Разрешает доступ к журналу событий. Это значение имеет тип REG_SZ. Используемый формат — <a href="/windows/desktop/SecAuthZ/security-descriptor-definition-language">язык определения дескрипторов безопасности</a> (SDDL). Создайте список управления доступом, предоставляющий один или несколько следующих прав:<dl> Clear (0x0004)<br />
Чтение (0x0001)<br />
Write (0x0002)<br />
</dl> Чтобы быть синтаксически допустимым SDDL, таможенное значение должно указывать владельца и владельца группы (например, О:баг: SY), но владелец владельца и группы не используются. Если для таможни задано неверное значение, в журнале системных событий создается событие, когда запускается служба журнала событий, а журнал событий возвращает дескриптор безопасности по умолчанию, идентичный исходному таможенному значению для журнала приложений. Списки SACL не поддерживаются.<br/> Дополнительные сведения см. в разделе <a href="event-logging-security.md">Безопасность ведения журнала событий</a>.<br/> <strong>Windows Server 2003:</strong> Списки SACL поддерживаются.<br/> <strong>Windows XP/2000:</strong> Это значение не поддерживается.<br/> <br/></td>
</tr>
<tr class="even">
<td><strong>дисплайнамефиле</strong></td>
<td>Это значение не используется. <strong>Windows Server 2003 и Windows XP/2000:</strong> Имя файла, в котором хранится локализованное имя журнала событий. Имя, хранящееся в этом файле, отображается как имя журнала в Просмотр событий. Если эта запись не отображается в реестре для журнала событий, Просмотр событий отображает имя подраздела реестра в качестве имени журнала. Это значение имеет тип REG_EXPAND_SZ. Значение по умолчанию —% SystemRoot% \system32\els.dll.<br/></td>
</tr>
<tr class="odd">
<td><strong>дисплайнамеид</strong></td>
<td>Это значение не используется. <strong>Windows Server 2003 и Windows XP/2000:</strong> Идентификационный номер сообщения строки имени журнала. Это число указывает сообщение, в котором отображается локализованное отображаемое имя. Сообщение хранится в файле, указанном значением <strong>дисплайнамефиле</strong> . Это значение имеет тип REG_DWORD.<br/></td>
</tr>
<tr class="even">
<td><strong>Файл</strong></td>
<td>Полный путь к файлу, в котором хранится каждый журнал событий. Это позволяет Просмотр событий и другим приложениям находить файлы журнала. Это значение имеет тип REG_SZ или REG_EXPAND_SZ. Это необязательное значение. Если значение не указано, по умолчанию используется%SystemRoot%\system32\winevt\logs\, за которым следует имя файла, основанное на имени раздела реестра журнала событий. Путь к конкретному файлу журнала событий должен быть задан с помощью служебной программы командной строки wevtutil.exe или с помощью функции <a href="/windows/desktop/api/winevt/nf-winevt-evtsetchannelconfigproperty"><strong>евтсетчаннелконфигпроперти</strong></a> с евтчаннеллоггингконфиглогфилепас, переданным в параметр <em>PropertyId</em> .<br/> Если задан конкретный файл, убедитесь, что служба журнала событий имеет полный набор разрешений на файл.<br/> Это значение должно быть допустимым именем файла, расположенного в локальном каталоге (а не на удаленном компьютере, а не на устройстве DOS, а не в виде дискеты, а не в канале). Если параметр файла неправильный, при запуске службы журнала событий в системном журнале событий возникает событие.<br/> Не используйте переменные среды в пути к файлу, которые не могут быть развернуты в контексте службы журнала событий.<br/> <strong>Windows Server 2003 и Windows XP/2000:</strong> По умолчанию это значение равно%SystemRoot%\system32\config\, за которым следует имя файла, основанное на имени раздела реестра журнала событий. Если для параметра файла задано недопустимое значение, то журнал либо не будет инициализирован должным образом, либо все запросы будут автоматически переходить в журнал по умолчанию (приложение).<br/></td>
</tr>
<tr class="odd">
<td><strong>MaxSize</strong></td>
<td>Максимальный размер файла журнала в байтах. Это значение имеет тип REG_DWORD. Значение должно быть кратно 64 КБ для журнала системы, приложения или безопасности. Значение по умолчанию — 1 МБ. <strong>Windows Server 2003 и Windows XP/2000:</strong> Значение ограничено значением 0xFFFFFFFF, а значение по умолчанию — 512 КБ.<br/></td>
</tr>
<tr class="even">
<td><strong>примаримодуле</strong></td>
<td>Это значение не используется. <strong>Windows Server 2003 и Windows XP/2000:</strong> Это значение представляет собой имя подраздела, содержащего значения по умолчанию для записей в подразделе для источника событий. Это значение имеет тип REG_SZ.<br/></td>
</tr>
<tr class="odd">
<td><strong>Сохранение</strong></td>
<td>Это значение имеет тип REG_DWORD. Значение по умолчанию — 0. Если это значение равно 0, записи событий всегда перезаписываются. Если это значение 0xFFFFFFFF или любое ненулевое значение, записи никогда не перезаписываются. При достижении максимального размера файла журнала необходимо вручную очистить журнал. в противном случае новые события отбрасываются. Необходимо также очистить журнал, прежде чем можно будет изменить его размер. <strong>Windows Server 2003 и Windows XP/2000:</strong> Это значение представляет собой интервал времени в секундах, в течение которого записи событий защищаются от перезаписи. Когда возраст события достигает или превышает это значение, он может быть перезаписан.<br/></td>
</tr>
<tr class="even">
<td><strong>Источники</strong></td>
<td>Это значение не используется. <strong>Windows Server 2003 и Windows XP/2000:</strong> Имена приложений, служб или групп приложений, которые записывают события в этот журнал. Это значение должно быть доступно только для чтения и не изменения. Служба журнала событий обслуживает список на основе каждой программы, указанной в подразделе журнала. Это значение имеет тип REG_MULTI_SZ.<br/></td>
</tr>
<tr class="odd">
<td><strong>аутобаккуплогфилес</strong></td>
<td>Это значение относится к типу REG_DWORD и используется службой журнала событий для определения того, следует ли автоматически сохранять журнал событий. Значение по умолчанию — 0, что отключает автоматическую архивацию. Служба создает резервную копию файла журнала, только если значение параметра retention равно-1 (0xFFFFFFFF). Другие значения будут игнорироваться. <strong>Windows Server 2003:</strong> Для Аутобаккуплогфилес можно задать для параметра retention значение-1 (0xFFFFFFFF) или 1 (0x00000001). Другие значения будут игнорироваться.<br/></td>
</tr>
<tr class="even">
<td><strong>рестриктгуестакцесс</strong></td>
<td>Это значение не используется. <strong>Windows XP/2000:</strong> Это значение имеет тип REG_DWORD, а значение по умолчанию — 1. Если задано значение 1, то он ограничен доступом гостевых и анонимных учетных записей к журналу событий, а если это значение равно 0, это позволяет гостевой учетной записи получать доступ к журналу событий.<br/></td>
</tr>
<tr class="odd">
<td><strong>Изоляция</strong></td>
<td>Определяет разрешения на доступ по умолчанию для журнала. Это значение имеет тип REG_SZ. Можно указать одно из следующих значений.
<ul>
<li><strong>Приложение</strong></li>
<li><strong>Система</strong></li>
<li><strong>Пользовательский</strong></li>
</ul>
Изоляция по умолчанию — <strong>Application</strong>. Разрешения по умолчанию для <strong>приложения</strong> (показаны с помощью SDDL): <br/>
<pre class="syntax" data-space="preserve"><code>            L&quot;O:BAG:SYD:&quot;
            L&quot;(A;;0xf0007;;;SY)&quot;                // local system               (read, write, clear)
            L&quot;(A;;0x7;;;BA)&quot;                    // built-in admins            (read, write, clear)
            L&quot;(A;;0x7;;;SO)&quot;                    // server operators           (read, write, clear)
            L&quot;(A;;0x3;;;IU)&quot;                    // INTERACTIVE LOGON          (read, write)
            L&quot;(A;;0x3;;;SU)&quot;                    // SERVICES LOGON             (read, write)
            L&quot;(A;;0x3;;;S-1-5-3)&quot;               // BATCH LOGON                (read, write)
            L&quot;(A;;0x3;;;S-1-5-33)&quot;              // write restricted service   (read, write)
            L&quot;(A;;0x1;;;S-1-5-32-573)&quot;;         // event log readers          (read) </code></pre>
Разрешения по умолчанию для <strong>System</strong> (показаны с помощью SDDL): <br/>
<pre class="syntax" data-space="preserve"><code>            L&quot;O:BAG:SYD:&quot;
            L&quot;(A;;0xf0007;;;SY)&quot;                // local system             (read, write, clear)
            L&quot;(A;;0x7;;;BA)&quot;                    // built-in admins          (read, write, clear)
            L&quot;(A;;0x3;;;BO)&quot;                    // backup operators         (read, write)
            L&quot;(A;;0x5;;;SO)&quot;                    // server operators         (read, clear) 
            L&quot;(A;;0x1;;;IU)&quot;                    // INTERACTIVE LOGON        (read)
            L&quot;(A;;0x3;;;SU)&quot;                    // SERVICES LOGON           (read, write)
            L&quot;(A;;0x1;;;S-1-5-3)&quot;               // BATCH LOGON              (read)
            L&quot;(A;;0x2;;;S-1-5-33)&quot;              // write restricted service (write)
            L&quot;(A;;0x1;;;S-1-5-32-573)&quot;;         // event log readers        (read)</code></pre>
Разрешения по умолчанию для <strong>пользовательской</strong> изоляции совпадают с разрешениями приложения.<br/> <strong>Windows Server 2003 и Windows XP/2000:</strong> Это значение недоступно.<br/></td>
</tr>
</tbody>
</table>



 

Каждый журнал также содержит источники событий. Дополнительные сведения см. в разделе [источники событий](event-sources.md).

