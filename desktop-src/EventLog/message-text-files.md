---
description: Сообщения определяются в текстовом файле сообщения. Компилятор сообщений присваивает каждому сообщению номера и создает файл включения C/C++, который приложение может использовать для доступа к сообщению с помощью символьной константы.
ms.assetid: 99fbb3d6-6fde-4162-b0b9-99a1cdf0b8f8
title: Текстовые файлы сообщений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3e87547f44b0b556df4e3a2ffb67736b950321c6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104264050"
---
# <a name="message-text-files"></a>Текстовые файлы сообщений

Сообщения определяются в текстовом файле сообщения. Компилятор сообщений присваивает каждому сообщению номера и создает файл включения C/C++, который приложение может использовать для доступа к сообщению с помощью символьной константы.

Общий синтаксис инструкций в текстовом файле сообщения выглядит следующим образом:

*ключевое слово* = *значение*

Пробелы вокруг знака равенства игнорируются, и значение отделяется пробелом (включая разрывы строк) от следующей пары "ключевое слово-значение". Регистр игнорируется при сравнении с именами ключевых слов. Часть *значения* может быть целочисленной константой с использованием синтаксиса c/c++, имени символа, следующего за правилами для идентификаторов c/c++, или имени файла длиной не более 8 символов, без точек.

Пример файла сообщения см. в разделе [образец текстового файла сообщения](sample-message-text-file.md).

## <a name="comments"></a>Комментарии

Строки комментариев допускаются в текстовом файле сообщения. Точка с запятой (;) начинает комментарий, заканчивающийся в конце строки. Используйте точку с запятой с однострочным указателем комментария C/C++ (//), чтобы файл заголовка, созданный компилятором сообщений, был скомпилирован в приложении.

``` syntax
;// This is a single-line comment.
```

Для блочного комментария начинайте каждую строку с точкой с запятой, затем разместите индикатор открытого блока комментария C/C++ (/ \* ) после точки с запятой в первой строке и индикатор закрытия блока комментария ( \* /) после точки с запятой в последней строке.

``` syntax
;/* This is a block comment.
;   It spans multiple lines.
;*/
```

## <a name="header-section"></a>Раздел заголовка

Текстовый файл сообщения содержит заголовок, который определяет имена и идентификаторы языков для использования в определениях сообщений в тексте файла. Заголовок содержит ноль или более следующих инструкций.



| Синтаксис инструкции                           | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|--------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Мессажеидтипедеф =*тип*                    | Тип для использования в определении сообщения следующим образом: \# define *Name* (*Type*) 0x *nnnnnnnn*)<br/> Тип должен быть достаточно большим, чтобы разместить весь код сообщения, например **DWORD**. Тип также может быть типом, определенным в исходном коде приложения. Значение по умолчанию для *типа* пусто, поэтому приведение типов не используется. <br/> Эта инструкция может быть указана в заголовке и так часто, как это необходимо в разделе определения сообщения.<br/>                                                                                                                  |
| Северитинамес = (*имя* =  \[ :*имя* \] ) | Набор имен, допустимых для уровня серьезности в определении сообщения. Связанный с каждым именем серьезности — это число, которое при сдвиге влево на 30 бит дает битовому шаблону логическое значение или с идентификатором устройства и идентификатора сообщения для формирования кода сообщения. Любое значение серьезности, которое не умещается в 2 бита, является ошибкой. Коды серьезности могут также иметь символьные имена. Значение по умолчанию определяется следующим образом: Северитинамес = (Success = 0x0 информационный = 0x1 Warning = 0x2 Error = 0x3)<br/>                                                                      |
| ФаЦилитинамес = (*имя* =  \[ :*имя* \] ) | Набор имен, допустимых для значений устройств в определении сообщения. С каждым именем устройства связано число, которое при сдвиге влево на 16 бит придает битовому шаблону логическое значение или со значениями серьезности и идентификатора сообщения для формирования кода сообщения. Любое значение, которое не умещается в 12 бит, является ошибкой. Это позволяет получить коды устройств 4096; первые 256 кодов зарезервированы для использования системой. Кодам устройств могут быть также предоставлены символьные имена. Значение по умолчанию определяется следующим образом: ФаЦилитинамес = (System = 0x0FF Application = 0xFFF)<br/> |
| LanguageNames = (*Name* = : имя *файла*) | Набор имен, допустимых для значений языка в определении сообщения. Это число используется в качестве идентификатора языка в таблице ресурсов. Указанный файл содержит сообщения для этого языка. Обычно это файл. bin, созданный компилятором сообщений.<br/> Пример значения: LanguageNames = (Английский = 0x409: MSG00409)<br/> Список идентификаторов языков см. в разделе <https://go.microsoft.com/fwlink/p/?linkid=190280> .<br/>                                                                                                                    |
| Аутпутбасе =*число*                        | Основание системы счисления для констант сообщений, записываемых компилятором сообщений в заголовочный файл. При наличии этого значения переопределяется параметр-d. Это число может быть либо 10 (десятичным), либо 16 (шестнадцатеричным).                                                                                                                                                                                                                                                                                                                                                                                   |



 

## <a name="message-definitions"></a>Определения сообщений

Текстовый файл сообщения содержит ноль или более определений сообщений после раздела заголовка. В следующей таблице описаны инструкции определения сообщения. Оператор MessageId помечает начало определения сообщения. Операторы серьезности и ссуды являются необязательными.



| Синтаксис инструкции                  | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| MessageId = \[ *номер номера* \| + \] | Идентификатор сообщения. Эта инструкция является обязательной, хотя значение является необязательным. Если значение не указано, используется предыдущее значение для средства и одно значение. Если значение указано со знаком «плюс», то используется предыдущее значение для средства и число после знака «плюс». Любое заданное значение должно соответствовать 16 битам. Дополнительные сведения о формировании значения сообщения по уровню серьезности, оборудованию и ИДЕНТИФИКАТОРу сообщения см. в схеме в файле Winerror. h. Этот файл заголовка определяет коды ошибок для системы.<br/> |
| Серьезность =*имя*                   | Одно из значений, заданных параметром Северитинамес в заголовке. Эта инструкция является необязательной. Если значение не указано, используется значение, указанное последним для определения сообщения. Значение по умолчанию для первого определения сообщения — `Severity=Success`<br/>                                                                                                                                                                                                                                                                                               |
| Средство =*имя*                   | Одно из значений, заданных параметром ФаЦилитинамес в заголовке. Эта инструкция является необязательной. Если значение не указано, используется значение, указанное последним для определения сообщения. Значение по умолчанию для первого определения сообщения — `Facility=Application`<br/>                                                                                                                                                                                                                                                                                           |
| SymbolicName =*имя*               | Связывает символическую константу C/C++ с кодом сообщения. Он используется в определении сообщения следующим образом: \# define *Name* (*Type*) 0x *nnnnnnnn*)<br/>                                                                                                                                                                                                                                                                                                                                                                                                     |
| Аутпутбасе = {*Number*}             | Основание системы счисления для сообщения константы. компилятор сообщений записывает данные в заголовочный файл. При наличии этого значения переопределяется параметр-d. Это число может быть либо 10 (десятичным), либо 16 (шестнадцатеричным).                                                                                                                                                                                                                                                                                                                                                                 |
| Language =*имя*                   | Одно из значений, заданных параметром LanguageNames в заголовке. Эта инструкция является необязательной. Если значение не указано, используется значение, указанное последним для определения сообщения. Значение по умолчанию для первого определения сообщения выглядит следующим образом: `Language=English`<br/>                                                                                                                                                                                                                                                                                   |
| *текст сообщения*                    | Текст сообщения. Он включен в двоичный файл сообщения. Он также включается в заголовочный файл в блоке комментариев, непосредственно предшествующий определению сообщения.                                                                                                                                                                                                                                                                                                                                                                                        |
| .                                 | Текст сообщения завершается новой строкой, содержащей одну точку в начале строки.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |



 

Если определение сообщения включает текст сообщения для нескольких языков, для каждого языка требуется собственная инструкция языка, текст сообщения и завершение новой строки с точкой. Пример:

``` syntax
MessageId=0x1
Severity=Error
Facility=Runtime
SymbolicName=MSG_BAD_COMMAND
Language=English
You have chosen an incorrect command.
.

Language=Japanese
<Japanese message string goes here>
.
```

Можно указать следующие escape-последовательности для форматирования текста сообщений, которые будут использоваться средством просмотра событий или приложением. Знак процента (%) начинает все escape-последовательности. Любой другой символ, следующий за знаком процента, отображается без знака процента.

<dl> <dt>

<span id="_n__format_specifier__"></span><span id="_N__FORMAT_SPECIFIER__"></span>%*n* \[ ! *\_ описатель формата*!\]
</dt> <dd>

Описывает вставку. Каждая вставка является записью в массиве arguments в функции [**FormatMessage**](/windows/desktop/api/winbase/nf-winbase-formatmessage) . Значение *n* может быть числом от 1 до 99. Описатель формата является необязательным. Если значение не указано, по умолчанию используется! s!. Дополнительные сведения о описателе формата см. в разделе [**вспринтф**](/windows/win32/api/winuser/nf-winuser-wsprintfa).

Описатель формата может использоваться \* как для точности, так и для ширины. При указании используются вставки с номерами *n*+ 1 и *n*+ 2.

</dd> <dt>

<span id="_0"></span>%0
</dt> <dd>

Завершает текст сообщения без символа новой строки. Это можно использовать для создания длинной строки или завершения сообщения с приглашением без завершающего символа новой строки.

</dd> <dt>

<span id="_."></span>%.
</dt> <dd>

Создает одиночную точку. Это можно использовать для вывода точки в начале строки, которая в противном случае завершает текст сообщения.

</dd> <dt>

<span id="__"></span>%!
</dt> <dd>

Создает один восклицательный знак. Это можно использовать для указания восклицательного знака сразу после вставки.

</dd> <dt>

<span id="__"></span>%%
</dt> <dd>

Создает один знак процента.

</dd> <dt>

<span id="_n"></span><span id="_N"></span>% n
</dt> <dd>

Создает жесткий разрыв строки, если он находится в конце строки. Это можно использовать с параметром [**FormatMessage**](/windows/desktop/api/winbase/nf-winbase-formatmessage) , чтобы убедиться, что сообщение соответствует определенной ширине.

</dd> <dt>

<span id="_b"></span><span id="_B"></span>% b
</dt> <dd>

Создает символ пробела. Это можно использовать для обеспечения соответствующего количества конечных пробелов в строке.

</dd> <dt>

<span id="_r"></span><span id="_R"></span>% r
</dt> <dd>

Создает жесткий возврат каретки без завершающего символа новой строки.

</dd> </dl>

 

