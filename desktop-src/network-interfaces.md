---
description: в этом разделе описываются основные понятия сетевых интерфейсов на Windows, включая способы их определения в коде и их свойства.
ms.assetid: CB01B5ED-C9DB-410B-8C98-E30D9A680847
title: Сетевые интерфейсы
ms.topic: article
ms.date: 06/29/2018
ms.openlocfilehash: d74c875b579a34464190ca039e0176b8c01bef671b0ea6c24581023a49988645
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119825463"
---
# <a name="network-interfaces"></a>Сетевые интерфейсы

в этом разделе описываются основные понятия сетевых интерфейсов на Windows, включая способы их определения в коде и их свойства. 

> [!IMPORTANT]
> этот раздел предназначен для аудитории разработчика, как для Windows настольных сетевых приложений, так и для сетевых драйверов в режиме ядра. Тем не менее, некоторые из представленных здесь сведений также могут быть полезны для системных администраторов, управляющих сетевыми интерфейсами с помощью командлетов PowerShell.

## <a name="overview"></a>Обзор

*Сетевой интерфейс* — это точка, в которой соединяются две части сетевого оборудования или уровней протоколов. Как правило, он представлен физической сетевой картой (NIC) для подключения между компьютером и частной или общедоступной сетью. Однако он также может принимать форму программного компонента, такого как интерфейс замыкания на себя ( `127.0.0.1` для IPv4 или `::1` IPv6).

Сетевые интерфейсы определяются с помощью IETF в [RFC 2863](https://tools.ietf.org/html/rfc2863) и не предназначены для определения с помощью Windows. Подробные вопросы о значении идентификаторов сетевых интерфейсов, таких как **ifIndex**, см. в их определениях IETF. в оставшейся части этого раздела обсуждаются сведения о реализации, связанные с Windows.

## <a name="network-interface-identifiers-and-properties"></a>Идентификаторы и свойства сетевых интерфейсов

в Windows сетевой интерфейс можно идентифицировать различными способами. Некоторые из этих идентификаторов используются для различения сетевых интерфейсов друг от друга, но не все идентификаторы так же хорошо подходят для этой задачи из-за их различий в свойствах. Как правило, сетевые интерфейсы определяются сетевым адресом для внешних компонентов. Например, это может быть идентификатор узла и номер порта или просто уникальный идентификатор узла. 

В коде сетевой интерфейс может быть идентифицирован различными способами. В следующей таблице описаны способы идентификации сетевого интерфейса вместе со связанными свойствами. Мы рекомендуем использовать идентификатор GUID интерфейса (**ифгуид**) для программирования, если для определенного API не требуется другой идентификатор сетевого интерфейса.

> [!NOTE]
> В следующей таблице ячейки, **выделенные жирным шрифтом** , представляют свойство, которое желательно для программистов сети.

| Идентификатор | Размер | Является уникальным в системе | Является уникальным в мире | Является прогнозируемым | Будет перезапущено, если сетевая карта удалена | Сохраняется во всех перезагрузках | Конечные пользователи могут изменять в любое время | Драйверы могут измениться в любое время | Общее знакомство с конечными пользователями | Всегда имеется |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **ifIndex** | **4 байта** | **Да** | Нет | Нет | Да | Нет<sup>1</sup> | **Нет** | **Нет** | **Некоторые**<sup>2</sup> | **Да** |
| **нетлуид** | **8 байт** | **Да** | Нет | Нет | Да | **Да** | **Нет** | **Нет** | Нет | **Да** |
| **ифгуид** | **16 байт** | **Да** | **Обычно**<sup>3</sup> | Нет | **Нет** | **Да** | **Нет** | **Нет** | Нет | **Да** |
| **ифалиас** | 514 байт | **Да для сетевых** карт <sup>4</sup> | Нет | Иногда<sup>5</sup> | Да | **Да** | Да | **Нет** | **Да** | **Обычно**<sup>4</sup> |
| **ифдескр** | 514 байт | Обычно<sup>6</sup> | Нет | Нет | Да | **Да** | **Нет** | Да | **Да** | **Расположена** |
| **Иффисаддресс (MAC-адрес)**| от 0 до 32 байт | Обычно для сетевых адаптеров | **Обычно для сетевых адаптеров** | **Да** | **Привязано к оборудованию** | **Да** | **Нет** | **Нет** | **Да** | **Обычно** <sup>7</sup> |
| **ИД экземпляра PnP** | До 400 байт | **Да** | Нет | Нет | Да | **Да** | **Нет** | **Нет** | Нет | **Обычно для сетевых адаптеров**<sup>8</sup> |
| **Расположение PnP (номер гнезда PCI)** | До 400 байт | **Да** | Нет | **Да** | Да | **Да** | **Нет** | **Нет** | Порой | Иногда<sup>8, 9</sup> |

Примечания для предыдущей таблицы:

1. **Ифиндексес** не гарантирует стабильной перезагрузки, даже если они часто получают то же значение, что и Предыдущая загрузка. Поэтому не рекомендуется, чтобы драйверы использовали **ifIndex** , за исключением тех случаев, когда они необходимы API.
2. Некоторые `netsh` команды принимают `ifIndex` , или `index` , в качестве входных данных. Поэтому некоторые пользователи с правами администратора знакомы со свойством **ifIndex** , если они часто используют эту `netsh` команду.
3. При клонировании или создании образа виртуальной машины некоторые идентификаторы GUID могут быть одинаковыми. Кроме того, некоторые специальные сетевые интерфейсы, такие как встроенный интерфейс Teredo, могут иметь одинаковый идентификатор GUID на всех компьютерах.
4. NetCfg обеспечивает, что **ифалиас** является непустой строкой и является уникальной для всех сетевых интерфейсов. Однако поставщик интерфейса NDIS не использует. Серерфоре, можно найти специальные сетевые интерфейсы с повторяющимися или пустыми именами. Чаще всего эта проблема встречается в LBFO командах.
5. Только в том случае, если встроенное по поддерживает одинаковое именование устройств. ТипЦикалли, серверы имеют эту функцию.
6. NetCfg назначает уникальные **ифдескрс** всем сетевым интерфейсам. Однако драйверы могут вызывать API для изменения **ифдескр** на что-либо, в том числе что не является уникальным. Это выполняется некоторыми сторонними пакетами программного обеспечения.
7. Не все типы носителей имеют "MAC-адрес". Например, некоторые туннели не имеют этой концепции и просто объявляют байтовый массив нулевой длины в качестве своего сетевого адреса.
8. Имеется только в сетевых интерфейсах, поддерживающих устройства PnP. Например, интерфейсы замыкания на себя, интерфейсы фильтрации неплотности, интерфейсы, предоставляемые поставщиком интерфейса NDIS, и некоторые специальные встроенные сетевые карты не поддерживают устройства PnP.
9. Идентификатор расположения PnP поддерживается только некоторыми шинами PnP. Встроенные шины PCI и USB выполняют, а устройства с корневым перечислением — нет.

## <a name="visibility-to-developers"></a>Видимость для разработчиков

В приведенной выше таблице все свойства, за исключением свойств самонастраивающийся (PnP), видимы для приложений пользовательского режима и драйверов режима ядра через общий заголовок (Нетиоапи. h). Свойства PnP отображаются в заголовке Девпкэй. h и используются как в пользовательском режиме, так и в драйверах режима ядра. Например, см. документацию по [девпкэй](/windows-hardware/drivers/install/devpkey-device-instanceid) .

API [вспомогательного приложения IP](/windows/desktop/IpHlp/ip-helper-start-page) также доступен для настольных приложений в пользовательском режиме и драйверов режима ядра.

Поверхность API UWP предоставляет только свойство [ифгуид](/uwp/api/windows.networking.connectivity.networkadapter.networkadapterid) напрямую. Однако разработчики приложений UWP могут импортировать функцию [**GetIfTable2**](/windows/desktop/api/netioapi/nf-netioapi-getiftable2) с помощью P/Invoke, если они необходимы для доступа к другим свойствам сетевого интерфейса.

## <a name="related-topics"></a>Связанные темы

Определения информационной базы MIB для сетевых интерфейсов см. в [RFC 2863](https://tools.ietf.org/html/rfc2863).

Сетевые интерфейсы NDIS в сетевых драйверах см. в разделе [NDIS Network Interfaces](/windows-hardware/drivers/network/ndis-network-interfaces2).

Справочник по API Нетиоапи. h см. в разделе [нетиоапи. h Header](/windows/desktop/api/netioapi/).
