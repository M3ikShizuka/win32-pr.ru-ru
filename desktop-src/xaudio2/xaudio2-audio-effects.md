---
description: Звуковые эффекты — это объект, который принимает входящие звуковые данные и выполняет некоторую операцию с данными перед их передачей. С помощью этого действия можно выполнять различные задачи, в том числе добавлять переглаголы в аудиопоток и отслеживать пиковые уровни громкости.
ms.assetid: 8c3fa4ca-dcff-bd23-7220-7d0aeb6c6068
title: Звуковые эффекты в XAudio2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 886edb81718f772f7dec31f799b1612ca701c2327468ad554fe80a17c1f69ec1
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119082858"
---
# <a name="xaudio2-audio-effects"></a>Звуковые эффекты в XAudio2

Звуковые эффекты — это объект, который принимает входящие звуковые данные и выполняет некоторую операцию с данными перед их передачей. С помощью этого действия можно выполнять различные задачи, в том числе добавлять переглаголы в аудиопоток и отслеживать пиковые уровни громкости.

## <a name="effect-chains"></a>Цепочки эффектов

Любой голос XAudio2 может размещать цепочку звуковых эффектов. Для указания цепочек эффектов можно использовать массив структур [**\_ \_ дескрипторов эффектов XAUDIO2**](/windows/desktop/api/xaudio2/ns-xaudio2-xaudio2_effect_descriptor) . Каждый дескриптор содержит указатель на объект Effect, предоставленный клиентом. Эти объекты должны реализовывать интерфейсы объекта обработки аудио (API). Дополнительные сведения о модели API см. в [обзоре ксапо](xapo-overview.md) .

Цепочки эффектов могут динамически изменяться клиентом (во время работы подсистемы XAudio2), эффекты можно включать или отключать по отдельности, а параметры эффектов можно изменять, не прерывая звук. При изменении любого аспекта графа эффектов XAudio2 снова оптимизирует граф, чтобы избежать ненужной обработки. См. раздел [**IXAudio2Voice:: сетеффектчаин**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-seteffectchain), [**IXAudio2Voice:: енаблиффект**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-enableeffect)и [**IXAudio2Voice:: сетеффектпараметерс**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-seteffectparameters).

После присоединения к XAudio2 голоса XAudio2 получает контроль над этим действием, и клиент не должен выполнять последующие вызовы. Самый простой способ убедиться в том, чтобы освободить все указатели на результат.

Эффекты в заданной цепочке эффектов XAudio2 Voice должны потреблять и создавать звук с плавающей запятой в частоте выборки обработки для этого голоса. Единственным аспектом формата звука, который они могут изменить, является число каналов (например, переглагол может преобразовать данные Mono в 5,1). Клиент может использовать [**\_ \_ дескриптор XAUDIO2 Effect**](/windows/desktop/api/xaudio2/ns-xaudio2-xaudio2_effect_descriptor).**Аутпутчаннелс** , чтобы указать количество каналов, которые должны выдаваться каждым из них. Цепочка эффектов завершается ошибкой, если какой-либо из эффектов не может выполнить эти требования, или если эффект выдает несколько каналов, которые не могут быть обработаны следующим эффектом. Все вызовы [**IXAudio2Voice:: енаблиффект**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-enableeffect) или [**IXAudio2Voice::D исаблиффект**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-disableeffect) , которые приводят к прекращению выполнения этих требований цепочкой эффектов, завершатся ошибкой.

Интерфейсы API, используемые в XAudio2, должны быть *разрушительными*. Это означает, что они всегда перезапишут все данные, найденные в выходных буферах. В противном случае полученный звук может быть неверным, так как XAudio2 не гарантирует, что эти буферы были инициализированы ранее с помощью тишины.

## <a name="xaudio2-built-in-effects"></a>Встроенные эффекты XAudio2

В следующей таблице приведен набор встроенных звуковых эффектов, предоставляемых XAudio2, и их методов создания. 

| Действие       | Метод создания                                              |
|--------------|--------------------------------------------------------------|
| Переглагол       | [**XAudio2CreateReverb**](/windows/desktop/api/xaudio2fx/nf-xaudio2fx-xaudio2createreverb)           |
| Счетчик томов | [**XAudio2CreateVolumeMeter**](/windows/desktop/api/xaudio2fx/nf-xaudio2fx-xaudio2createvolumemeter) |



 

Пример создания и использования экземпляра звукового объекта см. [в разделе инструкции. Создание цепочки эффектов](how-to--create-an-effect-chain.md).

## <a name="custom-effects-in-xaudio2"></a>Пользовательские эффекты в XAudio2

API [ксапо](xapo-overview.md) предоставляет платформу для создания пользовательских звуковых эффектов, которые можно использовать в XAudio2. Пример создания пользовательского действия с КСАПО см. [в разделе как создать ксапо](how-to--create-an-xapo.md).

## <a name="xapo-effect-library-xapofx"></a>Библиотека эффектов КСАПО (КСАПОФКС)

[Ксапофкс](xapofx-overview.md) предоставляет дополнительную библиотеку ксапос и распространенный механизм для их создания. Пример использования КСАПОФКС с XAudio2 см. в разделе [как использовать ксапофкс в XAudio2](how-to--use-xapofx-in-xaudio2.md).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Звуковые эффекты](audio-effects.md)
</dt> <dt>

[Руководство по программированию для XAudio2](programming-guide.md)
</dt> </dl>

 

 
