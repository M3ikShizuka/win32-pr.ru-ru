---
description: Клиент XAudio2 имеет полный контроль над сопоставлением каналов голоса с каналами каждого из его целевых голосов.
ms.assetid: 219d5b70-3f07-f973-f9ec-1cb3cf0be37e
title: Сопоставление канала по умолчанию XAudio2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 06d77371223ccef02d6f0831a7aea182326f8477
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104498147"
---
# <a name="xaudio2-default-channel-mapping"></a>Сопоставление канала по умолчанию XAudio2

Клиент XAudio2 имеет полный контроль над сопоставлением каналов голоса с каналами каждого назначения Воицесит управляет сопоставлением с помощью метода [**IXAudio2Voice:: сетаутпутматрикс**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setoutputmatrix) . Однако в некоторых случаях XAudio2 упрощает эту задачу, настроив матрицу отправки по умолчанию автоматически. Это достигается с помощью маски канала (при наличии), связанной с звуковыми каналами голоса. Маска канала — это сочетание \_ побитовых масок «динамика XXX», определенное в X3DAudio. h и других. XAudio2 требует, чтобы маски каналов были равны 0 или имели одинаковое число бит, равное количеству каналов.

В следующей таблице приведены требования к маске канала и значения по умолчанию для форматов, поддерживаемых XAudio2. 

| Формат | Требование маски канала             | Маска по умолчанию                        | Соответствующий член структуры                            |
|--------|--------------------------------------|-------------------------------------|-----------------------------------------------------------|
| PCM    | Файл может содержать маску канала    | Маска канала равна 0 или отсутствует        | ВАВЕФОРМАТЕКСТЕНСИБЛЕ. Двчаннелмаск или None (ВАВЕФОРМАТЕКС) |
| СЖАТИЯ  | Файл не содержит маску канала | Маска канала по умолчанию используется всегда | Нет (АДПКМВАВЕФОРМАТ)                                    |



 

Для субмикс и голосов, а также для исходных голосов без маски канала или маски канала, равным 0, XAudio2 предполагает положение динамиков по умолчанию в соответствии со следующей таблицей. 

| Каналы  | Неявные позиции канала                                                                                            |
|-----------|-----------------------------------------------------------------------------------------------------------------------|
| 1         | Всегда сопоставляется с Фронтлефт и Фронтригхт в полном масштабе на обоих докладчиках (особый случай для звуков Mono).                 |
| 2         | Фронтлефт, Фронтригхт (базовая конфигурация стерео)                                                                    |
| 3         | Фронтлефт, Фронтригхт, Ловфрекуенци (Конфигурация 2,1)                                                               |
| 4         | Фронтлефт, Фронтригхт, Left, Right (куадрафоник)                                                             |
| 5         | Фронтлефт, Фронтригхт, Фронтцентер, Сиделефт, Сидеригхт (конфигурация 5,0)                                           |
| 6         | Фронтлефт, Фронтригхт, Фронтцентер, Ловфрекуенци, Сиделефт, Сидеригхт (конфигурация 5,1) (см. следующие замечания) |
| 7         | Фронтлефт, Фронтригхт, Фронтцентер, Ловфрекуенци, Сиделефт, Сидеригхт, (конфигурация 6,1)                 |
| 8         | Фронтлефт, Фронтригхт, Фронтцентер, Ловфрекуенци, Left, Right, Сиделефт, Сидеригхт (конфигурация 7,1)        |
| 9 или более | Неявные позиции (сопоставление "один к одному")                                                                            |



 

Если в данной паре голосов в звуковой диаграмме нет положений о динамиках, связанных с исходным или целевым голосом (в одном из них больше восьми каналов), то ни один из них не будет воспроизводиться, пока исходный голос не получит матрицу отправки исходного голоса явным образом с помощью метода [**IXAudio2Voice:: сетаутпутматрикс**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setoutputmatrix) . Вызов метода [**IXAudio2SourceVoice:: Start**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2sourcevoice-start) для обоих голосов завершится ошибкой, пока вы не сделаете это.

Если исходный и целевой голоса имеют разное количество положений докладчика и [**IXAudio2Voice:: сетаутпутматрикс**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setoutputmatrix) не были вызваны на исходном голоса, XAudio2 отправляет каждый исходный канал ближайшему целевому докладчику (или колонкам), пропорционально близкому к предполагаемому докладчику. Существует два особых случая, когда поведение по умолчанию отличается.

1.  Если исходный аудио-файл находится в положении моно и находится на \_ передней панели докладчика \_ или не имеет определенной позиции, он всегда отправляется на \_ передний план \_ слева и на \_ передний план спереди \_ справа, если они существуют на выходном аудио. Если они не существуют, возвращается к нормальному регистру.
2.  Если источником и назначением являются 6 каналов и они расположены по одному из стандартных настроек динамика 5,1 (слева + справа + Center + вспомогательное + резервное + или слева + справа + Center + подсторона + Side), каналы сопоставляются друг с другом. Иными словами, Сиделефт/Right и Left/Right считаются эквивалентными. Это обусловлено тем, что в ходе этих настроек произошла историческая путаница. Поэтому предполагаемое намерение всегда сопоставляется с одним.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Голоса](voices.md)
</dt> <dt>

[Руководство по программированию для XAudio2](programming-guide.md)
</dt> <dt>

[**жетчаннелмаск**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2masteringvoice-getchannelmask)
</dt> </dl>

 

 
