---
description: Набор всех голосов, содержащих их результаты и их взаимосвязи, называется графиком обработки звука.
ms.assetid: 4fa45dbf-3811-c91c-7561-3b896e9e1f03
title: XAudio2 Audio Graph
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7b461b89095152f3f8073a09a230e18f5e30fd7f42ffb60b4c45a32702094f70
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119707024"
---
# <a name="xaudio2-audio-graph"></a>XAudio2 Audio Graph

Набор всех голосов, содержащих их результаты и их взаимосвязи, называется графиком обработки звука. Граф принимает набор звуковых потоков от клиента в качестве входных данных, обрабатывает их и передает окончательный результат на звуковое устройство. вся обработка звука выполняется в отдельном потоке с периодичностью, определенной тактом графа (в настоящее время 10 миллисекунд на Microsoft Windows и 5 1/3 миллисекунд на Xbox 360). Каждый такт миллисекунда поток выходит из спящего режима и разбросает тактовые миллисекунды звуковых данных через весь граф. Пример создания простой звуковой диаграммы см. в разделе как [создать базовый Graph обработки звука](how-to--build-a-basic-audio-processing-graph.md).

Простая звуковая диаграмма:

![простая звуковая диаграмма](images/xaudio2-audio-graph.png)

Клиент может управлять состоянием диаграммы динамически во время его выполнения. Управляющие действия могут включать добавление и удаление входных и выходных данных, изменение внутренних эффектов и соединений, задание параметров для эффектов, включение и отключение частей графа и т. д. Пример динамического изменения звуковой диаграммы см. [в разделе как динамически добавлять или удалять голоса из аудио Graph](how-to--dynamically-add-or-remove-voices-from-an-audio-graph.md).

## <a name="processing-the-graph"></a>Обработка Graph

Любой вызов метода, который влияет на любой объект в графе, считается влиянием изменения состояния графа. Graph изменения состояния включают следующее.

-   Создание и уничтожение голосов
-   Запуск или остановка голосов
-   Изменение назначений голоса
-   Изменение цепочек эффектов
-   Включение или отключение эффектов
-   Задание параметров для эффектов или встроенных Сркс, фильтров, томов и миксерс

Любой набор изменений состояния графа можно объединить и выполнить как атомарную транзакцию. Эти атомарные операции называются наборами операций. Они обсуждаются в обзоре [наборов операций XAudio2](xaudio2-operation-sets.md) .

## <a name="internal-data-representation"></a>Внутреннее представление данных

Звуковые данные в графе XAudio2 всегда сохраняются и обрабатываются в 32-битной форме PCM с плавающей запятой. Однако количество каналов и частота выборки могут различаться в пределах диаграммы. Формат, в котором заданный голосовый процесс определяется типом голоса и параметрами, используемыми для создания голоса.



| Тип голоса                                                                                                      | Параметры                                                                                     |
|-----------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|
| [**IXAudio2SourceVoice**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2sourcevoice)                                                              | Число каналов и частота дискретизации голосов, на которые исходный голос отправляет звук.         |
| [**IXAudio2SubmixVoice**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2submixvoice) и [ **IXAudio2MasteringVoice**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2masteringvoice) | Аргументы *инпутчаннелс* и *инпутсамплерате* , используемые для создания субмикс/главной речи. |



 

## <a name="format-conversion"></a>Преобразование формата

XAudio2 обрабатывает любые преобразования частоты выборки или канала, необходимые для передачи звука с одного голоса на другой, со следующими ограничениями.

-   Все целевые голоса для определенного голоса должны выполняться с одинаковой частотой выборки
-   Эффекты в цепочке эффектов могут изменить число каналов звука, но не частоту выборки
-   Число каналов вывода цепочки эффектов должно совпадать с количеством голосов, которые он отправляет.
-   Невозможно выполнить динамическое изменение графа, что приведет к нарушению правил выше

На стороне входа исходные голоса могут считывать данные в любом допустимом формате PCM или в любом из сжатых форматов, поддерживаемых XAudio2. Если входные данные сжимаются, они декодированы в PCM с плавающей запятой до завершения дальнейшей обработки.

На стороне вывода выходные голоса могут формировать только данные PCM. Эти данные всегда будут соответствовать тем же ограничениям, которые описаны выше для входных данных PCM.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Графики воспроизведения](audio-graphs.md)
</dt> <dt>

[Руководство по программированию для XAudio2](programming-guide.md)
</dt> <dt>

[Руководство: создание базовой схемы обработки звука](how-to--build-a-basic-audio-processing-graph.md)
</dt> <dt>

[Руководство: динамическое добавление речи или удаление ее из звуковой схемы](how-to--dynamically-add-or-remove-voices-from-an-audio-graph.md)
</dt> <dt>

[Руководство: использование субмикшированной речи](how-to--use-submix-voices.md)
</dt> <dt>

[Руководство: создание цепи эффектов](how-to--create-an-effect-chain.md)
</dt> </dl>

 

 



