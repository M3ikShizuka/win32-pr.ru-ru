---
description: Руководство разработчика по распространяемой версии XAudio 2.9
ms.assetid: ''
title: Руководство разработчика по распространяемой версии XAudio 2.9
ms.topic: article
ms.date: 10/17/2019
ms.openlocfilehash: a87c2dc44179f2c189270dfa91d2cf2696ea98a7
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2021
ms.locfileid: "104000016"
---
# <a name="developer-guide-for-redistributable-version-of-xaudio-29"></a><span data-ttu-id="1c7b0-103">Руководство разработчика по распространяемой версии XAudio 2.9</span><span class="sxs-lookup"><span data-stu-id="1c7b0-103">Developer guide for redistributable version of XAudio 2.9</span></span>

<span data-ttu-id="1c7b0-104">Версия Ксаудио 2,9 доступна в виде [пакета NuGet](/nuget/what-is-nuget).</span><span class="sxs-lookup"><span data-stu-id="1c7b0-104">A version of XAudio 2.9 is available as a [NuGet package](/nuget/what-is-nuget).</span></span> <span data-ttu-id="1c7b0-105">Разработчики могут распространять эту версию Ксаудио 2,9 вместе с их приложениями.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-105">Developers can redistribute this version of XAudio 2.9 with their apps.</span></span> <span data-ttu-id="1c7b0-106">Это позволяет приложению использовать Ксаудио 2,9 в более старых версиях Windows, которые не включают Ксаудио 2,9 в составе образа операционной системы.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-106">This allows an app to use XAudio 2.9 on older versions of Windows that do no not include XAudio 2.9 as part of the operating system image.</span></span> <span data-ttu-id="1c7b0-107">Использование этого распространяемого пакета предпочтительнее, чем распространение Ксаудио 2,7 из пакета SDK DirectX, так как Ксаудио 2,7 не обновлялся с 2010.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-107">Use of this redistributable is preferred over redistributing XAudio 2.7 from the DirectX SDK, as XAudio 2.7 has not been updated since 2010.</span></span>

## <a name="supported-platforms"></a><span data-ttu-id="1c7b0-108">Поддерживаемые платформы</span><span class="sxs-lookup"><span data-stu-id="1c7b0-108">Supported platforms</span></span>

<span data-ttu-id="1c7b0-109">Пакет NuGet Ксаудио 2,9 (*Microsoft. XAudio2. Redist. \* . nupkg*) включает 32-разрядную и 64-разрядную версию библиотеки DLL, которая РЕАЛИЗУЕТ API ксаудио 2,9.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-109">The XAudio 2.9 NuGet package (*Microsoft.XAudio2.Redist.\*.nupkg*) includes a 32-bit and a 64-bit version of a DLL that implements the XAudio 2.9 API.</span></span> <span data-ttu-id="1c7b0-110">Библиотека DLL называется XAUDIO2 \_9REDIST.DLL.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-110">The DLL is called XAUDIO2\_9REDIST.DLL.</span></span> <span data-ttu-id="1c7b0-111">Эта библиотека DLL будет работать в Windows 7 с пакетом обновления 1 (SP1), Windows 8 Windows 8.1 и Windows 10.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-111">This DLL will work on Windows 7 SP1, Windows 8, Windows 8.1 and Windows 10.</span></span>

<span data-ttu-id="1c7b0-112">Если библиотека DLL используется в системе Windows 10, она проверяет номер версии XAUDIO2 \_9.DLL, которая является частью операционной системы, и если операционная система более новая, она делегирует все вызовы API в XAUDIO2 \_9.DLL в операционной системе.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-112">When the DLL is used on a Windows 10 system, it checks the version number of the XAUDIO2\_9.DLL that is part of the operating system, and if the operating system is newer, it will delegate all API calls to XAUDIO2\_9.DLL in the operating system.</span></span> <span data-ttu-id="1c7b0-113">Это гарантирует, что приложения всегда используют последнюю версию Ксаудио 2,9, доступную на текущей платформе.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-113">This ensures that apps always use the latest version of XAudio 2.9 that is available on the current platform.</span></span>

<span data-ttu-id="1c7b0-114">Библиотека DLL не предназначена для Xbox One.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-114">The DLL is not intended for Xbox One.</span></span> <span data-ttu-id="1c7b0-115">При использовании в Xbox One библиотека DLL всегда делегирует все вызовы API XAUDIO2 \_9.DLL в операционной системе Xbox One.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-115">If used on Xbox One, the DLL will always delegate all API calls to XAUDIO2\_9.DLL in the Xbox One operating system.</span></span>

<span data-ttu-id="1c7b0-116">Библиотека DLL не предназначена для приложений UWP.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-116">The DLL is not intended for UWP apps.</span></span> <span data-ttu-id="1c7b0-117">Приложения UWP должны использовать9.DLL XAUDIO2 \_ , который является частью операционной системы.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-117">UWP apps should use the XAUDIO2\_9.DLL that is part of the operating system.</span></span>

## <a name="installing-the-nuget-package"></a><span data-ttu-id="1c7b0-118">Установка пакета NuGet</span><span class="sxs-lookup"><span data-stu-id="1c7b0-118">Installing the NuGet package</span></span>

<span data-ttu-id="1c7b0-119">Самый простой способ установить пакет NuGet — использовать [Диспетчер пакетов NuGet](/nuget/consume-packages/install-use-packages-visual-studio) в Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-119">The easiest way to install the NuGet package is to use the [NuGet Package Manager](/nuget/consume-packages/install-use-packages-visual-studio) in Microsoft Visual Studio.</span></span> <span data-ttu-id="1c7b0-120">В этом случае файл проекта Visual Studio будет автоматически обновлен для включения *Microsoft. XAudio2. Redist. targets*.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-120">If you do this, your Visual Studio project file will be automatically updated to include *Microsoft.XAudio2.Redist.targets*.</span></span> <span data-ttu-id="1c7b0-121">Файл *Targets* добавляет папку include с файлами заголовков для XAudio2 в коллекцию включаемых путей проекта.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-121">The *.targets* file adds the Include folder with the header files for the XAudio2 to your collection of project include paths.</span></span> <span data-ttu-id="1c7b0-122">Файл *Targets* также сделает. DLL или. Ссылка на EXE с XAUDIO2REDIST. LIB и КСАПОБАСЕРЕДИСТ. LIB.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-122">The *.targets* file will also make your .DLL or .EXE link with XAUDIO2REDIST.LIB and XAPOBASEREDIST.LIB.</span></span>

<span data-ttu-id="1c7b0-123">Библиотека КСАПОБАСЕРЕДИСТ. LIB требуется только в том случае, если вы планируете импемент пользовательский объект обработки Ксаудио (КСАПО) и можете удалить его из *Microsoft. XAudio2. Redist. targets* , если он не используется.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-123">The library XAPOBASEREDIST.LIB is only needed if you intend to impement a custom XAudio Processing Object (XAPO) and you can remove it from the *Microsoft.XAudio2.Redist.targets* if it is unused.</span></span>

<span data-ttu-id="1c7b0-124">Можно также использовать другие средства для извлечения содержимого пакета NuGet или даже переименовать расширение файла в ZIP-файл и извлечь файлы с помощью любого средства извлечения ZIP-файлов.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-124">You can also use other tools to extract the contents of the NuGet package, or even rename the file extension to .zip and extract the files with any ZIP extractor tool.</span></span>

## <a name="compiling-your-app"></a><span data-ttu-id="1c7b0-125">Компиляция приложения</span><span class="sxs-lookup"><span data-stu-id="1c7b0-125">Compiling your app</span></span>

### <a name="choosing-which-headers-to-include"></a><span data-ttu-id="1c7b0-126">Выбор включаемых заголовков</span><span class="sxs-lookup"><span data-stu-id="1c7b0-126">Choosing which headers to include</span></span>

<span data-ttu-id="1c7b0-127">Пакет NuGet Ксаудио 2,9 содержит те же файлы заголовков XAudio2, которые включены в пакет SDK для Windows 10.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-127">The XAudio 2.9 NuGet package includes the same XAudio2 header files that are included in the Windows 10 SDK.</span></span> <span data-ttu-id="1c7b0-128">Однако файлы заголовков имели некоторые изменения, чтобы убедиться, что их можно использовать в явной ориентации на все [Поддерживаемые платформы](#supported-platforms), включая старые версии Windows.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-128">However, the header files have had some adjustments to them to make sure that you can use them while explicitly targeting all [supported platforms](#supported-platforms), including older versions of Windows.</span></span>

<span data-ttu-id="1c7b0-129">Если [пакет NuGet устанавливается](#installing-the-nuget-package) с помощью диспетчера пакетов nuget в Microsoft Visual Studio то путь к файлам заголовков помещается перед путем к файлам заголовков Windows SDK.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-129">If you [install the NuGet package](#installing-the-nuget-package) using the NuGet Package Manager in Microsoft Visual Studio then the path to the header files is placed in front of the path to the Windows SDK header files.</span></span> <span data-ttu-id="1c7b0-130">Это означает, что если код в проекте включает XAUDIO2. Заголовок H, он выберет заголовок кросс-платформенного из пакета NuGet.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-130">That means that if code in your project includes the XAUDIO2.H header, it will pick up the cross-platform header from the NuGet package.</span></span> <span data-ttu-id="1c7b0-131">Обычно это предпочтительное поведение.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-131">This is normally the desired behavior.</span></span>

<span data-ttu-id="1c7b0-132">Следует быть внимательным, если добавить путь к заголовкам include вручную в проект, так как они указываются в неправильном порядке, может привести к появлению XAUDIO2 для конкретной версии ОС [. H](/windows/win32/api/xaudio2/) для включения в Windows SDK, а не на кросс-платформенную версию XAUDIO2. H.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-132">You should be careful if adding the path to the include headers manually to the project, as specifying them in the wrong order can cause the OS-version specific [XAUDIO2.H](/windows/win32/api/xaudio2/) to be included from the Windows SDK, rather than the cross-platform version of XAUDIO2.H.</span></span>

<span data-ttu-id="1c7b0-133">Чтобы включить заголовки с меньшими подверженными ошибкам, пакет NuGet содержит версию каждого заголовка с добавлением Redist.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-133">To make the inclusion of headers less error-prone, the NuGet package contains a version of each header with "REDIST" appended to it.</span></span> <span data-ttu-id="1c7b0-134">Например, в дополнение к XAUDIO2. H, пакет NuGet также включает XAUDIO2REDIST. H.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-134">For example, in addition to XAUDIO2.H, the NuGet package also includes XAUDIO2REDIST.H.</span></span> <span data-ttu-id="1c7b0-135">При желании код может напрямую включать XAUDIO2REDIST. H, чтобы исключить неоднозначность, связанную с тем, какой файл заголовка используется.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-135">If you prefer, your code can directly include XAUDIO2REDIST.H to eliminate any ambiguity about which header file is being used.</span></span> <span data-ttu-id="1c7b0-136">При включении-Redist. H версия файла заголовка, порядок, в котором каталоги включаемых файлов указаны в файле проекта, не имеет значения.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-136">When including the -REDIST.H version of a header file, the order in which the include file directories are listed in the project file do not matter.</span></span>

<span data-ttu-id="1c7b0-137">Обратите внимание, что если приложение также компилируется для Xbox One, следует продолжить включать XAUDIO2. H при компиляции для Xbox One, так как некоторые API-интерфейсы Xbox One исключаются из XAUDIO2REDIST. H.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-137">Note that if your app is also being compiled for Xbox One, you should continue to include XAUDIO2.H when compiling for Xbox One, as some Xbox One-specific APIs are excluded from XAUDIO2REDIST.H.</span></span> <span data-ttu-id="1c7b0-138">Этот пакет NuGet не предназначен для Xbox One.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-138">This NuGet package is not intended for Xbox One.</span></span>

### <a name="loading-the-dll"></a><span data-ttu-id="1c7b0-139">Загрузка библиотеки DLL</span><span class="sxs-lookup"><span data-stu-id="1c7b0-139">Loading the DLL</span></span>

<span data-ttu-id="1c7b0-140">Мы рекомендуем связать приложение с XAUDIO2REDIST. LIB и установите XAUDIO2 \_9REDIST.DLL в той же папке, что и исполняемый файл приложения.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-140">We recommend that you link your app with XAUDIO2REDIST.LIB and install XAUDIO2\_9REDIST.DLL in the same folder as your app's executable.</span></span> <span data-ttu-id="1c7b0-141">Это приведет к \_ загрузке XAUDIO29REDIST.DLL сразу после запуска исполняемого файла.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-141">This will cause XAUDIO2\_9REDIST.DLL to be loaded as soon as your executable is launched.</span></span> <span data-ttu-id="1c7b0-142">Однако при желании вы можете использовать [**LoadLibraryEx**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibraryexw) и [**GETPROCADDRESS**](/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress) для загрузки XAUDIO2 \_9REDIST.DLL по запросу.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-142">However, if you prefer, you may use [**LoadLibraryEx**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibraryexw) and [**GetProcAddress**](/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress) to load XAUDIO2\_9REDIST.DLL on demand.</span></span> <span data-ttu-id="1c7b0-143">Это хорошее решение, если приложению не всегда нужно использовать интерфейсы API XAudio2.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-143">This is a good solution if your app does not always need to use the XAudio2 APIs.</span></span> <span data-ttu-id="1c7b0-144">Но если это сделать,9REDIST.DLL XAUDIO2 будет \_ загружаться до тех пор, пока приложение не завершит работу, так как попытка выгрузить библиотеку DLL может вызвать сбой, если фоновый поток по-прежнему выполняет код в библиотеке DLL.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-144">But if you do this, you should keep the XAUDIO2\_9REDIST.DLL loaded until the app exits, as attempting to unload the DLL can cause a crash if a background thread is still executing code in the DLL.</span></span>

<span data-ttu-id="1c7b0-145">В отличие от старых Ксаудио 2,7, невозможно использовать CoCreateInstance для загрузки библиотеки DLL.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-145">Unlike the older XAudio 2.7, it is not possible to use CoCreateInstance to load the DLL.</span></span>

### <a name="verifying-the-dll-signature"></a><span data-ttu-id="1c7b0-146">Проверка подписи DLL</span><span class="sxs-lookup"><span data-stu-id="1c7b0-146">Verifying the DLL signature</span></span>

<span data-ttu-id="1c7b0-147">\_Двоичный9REDIST.DLL XAUDIO2 подписывается корпорацией Майкрософт с помощью подписи SHA-2.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-147">The XAUDIO2\_9REDIST.DLL binary is signed by Microsoft using a SHA-2 signature.</span></span> <span data-ttu-id="1c7b0-148">Код, который пытается проверить подпись, например, модули защиты от Памятка по для игр, должен поддерживать SHA-2.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-148">Any code that attempts to validate the signature, e.g., anti-cheat modules for games, therefore needs to support SHA-2.</span></span> <span data-ttu-id="1c7b0-149">Обратите внимание, что операционная система Windows 7 с пакетом обновления 1 (SP1) изначально не поддерживала SHA-2 и требует обновления для добавления этой функции.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-149">Note that Windows 7 SP1 did not originally support SHA-2 and requires an update to add that functionality.</span></span> <span data-ttu-id="1c7b0-150">Обновление доступно как [KB4474419](https://support.microsoft.com/help/4474419/sha-2-code-signing-support-update).</span><span class="sxs-lookup"><span data-stu-id="1c7b0-150">The update is available as [KB4474419](https://support.microsoft.com/help/4474419/sha-2-code-signing-support-update).</span></span>

## <a name="testing"></a><span data-ttu-id="1c7b0-151">Тестирование</span><span class="sxs-lookup"><span data-stu-id="1c7b0-151">Testing</span></span>

### <a name="spatial-sound-in-newer-versions-of-windows-10"></a><span data-ttu-id="1c7b0-152">Пространственный звук в более новых версиях Windows 10</span><span class="sxs-lookup"><span data-stu-id="1c7b0-152">Spatial sound in newer versions of Windows 10</span></span>

<span data-ttu-id="1c7b0-153">Начиная с обновления Windows 10 1903, Ксаудио 2,9 автоматически использует [виртуальный объемный звук](#spatial-sound-and-virtual-surround)при соблюдении определенных условий.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-153">Starting with the Windows 10 1903 update, XAudio 2.9 automatically uses [virtual surround sound](#spatial-sound-and-virtual-surround), if certain conditions are satisfied.</span></span> <span data-ttu-id="1c7b0-154">Мы рекомендуем проверить игру, которая создает многоканальный звук в Windows 10 1903 (или более новой версии), чтобы убедиться в том, что игра звучит должным образом.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-154">We recommend testing game that generate multi-channel sound on Windows 10 1903 (or newer) to verify that the game sounds as expected.</span></span>

#### <a name="enabling-spatial-sound"></a><span data-ttu-id="1c7b0-155">Включение пространственного звука</span><span class="sxs-lookup"><span data-stu-id="1c7b0-155">Enabling spatial sound</span></span>

<span data-ttu-id="1c7b0-156">Пользователь может включить пространственный звуковой формат, щелкнув правой кнопкой мыши значок динамика в области уведомлений Windows.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-156">The user can enable a spatial sound format by right-clicking on the speaker icon in the Windows system tray.</span></span> 

<span data-ttu-id="1c7b0-157">Ксаудио 2,9 будет использовать выбранный пользователем формат пространственного звука только в том случае, если процесс, использующий API XAudio2, распознается как игра в игровой панели Windows.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-157">XAudio 2.9 will only use the user's selected spatial sound format if the process that is using the XAudio2 API is recognized as a game by the Windows Game Bar.</span></span> <span data-ttu-id="1c7b0-158">Во время разработки процесс не распознается в качестве игры игровой панелью.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-158">During development, it is possible that the process is not yet recognized as a game by the Game Bar.</span></span> <span data-ttu-id="1c7b0-159">Чтобы изменить это, используйте клавишу Win + G Short-Cut, чтобы открыть игровую панель во время работы игры.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-159">To change this, use the Win+G keyboard short-cut to bring up the Game Bar while the game is running.</span></span> <span data-ttu-id="1c7b0-160">Затем щелкните значок "Параметры" и установите флажок "Помните, что это игра".</span><span class="sxs-lookup"><span data-stu-id="1c7b0-160">Then click on the "Settings" icon and check the checkbox that says, "Remember that this is a game".</span></span>

#### <a name="opting-out-from-spatial-sound"></a><span data-ttu-id="1c7b0-161">Отказаться от пространственного звука</span><span class="sxs-lookup"><span data-stu-id="1c7b0-161">Opting out from spatial sound</span></span>

<span data-ttu-id="1c7b0-162">Существует способ отказаться от использования XAudio2ного звукового кодировщика, указав определенные значения для параметра [**AUDIO_STREAM_CATEGORY**](/windows/win32/api/audiosessiontypes/ne-audiosessiontypes-audio_stream_category) в [**IXAudio2:: креатемастерингвоице**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice).</span><span class="sxs-lookup"><span data-stu-id="1c7b0-162">There is a way to opt out from having XAudio2 use the spatial sound encoder by specifying certain values for the [**AUDIO_STREAM_CATEGORY**](/windows/win32/api/audiosessiontypes/ne-audiosessiontypes-audio_stream_category) parameter in [**IXAudio2::CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice).</span></span> 

<span data-ttu-id="1c7b0-163">Пространственный звук включается для следующих категорий:</span><span class="sxs-lookup"><span data-stu-id="1c7b0-163">Spatial sound is enabled for these categories:</span></span>

* <span data-ttu-id="1c7b0-164">AudioCategory_ForegroundOnlyMedia</span><span class="sxs-lookup"><span data-stu-id="1c7b0-164">AudioCategory_ForegroundOnlyMedia</span></span>
* <span data-ttu-id="1c7b0-165">AudioCategory_GameEffects</span><span class="sxs-lookup"><span data-stu-id="1c7b0-165">AudioCategory_GameEffects</span></span>
* <span data-ttu-id="1c7b0-166">AudioCategory_GameMedia</span><span class="sxs-lookup"><span data-stu-id="1c7b0-166">AudioCategory_GameMedia</span></span>
* <span data-ttu-id="1c7b0-167">AudioCategory_Movie</span><span class="sxs-lookup"><span data-stu-id="1c7b0-167">AudioCategory_Movie</span></span>
* <span data-ttu-id="1c7b0-168">AudioCategory_Media</span><span class="sxs-lookup"><span data-stu-id="1c7b0-168">AudioCategory_Media</span></span>

<span data-ttu-id="1c7b0-169">Пространственный звук не включен, если указаны следующие категории:</span><span class="sxs-lookup"><span data-stu-id="1c7b0-169">Spatial sound is not enabled if any of the following categories are specified:</span></span>

* <span data-ttu-id="1c7b0-170">AudioCategory_Other</span><span class="sxs-lookup"><span data-stu-id="1c7b0-170">AudioCategory_Other</span></span>
* <span data-ttu-id="1c7b0-171">AudioCategory_Communications</span><span class="sxs-lookup"><span data-stu-id="1c7b0-171">AudioCategory_Communications</span></span>
* <span data-ttu-id="1c7b0-172">AudioCategory_Alerts</span><span class="sxs-lookup"><span data-stu-id="1c7b0-172">AudioCategory_Alerts</span></span>
* <span data-ttu-id="1c7b0-173">AudioCategory_SoundEffects</span><span class="sxs-lookup"><span data-stu-id="1c7b0-173">AudioCategory_SoundEffects</span></span>
* <span data-ttu-id="1c7b0-174">AudioCategory_GameChat</span><span class="sxs-lookup"><span data-stu-id="1c7b0-174">AudioCategory_GameChat</span></span>
* <span data-ttu-id="1c7b0-175">AudioCategory_Speech</span><span class="sxs-lookup"><span data-stu-id="1c7b0-175">AudioCategory_Speech</span></span>

### <a name="error-handling"></a><span data-ttu-id="1c7b0-176">Обработка ошибок</span><span class="sxs-lookup"><span data-stu-id="1c7b0-176">Error handling</span></span>

<span data-ttu-id="1c7b0-177">Важно протестировать, что игра может изменить звуковое устройство, например, когда наушники подключены к сети или отключены.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-177">It is important to test that you game can handle a change in audio device, for example, when headphones are plugged in, or unplugged.</span></span> <span data-ttu-id="1c7b0-178">Это необходимо проверить с помощью наушников, которые поддерживают только частоту выборки 44,1 кГц.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-178">This should be tested with headphones that only support 44.1 kHz sampling rate.</span></span> <span data-ttu-id="1c7b0-179">Многие низкоуровневые наушники USB и гарнитуры Bluetooth поддерживают 44,1 кГц.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-179">Many low-end USB headphones and Bluetooth headsets only support 44.1 kHz.</span></span> <span data-ttu-id="1c7b0-180">Переход между частотой выборки 48 кГц и частотой выборки 44,1 кГц может вызвать ошибку даже при использовании функции [конечной точки Virtual Audio](#virtual-audio-endpoint) .</span><span class="sxs-lookup"><span data-stu-id="1c7b0-180">The transition between 48 kHz sampling rate and 44.1 kHz sampling rate can cause an error even when the [virtual audio endpoint](#virtual-audio-endpoint) feature is used.</span></span> <span data-ttu-id="1c7b0-181">Ошибка не будет возникать, если наушники также поддерживают 48 кГц.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-181">The error will not happen if the headphones also support 48 kHz.</span></span> <span data-ttu-id="1c7b0-182">Обратите внимание, что конечная точка Virtual Audio недоступна в Windows 7 с пакетом обновления 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="1c7b0-182">Note that the virtual audio endpoint feature is not available on Windows 7 SP1.</span></span>

<span data-ttu-id="1c7b0-183">Код ошибки, возвращенный Ксаудио 2,9, когда не может автоматически восстановиться после изменения в конечной точке аудио, [XAUDIO2 \_ E \_ \_ недействителен](xaudio2-error-codes.md).</span><span class="sxs-lookup"><span data-stu-id="1c7b0-183">The error code returned by XAudio 2.9 when it cannot automatically recover from a change in audio endpoint is [XAUDIO2\_E\_DEVICE\_INVALIDATED](xaudio2-error-codes.md).</span></span> <span data-ttu-id="1c7b0-184">Однако рекомендуется, чтобы приложения не жестко закодировать зависимость от кода ошибки, имеющего определенное значение.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-184">However, we recommend that apps do not hard-code a dependency on the error code having a specific value.</span></span>

<span data-ttu-id="1c7b0-185">Чтобы получать уведомления об ошибке, приложение должно реализовать интерфейс [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback) и предоставить указатель на этот интерфейс, вызвав метод [**IXAudio2:: регистерфоркаллбаккс**](xaudio2-callbacks.md) .</span><span class="sxs-lookup"><span data-stu-id="1c7b0-185">To be notified of the error, the app should implement the [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback) interface and provide a pointer to that interface by invoking the [**IXAudio2::RegisterForCallbacks**](xaudio2-callbacks.md) method.</span></span> <span data-ttu-id="1c7b0-186">Реализация [**IXAudio2EngineCallback:: онкритикалеррор**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2enginecallback-oncriticalerror) в приложении будет вызываться API XAudio2, если во время воспроизведения возникает ошибка.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-186">The app's implementation of the [**IXAudio2EngineCallback::OnCriticalError**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2enginecallback-oncriticalerror) will be invoked by the XAudio2 API if an error occurs during playback.</span></span>

<span data-ttu-id="1c7b0-187">Обратите внимание, что [**IXAudio2EngineCallback:: онкритикалеррор**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2enginecallback-oncriticalerror) не обязательно вызывается, если работа конвейера аудиопотока приостановлена.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-187">Note that [**IXAudio2EngineCallback::OnCriticalError**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2enginecallback-oncriticalerror) is not necessarily invoked if the audio pipeline is paused.</span></span> <span data-ttu-id="1c7b0-188">Например, если пользователь свернется в приложение или приложение приостанавливается по любой причине, воспроизведение звука может быть приостановлено.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-188">For example, if the user minimizes the app, or the app gets suspended for any reason, audio playback might be paused.</span></span> <span data-ttu-id="1c7b0-189">Если изменение в звуковом устройстве происходит в течение этого времени, то ошибка возвращается только в том случае, если приложение вызывает [**IXAudio2:: ЗапускДвигателя**](/windows/desktop/api/xaudio2/nf-xaudio2-ixaudio2-startengine) и/или вызывает [**IXAudio2SourceVoice:: Start**](/windows/desktop/api/xaudio2/nf-xaudio2-ixaudio2sourcevoice-start).</span><span class="sxs-lookup"><span data-stu-id="1c7b0-189">If the change in audio device happens during this time, the error is only returned when the app invokes [**IXAudio2::StartEngine**](/windows/desktop/api/xaudio2/nf-xaudio2-ixaudio2-startengine) and/or invokes [**IXAudio2SourceVoice::Start**](/windows/desktop/api/xaudio2/nf-xaudio2-ixaudio2sourcevoice-start).</span></span> <span data-ttu-id="1c7b0-190">Если воспроизведение может быть приостановлено в приложении, следует протестировать смену звукового устройства во время приостановки воспроизведения, чтобы убедиться, что приложение по-прежнему может быть восстановлено в этой ситуации.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-190">If playback can be paused with your app, you should test changing the audio device while the playback is paused, to verify that the app still can recover from this situation.</span></span>

## <a name="xaudio-29-api-differences-compared-to-xaudio-27"></a><span data-ttu-id="1c7b0-191">Различия в API Ксаудио 2,9 по сравнению с Ксаудио 2,7</span><span class="sxs-lookup"><span data-stu-id="1c7b0-191">XAudio 2.9 API differences compared to XAudio 2.7</span></span>

<span data-ttu-id="1c7b0-192">В этом разделе представлен обзор некоторых различий API между Ксаудио 2,7 и распространяемой версией Ксаудио 2,9.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-192">This section provides a summary of some of the API differences between XAudio 2.7 and the redistributable version of XAudio 2.9.</span></span>

### <a name="supported-formats"></a><span data-ttu-id="1c7b0-193">Поддерживаемые форматы</span><span class="sxs-lookup"><span data-stu-id="1c7b0-193">Supported formats</span></span>

<span data-ttu-id="1c7b0-194">Ксаудио 2,9 поддерживает следующие форматы входных данных на компьютере:</span><span class="sxs-lookup"><span data-stu-id="1c7b0-194">XAudio 2.9 supports these input formats on PC:</span></span>

* <span data-ttu-id="1c7b0-195">Линейный 16-разрядный PCM</span><span class="sxs-lookup"><span data-stu-id="1c7b0-195">Linear 16-bit PCM</span></span>
* <span data-ttu-id="1c7b0-196">Линейный 32-разрядный PCM с плавающей запятой</span><span class="sxs-lookup"><span data-stu-id="1c7b0-196">Linear 32-bit Float PCM</span></span>
* <span data-ttu-id="1c7b0-197">16-разрядное ADPCM</span><span class="sxs-lookup"><span data-stu-id="1c7b0-197">16-bit ADPCM</span></span>
* <span data-ttu-id="1c7b0-198">ксвма</span><span class="sxs-lookup"><span data-stu-id="1c7b0-198">xWMA</span></span>

<span data-ttu-id="1c7b0-199">Формат XMA поддерживается только на Xbox One.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-199">The XMA format is only supported on Xbox One.</span></span>

### <a name="preferred-cpu-core"></a><span data-ttu-id="1c7b0-200">Предпочтительное ядро ЦП</span><span class="sxs-lookup"><span data-stu-id="1c7b0-200">Preferred CPU core</span></span>

<span data-ttu-id="1c7b0-201">Можно указать, какой ЦП Core Ксаудио 2,9 должен использовать для потока обработки звука.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-201">It is possible to specify which CPU core XAudio 2.9 should use for its audio processing thread.</span></span> <span data-ttu-id="1c7b0-202">Однако обычно рекомендуется позволить Ксаудио 2,9 выбирать это значение самим по себе.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-202">However, it is usually preferred to let XAudio 2.9 choose this value by itself.</span></span> <span data-ttu-id="1c7b0-203">Это делается путем установки параметра **XAudio2Processor** в вызове [**XAudio2Create**](/windows/desktop/api/xaudio2/nf-xaudio2-xaudio2create) в XAUDIO2 \_ использовать \_ процессор по умолчанию \_ .</span><span class="sxs-lookup"><span data-stu-id="1c7b0-203">This is done by setting the **XAudio2Processor** parameter in the call to [**XAudio2Create**](/windows/desktop/api/xaudio2/nf-xaudio2-xaudio2create) to XAUDIO2\_USE\_DEFAULT\_PROCESSOR.</span></span> 

<span data-ttu-id="1c7b0-204">Ксаудио 2,9 выберет разные ядра ЦП на Xbox, а не на ПК.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-204">XAudio 2.9 will choose a different CPU core on Xbox One than on PC.</span></span> <span data-ttu-id="1c7b0-205">Метод IXAudio2Extension:: препроцессора можно использовать для определения того, какое ядро ЦП выбирало XAudio2.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-205">The IXAudio2Extension::GetProcessor method can be used to determine which CPU core XAudio2 has chosen.</span></span>

### <a name="virtual-audio-endpoint"></a><span data-ttu-id="1c7b0-206">Конечная точка Virtual Audio</span><span class="sxs-lookup"><span data-stu-id="1c7b0-206">Virtual audio endpoint</span></span>

<span data-ttu-id="1c7b0-207">Ксаудио 2,9 по умолчанию будет использовать конечную точку виртуальной аудиоподсистемы при работе в Windows 8 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-207">XAudio 2.9 will use a virtual audio endpoint by default, when running on Windows 8 or later.</span></span> <span data-ttu-id="1c7b0-208">Это означает, что при изменении конечной точки звука по умолчанию во время использования Ксаудио 2,9 будет предпринята попытка автоматически переключиться на новую конечную точку звука.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-208">This means that if the default audio endpoint changes while XAudio 2.9 is used, it will attempt to automatically switch to the new audio endpoint.</span></span> <span data-ttu-id="1c7b0-209">Пример того, что это может произойти, если конечная точка аудио по умолчанию — пара головных телефонов, подключенных по USB, а затем пользователь отсоединяет наушники.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-209">An example of when this can happen when the default audio endpoint is a pair of headphones that are connected over USB, and then the user unplugs the headphones.</span></span> <span data-ttu-id="1c7b0-210">Это приведет к тому, что динамики будут новой конечной точкой звука по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-210">This will cause the speakers to be the new default audio endpoint.</span></span>

<span data-ttu-id="1c7b0-211">Если приложение указывает конкретный звуковой формат при вызове [**IXAudio2:: креатемастерингвоице**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice), то для выполнения этого параметра ксаудио 2,9 может быть невозможно.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-211">If the app specifies a specific audio format when invoking [**IXAudio2::CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice), it may not be possible for XAudio 2.9 to perform this switch.</span></span> <span data-ttu-id="1c7b0-212">Например, если приложение указало, что для голоса используется частота выборки 48 кГц, а новое звуковое устройство поддерживает только 44,1 кГц, то автоматический коммутатор завершится сбоем, а Ксаудио 2,9 сообщит об ошибке " [ \_ \_ \_ недействительная ошибка устройства XAUDIO2 E](xaudio2-error-codes.md) ".</span><span class="sxs-lookup"><span data-stu-id="1c7b0-212">For example, if the app specified that the Mastering Voice shall use a 48 kHz sampling rate and the new audio device only supports 44.1 kHz, then the automatic switch will fail, and XAudio 2.9 will report the [XAUDIO2\_E\_DEVICE\_INVALIDATED](xaudio2-error-codes.md) error.</span></span>

<span data-ttu-id="1c7b0-213">Приложение может отказаться от использования конечной точки Virtual Audio, передав флаг [**\_ клиента XAUDIO2 No \_ Virtual \_ Audio \_**](xaudio2-boundary-values-and-flags.md) в [**IXAudio2:: креатемастерингвоице**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice).</span><span class="sxs-lookup"><span data-stu-id="1c7b0-213">It is possible for the app to opt out of using the virtual audio endpoint by passing in the [**XAUDIO2\_NO\_VIRTUAL\_AUDIO\_CLIENT**](xaudio2-boundary-values-and-flags.md) flag to [**IXAudio2::CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice).</span></span>

<span data-ttu-id="1c7b0-214">Конечные точки Virtual Audio недоступны в Windows 7 с пакетом обновления 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="1c7b0-214">Virtual audio endpoints are not available on Windows 7 SP1.</span></span> <span data-ttu-id="1c7b0-215">Флаг **\_ клиента XAUDIO2 \_ No \_ Virtual \_ Audio** не влияет на Windows 7 с пакетом обновления 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="1c7b0-215">The **XAUDIO2\_NO\_VIRTUAL\_AUDIO\_CLIENT** flag has no effect on Windows 7 SP1.</span></span>

### <a name="audio-categories"></a><span data-ttu-id="1c7b0-216">Категории аудио</span><span class="sxs-lookup"><span data-stu-id="1c7b0-216">Audio categories</span></span>

<span data-ttu-id="1c7b0-217">Приложение должно указать категорию для своего звукового потока.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-217">The app should specify a category for its audio stream.</span></span> <span data-ttu-id="1c7b0-218">Это делается путем предоставления значения из перечисления Аудиокатегори при вызове метода [**IXAudio2:: креатемастерингвоице**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice) .</span><span class="sxs-lookup"><span data-stu-id="1c7b0-218">This is done by providing a value from the AudioCategory enumeration when invoking the [**IXAudio2::CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice) method.</span></span> <span data-ttu-id="1c7b0-219">Например, AudioCategory_GameEffects.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-219">For example, AudioCategory_GameEffects.</span></span> <span data-ttu-id="1c7b0-220">Категория аудио может влиять на то, как Windows обрабатывает звук или представляет звуковый поток на панели управления томами.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-220">The audio category can affect how Windows processes the sound or how it represents the audio stream in the volume control panel.</span></span> <span data-ttu-id="1c7b0-221">Категория "звук" также влияет на автоматическое включение [виртуальных окружающих звуковых эффектов](#spatial-sound-and-virtual-surround) .</span><span class="sxs-lookup"><span data-stu-id="1c7b0-221">The audio category also affects if [virtual surround sound](#spatial-sound-and-virtual-surround) is automatically enabled.</span></span>

### <a name="duration-of-audio-processing-quantum"></a><span data-ttu-id="1c7b0-222">Длительность такта обработки звука</span><span class="sxs-lookup"><span data-stu-id="1c7b0-222">Duration of audio processing quantum</span></span>

<span data-ttu-id="1c7b0-223">На большинстве компьютеров Ксаудио 2,9 обрабатывает звук в течение 10 миллисекунд.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-223">On most PCs, XAudio 2.9 processes audio in 10 millisecond chunks.</span></span> <span data-ttu-id="1c7b0-224">Это называется квантом обработки.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-224">This is called the processing quantum.</span></span> <span data-ttu-id="1c7b0-225">Однако длительность этого такта может отличаться от 10 миллисекунд на каком-либо оборудовании.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-225">However, the duration of this quantum may be different than 10 milliseconds on some hardware.</span></span> <span data-ttu-id="1c7b0-226">Приложения, которым необходимо знать точный такт, могут вызвать метод IXAudio2Extension:: Жетпроцессингкуантум для получения значения.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-226">Apps that need to know the exact quantum can invoke the IXAudio2Extension::GetProcessingQuantum method to retrieve the value.</span></span>

### <a name="spatial-sound-and-virtual-surround"></a><span data-ttu-id="1c7b0-227">Пространственный звук и виртуальное окружение</span><span class="sxs-lookup"><span data-stu-id="1c7b0-227">Spatial sound and virtual surround</span></span>

<span data-ttu-id="1c7b0-228">Начиная с обновления Windows 10 1903, Ксаудио 2,9 автоматически использует виртуальный объемный звук при соблюдении определенных условий.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-228">Starting with the Windows 10 1903 update, XAudio 2.9 automatically uses virtual surround sound, if certain conditions are satisfied.</span></span> <span data-ttu-id="1c7b0-229">Мы рекомендуем проверить игру, которая создает многоканальный звук в Windows 10 1903 (или более новой версии), чтобы убедиться в том, что игра звучит должным образом.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-229">We recommend testing game that generate multi-channel sound on Windows 10 1903 (or newer) to verify that the game sounds as expected.</span></span> <span data-ttu-id="1c7b0-230">Обсуждение того, как протестировать эту функцию, см. в разделе [тестирование пространственного звука](#spatial-sound-in-newer-versions-of-windows-10) .</span><span class="sxs-lookup"><span data-stu-id="1c7b0-230">See the [testing spatial sound](#spatial-sound-in-newer-versions-of-windows-10) section for a discussion about how to test this feature.</span></span>

<span data-ttu-id="1c7b0-231">Как правило, Ксаудио 2,9 выполняет свертывание любого многоканального звука в соответствии с "физическим" числом звуковых каналов, поддерживаемых конечной точкой аудио.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-231">Normally, XAudio 2.9 performs a folds down any multi-channel audio to match the "physical" number of audio channels that are supported by the audio endpoint.</span></span> <span data-ttu-id="1c7b0-232">Например, если игра предоставляет звуковой канал 7,1, но звук воспроизводится на наушниках, Ксаудио 2,9 выводит звуковую телеканал 7,1 в стерео, используя стандартную матрицу свертывания.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-232">For example, if the game provides a 7.1 channel audio source, but the sound is played on headphones, XAudio 2.9 will fold down the 7.1 channel audio into stereo, using an industry standard fold-down matrix.</span></span> <span data-ttu-id="1c7b0-233">Если компьютер подключен к конечной точке HDMI, канал 7,1 будет передаваться как есть через подключение HDMI.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-233">If the PC is connected to a HDMI audio endpoint, then the 7.1 channel audio will be transmitted as-is over the HDMI connection.</span></span>

<span data-ttu-id="1c7b0-234">В Windows 10 добавлена поддержка пространственного звука с помощью централизованного кодировщика, который кодирует звук в выбранный пользователем формат [пространственного звука](../coreaudio/spatial-sound.md) .</span><span class="sxs-lookup"><span data-stu-id="1c7b0-234">Windows 10 adds support for spatial audio, using a centralized encoder that encodes audio into a user-selected [spatial sound](../coreaudio/spatial-sound.md) format.</span></span> <span data-ttu-id="1c7b0-235">Windows 10 поставляется с пространственным звуковым форматом, называемым Windows Sonic.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-235">Windows 10 comes included with a spatial sound format called Windows Sonic.</span></span> <span data-ttu-id="1c7b0-236">Другие форматы, например Dolby атмос для наушников, можно скачать с Microsoft Store.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-236">Other formats, such as Dolby Atmos for Headphones, can be downloaded from the Microsoft Store.</span></span> <span data-ttu-id="1c7b0-237">Некоторые из пространственных звуковых форматов, таких как Windows Sonic и Dolby атмос для наушников, предназначены для использования на конечных точках стерео Audio.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-237">Some of the spatial sound formats, such as Windows Sonic and Dolby Atmos for Headphones, are designed to be used on stereo audio endpoints.</span></span> <span data-ttu-id="1c7b0-238">Эти форматы выделяют звук на стерео, используя собственные алгоритмы, которые обеспечивают "виртуальный" объемный звук.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-238">These formats fold down surround sound to stereo using proprietary algorithms that achieve a "virtual" surround sound effect.</span></span> <span data-ttu-id="1c7b0-239">Иными словами, прослушиватель может воспринимать звуки, поступающие из разных позиций в трехмерном пространстве, даже при людьми наушников или при прослушивании одной пары стерео динамиков.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-239">In other words, the listener can perceive sound appearing from different positions in 3D space even while only wearing headphones, or while listening on a single pair of stereo speakers.</span></span>

<span data-ttu-id="1c7b0-240">Аналогичные эффекты можно получить с помощью API-интерфейсов [X3DAudio](x3daudio.md) , которые входят в состав ксаудио 2,9.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-240">Similar effects can be achieved using the [X3DAudio](x3daudio.md) APIs that are included with XAudio 2.9.</span></span> <span data-ttu-id="1c7b0-241">Основное отличие заключается в том, что X3DAudio требует, чтобы разработчик приложений явно запрограммирован для трехмерного аудио, а виртуальный объемный звук применяется автоматически к любому источнику звука на основе каналов традионал.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-241">The main difference is that X3DAudio requires the app developer to explicitly program for 3D audio, whereas virtual surround sound is applied automatically to any tradional channel-based sound source.</span></span>

<span data-ttu-id="1c7b0-242">В Windows 10 1903 и более новых играх, использующих Ксаудио 2,9, будет использоваться пространственный формат на уровне системы, который пользователь включил на конечной точке аудио, если таковой имеется.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-242">On Windows 10 1903, and newer, games that use XAudio 2.9 will use the system-wide spatial sound format that the user has enabled on the audio endpoint, if any.</span></span> <span data-ttu-id="1c7b0-243">Это означает, что Ксаудио 2,9 не выполнит обычное свертывание окружающего звука в стерео.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-243">This means that XAudio 2.9 will not perform the usual fold-down of surround sound to stereo.</span></span> <span data-ttu-id="1c7b0-244">Вместо этого звуковые сигналы будут переданы в кодировщик пространственного звука (например, Windows Sonic) для достижения виртуального эффекта звучания.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-244">Instead, the surround sound signal will be delivered to the spatial sound encoder (e.g., Windows Sonic) to achieve a virtual surround sound effect.</span></span>

### <a name="createhrtfapo"></a><span data-ttu-id="1c7b0-245">креатехртфапо</span><span class="sxs-lookup"><span data-stu-id="1c7b0-245">CreateHrtfApo</span></span>

<span data-ttu-id="1c7b0-246">Функция [**креатехртфапо**](/windows/desktop/api/HrtfApoApi/nf-hrtfapoapi-createhrtfapo) доступна только в Windows 10.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-246">The [**CreateHrtfApo**](/windows/desktop/api/HrtfApoApi/nf-hrtfapoapi-createhrtfapo) function is only available on Windows 10.</span></span> <span data-ttu-id="1c7b0-247">Он не реализован в распространяемом компоненте Ксаудио 2,9.</span><span class="sxs-lookup"><span data-stu-id="1c7b0-247">It is not implemented in the XAudio 2.9 redistributable.</span></span>
