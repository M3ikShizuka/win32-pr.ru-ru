---
description: API ксапо позволяет создавать кросс-платформенные объекты обработки звука (ксапо) для использования в XAudio2 как на Windows, так и в Xbox 360.
ms.assetid: 4fe88a0f-0234-462f-b575-e592f2c8401e
title: Обзор протокола XAPO
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2ee9ee64e865c8e3ef3cdac026274b922db438a54979dcb30d855a92b96e4e0e
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119589914"
---
# <a name="xapo-overview"></a>Обзор протокола XAPO

API ксапо позволяет создавать кросс-платформенные объекты обработки звука (ксапо) для использования в XAudio2 как на Windows, так и в Xbox 360. КСАПО — это объект, который принимает входящие звуковые данные и выполняет некоторую операцию с данными перед их передачей. КСАПО можно использовать для выполнения различных задач, включая добавление переработки в аудиопоток и мониторинг пиковых уровней громкости.

## <a name="creating-new-xapos"></a>Создание нового Ксапос

API КСАПО предоставляет интерфейс [**иксапо**](/windows/desktop/api/XAPO/nn-xapo-ixapo) и класс [**кксапобасе**](/windows/desktop/api/XAPOBase/nl-xapobase-cxapobase) для создания новых типов ксапо. Интерфейс **иксапо** содержит все методы, которые должны быть реализованы для создания нового ксапо. Класс **кксапобасе** предоставляет базовую реализацию интерфейса **иксапо** . **Кксапобасе** реализует все методы интерфейса **иксапо** , за исключением метода [**иксапо::P шаблоны**](/windows/win32/api/xapo/nf-xapo-ixapo-process) , который уникален для каждого ксапо.

Пример создания нового КСАПО см. [в разделе как создать ксапо](how-to--create-an-xapo.md).

Пример создания КСАПО, который принимает параметры времени выполнения, см. в разделе Пошаговое [руководство. Добавление поддержки параметров времени выполнения в ксапо](how-to--add-run-time-parameter-support-to-an-xapo.md).

## <a name="xapos-and-com"></a>Ксапос и COM

Ксапос реализуют интерфейс **IUnknown** . Интерфейсы [**иксапо**](/windows/desktop/api/XAPO/nn-xapo-ixapo) и [**иксапопараметерс**](/windows/desktop/api/XAPO/nn-xapo-ixapoparameters) включают в себя три метода **IUnknown** : **QueryInterface**, **AddRef** и **Release**. [**Кксапобасе**](/windows/desktop/api/XAPOBase/nl-xapobase-cxapobase) предоставляет реализации всех трех методов IUnknown. Новый экземпляр **кксапобасе** будет иметь счетчик ссылок, равный 1. Он будет уничтожен, когда счетчик ссылок станет равным 0. Реализации **иксапо** и **иксапопараметерс** должны следовать той же схеме, чтобы обеспечить их правильное управление при использовании с XAudio2.

Экземпляры КСАПО передаются в XAudio2 в качестве интерфейсов **IUnknown** . XAudio2 использует **QueryInterface** для получения интерфейса [**иксапо**](/windows/desktop/api/XAPO/nn-xapo-ixapo) и для обнаружения того, реализует ли ксапо интерфейс [**иксапопараметерс**](/windows/desktop/api/XAPO/nn-xapo-ixapoparameters) . Реализации **иксапо** должны принимать запросы для **\_ \_ ууидоф (иксапо)**. Если **иксапопараметерс** реализован, он также должен принимать запросы для **\_ \_ ууидоф (иксапопараметерс)**.

## <a name="using-an-xapo-in-xaudio2"></a>Использование КСАПО в XAudio2

Ксапос используются в XAudio2, присоединяя их к голосовам. У каждого голоса XAudio2 есть цепочка эффектов, содержащая ноль или более звуковых эффектов. Звуковые данные, отправляемые на голос, передаются по каждому результату в цепочке перед отправкой на выходные данные голосового ввода. Данные передаются из голоса в каждый результат с помощью параметра *пинпутпроцесспараметерс* метода [**иксапо::P шаблоны**](/windows/win32/api/xapo/nf-xapo-ixapo-process) . Затем он возвращается в речь с помощью параметра *паутпутпроцесспараметерс* . Голосовое действие принимает выходные данные каждого эффекта и передает его в следующий эффект в цепочке, пока в цепочке не останутся никакие эффекты.

Дополнительные сведения о цепочках эффектов XAudio2 см. в разделе [XAudio2 Audio Effects](xaudio2-audio-effects.md).

Пример использования КСАПО в XAudio2 см. в разделе [как использовать ксапо в XAudio2](how-to--use-an-xapo-in-xaudio2.md).

## <a name="effect-libraries"></a>Библиотеки эффектов

Библиотека эффектов КСАПО содержит несколько Ксапос и распространенный метод их создания. Сведения о КСАПОФКС см. в [обзоре ксапофкс](xapofx-overview.md) . Кроме того, XAudio2 имеет встроенные эффекты переглагола и счетчика громкости. Дополнительные сведения о встроенных эффектах XAudio2 см. в разделе [XAudio2 Audio Effects](xaudio2-audio-effects.md) .

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Звуковые эффекты](audio-effects.md)
</dt> <dt>

[Звуковые эффекты в XAudio2](xaudio2-audio-effects.md)
</dt> </dl>

 

 
