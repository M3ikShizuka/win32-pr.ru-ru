---
title: Windows Обзорная платформа для расширенной растеризации (ДЕФОРМАЦИЯ)
description: в этой статье описывается Windows расширенная платформа растрирования (деформация) и приведенные ниже аспекты деформации.
ms.assetid: C40A96EB-64AA-46EB-85A9-7C996ABC8BFE
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bab76fd68985069e6114cd7bbb0901eeba5d911eba574332b1dd2008f0375a5d
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119745994"
---
# <a name="windows-advanced-rasterization-platform-warp-guide"></a>Windows Обзорная платформа для расширенной растеризации (ДЕФОРМАЦИЯ)

в этой статье описывается Windows расширенная платформа растрирования (деформация) и приведенные ниже аспекты деформации.

-   [Что такое ДЕФОРМАЦИЯ?](#what-is-warp)
-   [Преимущества деформации](#warp-benefits)
    -   [Устранение необходимости в пользовательских средствах программной прорисовки](#removing-the-need-for-custom-software-rasterizers)
    -   [Включение максимальной производительности графического оборудования](#enabling-maximum-performance-from-graphics-hardware)
    -   [Включение отрисовки при недоступности аппаратного обеспечения Direct3D](#enabling-rendering-when-direct3d-hardware-is-not-available)
    -   [Использование существующих ресурсов для отрисовки программного обеспечения](#leveraging-existing-resources-for-software-rendering)
    -   [Включение сценариев, не требующих графического оборудования](#enabling-scenarios-that-do-not-require-graphics-hardware)
    -   [Завершение работы с графической платформой DirectX](#completing-the-directx-graphics-platform)
-   [Возможности и требования к деформации](#warp-capabilities-and-requirements)
-   [Использование деформации](#how-to-use-warp)
-   [Типы рекомендуемых приложений для деформации](#recommended-application-types-for-warp)
    -   [Нелегальные игры](#casual-games)
    -   [Существующие приложения, не являющиеся играми](#existing-non-gaming-applications)
    -   [Игры для расширенной визуализации](#advanced-rendering-games)
    -   [Другие приложения](#other-applications)
-   [Деформацию архитектуры и производительности](#warp-architecture-and-performance)
-   [Согласование ИСКРИВЛЕНия](#warp-conformance)

## <a name="what-is-warp"></a>Что такое ДЕФОРМАЦИЯ?

ДЕФОРМАЦИЯ — это высокоскоростной, полностью согласованная программа программной прорисовки. Это компонент графической технологии DirectX, который появился в среде выполнения Direct3D 11. среда выполнения Direct3D 11 устанавливается на Windows 7, Windows Server 2008 R2 и Windows Vista с \[ \] обновлением KB971644. Windows 8, Windows 10, Windows Server 2012 & выше и Windows RT включают в себя среду выполнения Direct3D 11,1, которая имеет обновленную версию деформации. Windows 10 Fall Creators Update (1709) включает версию деформации, поддерживающую среды выполнения direct3d 11 и direct3d 12.

## <a name="warp-benefits"></a>Преимущества деформации

ДЕФОРМАЦИЯ предоставляет следующие преимущества:

-   [Устранение необходимости в пользовательских средствах программной прорисовки](#removing-the-need-for-custom-software-rasterizers)
-   [Включение максимальной производительности графического оборудования](#enabling-maximum-performance-from-graphics-hardware)
-   [Включение отрисовки при недоступности аппаратного обеспечения Direct3D](#enabling-rendering-when-direct3d-hardware-is-not-available)
-   [Использование существующих ресурсов для отрисовки программного обеспечения](#leveraging-existing-resources-for-software-rendering)
-   [Включение сценариев, не требующих графического оборудования](#enabling-scenarios-that-do-not-require-graphics-hardware)
-   [Завершение работы с графической платформой DirectX](#completing-the-directx-graphics-platform)

### <a name="removing-the-need-for-custom-software-rasterizers"></a>Устранение необходимости в пользовательских средствах программной прорисовки

Деформацию упрощает разработку, избавляя от необходимости создавать специализированное программное средство, а также настраивать его для приложения вместо настройки оборудования. Предоставляя единое средство программной прорисовки общего назначения, вам больше не нужно писать алгоритмы рендеринга изображений несколькими способами для работы на оборудовании или программном обеспечении с различными функциями и возможностями. Вы по-прежнему можете реализовать алгоритмы несколькими способами для достижения лучшей производительности или масштабирования. Однако нет необходимости изменять архитектуру API или отрисовку, которая используется для реализации этих алгоритмов. Вместо этого вы можете сосредоточиться на создании отличного приложения Direct3D 10 или более поздней версии, которое будет выглядеть одинаково и эффективно работать с оборудованием или программным обеспечением.

### <a name="enabling-maximum-performance-from-graphics-hardware"></a>Включение максимальной производительности графического оборудования

Если приложение настроено для эффективного выполнения на оборудовании, оно будет работать эффективно и для деформации. Обратное также имеет значение true; любое приложение, настроенное для корректной работы на деформации, будет хорошо работать на оборудовании. Приложения, использующие Direct3D 10 и более поздние версии, не могут эффективно масштабироваться на различных аппаратных устройствах. ДЕФОРМАЦИЯ имеет аналогичные профили производительности для оборудования, поэтому настройка приложения для больших пакетов, минимизация изменений состояния, удаление синхронизации точек или блокировок приведет к повышению производительности оборудования и деформации.

### <a name="enabling-rendering-when-direct3d-hardware-is-not-available"></a>Включение отрисовки при недоступности аппаратного обеспечения Direct3D

ДЕФОРМАЦИЯ обеспечивает быструю визуализацию в различных ситуациях, когда аппаратные реализации нежелательны или недоступны, в том числе:

-   Если у пользователя нет оборудования с поддержкой Direct3D
-   Когда приложение запускается как служба или в серверной среде
-   Когда приложению требуется зарезервировать аппаратные ресурсы Direct3D для других целей
-   Если видеоадаптер не установлен
-   Если видеодрайвер недоступен или работает неправильно
-   Если видеоадаптер не хватает памяти, зависает или занимает слишком много системных ресурсов для инициализации

### <a name="leveraging-existing-resources-for-software-rendering"></a>Использование существующих ресурсов для отрисовки программного обеспечения

Существует огромное сообщество, многие книги, веб-сайты, пакеты SDK, примеры, технические документы, списки рассылки и другие ресурсы, которые помогут вам воспользоваться преимуществами визуализации изображений на основе шейдеров Direct3D 10 и более поздних версий. С помощью деформации в качестве отката программного обеспечения можно использовать существующие знания о оборудовании для повышения производительности приложения при его запуске с помощью оборудования или программного обеспечения. Кроме того, многие великолепные средства от поставщиков графических карт и пакета DirectX SDK могут помочь в проектировании, сборке, разработке, отладке и анализе проблем с производительностью графических приложений. Эти средства и знания теперь могут помочь в разработке приложений, ориентированных на оборудование и программное обеспечение при использовании деформации.

### <a name="enabling-scenarios-that-do-not-require-graphics-hardware"></a>Включение сценариев, не требующих графического оборудования

Различные алгоритмы и приложения (алгоритмы обработки изображений, печать, удаленное взаимодействие, виртуальные ПК и другие эмуляторы, Высококачественная визуализация шрифтов, диаграммы, графы и т. д.) обычно оптимизированы для ЦП, так как они не зависят от оборудования. С помощью деформации можно использовать одну архитектуру, которая запускает эти алгоритмы и приложения и может работать полностью в программном обеспечении. Если же аппаратное ускорение доступно, его можно использовать.

### <a name="completing-the-directx-graphics-platform"></a>Завершение работы с графической платформой DirectX

ДЕФОРМАЦИЯ позволяет получить доступ ко всем графическим функциям Direct3D 10 и более поздних версий даже на компьютерах без Direct3D 10 и более поздних графических устройств. В Direct3D 10 были удалены биты возможностей (CAP); то есть вам больше не нужно проверять, доступны ли графические возможности из графического оборудования, так как Direct3D 10 и более поздние версии гарантируют эту доступность. Теперь вы можете использовать все функции широкого спектра видеоадаптеров, зная, что их приложение будет вести себя и выглядеть одинаково везде. Производительность этих приложений можно масштабировать, просто отключив дорогостоящие графические функции на младших видеоадаптерах или добавив их к меньшим целям.

## <a name="warp-capabilities-and-requirements"></a>Возможности и требования к деформации

ДЕФОРМАЦИЯ полностью поддерживает все функции Direct3D 10 и 10,1. Например, ДЕФОРМАЦИЯ поддерживает следующие наиболее важные функции:

-   Все требования к точности спецификации Direct3D 10 и 10,1
-   Direct3D 11 при использовании с уровнями компонентов 9 \_ 1, 9 \_ 2, 9 \_ 3, 10 \_ 0 и 10 \_ 1 (Дополнительные сведения об уровнях компонентов см. в разделе [**\_ \_ уровень компонента D3D**](/windows/desktop/api/d3dcommon/ne-d3dcommon-d3d_feature_level)).
-   Все необязательные форматы текстуры, такие как многопримерные целевые объекты рендеринга и выборка из поверхностей с плавающей запятой
-   Высококачественная визуализация с высоким качеством до 8X с многовыборочным сглаживанием (MSAA)
-   Анизотропная фильтрация
-   32-разрядные и 64-разрядные приложения и большие адреса, поддерживающие 32-разрядные приложения

при установке [обновления платформы для Windows 7](https://support.microsoft.com/kb/2670838) на Windows 7 с пакетом обновления 1 (sp1) или Windows Server 2008 R2 с пакетом обновления 1 (sp1) эта операционная система включает среду выполнения direct3d 11,1 и версию средства деформации, поддерживающую direct3d 11. x, при использовании с [уровнями компонентов](/windows/desktop/direct3d11/overviews-direct3d-11-devices-downlevel-intro) 9 \_ 1, 9 \_ 2, 9 \_ 3, 10 \_ 0, 10 \_ 1 и 11 \_ 0.

Windows 8, Windows 10, Windows Server 2012 & выше и Windows RT включают в себя среду выполнения Direct3D 11,1 и новую версию деформации. Эта версия поддерживает Direct3D 11. x при использовании с [уровнями функций](/windows/desktop/direct3d11/overviews-direct3d-11-devices-downlevel-intro) 9 \_ 1, 9 \_ 2, 9 \_ 3, 10 \_ 0, 10 \_ 1, 11 \_ 0 и 11 \_ 1.

Windows 10 Fall Creators Update (1709) включает новую версию функции деформация, поддерживающую уровни функций [Direct3D 12](../direct3d12/direct3d-12-graphics.md) 12 \_ 0 и 12 \_ 1. 

минимальные требования к компьютеру для деформации аналогичны требованиям для Windows Vista, в частности:

-   Минимальный ЦП с частотой 800 МГц
-   MMX, SSE или SSE2 не требуются
-   Минимум 512 МБ ОЗУ

## <a name="how-to-use-warp"></a>Использование деформации

Компоненты Direct3D 10, 10,1, 11 и 12 могут использовать дополнительный тип драйвера, который можно указать при создании устройства (например, при вызове функции [**D3D11CreateDevice**](/windows/desktop/api/d3d11/nf-d3d11-d3d11createdevice) ). Этот тип драйвера — [**D3D10ный тип \_ драйвера \_ \_**](/windows/desktop/api/d3d10misc/ne-d3d10misc-d3d10_driver_type) , деформация или [**\_ \_ тип \_ драйвера D3D**](/windows/desktop/api/d3dcommon/ne-d3dcommon-d3d_driver_type). При указании этого типа драйвера среда выполнения создает устройство деформации и не инициализирует аппаратное устройство.

Поскольку средство деформации использует тот же программный интерфейс для Direct3D, что и средство прорисовки ссылок, любое приложение Direct3D, которое может поддерживать выполнение с помощью средства программной прорисовки, может быть протестировано с помощью деформации. Чтобы использовать деформацию, переименуйте D3d10warp.dll в D3d10ref.dll и поместите его в ту же папку, что и пример или приложение. Затем при переключении на ссылку ref вы увидите отрисовку деформации.

Если вы переименуете ДЕФОРМАЦИЯ на D3d10ref.dll и разместит его в C: \\ Program Files (x86) \\ Microsoft DirectX SDK (Июнь 2010) \\ Samples \\ C++ \\ Direct3D \\ bin \\ x86, вы можете запустить все примеры DirectX для деформации, нажав кнопку "переключить ссылку" в примере или запустив пример с/реф, указанным в командной строке.

## <a name="recommended-application-types-for-warp"></a>Типы рекомендуемых приложений для деформации

Все приложения, которые могут использовать Direct3D, могут использовать деформацию. Сюда относятся следующие типы приложений:

-   [Нелегальные игры](#casual-games)
-   [Существующие приложения, не являющиеся играми](#existing-non-gaming-applications)
-   [Игры для расширенной визуализации](#advanced-rendering-games)
-   [Другие приложения](#other-applications)

### <a name="casual-games"></a>Нелегальные игры

Игры обычно имеют простые требования к отрисовке. Однако они также требуют использования впечатляющих визуальных эффектов, для которых может потребоваться аппаратное ускорение. большинство лучших для продажи названий игр для Windows являются имитациями или нелегальными играми, ни одна из которых не требует высокой производительности графики. Тем не менее, оба стиля игр значительно выигрывают от современной графики на основе шейдеров и возможности масштабирования на оборудовании.

### <a name="existing-non-gaming-applications"></a>Существующие приложения, не являющиеся играми

Большой объем графических приложений требует минимального количества ветвей кода на уровне подготовки к просмотру. ДЕФОРМАЦИЯ позволяет этим приложениям реализовать один путь к коду Direct3D, который может ориентироваться на большое количество конфигураций компьютеров.

### <a name="advanced-rendering-games"></a>Игры для расширенной визуализации

Разработчикам игр может потребоваться изолировать ошибки отрисовки графических карт или драйверов. Таким образом, все игры, даже очень ресурсоемкие игры, могут воспользоваться преимуществами для отображения содержимого с помощью деформации. С помощью деформации можно проверить, являются ли обнаруженные визуальные артефакты ошибками или проблемами оборудования или драйверов.

### <a name="other-applications"></a>Другие приложения

Целевые приложения для деформации также включают в себя те, которые могут в настоящее время не использовать Direct3D 10 или Direct3D 10,1. Эти целевые приложения включают в себя приложения, которые должны всегда работать на всех компьютерах, приложения для обработки изображений, которые не записывают ПРОЦЕССОРные и GPU-версии алгоритмов обработки изображений, алгоритмы обработки изображений, где скорость или использование GPU не являются критическими, например печать, Эмуляторы и виртуальные среды, отображающие расширенную трехмерную графику.

## <a name="warp-architecture-and-performance"></a>Деформацию архитектуры и производительности

ДЕФОРМАЦИЯ основывается на справочнике по базе кода средства программной прорисовки. Таким образом, при деформации используется один и тот же программный интерфейс для Direct3D 10 и более поздних версий и DXGI. деформация включается в Windows 7 в D3d10warp.dll, расположенном в папках Windows systems. На 64-разрядных компьютерах установлены две версии деформации, версия x86 и x64. Версия x64 может работать быстрее в определенных обстоятельствах, так как генератор кода, содержащийся в декодировании, может использовать дополнительные регистры, доступные при запуске 64-разрядных приложений.

ДЕФОРМАЦИЯ содержит следующие два высокоскоростных компилятора в режиме реального времени:

-   Высокоуровневый компилятор промежуточного языка, который преобразует байт-код HLSL и текущее состояние отрисовки в оптимизированный поток векторных команд для поэтапного шейдера Geometry (GS), вершинного шейдера (VS) и построителя текстуры (PS) конвейера.
-   Высокопроизводительный генератор кода с высоким уровнем производительности, который может принимать эти команды и создавать оптимизированный код сборки SSE2, SSE 4.1, x86, x64, ARM и arm64.

деформация использует пул потоков и сложное управление задачами и отслеживание зависимостей, представленные в Windows Vista, чтобы обеспечить эффективное распределение всех частей конвейера отрисовки в доступных ядрах цп.

ДЕФОРМАЦИЯ использует отложенную отрисовку. Это значит, что ДЕФОРМАЦИЯ может выполнять команды пакетной визуализации, чтобы растрирование возникала только при наличии достаточного объема данных для эффективного использования всех ресурсов ЦП. Работа в основном потоке приложения минимальна, чтобы позволить приложению отправлять команды как можно быстрее. Если приложение также является многопоточным и использует пул потоков, работа будет равномерно распределена между деформациюми и приложением.

Генератор кода деформации настроен для оптимального использования современной архитектуры ЦП. деформация выполняется на всех компьютерах, которые могут работать Windows Vista и более поздних операционных систем, даже если компьютер не поддерживает SSE. Однако ДЕФОРМАЦИЯ оптимизирована для компьютеров, поддерживающих SSE2. Он также содержит оптимизацию для конкретных архитектур процессоров AMD и Intel, а также поддержку расширений SSE 4,1.

Для выполнения деформации не требуется оборудование графики. Она может выполняться даже в тех случаях, когда оборудование недоступно или не может быть инициализировано.

Приложения и примеры, разработанные и созданные на основе Direct3D 10 и более поздних версий оборудования без каких бы то ни было знаний о деформации, скорее всего, будут хорошо работать с помощью деформации. Однако рекомендуется по возможности уменьшить параметры качества и разрешения, чтобы обеспечить возможность использования скоростей кадров. ДЕФОРМАЦИЯ можно использовать для разработки и настройки приложений, которые хорошо работают как на оборудовании, так и на программном обеспечении.

Поскольку ДЕФОРМАЦИЯ использует несколько ядер ЦП, она работает лучше на современных четырехъядерных процессорах. Деформацию также выполняется значительно быстрее на компьютерах с установленными расширениями SSE 4.1. корпорация майкрософт провела значительную настройку тестирования и производительности на компьютерах с восемью или более ядрами и sse 4.1, так как эти высокие компьютеры станут более распространенными в течение времени существования Windows 7 и более поздних операционных систем.

При выполнении деформации на ЦП он ограничивается по сравнению с графической картой несколькими способами. Скорость ЦП на передней стороне процессора обычно составляет около 10 ГБ/с. Видеоадаптеры, напротив, часто используют выделенную память, которая использует от 20 до 100 ГБ/с или больше пропускной способности графики. Графическое оборудование также имеет функции с фиксированными функциями, которые могут выполнять сложные и ресурсоемкие задачи, такие как фильтрация текстур, распаковка формата или преобразования, асинхронно с небольшими издержками или затратами на электроэнергию. Выполнение этих операций на типичном ЦП является дорогостоящим в плане потребления энергии и циклов производительности.

Типичные показатели производительности для компьютера с четырехъядерным процессором Intel Пенрин с тактовой частотой 3,0 ГГц показывают, что в некоторых случаях может более эффективныа высокопроизводительная Интегрированная графическая карта Direct3D 10 и более поздние графические процессоры с несколькими тестами. Низкоуровневое дискретное оборудование графики обычно составляет 4 – 5 раз быстрее, чем деформацию при выполнении этих тестов. Эти низкоуровневые интегрированные или дискретные GPU имеют минимальное использование ресурсов ЦП. Графические карты среднего и высокого размера работают значительно быстрее, чем деформацию для многих приложений, особенно если приложение может воспользоваться преимуществами параллелизма и пропускной способности памяти, предоставляемыми этими графическими картами.

ДЕФОРМАЦИЯ не является заменой для графического оборудования, особенно в том случае, если это не так удобно, как при низком уровне Direct3D 10 и на дискретном оборудовании. Задача деформации заключается в том, чтобы позволить приложениям ориентироваться на оборудование на уровне Direct3D 10 без значительного выбора путей кода или требований к тестированию независимо от того, работают ли они на оборудовании или в программном обеспечении.

В следующих двух таблицах показаны примеры данных деформации с различными процессорами и графическими картами.

В первой таблице показаны примерные данные с помощью Direct3D 10 Крисис, работающих на уровне 800x600 со всеми параметрами качества на самых низких уровнях:

| ЦП                         | Время   | Среднее число кадров в кадре | Минимальное число кадров/с | Минимальный кадр | Максимальное число кадров в кадре | Максимальный кадр |
|-----------------------------|--------|---------|---------|-----------|---------|-----------|
| Ядро i7 8 Core с тактовой частотой 3,0 ГГц     | 271,57 | 7.36    | 3,46    | 1966      | 15,01   | 995       |
| Пенрин 4 Core с тактовой частотой 3,0 ГГц      | 351,35 | 5,69    | 2.49    | 1967      | 10,95   | 980       |
| Пенрин 2 ядра с частотой 3,0 ГГц      | 573,98 | 3.48    | 1,35    | 1964      | 6,61    | 988       |
| Core 2 Duo с тактовой частотой 2,6 ГГц         | 707,19 | 2,83    | 0.81    | 1959      | 5.18    | 982       |
| Ядро 2 Duo с частотой 2,4 ГГц         | 763,25 | 2.62    | 0,76    | 1964      | 4,70    | 984       |
| Core 2 Duo с тактовой частотой 2,1 ГГц         | 908,87 | 2,20    | 0,64    | 1965      | 3,72    | 986       |
| Xeon 8 Core с тактовой частотой 2,0 ГГц        | 424,04 | 4,72    | 1,84    | 1967      | 9,56    | 988       |
| AMD FX74 4 Core с тактовой частотой 3,0 ГГц    | 583,12 | 3.43    | 1,41 %    | 1967      | 5,78    | 986       |
| Phenom 9550 4 Core с частотой 2,2 ГГц | 664,69 | 3,01    | 0,53    | 1959      | 5.46    | 987       |

Во второй таблице показаны примеры данных, выполняющих один и тот же тест на различных графических картах:

| Графическая карта         | Время   | Среднее число кадров в кадре | Минимальное число кадров/с | Минимальный кадр | Максимальное число кадров в кадре | Максимальный кадр |
|-----------------------|--------|---------|---------|-----------|---------|-----------|
| NVIDIA 8800 ГТС       | 23,58  | 84,80   | 60,78   | 1957      | 130,83  | 1022      |
| NVIDIA 8500 GT        | 47,63  | 41,99   | 25,67   | 1986      | 72,57   | 991       |
| NVIDIA Куадро 290     | 67,16  | 29,78   | 18,19   | 1969      | 49,87   | 1017      |
| NVIDIA 8400 GS        | 59,01  | 33,89   | 21,22   | 1962      | 51,82   | 1021      |
| ATI 3400              | 53,79  | 37,18   | 22,97   | 618       | 59,77   | 1021      |
| ATI 3200              | 67,19  | 29,77   | 18,91   | 1963      | 45,74   | 980       |
| ATI 2400 PRO          | 67,04  | 29,83   | 17,97   | 606       | 45,91   | 987       |
| Интегрированная Intel СОДЕРЖИМЫМ DX10 | 386,94 | 5.17    | 1.74    | 1974      | 16,22   | 995       |

## <a name="warp-conformance"></a>Согласование ИСКРИВЛЕНия

при деформации проверяются все стандартные Windows проверки соответствия WHQL для проверки аппаратных устройств Direct3D.

Технология ИСКРИВЛЕНия была протестирована на набор приложений Direct3D 10 и Direct3D 10,1, а для примеров пакетов SDK — с DirectX, NVIDIA и AMD.

деформацию использует средство отладки и анализа [PIX](https://msdn.microsoft.com/library/ee417062(v=VS.85).aspx) для Windows тестирования; Корпорация Майкрософт имеет обширную библиотеку однокадровых захватов приложений, которые используются для сравнения оборудования и деформации. Большая часть образов выглядит почти одинаково между оборудованием и деформациюю. Если иногда возникают небольшие различия, они находятся в пределах допустимого диапазона, определенного спецификацией Direct3D 10.