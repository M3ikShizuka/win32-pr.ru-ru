---
description: распознаватели, созданные для использования с Windows Vista и Windows XP Tablet PC Edition, используют набор структур, каждый из которых называется lattice, для передачи результатов распознавания в библиотеки платформы Tablet PC.
ms.assetid: 628ca677-31eb-47d9-bcc6-d7777f8aaf7c
title: Структура Lattice распознавателя
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bc5610d60428bd3259672f43e45efa59c25f78b7ddc5909c363610eaf08520e1
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118716031"
---
# <a name="recognizer-lattice-structure"></a>Структура Lattice распознавателя

распознаватели, созданные для использования с Windows Vista и Windows XP Tablet PC Edition, используют набор структур, каждый из которых называется lattice, для передачи результатов распознавания в библиотеки платформы Tablet PC. Платформа Tablet PC копирует информацию в этих структурах в объект [**иинкрекогнитионресулт**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionresult) , коллекцию [**Иинкрекогнитионалтернатес**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionalternates) и объект [**иинкрекогнитионалтернате**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionalternate) .

Указатель на Lattice должен возвращаться распознавателем, когда платформа вызывает функцию [**жетлаттицептр**](/windows/desktop/api/recapis/nf-recapis-getlatticeptr) для маркера [хрекоконтекст](hrecocontext-handle.md) .

В этом разделе подробно описывается структура Lattice. Общие сведения об распознавателях и связанных понятиях см. в разделе [о распознавании рукописного текста](about-handwriting-recognition.md).

## <a name="the-need-for-a-lattice"></a>Потребность в Lattice

Распознаватель может найти несколько способов разбить набор рукописных штрихов на сегменты распознавания. То, что распознаватель использует в качестве сегмента распознавания, зависит от типа распознавателя. Распознаватели английского языка обычно используют слова в качестве сегмента распознавания. Другие распознаватели могут использовать в качестве сегмента распознавания символы, фигуры или жесты. Гибкость структур Lattice обеспечивает логическое управление большим количеством результатов распознавания, которые можно комбинировать в сложных отношениях.

На внутреннем уровне распознаватели используют Lattice для хранения базовых единиц распознавания для определенного фрагмента рукописного ввода. Lattice также содержит оценку или уровень достоверности Объединенного результата. Кроме того, Lattice сохраняет сопоставление сегментов с исходными рукописными штрихами.

Структуры Lattice определены в файле заголовка rectypes. h. Структуры Lattice включают следующие структуры:

-   [**СОСТО \_ LATTICE**](/windows/win32/api/rectypes/ns-rectypes-reco_lattice)
-   [**СОСТО \_ LATTICE, \_ столбец**](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_column)
-   [**СОСТО \_ LATTICE, \_ элемент**](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_element)
-   [**\_Свойства LATTICE \_ состо**](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_properties)
-   [**СОСТО \_ LATTICE, \_ свойство**](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_property)

## <a name="lattice-components"></a>Компоненты Lattice

В следующих примерах используются штрихи для слова «вместе», как показано на следующем рисунке. В примерах сегменты оцениваются как одно или несколько слов. Числа представляют отдельные штрихи в вычисляемом сегменте. Обратите внимание, что каждый символ "t" содержит два штриха.

![штрихи для слова "вместе"](images/1d5fa9fb-6c38-49b8-8caa-2b6dcc1d5dec.gif)

Lattice состоит из одного или нескольких столбцов, по одному для каждого сегмента. Каждый столбец, в свою очередь, содержит один или несколько элементов. Элемент содержит дискретный альтернативный вариант распознавания. Дополнительные сведения о столбцах см. в разделе Структура [**\_ \_ столбцов состо LATTICE**](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_column) . Дополнительные сведения об элементах см. в разделе Структура [**\_ \_ элемента состо LATTICE**](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_element) .

Распознаватель может вернуть один сегмент при вычислении образца рукописного ввода, показанного в предыдущем примере. В этом случае Lattice содержит один столбец с одним элементом.

Более сложный пример представляет себя, когда распознаватель оценивает образец рукописного ввода и имеет несколько сегментов и несколько вариантов для каждого сегмента.

Количество вариантов распознавания может располагаться в шахматном порядке, даже для небольшого примера рукописного ввода. Например, «t o g e t h e r» может привести к следующим результатам:

-   "чтобы получить его" (плюс альтернативные варианты для каждого слова)
-   "для сбора" (плюс альтернативные варианты для каждого слова)
-   «поступил» (плюс альтернативные варианты для каждого слова)
-   "вместе" (плюс альтернативы для слова)

В этом случае распознаватель может создать следующую структуру Lattice.

![Структура Lattice для слова "вместе"](images/2496c3dd-8b08-4f86-9fe3-f118be49a8c8.gif)

> [!Note]  
> Каждый столбец использует одинаковый порядок штрихов, так как все они ссылаются на одну и ту же коллекцию [инкстрокес](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) .

 

 

 
