---
description: После сбора рукописных данных приложения могут управлять этими данными и передавать их на другие носители.
ms.assetid: 5a8c370e-79cb-47f0-a7b3-a631874ad757
title: Рукописные данные
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de73291269398ae42a47ee26897c8da9bac8abe7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104541311"
---
# <a name="ink-data"></a>Рукописные данные

После сбора рукописных данных приложения могут управлять этими данными и передавать их на другие носители. Действия по выбору, копированию, перемещению, сохранению, просмотру и изменению рукописного ввода выполняются на объекте [**рукописного ввода**](inkdisp-class.md) и содержащихся в нем элементах, например в коллекции [**штрихов**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) и объектах [**Stroke**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) .

> [!Note]  
> Используя Real-Timeное перо, приложения могут сохранять данные в собственном формате (например, сохранять штрихи).

 

## <a name="ink-strokes-and-packets"></a>Рукописный ввод, штрихи и пакеты

Объект [**рукописного ввода**](inkdisp-class.md) — это основной тип данных, который управляет, обрабатывает и сохраняет входные данные, собранные из объекта [**InkCollector**](inkcollector-class.md) . Объект **рукописного ввода** содержит один или несколько объектов [**обводки**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) , а также общие методы и свойства для управления и управления этими штрихами. Штрих определяется как набор данных, которые захватываются одним нажатием пера, пером и пером. Данные Stroke содержат коллекцию пакетов. Пакет — это набор данных, которые устройство планшета отправляет в каждой точке выборки. Эти данные содержат такие сведения, как координаты, Нажим пера, угол пера и что-то еще, что может быть передано оборудованием. Свойство [**паккетдескриптион**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkstrokedisp-get_packetdescription) объекта **Stroke** описывает пакеты, создаваемые [**планшетом**](/windows/desktop/api/msinkaut/nn-msinkaut-iinktablet) .

## <a name="strokes"></a>Strokes

Вы можете получить моментальный снимок штрихов в объекте [**рукописного ввода**](inkdisp-class.md) с помощью свойства [**Strokes**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkdisp-get_strokes) объекта **Ink** . Свойство **Strokes** представляет собой коллекцию ссылок на штрихи в объекте **рукописного ввода** во время считывания свойства **Strokes** . Если штрихи впоследствии добавляются в объект **рукописного ввода** или удаляются из него, ранее полученная коллекция [**росчерков**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) не обновляется. Кроме того, свойство **Strokes** является значением и, как и любое значение, выходит за пределы области, если оно не назначено переменной.

Чтобы свойство [**Strokes**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkdisp-get_strokes) было синхронизировано с объектом [**рукописного ввода**](inkdisp-class.md) , заключите его в обработчик событий для событий [**Строкесаддед**](inkstrokes-strokesadded.md) и [**строкесремовед**](inkstrokes-strokesremoved.md) в коллекции [**штрихов**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) . Обработчик должен получить новую копию свойства **Strokes** при срабатывании любого события. Следует избегать добавления обработчика событий в коллекцию **штрихов** , которая находится вне области действия до срабатывания события.

Обратите внимание, что в этом примере в `theAddedStrokesIDs` обработчике обновляется новая копия свойства Strokes `StrokesAdded_Event` .


```C++
public void StrokesAdded_Event(object sender, StrokesEventArgs e)
{
    int [] theAddedStrokesIDs = e.StrokeIds;
    theListBox.Items.Clear();
    foreach (int i in theAddedStrokesIDs)
    {
        theListBox.Items.Add("Added Stroke ID: " + i.ToString());
    }
}
```



## <a name="packetdescription-property"></a>Паккетдескриптион, свойство

Свойство [**паккетдескриптион**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkstrokedisp-get_packetdescription) объекта [**Ink**](inkdisp-class.md) определяет набор данных в каждом пакете, который приложение получает с устройства Tablet PC. Эти сведения обычно содержат координаты, но могут содержать гораздо более подробную информацию (в зависимости от возможностей планшетных ПК), таких как Нажим пера или угол пера. Устанавливая описания пакетов для объекта [**InkCollector**](inkcollector-class.md) или [**InkOverlay**](inkoverlay-class.md) перед сбором рукописных данных (с помощью свойства десиредпаккетдескриптион), вы получаете полный контроль над тем, какие свойства устройств планшетного ПК вы хотите получить.

## <a name="extended-properties"></a>Расширенные свойства

Расширенные свойства предоставляют механизм для присоединения определяемых приложением данных к [**рукописному вводу**](inkdisp-class.md) и другим объектам. Дополнительные сведения о расширенных свойствах см. в разделе Коллекция [**расширенных свойств**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkextendedproperties) .

## <a name="ink-rendering"></a>Отрисовка рукописного ввода

Объект модуля [**подготовки**](inkrenderer-class.md) отчетов отвечает за отрисовку [**рукописного ввода**](inkdisp-class.md). При наличии соответствующего контекста планшета объект модуля **подготовки** отчетов может сопоставлять координаты пространства рукописного ввода пикселям, применять преобразования представлений и отображать рукописные данные на экранах и принтерах. Методы [**Draw**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrenderer-draw) и [**дравстроке**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrenderer-drawstroke) являются основными методами отрисовки рукописного ввода. Дополнительные сведения о отображении рукописных данных в окне см. в разделе объект модуля **подготовки** отчетов.

## <a name="cusps"></a>куспс

Штрих обычно начинается, когда перо перемещается на поверхность рисования и заканчивается при порождении пера. В штрихе пиковые значения, углы и коренные изменения направления называются куспс. Конечные точки штриха также считаются куспс. Например, прописная буква «L» имеет три куспс, одну в середине, а по одной в конце.

При вводе штриха оно обычно сглажено и подготавливается к просмотру с помощью кривой Безье (или ломаной линии). Кривые Безье могут преобразовывать куспс в небольшие циклы. Например, Пиковая буква «i» может быть сглажена, что напоминает знак «e». Чтобы избежать этого, в Microsoft renders есть этап "pre-Безье", который обрабатывает куспс по-разному.

Куспс также можно использовать для разбиения объектов [**Stroke**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) на стирание единиц. Например, при выборе вертикальной стороны прописной буквы «L» может указываться стирание только этой стороны. Часть штриха для стирания должна быть частью двух куспс.

 

 
