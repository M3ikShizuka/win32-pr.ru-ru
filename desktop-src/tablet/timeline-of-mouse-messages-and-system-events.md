---
description: При выполнении данного действия системные события (с префиксом ISG \_ ) отправляются и принимаются в приложении практически мгновенно.
ms.assetid: deca6d17-fe2c-4130-88ca-d0605bcb6084
title: Временная шкала сообщений и системных событий мыши
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8aee3e6cb7882e1628fee0d2bc40f79ed1e29f55
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105712205"
---
# <a name="timeline-of-mouse-messages-and-system-events"></a>Временная шкала сообщений и системных событий мыши

При выполнении данного действия системные события (с префиксом ISG \_ ) отправляются и принимаются в приложении практически мгновенно. Сообщения мыши (с префиксом WM \_ ) отправляются при выполнении действия и принимаются приложением после того, как событие будет обработано службой обмена сообщениями Microsoft Windows. Кроме того, **курсордовн** и **курсоруп** — это события пера, полученные от оборудования пера. Они отправляются, когда перо планшета касается экрана и когда оно ликвидируется с экрана соответственно.

События пера и сообщения мыши не синхронизируются. Нет никакой гарантии, что соответствующие сообщения мыши и события пера будут выполняться в определенном порядке. На следующей диаграмме показана ожидаемая, но не всегда предсказуемая последовательность передаваемых событий системы и мыши. Обратите внимание на диаграмму, что события мыши откладываются при обнаружении событий системных жестов.

![Ожидаемая последовательность событий системы и мыши для ввода с помощью пера](images/ccdafa48-13c0-4af7-aec5-ed162be4bbe7.jpg)

## <a name="important-implementation-considerations"></a>Важные рекомендации по реализации

При разработке для сообщений и системных событий мыши учитывайте следующее.

-   События пера и сообщения мыши отправляются в приложение независимо от того, используется ли перо или мышь.
-   Если приложение прослушивает как перо, так и сообщения мыши, трудно спрогнозировать связь сообщений и, следовательно, поведение в конечном итоге. События пера и сообщения мыши не синхронизируются. Нет никакой гарантии, что соответствующие сообщения мыши и события пера (такие как WM \_ лбуттондовн и **ISG \_ TAP**, WM \_ лбуттондблклк и **ISG \_ дблтап**) будут выполняться в определенном порядке. Связь между этими сообщениями является сложной.
-   Не рекомендуется смешивать и совпасть события мыши и пера в одной и той же функции приложения. Например, функция приложения, которая реагирует на **курсордовн** и **MouseUp** , может работать не так, как ожидалось, или в будущих версиях пакета SDK для планшетных ПК.
-   Если при выполнении последовательности событий пользователь перетаскивает перо планшета до завершения последовательности, отправляемые события соответствуют перетаскиванию левой стороны. Например, при запуске перетаскивания отправляются **ISG \_ Drag** и WM \_ лбуттондовн. Когда перо в конечном итоге ликвидируется, отправляются **курсоруп** и WM \_ лбуттонуп. Событие системного жеста может не сработать немедленно, поскольку оно должно определять тип события.
-   Двойное касание пером планшета часто менее точное, чем двойной щелчок мышью. Это обусловлено выполнением двойного касания пером планшета. Поскольку пользователь должен поднять перо планшета для выполнения двойного касания, время между касаниями часто больше, чем соответствующее время между щелчками двойного щелчка. Кроме того, вполне вероятно, что два касания планшетного пера происходят в экранных координатах, которые больше, чем для двух щелчков мыши. Для этого Windows XP Tablet PC Edition имеет параметры для временного и пространственного расстояний между двумя касаниями двойного касания, которые отделены от параметров мыши для двойного щелчка. Эти параметры можно настроить с помощью параметров планшета и пера в панели управления.

Из-за этих соображений следует учитывать, что приложения должны прослушивать только один набор сообщений, а не оба. Если вы создаете приложение с поддержкой пера, Прослушайте его только в сообщениях системы и пера. Эти сообщения являются прогнозируемыми и хорошо работают с пером планшета. Если вы создаете приложение, которое не поддерживает перо, прослушивать только сообщения мыши.

 

 



