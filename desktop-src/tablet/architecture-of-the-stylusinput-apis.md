---
description: Интерфейсы API Стилусинпут позволяют взаимодействовать с потоком данных пера планшета. Для взаимодействия с потоком данных добавьте в приложение объект RealTimeStylus и добавьте подключаемые модули в объект RealTimeStylus.
ms.assetid: 88bab0ab-df9f-4813-9a9f-9a137813f0b4
title: Архитектура API-интерфейсов Стилусинпут
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 961d6e3e94d47054afb28948685fce5fe1cafe9cbb0fa2f36e5a2d8508f28b9b
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119093166"
---
# <a name="architecture-of-the-stylusinput-apis"></a>Архитектура API-интерфейсов Стилусинпут

Интерфейсы API Стилусинпут позволяют взаимодействовать с потоком данных пера планшета. Для взаимодействия с потоком данных добавьте в приложение объект [**RealTimeStylus**](realtimestylus-class.md) и добавьте подключаемые модули в объект **RealTimeStylus** .

В API-интерфейсах Стилусинпут предоставляются два подключаемых модуля. Объект [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) реализует интерфейс [**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) . Объект **DynamicRenderer** визуализирует рукописный ввод в режиме реального времени по мере его прорисовки. Объект [**GestureRecognizer**](gesturerecognizer-class.md) реализует интерфейсы **истилуссинкплугин** и [**истилусасинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) . Объект **GestureRecognizer** распознает жесты приложения.

## <a name="definitions"></a>Определения

Следующие термины используются в разделах, описывающих API-интерфейсы Стилусинпут:

Синхронный подключаемый модуль

Класс, реализующий интерфейс [**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) . Синхронные подключаемые модули обычно вызываются непосредственно объектом [**RealTimeStylus**](realtimestylus-class.md) .

Асинхронный подключаемый модуль

Класс, реализующий интерфейс [**истилусасинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) . Асинхронные подключаемые модули обычно вызываются в потоке пользовательского интерфейса приложения.

Синхронная коллекция подключаемых модулей

Коллекция [стилуссинкплугинколлектион](/previous-versions/ms824788(v=msdn.10)) , которая представляет собой упорядоченную коллекцию объектов [истилуссинкплугин](/previous-versions/ms824751(v=msdn.10)) . Синхронная коллекция подключаемых модулей обычно ссылается на коллекцию, назначенную свойству [синкплугинколлектион](/previous-versions/ms824833(v=msdn.10)) объекта [RealTimeStylus](/previous-versions/ms824830(v=msdn.10)) . В синхронную коллекцию подключаемых модулей могут быть добавлены только синхронные подключаемые модули.

Асинхронная коллекция подключаемых модулей

Коллекция [стилусасинкплугинколлектион](/previous-versions/ms824808(v=msdn.10)) , которая представляет собой упорядоченную коллекцию объектов [истилусасинкплугин](/previous-versions/ms824768(v=msdn.10)) . Асинхронная коллекция подключаемых модулей обычно ссылается на коллекцию, назначенную свойству [асинкплугинколлектион](/previous-versions/ms824831(v=msdn.10)) объекта [RealTimeStylus](/previous-versions/ms824830(v=msdn.10)) . В асинхронную коллекцию подключаемых модулей могут быть добавлены только асинхронные подключаемые модули.

## <a name="synchronous-and-asynchronous-plug-ins"></a>Синхронные и асинхронные подключаемые модули

Объект [**RealTimeStylus**](realtimestylus-class.md) предназначен для предоставления доступа к потоку данных из пера планшета в режиме реального времени. Создайте или используйте синхронные подключаемые модули для задач, которым требуется доступ к потоку данных в режиме реального времени и которые не требуют вычисления, например для фильтрации пакетов. Создайте или используйте асинхронные подключаемые модули для задач, которые не нуждаются в доступе к потоку данных в режиме реального времени, например для создания и сохранения штрихов в объекте [**инкдисп**](inkdisp-class.md) .

Некоторые задачи могут быть требовательными к вычислительным операциям, но они требуют доступа к потоку данных в режиме реального времени, например для распознавания жестов с несколькими штрихами. Для решения этих задач интерфейсы API Стилусинпут обеспечивают каскадную модель [**RealTimeStylus**](realtimestylus-class.md) , которая позволяет использовать два объекта **RealTimeStylus** , каждый из которых выполняется в собственном потоке. Дополнительные сведения о каскадной модели **RealTimeStylus** см. в статье [каскадная модель RealTimeStylus](the-cascaded-realtimestylus-model.md).

Дополнительные сведения об использовании и создании подключаемых модулей см. [в разделе Работа с интерфейсами API стилусинпут](working-with-the-stylusinput-apis.md).

## <a name="the-tablet-pen-data-stream"></a>Поток данных пера планшета

Объект [**RealTimeStylus**](realtimestylus-class.md) содержит две внутренние очереди, которые содержат данные пера планшета, очередь ввода и выходную очередь. Данные пера преобразуются в экземпляры классов в пространстве имен [Microsoft. стилусинпут. плугиндата](/previous-versions/ms823992(v=msdn.10)) . В следующем списке описано, как объект **RealTimeStylus** обрабатывает данные пера планшета.

Объект [**RealTimeStylus**](realtimestylus-class.md) сначала проверяет объекты подключаемых модулей данных во входной очереди, а затем из потока данных пера планшета.

Объект [**RealTimeStylus**](realtimestylus-class.md) отправляет один объект подключаемых данных в объекты в его синхронной коллекции подключаемых модулей. Каждый синхронный подключаемый модуль может добавлять данные в очередь ввода или вывода.

После отправки объекта данных подключаемого модуля всем членам коллекции синхронного подключаемого модуля объект данных подключаемого модуля помещается в очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) .

Затем объект [**RealTimeStylus**](realtimestylus-class.md) проверяет для обработки следующий объект данных подключаемого модуля.

Хотя очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) содержит данные, объект **RealTimeStylus** отправляет один объект подключаемых данных из своей очереди вывода в объекты в его асинхронной коллекции подключаемых модулей. Каждый асинхронный подключаемый модуль может добавлять данные в очередь ввода или вывода. Однако, поскольку асинхронные подключаемые модули выполняются в потоке пользовательского интерфейса, данные добавляются в очередь по отношению к текущим данным пера, обрабатываемым объектом **RealTimeStylus** , а не по отношению к данным, обрабатываемым асинхронным подключаемым модулем.

На следующей схеме показан поток данных пера планшета через объект [**RealTimeStylus**](realtimestylus-class.md) и коллекции подключаемых модулей.

![поток данных пера планшета через объект RealTimeStylus и коллекции подключаемых модулей](images/5a698bc9-833b-4b24-9fa2-70be0ca61032.gif)

На этой диаграмме круги с меткой "A" и "B" представляют данные пера планшета, которые уже добавлены в очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) и еще не были отправлены в асинхронную коллекцию подключаемых модулей. Круг с меткой "C" представляет данные пера планшета, обрабатываемые объектом **RealTimeStylus** в данный момент. Он отправляется в коллекцию синхронных подключаемых модулей и помещается в очередь вывода. Пустой кружок представляет позицию в очереди вывода, в которой добавляются будущие данные пера планшета.

Дополнительные сведения о том, как конкретные данные добавляются в очередь и обрабатываются, см. [в разделе данные подключаемого модуля и класс RealTimeStylus](plug-in-data-and-the-realtimestylus-class.md).

## <a name="the-stylusinput-apis"></a>API-интерфейсы Стилусинпут

Интерфейсы API Стилусинпут в основном находятся в пространствах имен [Microsoft. стилусинпут](/previous-versions/ms824750(v=msdn.10)) и [Microsoft. стилусинпут. плугиндата](/previous-versions/ms823992(v=msdn.10)) . Однако API-интерфейсы Стилусинпут также ссылаются на некоторые классы в пространстве имен [Microsoft. Ink](/previous-versions/ms826516(v=msdn.10)) , такие как класс [планшета](/previous-versions/ms827783(v=msdn.10)) , коллекция [Таблетпропертидескриптионколлектион](/previous-versions/ms827760(v=msdn.10)) и перечисления [ApplicationGesture](/previous-versions/ms827547(v=msdn.10)) и [системжестуре](/previous-versions/ms827134(v=msdn.10)) .

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85))
</dt> <dt>

[**GestureRecognizer**](gesturerecognizer-class.md)
</dt> <dt>

[**Каскад**](realtimestylus-class.md)
</dt> <dt>

[**истилусасинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin)
</dt> <dt>

[**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin)
</dt> <dt>

[Работа с API-интерфейсами Стилусинпут](working-with-the-stylusinput-apis.md)
</dt> <dt>

[Модель каскадного RealTimeStylus](the-cascaded-realtimestylus-model.md)
</dt> </dl>

 

 
