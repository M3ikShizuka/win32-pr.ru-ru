---
description: В этом примере на языке C \# бумажная форма была проверена как PNG-файл и задается в качестве фонового изображения во время выполнения для элемента управления InkPicture. В примере используется окно сообщения для вывода результатов распознавания рукописного текста.
ms.assetid: fc9a39c2-9e4b-4d22-a118-3d24544897dd
title: Образец печатной формы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8493384cecdfdbf0186692d52642307f720502f4b953724f444df400cc83c96a
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119934704"
---
# <a name="scanned-paper-form-sample"></a>Образец печатной формы

В этом примере на языке C \# бумажная форма была проверена как PNG-файл и задается в качестве фонового изображения во время выполнения для элемента управления [InkPicture](/previous-versions/aa514604(v=msdn.10)) . В примере используется окно сообщения для вывода результатов распознавания рукописного текста.

Пример включает файл язык XML (XML) Formdata.xml. XML-файл содержит имя файла PNG. Он также содержит `FieldInfo` элементы, определяющие прямоугольные области в форме, где пользователь может вводить рукописный ввод. Сведения в `FieldInfo` элементе показаны в следующем примере:


```C++
    <FieldInfo>
        <Name>first name</Name>
        <Left>88</Left>
        <Top>65</Top>
        <Right>332</Right>
        <Bottom>94</Bottom>
    </FieldInfo>
```



Левый, верхний, правый и нижний элементы являются определениями координат пикселей для каждого поля.

В примере инициализируется новый [набор](/dotnet/api/system.data.dataset?view=netcore-3.1) данных с данными, содержащимися в Formdata.xml:


```C++
    formData = new DataSet("FormData");
    formData.ReadXml("formdata.xml"); 
```



Изображение формы, указанное в Formdata.xml, загружается как фон элемента управления [InkPicture](/previous-versions/aa514604(v=msdn.10)) :


```C++
    inkPicture1.BackgroundImage = 
        System.Drawing.Image.FromFile(
        (string) formData.Tables["FormData"].Rows[0]["Image"]);
```



Затем включается сбор рукописных данных для элемента управления [InkPicture](/previous-versions/aa514604(v=msdn.10)) :


```C++
    inkPicture1.InkEnabled = true;
```



## <a name="menu-event-handlers"></a>Обработчики событий меню

Приложение содержит обработчики событий Click для всех меню, отображаемых в верхней части формы.

### <a name="recognize-menu-item"></a>Распознавать пункт меню

Обработчик события нажатия кнопки «распознать» отключает сбор рукописных данных для элемента управления и проверяет распознаватель рукописного ввода. Если распознаватель не установлен, отображается диалоговое окно. Пользователь должен щелкнуть пункт меню рукописного ввода или пера, чтобы снова включить элемент управления для рукописного ввода.

Если распознаватель установлен, `Recognize` функция извлекает XML-данные, указывающие координаты пикселей для каждого поля формы. Координаты преобразуются в координаты пространства рукописного ввода, а прямоугольник определяется для каждого поля формы. После определения прямоугольников функция находит штрихи, пересекающие и находящиеся внутри каждого прямоугольника. Наконец, он выполняет распознавание рукописного ввода и отображает результаты в окне сообщения.

### <a name="ink-menu-item"></a>Пункт меню рукописного ввода

Обработчик событий Click в меню рукописного ввода активирует элемент управления [InkPicture](/previous-versions/aa514604(v=msdn.10)) .

### <a name="pen-menu-item"></a>Пункт меню "перо"

Обработчик событий щелчка мыши в меню пера выполняет следующие задачи:

-   Отключает сбор рукописных данных для элемента управления [InkPicture](/previous-versions/aa514604(v=msdn.10)) (который необходим перед изменением свойства [EditingMode](/previous-versions/ms582189(v=vs.100)) ).
-   Задает свойство [EditingMode](/previous-versions/ms582189(v=vs.100)) для получения рукописных данных.
-   Повторно включает сбор рукописных данных для элемента управления [InkPicture](/previous-versions/aa514604(v=msdn.10)) и переключает меню пера, выбора и стирания, чтобы указать активный режим.

### <a name="edit-menu-item"></a>Изменить пункт меню

Обработчик событий нажатия кнопки «Правка» аналогичен обработчику событий меню «перо». Она выполняет следующие задачи:

-   Отключает сбор рукописных данных.
-   Устанавливает свойство [EditingMode](/previous-versions/ms582189(v=vs.100)) в значение **SELECT**, которое позволяет пользователю выполнять выделение рукописного ввода.
-   Повторно включает сбор рукописных данных и переключает меню пера, правки и стирания, чтобы указать активный режим.

### <a name="eraser-menu-item"></a>Пункт меню "Ластик"

При нажатии кнопки «обработчик событий» в меню резинки задается элемент управления [InkPicture](/previous-versions/aa514604(v=msdn.10)) [EditingMode](/previous-versions/ms582189(v=vs.100)) для **удаления**, что позволяет пользователю стереть рукописный ввод. Он также переключает пункты меню "перо", "Изменить" и "Ластик".

### <a name="clear-menu-item"></a>Очистить пункт меню

Обработчик событий нажатия кнопки Clear меню удаляет текущую коллекцию [штрихов](/previous-versions/ms552701(v=vs.100)) для элемента управления [InkPicture](/previous-versions/aa514604(v=msdn.10)) , тем самым удаляя все рукописные данные в форме.

## <a name="closing-the-form"></a>Закрытие формы

в коде, созданном конструктором форм Windows, элемент управления [InkPicture](/previous-versions/aa514604(v=msdn.10)) добавляется в список компонентов формы при инициализации формы. При закрытии формы элемент управления InkPicture удаляется, а также другие компоненты формы с помощью метода [Dispose](/dotnet/api/system.windows.forms.form.dispose?view=netcore-3.1) формы.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Элемент управления InkEdit](inkedit-control.md)
</dt> <dt>

[Элемент управления InkPicture](inkpicture-control.md)
</dt> </dl>

 

 
