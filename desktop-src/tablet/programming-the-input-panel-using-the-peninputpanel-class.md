---
description: Описание использования объекта Пенинпутпанел для программирования панели ввода планшетного ПК на уровне системы.
ms.assetid: f83c7709-86dc-4c64-ad17-2ad660eb57b7
title: Программирование панели ввода с помощью класса Пенинпутпанел
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 80e00d1cb10983255ab2e532aa08de6e9e6a0fb5
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127460213"
---
# <a name="programming-the-input-panel-using-the-peninputpanel-class"></a>Программирование панели ввода с помощью класса Пенинпутпанел

\[[**Пенинпутпанел**](peninputpanel-class.md) был заменен [Microsoft. Ink. TextInput](/previous-versions/ms581554(v=vs.100)). Дополнительные сведения см. в разделе [Программирование панели ввода текста](programming-the-text-input-panel.md).\]

Описание использования объекта [**пенинпутпанел**](peninputpanel-class.md) для программирования панели ввода планшетного ПК на уровне системы.

## <a name="input-panel-vs-the-peninputpanel-object"></a>Панель ввода и объект Пенинпутпанел

в Microsoft Windows XP Tablet pc Edition версии 1,0 панель ввода tablet pc на уровне системы предоставляет универсальный механизм для выполнения ввода текста на всех платформах Windows, но не предоставляет программный доступ. в Windows XP Tablet PC Edition Software Development Kit (SDK) версии 1,5 и более поздней объект [**пенинпутпанел**](peninputpanel-class.md) позволяет интегрировать средства ввода текста непосредственно в приложения и предоставлять уровень контроля, который ранее не был доступен. начиная с Windows XP Tablet PC Edition 2005, системная панель ввода была обновлена и включала встроенные функции ввода, предоставляемые объектом **пенинпутпанел** , и многое другое.

На следующем рисунке показана панель ввода, отображаемая на [примере образца Auto Claims](auto-claims-form-sample.md) .

![панель ввода, отображаемая в форме, используемой для утверждений автомобилей](images/36eaa36b-1b0c-4363-96fa-092f70663ffa.jpg)

панель ввода заменяет [**пенинпутпанел**](peninputpanel-class.md) , предоставляя те же функции ввода на месте для любого приложения, работающего в Windows XP Tablet PC Edition 2005 или более поздней версии, без необходимости дополнительного кода. Эта статья об использовании объекта **пенинпутпанел** предоставляется для обеспечения обратной совместимости. приложения, которые уже используют объект **пенинпутпанел** , будут работать одинаково, за исключением того, что панель ввода будет отображаться вместо **пенинпутпанел** при запуске приложения в Windows XP Tablet PC Edition 2005 или более поздней версии.

если вы разрабатываете новое приложение для планшетного пк и хотите иметь решение для ввода данных на месте, панель ввода обеспечивается автоматически на Windows XP Tablet PC Edition 2005 или более поздней версии. Создавать экземпляр объекта [**пенинпутпанел**](peninputpanel-class.md) не требуется.

## <a name="disabling-the-input-panel"></a>Отключение панели ввода

Возможны случаи, когда необходимо отключить панель ввода. Этого можно добиться двумя следующими способами. Это можно сделать программно или путем установки записи реестра, которая отключает панель ввода для всего приложения.

### <a name="disabling-input-panel-programmatically"></a>Отключение панели ввода программными средствами

Чтобы отключить панель ввода программным путем, создайте экземпляр [**пенинпутпанел**](peninputpanel-class.md) и задайте для его свойства [**автоотображения**](/windows/win32/api/peninputpanel/nf-peninputpanel-ipeninputpanel-get_autoshow) значение **false**.


```C++
using Microsoft.Ink;

// ...

private PenInputPanel theInputPanel;

// ...

private void Form1_Load(object sender, System.EventArgs e)
{
// Attach the Input Panel to a specific TextBox control.
theInputPanel = new PenInputPanel(textBox1);

// Disable the Input Panel for the TextBox.
theInputPanel.AutoShow = false;
}
```



Чтобы отключить панель ввода для нескольких элементов управления в одном приложении, создайте экземпляр объекта [**пенинпутпанел**](peninputpanel-class.md) для каждого элемента управления и присвойте свойству " [**Автопросмотр**](/windows/win32/api/peninputpanel/nf-peninputpanel-ipeninputpanel-get_autoshow)" **значение false** для каждого или создайте экземпляр одного **пенинпутпанел** и переместите его из элемента управления в элемент управления в качестве фокуса ввода. Дополнительные сведения об этих двух методах см. в [образце раздела пенинпутпанел](peninputpanel-sample.md) .

### <a name="disabling-input-panel-through-the-registry"></a>Отключение панели ввода в реестре

Можно задать параметр реестра, чтобы отключить панель ввода для всего приложения. Однако это также приведет к отключению для общих диалоговых окон, таких как диалоговое окно **открытия файла** , диалоговое окно **Печать** и диалоговое окно **Сохранение файла** . Это может сделать работу пользователя в приложении несовместимой с другими приложениями для планшетных ПК.

Если задать `DisableInPlace` для раздела реестра значение нуль, Пользовательский интерфейс панели ввода не будет отображаться в приложении. Раздел реестра необходимо разместить `DisableInPlace` по адресу `HKEY_LOCAL_MACHINE\Software\Microsoft\TabletTip\` . Затем добавьте новое значение реестра, используя полный путь к приложению, в котором необходимо отключить панель ввода. В следующем примере запись реестра отключает панель ввода в приложении с именем MyApp:

`[HKEY_LOCAL_MACHINE \SOFTWARE\Microsoft\WindowsNT\TabletTIP\DisableInPlace]``"C:\Program Files\My App\MyApp.exe"=dword:00000000`

Если вы по-прежнему видите проблему в приложении после отключения пользовательского интерфейса панели ввода, может потребоваться отключить базовую платформу, которая запрашивает ваше приложение на предмет расположения курсора. Например, панель ввода может предоставлять ошибку в коде отслеживания курсора приложения. Отключение запроса на отслеживание курсора также не повлечет за собой отображение пользовательского интерфейса панели ввода. Чтобы отключить платформу, присвойте `EnableCaretTracking` разделу реестра значение 0. Путь к этому разделу находится в разделе `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsNT\CurrentVersion\AppCompatFlags\CaretTracking\` .

> [!Note]  
> средства специальных возможностей и речевой технологии в Windows XP также используют эту платформу, поэтому отключение запроса также отключает эти функции в приложении.

 

## <a name="the-input-panel-and-web-pages"></a>Панель ввода и веб-страницы

Чтобы использовать API на веб-странице, он должен работать в среде с частичным доверием. Все члены класса [**пенинпутпанел**](peninputpanel-class.md) должны иметь полное доверие, за исключением следующих:

-   [Конструкторы пенинпутпанел](/previous-versions/dotnet/netframework-3.5/ms571341(v=vs.90)) (только управляемый код)
-   [Метод Dispose](/previous-versions/dotnet/netframework-3.5/ms571343(v=vs.90)) (только управляемый код)
-   [Свойство аттачедедитконтрол](/previous-versions/ms582239(v=vs.100)) (только управляемый код)
-   [**Свойство "Автоотображение"**](/windows/win32/api/peninputpanel/nf-peninputpanel-ipeninputpanel-get_autoshow)

Эти интерфейсы API работают в среде с частичным доверием, например на веб-странице, позволяя создавать экземпляры объекта [**пенинпутпанел**](peninputpanel-class.md) , подключать его к элементу управления и отключать панель ввода для этого элемента управления. Дополнительные сведения см. в разделе Программирование панели ввода с помощью класса Пенинпутпанел и [рукописного ввода в Интернете](ink-on-the-web.md).

## <a name="the-peninputpanel-object"></a>Объект Пенинпутпанел

В оставшейся части этого раздела описывается, как использовать объект [**пенинпутпанел**](peninputpanel-class.md) в приложениях с поддержкой планшетных ПК. В частности, этот раздел относится к объекту **пенинпутпанел** при обсуждении программного объекта, панели ввода пера при ссылке на элемент пользовательского интерфейса, а также панели ввода ПК (или панели ввода) при ссылке на глобальную панель ввода, обычно находящейся в боковой части экрана Tablet PC.

В следующих разделах описывается объект [**пенинпутпанел**](peninputpanel-class.md) и пользовательский интерфейс.

-   [Сведения о панели ввода](about-the-input-panel.md)
-   [Создание экземпляра класса Пенинпутпанел](instantiating-the-peninputpanel-class.md)
-   [Поддержка фактоид](factoid-support.md)
-   [инфраструктуры текстовых служб (TSF)](text-services-framework.md)
-   [Рекомендации](best-practices.md)

 

 
