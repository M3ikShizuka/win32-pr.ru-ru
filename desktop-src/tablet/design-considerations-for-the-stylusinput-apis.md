---
description: Общие сведения о проектировании приложения, использующего прикладные программные интерфейсы (API) Стилусинпут.
ms.assetid: cb68a6bb-dd38-4dfb-bbbb-b5d846e5aa0a
title: Рекомендации по проектированию для API Стилусинпут
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ff526d8e073f00156730d79ea2caf1a02c5e5af2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104348685"
---
# <a name="design-considerations-for-the-stylusinput-api"></a>Рекомендации по проектированию для API Стилусинпут

Ниже приведены рекомендации по проектированию для API Стилусинпут.

-   Можно обновить свойство [**виндовинпутректангле**](/windows/desktop/api/RTSCom/nf-rtscom-irealtimestylus-get_windowinputrectangle) объекта [**RealTimeStylus**](realtimestylus-class.md) и свойство [**клипректангле**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-get_cliprectangle) объекта [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) , пока перо не выключается. Это может быть полезно, если требуется динамическая область рисования во время сбора приложением рукописного ввода.
-   Чтобы оптимизировать повторное использование и обслуживание кода подключаемого модуля, подключаемые модули не должны выполнять вызовы напрямую в приложение, но должны использовать [**кустомстилусдата**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-customstylusdataadded) (объект [кустоместилусдата](/previous-versions/ms824747(v=msdn.10)) в управляемом коде) для взаимодействия с приложением.
-   Коллекции подключаемых модулей объекта [**RealTimeStylus**](realtimestylus-class.md) упорядочены. Относительное расположение подключаемых модулей в этих коллекциях может быть очень важным. Например, подключаемый модуль, изменяющий сведения о пакете, должен быть добавлен в синхронную коллекцию подключаемых модулей перед подключаемым модулем динамического рендеринга.
-   Возможность добавления пользовательских данных пера в поток данных пера планшета должна быть использована экономно. Используйте эту функцию, только если другой подключаемый модуль должен получить эти сведения как часть потока данных. Кроме того, не следует добавлять пользовательские данные пера в ответ на другие пользовательские данные пера, поступающие в подключаемый модуль, так как это может создать бесконечный цикл.
-   Коллекции подключаемых модулей можно изменить, пока включен объект [**RealTimeStylus**](realtimestylus-class.md) . Однако это может усложнить работу приложения в прогнозировании. Когда подключаемый модуль добавляется, пока включен объект **RealTimeStylus** , объект **RealTimeStylus** вызывает Microsoft. стилусинпут. истилуссинкплугин подключаемого модуля. Метод [**реалтиместилусенаблед**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusenabled) ( [Microsoft. стилусинпут. истилуссинкплугин. Реалтиместилусенаблед](/previous-versions/ms824758(v=msdn.10)) или метод [Microsoft. стилусинпут. IStylusAsyncPlugin. RealTimeStylusEnabled](/previous-versions/ms824775(v=msdn.10)) в управляемом коде). Когда подключаемый модуль удаляется, пока включен объект **RealTimeStylus** , объект **RealTimeStylus** вызывает метод [**Реалтиместилусдисаблед**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusdisabled) подключаемого модуля ( [Microsoft. Стилусинпут. Истилуссинкплугин. Реалтиместилусдисаблед](/previous-versions/ms824757(v=msdn.10)) или метод [Microsoft. стилусинпут. IStylusAsyncPlugin. RealTimeStylusDisabled](/previous-versions/ms824774(v=msdn.10)) в управляемом коде). Это позволяет подключаемому модулю поддерживать свое правильное состояние без проверки свойства [**Enabled**](/windows/desktop/api/RTSCom/nf-rtscom-irealtimestylus-get_enabled) объекта **RealTimeStylus** . При добавлении подключаемого модуля, когда включен объект **RealTimeStylus** , подключаемые данные, которые получает подключаемый модуль, могут не содержать достаточных сведений для адекватного определения контекста начальных данных. Например, добавленный подключаемый модуль может начать получать данные пакетов от пера, который является средним. Аналогично, когда подключаемый модуль удаляется во время включения объекта **RealTimeStylus** , данные подключаемого модуля, полученные подключаемым модулем, могут оказаться недостаточными для завершения обработки данных.
    > [!Note]  
    > Для общей стабильности можно сбросить внутреннее состояние подключаемого модуля при вызове метода [**реалтиместилусенаблед**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusenabled) или [**реалтиместилусдисаблед**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusdisabled) .

     

-   Объект [**RealTimeStylus**](realtimestylus-class.md) создает исключение, если подключаемый модуль изменяет коллекцию подключаемых модулей, к которой он присоединен. Это происходит только в том случае, если подключаемый модуль делает это, пока он вызывается объектом **RealTimeStylus** как членом этой коллекции.

 

 
