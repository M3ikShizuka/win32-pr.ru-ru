---
description: Этот пример построен на примере формы Auto Claims путем интеграции объекта Пенинпутпанел. Пример находится в \# каталоге C пипанел в папке автозаявок.
ms.assetid: 9a2c1565-fb24-4767-bfa5-0257129f4bd4
title: Пример Пенинпутпанел
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8c464be52fd08c6c461ba094428a1868fbb51fb328e1a3c88a2d0949a6ae581e
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119934744"
---
# <a name="peninputpanel-sample"></a>Пример Пенинпутпанел

Этот пример построен на примере формы Auto Claims путем интеграции объекта [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) . Пример находится в \# каталоге C пипанел в папке автозаявок.

> [!Note]  
> Для работы с этим примером требуется, чтобы система оснащена устройством пера. Если вы используете только мышь (или другое устройство, не поддерживающее интерфейс HID), [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) не отображается.

 

Дополнительные сведения о образце Auto Claims см. в разделе [образец формы Auto Claims](auto-claims-form-sample.md). Дополнительные сведения об объекте [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) см. в разделе [Программирование панели ввода с помощью класса пенинпутпанел](programming-the-input-panel-using-the-peninputpanel-class.md).

В примере форма "автоматические утверждения" содержит пять полей, в которые пользователю предлагается ввести сведения, относящиеся к утверждению: номер политики, название страхования, год, Марка и модель автомобиля. Объект [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) прикрепляется к каждому полю ввода, чтобы предоставить простые средства для ввода значений с помощью пера.

Существует два способа присоединения объекта [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) к полям ввода в форме. Первым методом является назначение отдельного экземпляра объекта каждому входному полю во время разработки. Второй — создание единственного экземпляра объекта, а затем присоединение этого экземпляра объекта во время выполнения к полю при получении фокуса. В этом образце демонстрируются обе методики.

Существуют компромиссы при принятии решения о том, какой метод использовать. Создание уникального экземпляра объекта для каждого поля формы требует немного больше памяти при загрузке формы. Однако он сохраняет необходимость в обработке событий фокуса для полей, чтобы назначить один экземпляр текущему полю во время выполнения.

Так как объект [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) поддерживается только на планшетном ПК, этот пример создает объекты пенинпутпанел в блоке обработки исключений.

## <a name="one-object-per-field"></a>Один объект на поле

В примере демонстрируется первый метод (один объект [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) для каждого поля) путем назначения полей ввода для номера политики ( `inkEdPolicyNumber` ) и имени страхования ( `inkEdName` ) уникального экземпляра объекта пенинпутпанел. Перегруженный конструктор для объекта Пенинпутпанел может принимать имя элемента управления вводом в качестве аргумента, тем самым связывая элементы управления. Следующие строки из обработчика событий [Load](/dotnet/api/system.windows.forms.form.load?view=netcore-3.1) формы показывают это:


```C++
pipPolicyNumber = new PenInputPanel(inkEdPolicyNumber);
pipName = new PenInputPanel(inkEdName);
```



## <a name="one-object-per-form"></a>Один объект на форму

Второй метод также показан в примере: единственный экземпляр объекта [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) , который `pipShared` является общим для полей "Year", "make" и "input Model". Общий объект создается с помощью конструктора по умолчанию.


```C++
pipShared = new PenInputPanel();
```



При использовании этого метода форма должна содержать только один экземпляр объекта [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) . Это экономит память, но необходимо добавить код, обрабатывающий событие при получении фокусом поля ввода. Если элемент управления, использующий общий экземпляр объекта Пенинпутпанел, получает фокус, установите для свойства [аттачедедитконтрол](/previous-versions/aa514050(v=msdn.10)) объекта пенинпутпанел значение этого элемента управления. В следующем коде показан обработчик событий для событий «год», «Марка» и «поле модели» `Enter` .


```C++
private void inkEdYear_Enter(object sender, System.EventArgs e)
{
    // Attach the shared PenInputPanel to the Year field
    pipShared.AttachedEditControl = inkEdYear;

    // set the NUMBER factoid to bias recognition for numbers
    pipShared.Factoid = "NUMBER";

    // Enable correction UI on the inkEdYear field
    pipShared.EnableTsf(true);
}

private void inkEdMake_Enter(object sender, System.EventArgs e)
{
    // Attach the shared PenInputPanel to the Make field
    pipShared.AttachedEditControl = inkEdMake;

    // reset the factoid to bias recognition for general text
    pipShared.Factoid = "DEFAULT";

    // Enable correction UI on the inkEdMake field
    pipShared.EnableTsf(true);
}
private void inkEdModel_Enter(object sender, System.EventArgs e)
{
    // Attach the shared PenInputPanel to the Model field
    pipShared.AttachedEditControl = inkEdModel;

    // reset the factoid to bias recognition for general text
    pipShared.Factoid = "DEFAULT";

    // Enable correction UI on the inkEdModel field
    pipShared.EnableTsf(true);
}
```



Не забудьте задать свойства, которые должны быть установлены при изменении фокуса на новый элемент управления. В предыдущих обработчиках событий, например, свойство [фактоид](/previous-versions/ms571978(v=vs.100)) задано соответствующим образом.

## <a name="usability-considerations"></a>Рекомендации по удобству использования

При использовании объекта [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) в приложении учитывайте следующие рекомендации по удобству использования.

### <a name="positioning-the-peninputpanel"></a>Размещение Пенинпутпанел

Поскольку поля располагаются вертикально на форме в этом примере, Пользовательский интерфейс [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) для каждого элемента управления вводом размещается справа от элемента управления вводом, чтобы упростить его использование. Это предотвращает появление Пенинпутпанел в следующем поле ввода, что упрощает выборку для следующего поля ввода.


```C++
pipShared.HorizontalOffset = 32;
pipPolicyNumber.HorizontalOffset = 32;
pipName.HorizontalOffset = 32;
```



### <a name="selecting-input-panel-to-display"></a>Выбор панели ввода для показа

Поскольку номера политик часто являются сочетаниями чисел, букв и других символов, они могут быть подвержены ошибкам распознавания. Таким образом, в примере для панели по умолчанию, отображаемой объектом [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) , задается клавиатура при присоединении к полю номера политики.


```C++
pipPolicyNumber.DefaultPanel = PanelType.Keyboard;
```



Поведение объекта [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) по умолчанию — использовать панель, выбранную последним пользователем.

### <a name="text-services-framework-correction-user-interface"></a>Пользовательский интерфейс исправления платформы текстовых служб

В этом примере все поля ввода являются элементами управления [InkEdit](/previous-versions/ms552265(v=vs.100)) . Это важно, поскольку элемент управления InkEdit имеет встроенную поддержку [платформы текстовых служб](../tsf/text-services-framework.md) (TSF) и поэтому может поддерживать пользовательский интерфейс исправления на месте для ввода данных, полученных от объекта [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) .

Значение по умолчанию для [енаблетсф](/previous-versions/ms569656(v=vs.100)) — **true**. Это приводит к тому, что объект [пенинпутпанел](/previous-versions/aa514041(v=msdn.10)) пытается запустить платформу текстовых служб (TSF) на присоединенном элементе управления. В случае успеха пользовательский интерфейс исправления отображается в элементе управления и обеспечивает доступ к альтернативам распознавания. Вызов этого метода с параметром **false** пытается завершить работу TSF на присоединенном элементе управления.

Элемент управления [InkEdit](/previous-versions/ms552265(v=vs.100)) уже предоставляет пользовательский интерфейс исправления, но в примере [енаблетсф](/previous-versions/ms569656(v=vs.100)) используется, чтобы разрешить [ПЕНИНПУТПАНЕЛ](/previous-versions/aa514041(v=msdn.10)) использовать контекст распознавания вставки TSF вместо функции [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) для отправки результатов распознавания рукописного текста в элемент управления. В результате текст можно вставить, даже если поле больше не находится в фокусе.


```C++
  pipName.EnableTsf(true);
  pipPolicyNumber.EnableTsf(true);
```



## <a name="closing-the-form"></a>Закрытие формы

в коде, созданном конструктором форм Windows, элементы управления [InkEdit](/previous-versions/ms552265(v=vs.100)) и [InkPicture](/previous-versions/aa514604(v=msdn.10)) добавляются в список компонентов формы при инициализации формы. При закрытии формы элементы управления InkEdit и InkPicture удаляются, а также другие компоненты формы методом [Dispose](/dotnet/api/system.windows.forms.form.dispose?view=netcore-3.1) формы. Метод Dispose формы также удаляет объекты [рукописного ввода](/previous-versions/aa515768(v=msdn.10)) , созданные для формы.

 

 
