---
description: Отправляется в окно с уменьшенным (значком).
ms.assetid: e4f0e638-f606-4745-888b-14a846c7fd37
title: Сообщение WM_QUERYDRAGICON (Winuser. h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: ed2c6040df06923e778eb717db4148bed233db4b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104345582"
---
# <a name="wm_querydragicon-message"></a>\_Сообщение КУЕРИДРАГИКОН WM

Отправляется в окно с уменьшенным (значком). Окно будет перенесено пользователем, но не имеет значка, определенного для его класса. Приложение может вернуть маркер к значку или курсору. Система отображает этот курсор или значок, пока пользователь перетаскивает значок.

Окно получает это сообщение через функцию [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)) .


```C++
#define WM_QUERYDRAGICON                0x0037
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*wParam* 
</dt> <dd>

Этот параметр не используется.

</dd> <dt>

*lParam* 
</dt> <dd>

Этот параметр не используется.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Тип: **lResult**

Приложение должно возвращать маркер курсора или значка, который система будет отображать, когда пользователь перетаскивает значок. Курсор или значок должен быть совместим с разрешением видеодрайвера. Если приложение возвращает **значение NULL**, система отображает курсор по умолчанию.

## <a name="remarks"></a>Комментарии

Когда пользователь перетаскивает значок окна без значка класса, система заменяет значок на курсор по умолчанию. Если приложению требуется, чтобы во время перетаскивания отображался другой курсор, он должен вернуть указатель или значок, совместимый с разрешением видеодрайвера. Если приложение возвращает маркер цветного курсора или значка, система преобразует курсор или значок в черный и белый. Приложение может вызвать функцию [**лоадкурсор**](/windows/win32/api/winuser/nf-winuser-loadcursora) или [**лоадикон**](/windows/win32/api/winuser/nf-winuser-loadicona) для загрузки курсора или значка из ресурсов в исполняемом файле (exe) и получения этого маркера.

Если процедура диалогового окна обрабатывает это сообщение, необходимо привести требуемое возвращаемое значение к **логическому** типу и вернуть значение напрямую. Значение **\_ мсгресулт DWL** , заданное функцией [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) , игнорируется.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|----------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                                               |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                                                     |
| Заголовок<br/>                   | <dl> <dt>Winuser. h (включение Windows. h)</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

**Ссылки**
</dt> <dt>

[**лоадкурсор**](/windows/win32/api/winuser/nf-winuser-loadcursora)
</dt> <dt>

[**лоадикон**](/windows/win32/api/winuser/nf-winuser-loadicona)
</dt> <dt>

**Зрения**
</dt> <dt>

[Windows](windows.md)
</dt> </dl>

 

 
