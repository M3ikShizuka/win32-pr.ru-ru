---
description: Копирует текст, соответствующий окну, в буфер, предоставленный вызывающим объектом.
ms.assetid: 117c3d6d-24cd-462f-bdb0-b65d8914273a
title: Сообщение WM_GETTEXT (Winuser. h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: e3e1bc6a8a77c51b3ab5b84f5cce700e65b180b357c932b4044a2b65cb49fc8e
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120089894"
---
# <a name="wm_gettext-message"></a>\_Сообщение WM gettext

Копирует текст, соответствующий окну, в буфер, предоставленный вызывающим объектом.


```C++
#define WM_GETTEXT                      0x000D
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*wParam* 
</dt> <dd>

Максимальное число копируемых символов, включая завершающий символ null.

Приложения ANSI могут уменьшить размер строки в буфере (до минимума половины значения параметра *wParam* ) из-за преобразования из ANSI в Юникод.

</dd> <dt>

*lParam* 
</dt> <dd>

Указатель на буфер, который должен получить текст.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Тип: **lResult**

Возвращаемое значение — это число скопированных символов, не включая завершающий нуль-символ.

## <a name="remarks"></a>Remarks

Функция [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) копирует текст, связанный с окном, в указанный буфер и возвращает число скопированных символов. Обратите внимание, что для статических элементов управления, не являющихся текстовыми, это позволяет получить текст, с которым был создан элемент управления, т. е. ИДЕНТИФИКАЦИОНный номер. Тем не менее, он предоставляет идентификатор нетекстового статического элемента управления, как он был создан изначально. Это значит, что если впоследствии вы использовали **STM- \_ сетимаже** для изменения его исходного идентификатора, он все равно будет возвращен.

Для элемента управления "поле ввода" копируемый текст является содержимым элемента управления "поле ввода". Для поля со списком текст — это содержимое части элемента управления Edit (или статического текста) поля со списком. Для кнопки текст — это имя кнопки. Для других окон текст — это заголовок окна. Чтобы скопировать текст элемента в поле со списком, приложение может использовать сообщение [**фунтовой нагрузки \_**](../controls/lb-gettext.md) .

Когда сообщение **WM \_ gettext** отправляется в статический элемент управления со стилем **\_ значка SS** , маркер значка будет возвращен в первых четырех байтах буфера, на которые указывает *lParam*. Это справедливо только в том случае, если для задания значка использовалось сообщение [**WM \_ SETTEXT**](wm-settext.md) .

**Расширенное редактирование:** Если размер копируемого текста превышает 64 КБ, используйте сообщение " [**\_ поток EM**](../controls/em-streamout.md) или [**EM \_ жетселтекст**](../controls/em-getseltext.md) ".

Отправка сообщения **WM \_ gettext** в статический элемент управления, не являющийся текстовым, например статический точечный рисунок или элемент управления "статический значок", не возвращает строковое значение. Вместо этого он возвращает ноль. кроме того, в ранних версиях Windows приложения могут отправить сообщение **WM \_ gettext** в статический элемент управления, не являющийся текстовым, для получения идентификатора элемента управления. Чтобы получить идентификатор элемента управления, приложения могут использовать [**жетвиндовлонг**](/windows/win32/api/winuser/nf-winuser-getwindowlonga) , передав **\_ идентификатор ГВЛ** в качестве значения индекса или [**жетвиндовлонгптр**](/windows/win32/api/winuser/nf-winuser-getwindowlongptra) с **помощью \_ идентификатора гвлп**.

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|-------------------------------------|----------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                                               |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                                                     |
| Заголовок<br/>                   | <dl> <dt>Winuser. h (включает Windows. h)</dt> </dl> |



## <a name="see-also"></a>См. также

<dl> <dt>

**Ссылки**
</dt> <dt>

[**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca)
</dt> <dt>

[**жетвиндовлонг**](/windows/win32/api/winuser/nf-winuser-getwindowlonga)
</dt> <dt>

[**жетвиндовлонгптр**](/windows/win32/api/winuser/nf-winuser-getwindowlongptra)
</dt> <dt>

[**жетвиндовтекст**](/windows/win32/api/winuser/nf-winuser-getwindowtexta)
</dt> <dt>

[**жетвиндовтекстленгс**](/windows/win32/api/winuser/nf-winuser-getwindowtextlengtha)
</dt> <dt>

[**WM \_ жеттекстленгс**](wm-gettextlength.md)
</dt> <dt>

[**WM \_ SETTEXT**](wm-settext.md)
</dt> <dt>

**Зрения**
</dt> <dt>

[Windows](windows.md)
</dt> <dt>

**Другие ресурсы**
</dt> <dt>

[**EM \_ жетселтекст**](../controls/em-getseltext.md)
</dt> <dt>

[**\_потоковая передача EM**](../controls/em-streamout.md)
</dt> <dt>

[**\_Балансировка нагрузки**](../controls/lb-gettext.md)
</dt> </dl>

 

 
