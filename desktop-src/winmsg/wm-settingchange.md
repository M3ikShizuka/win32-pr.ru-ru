---
description: Сообщение, которое отправляется всем окнам верхнего уровня, когда функция Системпараметерсинфо изменяет параметр на уровне системы или при изменении параметров политики.
ms.assetid: 77174e06-a25b-440a-9e9c-4fd5979c433c
title: Сообщение WM_SETTINGCHANGE (Winuser. h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 302f156da905263ed7f3d1d331d4dbb25af5b3e81d9df6136281c7dbc7b3914c
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119710044"
---
# <a name="wm_settingchange-message"></a>\_Сообщение СЕТТИНГЧАНЖЕ WM

Сообщение, которое отправляется всем окнам верхнего уровня, когда функция [**системпараметерсинфо**](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa) изменяет параметр на уровне системы или при изменении параметров политики.

Приложения должны отсылать **WM \_ сеттингчанже** всем окнам верхнего уровня при внесении изменений в системные параметры. (Это сообщение не может быть отправлено непосредственно в окно.) Чтобы отправить сообщение **WM \_ сеттингчанже** всем окнам верхнего уровня, используйте функцию [**функции sendmessagetimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta) с параметром *HWND* , имеющим значение **HWND \_ Broadcast**.

Окно получает это сообщение через функцию [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)) .


```C++
#define WM_WININICHANGE                 0x001A
#define WM_SETTINGCHANGE                WM_WININICHANGE
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*wParam* 
</dt> <dd>

Когда система отправляет это сообщение в результате вызова [**системпараметерсинфо**](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa) , параметр *wParam* является значением параметра *Уиактион* , передаваемого функции **системпараметерсинфо** . Список значений см. в разделе **системпараметерсинфо**.

Когда система отправляет это сообщение в результате изменения параметров политики, этот параметр указывает тип примененной политики. Это значение равно 1, если политика компьютера была применена, или нуль, если применена политика пользователя.

Если система отправляет это сообщение в результате изменения параметров языкового стандарта, этот параметр равен нулю.

Когда приложение отправляет это сообщение, этот параметр должен иметь **значение NULL**.

</dd> <dt>

*lParam* 
</dt> <dd>

Когда система отправляет это сообщение в результате вызова [**системпараметерсинфо**](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa) , *lParam* — это указатель на строку, которая указывает на область, содержащую измененный системный параметр. Этот параметр обычно не указывает, какой именно системный параметр изменился. (Обратите внимание, что некоторые приложения отправляют это сообщение с параметром *lParam* , имеющим значение **null**.) В общем случае при получении этого сообщения следует проверить и перезагрузить все параметры системного параметра, используемые приложением.

Эта строка может быть именем раздела реестра или именем раздела в файле Win.ini. Если строка является именем реестра, она обычно указывает только конечный узел в реестре, а не полный путь.

Когда система отправляет это сообщение в результате изменения параметров политики, этот параметр указывает на строку "Policy".

Когда система отправляет это сообщение в результате изменения параметров языкового стандарта, этот параметр указывает на строку "Intl".

Чтобы изменить переменные среды для системы или пользователя, передайте это сообщение с параметром *lParam* в строку "среда".

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Тип: **lResult**

При обработке этого сообщения возвращается нуль.

## <a name="remarks"></a>Remarks

Параметр *lParam* указывает, какая Метрика системы изменилась, например "конвертиблеслатемоде", если индикатор конвертиблеслатемоде был переключен, или "системдоккмоде", если был переключен закрепленный индикатор.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|----------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                                               |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                                                     |
| Заголовок<br/>                   | <dl> <dt>Winuser. h (включает Windows. h)</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[События политики](/previous-versions/windows/desktop/Policy/policy-events)
</dt> <dt>

[**Функции sendmessagetimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta)
</dt> <dt>

[**системпараметерсинфо**](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa)
</dt> </dl>

 

 
