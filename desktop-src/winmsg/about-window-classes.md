---
description: Каждый класс окна имеет связанную процедуру окна, совместно используемую всеми окнами того же класса. Процедура окна обрабатывает сообщения для всех окон этого класса и, следовательно, управляет их поведением и внешним видом.
ms.assetid: db79fd4b-6a15-4bf9-a0d9-5f6415f6c75f
title: О классах окон
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0fcb46d862bf5b9249bb4f13b111ac10c441c3e687dd3fb1784f355c40d14b72
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119932334"
---
# <a name="about-window-classes"></a>О классах окон

Каждый класс окна имеет связанную процедуру окна, совместно используемую всеми окнами того же класса. Процедура окна обрабатывает сообщения для всех окон этого класса и, следовательно, управляет их поведением и внешним видом. Дополнительные сведения см. в разделе [Процедуры окна](window-procedures.md).

Процесс должен зарегистрировать класс окна, прежде чем он сможет создать окно этого класса. Регистрация класса окна связывает процедуру окна, стили классов и другие атрибуты класса с именем класса. Когда процесс задает имя класса в функции [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) или [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) , система создает окно с процедурой окна, стилями и другими атрибутами, связанными с именем этого класса.

В этом разделе рассматриваются следующие темы.

-   [Типы классов окон](#types-of-window-classes)
    -   [Системные классы](#system-classes)
    -   [Глобальные классы приложений](#application-global-classes)
    -   [Локальные классы приложения](#application-local-classes)
-   [Как система находит класс окна](#how-the-system-locates-a-window-class)
-   [Регистрация класса окна](#registering-a-window-class)
-   [Элементы класса Window](#elements-of-a-window-class)
    -   [Имя класса](#class-name)
    -   [Адрес процедуры окна](#window-procedure-address)
    -   [Маркер экземпляра](#instance-handle)
    -   [Курсор класса](#class-cursor)
    -   [Значки классов](#class-icons)
    -   [Кисть фона класса](#class-background-brush)
    -   [Меню класса](#class-menu)
    -   [Стили класса](#class-styles)
    -   [Память дополнительного класса](#extra-class-memory)
    -   [Размер дополнительной памяти окна](#extra-window-memory)

## <a name="types-of-window-classes"></a>Типы классов окон

Существует три типа классов окон:

-   [Системные классы](#system-classes)
-   [Глобальные классы приложений](#application-global-classes)
-   [Локальные классы приложения](#application-local-classes)

Эти типы различаются в области и в случаях, когда и как они регистрируются и уничтожаются.

### <a name="system-classes"></a>Системные классы

Системный класс — это класс окна, зарегистрированный системой. Многие системные классы доступны для использования всеми процессами, а другие используются только внутри системы. Поскольку система регистрирует эти классы, процесс не может уничтожить их.

система регистрирует системные классы для процесса в первый раз, когда один из его потоков вызывает функцию пользователя или Windows интерфейс графических устройств (GDI).

Каждое приложение получает собственную копию системных классов. все 16-разрядные приложения на основе Windows в одном и том же классе общей системы VDM, как и в 16-разрядных Windows.

В следующей таблице описаны системные классы, доступные для использования всеми процессами.



| Класс     | Описание                         |
|-----------|-------------------------------------|
| Кнопка    | Класс для кнопки.             |
| ComboBox  | Класс для поля со списком.          |
| Изменить      | Класс для элемента управления "поле ввода".      |
| ListBox   | Класс для поля со списком.           |
| мдиклиент | Класс для клиентского окна MDI. |
| ScrollBar | Класс для полосы прокрутки.         |
| Статический    | Класс для статического элемента управления.     |



 

В следующей таблице описаны системные классы, доступные только для использования системой. Они перечислены здесь для полноты.



| Класс      | Описание                                                            |
|------------|------------------------------------------------------------------------|
| комболбокс  | Класс для списка, содержащийся в поле со списком.                   |
| ддемлевент | класс для событий платформа динамических данных Exchange библиотеки управления (ддемл). |
| Message    | Класс для окна, в котором только сообщения.                                   |
| \#32768    | Класс для меню.                                                  |
| \#32769    | Класс для окна рабочего стола.                                      |
| \#32770    | Класс для диалогового окна.                                            |
| \#32771    | Класс для окна переключения задач.                                  |
| \#32772    | Класс для заголовков значков.                                             |



 

### <a name="application-global-classes"></a>Глобальные классы приложений

[Глобальный класс приложения](#application-global-classes) — это класс окна, зарегистрированный исполняемым ФАЙЛОМ или библиотекой DLL, который доступен всем остальным модулям в процессе. Например, .dll может вызвать функцию [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) для регистрации класса окна, определяющего пользовательский элемент управления в качестве глобального класса приложения, чтобы процесс, загружающий .dll, мог создавать экземпляры пользовательского элемента управления.

Чтобы создать класс, который можно использовать в каждом процессе, создайте класс окна в .dll и загрузите .dll в каждом процессе. Чтобы загрузить .dll в каждом процессе, добавьте его имя в значение **библиотеки \_ DLL** в следующем разделе реестра:

**HKey \_ \_** \\ **программное обеспечение** \\ **Microsoft** \\ **Windows NT** \\ **CurrentVersion** \\  на локальном компьютере Windows

Каждый раз при запуске процесса система загружает указанный .dll в контексте вновь запущенного процесса перед вызовом функции точки входа. .dll необходимо зарегистрировать класс во время инициализации и указать стиль **CS \_ глобалкласс** . Дополнительные сведения см. в разделе [стили классов](#class-styles).

Чтобы удалить глобальный класс приложения и освободить связанное с ним хранилище, используйте функцию [**унрегистеркласс**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) .

### <a name="application-local-classes"></a>Локальные классы приложения

[Локальный класс приложения](#application-local-classes) — это любой класс окна, который исполняемый файл или .dll регистрируется для монопольного использования. Хотя можно зарегистрировать любое количество локальных классов, обычно регистрируется только один. Этот класс окон поддерживает процедуру окна главного окна приложения.

Система уничтожает локальный класс, когда модуль, который зарегистрировал его, закрывается. Приложение также может использовать функцию [**унрегистеркласс**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) для удаления локального класса и освобождения связанного с ним хранилища.

## <a name="how-the-system-locates-a-window-class"></a>Как система находит класс окна

Система содержит список структур для каждого из трех типов классов окон. Когда приложение вызывает функцию [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) или [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) для создания окна с указанным классом, система использует следующую процедуру для нахождение класса.

1.  Выполните поиск в списке локальных классов приложения для класса с указанным именем, чей экземпляр соответствует обработчику экземпляра модуля. (Несколько модулей могут использовать одно и то же имя для регистрации локальных классов в одном процессе.)
2.  Если имя отсутствует в списке локальных классов приложения, выполните поиск в списке глобальных классов приложения.
3.  Если имя отсутствует в списке глобальных классов приложения, выполните поиск по списку классов системы.

Все окна, созданные приложением, используют эту процедуру, включая Windows, созданную системой от имени приложения, например диалоговые окна. Можно переопределить системные классы, не затрагивая другие приложения. Это значит, что приложение может зарегистрировать локальный класс приложения с тем же именем, что и системный класс. Этот класс System заменяется в контексте приложения, но не мешает другим приложениям использовать класс System.

## <a name="registering-a-window-class"></a>Регистрация класса окна

Класс окна определяет атрибуты окна, например его стиль, значок, курсор, меню и процедуру окна. Первым шагом при регистрации класса окна является заполнение структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) данными класса Window. Дополнительные сведения см. в разделе [элементы класса Window](#elements-of-a-window-class). Затем передайте структуру в функцию [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) . Дополнительные сведения см. [в разделе using Window classes](using-window-classes.md).

Чтобы зарегистрировать глобальный класс приложения, укажите \_ стиль CS глобалкласс в элементе **Style** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) . При регистрации локального класса приложения не указывайте стиль **CS \_ глобалкласс** .

Если вы регистрируете класс Window, используя версию ANSI [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa), **регистерклассекса**, приложение запрашивает передачу текстовых параметров сообщений в окна созданного класса, используя кодировку ANSI. Если вы регистрируете класс с помощью версии Юникода **RegisterClassEx**, **регистерклассексв**, приложение запрашивает передачу текстовых параметров сообщений в окна созданного класса, используя кодировку Юникода. Функция [**исвиндовуникоде**](/windows/win32/api/winuser/nf-winuser-iswindowunicode) позволяет приложениям запрашивать характер каждого окна. Дополнительные сведения о функциях ANSI и Unicode см. в разделе [соглашения для прототипов функций](/windows/desktop/Intl/conventions-for-function-prototypes).

Исполняемый файл или библиотека DLL, которая зарегистрировала класс, является владельцем класса. Система определяет владение классом из элемента **HINSTANCE** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) , передаваемого в функцию [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) при регистрации класса. Для библиотек DLL элемент **HINSTANCE** должен быть обработчиком .dll экземпляра.

Класс не уничтожается, когда .dll, которому принадлежит он, выгружается. Таким образом, если система вызывает процедуру окна для окна этого класса, это вызовет нарушение прав доступа, так как .dll, содержащий процедуру окна, больше не находится в памяти. Процесс должен уничтожить все окна с помощью класса до выгрузки .dll и вызова функции [**унрегистеркласс**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) .

## <a name="elements-of-a-window-class"></a>Элементы класса Window

Элементы класса Window определяют поведение Windows по умолчанию, принадлежащее классу. Приложение, которое регистрирует класс окна, назначает элементы классу путем установки соответствующих элементов в структуре [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) и передачи структуры в функцию [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) . Функции [**жетклассинфоекс**](/windows/win32/api/winuser/nf-winuser-getclassinfoexa) и [**жеткласслонг**](/windows/win32/api/winuser/nf-winuser-getclasslonga) извлекают сведения о данном классе окна. Функция [**сеткласслонг**](/windows/win32/api/winuser/nf-winuser-setclasslonga) изменяет элементы локального или глобального класса, которые приложение уже зарегистрировало.

Хотя полный класс окна состоит из множества элементов, система требует, чтобы приложение предпредоставил только имя класса, адрес процедуры окна и экземпляр. Используйте другие элементы для определения атрибутов по умолчанию для окон класса, например формы курсора и содержимого меню для окна. Все неиспользуемые члены структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) необходимо инициализировать равными нулю или **null**. В следующей таблице приведены элементы класса Window.



| Элемент                                               | Назначение                                                                                                                                                                                                                                       |
|-------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [Имя класса](#class-name)                             | Отличает класс от других зарегистрированных классов.                                                                                                                                                                                        |
| [Адрес процедуры окна](#window-procedure-address) | Указатель на функцию, которая обрабатывает все сообщения, отправленные в Windows в классе, и определяет поведение окна.                                                                                                                      |
| [Маркер экземпляра](#instance-handle)                   | Определяет приложение или .dll, которые регистрировали класс.                                                                                                                                                                                 |
| [Курсор класса](#class-cursor)                         | Определяет курсор мыши, отображаемый системой для окна класса.                                                                                                                                                                  |
| [Значки классов](#class-icons)                           | Определяет крупный значок и маленький значок.                                                                                                                                                                                                    |
| [Кисть фона класса](#class-background-brush)     | Определяет цвет и шаблон, которые заполняют клиентскую область при открытии или закраске окна.                                                                                                                                                 |
| [Меню класса](#class-menu)                             | Задает меню по умолчанию для окон, в котором не определено явно меню.                                                                                                                                                                  |
| [Стили класса](#class-styles)                         | Определяет способ обновления окна после его перемещения или изменения его размера, обработки двойных щелчков мыши, выделения пространства для контекста устройства и других аспектов окна.                                                       |
| [Память дополнительного класса](#extra-class-memory)             | Указывает объем дополнительной памяти в байтах, резервируемый системой для класса. Все окна в классе имеют доступ к дополнительной памяти и могут использовать ее для любых целей, определяемых приложением. Система инициализирует эту память как нулевую. |
| [Размер дополнительной памяти окна](#extra-window-memory)           | Указывает объем дополнительной памяти в байтах, резервируемый системой для каждого окна, принадлежащего классу. Дополнительную память можно использовать для любых целей, определяемых приложением. Система инициализирует эту память как нулевую.          |



 

### <a name="class-name"></a>Имя класса

Каждому классу окна требуется [имя класса](#class-name) , чтобы отличать один класс от другого. Назначьте имя класса, задав для элемента **лпсзкласснаме** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) адрес строки, завершающейся нулем, которая указывает имя. Поскольку классы окон зависят от процесса, имена классов окон должны быть уникальными только в пределах одного процесса. Кроме того, поскольку имена классов занимают пространство в частной таблице Atom системы, следует как можно более короткие строки имен классов.

Функция [**className**](/windows/win32/api/winuser/nf-winuser-getclassname) возвращает имя класса, которому принадлежит заданное окно.

### <a name="window-procedure-address"></a>Адрес процедуры окна

Каждому классу требуется адрес процедуры окна, чтобы определить точку входа для процедуры окна, используемой для обработки всех сообщений для окон в классе. Система передает сообщения в процедуру, когда ей требуется окно для выполнения задач, таких как прорисовка клиентской области или реагирование на ввод пользователя. Процесс присваивает процедуре окна классу путем копирования его адреса в элемент **лпфнвндпрок** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) . Дополнительные сведения см. в разделе [Процедуры окна](window-procedures.md).

### <a name="instance-handle"></a>Маркер экземпляра

Каждый класс окна требует наличия обработчика экземпляра для указания приложения или .dll, которые регистрировали класс. Система требует наличия дескрипторов экземпляров для наблюдения за всеми модулями. Система назначает маркер каждой копии выполняемого исполняемого файла или .dll.

Система передает экземпляр в функцию точки входа каждого исполняемого файла (см. статью [**WinMain**](/windows/win32/api/winbase/nf-winbase-winmain)) и .dll (см. [**DllMain**](/windows/desktop/Dlls/dllmain)). Исполняемый файл или .dll назначает этот экземпляр обработчику, копируя его в элемент **HINSTANCE** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) .

### <a name="class-cursor"></a>Курсор класса

*Курсор класса* определяет форму курсора, когда он находится в клиентской области окна в классе. Система автоматически устанавливает курсор на заданную фигуру, когда курсор попадает в клиентскую область окна, и гарантирует, что эта фигура останется в клиентской области. Чтобы назначить форму курсора классу окна, загрузите стандартную фигуру курсора с помощью функции [**лоадкурсор**](/windows/desktop/api/winuser/nf-winuser-loadcursora) , а затем назначьте возвращенный маркер курсора элементу **хкурсор** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) . Кроме того, можно предоставить настраиваемый ресурс курсора и использовать функцию **лоадкурсор** для ее загрузки из ресурсов приложения.

В системе не требуется курсор класса. Если приложение устанавливает для элемента **хкурсор** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) **значение NULL**, курсор класса не определяется. Система предполагает, что окно устанавливает форму курсора при каждом перемещении курсора в окно. Окно может установить форму курсора путем вызова функции [**сеткурсор**](/windows/desktop/api/winuser/nf-winuser-setcursor) всякий раз, когда окно получает сообщение [**WM \_ MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove) . Дополнительные сведения о курсорах см. в разделе [курсоры](/windows/desktop/menurc/cursors).

### <a name="class-icons"></a>Значки классов

*Значок класса* — это изображение, используемое системой для представления окна определенного класса. Приложение может иметь два значка класса — один крупный и один маленький. Система отображает *значок крупного класса* окна в окне переключения задач, которое появляется, когда пользователь нажимает ALT + TAB и в представлениях крупных значков панели задач и обозревателя. *Значок небольшого класса* появляется в строке заголовка окна и в представлениях мелких значков панели задач и обозревателя.

Чтобы назначить большой и маленький значок классу окна, укажите дескрипторы значков в элементах **Хикон** и **хиконсм** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) . Размеры значков должны соответствовать обязательным измерениям для крупных и мелких значков классов. Для значка крупного класса можно определить необходимые измерения, указав значения **SM \_ Кксикон** и **SM \_ Циикон** в вызове функции [**жетсистемметрикс**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) . Для значка небольшого класса укажите значения **SM \_ Ккссмикон** и **SM \_ цисмикон** . Дополнительные сведения см. в разделе [значки](/windows/desktop/menurc/icons).

Если приложение устанавливает для элементов **Хикон** и **Хиконсм** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) **значение NULL**, система использует значок приложения по умолчанию в качестве крупных и мелких значков классов для класса Window. Если указать значок крупного класса, но не маленький, система создает маленький значок класса, основанный на большом размере. Однако если указать маленький значок класса, но не большой, система будет использовать значок приложения по умолчанию в качестве значка крупного класса и указанный значок в качестве значка небольшого класса.

Можно переопределить крупный или маленький значок класса для конкретного окна с помощью сообщения [**WM \_ сетикон**](wm-seticon.md) . Вы можете получить значок текущего крупного или мелкого класса с помощью [**сообщения \_ WM**](wm-geticon.md) .

### <a name="class-background-brush"></a>Кисть фона класса

*Кисть фона класса* подготавливает клиентскую область окна для последующего рисования приложением. Система использует кисть для заполнения клиентской области сплошным цветом или узором, тем самым удаляя все предыдущие изображения из этого расположения независимо от того, принадлежат ли они к окну или нет. Система уведомляет окно о том, что его фон следует отрисовывать, отправив сообщение [**WM \_ ерасебкгнд**](wm-erasebkgnd.md) в окно. Дополнительные сведения см. в разделе [кисти](/windows/desktop/gdi/brushes).

Чтобы назначить фоновую кисть для класса, создайте кисть с помощью соответствующих функций GDI и назначьте возвращенный дескриптор кисти элементу **хбрбаккграунд** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) .

Вместо создания кисти приложение может задать для элемента **хбрбаккграунд** одно из стандартных значений системного цвета. Список стандартных значений системного цвета см. в разделе [**сетсисколорс**](/windows/desktop/api/winuser/nf-winuser-setsyscolors).

Чтобы использовать стандартный системный цвет, приложение должно увеличить значение цвета фона на единицу. Например, цвет фона ( **\_ фон** ) + 1 является системным цветом фона. Кроме того, можно использовать функцию [**жетсисколорбруш**](/windows/desktop/api/winuser/nf-winuser-getsyscolorbrush) для получения дескриптора кисти, соответствующей стандартному системному цвету, а затем указать дескриптор в элементе **хбрбаккграунд** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) .

В системе не требуется, чтобы класс окна имел кисть для фона класса. Если этот параметр имеет значение **null**, то при получении сообщения [**WM \_ ерасебкгнд**](wm-erasebkgnd.md) окно должно рисовать собственный фон.

### <a name="class-menu"></a>Меню класса

*Меню класса* определяет меню по умолчанию, используемое окнами в классе, если при создании окон не задано явное меню. Меню — это список команд, из которых пользователь может выбрать действия для выполнения приложения.

Можно назначить меню классу, задав для элемента **лпсзменунаме** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) адрес строки, завершающейся нулем, которая указывает имя ресурса меню. Предполагается, что меню является ресурсом в данном приложении. Система автоматически загружает меню при необходимости. Если ресурс меню идентифицируется целым числом, а не именем, то приложение может задать для элемента **лпсзменунаме** это целое число, применив макрос [**макеинтресаурце**](/windows/desktop/api/winuser/nf-winuser-makeintresourcea) перед присвоением значения.

В системе не требуется меню класса. Если приложение устанавливает для элемента **лпсзменунаме** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) **значение NULL**, в Windows в классе нет строк меню. Даже если меню класс не задано, приложение по-прежнему может определить строку меню для окна при создании окна.

Если для класса задано меню и создано дочернее окно этого класса, меню игнорируется. Дополнительные сведения см. в разделе [меню](/windows/desktop/menurc/menus).

### <a name="class-styles"></a>Стили класса

Стили классов определяют дополнительные элементы класса Window. Два или более стиля можно объединить с помощью побитового оператора OR ( \| ). Чтобы назначить стиль классу окна, назначьте стиль элементу **Style** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) . Список стилей классов см. в разделе [**стили классов окон**](window-class-styles.md).

### <a name="classes-and-device-contexts"></a>Классы и контексты устройств

*Контекст устройства* — это специальный набор значений, которые используются приложениями для рисования в клиентской области окна. Система требует наличия контекста устройства для каждого окна на экране, но обеспечивает некоторую гибкость в том, как система хранит и обрабатывает контекст устройства.

Если явно не задан стиль контекста устройства, система предполагает, что в каждом окне используется контекст устройства, полученный из пула контекстов, поддерживаемых системой. В таких случаях каждое окно должно извлекать и инициализировать контекст устройства перед рисованием и освобождать его после рисования.

Чтобы избежать извлечения контекста устройства каждый раз, когда ему требуется закрашивать внутри окна, приложение может указать стиль **\_ овндк CS** для класса Window. Этот стиль класса направляет систему для создания частного контекста устройства, то есть для выделения уникального контекста устройства для каждого окна в классе. Приложению требуется только получить контекст, а затем использовать его для всех последующего рисования.

### <a name="extra-class-memory"></a>Память дополнительного класса

Система поддерживает внутреннюю структуру [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) для каждого класса окон в системе. Когда приложение регистрирует класс окна, оно может направить систему на выделение и добавление в конец структуры **вндклассекс** нескольких дополнительных байтов памяти. Эта память называется *дополнительной памятью класса* и является общей для всех окон, принадлежащих классу. Используйте память дополнительного класса для хранения любой информации, относящейся к классу.

Поскольку дополнительный объем памяти выделяется из локальной кучи системы, приложение должно использовать память дополнительного класса с осторожностью. Функция [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) завершается ошибкой, если объем запрашиваемой памяти дополнительного класса превышает 40 байт. Если приложению требуется более 40 байт, он должен выделить собственную память и сохранить указатель на память в дополнительной памяти класса.

Функции [**сетклассворд**](/windows/win32/api/winuser/nf-winuser-setclassword) и [**сеткласслонг**](/windows/win32/api/winuser/nf-winuser-setclasslonga) копируют значение в память дополнительного класса. Чтобы получить значение из памяти дополнительного класса, используйте функции [**жетклассворд**](/windows/win32/api/winuser/nf-winuser-getclassword) и [**жеткласслонг**](/windows/win32/api/winuser/nf-winuser-getclasslonga) . Элемент **кбклсекстра** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) указывает объем дополнительной памяти класса для выделения. Приложение, которое не использует память дополнительного класса, должно инициализировать элемент **кбклсекстра** в ноль.

### <a name="extra-window-memory"></a>Размер дополнительной памяти окна

Система поддерживает внутреннюю структуру данных для каждого окна. При регистрации класса окна приложение может указать ряд дополнительных байтов памяти, называемых *дополнительной памятью окна*. При создании окна класса система выделяет и добавляет заданный объем дополнительной памяти окна в конец структуры окна. Приложение может использовать эту память для хранения данных, относящихся к окну.

Поскольку дополнительный объем памяти выделяется из локальной кучи системы, приложение должно использовать лишние окна памяти с осторожностью. Функция [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) завершается ошибкой, если объем требуемой дополнительной памяти превышает 40 байт. Если приложению требуется более 40 байт, он должен выделить собственную память и сохранить указатель на память в дополнительной памяти окна.

Функция [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) копирует значение в лишнюю память. Функция [**жетвиндовлонг**](/windows/win32/api/winuser/nf-winuser-getwindowlonga) извлекает значение из дополнительной памяти. Элемент **кбвндекстра** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) указывает объем дополнительной памяти окна, выделяемой для выделения. Приложение, которое не использует память, должно инициализировать **кбвндекстра** до нуля.

 

 
