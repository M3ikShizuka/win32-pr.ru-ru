---
description: В этом разделе описываются сообщения и очереди сообщений, а затем их использование в приложениях.
ms.assetid: vs|winui|~\winui\windowsuserinterface\windowing\messagesandmessagequeues.htm
title: Сообщения и очереди сообщений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d0233af932d1aa9a4130e244af002d6180fdf055
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105702242"
---
# <a name="messages-and-message-queues"></a>Сообщения и очереди сообщений

В этом разделе описываются сообщения и очереди сообщений, а затем их использование в приложениях.

### <a name="in-this-section"></a>в этом разделе



| Имя                                                                       | Описание                                                                                                                                |
|----------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| [Сведения о сообщениях и очередях сообщений](about-messages-and-message-queues.md) | В этом разделе обсуждаются сообщения Windows и очереди сообщений.<br/>                                                                     |
| [Использование сообщений и очередей сообщений](using-messages-and-message-queues.md) | В следующих примерах кода показано, как выполнять следующие задачи, связанные с сообщениями Windows и очередями сообщений.<br/> |
| [Ссылка на сообщение](message-and-message-queue-reference.md)               | Содержит справочник по API.<br/>                                                                                                     |



 

### <a name="system-provided-messages"></a>Сообщения System-Provided

Список сообщений, предоставляемых системой, см. в разделе [сообщения, определяемые системой](about-messages-and-message-queues.md).

### <a name="message-functions"></a>Функции сообщений



| Имя                                                         | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|--------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**броадкастсистеммессаже**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage)     | Отправляет сообщение указанным получателям. Получатели могут быть приложениями, устанавливаемыми драйверами, сетевыми драйверами, драйверами устройств на уровне системы или любым сочетанием этих системных компонентов. <br/> Чтобы получить дополнительные сведения, если запрос определен, используйте функцию [**броадкастсистеммессажеекс**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessageexa) .<br/>                                                                                                                                                                                                                                  |
| [**броадкастсистеммессажеекс**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessageexa) | Отправляет сообщение указанным получателям. Получатели могут быть приложениями, устанавливаемыми драйверами, сетевыми драйверами, драйверами устройств на уровне системы или любым сочетанием этих системных компонентов. <br/> Эта функция похожа на [**броадкастсистеммессаже**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage) , за исключением того, что эта функция может возвращать дополнительные сведения от получателей.<br/>                                                                                                                                                                                                              |
| [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage)                   | Отправляет сообщение в процедуру окна. Обычно он используется для отправки сообщения, полученного функцией with [**Message**](/windows/win32/api/winuser/nf-winuser-getmessage) .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**жетинпутстате**](/windows/win32/api/winuser/nf-winuser-getinputstate)                       | Определяет, есть ли в очереди сообщений вызывающего потока сообщения с кнопками мыши или клавиатуры. <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage)                             | Извлекает сообщение из очереди сообщений вызывающего потока. Функция отправляет входящие отправленные сообщения до тех пор, пока отправленное сообщение не будет доступно для извлечения. <br/> В отличие от функции [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) функция не ждет, [**пока сообщение будет**](/windows/win32/api/winuser/nf-winuser-getmessage)Отправлено, прежде чем возвращать.<br/>                                                                                                                                                                                                                                                              |
| [**жетмессажеекстраинфо**](/windows/win32/api/winuser/nf-winuser-getmessageextrainfo)           | Извлекает дополнительные сведения о сообщении для текущего потока. Дополнительные сведения о сообщении — это значение, определенное приложением или драйвером, связанное с очередью сообщений текущего потока. <br/>                                                                                                                                                                                                                                                                                                                                                                                                   |
| [**жетмессажепос**](/windows/win32/api/winuser/nf-winuser-getmessagepos)                       | Возвращает позицию курсора для последнего сообщения, полученного функцией with [**Message**](/windows/win32/api/winuser/nf-winuser-getmessage) . <br/> Чтобы определить текущую позицию курсора, используйте функцию [**жеткурсорпос**](/windows/desktop/api/winuser/nf-winuser-getcursorpos) .<br/>                                                                                                                                                                                                                                                                                                                                                       |
| [**жетмессажетиме**](/windows/win32/api/winuser/nf-winuser-getmessagetime)                     | Возвращает время сообщения для последнего сообщения, полученного функцией with [**Message**](/windows/win32/api/winuser/nf-winuser-getmessage) . Время представляет собой длинное целое число, указывающее время (в миллисекундах) с момента запуска системы до момента создания сообщения (то есть помещается в очередь сообщений потока). <br/>                                                                                                                                                                                                                                                                         |
| [**жеткуеуестатус**](/windows/win32/api/winuser/nf-winuser-getqueuestatus)                     | Указывает тип сообщений, найденных в очереди сообщений вызывающего потока.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [**SendMessage**](/windows/win32/api/winuser/nf-winuser-insendmessage)                       | Определяет, обрабатывает ли текущая оконная процедура сообщение, отправленное из другого потока (в том же процессе или в другом процессе), путем вызова функции [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) . <br/> Чтобы получить дополнительные сведения о том, как сообщение было отправлено, используйте функцию [**инсендмессажеекс**](/windows/win32/api/winuser/nf-winuser-insendmessageex) .<br/>                                                                                                                                                                                                                              |
| [**инсендмессажеекс**](/windows/win32/api/winuser/nf-winuser-insendmessageex)                   | Определяет, обрабатывает ли текущая оконная процедура сообщение, отправленное из другого потока (в том же или другом процессе).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea)                           | Отправляет входящие отправленные сообщения, проверяет очередь сообщений потока на наличие отправленного сообщения и получает сообщение (если оно существует).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea)                           | Отправляет сообщение в очередь сообщений, связанную с потоком, создавшим указанное окно, и возвращает, не дожидаясь обработки сообщения потоком. <br/> Чтобы опубликовать сообщение в очереди сообщений, связанной с потоком, используйте функцию [**постсреадмессаже**](/windows/win32/api/winuser/nf-winuser-postthreadmessagea) .<br/>                                                                                                                                                                                                                                                                          |
| [**посткуитмессаже**](/windows/win32/api/winuser/nf-winuser-postquitmessage)                   | Указывает системе, что поток сделал запрос на завершение (Quit). Обычно он используется в ответ на сообщение об [**\_ уничтожении WM**](wm-destroy.md) .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [**постсреадмессаже**](/windows/win32/api/winuser/nf-winuser-postthreadmessagea)               | Отправляет сообщение в очередь сообщений указанного потока. Он возвращает значение без ожидания обработки сообщения потоком.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [**регистервиндовмессаже**](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea)       | Определяет новое сообщение окна, которое гарантированно уникально в пределах всей системы. Значение сообщения можно использовать при отправке или публикации сообщений.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [**реплимессаже**](/windows/win32/api/winuser/nf-winuser-replymessage)                         | Ответ на сообщение, отправленное через функцию [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) без возврата управления функции, которая вызвала **SendMessage**.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [*сендасинкпрок*](/windows/win32/api/winuser/nc-winuser-sendasyncproc)                         | Определяемая приложением функция обратного вызова, используемая с функцией [**сендмессажекаллбакк**](/windows/win32/api/winuser/nf-winuser-sendmessagecallbacka) . Система передает сообщение в функцию обратного вызова после передачи сообщения в конечную процедуру окна назначения. Тип **сендасинкпрок** определяет указатель на эту функцию обратного вызова. [*Сендасинкпрок*](/windows/win32/api/winuser/nc-winuser-sendasyncproc) — это заполнитель для имени определяемой приложением функции.<br/>                                                                                                                                                                          |
| [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage)                           | Отправляет указанное сообщение в окно или в окна. Функция [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) вызывает процедуру окна для указанного окна и не возвращает значение до тех пор, пока процедура окна не обработала сообщение. <br/> Чтобы отправить сообщение и вернуться немедленно, используйте функцию [**сендмессажекаллбакк**](/windows/win32/api/winuser/nf-winuser-sendmessagecallbacka) или [**сенднотифимессаже**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea) . Чтобы опубликовать сообщение в очереди сообщений потока и сразу же вернуться, используйте функцию [**постсреадмессаже**](/windows/win32/api/winuser/nf-winuser-postthreadmessagea) или [**Message**](/windows/win32/api/winuser/nf-winuser-postmessagea) .<br/> |
| [**сендмессажекаллбакк**](/windows/win32/api/winuser/nf-winuser-sendmessagecallbacka)           | Отправляет указанное сообщение в окно или в окна. Он вызывает процедуру окна для указанного окна и сразу же возвращает. После того, как процедура окна обработает сообщение, система вызывает указанную функцию обратного вызова, передавая результат обработки сообщения и значение, определенное приложением, в функцию обратного вызова.<br/>                                                                                                                                                                                                                                             |
| [**Функции sendmessagetimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta)             | Отправляет указанное сообщение в одно из нескольких окон.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [**сенднотифимессаже**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea)               | Отправляет указанное сообщение в окно или в окна. Если окно было создано вызывающим потоком, [**сенднотифимессаже**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea) вызывает процедуру окна для окна и не возвращает значение до тех пор, пока процедура окна не обработала сообщение. Если окно было создано другим потоком, **сенднотифимессаже** передает сообщение в процедуру окна и немедленно возвращает результат. Он не ждет завершения обработки сообщения процедурой Window.<br/>                                                                                              |
| [**сетмессажеекстраинфо**](/windows/win32/api/winuser/nf-winuser-setmessageextrainfo)           | Задает дополнительные сведения о сообщении для текущего потока. Дополнительные сведения о сообщении — это значение, определенное приложением или драйвером, связанное с очередью сообщений текущего потока. Приложение может использовать функцию [**жетмессажеекстраинфо**](/windows/win32/api/winuser/nf-winuser-getmessageextrainfo) для получения дополнительных сведений о сообщении о потоке.<br/>                                                                                                                                                                                                                                                                |
| [**TranslateMessage**](/windows/win32/api/winuser/nf-winuser-translatemessage)                 | Преобразует сообщения виртуального ключа в символьные сообщения. Символьные сообщения отправляются в очередь сообщений вызывающего потока для чтения при следующем вызове потоком функции [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) . [](/windows/win32/api/winuser/nf-winuser-getmessage)<br/>                                                                                                                                                                                                                                                                                                                            |
| [**ваитмессаже**](/windows/win32/api/winuser/nf-winuser-waitmessage)                           | Передает управление другим потокам, если в очереди сообщений потока нет других сообщений. Функция [**ваитмессаже**](/windows/win32/api/winuser/nf-winuser-waitmessage) приостанавливает поток и не возвращает результат, пока в очередь сообщений потока не помещается новое сообщение.<br/>                                                                                                                                                                                                                                                                                                                                              |



 

### <a name="message-constants"></a>Константы сообщений



| Имя                             | Описание                                                                    |
|----------------------------------|--------------------------------------------------------------------------------|
| [**\_ \_ базовый OCM**](ocm--base.md) | Используется для определения частных сообщений для использования закрытыми классами окон. <br/> |
| [**\_приложение WM**](wm-app.md)        | Используется для определения частных сообщений. <br/>                                   |
| [**\_пользователь WM**](wm-user.md)      | Используется тодефине частных сообщений для использования закрытыми классами окон. <br/>  |



 

### <a name="message-structures"></a>Структуры сообщений



| Имя                       | Описание                                                                                                                              |
|----------------------------|------------------------------------------------------------------------------------------------------------------------------------------|
| [**бсминфо**](/windows/win32/api/winuser/ns-winuser-bsminfo) | Содержит сведения о окне, которое отклонило запрос от [**броадкастсистеммессажеекс**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessageexa). <br/> |
| [**ОБ**](/windows/win32/api/winuser/ns-winuser-msg)         | Содержит информацию сообщения из очереди сообщений потока. <br/>                                                                  |



 

 

