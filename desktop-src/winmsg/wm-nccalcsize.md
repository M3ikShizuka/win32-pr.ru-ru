---
description: Посылается, когда необходимо вычислить размер и расположение клиентской области окна. Обрабатывая это сообщение, приложение может управлять содержимым клиентской области окна при изменении размера или расположения окна.
ms.assetid: d2d5825e-02a5-44b8-8615-55b7259d24ba
title: Сообщение WM_NCCALCSIZE (Winuser. h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 6f0a73b469a920bcba79cc19670a7b9536c1bac9e0b0ffcab7ddf5930b984dae
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118200080"
---
# <a name="wm_nccalcsize-message"></a>\_Сообщение НККАЛКСИЗЕ WM

Посылается, когда необходимо вычислить размер и расположение клиентской области окна. Обрабатывая это сообщение, приложение может управлять содержимым клиентской области окна при изменении размера или расположения окна.

Окно получает это сообщение через функцию [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)) .


```C++
#define WM_NCCALCSIZE                   0x0083
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*wParam* 
</dt> <dd>

Если параметр *wParam* имеет **значение true**, приложение должно указывать, какая часть клиентской области содержит действительные сведения. Система скопирует действительные данные в указанную область в новой клиентской области.

Если параметр *wParam* имеет **значение false**, то приложению не нужно указывать действительную часть клиентской области.

</dd> <dt>

*lParam* 
</dt> <dd>

Если параметр *wParam* имеет **значение true**, *lParam* указывает на структуру [**\_ params нккалксизе**](/windows/win32/api/winuser/ns-winuser-nccalcsize_params) , содержащую сведения, которые приложение может использовать для вычисления нового размера и позиции клиентского прямоугольника.

Если аргумент *wParam* имеет **значение false**, то *lParam* указывает на структуру [**Rect**](/previous-versions//dd162897(v=vs.85)) . При вводе структура содержит предполагаемый прямоугольник окна для окна. При выходе структура должна содержать экранные координаты соответствующей клиентской области окна.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Тип: **lResult**

Если параметр *wParam* имеет **значение false**, приложение должно вернуть ноль.

Если параметр *wParam* имеет **значение true**, приложение должно вернуть ноль или сочетание следующих значений.

Если параметр *wParam* имеет **значение true** и приложение возвращает ноль, старая клиентская область сохраняется и выводится в левом верхнем углу новой клиентской области.



| Возвращаемый код и значение                                                                                                                                           | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <dt>**ВВР \_ АЛИГНТОП**</dt> <dt>0x0010</dt> </dl>    | Указывает, что клиентская область окна должна сохраняться и быть согласована с верхней частью новой позицией окна. Например, чтобы выстроить клиентскую область в левом верхнем углу, возвратите \_ значения ВВР алигнтоп и **ВВР \_ алигнлефт** .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <dl> <dt>**ВВР \_ АЛИГНРИГХТ**</dt> <dt>0x0080</dt> </dl>  | Указывает, что клиентская область окна должна сохраняться и быть согласована с правой стороны новой позицией окна. Например, чтобы выстроить клиентскую область в правом нижнем углу, возвратите значения **ВВР \_ АЛИГНРИГХТ** и ВВР \_ алигнботтом.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <dl> <dt>**ВВР \_ АЛИГНЛЕФТ**</dt> <dt>0x0020</dt> </dl>   | Указывает, что клиентская область окна должна сохраняться и соответствовать левой части нового расположения окна. Например, чтобы выстроить клиентскую область в левом нижнем углу, возвратите значения **ВВР \_ Алигнлефт** и **ВВР \_ алигнботтом** .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <dl> <dt>**ВВР \_ АЛИГНБОТТОМ**</dt> <dt>0x0040</dt> </dl> | Указывает, что клиентская область окна должна сохраняться и выдаваться по нижнему краю нового расположения окна. Например, чтобы выстроить клиентскую область в левом верхнем углу, возвратите \_ значения ВВР алигнтоп и **ВВР \_ алигнлефт** .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <dl> <dt>**ВВР \_ ХРЕДРАВ**</dt> <dt>0x0100</dt> </dl>     | В сочетании с любыми другими значениями, за исключением **ВВР \_ валидректс**, приводит к полной перерисовке окна, если размер прямоугольника клиента меняется по горизонтали. Это значение аналогично стилю класса [CS \_ хредрав](about-window-classes.md)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <dl> <dt>**ВВР \_ ВРЕДРАВ**</dt> <dt>0x0200</dt> </dl>     | В сочетании с любыми другими значениями, за исключением **ВВР \_ валидректс**, приводит к полной перерисовке окна, если размер прямоугольника клиента меняется по вертикали. Это значение аналогично стилю класса [CS \_ вредрав](about-window-classes.md)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <dl> <dt>**ВВР \_ Перерисовка**</dt> <dt>0x0300</dt> </dl>      | Это значение приводит к перерисовке всего окна. Это сочетание значений **ВВР \_ Хредрав** и **ВВР \_ вредрав** .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <dl> <dt>**ВВР \_ ВАЛИДРЕКТС**</dt> <dt>0x0400</dt> </dl>  | Это значение указывает, что при возврате из [**WM \_ нккалксизе**](wm-nccalcsize.md)прямоугольники, заданные элементами **РГРК** \[ 1 \] и **РГРК** \[ 2 \] в структуре [**\_ params нккалксизе**](/windows/win32/api/winuser/ns-winuser-nccalcsize_params) , содержат допустимые прямоугольники назначения и исходной области соответственно. Система объединяет эти прямоугольники, чтобы вычислить область окна для сохранения. Система копирует любую часть изображения окна, расположенную в исходном прямоугольнике, и вырезает изображение в прямоугольник назначения. Оба прямоугольника находятся в координатах, относительных для родителя или на экране. Этот флаг нельзя сочетать с другими флагами. <br/> Это возвращаемое значение позволяет приложению реализовать более детализированные стратегии сохранения клиентских областей, такие как центрирование или сохранение подмножества клиентской области.<br/> |



 

## <a name="remarks"></a>Remarks

Окно может быть перерисовано в зависимости от того, задан ли стиль класса [CS \_ ХРЕДРАВ](about-window-classes.md) или CS \_ вредрав. Это обратно совместимая по умолчанию обработка этого сообщения с помощью функции [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) (в дополнение к обычным вычислениям клиентского прямоугольника, описанным в предыдущей таблице).

Если параметр *wParam* имеет **значение true**, то возвращение 0 без обработки прямоугольников [**\_ params нккалксизе**](/windows/win32/api/winuser/ns-winuser-nccalcsize_params) приведет к тому, что клиентская область изменится на размер окна, включая фрейм окна. Это приведет к удалению рамки окна и элементов заголовков из окна, в результате чего отображается только область клиента.

начиная с Windows Vista, удаление стандартного кадра путем простого возврата значения 0, если параметр *wParam* имеет **значение TRUE** , не влияет на кадры, которые расширены в клиентскую область с помощью функции [**DwmExtendFrameIntoClientArea**](/windows/win32/api/dwmapi/nf-dwmapi-dwmextendframeintoclientarea) . Будет удален только стандартный фрейм.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|----------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                                               |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                                                     |
| Заголовок<br/>                   | <dl> <dt>Winuser. h (включает Windows. h)</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

**Ссылки**
</dt> <dt>

[**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca)
</dt> <dt>

[**мовевиндов**](/windows/win32/api/winuser/nf-winuser-movewindow)
</dt> <dt>

[**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos)
</dt> <dt>

[**\_Параметры нккалксизе**](/windows/win32/api/winuser/ns-winuser-nccalcsize_params)
</dt> <dt>

**Зрения**
</dt> <dt>

[Windows](windows.md)
</dt> <dt>

**Другие ресурсы**
</dt> <dt>

[**ПЕРЕТАСКИВАЕМЫЕ**](/previous-versions//dd162897(v=vs.85))
</dt> </dl>

 

 
