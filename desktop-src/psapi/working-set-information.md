---
title: Сведения о рабочем наборе
description: Рабочий набор процесса — это объем памяти, физически сопоставленный с контекстом процесса. PSAPI позволяет создавать моментальные снимки рабочего набора или наблюдать за рабочим набором.
ms.assetid: 33c42f79-cc77-4d44-84c3-8bf0a4a60019
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5b6003886d50cb47b128bfce92cba4c28950ee078dbe13499d8909676d938aad
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119032982"
---
# <a name="working-set-information"></a>Сведения о рабочем наборе

Рабочий набор процесса — это объем памяти, физически сопоставленный с контекстом процесса. PSAPI позволяет создавать моментальные снимки рабочего набора или наблюдать за рабочим набором.

Функция [**куериворкингсет**](/windows/desktop/api/Psapi/nf-psapi-queryworkingset) или [**куериворкингсетекс**](/windows/desktop/api/Psapi/nf-psapi-queryworkingsetex) заполняет буфер моментальным снимком данных для каждой страницы в текущем рабочем наборе указанного процесса. Функция сообщает только о тех страницах, которые физически представлены в тот момент, когда он вызывается.

Наблюдение за рабочим набором можно использовать для определения объема дополнительной оперативной памяти, которую выполняет конкретная операция (например, сохранение файла). Чтобы начать наблюдение за рабочим набором, вызовите функцию [**инитиализепроцессфорвсватч**](/windows/desktop/api/Psapi/nf-psapi-initializeprocessforwswatch) . Не все процессы позволяют считывать сведения о рабочем наборе, поэтому перед продолжением необходимо убедиться, что функция возвращает ненулевое значение. Затем вызовите функцию [**жетвсчанжес**](/windows/desktop/api/Psapi/nf-psapi-getwschanges) . Эта функция сообщает только о страницах, загруженных в память, с момента начала наблюдения за рабочим набором. Функция возвращает данные в массиве структур [**\_ \_ \_ данных отслеживания PSAPI WS**](/windows/desktop/api/Psapi/ns-psapi-psapi_ws_watch_information) , по одной структуре для каждой новой страницы, добавленной в рабочий набор процесса. Структура сообщает, какие страницы находятся в памяти, и что привело к тому, что система покажет их на странице.

Функция [**емптиворкингсет**](/windows/desktop/api/Psapi/nf-psapi-emptyworkingset) принимает обработчик процесса. Он позволяет удалить столько страниц, сколько возможно, из рабочего набора процесса. Эта операция полезна в первую очередь для тестирования и настройки. Обратите внимание, что функция [**сетпроцессворкингсетсизе**](/windows/desktop/api/memoryapi/nf-memoryapi-setprocessworkingsetsize) выполняет то же действие, если передать значение 1 для минимального и максимального размеров.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Рабочий набор](/windows/desktop/Memory/working-set)
</dt> </dl>

 

 