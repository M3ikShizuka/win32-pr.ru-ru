---
title: Пользовательские номеронабирателя
description: Windows 2000 и более поздние операционные системы позволяют разработчикам предоставлять собственные настраиваемые номеронабирателя, работающие со службой удаленного доступа (RAS).
ms.assetid: ad94f38d-812f-4329-8055-6274a21a3242
keywords:
- Пользовательские номеронабирателя
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35293de408a2a0faa146b93f9b5d5ebccf447acc
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104260958"
---
# <a name="custom-dialers"></a>Пользовательские номеронабирателя

Windows 2000 и более поздние операционные системы позволяют разработчикам предоставлять собственные настраиваемые номеронабирателя, работающие со службой удаленного доступа (RAS). Пользовательский номеронабиратель реализуется в виде одной библиотеки динамической компоновки (DLL), которая экспортирует следующие точки входа:

-   [**раскустомдиал**](/windows/desktop/api/Ras/nc-ras-rascustomdialfn)
-   [**раскустомдиалдлг**](/windows/desktop/api/Rasdlg/nc-rasdlg-rascustomdialdlgfn)
-   [**раскустомхангуп**](/windows/desktop/api/Ras/nc-ras-rascustomhangupfn)
-   [**раскустоментридлг**](/windows/desktop/api/Rasdlg/nc-rasdlg-rascustomentrydlgfn)
-   [**раскустомделетинтринотифи**](/windows/desktop/api/Ras/nc-ras-rascustomdeleteentrynotifyfn)

Библиотека DLL пользовательского вызова должна экспортировать все эти точки входа и должна реализовывать точки входа как функции Юникода. Дополнительные сведения об этих функциях см. на странице справки по каждой функции в Windows SDK ссылки на службу удаленного доступа.

Чтобы подключение службы удаленного доступа использует пользовательский номеронабиратель, запись телефонной книги для подключения должна содержать путь к DLL-библиотеке пользовательского набора. Используйте функции API RAS [**расжетентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rasgetentrypropertiesa) и [**рассетентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rassetentrypropertiesa) , чтобы задать этот путь в элементе **сзкустомдиалдлл** структуры [**расентри**](/previous-versions/windows/desktop/legacy/aa377274(v=vs.85)) для записи телефонной книги.

## <a name="updating-the-registry-for-custom-dialers"></a>Обновление реестра для пользовательских номеронабирателя

Чтобы система набирает соединение, использующее пользовательский номеронабиратель, путь к DLL-библиотеке пользовательского вызова должен существовать в следующем параметре реестра.

```
HKEY_LOCAL_MACHINE
   System
      CurrentControlSet
         Services
            Rasman
               Parameters
                  CustomDLL<dl>
<dt>

                  Data type
</dt>
<dd>                  REG_MULTI_SZ</dd>
</dl>
```

Так как **кустомдлл** имеет тип **reg \_ Multi \_ SZ**, он может хранить пути к нескольким библиотекам DLL с пользовательским набором. В дополнение к записи телефонной книги для подключения необходимо задать путь к библиотеке DLL пользовательского вызова в этом параметре реестра.

По умолчанию это значение реестра доступно для записи только пользователю с правами администратора или системными привилегиями. В целях безопасности не изменяйте разрешения для этого раздела реестра.

## <a name="using-custom-dialers-at-system-logon"></a>Использование пользовательских номеронабирателя при входе в систему

Windows 2000 и более поздние операционные системы позволяют пользователю устанавливать подключение RAS во время входа в систему. Для этого пользователь проверяет **Вход с помощью удаленного доступа к сети** в диалоговом окне " **сведения о входе** ". Когда пользователь нажмет кнопку "ОК", система отобразит доступные подключения.

## <a name="security-considerations"></a>Соображения безопасности

В большинстве случаев пользовательский номеронабиратель работает с привилегиями безопасности пользователя, который его вызывает. Однако если пользовательский номеронабиратель вызывается при входе в систему, он работает с системными привилегиями. Поэтому создайте пользовательский номеронабиратель, чтобы он не был использован для нарушения безопасности системы. Например, набор не должен представлять пользовательский интерфейс, позволяющий пользователю записывать доступ к файловой системе компьютера. Пользовательские интерфейсы, предоставляющие такой доступ, включают в себя диалоговое окно **find-file** , общее диалоговое окно **открытия файла** и **справку** Windows.

## <a name="custom-dialer-user-interface-must-support-idcancel"></a>Пользовательский интерфейс пользовательского номеронабирателя должен поддерживать ИДКАНЦЕЛ

Если пользовательский номеронабиратель отображает пользовательский интерфейс, Пользовательский интерфейс должен поддерживать \_ Командные сообщения WM, где ловорд (*wParam*) равняется идканцел.

 

 