---
title: Подключения обратного вызова
description: Служба RAS поддерживает соединения, в которых удаленный сервер зависает, а затем выполняет обратный вызов клиента для установления соединения.
ms.assetid: 25f0e84d-8900-4efe-b07d-59f25186c976
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9aabe3bf5503f16d7d27e44e02dc19ccb2a6f2e5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103793518"
---
# <a name="callback-connections"></a>Подключения обратного вызова

Служба RAS поддерживает соединения, в которых удаленный сервер зависает, а затем выполняет обратный вызов клиента для установления соединения.

Для каждого пользователя, который может подключаться к серверу удаленного доступа, сервер хранит атрибут обратного вызова, который управляет тем, как устанавливается соединение. Атрибут по умолчанию не имеет обратного вызова, что означает, что пользователь может подключиться к серверу удаленного доступа без обратного вызова. Кроме того, администратор сервера RAS может назначить пользователю предустановку или атрибут обратного вызова, установленный на вызывающий объект.

Для пользователя, которому назначено ограничение, администратор указывает номер телефона, который сервер удаленного доступа должен выполнить для установления соединения. Пользователь не может указать другое число, и соединение не может быть установлено без обратного вызова.

Предустановленная операция обратного вызова автоматически обрабатывается диспетчером подключений удаленного доступа и удаленным сервером. Клиентское приложение RAS не обязано выполнять никаких действий, кроме предоставления отзывов пользователю при вызове обработчика уведомлений во время различных состояний операции обратного вызова.

Пользователь, которому назначено право абонента Set by, может подключаться с помощью обратного вызова или без него. Вызов [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) использует элемент **сзкаллбаккнумбер** структуры [**расдиалпарамс**](/previous-versions/windows/desktop/legacy/aa377238(v=vs.85)) для указания выбора.

Член **сзкаллбаккнумбер** может просто указать номер обратного вызова; или, чтобы установить соединение без обратного вызова, **сзкаллбаккнумбер** может указывать на пустую строку "". В любом из этих случаев диспетчер подключений удаленного доступа автоматически обрабатывает операцию подключения. Как и в случае с предустановленной операцией обратного вызова, клиенту RAS не нужно выполнять никаких действий, кроме предоставления отзыва пользователю.

Если вызов [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) включает [приостановленные состояния](paused-states.md), **сзкаллбаккнумбер** может указывать на строку звездочки " \* ", чтобы указать, что операция подключения должна перейти в приостановленное состояние, чтобы пользователь мог ввести номер обратного вызова. В этом случае операция подключения для набора, назначенного пользователем вызывающего, переходит в приостановленное состояние после того, как удаленный сервер пройдет проверку подлинности пользователя. Во время приостановленного состояния клиент RAS получает от пользователя ввод номера обратного вызова. Затем клиент возобновляет операцию подключения, выполнив второй вызов **rasdial** , в котором **сзкаллбаккнумбер** указывает число, предоставленное пользователем.

> [!Note]  
> Если приостановленные состояния не включены, то при **сзкаллбаккнумбер** указывает на звездочку в виде строки " \* ". В этом случае звездочка означает, что номер обратного вызова хранится в файле телефонной книги, указанном в вызове [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) .

 

В случае обратного вызова вызов функции [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) не возвращает значение до тех пор, пока сервер не выполнит обратный вызов клиента.

 

 