---
title: Сведения об администрировании сервера удаленного доступа и порта
description: Функции администрирования сервера RAS получают сведения об указанном сервере RAS и его портах. Эти функции также используются для завершения подключения на указанном порту сервера удаленного доступа.
ms.assetid: eedac23e-d716-451e-b08b-594398656bb5
keywords:
- Администрирование удаленного доступа RRAS, администрирование сервера и порта
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4cb9d3cc520efa6bbb492e8d9e967d423548f96a
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/23/2019
ms.locfileid: "104487196"
---
# <a name="about-ras-server-and-port-administration"></a>Сведения об администрировании сервера удаленного доступа и порта

Функции администрирования сервера RAS получают сведения об указанном сервере RAS и его портах. Эти функции также используются для завершения подключения на указанном порту сервера удаленного доступа.

Функция [**мпрадминсервержетинфо**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminservergetinfo) возвращает структуру [**сервера MPR \_ \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_server_0) , содержащую сведения о конфигурации сервера удаленного доступа. Возвращаемые сведения включают число портов, доступных в настоящее время для подключений, число портов, используемых в настоящий момент, и номер версии сервера.

Функция [**мпрадминпортенум**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) извлекает массив структур [**\_ порта RAS \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) . Каждая структура содержит сведения для одного из портов, настроенных на сервере удаленного доступа. Сведения для каждого порта включают в себя:

-   Имя порта
-   Сведения об устройстве, подключенном к порту
-   Является ли RAS-сервер, связанный с портом, сервером Windows NT или Windows 2000
-   Используется ли порт в данный момент, и, если это так, сведения о подключении

Чтобы получить порты, используемые конкретным подключением, передайте [**мпрадминпортенум**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) маркера в это соединение в параметре *хконнектион* . Чтобы получить маркер соединения, используйте функцию [**мпрадминконнектионенум**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionenum) . Кроме того, если вы реализовали [библиотеку DLL администрирования RAS](ras-administration-dll.md), функции [**мпрадминакцептневконнектион**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) и [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) получают маркер для каждого нового подключения во время установки соединения.

Вы можете вызвать функцию [**мпрадминпортжетинфо**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) , чтобы получить дополнительные сведения об указанном порте на сервере удаленного доступа. Эта функция возвращает структуру [**\_ порта RAS \_ 1**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_1) , которая содержит структуру [**\_ порта RAS \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) и дополнительные сведения о текущем состоянии порта. Функция [**расадминпортжетинфо**](rasadminportgetinfo.md) также возвращает массив структур [**\_ параметров RAS**](ras-parameters-str.md) , описывающих значения всех ключей, связанных с портом. Структура **\_ параметров RAS** использует значение из перечисления [**\_ \_ форматов params RAS**](ras-params-format-str.md) , чтобы указать формат значения для каждого ключа, относящегося к носителю.

Функция [**мпрадминпортжетинфо**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) также возвращает структуру [**\_ \_ статистики порта RAS**](ras-port-statistics-str.md) , которая содержит различные статистические счетчики для текущего соединения (если таковые имеются) в порте. Для порта, который является частью многоканального подключения, **мпрадминпортжетинфо** возвращает статистику для отдельного порта и совокупную статистику для всех портов, участвующих в соединении. Для сброса счетчиков статистики для порта можно использовать функцию [**мпрадминпортклеарстатс**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportclearstats) . Функция [**мпрадминпортдисконнект**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportdisconnect) отключает используемый порт.

Используйте функцию [**мпрадминбуфферфри**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminbufferfree) для освобождения памяти, выделенной функциями [**мпрадминпортенум**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) и [**мпрадминпортжетинфо**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) . Используйте функцию [**мпрадминжетеррорстринг**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingeterrorstring) для получения строки, которая описывает код ошибки RAS, возвращенный одной из функций администрирования сервера RAS (расадмин).

 

 




