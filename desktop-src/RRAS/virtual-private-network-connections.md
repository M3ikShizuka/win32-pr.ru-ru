---
title: Подключения к виртуальной частной сети
description: Служба удаленного доступа (RAS) поддерживает подключения к виртуальной частной сети (VPN) в дополнение к традиционным подключениям удаленного доступа, использующим протокол PPP (PPP).
ms.assetid: c1195ebb-3107-4429-bc67-b64577d66268
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 09f5fc0b80a6eb00e7587e941eea39c056a11d14
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104070118"
---
# <a name="virtual-private-network-connections"></a>Подключения к виртуальной частной сети

Служба удаленного доступа (RAS) поддерживает подключения к виртуальной частной сети (VPN) в дополнение к традиционным подключениям удаленного доступа, использующим протокол PPP (PPP). В VPN-подключении пакеты VPN инкапсулируются в IP-пакетах и отправляются через IP-сеть, например в Интернет. Поэтому для установки VPN-подключения требуется доступ к IP-сети. Если клиентский компьютер имеет постоянное подключение к IP-сети, например подключение к IP-локальной сети, клиент может установить VPN-подключение с помощью одного вызова функции [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) .

Если клиентский компьютер не имеет постоянного подключения к IP-сети, для установки VPN-подключения требуется два вызова команды [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) . Первый вызов устанавливает коммутируемое подключение к IP-сети; второй вызов устанавливает VPN-подключение.

Элемент **сзлокалфоненумбер** структуры [**расентри**](/previous-versions/windows/desktop/legacy/aa377274(v=vs.85)) для VPN-подключения должен содержать либо DNS-имя, либо IP-адрес целевого VPN-сервера.

Для каждого подключения требуется отдельная запись [телефонной книги](ras-phone-books.md) . Первый вызов команды [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) указывает запись телефонной книги для IP-сети. Второй вызов задает запись телефонной книги для VPN.

Функция [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) принимает указатель на структуру [**расдиалпарамс**](/previous-versions/windows/desktop/legacy/aa377238(v=vs.85)) в качестве параметра. Эта структура задает учетные данные для проверки подлинности, используемые для сети, указанной в записи телефонной книги. Учетные данные, необходимые для доступа к IP-сети, обычно отличаются от тех, которые используются для VPN. Первый вызов команды **rasdial** должен указывать учетные данные для IP-сети. Второй вызов должен указать учетные данные для VPN.

Если функция [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) выполнена успешно, она возвращает маркер для соединения. Используйте этот маркер в вызове [**рашангуп**](/windows/desktop/api/Ras/nf-ras-rashangupa) для завершения соединения.

В предыдущем сценарии два вызова [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) возвращают отдельные дескрипторы подключения для IP-сети и VPN. Вызов [**рашангуп**](/windows/desktop/api/Ras/nf-ras-rashangupa) с помощью МАРКЕРа VPN-подключения прерывает VPN-подключение, но оставляет подключение к IP-сети неизменным.

 

 