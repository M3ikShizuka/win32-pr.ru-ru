---
title: Получение уведомлений об изменениях
description: Многие клиенты могут одновременно обновлять таблицу маршрутизации, а клиенты должны получать уведомления об изменениях в сведениях о маршрутизации.
ms.assetid: d42e16e2-32b2-4178-967b-e937730b3cca
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a6eddc92404acb921b31bab22736561cbbc83e4c1c641da80a8ff95352e52f33
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117788714"
---
# <a name="receiving-notification-of-changes"></a>Получение уведомлений об изменениях

Многие клиенты могут одновременно обновлять таблицу маршрутизации, а клиенты должны получать уведомления об изменениях в сведениях о маршрутизации. Например, клиент, не уведомляющий об изменениях другого клиента в таблице маршрутизации, может объявить устаревшие сведения о маршруте. Это может быть предотвращено, если клиенты зарегистрируются в диспетчере таблиц маршрутизации, чтобы получать уведомления об изменениях в таблице маршрутизации. Диспетчер таблиц маршрутизации отправляет уведомления об изменениях всем клиентам, которые регистрируются для их получения.

Уведомление об изменении применяется только к местам назначения. Невозможно запросить в диспетчере таблиц маршрутизации изменения, внесенные в конкретный маршрут.

При внесении изменений в один из маршрутов к назначению диспетчер таблиц маршрутизации отправляет уведомление о том, что произошло изменение. Это уведомление отправляется только тем клиентам, которые зарегистрированы в диспетчере таблиц маршрутизации для типа произошедших изменений. Все изменения в сведениях о маршрутизации в диспетчере таблиц маршрутизации выполняются в одном или нескольких представлениях, а сообщения об изменении уведомлений могут запрашиваться в любом подмножестве поддерживаемых представлений.

В настоящее время существует три типа уведомлений об изменениях, для которых клиент может зарегистрироваться:

-   Уведомление о любом изменении маршрутов назначения. Этот запрос выполняется с помощью \_ \_ флага изменения типа изменений RTM \_ .
-   Уведомление, если оптимальный маршрут изменяется, или любая из следующих сведений для текущих лучших маршрутов.

    -   Предпочтение
    -   Следующие прыжки
    -   Флаги маршрута

    Этот запрос выполняется с помощью \_ \_ \_ наилучшего флага изменения типа RTM.

-   Рекомендуется уведомление обо всех изменениях типа изменений RTM \_ \_ \_ , за исключением изменений в флагах, не пересылаемых в оптимальном маршруте. Например, диспетчер маршрутизаторов ожидает изменения этого типа в представлении одноадресной рассылки и обновляет сведения в одноадресном пересылке. Этот запрос выполняется с помощью \_ \_ \_ флага перенаправления типа изменения RTM.

Запросы уведомлений об изменениях также могут быть ограничены подмножеством назначений путем регистрации уведомлений об изменениях только в "помеченных" местах назначения. Клиент может пометить место назначения для уведомления об изменении, вызвав [**ртммаркдестфорчанженотификатион**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmmarkdestforchangenotification).

Когда происходит изменение, диспетчер таблиц маршрутизации проверяет наличие клиентов, которые должны получать уведомления об этом изменении. Клиент должен получать уведомления об изменении, если выполняются все перечисленные ниже условия.

-   Тип произошедшего изменения — это тип, для которого клиент зарегистрировался для уведомления.
-   Изменения в назначении, отмеченные клиентом, или какие-либо назначения, если клиент запросил изменения для всех назначений
-   Запрошенное клиентом уведомление об изменении для представления, в котором произошло это изменение

Если изменение соответствует всем указанным выше критериям, изменение кэшируется и клиент получает уведомления.

В уведомлении не указываются фактические изменения, а только те, которые они имели. Клиент должен получить изменения, вызвав [**ртмжетчанжеддестс**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmgetchangeddests) , используя маркер уведомления, полученный из предыдущего вызова метода [**ртмрегистерфорчанженотификатион**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmregisterforchangenotification).

 

 




