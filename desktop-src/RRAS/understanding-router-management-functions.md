---
title: Общие сведения о функциях управления маршрутизаторами
description: В следующих разделах рассматриваются различные типы функций управления маршрутизаторами и то, что следует учитывать для эффективного использования.
ms.assetid: 2f6831f2-39be-43b1-80bd-9a36c0f8a2af
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 85aac5cc2ec0167527f07c04459ec0aed7dbc248bed727fb4a949765c2fdcc4a
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120025404"
---
# <a name="understanding-router-management-functions"></a>Общие сведения о функциях управления маршрутизаторами

В следующих разделах рассматриваются различные типы функций управления маршрутизаторами и то, что следует учитывать для эффективного использования.

Для всех функций управления маршрутизатором требуются права администратора. Пользователь в группе опытных пользователей не имеет достаточных привилегий для использования функций управления маршрутизатором.

## <a name="the-different-classes-of-router-management-functions"></a>Различные классы функций управления маршрутизаторами

Функции управления маршрутизаторами можно разделить на функции администрирования и функции настройки. [Функции администрирования](router-administration-functions.md) имеют префикс мпрадмин, а [функции конфигурации](router-configuration-functions.md) имеют префикс мпрконфиг. Несмотря на именование, для управления маршрутизаторами используются оба набора функций. Функции Мпрадмин работают непосредственно на работающем маршрутизаторе. Функции Мпрконфиг имеют аналогичные функции, но работают с конфигурацией маршрутизатора, хранящейся в реестре. Оба типа функций передают [информационные блоки](router-information-functions.md).

Функции управления маршрутизаторами также можно разделить на отдельные компоненты маршрутизатора, которыми они управляют: интерфейсы, диспетчеры маршрутизаторов или клиенты диспетчера маршрутизаторов.

[Функции интерфейса маршрутизатора](router-interface-functions.md) имеют префикс либо мпрадмининтерфаце, либо мпрконфигинтерфаце. Используйте эти функции для доступа к интерфейсам. [Функции диспетчера маршрутизаторов](router-manager-transport-functions.md) имеют префикс Мпрадминтранспорт или мпрконфигтранспорт. Используйте эти функции для доступа к диспетчерам маршрутизаторов. Наконец, у [клиента диспетчера маршрутизаторов](router-manager-client-interfacetransport-functions.md) есть префикс Мпрадмининтерфацетранспорт или мпрконфигинтерфацетранспорт. Используйте эти функции для доступа к клиентам, работающим на маршрутизаторе.

Подмножество функций Мпрадмин — это [функции мпрадминмиб](/windows/desktop/RRAS/about-router-management-with-mib). Они также работают только с выполняющимся маршрутом. Однако эти функции не передают информационные блоки. Эти функции обеспечивают дополнительную гибкость в конструкторе протоколов, особенно для получения сведений о неконфигурации, например статистики.

## <a name="ensuring-that-changes-occur-immediately-and-are-persistent"></a>Проверка того, что изменения происходят немедленно и являются постоянными

Разработчик может вносить изменения в конфигурацию маршрутизатора непосредственно с помощью [функций настройки маршрутизатора](router-configuration-functions.md). Однако любые изменения, внесенные в конфигурацию, вступают в силу только после перезапуска маршрутизатора, поскольку это единственный момент, когда DIM считывает конфигурацию из реестра.

Разработчик может вносить изменения в выполняющийся маршрутизатор с помощью [функций администрирования маршрутизатора](router-administration-functions.md). Однако эти изменения не являются постоянными: поскольку они не были записаны в реестр, они теряются при перезапуске маршрутизатора.

Для внесения немедленных и постоянных изменений разработчику необходимо использовать функции администрирования маршрутизатора и конфигурации маршрутизатора. Если маршрутизатор не работает, разработчику необходимо вызвать только соответствующие функции настройки маршрутизатора.

Для запроса сведений от работающего маршрутизатора используйте функции администрирования маршрутизатора. Если маршрутизатор не работает, запросите сведения, используя функции настройки маршрутизатора.

Функции [**мпрадмининтерфацекреате**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacecreate) и [**мпрадмининтерфацесетинфо**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacesetinfo) поддерживают структуру с [**\_ интерфейсом MPR \_ 2**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_2) . Однако [**мпрконфигинтерфацекреате**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacecreate) и [**мпрконфигинтерфацесетинфо**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacesetinfo) не имеют. Чтобы создать постоянный интерфейс вызова по требованию после перезагрузки, вызовите **мпрадмининтерфацекреате** с **\_ интерфейсом MPR \_ 2**, а затем вызовите **мпрконфигинтерфацекреате** с [**\_ интерфейсом MPR \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_0) или [**многопротокольный \_ интерфейс \_ 1**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_1). Аналогичным образом, чтобы внести постоянные изменения в интерфейс вызова по требованию, вызовите **мпрадмининтерфацесетинфо** с **\_ Interface \_ 2**, затем вызовите **мпрконфигинтерфацесетинфо** с **\_ интерфейсом MPR \_ 0** или **многопротокольный \_ интерфейс \_ 1**.

## <a name="using-router-administration-and-configuration-functions-remotely"></a>Удаленное использование функций администрирования и настройки маршрутизатора

Большинство функций администрирования и настройки маршрутизатора можно вызывать на компьютере, отличном от управляемого. Эти функции принимают в качестве параметра, обработчика для службы маршрутизатора или конфигурацию для администрирования. Функции администрирования используют RPC (удаленный вызов процедур) для взаимодействия со службой маршрутизации, заданной этим маркером. Функции настройки записывают и считывают данные из реестра компьютера, указанного в маркере.

Для администрирования службы маршрутизации на удаленном компьютере сначала вызовите [**мпрадминиссервицеруннинг**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminisservicerunning) , чтобы убедиться, что служба запущена. Затем вызовите [**мпрадминсерверконнект**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminserverconnect) , чтобы получить маркер. Если служба маршрутизатора не запущена на удаленном компьютере, все вызовы администрирования маршрутизатора (Мпрадмин) завершатся ошибкой.

Чтобы внести изменения в конфигурацию маршрутизатора на удаленном компьютере, получите маркер, вызвав функцию [**мпрконфигсерверконнект**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfigserverconnect) .

 

 