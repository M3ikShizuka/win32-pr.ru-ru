---
title: Регистрация в диспетчере таблиц маршрутизации
description: Прежде чем клиент сможет получить доступ к таблице маршрутизации, сначала необходимо зарегистрировать диспетчер таблиц маршрутизации с помощью функции Ртмрегистерентити.
ms.assetid: 9bdbe138-d31b-42bb-9c51-5f1c5e8a4ca7
keywords:
- Диспетчер таблиц маршрутизации версия 2 RRAS, регистрация
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 088072fac8679d9b2f87729b67a826ac850e77109f18b28fef3c2dc33c433f7b
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120028294"
---
# <a name="registering-with-the-routing-table-manager"></a>Регистрация в диспетчере таблиц маршрутизации

Прежде чем клиент сможет получить доступ к таблице маршрутизации, сначала необходимо зарегистрировать диспетчер таблиц маршрутизации с помощью функции [**ртмрегистерентити**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmregisterentity) .

Когда клиент регистрируется, он передается в диспетчер таблиц маршрутизации к структуре [**\_ \_ сведений об сущности RTM**](/windows/desktop/api/Rtmv2/ns-rtmv2-rtm_entity_info) . Эта структура содержит сведения, которые однозначно идентифицируют клиента, семейство адресов и экземпляр диспетчера таблиц маршрутизации, с которым регистрируется клиент. Клиент также может установить обратный вызов [**\_ \_ обратного вызова для события RTM**](/windows/win32/api/rtmv2/nc-rtmv2-_event_callback) . Диспетчер таблиц маршрутизации будет использовать этот обратный вызов для уведомления клиента о событиях, таких как уведомления об изменениях и регистрации клиентов.

Диспетчер таблиц маршрутизации завершает свою обработку регистрации и возвращает клиенту маркер. Клиент должен использовать этот обработчик для всех последующих вызовов функций RTMv2.

Функция [**ртмрегистерентити**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmregisterentity) , используемая в RTMv2, аналогична функции [**ртмрегистерклиент**](rtmregisterclient.md) , которая используется в RTMv1. Функция **ртмрегистерклиент** устарела, за исключением клиентов, использующих протокол IPX.

После того как клиент завершит взаимодействие с диспетчером таблиц маршрутизации, он должен вызвать [**ртмдерегистерентити**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmderegisterentity). Диспетчер таблиц маршрутизации уничтожает связанный с клиентом маркер. Чтобы избежать утечек памяти, клиент должен убедиться, что он освобождает все дескрипторы и все маршруты и следующие прыжки, которыми он владеет, перед вызовом **ртмдерегистерентити**.

Пример кода, демонстрирующий использование этих функций, см. в разделе [Регистрация в диспетчере таблиц маршрутизации](register-with-the-routing-table-manager.md) и [Использование обратного вызова уведомления о событиях](use-the-event-notification-callback.md).

 

 




