---
title: Приостановленные состояния
description: Во время операции подключения возможны случаи, когда удаленный сервер не может продолжать работу без дополнительных сведений от локального пользователя.
ms.assetid: a1a36b2a-33df-4cba-85a6-f4225779cd63
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 914acb85ccf74c92b4bd4119966a421faddeb011
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104339057"
---
# <a name="paused-states"></a>Приостановленные состояния

Во время операции подключения возможны случаи, когда удаленный сервер не может продолжать работу без дополнительных сведений от локального пользователя. Начиная с Windows NT 3,5, функция [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) поддерживает приостановленные состояния. Приостановленное состояние позволяет диспетчеру подключений удаленного доступа приостановить операцию подключения, чтобы клиентское приложение RAS может получать данные от пользователя.

Приостановленные состояния полезны в следующих ситуациях.

-   Когда пользователю необходимо указать номер [обратного вызова](callback-connections.md) .
-   При сбое проверки подлинности пользователя пользователь может ввести другое имя пользователя и пароль.
-   По истечении срока действия пароля пользователь может указать новый пароль.

По умолчанию поддержка приостановленного состояния отключена. Клиенты RAS, которые хотят поддерживать приостановленные состояния, должны установить \_ флаг рдеоптс пауседстатес в структуре [**расдиалекстенсионс**](/previous-versions/windows/desktop/legacy/aa377029(v=vs.85)) , передаваемой в качестве параметра в [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala).

Когда происходит приостановленное состояние, диспетчер подключений удаленного доступа вызывает обработчик уведомлений клиента. Если поддержка приостановленного состояния отключена, то сообщение уведомления указывает на ошибку, а операция подключения завершается ошибкой. Если он включен, диспетчер соединений приостанавливает операцию подключения для ожидания ответа клиента RAS. Клиент RAS может возобновить операцию подключения с помощью второго вызова [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) или завершить его, вызвав функцию [**рашангуп**](/windows/desktop/api/Ras/nf-ras-rashangupa) .

После получения входных данных пользователя клиент RAS перезапускает операцию подключения, вызвав программу [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) снова. Во втором вызове **rasdial** необходимо указать следующие сведения:

-   Маркер соединения, который был возвращен исходным вызовом [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) .
-   Тот же обработчик уведомлений, что и исходный вызов [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) .
-   Входные данные пользователя в соответствующих элементах структуры [**расдиалпарамс**](/previous-versions/windows/desktop/legacy/aa377238(v=vs.85)) . Другие члены структуры **расдиалпарамс** должны иметь те же сведения, что указаны в исходном вызове [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) .

Второй вызов [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) не может быть сделан в обработчике уведомлений.

 

 