---
title: Сведения об управлении маршрутизаторами с помощью MIB
description: API-интерфейсы базы MIB для управления маршрутизаторами позволяют запрашивать и задавать значения переменных MIB, экспортируемых одним из диспетчеров маршрутизаторов или любыми протоколами маршрутизации, которые служба диспетчера маршрутизаторов.
ms.assetid: d0fafd82-e7cb-4524-a499-d14830f02b21
keywords:
- Маршрутизация, база сведений об управлении
- Маршрутизация, базовая информация об управлении, описание
- Основные сведения об управлении RRAS
- MIB
- MIB, раздел "сведения об управлении"
- Основные сведения об управлении RRAS
- Основные сведения об управлении RRAS, описание
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7a867d903e0fb79f9360dc5f1cb485040ed4489b328365bc2daa063a35fbe27d
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117792199"
---
# <a name="about-router-management-with-mib"></a>Сведения об управлении маршрутизаторами с помощью MIB

API-интерфейсы базы MIB для управления маршрутизаторами позволяют запрашивать и задавать значения переменных MIB, экспортируемых одним из диспетчеров маршрутизаторов или любыми протоколами маршрутизации, которые служба диспетчера маршрутизаторов. С помощью этого API маршрутизатор поддерживает протокол SNMP.

В платформе SNMP каждый из управляемых объектов маршрутизатора представлен переменной, имеющей уникальный идентификатор объекта (OID). Соответствующий каждому OID соответствует значению, представляющему текущее состояние объекта. Коллекция OID и значений называется базой данных управления (MIB). Вызовы Мпрадминмиб позволяют разработчику указать объект по его OID и либо запросить, либо записать ("Set") значение объекта.

Чтобы запрашивать и задавать переменные MIB, модуль служб, который выполняет вызовы, должен определить набор структур данных. Эти структуры данных включают структуры для использования в качестве идентификаторов объектов и структур, которые содержат значения переменных MIB, к которым осуществляется доступ. Эти структуры данных являются непрозрачными для всех, кроме вызывающей стороны функции MIB и модуля, обслуживающего вызов.

Модуль, обслуживающий вызов MIB, является диспетчером маршрутизатора или одним из протоколов маршрутизации. Вызывающий объект должен указать Диспетчер маршрутизации, даже если вызов обрабатывается одним из протоколов маршрутизации. В этом случае вызывающий объект должен указать Диспетчер маршрутизаторов, соответствующий семейству протоколов для этого протокола маршрутизации. Например, если протокол маршрутизации с открытым кратчайшим маршрутом (OSPF) обрабатывает вызов MIB, вызывающему объекту необходимо указать Диспетчер IP-маршрутизаторов, так как OSPF принадлежит семейству IP-протоколов. В каждой из функций MIB параметр *двтранспортид* указывает Диспетчер маршрутизации, а параметр *раутингпид* указывает протокол маршрутизации. Диспетчер маршрутизаторов также имеет уникальный *раутингпид*, так как некоторые переменные MIB могут обрабатываться самим диспетчером маршрутизации.

Функции Мпрадминмиб можно вызывать на компьютере, отличном от управляемого. Функции Мпрадминмиб, которые запрашивают или записывают значения, принимают в качестве параметра обработку на компьютер для администрирования. Используйте функцию [**мпрадминмибсерверконнект**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibserverconnect) для установления соединения с удаленным компьютером и получения этого маркера. После вызова необходимых функций Мпрадминмиб для выполнения определенной административной задачи вызовите функцию [**мпрадминмибсервердисконнект**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibserverdisconnect) , чтобы завершить подключение к удаленному компьютеру.

Функции [**мпрадминмибентрикреате**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrycreate) и [**мпрадминмибентрисет**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentryset) принимают в качестве параметров OID и буфер, который содержит новое значение для объекта.

Функции [**мпрадминмибентрижет**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentryget), [**мпрадминмибентрижетфирст**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrygetfirst) и [**мпрадминмибентрижетнекст**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrygetnext) принимают в качестве параметров идентификатор объекта и адрес переменной указателя. При успешном возвращении переменная указателя указывает на буфер, содержащий значение для объекта. Вызывающий объект должен освободить память для этого буфера, вызвав функцию [**мпрадминмиббуфферфри**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibbufferfree) .

Функции [**мпрадминмибентрижетфирст**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrygetfirst) и [**мпрадминмибентрижетнекст**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrygetnext) позволяют разработчику выполнять *проверку SNMP*. Так как идентификаторы объектов упорядочены, каждый OID и, следовательно, каждый управляемый объект имеет *следующий* OID. Проверка SNMP означает обход части MIB путем считывания или записи последовательности идентификаторов объектов.

Все вызовы Мпрадминмиб проходят через диспетчер динамического интерфейса (DIM). В зависимости от OID, DIM передает вызов одному из диспетчеров маршрутизаторов. (Протокол SNMP и протокол IPX). Опять же, в зависимости от OID диспетчер маршрутизаторов может обрабатывать сам вызов или передавать вызов одному из его клиентов. Все клиенты маршрутизатора должны реализовать и экспортировать следующие функции, соответствующие аналогично именованным функциям Мпрадминмиб:

-   [**мибкреате**](/windows/desktop/api/Routprot/nc-routprot-pmib_create)
-   [**мибделете**](/windows/desktop/api/Routprot/nc-routprot-pmib_delete)
-   [**мибсет**](/windows/desktop/api/Routprot/nc-routprot-pmib_set)
-   [**мибжет**](/windows/desktop/api/Routprot/nc-routprot-pmib_get)
-   [**мибжетфирст**](/windows/desktop/api/Routprot/nc-routprot-pmib_get_first)
-   [**мибжетнекст**](/windows/desktop/api/Routprot/nc-routprot-pmib_get_next)
-   [**мибжеттрапинфо**](/windows/desktop/api/Routprot/nc-routprot-pmib_get_trap_info)
-   [**мибсеттрапинфо**](/windows/desktop/api/Routprot/nc-routprot-pmib_set_trap_info)

 

 




