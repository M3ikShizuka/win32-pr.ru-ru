---
title: Подзаписи и многоканальные подключения
description: Windows NT Server 4,0 обеспечивает поддержку для подзаписей телефонных книг, которые обеспечивают многоканальные подключения. Многоканальное соединение сочетает пропускную способность нескольких подключений, чтобы обеспечить единое подключение с более высокой пропускной способностью.
ms.assetid: 19cf6e1a-cdba-47e4-8d8f-d6030ed6f9e3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c1970e2e2ad668b376b1097aa20cd18986fb605a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104338732"
---
# <a name="subentries-and-multilink-connections"></a>Подзаписи и многоканальные подключения

Windows NT Server 4,0 обеспечивает поддержку для подзаписей телефонных книг, которые обеспечивают многоканальные подключения. Многоканальное соединение сочетает пропускную способность нескольких подключений, чтобы обеспечить единое подключение с более высокой пропускной способностью.

Запись телефонной книги RAS может содержать ноль или более подзаписей. Функция [**расжетентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rasgetentrypropertiesa) извлекает структуру [**расентри**](/previous-versions/windows/desktop/legacy/aa377274(v=vs.85)) , содержащую сведения о подзаписях записи телефонной книги. Элемент **двсубентриес** структуры **расентри** указывает количество подзаписей. Записи телефонной книги изначально не имеют подзаписей. Чтобы добавить подзаписи в запись телефонной книги, используйте функцию [**рассетсубентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rassetsubentrypropertiesa) .

Свойства каждой подзаписи включают номер телефона, имя и тип устройства TAPI, которое будет использоваться при наборе подзаписи. Кроме того, подзапись может включать список дополнительных телефонных номеров для набираемых, если служба RAS не может установить соединение с использованием основного номера. Функции [**рассетсубентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rassetsubentrypropertiesa) и [**Расжетсубентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rasgetsubentrypropertiesa) используют структуру [**рассубентри**](/previous-versions/windows/desktop/legacy/aa377839(v=vs.85)) для установки и получения свойств указанной подзаписи телефонной книги. Подзаписи идентифицируются с помощью индекса, отсчитываемый от единицы.

Вы можете вызвать функцию [**рассетентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rassetentrypropertiesa) , чтобы настроить запись RAS с многоканальным подключением для подключения всех подзаписей при первом наборе. Кроме того, можно настроить запись для предоставления переменной пропускной способности. В этом случае служба удаленного доступа сначала подключает одну подзапись, а затем подключает или отключает дополнительные подзаписи по мере необходимости. Для многоканального подключения с переменной пропускной способностью можно использовать структуру [**расдиалпарамс**](/previous-versions/windows/desktop/legacy/aa377238(v=vs.85)) , чтобы указать начальную подзапись для соединения при вызове функции [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) . При использовании функции [**расдиалдлг**](/windows/desktop/api/Rasdlg/nf-rasdlg-rasdialdlga) для подключения записи многоканальной связи можно использовать структуру [**расдиалдлг**](/previous-versions/windows/desktop/legacy/aa377023(v=vs.85)) , чтобы указать начальную подзапись для подключения.

Для многоканального подключения с переменной пропускной способностью используйте структуру [**расентри**](/previous-versions/windows/desktop/legacy/aa377274(v=vs.85)) с функцией [**рассетентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rassetentrypropertiesa) , чтобы указать параметры для подключения и отключения отдельных подзаписей. Служба RAS подключает дополнительную подзапись, когда используемая пропускная способность превышает указанный процент доступной пропускной способности в течение указанного интервала.

При вызове функции [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) для установления многоканального подключения можно указать функцию обратного вызова [**RasDialFunc2**](/windows/desktop/api/Ras/nc-ras-rasdialfunc2) для получения уведомлений о соединении. **RasDialFunc2** похож на функцию обратного вызова [**RasDialFunc1**](/windows/desktop/api/Ras/nc-ras-rasdialfunc1) , за исключением того, что она предоставляет дополнительные сведения для многоканального соединения, например индекс подзаписи, вызвавшей уведомление. Служба RAS вызывает функцию **RasDialFunc2** при подключении или отключении подзаписи.

Вы можете использовать **храсконн** подключения, чтобы зависнуть или получить сведения о многоканальном соединении. Можно получить маркер подключения для каждого подключения подзаписи, из которого состоит многоканальное соединение, а также для комбинированного многоканального подключения. При вызове функции [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) для установления многоканального соединения функция **rasdial** возвращает маркер комбинированного многоканального соединения. Аналогичным образом [**расенумконнектионс**](/windows/desktop/api/Ras/nf-ras-rasenumconnectionsa) возвращает комбинированный многоканальный маркер при перечислении соединений. Чтобы получить маркер для одного из подключений подзаписи в многоканальном соединении, вызовите функцию [**расжетсубентрихандле**](/windows/desktop/api/Ras/nf-ras-rasgetsubentryhandlea) .

Можно использовать объединенный дескриптор многоканального подключения и дескрипторы подключения подзаписи в функциях [**рашангуп**](/windows/desktop/api/Ras/nf-ras-rashangupa), [**расжетконнектстатус**](/windows/desktop/api/Ras/nf-ras-rasgetconnectstatusa)и [**расжетпрожектионинфо**](/previous-versions/windows/embedded/ms897107(v=msdn.10)) . Вызов **рашангуп** с Объединенным многоканальным маркером завершает все соединение. При вызове с помощью маркера подзаписи зависает только это подключение подзаписи. Аналогичным образом **расжетконнектстатус** возвращает сведения для Объединенного или индивидуального соединения в зависимости от указанного маркера. Сведения о проекции, возвращаемые функцией **расжетпрожектионинфо** для записи многоканальной связи, одинаковы для каждого дескриптора соединения подзаписи, как для основного дескриптора соединения.

 

 