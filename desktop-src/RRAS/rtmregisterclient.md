---
title: Функция Ртмрегистерклиент (RTM. h)
description: Функция Ртмрегистерклиент регистрирует клиента в качестве обработчика указанного протокола. Он устанавливает механизм уведомления об изменении маршрута для клиента и устанавливает параметры протокола.
ms.assetid: 70426601-695d-47ed-b71a-1df3fb8ddf10
keywords:
- RAS функции Ртмрегистерклиент
topic_type:
- apiref
api_name:
- RtmRegisterClient
api_location:
- Rtm.dll
api_type:
- DllExport
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 564f47e68fd6cdce3d5437fe184bac1ed74d8322
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "103803484"
---
# <a name="rtmregisterclient-function"></a>Функция Ртмрегистерклиент

\[Этот API был заменен API [диспетчера таблиц маршрутизации версии 2](about-routing-table-manager-version-2.md) и не будет доступен за пределами Windows Server 2003. Приложения должны использовать API диспетчера таблиц маршрутизации версии 2.\]

Функция **ртмрегистерклиент** регистрирует клиента в качестве обработчика указанного протокола. Он устанавливает механизм уведомления об изменении маршрута для клиента и устанавливает параметры протокола.

## <a name="syntax"></a>Синтаксис


```C++
HANDLE RtmRegisterClient(
  _In_ DWORD  ProtocolFamily,
  _In_ DWORD  RoutingProtocol,
  _In_ HANDLE ChangeEvent,
  _In_ DWORD  Flags
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*Протоколфамили* \[ окне\]
</dt> <dd>

Указывает семейство протоколов протокола маршрутизации для регистрации.

</dd> <dt>

*Раутингпротокол* \[ окне\]
</dt> <dd>

Указывает идентификатор протокола маршрутизации, аналогичный тому, который использовался при регистрации в диспетчере маршрутизаторов. См. [**регистерпротокол**](/windows/desktop/api/Routprot/nc-routprot-pregister_protocol).

</dd> <dt>

*Чанжеевент* \[ окне\]
</dt> <dd>

Указывает, что оптимальный маршрут к сети в таблице изменился. Диспетчер таблиц маршрутизации сигнализирует об этом событии после изменения лучшего маршрута на любую сеть в таблице. Дополнительные сведения об уведомлении о смене маршрута см. в разделе [**ртмдекуеуераутечанжемессаже**](rtmdequeueroutechangemessage.md) .

Это необязательный параметр. Если вызывающий объект задает для этого параметра **значение NULL** , диспетчер таблиц маршрутизации не уведомляет клиента об изменениях в оптимальном состоянии маршрута.

</dd> <dt>

*Флаги* \[ окне\]
</dt> <dd>

Задает различные параметры для специальной обработки протокола маршрутизации. В настоящее время поддерживается следующее значение.



| Флаги                                                                                                                                                                                               | Значение                                                                                                                                                                                                                                                 |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="RTM_PROTOCOL_SINGLE_ROUTE"></span><span id="rtm_protocol_single_route"></span><dl> <dt>**\_ \_ единый маршрут для протокола RTM \_**</dt> </dl> | Диспетчер таблиц маршрутизации хранит только один маршрут для каждой целевой сети для протокола маршрутизации. Иными словами, диспетчер таблиц маршрутизации заменяет записи маршрутов с одинаковыми номерами сетей назначения вместо добавления новых.<br/> |



 

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

При успешном возвращении значение **обработчика** , идентифицирующее клиента при последующих вызовах диспетчера таблиц маршрутизации.

Маркер **null** указывает, что диспетчеру таблиц маршрутизации не удалось зарегистрировать клиент. Вызовите [**GetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror) , чтобы получить причину сбоя.



| Значение                                                                                                         | Описание                                                                                     |
|---------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
| <dl> <dt>**клиент с ошибкой \_ \_ уже \_ существует**</dt> </dl> | Другой клиент уже зарегистрирован для работы с указанным Протоколом.<br/>              |
| <dl> <dt>**Ошибка \_ недопустимого \_ параметра**</dt> </dl>      | Указанное семейство протоколов не поддерживается, или параметр *flags* является недопустимым.<br/> |
| <dl> <dt>**\_нет \_ системных \_ ресурсов**</dt> </dl>   | Недостаточно ресурсов для выполнения операции.<br/>                                   |
| <dl> <dt>**Ошибка \_ не \_ хватает \_ памяти**</dt> </dl>     | Недостаточно памяти для распределения структур данных для клиента.<br/>                      |



 

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Ни одна версия не поддерживается<br/>                                                          |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                               |
| Поддержка конца сервера<br/>    | Windows Server 2003<br/>                                                     |
| Header<br/>                   | <dl> <dt>RTM. h</dt> </dl>   |
| Библиотека<br/>                  | <dl> <dt>RTM. lib</dt> </dl> |
| DLL<br/>                      | <dl> <dt>Rtm.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Справочник по диспетчеру таблиц маршрутизации версии 1](routing-table-manager-version-1-reference.md)
</dt> <dt>

[Функции диспетчера таблиц маршрутизации версии 1](routing-table-manager-version-1-functions.md)
</dt> <dt>

[**Функция**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror)
</dt> <dt>

[**регистерпротокол**](/windows/desktop/api/Routprot/nc-routprot-pregister_protocol)
</dt> <dt>

[Идентификаторы семейства протоколов RTMv1](routing-table-manager-version-1-protocol-family-identifiers.md)
</dt> <dt>

[**ртмдекуеуераутечанжемессаже**](rtmdequeueroutechangemessage.md)
</dt> <dt>

[**ртмдерегистерклиент**](rtmderegisterclient.md)
</dt> </dl>

 

