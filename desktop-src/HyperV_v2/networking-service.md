---
description: Сетевой профиль описывает объекты, используемые для настройки системы, чтобы разрешить виртуальным машинам взаимодействовать по сети.
ms.assetid: A5C4866B-0F65-47B5-8FC4-B92943842B86
title: Сетевая служба
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fc85b7a5121a3e7e42f333f829816184b57bd8eb
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105682641"
---
# <a name="networking-service"></a>Сетевая служба

Сетевой профиль описывает объекты, используемые для настройки системы, чтобы разрешить виртуальным машинам взаимодействовать по сети. Глобальные сетевые объекты, используемые для настройки сетевого коммутатора в операционной системе управления, включают в себя классы [**мсвм \_ виртуалесернетсвитчманажементсервице**](msvm-virtualethernetswitchmanagementservice.md), [**мсвм \_ виртуалесернетсвитч**](msvm-virtualethernetswitch.md)и [**мсвм \_ есернетсвитчпорт**](msvm-ethernetswitchport.md) . Сетевые объекты виртуальной машины, используемые для настройки сетевого адаптера (NIC) на виртуальной машине, включают в себя классы [**мсвм \_ емулатедесернетпорт**](msvm-emulatedethernetport.md), [**мсвм \_ ресаурцеаллокатионсеттингдата**](msvm-resourceallocationsettingdata.md)и [**мсвм \_ ланендпоинт**](msvm-lanendpoint.md) .

Корнем глобального сетевого профиля является класс [**мсвм \_ виртуалесернетсвитч**](msvm-virtualethernetswitch.md) . Этот класс представляет устройство виртуального коммутатора в операционной системе управления. **Мсвм \_ Виртуалесернетсвитч** связан с экземплярами класса [**мсвм \_ свитчпорт**](https://www.bing.com/search?q=**Msvm\_SwitchPort**) , который представляет порты виртуального коммутатора. Экземпляры классов **мсвм \_ Виртуалесернетсвитч** и [**мсвм \_ есернетсвитчпорт**](msvm-ethernetswitchport.md) создаются, удаляются и подключаются через класс [**мсвм \_ виртуалесернетсвитчманажементсервице**](msvm-virtualethernetswitchmanagementservice.md) (не показано на рисунке выше).

Служба управления виртуальным коммутатором (ВСМС) представляет собой сетевую службу, имеющуюся на одном узле Hyper-V, и содержит методы для [**мсвм \_ виртуалесернетсвитчманажементсервице**](msvm-virtualethernetswitchmanagementservice.md) , используемые для управления определением, изменением и уничтожением глобальных сетевых ресурсов, таких как виртуальные коммутаторы, порты коммутатора и внутренние порты Ethernet.

Представление сетевого адаптера Ethernet в виртуальной машине выглядит очень похоже на любое другое устройство, как описано в [**службе управления виртуальной системой**](virtual-system-management-service.md). Классы [**мсвм \_ Емулатедесернетпорт**](msvm-emulatedethernetport.md) и [**мсвм \_ синсетицесернетпорт**](msvm-syntheticethernetport.md) представляют устройство виртуального сетевого адаптера и настраиваются с помощью связанного экземпляра [**мсвм \_ ресаурцеаллокатионсеттингдата**](msvm-resourceallocationsettingdata.md) (RASD). Единственная необычная характеристика этого представления заключается в том, что при создании экземпляра виртуальной машины, в свою очередь, создает устройства **мсвм \_ Емулатедесернетпорт** и **мсвм \_ синсетицесернетпорт** , она также создает связанный экземпляр [**мсвм \_ ланендпоинт**](msvm-lanendpoint.md) для виртуального сетевого адаптера. Аналогично, когда виртуальная машина сохраняется или отключается, а экземпляры **мсвм \_ Емулатедесернетпорт** и **мсвм \_ синсетицесернетпорт** уничтожаются, связанный экземпляр [**мсвм \_ вмланендпоинт**](https://www.bing.com/search?q=**Msvm\_VmLANEndpoint**) также уничтожается. Цель **мсвм \_ ланендпоинт** — служить мостом для подключения двух сетевых портов друг к другу. В этом случае он используется для подключения виртуального сетевого адаптера к порту на устройстве виртуального коммутатора. Иными словами, он подключает экземпляры **мсвм \_ Емулатедесернетпорт** и **мсвм \_ синсетицесернетпорт** на виртуальной машине к определенному экземпляру [**мсвм \_ есернетсвитчпорт**](msvm-ethernetswitchport.md) на виртуальном коммутаторе. Чтобы подключить коммутатор к внешней сети, необходимо привязать физический порт Ethernet к [**мсвм \_ VirtualSwitch**](https://www.bing.com/search?q=**Msvm\_VirtualSwitch**) через [**биндекстерналесернетпорт**](https://www.bing.com/search?q=**BindExternalEthernetPort**). Неотрицательно, при подключении коммутатора к сетевому стеку узла или внутренней сетевой карте, используйте Коннектинтернал, чтобы виртуальная машина выходила на узле, а не во внешнем мире. [**Мсвм \_ ActiveConnection**](msvm-activeconnection.md) подключает порт коммутатора к [**мсвм \_ свитчланендпоинт**](https://www.bing.com/search?q=**Msvm\_SwitchLANEndpoint**) , к которому подключен порт в Hyper-V. Наличие этого объекта означает, что порт коммутатора и **мсвм \_ свитчланендпоинт** активно подключены, а порт Ethernet, связанный с **мсвм \_ ланендпоинт** , может взаимодействовать с сетью через порт коммутатора.

 

 



