---
title: Асинхронные составные файлы
description: Асинхронные составные файлы, предоставляемые системой асинхронного хранилища, обеспечивают эффективную загрузку составных файлов из Интернета в целом и в частности, в Интернете.
ms.assetid: 6cad074e-07a8-434f-a402-e29cb66a1a18
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 04de2162b50283b12bc8deed6ec908d92e7584d7
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104413439"
---
# <a name="asynchronous-compound-files"></a>Асинхронные составные файлы

Асинхронные составные файлы, предоставляемые системой асинхронного хранилища, обеспечивают эффективную загрузку составных файлов из Интернета в целом и в частности, в Интернете. Базовая архитектура асинхронных составных файлов показана на следующей схеме.

![Базовая архитектура асинхронных составных файлов](images/asy-stor.png)

Реализация асинхронных составных файлов может работать с новыми асинхронными типами моникера, которые понимают протоколы Интернета и могут быть привязаны к объекту, определяемому URL-адресом. Такое специальное имя возвращает асинхронный указатель [**IStream**](/windows/desktop/api/Objidl/nn-objidl-istream) или [**IStorage**](/windows/desktop/api/Objidl/nn-objidl-istorage) из вызова клиента в [**IMoniker:: биндтостораже**](/windows/win32/api/objidl/nf-objidl-imoniker-bindtostorage).

Составные файлы в целом реализуются на основе объекта массива байтов — абстракции файла, представляющего данные объекта в виде массива плоских байтов. Объект массива байтов предоставляет свои функциональные возможности через интерфейс [**ILockBytes**](/windows/desktop/api/Objidl/nn-objidl-ilockbytes) . Если массив байтов поддерживает неблокируемое асинхронное хранилище, он возвращает E в \_ ожидании реализации составного файла, который, в свою очередь, передает ошибку обратно вызывающему объекту.

Чтобы контролировать данные, доступные во время загрузки, массив байтов, поддерживающий асинхронное хранилище, предоставляет интерфейс [**ифилллоккбитес**](/windows/desktop/api/Objidl/nn-objidl-ifilllockbytes) для объекта-оболочки, предоставляемого системой специально для этой цели. Код загрузки, предоставленный асинхронным моникером, вызывает этот интерфейс для асинхронного заполнения массива байтов по мере доступности данных. Объект-оболочка также предоставляет интерфейс **ILockBytes** , который используется реализацией асинхронных составных файлов для чтения и записи данных из массива и в него.

Объекты асинхронного хранения и потока предоставляют точку подключения для интерфейса [**ипрогресснотифи**](/windows/win32/api/objidl/nn-objidl-iprogressnotify) , который реализуется кодом скачивания асинхронного моникера. Реализация асинхронных составных файлов вызывает **ипрогресснотифи** , чтобы предоставить загрузчику сведения о состоянии операции загрузки.

 

 