---
description: Системтрацепровидер — это поставщик ядра с предопределенным набором событий ядра, поддерживаемых в Windows 7, Windows Server 2008 R2 и более поздних версиях.
ms.assetid: 6808EC45-C8C3-45D7-9E4C-337F6A4CF9C8
title: Настройка и запуск сеанса Системтрацепровидер
ms.topic: article
ms.date: 06/02/2021
ms.openlocfilehash: 66e9d672a7c8e6358c2a92e7661e0d4e2a5878ab
ms.sourcegitcommit: cb87082135319cbdc5df541e3071eebb83a58972
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2021
ms.locfileid: "111386744"
---
# <a name="configuring-and-starting-a-systemtraceprovider-session"></a>Настройка и запуск сеанса Системтрацепровидер

Системтрацепровидер — это поставщик ядра с предопределенным набором событий ядра, поддерживаемых в Windows 7, Windows Server 2008 R2 и более поздних версиях. В Windows 7 и Windows Server 2008 R2 Системтрацепровидер можно было использовать только для сеанса ведения журнала ядра NT.

В Windows 8, Windows Server 2012 и более поздних версий Системтрацепровидер можно мультиплексировать до восьми сеансов ведения журнала. Первые два слота для сеансов ведения журнала зарезервированы для журнала ядра NT и циклического средства ведения журнала контекста ядра.

Дополнительные сведения об использовании сеанса ведения журнала ядра NT в качестве поставщика трассировки см. в разделе [Настройка и запуск сеанса ведения журнала ядра NT](configuring-and-starting-the-nt-kernel-logger-session.md).

В Windows 10 SDK Build 20348 и более поздних версий Системтрацепровидер можно настроить с помощью отдельных поставщиков системы, которыми можно управлять с помощью [EnableTraceEx2](/windows/win32/api/evntrace/nf-evntrace-enabletraceex2) , таких как стандартные трассировки событий для поставщиков событий Windows. Полный список поставщиков систем, ключевых слов и соответствующих устаревших флагов и групп см. в разделе [поставщики систем](system-providers.md) .

## <a name="enable-a-systemtraceprovider-session"></a>Включение сеанса Системтрацепровидер

Чтобы разрешить Системтрацепровидер запуск сеанса, отличного от средства ведения журнала ядра NT, выполните следующую команду:

**tracelog-Start MySession-f c: \\ Kernel1. ETL-ЕФЛАГ proc \_ Thread + Loader + ксвитч**

Чтобы программно включить Системтрацепровидер для запуска сеанса, отличного от средства ведения журнала ядра NT, выполните следующие действия.

-   Определите имя частного средства ведения журнала.

    **\#Определение частного \_ имени регистратора \_ L "некоторые частные сеансы трассировки"**

-   На контроллере установите следующие элементы структуры [**\_ \_ свойств трассировки событий**](/windows/win32/api/evntrace/ns-evntrace-event_trace_properties) .

    Задайте  для логфилемоде **\_ \_ \_ \_ режим системного журнала отслеживания событий**.

    Задайте для **логжернаме** закрытое средство ведения журнала **вместо \_ \_ имени средства ведения журнала ядра**.

    Убедитесь, что элемент **вноде. GUID** структуры [**\_ \_ свойств трассировки событий**](/windows/win32/api/evntrace/ns-evntrace-event_trace_properties) не имеет значение **системтрацеконтролгуид**. Для этого элемента необходимо назначить новый **идентификатор GUID** .

-   На потребителе установите для элемента **логжернаме** структуры [**\_ \_ журнала событий трассировки**](/windows/win32/api/evntrace/ns-evntrace-event_trace_logfilea) значение этого частного средства ведения журнала.

> [!Note]  
> Если вы хотите, чтобы у пользователей, не являющихся администраторами, или в службе, не поддерживающей TCB, можно было запустить сеанс трассировки профилирования с помощью Системтрацепровидер от имени сторонних приложений, необходимо предоставить привилегию профиля пользователя, а затем добавить этого пользователя в **идентификатор GUID** сеанса (созданный для сеанса ведения журнала) и **идентификатор GUID** поставщика трассировки системы, чтобы включить поставщик трассировки системы. Дополнительные сведения см. в описании функции [**евентакцессконтрол**](/windows/desktop/api/Evntcons/nf-evntcons-eventaccesscontrol) .

 

## <a name="related-topics"></a>Связанные темы

[Настройка и запуск закрытого сеанса ведения журнала](configuring-and-starting-a-private-logger-session.md)

[Настройка и запуск сеанса авторегистратора](configuring-and-starting-an-autologger-session.md)

[Настройка и запуск сеанса трассировки событий](configuring-and-starting-an-event-tracing-session.md)

[Настройка и запуск сеанса ведения журнала ядра NT](configuring-and-starting-the-nt-kernel-logger-session.md)

[Поставщики систем](system-providers.md)

[Обновление сеанса трассировки событий](updating-an-event-tracing-session.md)

 

 
