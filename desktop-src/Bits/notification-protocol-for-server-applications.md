---
title: Протокол уведомлений для серверных приложений
description: Служба BITS использует свойство Битссервернотификатионтипе, чтобы определить, как BITS отправляет содержимое файла отправки в серверное приложение.
ms.assetid: d5193d0c-3ab4-47ab-a570-fea2904a4371
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f0d35f6f5fec1a1de9ebd5c2c244a55bc1806b06
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986219"
---
# <a name="notification-protocol-for-server-applications"></a>Протокол уведомлений для серверных приложений

Служба BITS использует свойство [битссервернотификатионтипе](bits-iis-extension-properties.md) , чтобы определить, как BITS отправляет содержимое файла отправки в серверное приложение. Если свойство Битссервернотификатионтипе имеет значение 1, [то BITS передает расположение файла отправки в заголовок](#sending-the-location-of-the-upload-file-in-a-header). Если свойство Битссервернотификатионтипе имеет значение 2, то [BITS передает содержимое файла отправки в тексте запроса](#sending-the-upload-file-in-the-body-of-the-request).

Дополнительные сведения о том, как служба BITS обрабатывает ошибки серверного приложения, см. в разделе [Обработка ошибок серверного](#handling-server-application-errors)приложения.

## <a name="sending-the-location-of-the-upload-file-in-a-header"></a>Отправка расположения файла отправки в заголовке

BITS передает расположение файлов отправки и ответов в серверное приложение в заголовках, если свойство [битссервернотификатионтипе](bits-iis-extension-properties.md) имеет значение 1. Серверное приложение открывает файл отправки, обрабатывает данные, а затем создает ответный файл. По умолчанию служба BITS удаляет файлы отправки и ответа с сервера после получения ответа от серверного приложения. Чтобы служба BITS скопировала файл отправки в расположение, указанное именем удаленного файла в задании, включите в ответ заголовок BITS-Copy-File-to-Destination. Если вы не включаете заголовок и хотите сохранить файлы для отправки и ответа, необходимо скопировать файлы отправки и ответа в новое расположение перед ответом. В следующей таблице показаны заголовки запросов.



| Заголовок запроса              | Описание                                                                                |
|-----------------------------|--------------------------------------------------------------------------------------------|
| BITS-исходный-Request-URL   | Содержит удаленное имя, указанное в задании.                                             |
| BITS-Request-файл-имя  | Содержит полный путь к отправленным данным.                                               |
| BITS-Response-файл-имя | Содержит полный путь к папке, в которой служба BITS должна записывать ответ на серверное приложение. |



 

В следующей таблице показаны заголовки ответов.



| Заголовок ответа               | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|-------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| BITS-статический-Response-URL      | Необязательный элемент. Содержит абсолютный URL-адрес (не указывайте относительный URL-адрес) для статического файла данных, который будет использоваться в качестве ответа. Файл статических данных должен быть доступен клиенту BITS. При использовании этого заголовка не создавайте файл ответов, указанный в заголовке запроса BITS-Response-File-Name. Обратите внимание, что служба BITS не удаляет этот файл.<br/>                                                                                                           |
| BITS-Copy-File-to-Destination | Необязательный элемент. По умолчанию, если свойство [битссервернотификатионтипе](bits-iis-extension-properties.md) имеет значение 1 или 2, сервер BITS не копирует файл отправки в расположение, указанное именем удаленного файла в задании. Чтобы служба BITS скопировала файл в расположение, указанное именем удаленного файла в задании, отправьте этот заголовок ответа. Можно указать любое значение; В БИТАХ не используется значение. Обратите внимание, что папки в пути к удаленному файлу должны существовать. |



 

В следующем запросе показаны биты, отправляющие расположение файла отправки в серверное приложение.

``` syntax
POST https://myserver/myvdir/handle_upload.asp?ACCOUNT=873112 HTTP/1.1
Host: myserver
BITS-Original-Request-URL: https://front-end-server/vdir
BITS-Request-DataFile-Name: c:\physical-path\BITS-Sessions\{5e53c221-f2d6-4bf2-
b994-1dc43ceaca8d}\request
BITS-Response-DataFile-Name: c:\physical-path\BITS-Sessions\{5e53c221-f2d6-4bf2-
b994-1dc43ceaca8d}\response
Content-Length: 0
```

Ниже показано, как серверное приложение отвечает на BITS; ответ помещается в файл, указанный в заголовке запроса BITS-Response-File-Name.

``` syntax
HTTP/1.1 200 - OK
Content-Length: 0
```

## <a name="sending-the-upload-file-in-the-body-of-the-request"></a>Отправка файла отправки в тексте запроса

BITS отправляет файл отправки в тело запроса, если свойство [битссервернотификатионтипе](bits-iis-extension-properties.md) имеет значение 2. Отправка файла отправки в теле запроса позволяет существующим сценариям и приложениям работать с минимальными изменениями. Файл отправки и ответ передаются в запросе и ответе соответственно. В следующей таблице показан заголовок запроса.



| Заголовок запроса            | Описание                                    |
|---------------------------|------------------------------------------------|
| BITS-исходный-Request-URL | Содержит удаленное имя, указанное в задании. |



 

В следующей таблице показаны заголовки ответов.



| Заголовок ответа               | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| BITS-статический-Response-URL      | Необязательный элемент. Содержит абсолютный URL-адрес (не указывайте относительный URL-адрес) для статического файла данных, который будет использоваться в качестве ответа. Файл статических данных должен быть доступен клиенту BITS. При использовании этого заголовка не включайте ответ в поток. Обратите внимание, что служба BITS не удаляет этот файл.<br/>                                                                                                                                      |
| BITS-Copy-File-to-Destination | Необязательный элемент. Если свойство [битссервернотификатионтипе](bits-iis-extension-properties.md) имеет значение 1 или 2, сервер BITS не копирует файл отправки в расположение, указанное именем удаленного файла в задании. Чтобы служба BITS скопировала файл в расположение, указанное с помощью имени удаленного файла, отправьте этот заголовок ответа. Можно указать любое значение; В БИТАХ не используется значение. Обратите внимание, что папки в пути к удаленному файлу должны существовать. |



 

В следующем запросе показаны биты передачи отправленного файла в серверное приложение в тексте запроса.

``` syntax
POST https://myserver/myvdir/handle_upload.asp?ACCOUNT=873112 HTTP/1.1
Host: myserver
BITS-Original-Request-URL: https://front-end-server/vdir
Content-Length: 80000

80000 bytes of upload data goes here
```

Следующий ответ показывает, что серверное приложение передает ответные данные в биты в тексте ответа.

``` syntax
HTTP/1.1 200 - OK
Content-Length: 100

100 bytes of reply data goes here
```

## <a name="handling-server-application-errors"></a>Обработка ошибок серверного приложения

См. раздел [Обработка ошибок серверного приложения](handling-server-application-errors.md).

 

 





