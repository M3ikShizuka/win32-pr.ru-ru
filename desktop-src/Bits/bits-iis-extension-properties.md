---
title: Свойства расширения IIS BITS
description: Фоновая интеллектуальная служба передачи (BITS) использует ISAPI для расширения служб IIS для поддержки заданий отправки.
ms.assetid: 08a40cc1-ec6d-4b65-971a-15c7b06df148
keywords:
- БИТЫ свойств расширения IIS BITS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1afb18e324419834d5a1445d1a1b9e5390f5d932
ms.sourcegitcommit: 9b5faa61c38b2d0c432b7f2dbee8c127b0e28a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2021
ms.locfileid: "122480950"
---
# <a name="bits-iis-extension-properties"></a>Свойства расширения IIS BITS

Фоновая интеллектуальная служба передачи (BITS) использует ISAPI для расширения служб IIS для поддержки [**заданий отправки**](/windows/win32/api/bits/ne-bits-bg_job_type). В следующей таблице перечислены свойства, которые служба BITS добавляет в метабазу IIS для компонента виртуального каталога. Службы BITS используют эти свойства для определения способа передачи файлов. Свойства расширения IIS BITS наследуются, за исключением **битсуплоаденаблед**.




| Свойство | Описание | 
|----------|-------------|
| <strong>Битсуплоаденаблед</strong> Тип данных: <strong>логический</strong><br /> | Указывает, включены ли передачи BITS в виртуальном каталоге. Если параметр отсутствует или равен 0, отправки BITS отключаются.<br /> Это свойство доступно только для чтения. Чтобы задать это свойство, вызовите метод <a href="/windows/win32/api/bitscfg/nf-bitscfg-ibitsextensionsetup-enablebitsuploads"><strong>енаблебитсуплоадс</strong></a> или <a href="/windows/win32/api/bitscfg/nf-bitscfg-ibitsextensionsetup-disablebitsuploads"><strong>дисаблебитсуплоадс</strong></a> интерфейса <a href="/windows/win32/api/bitscfg/nn-bitscfg-ibitsextensionsetup"><strong>ибитсекстенсионсетуп</strong></a> .<br /> | 
| <strong>Битссессионтимеаут</strong> Тип данных: <strong>DWORD</strong><br /> | Количество секунд, в течение которых соединение сохраняется, если не выполняется отправка файла. во время выполнения таймер сбрасывается. Служба BITS закрывает подключение, если истекло время ожидания и выполняется очистка данных, связанных с сеансом.<br /> Установка короткого времени ожидания сеанса может быть проблемой для заданий отправки и ответа, так как ответ загружается только после того, как пользователь вошел в систему и подключен к сети. Время ожидания сеанса может истекает до скачивания ответа. в этом случае сеанс отменяется и файл ответов удаляется.<br /> Обратите внимание, что служба BITS отменяет задание при достижении значения <a href="/windows/win32/bits/group-policies">жобинактивититимеаут</a> групповая политика (по умолчанию 90 дней), независимо от этого параметра.<br /> Значение по умолчанию — 1 209 600 (14 дней).<br /> | 
| <strong>Битсмаксимумуплоадсизе</strong> Тип данных: <strong>строка</strong><br /> | Максимальное число байтов, которое можно передать на задание. Укажите максимальное число байтов в виде десятичной строки. Строковое значение должно быть меньше или равно "1844674407370955". Пустая строка совпадает с указанием "1844674407370955".<br /> Значение по умолчанию — пустая строка.<br /><blockquote>[!Note]<br />В IIS 7 предел передачи по умолчанию составляет 30 000 000 байт. Значение свойства <strong>битсмаксимумуплоадсизе</strong> не может превышать ограничение IIS. Дополнительные сведения и сведения об изменении параметров IIS по умолчанию см. в разделе <a href="https://support.microsoft.com//kb/942074">KB942074</a>.</blockquote><br /><br /> | 
| <strong>Битссервернотификатионтипе</strong> Тип данных: <strong>DWORD</strong><br /> | Указывает способ отправки файла отправки в серверное приложение. Возможные значения: 0, 1 и 2.<br /> Значение 0 означает, что файл не отправляется в серверное приложение. BITS помещает файл отправки в каталог, указанный в удаленном имени (удаленное имя, указанное при <a href="/windows/win32/api/bits/nf-bits-ibackgroundcopyjob-addfile">добавлении файла</a> в задание), не уведомляя серверное приложение. Если файл в данный момент существует в целевом каталоге, он заменяется файлом отправки.<br /> Значение 1 означает, что BITS передает расположение файла отправки в серверное приложение, указанное в свойстве <strong>битссервернотификатионурл</strong> . Серверное приложение обрабатывает файл и создает ответный файл при необходимости. По умолчанию служба BITS удаляет файлы отправки и ответа с сервера после получения ответа от серверного приложения. Чтобы служба BITS скопировала файл отправки в расположение, указанное именем удаленного файла в задании, включите в ответ заголовок <a href="/windows/win32/bits/notification-protocol-for-server-applications">BITS-Copy-File-to-Destination</a> . Если вы не включаете заголовок и хотите сохранить файлы для отправки и ответа, необходимо скопировать файлы отправки и ответа в новое расположение перед ответом.<br /> Значение 2 означает, что BITS передает файл отправки в тексте запроса в серверное приложение, указанное в свойстве <strong>битссервернотификатионурл</strong> . Серверное приложение обрабатывает файл и передает обратно ответ в тексте ответа, если это необходимо.<br /> Дополнительные сведения о заголовках запросов и ответов см. в разделе <a href="/windows/win32/bits/notification-protocol-for-server-applications">протокол уведомлений для серверных приложений</a>.<br /> Серверное приложение должно предоставить ответ в течение пяти минут. Если серверное приложение не отвечает в течение пяти минут, оно переходит в состояние временной ошибки. По истечении <a href="/windows/win32/api/bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay"><strong>задержки повторных попыток</strong></a> сервер BITS будет отправлять в серверное приложение еще одно уведомление (серверное приложение должно быть написано для обслуживания повторяющихся уведомлений). <strong>BITS 1,5:</strong> Время ожидания уведомления составляет 30 секунд.<br /><br /> По умолчанию установлено значение 0.<br /> | 
| <strong>Битссервернотификатионурл</strong> Тип данных: <strong>строка</strong><br /> | Необязательный элемент. Содержит URL-адрес серверного приложения, в котором BITS отправляет файл отправки. Если свойство <strong>битссервернотификатионтипе</strong> имеет значение 1 или 2, необходимо указать URL-адрес. Длина URL-адреса ограничена 2 200 символами, не включая знак завершения null. URL-адрес должен быть URL-адресом HTTP. Служба BITS не поддерживает URL-адреса уведомлений HTTPS.<br /> Если URL-адрес недоступен во время отправки, служба BITS повторит попытку отправки, пока не будет существует URL-адрес уведомления или пока не истечет период повтора.<br /> Обратите внимание, что если удаленное имя, указанное в задании, содержит строку запроса, строка запроса добавляется к указанному URL-адресу. Например, если удаленное имя содержит, https://myserver/myvdir/subdir/file.asp?ACCOUNT=86433 а параметр <strong>битссервернотификатионурл</strong> задан как https://otherserver/myvdir2/bag.asp , то URL-адрес, на который отсылается BITS https://otherserver/myvdir2/bag.asp?ACCOUNT=86433 .<br /> Если исходный URL-адрес имеет значение, https://myserver/myvdir/file.txt а URL-адрес уведомления — мясп. ASP, BITS использует HTTP//MyServer/мивдир/мясп. ASP в качестве URL-адреса уведомления.<br /> Если путь и имя файла в URL-адресе содержат символы Юникода, не являющиеся общими для кодовой страницы как клиента, так и сервера, преобразование URL-адресов на сервере завершится ошибкой, а задание BITS будет помещено в состояние ошибки. Если серверная часть URL-адреса содержит символы Юникода, необходимо закодировать серверную часть с использованием <a href="/windows/win32/intl/handling-internationalized-domain-names--idns">международных доменных имен</a> (IDN).<br /> | 
| <strong>Битшостид</strong> Тип данных: <strong>строка</strong><br /> | Задайте это свойство, если установка сервера является веб-фермой, которая не использует общее хранилище.<br /> Укажите имя сервера или IP-адрес сервера для повторного подключения после прерывания процесса отправки. Как правило, указывается имя настраиваемого сервера. Длина URL-адреса ограничена 300 символами, не включая знак завершения null.<br /> Если это свойство не указано и процесс отправки прерван, то возможно, что служба BITS возобновит задание на другом сервере фермы. Однако предыдущий сервер по-прежнему содержит частичный файл отправки перед прерыванием. Служба BITS удаляет частичный файл после истечения срока действия <strong>битссессионтимеаут</strong> .<br /><blockquote>[!Note]<br />Не используйте свойство <strong>битшостид</strong> , если в веб-ферме используется протокол SSL, использующий балансировку сетевой нагрузки (NLB) или DNS-имена с несколькими IP-адресами, если не указать имя кластера и отдельные имена серверов в сертификате. (Если имя сервера, указанное в <strong>битшостид</strong> , не соответствует общему имени в сертификате, задание завершится ошибкой.) Вместо этого для балансировки сетевой нагрузки задайте для параметра <a href="/previous-versions/tn-archive/bb687542(v=technet.10)">affinity</a> значение <strong>Single</strong> , чтобы обеспечить взаимодействие клиента с тем же сервером в будущем.</blockquote><br /><br /> | 
| <strong>Битшостидфаллбакктимеаут</strong> Тип данных: <strong>DWORD</strong><br /> | Количество секунд, в течение которых клиент BITS пытается повторно подключиться к серверу <strong>битшостид</strong> , прежде чем вернуться к имени узла, указанному в имени удаленного файла задания. Таймер запускается, когда службе BITS не удается подключиться к серверу <strong>битшостид</strong> . Таймер сбрасывается, когда клиент успешно подключается к серверу.<br /> Обратите внимание, что время ожидания выполнения задания (см. <a href="/windows/win32/api/bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout"><strong>использованием метода ibackgroundcopyjob:: сетнопрогресстимеаут</strong></a>) должно быть больше этого значения времени ожидания. В противном случае задание завершится ошибкой до истечения времени ожидания резервного значения.<br /> Устанавливайте это свойство только в том случае, если задано свойство <strong>битшостид</strong> .<br /> Значение по умолчанию — 86 400 (1 день).<br /> | 
| <strong>Битсаллововервритес</strong> Тип данных: <strong>целое число</strong><br /> | Указывает, может ли файл отправки перезаписать существующий файл с тем же именем. Файл отправки перезаписывает существующий файл, если <strong>битсаллововервритес</strong> имеет значение 1.<br /> По умолчанию установлено значение 0.<br /><strong>IIS 6,0:</strong> Это свойство можно задать только из скрипта. его нельзя задать с помощью страницы свойств расширения BITS в пользовательском интерфейсе IIS.<br /><br /> | 
| <strong>Битсклеанупуседефаулт</strong> Тип данных: <strong>логический</strong><br /> | Указывает, использует ли задача очистки расписания по умолчанию. По умолчанию задача очистки выполняется каждые 12 часов.<br /> Задайте значение 1, чтобы использовать расписание по умолчанию. в противном случае — значение 0, чтобы указать расписание.<br /> Чтобы задать расписание, используйте свойства <strong>битсклеанупкаунт</strong> и <strong>битсклеанупунитс</strong> .<br /> Задача очистки очищает виртуальный каталог путем удаления заданий, которые не были изменены в течение времени ожидания сеанса (см. <strong>битссессионтимеаут</strong>).<br /> Значение по умолчанию — 1 — использовать расписание по умолчанию.<br /><strong>IIS 6,0:</strong> Не поддерживается.<br /> | 
| <strong>Битсклеанупкаунт</strong> Тип данных: <strong>целое число</strong><br /> | Указывает интервал ожидания между запуском задачи очистки. Интервал, который можно указать, зависит от единиц. Возможные значения интервала см. в описании свойства <strong>битсклеанупунитс</strong> .<br /> Это свойство игнорируется, если <strong>битсклеанупуседефаулт</strong> имеет значение 0.<br /><strong>IIS 6,0:</strong> Не поддерживается.<br /><br /> | 
| <strong>Битсклеанупунитс</strong> Тип данных: <strong>целое число</strong><br /> | Указывает единицы для интервала очистки, указанного в свойстве <strong>битсклеанупкаунт</strong> . Это свойство игнорируется, если <strong>битсклеанупуседефаулт</strong> имеет значение 0.<br /> Допустимые значения:<dl> 0 — единицы измерения — минуты. Возможные значения: от 1 до 60.<br />1: единицы измерения — часы. Это значение по умолчанию. Возможные значения: от 1 до 24.<br />2: единицы измерения — дни. Возможные значения: от 1 до 360.<br /></dl><br /><strong>IIS 6,0:</strong> Не поддерживается.<br /><br /> | 
| <strong>Битснумберофсессионслимит</strong> Тип данных: <strong>целое число</strong><br /> | Ограничивает количество сеансов передачи, которые могут существовать одновременно для пользователя. Если число сеансов для пользователя превышает это ограничение, при выполнении задачи очистки будут удалены последние сеансы, пока число сеансов для пользователя не превысит предельное значение.<br /> Значение по умолчанию — 50 сеансов.<br /><strong>IIS 6,0:</strong> Не поддерживается.<br /><br /> | 
| <strong>Битссессионлимитенабле</strong> Тип данных: <strong>логический</strong><br /> | Указывает, ограничивает ли BITS количество сеансов передачи на пользователя. Если параметр отсутствует или равен 0, это ограничение отключено.<br /> Чтобы задать ограничение, задайте свойство <strong>битснумберофсессионслимит</strong> .<br /> Значение по умолчанию — 1.<br /><strong>IIS 6,0:</strong> Не поддерживается.<br /><br /> | 




 

в следующем примере показано, как задать свойства расширения IIS BITS с помощью Windows сервера сценариев. Если виртуальный каталог указывает на удаленный общий ресурс, также задайте свойства IIS **ункусернаме** и **ункпассворд** .


```JScript
if (WScript.Arguments.length < 2)
{
    WScript.Echo("Usage: bitsvdir virtual_directory local_directory");
    WScript.Quit(1);
}

VirtualDirectoryName = WScript.Arguments(0);
LocalDirectoryName = WScript.Arguments(1);

ServerObj = GetObject("IIS://LocalHost/W3SVC/1/ROOT");
VirtualDir = ServerObj.Create("IIsWebVirtualDir", VirtualDirectoryName );

VirtualDir.Path = LocalDirectoryName;
VirtualDir.AppIsolated = 0;
VirtualDir.AccessScript = true;
VirtualDir.AccessRead = false;
VirtualDir.AccessWrite = false;
VirtualDir.SetInfo();

// Set BITS specific IIS configuration settings
VirtualDir.EnableBITSUploads();
VirtualDir.BITSMaximumUploadSize = "4294967296";
VirtualDir.SetInfo();

WScript.Echo( "Created virtual directory " + VirtualDirectoryName + 
              " with a local directory of " + LocalDirectoryName );
WScript.Quit( 0 );
```



 

