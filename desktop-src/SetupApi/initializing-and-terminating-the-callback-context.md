---
description: Прежде чем можно будет использовать подпрограммы обратного вызова очереди по умолчанию, укажите ее в качестве подпрограммы обратного вызова при фиксации очереди файлов или путем вызова ее из настраиваемой подпрограммы обратного вызова, которая должна быть инициализирована.
ms.assetid: e25a9787-a4a3-4d06-bf55-f6f7cfb23481
title: Инициализация и завершение контекста обратного вызова
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 67df0707f91a17369503fa17ecbeefef3eb6827be60285b0b778b07d98eba3a8
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117965437"
---
# <a name="initializing-and-terminating-the-callback-context"></a>Инициализация и завершение контекста обратного вызова

Прежде чем можно будет использовать подпрограммы обратного вызова очереди по умолчанию, укажите ее в качестве подпрограммы обратного вызова при фиксации очереди файлов или путем вызова ее из настраиваемой подпрограммы обратного вызова, которая должна быть инициализирована.

Функция [**сетупинитдефаулткуеуекаллбакк**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallback) создает структуру контекста, которая используется подпрограммы обратного вызова очереди по умолчанию. Он возвращает указатель void на эту структуру. Эта структура является обязательной для операции подпрограммы обратного вызова по умолчанию и должна быть передана в подпрограммы обратного вызова. Это можно сделать, указав указатель void в качестве контекста в вызове [**сетупкоммитфилекуеуе**](/windows/desktop/api/Setupapi/nf-setupapi-setupcommitfilequeuea)или указав указатель void в качестве параметра контекста при вызове [**сетупдефаулткуеуекаллбакк**](/windows/desktop/api/Setupapi/nf-setupapi-setupdefaultqueuecallbacka) из пользовательской подпрограммы обратного вызова. Эта структура контекста не должна изменяться или ссылаться на нее в приложении установки.

Функция [**сетупинитдефаулткуеуекаллбаккекс**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallbackex) также инициализирует контекст для подпрограммы обратного вызова очереди по умолчанию, но указывает второе окно для получения сообщения о ходе выполнения, указанного вызывающим объектом каждый раз, когда очередь отправляет уведомление. Это позволяет использовать диалоговые окна по умолчанию и сообщения об ошибках, а также встраивать индикатор выполнения во второе окно, например на страницу мастера установки.

Независимо от того, инициализирован ли контекст, используемый подпрограммой обратного вызова очереди по умолчанию с [**сетупинитдефаулткуеуекаллбакк**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallback) или [**сетупинитдефаулткуеуекаллбаккекс**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallbackex), после завершения обработки операций, поставленных в очередь, вызовите [**сетуптермдефаулткуеуекаллбакк**](/windows/desktop/api/Setupapi/nf-setupapi-setuptermdefaultqueuecallback) , чтобы освободить ресурсы, выделенные при инициализации структуры контекста.

 

 



