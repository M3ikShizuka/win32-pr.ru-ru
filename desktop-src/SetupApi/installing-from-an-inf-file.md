---
description: После получения сведений об установке из INF-файла существует несколько функций обработки файлов, которые можно использовать для установки файлов, перечисленных в разделе INF.
ms.assetid: 4e6042a0-36a9-4f74-b6cc-554e7f7aa2d9
title: Установка из INF-файла
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0e32780855e126eaaa38ae937a265951711662434e90ab0ffb425e2e4f4f6c42
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119867574"
---
# <a name="installing-from-an-inf-file"></a>Установка из INF-файла

После получения сведений об установке из INF-файла существует несколько функций обработки файлов, которые можно использовать для установки файлов, перечисленных в разделе INF. Низкоуровневые функции, такие как [**сетупинсталлфиле**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfilea) и [**сетупинсталлфиликс**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfileexa) , устанавливают один файл.

Существуют также функции для управления сжатыми файлами. Функция [**сетупжетфилекомпрессионинфо**](/windows/desktop/api/Setupapi/nf-setupapi-setupgetfilecompressioninfoa) возвращает сведения о сжатых файлах. Эти сведения затем могут использоваться [**сетупдекомпрессоркопифиле**](/windows/desktop/api/Setupapi/nf-setupapi-setupdecompressorcopyfilea) для копирования и, при необходимости, расширения файла.

Такие функции высокого уровня, как [**сетупинсталлфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfrominfsectiona), [**сетупинсталлфилесфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfilesfrominfsectiona)и [**сетупинсталлсервицесфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallservicesfrominfsectiona) , обрабатывают операции установки в разделе **Установка** или **Служба** . Из них **сетупинсталлфроминфсектион** является наиболее универсальным, так как он может выполнять любые операции установки, перечисленные в разделе **Установка** INF-файла. Сюда входят операции реестра и INI-файла, перечисленные в разделах **аддрег**, **делрег**, **упдатеинис** или **упдатеинифиелд** раздела **Install** .

Функции [**сетупинсталлфилесфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfilesfrominfsectiona) и [**сетупинсталлсервицесфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallservicesfrominfsectiona) заставят операции в очередь из раздела **установки** или **службы** , соответственно, в существующую очередь файлов. Обратите внимание, что для работы с очередями и службами необходимо отдельно вызывать Сетупинсталлфроминфсектион и Сетупинсталлсервицесфроминфсектион. Дополнительные сведения см. в разделе [очереди файлов](file-queues.md).

В отличие от этого, функция [**сетупинсталлфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfrominfsectiona) создает и уничтожает собственную внутреннюю очередь. Обычно **сетупинсталлфроминфсектион** используется для вызова его после успешного копирования всех файлов для выполнения транзакций реестра и INI-файла.

в Windows 2000 DLL-файлы могут быть самостоятельно зарегистрированы путем вызова [**сетупинсталлфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfrominfsectiona) для INF-файла, содержащего директиву **регистердллс** в разделе **установки** . **Сетупинсталлфроминфсектион** также может самостоятельно регистрировать 32-разрядные библиотеки dll из 64-разрядного процесса.

В 64-разрядных операционных системах [**сетупинсталлфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfrominfsectiona) может быть вызван для выполнения операций с 32-разрядной частью реестра. Чтобы добавить раздел реестра в 32-разрядную часть реестра, включите \_ флаг флг аддрег \_ 32BITKEY в строку **аддрег** INF-файла. Чтобы удалить раздел реестра только в 32-разрядной части реестра, включите \_ ключ флг делрег \_ 32BITKEY в строку **делрег** . Чтобы установить или очистить двоичное значение только в 32-разрядной части реестра, включите ФЛГ \_ битрег \_ 32BITKEY в строку **битрег** .

Помимо перечисленных выше функций, API установки включает функции, которые ставят операции установки файлов в очередь, либо по файлам, либо по разделу INF. Дополнительные сведения см. в разделе [очереди файлов](file-queues.md).

 

 



