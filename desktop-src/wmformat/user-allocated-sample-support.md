---
title: Поддержка примера, выделенного пользователем
description: Поддержка примера, выделенного пользователем
ms.assetid: c747139e-e157-4ea0-9132-256dc70e2b15
keywords:
- Пакет SDK для Windows Media Format, поддержка образцов, выделенных пользователем
- Расширенный формат систем (ASF), поддержка образцов, выделенных пользователем
- ASF (Расширенный системный формат), поддержка образцов, выделенных пользователем
- Поддержка примера, выделенного пользователем
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d80d6a0d9a7e19b46940093fc370bd2c8c70590d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104067733"
---
# <a name="user-allocated-sample-support"></a>Поддержка примера, выделенного пользователем

В обычных обстоятельствах и объект чтения, и синхронный объект Reader создают новый объект buffer для каждого примера, доставляемого в приложение. Это обусловлено тем, что объект чтения не позволяет понять, что делает приложение с примерами после его получения. Несмотря на то, что многие приложения считывают образцы только для немедленного отображения, некоторым приложениям может потребоваться хранить образцы в течение длительного времени. Объект чтения не может, следовательно, повторно использовать любой из выделенных буферов. он доставляет их в приложение, которое управляет ими.

Проблема с этим подходом заключается в том, что файл может содержать огромное количество выборок. Если для каждого из них требуется создать новый объект buffer, большое количество процессорного времени будет излишним при выделении и освобождении памяти. В приложениях с учетом времени, таких как проигрыватели мультимедиа, эти издержки могут негативно помешать производительности.

Чтобы устранить проблемы с производительностью образцов, выделенных для чтения, модуль чтения и синхронное средство чтения поддерживают образцы, выделенные пользователем. Чтобы использовать образцы, выделенные приложением, объект чтения выполняет вызовы примера метода обратного вызова выделения, который вы реализуете. Логика, используемая обратным вызовом для доставки буферов объекту Read, полностью зависит от вас. Вы можете использовать пул буферов для всего файла или использовать несколько пулов буферов, по одному для каждого выходного или потока или любую другую схему, которая подходит для вашего приложения.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Выделение буферов для чтения файлов**](allocating-buffers-for-file-reading.md)
</dt> <dt>

[**Функции чтения файлов**](file-reading-features.md)
</dt> </dl>

 

 




