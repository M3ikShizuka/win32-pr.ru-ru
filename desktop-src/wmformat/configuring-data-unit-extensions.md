---
title: Настройка расширений модуля данных
description: Настройка расширений модуля данных
ms.assetid: 5dc0a596-68ae-409a-9abc-15ca507d6ec7
keywords:
- потоки, Настройка расширений модулей данных
- потоки, расширения модулей данных
- расширения модулей данных, Настройка
- профили, расширения модулей данных
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dc7e6794b95128d180bc3922f9bf03a15a2749df
ms.sourcegitcommit: b04e152a7f51618fc174ffa872654623fe088db2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/21/2020
ms.locfileid: "103789181"
---
# <a name="configuring-data-unit-extensions"></a>Настройка расширений модуля данных

Примеры, записанные в файлы ASF, могут содержать дополнительные сведения, помимо самих примеров носителей. Эти сведения включаются с помощью модулей обработки данных. Дополнительные сведения о расширениях модулей данных см. в разделе [модули данных](data-unit-extensions.md).

Чтобы использовать расширения единиц данных, необходимо настроить поток в профиле, чтобы принять их. Чтобы настроить расширение единицы обработки данных для потока, выполните следующие действия.

1.  Получите указатель на интерфейс [**IWMStreamConfig2**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmstreamconfig2) , вызвав метод **QueryInterface** [**ивмстреамконфиг**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmstreamconfig).
2.  Вызовите метод [**IWMStreamConfig2:: адддатаунитекстенсион**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstreamconfig2-adddataunitextension) , чтобы зарегистрировать тип расширения единицы данных для потока.

Вы можете изучить все типы расширений единиц данных, зарегистрированные для потока, вызвав [**IWMStreamConfig2:: жетдатаунитекстенсионкаунт**](/previous-versions/windows/desktop/api/wmsdkidl/nf-wmsdkidl-iwmstreamconfig2-getdataunitextensioncount) , чтобы получить количество зарегистрированных типов модулей данных. Затем можно выполнить цикл по всем типам, используя вызовы [**IWMStreamConfig2:: жетдатаунитекстенсион**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstreamconfig2-getdataunitextension) для каждого из них.

Расширениям модулей данных назначается размер при настройке потока. Многие системы расширений модулей данных используют данные, которые имеют постоянный размер (обычно это структура). Тем не менее можно также настроить для модулей обработки данных размер переменного размера, задав для параметра Размер значение 0xFFFF. Каждое расширение единицы данных, назначенное во время кодирования, может иметь любой размер от 1 до 65534 байт. Вариаблиные расширения единиц обработки данных также называются динамическими модулями данных.

Преимущество использования динамических модулей обработки данных заключается в том, что при необходимости можно присоединить данные расширения. Если вы определили расширение единицы данных с заданным размером, каждый пример для потока должен содержать данные расширения этого размера, даже если для некоторых образцов нет данных. С помощью динамических модулей обработки данных можно опустить расширения модулей данных из некоторых примеров, что экономит пространство и сокращает требования к пропускной способности. Однако если расширения модулей данных имеют переменный размер, объект чтения не может проверить полученные данные расширения на статический размер. Необходимо убедиться, что получаемые данные расширения являются допустимыми, а не вредоносное искажение потока битов.

Отдельные расширения модулей данных должны быть установлены для выборок с помощью метода [**INSSBuffer3:: SetProperty**](/previous-versions/windows/desktop/api/Wmsbuffer/nf-wmsbuffer-inssbuffer3-setproperty) . Дополнительные сведения см. в разделе [Задание модулей обработки данных](setting-data-unit-extensions.md).

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Настройка потоков**](configuring-streams.md)
</dt> </dl>

 

 




