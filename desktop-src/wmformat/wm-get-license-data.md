---
title: Структура WM_GET_LICENSE_DATA (Дрмекстерналс. h)
description: '\_ \_ Структура данных о лицензиях WM Get \_ содержит сведения о том, где получить лицензию DRM.'
ms.assetid: 7e8053d5-f3f5-4519-97f5-6dbd89982f3a
keywords:
- Формат WM_GET_LICENSE_DATA структуры Windows Media
topic_type:
- apiref
api_name:
- WM_GET_LICENSE_DATA
api_location:
- Drmexternals.h
api_type:
- HeaderDef
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: f5f53b6ddfd532710e712637c57785d8893d8f977807bfb45cac0fc787ccbf58
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117844478"
---
# <a name="wm_get_license_data-structure"></a>\_Получение \_ \_ структуры данных лицензии WM

Структура **\_ \_ \_ данных о лицензиях WM Get** содержит сведения о том, где получить [*лицензию*](wmformat-glossary.md) [*DRM*](wmformat-glossary.md) .

## <a name="syntax"></a>Синтаксис


```C++
typedef struct _WMGetLicenseData {
  DWORD   dwSize;
  HRESULT hr;
  WCHAR   *wszURL;
  WCHAR   *wszLocalFilename;
  BYTE    *pbPostData;
  DWORD   dwPostDataSize;
} WM_GET_LICENSE_DATA;
```



## <a name="members"></a>Члены

<dl> <dt>

**двсизе**
</dt> <dd>

**DWORD** , содержащий размер структуры **\_ \_ \_ данных лицензии WM Get** в байтах.

</dd> <dt>

**ч**
</dt> <dd>

Код возврата **HRESULT** .

</dd> <dt>

**всзурл**
</dt> <dd>

Строка расширенных символов, заканчивающаяся нулевым символом, содержащая URL-адрес для получения лицензии. Используйте эту строку и строку **пбпостдата** в неавтоматическом приобретении лицензий.

</dd> <dt>

**всзлокалфиленаме**
</dt> <dd>

Строка расширенных символов, заканчивающаяся нулевым символом, содержащая локальную HTML-страницу, созданную компонентом DRM. При загрузке этой строки в браузер автоматически перенаправляет запрос HTTP на URL-адрес для получения лицензии вместе с необходимыми данными POST. Использование этого локального URL-адреса теперь не рекомендуется. Рекомендуемый подход заключается в использовании строк **всзурл** и **пбпостдата** .

</dd> <dt>

**пбпостдата**
</dt> <dd>

Указатель на массив байтов, содержащий данные, которые должны быть отправлены в URL-адрес для получения лицензии. В начало строки **пбпостдата** необходимо добавить следующую строку: "не Silent = 1&запрос =". Результирующая строка затем будет добавлена к **всзурл** при создании HTTP-запроса.

</dd> <dt>

**двпостдатасизе**
</dt> <dd>

**DWORD** , указывающий размер **пбпостдата** без "нетихом = 1&запрос =", на который ссылается **пбпостдата**.

</dd> </dl>

## <a name="remarks"></a>Remarks

Эта заполненная структура возвращается в параметре *pValue* метода [**ивмстатускаллбакк:: OnStatus**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstatuscallback-onstatus) , если **ВМТ \_ Status** = **ВМТ \_ No \_ Rights \_ ex** или **ВМТ \_ получить \_ лицензию**. Для ВМТ \_ нет \_ прав \_ на использование, элемент **HR** будет \_ требовать лицензию NS e \_ \_ , \_ аутофдате лицензии NS e \_ \_ или \_ \_ \_ неправильные права для лицензии NS e \_ . Любая из этих ошибок указывает, что новую лицензию необходимо получить, перейдя по URL-адресу в члене **всзурл** .

Для ВМТ \_ получения \_ лицензионных событий член **HR** передаст успешно выполненный макрос, если лицензия была успешно получена. Если это событие получено после попытки автоматического получения, а **HR** имеет значение \_ \_ нотаккуиред лицензии NS E DRM, это \_ \_ означает, что серверу лицензирования для этой лицензии поддерживается только неявное получение.

Пример приложения Audioplayer демонстрирует правильное использование информации, возвращаемой этой структурой.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                                |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                                      |
| Версия<br/>                  | Windows Пакет SDK для формата мультимедиа 7 или более поздние версии пакета SDK<br/>                       |
| Header<br/>                   | <dl> <dt>Дрмекстерналс. h</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**Ивмдрмреадер:: AcquireLicense**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmdrmreader-acquirelicense)
</dt> <dt>

[**Структуры**](structures.md)
</dt> </dl>

 

 





