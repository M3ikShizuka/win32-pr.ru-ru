---
title: Резервное копирование и восстановление лицензий DRM
description: Резервное копирование и восстановление лицензий DRM
ms.assetid: ec2777e9-76af-43fe-8bd5-4d7532d2fb32
keywords:
- Пакет SDK для Windows Media Format, резервное копирование лицензий DRM
- Windows Media Format SDK, восстановление лицензий DRM
- Windows Media Format SDK, лицензии DRM
- Пакет SDK для Windows Media Format, лицензии для DRM
- Windows Media Format SDK, функция Backup Restore
- Пакет Windows Media Format SDK, служба управления лицензиями
- Windows Media Format SDK, обнаружение мошенничества
- Управление цифровыми правами (DRM), резервное копирование лицензий
- DRM (Управление цифровыми правами), резервное копирование лицензий
- Управление цифровыми правами (DRM), восстановление лицензий
- DRM (Управление цифровыми правами), восстановление лицензий
- Управление цифровыми правами (DRM), лицензии
- DRM (Управление цифровыми правами), лицензии
- Управление цифровыми правами (DRM), функция восстановления резервных копий
- DRM (Управление цифровыми правами), функция восстановления резервных копий
- Управление цифровыми правами (DRM), служба управления лицензиями
- DRM (Управление цифровыми правами), служба управления лицензиями
- Управление цифровыми правами (DRM), обнаружение мошенничества
- DRM (Управление цифровыми правами), обнаружение мошенничества
- Резервное копирование лицензий DRM
- восстановление лицензий DRM
- лицензии, DRM
- лицензии, резервное копирование DRM
- лицензии, восстановление DRM
- Функция восстановления резервной копии
- Служба управления лицензиями
- обнаружение мошенничества
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a7718f03170077f7db624f8a99b8262239a79ca9
ms.sourcegitcommit: 773fa6257ead6c74154ad3cf46d21e49adc900aa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/09/2020
ms.locfileid: "104339497"
---
# <a name="backing-up-and-restoring-of-drm-licenses"></a>Резервное копирование и восстановление лицензий DRM

С помощью функции восстановления резервной копии пользователи могут выполнять резервное копирование и восстановление [*лицензий*](wmformat-glossary.md) на одном и том же компьютере или на других компьютерах. Эта функция позволяет пользователям передавать лицензии на новый компьютер или обратно на тот же компьютер (например, после переформатирования жесткого диска). Кроме того, пользователи могут воспроизводить защищенные файлы ASF на нескольких компьютерах.

Чтобы обеспечить законное использование лицензии, политика обнаружения мошенничества позволяет ограничивать количество попыток восстановления лицензии. Корпорация Майкрософт предоставляет службу, которая отслеживает количество компьютеров, на которые была восстановлена лицензия. Если достигнут предел, пользователь не сможет восстановить лицензию.

## <a name="allowing-or-disallowing-the-right-to-back-up-and-restore"></a>Разрешение или запрет на право на резервное копирование и восстановление

Функция восстановления резервных копий работает только для лицензий, для которых задано право резервного копирования и восстановления. Если владельцам содержимого или поставщикам лицензий не нужна эта функция или они выдают лицензии, которые содержат безопасное состояние (например, подсчет операций или ограниченное время), они могут запретить это право.

Если не удается восстановить лицензию, поскольку у пользователя нет прав, [*идентификатор ключа*](wmformat-glossary.md) передается в приложение. Как минимум, пользователь должен получать уведомление о том, что не удалось создать резервную копию некоторых лицензий, хотя пользователь не знает, к каким лицензиям относится это сообщение. Если вы знакомы с ИДЕНТИФИКАТОРом ключа для доступных защищенных файлов, вы можете разработать более надежное решение, информирующее пользователя.

Например, проигрыватель можно разрабатывать для Метки записи, которая предоставляет защищенные песни в Интернете. Эти песни и их идентификаторы ключей могут быть записаны в базе данных. Если не удалось создать резервную копию некоторых лицензий, приложение проигрывателя может использовать идентификатор ключа для запроса имени песни в базе данных, а затем информировать пользователя о том, для каких песен не удается создать резервную копию лицензий. Или можно создать музыкальную библиотеку для каждого пользователя локально, а идентификатор ключа можно использовать для получения дополнительных сведений о том, какие лицензии не удалось создать.

## <a name="the-license-management-service"></a>Служба управления лицензиями

После реализации функции восстановления резервной копии служба управления лицензиями, размещенная корпорацией Майкрософт, управляет восстановлением лицензий.

Сначала пользователи архивируются лицензии в приложении, например, выбрав пункт меню. Все лицензии на компьютере архивируются в указанное расположение, например на гибкий диск. Затем пользователи восстанавливают лицензии с помощью приложения, например, выбрав пункт меню и указав расположение резервной копии.

На этом этапе пользователь должен быть подключен к Интернету. запрос из приложения отправляется в службу управления лицензиями. Если компьютер, с которого была создана резервная копия лицензии, отличается от исходного компьютера (или переформатированного исходного компьютера), служба управления лицензиями выдает новую лицензию на новый компьютер. В противном случае лицензия, которая была выпущена ранее для этого компьютера, выдается повторно.

Поскольку служба управления лицензиями получает сведения от пользователя, необходимо отобразить политику конфиденциальности Майкрософт или указать ссылку на эту страницу на [веб-сайте Майкрософт](https://www.microsoft.com/licensing/default).

> [!Note]  
> Когда пользователь восстанавливает лицензию на другой компьютер, а для этой лицензии требуется индивидуальная авторизация, конечный пользователь должен авторизовать компоненты DRM для обновления. Для поддержки этой функции необходимо реализовать процесс в приложении проигрывателя.

 

## <a name="detecting-fraud"></a>Обнаружение мошенничества

Пользователю разрешено восстанавливать лицензии ограниченное число раз. Каждый раз при восстановлении лицензии служба управления лицензиями отслеживает ее и увеличивает количество лицензий на одну. При восстановлении лицензии на компьютер, на который ранее была восстановлена лицензия (например, компьютер, с которого была создана резервная копия лицензии), счетчик не увеличивается. Компьютер считается другим, если он имеет новую операционную систему или операционная система была установлена повторно.

В соответствии с политикой обнаружения мошенничества Майкрософт, когда лицензия была восстановлена определенное число раз, приложение получает URL-адрес от компонентов DRM и отвечает за открытие браузера и отображение веб-страницы, что означает, что лицензионное соглашение могло быть нарушено. Пользователь должен связаться с распространителем лицензий, который затем должен определить, является ли запрос допустимым.

> [!Note]  
> DRM не поддерживает версию этого пакета SDK на базе x64.

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Функции цифровых Rights Management**](digital-rights-management-features.md)
</dt> <dt>

[**Резервное копирование и восстановление лицензий**](backing-up-and-restoring-licenses.md)
</dt> </dl>

 

 




