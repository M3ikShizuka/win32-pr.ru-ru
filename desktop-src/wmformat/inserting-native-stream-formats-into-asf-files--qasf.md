---
title: Вставка собственных форматов потока в файлы ASF (КАСФ)
description: Вставка собственных форматов потока в файлы ASF (КАСФ)
ms.assetid: ec7a69f3-0d4c-43dd-8d4b-fe066329a98f
keywords:
- Windows Media Format SDK, собственные форматы потока (КАСФ)
- Windows Media Format SDK, Вставка собственных форматов потоков в файлы ASF (КАСФ)
- Пакет SDK для Windows Media Format, DirectShow
- Расширенный системный формат (ASF), Вставка собственных форматов потока (КАСФ)
- ASF (Расширенный системный формат), Вставка собственных форматов потока (КАСФ)
- Расширенный системный формат (ASF), собственные форматы потока (КАСФ)
- ASF (Расширенный системный формат), форматы машинного потока (КАСФ)
- Расширенный системный формат (ASF), DirectShow
- ASF (Расширенный системный формат), DirectShow
- DirectShow, собственные форматы потока (КАСФ)
- DirectShow, Вставка собственных форматов потоков в файлы ASF (КАСФ)
- Windows Media Format SDK, КАСФ
- Расширенный системный формат (ASF), КАСФ
- ASF (Расширенный системный формат), КАСФ
- DirectShow, КАСФ
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: af4736c450b3620a05fe01dcc1808adc297ebbd1
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103888928"
---
# <a name="inserting-native-stream-formats-into-asf-files-qasf"></a>Вставка собственных форматов потока в файлы ASF (КАСФ)

По умолчанию [средство записи WM ASF](wm-asf-writer-filter.md) ждет несжатые аудио-и видеопотоки на входных ПИН-кодах и использует пакет SDK Windows Media Format для доступа к кодекам Windows Media Audio и Windows Media Video, которые сжимают потоки. Но контейнер файлов ASF можно использовать для любого типа данных. Помещая цифровые мультимедийные данные в контейнер файлов ASF, можно добавлять функции, предоставляемые ASF, такие как метаданные и управление цифровыми правами (DRM), без необходимости перекодирования содержимого.

Чтобы создать ASF-файл, содержащий содержимое, не основанное на Windows Media, приложение должно сжать поток в графе фильтра в потоке данных WM ASF и обойти механизм сжатия модуля записи WM ASF, вызвав [**IConfigAsfWriter2:: сетпарам**](iconfigasfwriter2-setparam.md) следующим образом:


```C++
pConfigAsfWriter2->SetParam(AM_CONFIGASFWRITER_PARAM_DONTCOMPRESS,TRUE,0)

```



Затем настройте фильтр с нужным профилем. Очень важно, чтобы тип носителя входного потока точно совпадал с форматом в профиле. В некоторых случаях может потребоваться проверить формат входного потока и создать настраиваемый профиль для его сопоставления. Дополнительные сведения см. [в разделе Создание файлов ASF с помощью сторонних кодеков](to-create-asf-files-using-third-party-codecs.md).

При подключении модуля записи WM ASF к вышестоящему фильтру используйте метод **играфбуилдер:: коннектдирект** . Не используйте методы Intelligent Connect, такие как **играфбуилдер:: Connect** или **Играфбуилдер:: renderFile** , для подключения фильтра, так как это приведет к отключению режима "обходного сжатия" фильтра.

 

 




