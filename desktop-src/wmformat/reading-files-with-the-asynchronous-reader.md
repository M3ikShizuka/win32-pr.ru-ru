---
title: Чтение файлов с помощью асинхронного модуля чтения
description: Чтение файлов с помощью асинхронного модуля чтения
ms.assetid: 3cc72f8d-bf1f-416d-bc90-21dfb92a55aa
keywords:
- Windows Media Format SDK, чтение файлов
- Пакет SDK для Windows Media Format, асинхронный читатель
- Расширенный системный формат (ASF), асинхронный читатель
- ASF (Расширенный системный формат), асинхронный читатель
- Расширенный формат систем (ASF), чтение файлов
- ASF (Расширенный системный формат), чтение файлов
- асинхронные модули чтения, интерфейс Ивмреадеркаллбакк
- Ивмреадеркаллбакк, асинхронные модули чтения
- асинхронные читатели, чтение файлов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0807c0701dd596f943010ad613b08ef9fe2c415c
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2020
ms.locfileid: "104412492"
---
# <a name="reading-files-with-the-asynchronous-reader"></a>Чтение файлов с помощью асинхронного модуля чтения

Асинхронный читатель считывает содержимое из файлов ASF, используя несколько потоков и асинхронные вызовы. Функции, поддерживаемые асинхронным модулем чтения, делают его хорошо подходящим для приложений, которые отображают содержимое для конечных пользователей.

Основные функции объекта Reader можно разделить на следующие шаги. На этих этапах "приложение" относится к программе, которую вы пишете с помощью пакета SDK Windows Media Format.

1.  Приложение реализует интерфейс [**ивмреадеркаллбакк**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreadercallback) для обработки сообщений от модуля чтения. К ним относятся два метода обратного вызова: **OnStatus**, которые получают сообщения, относящиеся к состоянию различных аспектов средства чтения и **OnStatus**, которые получают несжатые образцы из модуля чтения.
2.  Приложение передает модулю чтения имя файла для чтения. Когда модуль чтения открывает файл, он присваивает каждому потоку номер выхода. Если файл использует взаимное исключение, модуль чтения назначает один выход для всех взаимоисключающих потоков.
3.  Приложение получает сведения о конфигурации различных выходных данных из средства чтения. Собранная информация позволит приложению правильно отображать образцы мультимедиа.
4.  Приложение сообщает модулю чтения о необходимости начать чтение данных из файла. Модуль чтения начинает доставку несжатых образцов обратного вызова **OnSample** по одному за раз в буферах, упакованных в объекты буфера. Образцы, доставляемые модулем чтения, находятся в порядке времени презентации. Модуль чтения продолжит предоставлять образцы до тех пор, пока приложение не будет остановлено приложением или пока не будет достигнут конец файла.
5.  Приложение отвечает за отрисовку данных после их доставки модулем чтения. Пакет SDK для формата Windows Media не предоставляет никаких подпрограмм отрисовки. Как правило, приложения используют другие пакеты SDK для подготовки данных к просмотру, такие как пакет SDK для Microsoft DirectX® или функции мультимедиа пакета SDK для платформы Microsoft Windows.
6.  По завершении чтения приложение предписывает читателю закрыть файл.

Эти действия проиллюстрированы в примере приложения AudioPlayer, а не в других. Дополнительные сведения см. в разделе [примеры приложений](sample-applications.md).

Средство чтения также поддерживает более широкие возможности. Средство чтения позволяет выполнять следующие действия.

-   Приостановка воспроизведения файла.
-   Получение статистики производительности модуля чтения.
-   Управление выбором потока для взаимоисключающих потоков.
-   Вручную выделить буферы для вывода.
-   Укажите собственные часы.
-   Получение состояния файловых операций (буферизация, Загрузка или сохранение).
-   Откройте файл, используя стандартный COM-интерфейс **IStream**.
-   Поиск конкретных точек в файле ASF.
-   Чтение данных профиля из заголовка файла.

В следующих разделах подробно описывается использование объекта Reader.

-   [Реализация сообщений модуля чтения в обратном вызове OnStatus](to-implement-reader-messages-in-the-onstatus-callback.md)
-   [Реализация обратного вызова OnSample](to-implement-the-onsample-callback.md)
-   [Создание средства чтения и открытие файла](to-create-a-reader-and-open-a-file.md)
-   [Получение примеров мультимедиа с помощью асинхронного модуля чтения](to-retrieve-media-samples-with-the-asynchronous-reader.md)
-   [Поиск по времени с помощью асинхронного модуля чтения](to-seek-by-time-using-the-asynchronous-reader.md)
-   [Поиск по номеру кадра с помощью асинхронного модуля чтения](to-seek-by-frame-number-using-the-asynchronous-reader.md)
-   [Поиск по коду времени SMPTE с помощью асинхронного модуля чтения](to-seek-by-smpte-time-code-using-the-asynchronous-reader.md)
-   [Поиск маркеров](to-seek-to-markers.md)
-   [Приостановка и остановка воспроизведения](to-pause-or-stop-playback.md)
-   [Получение статистики производительности читателя](to-get-reader-performance-statistics.md)
-   [Использование ручного выбора потока](to-use-manual-stream-selection.md)
-   [Доставка сжатых образцов с помощью асинхронного модуля чтения](to-deliver-compressed-samples-with-the-asynchronous-reader.md)

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Чтение файлов ASF**](reading-asf-files.md)
</dt> <dt>

[**Объект модуля чтения**](reader-object.md)
</dt> </dl>

 

 




