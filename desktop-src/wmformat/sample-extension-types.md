---
title: Примеры типов расширений
description: Примеры типов расширений
ms.assetid: 8de2e003-cb21-4be9-bcde-7f5909b6260a
keywords:
- Windows Media Format SDK, примеры расширений
- Расширенный формат систем (ASF), примеры расширений
- ASF (Расширенный системный формат), примеры расширений
- Windows Media Format SDK, расширения модулей данных
- Расширенный системный формат (ASF), расширения модулей данных
- ASF (Расширенный системный формат), расширения модулей данных
- Windows Media Format SDK, свойства буфера
- Расширенный системный формат (ASF), свойства буфера
- ASF (Расширенный системный формат), свойства буфера
- Примеры расширений, типы
- расширения модулей данных, типы
- свойства буфера
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 972e3da1ecaad277158bb270cc358436f53db9e2
ms.sourcegitcommit: c2a1c4314550ea9bd202d28adfcc7bfe6180932f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/11/2020
ms.locfileid: "105710255"
---
# <a name="sample-extension-types"></a>Примеры типов расширений

Примеры расширений, также называемые модулями обработки данных (или свойствами буфера), — это элементы данных, которые присоединяются к примерам мультимедиа в разделе данных ASF-файла. Несколько типов примеров расширений определяются в пакете SDK формата Windows Media. Вы также можете создавать собственные типы расширений.

Чтобы использовать образцы расширений, необходимо указать тип расширения в данных конфигурации потока профиля. Вызовите метод [**IWMStreamConfig2:: адддатаунитекстенсион**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstreamconfig2-adddataunitextension) , чтобы настроить поток для приема образцов с расширенными данными.

Отдельные образцы расширений необходимо добавить во входные образцы, вызвав метод [**INSSBuffer3:: SetProperty**](/previous-versions/windows/desktop/api/Wmsbuffer/nf-wmsbuffer-inssbuffer3-setproperty) . При чтении образцов можно вызвать метод [**INSSBuffer3:: Property**](/previous-versions/windows/desktop/api/Wmsbuffer/nf-wmsbuffer-inssbuffer3-getproperty) для получения данных расширения. Можно также использовать методы интерфейса [**INSSBuffer4**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer4) для перечисления расширений модулей данных, присоединенных к примеру.

В следующей таблице перечислены предопределенные идентификаторы расширений единиц данных, а также приводятся данные, присоединяемые к образцам для каждого из них.



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Пример GUID расширения</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>WM_SampleExtensionGUID_OutputCleanPoint</td>
<td>Данные указывают, является ли образец <a href="wmformat-glossary.md"><em>клеанпоинт</em></a>. Нулевое значение указывает, что образец не является клеанпоинт. Ненулевое значение указывает, что это клеанпоинт. Этот образец типа расширения единицы данных (тип) используется для мониторинга клеанпоинтс при записи предварительно сжатых потоков мультимедиа, закодированных с помощью кодеков сторонних производителей.</td>
</tr>
<tr class="even">
<td>WM_SampleExtensionGUID_Timecode</td>
<td>Данные представляют собой структуру <a href="/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_timecode_extension_data"><strong>WMT_TIMECODE_EXTENSION_DATA</strong></a> , содержащую данные кода времени SMPTE, связанные с образцом. Размер этого WM_SampleExtension_Timecode_Size всегда равен 14 байтам.<br/></td>
</tr>
<tr class="odd">
<td>WM_SampleExtensionGUID_FileName</td>
<td>Этот тип примера расширения используется для файловых потоков. Данные в примере файлового потока являются частью файла данных. Данные в примере расширения указывают имя файла, из которого было получено содержимое в образце. Имя файла представляет собой строку расширенных символов, содержащую имя файла в формате name. extension без сведений о пути.<br/></td>
</tr>
<tr class="even">
<td>WM_SampleExtensionGUID_ContentType</td>
<td>Данные определяют тип содержимого, которое содержит образец. Этот тип примера расширения используется с потоками видео с чередованием. Все содержимое с чередованием использует флаг WM_CT_INTERLACED в сочетании с побитовой <strong>или</strong> с помощью WM_CT_BOTTOM_FIELD_FIRST, WM_CT_TOP_FIELD_FIRST или WM_CT_REPEAT_FIRST_FIELD.<br/> Порядок полей не используется в процессе кодирования, но сохраняется с использованием сжатых образцов, чтобы его можно было передать в оборудование для подготовки к просмотру. Воспроизведение содержимого с чередованием с неправильным порядком полей вводит в видео такие артефакты, как нарушение движения.<br/> Размер этого срока всегда WM_SampleExtension_ContentType_Size.<br/></td>
</tr>
<tr class="odd">
<td>WM_SampleExtensionGUID_PixelAspectRatio</td>
<td>Данные обозначают пропорцию содержимого в образце пикселя. Это относится только к видео. Этот тип расширения используется для обнаружения пропорций неквадратных пикселей. Дополнительные сведения см. <a href="to-read-and-write-video-streams-with-non-square-pixels.md">в разделе чтение и запись видеопотоков с неквадратными пикселями</a>.<br/> Значения пропорций хранятся в виде слова, младший байт которого равен X, а старший байт — это значение Y. Например, 16:9 хранится в виде 0x0910.<br/> Размер этого срока всегда WM_SampleExtension_PixelAspectRatio_Size, что составляет 2 байта.<br/></td>
</tr>
<tr class="even">
<td>WM_SampleExtensionGUID_SampleDuration</td>
<td>Данные указывают длительность (в миллисекундах) образца, содержащегося в объекте buffer. При воспроизведении, если это так, объект модуля чтения будет использовать его для перезаписи существующего значения длительности выборки. Это СВЯЗАНО с тем, что компоненты времени выполнения пакета SDK устанавливаются автоматически в видеопотоках с частотой в 100 Кбит/с и выше, в которой издержки из-за этих данных не существенны. Он не задается для потоков с частотой битов в 100 Кбит/с. Приложения не должны устанавливать это по следующим причинам, так как модуль записи (в потоках с большим числом битов) перезапишет значение собственными данными.<br/> Размер этого срока всегда WM_SampleExtension_SampleDuration_Size, что составляет 2 байта.<br/></td>
</tr>
<tr class="odd">
<td>WM_SampleExtensionGUID_ChromaLocation</td>
<td>Данные указывают тип подвыборки чрома, используемый в видеоформате I420. Значение этого расширения задается одним из следующих значений:<br/>
<ul>
<li>WM_CL_INTERLACED420</li>
<li>WM_CL_PROGRESSIVE420</li>
</ul>
Это расширение единицы данных не настроено в профиле. Он включается в выходные данные выборки из декодера.<br/> Размер такой оплаты всегда WM_SampleExtension_ChromaLocation_Size, что составляет 1 байт.<br/></td>
</tr>
<tr class="even">
<td>WM_SampleExtensionGUID_ColorSpaceInfo</td>
<td>Данные содержат сведения о цветовом пространстве, используемом для текущего кадра видео. Значение этого расширения является структурой <a href="/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_colorspaceinfo_extension_data"><strong>WMT_COLORSPACEINFO_EXTENSION_DATA</strong></a> .<br/> Это расширение единицы данных не настроено в профиле. Он включается в выходные данные выборки из декодера.<br/> Размер этого объекта всегда WM_SampleExtension_ColorSpaceInfo_Size, что составляет 3 байта.<br/></td>
</tr>
<tr class="odd">
<td>WM_SampleExtensionGUID_UserDataInfo</td>
<td>Данные являются пользовательскими данными пользователя. Первые четыре байта данных содержат размер пользовательских данных.<br/> Следующий байт содержит тип пользовательских данных, предоставленных в примере расширения. Поддерживаются такие типы:<br/>
<ul>
<li>0x1F — данные пользователя уровня последовательности</li>
<li>0x1E — данные пользователя на уровне входных точек</li>
<li>0x1D-данные пользователя на уровне кадров</li>
<li>данные пользователя уровня поля 0x1C</li>
<li>0x1B — данные пользователя уровня среза</li>
</ul>
Шестой и последующие байты содержат данные пользователя. Число байтов данных пользователя, указанное в числе первых четырех байтов, равно количеству байт.<br/> Это расширение единицы данных не настроено в профиле. Он включается в образцы, выводимые из декодера.<br/></td>
</tr>
<tr class="even">
<td>WM_SampleExtensionGUID_SampleProtectionSalt</td>
<td>Данные шифруются с помощью образца. Этот пример типа расширения используется для содержимого, импортированного из формата файлов, отличного от ASF, и схемы защиты прав, отличной от Windows Media DRM. При импорте защищенного содержимого каждый пример должен включать уникальную соль. Как правило, это значение является монотонно увеличивающимся счетчиком.<br/></td>
</tr>
</tbody>
</table>



 

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Справочник по программированию**](programming-reference.md)
</dt> </dl>

 

 





