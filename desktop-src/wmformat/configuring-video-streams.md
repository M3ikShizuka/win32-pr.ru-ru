---
title: Настройка потоков видео
description: Настройка потоков видео
ms.assetid: caffdfc1-3c35-4b7b-8643-5a9095cc11f6
keywords:
- потоки, Настройка потоков видео
- кодеки, Настройка потоков видео
- видеопотоки, Настройка
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d9d2389026dc1061064c5e687da60c3350ad94a4
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2020
ms.locfileid: "105691439"
---
# <a name="configuring-video-streams"></a>Настройка потоков видео

Потоки видео являются более гибкими в своей конфигурации, чем звуковые потоки. Это связано с тем, что свойства кадров, составляющих видео, могут сильно варьироваться от одного файла до следующего. При извлечении формата кодека для используемого кодека необходимо задать следующие значения для объектов конфигурации видеопотока.



| Значение                                 | Описание                                                                                                                                                                                                                                                                 |
|---------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Скорость потока                              | Вызовите [**ивмстреамконфиг:: сетбитрате**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstreamconfig-setbitrate) , чтобы задать нужное значение. Видеокодек попытается сжать носитель в соответствии со своими спецификациями. Если значения слишком низкие, полученное сжатое видео будет иметь низкую производительность.           |
| Окно буфера                         | Вызовите [**ивмстреамконфиг:: сетбуффервиндов**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstreamconfig-setbufferwindow) , чтобы задать нужное значение. Видеокодек попытается сжать носитель в соответствии со своими спецификациями. Если значения слишком низкие, полученное сжатое видео будет иметь низкую производительность. |
| **ВМВИДЕОИНФОХЕАДЕР. Рксаурце**        | Верхний левый угол должен иметь значение 0, 0. В нижнем правом углу должны быть установлены размеры рамки. Например, в потоке 640x480 эти параметры будут иметь значение 0, 0640480.                                                                                                |
| **ВМВИДЕОИНФОХЕАДЕР. Рктаржет**        | Должен соответствовать **рксаурце**.                                                                                                                                                                                                                                                    |
| **ВМВИДЕОИНФОХЕАДЕР. Двбитрате**       | Параметр должен соответствовать скорости, заданной для потока.                                                                                                                                                                                                                                 |
| **ВМВИДЕОИНФОХЕАДЕР. авгтимеперфраме** | Задайте приблизительное время для каждого кадра.                                                                                                                                                                                                                                      |
| **БИТМАПИНФОХЕАДЕР. Бивидс**          | Задайте ширину (в пикселях) требуемого размера кадра.                                                                                                                                                                                                                     |
| **БИТМАПИНФОХЕАДЕР. Бихеигхт**         | Задайте высоту (в пикселях) требуемого размера кадра.                                                                                                                                                                                                                    |



 

Видеосодержимое не воспроизводится правильно, если оно не закодировано до размера, кратного четырем для ширины и высоты. Исключением является видео в формате [*RGB*](wmformat-glossary.md) без сжатия, которое может иметь любой размер. Если вы попытаетесь задать размер, который не кратен четырем, модуль записи вернет одну из следующих ошибок:

-   \_ \_ Недопустимый \_ входной \_ Формат NS E
-   \_ \_ Недопустимый \_ выходной \_ Формат NS E
-   NS \_ E \_ инвалидпрофиле

Если вы используете переменное кодирование с переменной скоростью, может потребоваться выполнить другие корректировки. Дополнительные сведения см. в разделе [Настройка потоков VBR](configuring-vbr-streams.md).

Некоторые видеокодеки Windows Media поддерживают несколько уровней сложности. Уровни сложности определяют алгоритмы, которые кодек будет использовать при кодировании видеопотока. При использовании высокого уровня сложности потребуется больше вычислительной мощности для кодирования и декодирования.

Каждый кодек, поддерживающий параметры сложности, предоставляет следующие параметры, которые можно извлечь с помощью метода [**IWMCodecInfo3:: жеткодекпроп**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmcodecinfo3-getcodecprop) .



| Параметр                 | Описание                                         |
|-------------------------|-----------------------------------------------------|
| g \_ всзкомплекситимакс     | Максимальный уровень качества, поддерживаемый кодеком.   |
| g \_ всзкомплекситйоффлине | Предлагаемый уровень качества для воспроизведения в автономном режиме.   |
| g \_ всзкомплекситиливе    | Предлагаемый уровень качества для воспроизведения потоковой передачи. |



 

Чтобы задать сложность потока видео в профиле, используйте метод [**ивмпропертиваулт:: SetProperty**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmpropertyvault-setproperty) , используя свойство g \_ всзкомплексити. Заданное значение должно быть меньше или равно максимально поддерживаемой сложности для кодека.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Общая конфигурация для всех потоков**](configuration-common-to-all-streams.md)
</dt> <dt>

[**Настройка потоков**](configuring-streams.md)
</dt> <dt>

[**Параметры сложности видео**](video-complexity-settings.md)
</dt> </dl>

 

 




