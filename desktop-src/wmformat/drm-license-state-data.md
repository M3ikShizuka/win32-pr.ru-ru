---
title: Структура DRM_LICENSE_STATE_DATA (Дрмекстерналс. h)
description: '\_ \_ Структура данных о состоянии лицензии DRM \_ содержит сведения о лицензиях для указанного права на использование DRM.'
ms.assetid: 5ca577b5-d28b-4e36-8af7-6fae4300d464
keywords:
- Формат DRM_LICENSE_STATE_DATA структуры Windows Media
- структура формат мультимедиа Windows
topic_type:
- apiref
api_name:
- DRM_LICENSE_STATE_DATA
api_location:
- Drmexternals.h
api_type:
- HeaderDef
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 3e6703481dc1d3608a8bf08ab2bbd216db4a9ecdc91bd4604d2b9de7d7de4fa3
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117848537"
---
# <a name="drm_license_state_data-structure-drmexternalsh"></a>Структура DRM_LICENSE_STATE_DATA (Дрмекстерналс. h)

Структура **\_ данных о \_ состоянии \_ лицензии DRM** содержит сведения о [*лицензиях*](wmformat-glossary.md) для указанного права на использование [*DRM*](wmformat-glossary.md) .

## <a name="syntax"></a>Синтаксис


```C++
typedef struct DRM_LICENSE_STATE_DATA {
  DWORD                      dwStreamId;
  DRM_LICENSE_STATE_CATEGORY dwCategory;
  DWORD                      dwNumCounts;
  DWORD                      dwCount[4];
  DWORD                      dwNumDates;
  FILETIME                   datetime[4];
  DWORD                      dwVague;
} ;
```



## <a name="members"></a>Члены

<dl> <dt>

**двстреамид**
</dt> <dd>

Номер потока, к которому применяется лицензия. Значение должно быть равно 0, что означает, что лицензия применяется ко всем потокам в файле.

</dd> <dt>

**двкатегори**
</dt> <dd>

Категория отображаемой строки. Возможные значения и их значение см. в разделе [**\_ \_ \_ Категория состояния лицензии DRM**](drm-license-state-category.md) .

</dd> <dt>

**двнумкаунтс**
</dt> <dd>

Количество элементов, предоставляемых в **двкаунт**. Обычно это значение равно 0 или 1.

</dd> <dt>

**Двкаунт \[ 4\]**
</dt> <dd>

Массив из 0 или 1 или более **DWORD**, который представляет количество выполнений действия, указанного в **двкатегори** . См. примечания.

</dd> <dt>

**двнумдатес**
</dt> <dd>

Количество элементов, представленных в **DateTime**. Обычно используется не более двух дат, например с лицензией, которая действительна с одной даты до другой даты.

</dd> <dt>

**DateTime \[ 4\]**
</dt> <dd>

Массив из одной или нескольких структур FILETIME, представляющих одну или несколько дат в лицензии. Значение определенной даты зависит от значения **двкатегори**.

</dd> <dt>

**дввагуе**
</dt> <dd>

Ноль или более следующих флагов объединены с побитовой **или**:



| Флаг                                    | Описание                                                                                                                                           |
|-----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_ \_ \_ неясные данные \_ состояния лицензии DRM        | Если задано, могут существовать дополнительные лицензии, применимые к содержимому.                                                                                         |
| \_ \_ \_ \_ имеется ОПЛ данных о состоянии лицензии DRM \_ | Если этот параметр задан, лицензия включает уровни защиты выходных данных (Оплс), которые должны быть извлечены и проверены в отношении назначения выходных данных приложения. |
| \_данные о \_ состоянии лицензии DRM \_ \_ имеются в SAP \_ | Если задано, содержимое должно доставляться с использованием пути Secure Audio (SAP).                                                                                  |



 

</dd> </dl>

## <a name="remarks"></a>Remarks

Эта структура возвращается (в структуре [**\_ \_ \_ данных состояния лицензии WM**](/previous-versions/windows/desktop/legacy/dd757942(v=vs.85)) ) из вызова [**ивмдрмреадер:: жетдрмпроперти**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmdrmreader-getdrmproperty) при указании одного из свойств состояния лицензии DRM. К этим свойствам относятся следующие.

-   [**\_Воспроизведение ЛИЦЕНСЕСТАТЕ \_ DRM**](drm-licensestate-playback.md)
-   [**\_Лиценсестате \_ копитокд DRM**](drm-licensestate-copytocd.md)
-   [**\_Лиценсестате \_ копитосдмидевице DRM**](drm-licensestate-copytosdmidevice.md)
-   [**\_Лиценсестате \_ копитононсдмидевице DRM**](drm-licensestate-copytononsdmidevice.md)
-   [**\_Лиценсестате \_ коллаборативеплай DRM**](drm-licensestate-collaborativeplay.md)
-   [**\_Лиценсестате \_ Copy DRM**](drm-licensestate-copy.md)
-   [**\_Лиценсестате \_ плайлистбурн DRM**](drm-licensestate-playlistburn.md)

Если **двкатегори** — **\_ \_ число состояний лицензии WM DRM \_ \_ \_ от \_ до,** то массив **DateTime** обычно содержит две даты: "от" и "до". Для создания более сложных лицензий можно также указать две пары дат.

Элементы массива **двкаунт** соответствуют датам или диапазонам дат, указанным в массиве **DateTime** . Если **двкатегори** является **\_ \_ \_ числом состояний лицензии WM DRM \_ \_ с \_ until** и **DateTime** содержит одну пару дат, **двкаунт** будет содержать один элемент. Если **DateTime** содержит две пары даты (четыре элемента), **двкаунт** должен содержать два элемента: по одному для каждой пары дат.

В некоторых случаях для одного файла могут быть выпущены несколько лицензий. Например, они могли получить лицензию, которая позволила пять раз воспроизвести до конца месяца, а затем получить вторую лицензию для неограниченных прав. В этом случае флаг неявной \_ информации о состоянии лицензии DRM \_ \_ \_ задается в **дввагуе** ( `dwVague & DRM_LICENSE_STATE_DATA_VAGUE != 0` ), а компонент DRM использует алгоритм для определения наиболее вероятного набора прав, которые были применены. По истечении срока действия одной лицензии компонент DRM проверяет остальные лицензии и так далее до истечения срока действия всех лицензий.

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|-------------------------------------|-------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                                |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                                      |
| Версия<br/>                  | Windows Пакет SDK для формата мультимедиа 7 или более поздние версии пакета SDK<br/>                       |
| Header<br/>                   | <dl> <dt>Дрмекстерналс. h</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**Структуры**](structures.md)
</dt> </dl>

 

