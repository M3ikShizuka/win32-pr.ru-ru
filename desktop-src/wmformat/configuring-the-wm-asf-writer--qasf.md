---
title: Настройка модуля записи WM ASF (КАСФ)
description: Настройка модуля записи WM ASF (КАСФ)
ms.assetid: 0f49ed5a-c228-456a-9551-8d277adccd0e
keywords:
- Windows Пакет SDK для формата мультимедиа, Настройка модуля записи WM ASF (КАСФ)
- Windows Пакет SDK для формата мультимедиа, DirectShow
- Windows Пакет SDK для формата мультимедиа, модуль записи WM ASF
- Windows Пакет SDK для формата мультимедиа, КАСФ
- Расширенный формат систем (ASF), Настройка модуля записи WM ASF (КАСФ)
- ASF (Расширенный системный формат), Настройка модуля записи WM ASF (КАСФ)
- Расширенный формат систем (ASF), модуль записи WM ASF
- ASF (Расширенный системный формат), модуль записи WM ASF
- Расширенный формат систем (ASF), DirectShow
- ASF (Расширенный системный формат), DirectShow
- Расширенный системный формат (ASF), КАСФ
- ASF (Расширенный системный формат), КАСФ
- DirectShow, настройка модуля записи WM ASF (касф)
- DirectShow, модуль записи WM ASF
- DirectShow, касф
- Модуль записи WM ASF, Настройка
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8ba4559fc1780bdb9a9b398471cc842e2f3cf46f9c84a483229b01b3b6fa4a1c
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118199180"
---
# <a name="configuring-the-wm-asf-writer-qasf"></a>Настройка модуля записи WM ASF (КАСФ)

Когда фильтр [модуля записи WM ASF](wm-asf-writer-filter.md) создан, он автоматически настраивается с помощью вмпрофиле \_ V80 \_ 256Video Profile в качестве значения по умолчанию. так как этот профиль использует кодеки Windows media Audio и Windows media Video 8, рекомендуется создать пользовательский профиль, использующий кодеки Windows media 9, а затем передать его указатель [**ивмпрофиле**](iwmprofile.md) в фильтр с помощью метода [**иконфигасфвритер:: конфигурефилтерусингпрофиле**](iconfigasfwriter-configurefilterusingprofile.md) . Фильтр необходимо добавить в граф, прежде чем можно будет настроить фильтр, и его необходимо настроить перед подключением к вышестоящим фильтрам. этот профиль используется в фильтре для определения типа записываемого файла формата мультимедиа Windows, количества настроенных пин-кодов и типов носителей, которые могут принимать эти сигналы.

Фильтр позволяет сбрасывать профили во время подключения входных контактов, если новый профиль не требует дополнительных входных ПИН-кодов. Например, если изменить профиль из одновходного звукового профиля на два входных аудио-и видеопрофиль, то только ПИН-код будет Реконнектедалл входные данные должны быть отметкой времени, а все входные контакты должны быть подключены, прежде чем фильтр можно будет запустить или приостановить. Это означает, что если вы настроите фильтр с профилем, имеющим звуковой поток и поток видео, фильтр создаст звук и ПИН-код входного видео, и оба этих контакта должны быть подключены, прежде чем можно будет запустить фильтр.

Добавление модулей обработки данных

Вы можете настроить поток профиля для модулей обработки данных, например коды времени SMPTE до или после подключения фильтра, при условии, что выполняется следующий порядок операций:

1.  Добавьте в поток одно или несколько расширений модулей данных с помощью [**IWMStreamConfig2:: адддатаунитекстенсион**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstreamconfig2-adddataunitextension).
2.  Вызовите [**вмпрофиле:: реконфигстреам**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmprofile-reconfigstream) , чтобы обновить профиль.
3.  Вызовите [**иконфигасфвритер:: конфигурефилтерусингпрофиле**](iconfigasfwriter-configurefilterusingprofile.md) с обновленным объектом Profile.
4.  Найдите ПИН-код входного видео и вызовите его метод [**иамвмбуфферпасс:: сетнотифи**](iamwmbufferpass-setnotify.md) , чтобы зарегистрировать определяемый приложением интерфейс [**иамвмбуфферпасскаллбакк**](/previous-versions/windows/desktop/api/dshowasf/nn-dshowasf-iamwmbufferpasscallback) .

При запуске графа метод [**иамвмбуфферпасскаллбакк:: notify**](iamwmbufferpasscallback-notify.md) будет вызываться для каждого кадра, и вы сможете получить и задать свойства в образце с помощью его методов интерфейса [**INSSBuffer3**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer3) .

> [!Note]  
> В некоторых сценариях с интенсивным использованием процессора, таких как инверсный чересстрочности, модуль записи WM ASF может потребовать больше буферов вывода, чем может поддерживать некоторые нисходящие фильтры. Например, декодер DV не принимает более одного буфера для выходного ПИН-кода, и это справедливо для распаковки AVI в определенных условиях. При возникновении проблем при попытке подключения к этим фильтрам или, возможно, при запуске графа, может потребоваться написать промежуточный фильтр, который принимает любое количество буферов на выходном ПИН-коде.

 

 

 