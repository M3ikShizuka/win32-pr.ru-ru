---
title: Работа с уровнями защиты выходных данных
description: Работа с уровнями защиты выходных данных
ms.assetid: ec5982cd-0b87-4081-98e2-ab2d102a36d8
keywords:
- Windows Media Format SDK, уровни защиты выходных данных (ОПЛ)
- Windows Media Format SDK, уровни защиты
- Расширенный формат систем (ASF), уровни защиты выходных данных (ОПЛ)
- ASF (Расширенный системный формат), уровни защиты выходных данных (ОПЛ)
- Расширенный формат систем (ASF), уровни защиты
- ASF (Расширенный системный формат), уровни защиты
- Расширенный формат систем (ASF), несколько лицензий
- ASF (Расширенный системный формат), несколько лицензий
- Управление цифровыми правами (DRM), уровни защиты выходных данных (ОПЛ)
- DRM (Управление цифровыми правами), уровни защиты выходных данных (ОПЛ)
- Управление цифровыми правами (DRM), уровни защиты
- DRM (Управление цифровыми правами), уровни защиты
- Управление цифровыми правами (DRM), оценка уровней защиты выходных данных (ОПЛ)
- DRM (Управление цифровыми правами), оценка уровней защиты выходных данных (ОПЛ)
- Управление цифровыми правами (DRM), несколько лицензий
- DRM (Управление цифровыми правами), несколько лицензий
- уровни защиты выходных данных (ОПЛ)
- ОПЛ (уровни защиты выходных данных)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aab7023cc8285e5f3993aac69c57deca9675d9dd
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2020
ms.locfileid: "104336255"
---
# <a name="working-with-output-protection-levels"></a>Работа с уровнями защиты выходных данных

Лицензии, созданные с помощью пакета SDK Windows Media Rights Manager 10, могут определять ограничения действий с помощью уровней защиты выходных данных (Оплс). Оплс позволяют создателю лицензий разрешать некоторые действия только на устройствах с определенными технологиями. Преимущества использования Оплс в том, что вы получаете больше гибкости при создании ограничений лицензий по сравнению с предыдущими версиями. Кроме того, Оплс можно развернуть для поддержки будущих технологий. Вы можете поддерживать такие лицензии в приложениях с помощью методов интерфейса [**IWMDRMReader2**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmdrmreader2) .

Для чтения файлов, защищенных с помощью лицензии с указанием Оплс, необходимо проверить ОПЛ для требуемого действия. Технология вывода, используемая приложением, должна быть разрешена ОПЛ в лицензии. Например, некоторые лицензии для защищенного звука могут потребовать использования защищенного звукового пути для воспроизведения.

## <a name="configuring-the-reader-to-evaluate-output-protection-levels"></a>Настройка модуля чтения для вычисления уровней защиты выходных данных

Прежде чем можно будет проверить Оплс для файлов, загруженных в средство чтения, необходимо вызвать метод [**IWMDRMReader2:: сетевалуатеаутпутлевеллиценсес**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmdrmreader2-setevaluateoutputlevellicenses) , передав **значение true** для параметра *февалуате* . Если не вызвать этот метод, лицензии, требующие Оплс, не будут видны вашему приложению.

## <a name="evaluating-copy-output-protection-levels"></a>Оценка уровней защиты выходных данных копирования

Чтобы получить уровни защиты выходных данных для действия копирования, вызовите метод [**IWMDRMReader2:: жеткопйоутпутлевелс**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmdrmreader2-getcopyoutputlevels) . Данные, получаемые из вызова, хранятся в структуре [**\_ \_ ОПЛ копии DRM**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-drm_copy_opl) . Структура содержит базовый уровень защиты выходных данных, который указывает минимальный уровень вывода для действия копирования в лицензии. Однако \_ Структура копирования ОПЛ DRM \_ также содержит два списка идентификаторов технологий: один для допустимых технологий, которые оцениваются на более низком ОПЛ, чем базовый, и один для технологий, оценка которых равна или выше базовой ОПЛ, но ограничена лицензией. Необходимо проверить включения и исключения, чтобы убедиться, что технология, используемая приложением, разрешена лицензией.

## <a name="evaluating-play-output-protection-levels"></a>Оценка уровней защиты выходных данных воспроизведения

Чтобы получить уровни защиты выходных данных для действия воспроизведения, вызовите метод [**IWMDRMReader2:: жетплайаутпутлевелс**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmdrmreader2-getplayoutputlevels) . Данные, получаемые из вызова, хранятся в структуре [**DRM \_ Play \_ ОПЛ**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-drm_play_opl) . Структура содержит несколько других структур. Базовые уровни защиты выходных данных для действия воспроизведения хранятся в структуре [**\_ минимальных \_ \_ \_ уровней защиты данных DRM**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-drm_minimum_output_protection_levels) (элемент **минопл** элемента **управления DRM \_ Play \_ ОПЛ**), который определяет минимальное ОПЛ, необходимое для воспроизведения содержимого в различных форматах. Необходимо проверить элемент на предмет типа выходных форматов, которые доставляет ваше приложение.

Структура **DRM \_ Play \_ ОПЛ** определяет два типа ограничений: требуется понижение выборки и допустимые идентификаторы защиты вывода видео.

Требуемая пониженная выборка определяется как список идентификаторов технологий вывода (элемент **оплиддовнсампле** элемента **управления DRM \_ Play \_ ОПЛ**), который, при использовании, может получить содержимое для воспроизведения только в том случае, если содержимое сначала уменьшается до более низкой скорости.

Разрешенные идентификаторы защиты видео определяются как список технологий вывода видео с информацией о конфигурации для каждого из них.

## <a name="handling-multiple-licenses"></a>Обработка нескольких лицензий

Некоторые файлы могут иметь несколько лицензий, связанных с ними в локальном хранилище лицензий. При оценке Оплс для файла, который вы читаете, можно проверить наличие дополнительных лицензий, вызвав метод [**IWMDRMReader2:: тринекстлиценсе**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmdrmreader2-trynextlicense) . Следует продолжать использовать лицензии, пока не найдете ту, которая разрешает выполнение действия или пока Тринекстлиценсе возвращает DRM \_ S \_ false, что указывает на отсутствие лицензий.

В некоторых случаях файл может иметь связанную лицензию, для которой требуется ОПЛ, которую приложение не поддерживает. В этом случае важно проверить наличие дополнительных лицензий, так как может существовать лицензия, не указывающая на Оплс.

**Примечание** . DRM не поддерживает версию этого пакета SDK на базе x64.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Включение поддержки DRM**](enabling-drm-support.md)
</dt> <dt>

[**Интерфейс IWMDRMReader2**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmdrmreader2)
</dt> </dl>

 

 




