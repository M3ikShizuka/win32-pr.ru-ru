---
title: Запись на компакт-диск списков воспроизведения, содержащих защищенные файлы
description: Запись на компакт-диск списков воспроизведения, содержащих защищенные файлы
ms.assetid: 0d9415a1-a154-4fe4-af4c-cce4cb05ade5
keywords:
- Windows Media Format SDK, запись списков воспроизведения с защищенными файлами
- Windows Media Format SDK, списки воспроизведения с защищенными файлами
- Расширенный формат систем (ASF), запись списков воспроизведения с защищенными файлами
- ASF (Расширенный системный формат), запись списков воспроизведения с защищенными файлами
- Расширенный формат систем (ASF), списки воспроизведения с защищенными файлами
- ASF (Расширенный системный формат), списки воспроизведения с защищенными файлами
- Управление цифровыми правами (DRM), запись списков воспроизведения с защищенными файлами
- DRM (Управление цифровыми правами), запись списков воспроизведения с защищенными файлами
- Управление цифровыми правами (DRM), списки воспроизведения с защищенными файлами
- DRM (Управление цифровыми правами), списки воспроизведения с защищенными файлами
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 214c1dbd4ee08f90b3e5e8aa6186508af5044f29
ms.sourcegitcommit: b04e152a7f51618fc174ffa872654623fe088db2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/21/2020
ms.locfileid: "105710251"
---
# <a name="burning-playlists-that-contain-secure-files"></a>Запись на компакт-диск списков воспроизведения, содержащих защищенные файлы

Лицензии, созданные с помощью объектов пакета SDK Windows Media Rights Manager 10, могут указать право на копирование файла на компакт-диск в составе списка воспроизведения. Эта функция, называемая записью списка воспроизведения, требует проверки лицензий всех файлов в списке воспроизведения перед началом копирования данных. Пакет SDK для Windows Media Format предоставляет интерфейс [**ивмреадерплайлистбурн**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreaderplaylistburn) для выполнения проверки файлов.

Чтобы реализовать запись списка воспроизведения, выполните следующие действия.

1.  Создайте экземпляр объекта Reader или синхронный объект Reader. Дополнительные сведения см. в разделе [чтение файлов ASF](reading-asf-files.md).
2.  Вызовите метод **QueryInterface** интерфейса чтения ([**ивмреадер**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreader) или [**ивмсинкреадер**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmsyncreader)), чтобы получить указатель на интерфейс [**ивмреадерплайлистбурн**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreaderplaylistburn) .
3.  Скопируйте имена файлов из списка воспроизведения в массив строк расширенных символов. Имена файлов в массиве должны быть в том же порядке, в котором они отображаются в списке воспроизведения.
4.  Вызовите метод [**ивмреадерплайлистбурн:: инитплайлистбурн**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderplaylistburn-initplaylistburn) , передав указатель на массив, созданный на шаге 3, для инициализации проверки лицензии для файлов.
5.  После завершения проверки лицензии объект Reader отправляет \_ \_ сообщение о записи списка воспроизведения ВМТ init \_ в реализацию метода обратного вызова [**Ивмстатускаллбакк:: OnStatus**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstatuscallback-onstatus) . Когда ответный вызов получает это сообщение, вызовите метод [**ивмреадерплайлистбурн:: жетинитресултс**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderplaylistburn-getinitresults) , чтобы получить результаты проверки лицензии. Этот метод принимает массив переменных **HRESULT** , соответствующих именам файлов в массиве, переданном в **инитплайлистбурн**. Если все значения в результирующем массиве равны S \_ , можно продолжить. Если какой-либо из результатов является кодом ошибки, список воспроизведения не должен быть скопирован.
6.  Используя тот же экземпляр модуля чтения, откройте и прочтите каждый файл. Необходимо открыть файлы в том порядке, в котором имена файлов появлялись в массиве имен файлов, переданном в **инитплайлистбурн**.
7.  После копирования всех файлов в список воспроизведения вызовите [**ивмреадерплайлистбурн:: ендплайлистбурн**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderplaylistburn-endplaylistburn) , чтобы завершить процесс записи списка воспроизведения и освободить ресурсы, используемые модулем чтения.

> [!Note]  
> DRM не поддерживает версию этого пакета SDK на базе x64.

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Включение поддержки DRM**](enabling-drm-support.md)
</dt> </dl>

 

 




