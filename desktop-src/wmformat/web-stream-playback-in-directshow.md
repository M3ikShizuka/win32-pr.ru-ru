---
title: Воспроизведение веб-потока в DirectShow
description: Воспроизведение веб-потока в DirectShow
ms.assetid: cc307c24-2bd2-43de-ba81-1cf5b05524b2
keywords:
- Windows Пакет SDK для формата мультимедиа, DirectShow
- Windows Пакет SDK для формата мультимедиа, воспроизведение веб-потока
- Расширенный формат систем (ASF), DirectShow
- ASF (Расширенный системный формат), DirectShow
- Расширенный формат систем (ASF), воспроизведение веб-потока
- ASF (Расширенный системный формат), воспроизведение веб-потока
- DirectShow, воспроизведение веб-потока
- Веб-потоки, DirectShow
- Веб-потоки, воспроизведение в DirectShow
- потоки, воспроизведение веб-потока в DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e10d70b4c6958881f3a49544e8119163ad68ef12d6b127ca1af144a1036def8e
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118431981"
---
# <a name="web-stream-playback-in-directshow"></a>Воспроизведение веб-потока в DirectShow

Microsoft DirectShow поддерживает веб-потоки (дополнительные сведения см. в разделе [веб-Потоки](web-streams.md) ) в сценариях воспроизведения файлов с помощью фильтра [чтения WM ASF](wm-asf-reader-filter.md) , но для записи и сохранения потока необходимо написать собственный фильтр DirectShow.

> [!Note]  
> для воспроизведения веб-потоков в содержимом, которое передается с сервера службы Windows Media, используйте проигрыватель Windows Media 9 Series ActiveX® элемент управления, внедренный в веб-страницу.

 

При наличии файла, содержащего потоки типа ВММЕДИАТИПЕ \_ филетрансфер, средство чтения WM ASF создаст для него закрепление вывода. Блоком формата будет структура [**\_ \_ формата ВМТ**](/previous-versions/windows/desktop/api/Wmsdkidl/ns-wmsdkidl-wmt_webstream_format) в виде потока. Если подчиненный фильтр недоступен для работы с этим типом мультимедиа, ПИН-код останется неподключенным, но он по-прежнему будет воспроизводить аудио-и видеопотоки.

Важно понимать, что каждый пример мультимедийных данных в веб-потоке содержит [**структуру \_ \_ \_ заголовка ВМТ для примера**](/previous-versions/windows/desktop/api/Wmsdkidl/ns-wmsdkidl-wmt_webstream_sample_header) , имеющую переменную длину в зависимости от длины его элемента **всзурл** . Указатель на образец данных изначально указывает на эту структуру, и необходимо передвинуть указатель за пределы структуры, чтобы получить доступ к реальным данным в потоке. Фильтр обработчика веб-потока должен основываться на классе **кбасерендерер** . В методе **дорендерсампле** фильтру необходимо будет проанализировать структуру для получения сведений о веб-потоке, а затем выполнить соответствующее действие. Как правило, это предполагает сохранение файла на диск, а затем вызов **коммитурлкачинтри** и **креатеурлкачинтри** для размещения файлов в кэше Internet Explorer. Фильтр должен обрабатывать составные файлы, то есть файлы, размер которых больше одного образца, а также обрабатывать команды рендеринга, которые задаются членом **ВМТ \_ \_ \_ . ВСАМПЛЕТИПЕ в образце потока** . Фильтр отправляет в приложение **\_ \_ событие EC OLE** , а также текст **\_ заголовка ВМТ \_ \_ . всзурл** , который содержит имя файла для подготовки к просмотру. Затем приложение вызывает отображение указанной страницы в браузере. Если веб-поток создан правильно, файл должен уже находиться в кэше.

дополнительные сведения о событиях **кбасерендерер**, **дорендерсампле** и **EC \_ OLE \_** см. в документации по DirectShow SDK.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**веб-Потоки**](web-streams.md)
</dt> </dl>

 

 




