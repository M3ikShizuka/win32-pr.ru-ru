---
title: Настройка неограниченных VBR
description: Настройка неограниченных VBR
ms.assetid: 69ef951f-d08b-401b-a285-2ffdf43ea35d
keywords:
- потоки, Настройка потоков VBR
- потоки, переменная скорость (VBR)
- Переменная скорость (VBR), потоки
- VBR (переменная скорость), потоки
- потоки, Настройка неограниченных VBR
- Переменная скорость (VBR), настройка не ограничена
- VBR (переменная скорость), Настройка неограниченного
- профили, Настройка неограниченных VBR
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5ff73a0aac8d13f015175080aac6eb580fc9686c67d892b14e4714746c8cea34
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119807764"
---
# <a name="to-configure-unconstrained-vbr"></a>Настройка неограниченных VBR

В потоке можно использовать кодирование с переменной скоростью без ограничений (VBR), чтобы указать среднюю скорость потока, которая будет поддерживаться в кодированном содержимом. Неограниченная VBR отличается от обычного CBR в том, что дисперсия по скорости потока может быть выше.

Скорость потока, заданная с помощью [**ивмстреамконфиг:: сетбитрате**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstreamconfig-setbitrate), используется в качестве нужной средней битовой скорости. После завершения кодирования потока можно использовать [**ивмпропертиваулт:: жетпропертибинаме**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmpropertyvault-getpropertybyname) для получения двух дополнительных свойств: **g \_ всзвбрпеак** и **g \_ всзбуфферавераже**. Эти свойства описывают пиковую скорость потока в кодированном содержимом и среднее окно буфера содержимого соответственно.

В сочетании с двумя проходными кодировками необходимо использовать неограниченные VBR. В профиле не задано двустороннее кодирование. Перед записью потока необходимо настроить модуль записи для выполнения этапа предварительной обработки. Дополнительные сведения об использовании двусторонней кодировки см. [в разделе использование Two-Pass Encoding](using-two-pass-encoding.md).

Чтобы настроить поток в профиле для кодирования с неограниченными VBR, выполните следующие действия.

1.  Создайте объект диспетчера профилей, вызвав функцию [**вмкреатепрофилеманажер**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-wmcreateprofilemanager) .
2.  Откройте существующий профиль, в который требуется добавить поддержку VBR. Дополнительные сведения об открытии профилей см. [в разделе Работа с профилями](working-with-profiles.md).
3.  Получите объект конфигурации потока для потока, который вы хотите использовать, вызвав либо [**ивмпрофиле::**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmprofile-getstream) GetObject, либо [**Ивмпрофиле:: жетстреамбинумбер**](/previous-versions/windows/desktop/api/wmsdkidl/nf-wmsdkidl-iwmprofile-getstreambynumber).
4.  Получите указатель на интерфейс [**ивмпропертиваулт**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmpropertyvault) объекта конфигурации потока, вызвав **Ивмстреамконфиг:: QueryInterface**.
5.  Включите кодирование VBR для потока, вызвав метод [**ивмпропертиваулт:: SetProperty**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmpropertyvault-setproperty) для свойства **g \_ всзвбренаблед** .
6.  Задайте для параметра **g \_ всзвбрбитратемакс** и **g \_ Всзвбрбуффервиндовмакс** значение 0 с помощью **ивмпропертиваулт:: SetProperty**.
7.  Сохраните изменения, внесенные в поток, вызвав [**ивмпрофиле:: реконфигстреам**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmprofile-reconfigstream).
8.  Сохраните профиль или передайте его в объект модуля записи.
9.  Настройте модуль записи для выполнения этапа предварительной обработки.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**настройка Потоки VBR**](configuring-vbr-streams.md)
</dt> </dl>

 

 




