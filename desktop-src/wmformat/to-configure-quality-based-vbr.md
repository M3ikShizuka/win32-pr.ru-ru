---
title: Настройка Quality-Based VBR
description: Настройка Quality-Based VBR
ms.assetid: 077a18c5-1895-4241-8c31-5f7caf38b22e
keywords:
- потоки, Настройка потоков VBR
- потоки, переменная скорость (VBR)
- Переменная скорость (VBR), потоки
- VBR (переменная скорость), потоки
- потоки, Настройка VBR на основе качества
- Переменная скорость (VBR), Настройка на основе качества
- VBR (переменная скорость), Настройка на основе качества
- профили, Настройка VBR на основе качества
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 34b1181d722909478b29e1ffbe5f5b53cb919d80e3922e055eecdf34c334a382
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117845639"
---
# <a name="to-configure-quality-based-vbr"></a>Настройка Quality-Based VBR

Для указания уровня качества, который будет поддерживаться для всего потока, независимо от требований к битовой скорости, в потоке можно использовать кодировку переменной на основе качества (VBR).

Для видеопотоков с поддержкой VBR необходимо указать уровень качества от 1 до 100, при этом 100 представляет наивысшее качество. В настоящее время существует только 30 дискретных параметров качества. Следующие уровни качества эквивалентны дискретным параметрам качества: 1, 4, 8, 11, 15, 18, 22, 25, 29, 33, 36, 40, 43, 47, 50, 54, 58, 61, 65, 68, 72, 75, 79, 83, 86, 90, 93, 97, 100. Числа между двумя последовательными значениями в приведенном выше списке приравниваются к тому же параметру качества, что и меньшее число. Например, указаны значения 1 и 4, поэтому 2 и 3 приводят к тому же параметру качества, что и 1.

Для звуковых потоков можно перечислить доступные режимы и получить объект конфигурации потока. Дополнительные сведения см. [в разделе перечисление форматов кодеков](to-enumerate-codec-formats.md).

При использовании видео VBR на основе качества необходимо задать положительное значение для элемента **двбитрате** структуры [**вмвидеоинфохеадер**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmvideoinfoheader) . Это значение не используется модулем записи, но передача нуля или отрицательное число может вызвать ошибки при записи.

Чтобы настроить поток в профиле для кодирования с VBR на основе качества, выполните следующие действия.

1.  Создайте объект диспетчера профилей, вызвав функцию [**вмкреатепрофилеманажер**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-wmcreateprofilemanager) .
2.  Откройте существующий профиль, в который требуется добавить поддержку VBR. Дополнительные сведения об открытии профилей см. [в разделе Работа с профилями](working-with-profiles.md).
3.  Получите объект конфигурации потока для потока, который вы хотите использовать, вызвав либо [**ивмпрофиле::**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmprofile-getstream) GetObject, либо [**Ивмпрофиле:: жетстреамбинумбер**](/previous-versions/windows/desktop/api/wmsdkidl/nf-wmsdkidl-iwmprofile-getstreambynumber).
4.  Получите указатель на интерфейс [**ивмпропертиваулт**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmpropertyvault) объекта конфигурации потока, вызвав **Ивмстреамконфиг:: QueryInterface**.
5.  Включите VBR для потока, вызвав метод [**ивмпропертиваулт:: SetProperty**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmpropertyvault-setproperty) для свойства **g \_ всзвбренаблед** .
6.  Задайте уровень качества для потока VBR, вызвав метод **ивмпропертиваулт:: SetProperty** для свойства **g \_ всзвбркуалити** .
7.  Задайте для параметра **g \_ всзвбрбитратемакс** и **g \_ Всзвбрбуффервиндовмакс** значение 0 с помощью **ивмпропертиваулт:: SetProperty**.
8.  Сохраните изменения, внесенные в поток, вызвав [**ивмпрофиле:: реконфигстреам**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmprofile-reconfigstream).
9.  Сохраните профиль или передайте его в объект Writer и начните писать.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**настройка Потоки VBR**](configuring-vbr-streams.md)
</dt> </dl>

 

 




