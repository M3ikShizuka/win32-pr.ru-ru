---
title: Использование динамического контроля диапазона
description: Использование динамического контроля диапазона
ms.assetid: 719658c1-952f-4e8f-a3ea-bdf89a0a7268
keywords:
- Пакет SDK для формата Windows Media, динамический контроль диапазона
- Windows Media Format SDK, кодек Windows Media Audio 9 Professional
- Windows Media Format SDK, кодек Windows Media Audio 9 без потерь
- Стандартный формат систем (ASF), кодек Windows Media Audio 9 Professional
- ASF (Расширенный системный формат), кодек Windows Media Audio 9 Professional
- Расширенный формат систем (ASF), кодек Windows Media Audio 9 без потерь
- ASF (Расширенный системный формат), кодек Windows Media Audio 9 без потерь
- Расширенный системный формат (ASF), динамический контроль диапазона
- ASF (Расширенный системный формат), динамический контроль диапазонов
- динамический контроль диапазона
- кодеки, кодек Windows Media Audio 9 без потерь
- кодеки, кодек Windows Media Audio 9 Professional
- Кодек Windows Media Audio 9 без потерь, динамический контроль диапазонов
- Кодек Windows Media Audio 9 Professional, динамический контроль диапазона
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 077ebc0052d0154aec395f371a5c2dc3ffd46c67
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2020
ms.locfileid: "105691442"
---
# <a name="to-use-dynamic-range-control"></a>Использование динамического контроля диапазона

Динамический диапазон звукового содержимого — это, по сути, различие между самым низким и максимальным томами. Если динамический диапазон содержимого слишком велик, пользователи могут постоянно настраивать том во время воспроизведения. Например, фильмы часто имеют большой динамический диапазон. Часто при изменении тома таким образом, чтобы диалоговое окно можно было понять во время скрытия сцен, другие части фильма с музыкой или звуковыми эффектами являются громче, чем требуется.

Кодеки Windows Media Audio 9 Professional и Windows Media Audio 9 без потерь поддерживают функцию, называемую динамическим контролем диапазона. Во время кодирования кодек вычисляет пиковые и средние значения амплитуды в содержимом, а объект модуля записи сохраняет эти значения в метаданных для потока при завершении кодирования. При необходимости приложение может также записывать значения "Target" в виде метаданных, которые приложения проигрывателя и декодер могут использовать в качестве подсказок при воспроизведении файла. Во время воспроизведения приложение может указать уровень динамического управления диапазоном, применяемый к звуковому потоку.

Проигрыватель Windows Media реализует динамический контроль диапазона в качестве функции автоматического режима.

## <a name="when-to-use-dynamic-range-control"></a>Когда следует использовать динамический контроль диапазона

Динамический контроль диапазона может изменить звук содержимого. По этой причине не следует настраивать приложение для автоматического использования динамического управления диапазоном. Вместо этого предоставьте пользователям возможность включать или отключать динамический контроль диапазона по мере необходимости.

## <a name="using-dynamic-range-control"></a>Использование динамического контроля диапазона

Во время воспроизведения динамический контроль диапазона активируется с помощью параметра OUTPUT g \_ всздинамикранжеконтрол. Для настройки параметра используйте [**IWMReaderAdvanced2:: сетаутпутсеттинг**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-setoutputsetting) . Нулевое значение (по умолчанию) указывает, что динамический диапазон не следует изменять. Значение 1 или 2 сигнализирует кодеку выполнить динамический контроль диапазона, где 1 — средний уровень динамического сжатия диапазона, а 2 — высокий уровень динамического сжатия диапазона.

Во время кодирования или во время воспроизведения можно предоставить значения PCM для пикового и среднего уровня, установив атрибуты [**WM/вмадркпеактаржет**](wm-wmadrcpeaktarget.md) и [**WM/вмадркаверажетаржет**](wm-wmadrcaveragetarget.md) соответственно. Эти значения хранятся в виде атрибутов метаданных, и доступ к ним должен осуществляться с помощью методов интерфейса [**IWMHeaderInfo3**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmheaderinfo3) . При кодировании аудиопотока с использованием профессионального или телекодека атрибуты [**WM/вмадркпеакреференце**](wm-wmadrcpeakreference.md) и [**WM/вмадркаверажереференце**](wm-wmadrcaveragereference.md) автоматически устанавливаются в пиковую и среднюю степени исходного содержимого. Целевые значения устанавливаются в те же значения, что и ссылки по умолчанию.

Во время воспроизведения декодер вычисляет динамический диапазон на основе выбранного уровня динамического управления диапазоном и целевых значений (если они указаны). Возможные диапазоны показаны в следующей таблице.



| Параметры                                                                | Диапазон доставленных аудио                                                                                                     |
|-------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------|
| g \_ всздинамикранжеконтрол = 0 (любые целевые значения)                       | Тот же диапазон, что и у исходного содержимого.                                                                                          |
| g \_ всздинамикранжеконтрол = 1 (целевые значения равны ссылочным значениям) | Средний уровень поддерживается, а пиковые значения — в среднем + 12 dB.                                                    |
| g \_ всздинамикранжеконтрол = 2 (целевые значения равны ссылочным значениям) | Средний уровень поддерживается, а пиковые значения — в среднем + 6 dB.                                                     |
| g \_ всздинамикранжеконтрол = 1 (указаны целевые значения)                 | Средний уровень задает целевое среднее значение и пиковые значения, ограниченные целевым пиковым значением.                                   |
| g \_ всздинамикранжеконтрол = 2 (указанные целевые значения)                 | Средний уровень задает целевое среднее значение и пиковые значения, ограниченные медианы целевого среднего и целевого пикового значения. |



 

Обратите внимание, что динамический элемент управления диапазоном является компонентом только для декодирования и существует только в виде метаданных в самом файле. Эти параметры не влияют на содержимое, хранящееся в файле, если только вы не указываете, что декодер использует их. Пакет SDK для формата Windows Media не предоставляет методов для изменения динамического диапазона звуковых данных во время кодирования.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Дополнительные разделы**](advanced-topics.md)
</dt> </dl>

 

 




