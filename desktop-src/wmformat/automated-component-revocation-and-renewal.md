---
title: Автоматизированный отзыв и продление компонентов
description: Автоматизированный отзыв и продление компонентов
ms.assetid: be4899d7-1d87-4450-8c0e-75cf112ca66a
keywords:
- Windows Пакет SDK для формата мультимедиа, Автоматический отзыв и продление срока действия
- Windows Пакет SDK для формата мультимедиа, отзыв
- Windows Пакет SDK для формата мультимедиа, продление
- Управление цифровыми правами (DRM), Автоматический отзыв и продление срока действия
- DRM (Управление цифровыми правами), автоматизированный отзыв и продление срока действия
- Управление цифровыми правами (DRM), отзыв
- DRM (Управление цифровыми правами), отзыв
- Управление цифровыми правами (DRM), продление
- DRM (Управление цифровыми правами), продление
- Расширенные API клиента DRM, Автоматический отзыв и продление срока действия
- Расширенные API клиента, Автоматический отзыв и продление срока действия
- Расширенные API клиента DRM, отзыв
- Расширенные API клиента, отзыв
- Расширенные API клиента DRM, продление
- Расширенные API клиента, продление
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7ebc8fd9a9b01d14e859afa88844bb98bd1c3e2cdda00fb1d14d0135612203b4
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118705200"
---
# <a name="automated-component-revocation-and-renewal"></a>Автоматизированный отзыв и продление компонентов

Программные приложения или компоненты, которые считаются скомпрометированными, могут быть отозваны корпорацией Майкрософт. расширенный API клиента формата мультимедиа Windows предоставляет механизм для автоматического отзыва и обновления компонентов.

Отозванные компоненты перечислены в списке отзыва сертификатов, опубликованном корпорацией Майкрософт. При отзыве компонента его сертификат добавляется в список отзыва сертификатов, а данные об отзыве (редакция \_ ) обновляются на серверах Майкрософт.

чтобы выполнить автоматический отзыв и продление, когда пользователь пытается обработать Windows содержимого, защищенного с помощью DRM, приложение должно выполнить следующие действия:

1.  Извлеките \_ версию с информацией о версии из лицензии. \_Номер версии info находится в следующем расположении в лицензии КСМР:
    ```C++
    <LICENSE version="2.0.0.0">
        <LICENSORINFO/>
        <DATA>
            <LID>...</LID>
            <KID>...</KID>
            <RevInfoVersion>42</RevInfoVersion>
            ...
         </DATA>
    ....
    </LICENSE>
    ```

    

2.  Сравните \_ номер версии лицензии с \_ номером версии сведений в локальном хранилище, вызвав метод [**Ивмдрмсекурити:: жетревокатиондатаверсион**](iwmdrmsecurity-getrevocationdataversion.md) .
3.  Если \_ версия сведений о версии устарела, вызовите метод [**ивмдрмсекурити::P ерформсекуритюпдате**](iwmdrmsecurity-performsecurityupdate.md) , передав в \_ \_ \_ \_ параметр *dwFlags* флаг обновления системы безопасности WMDRM.
4.  Получите список отзыва сертификатов из локального хранилища, вызвав метод [**ивмдрмсекурити:: жетревокатиондата**](iwmdrmsecurity-getrevocationdata.md) .
5.  проанализируйте список отзыва и проверьте, не Windows ли отзыва DRM Media. Дополнительные сведения см. в разделе [Проверка отзыва сертификата](checking-certificate-revocation.md).
6.  при наличии любых Windowsных отзывов мультимедийных DRM:
    1.  Создайте модуль включения содержимого для обновления отозванных компонентов, вызвав метод [**ивмдрмсекурити:: жетконтентенаблерсфорревокатионс**](iwmdrmsecurity-getcontentenablersforrevocations.md) .
    2.  Вызовите **имфконтентенаблер:: аутоматиценабле** , который направляет пользователя на URL-адрес, содержащий сведения об обновлении компонентов. Этот метод описан в [пакете SDK для Media Foundation](../medfound/microsoft-media-foundation-sdk.md) ( https://msdn.microsoft.com/library/ms694197(VS.85).aspx) .
        > [!Note]  
        > Необходимо уточнить этот процесс для пользователя с помощью заявления о конфиденциальности, так как процесс обновления отправляет данные с клиентского компьютера на веб-сайт корпорации Майкрософт.

         

    3.  Если это возможно, пользователь обновит компонент по URL-адресу либо автоматически, либо с помощью указанных инструкций. В некоторых ситуациях компонент не может быть обновлен.
    4.  Попробуйте получить доступ к содержимому еще раз, пока не будут отменены никакие повторы, или процесс будет остановлен по какой-либо причине.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**Инструкции по программированию**](drm-programming-guide.md)
</dt> </dl>

 

 