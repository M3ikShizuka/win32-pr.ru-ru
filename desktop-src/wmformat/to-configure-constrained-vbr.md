---
title: Настройка ограниченного VBR
description: Настройка ограниченного VBR
ms.assetid: a39e7628-0211-48ad-94e5-5003203f30be
keywords:
- потоки, Настройка потоков VBR
- потоки, переменная скорость (VBR)
- Переменная скорость (VBR), потоки
- VBR (переменная скорость), потоки
- потоки, Настройка ограниченного VBR
- Переменная скорость (VBR), Настройка ограничена
- VBR (переменная скорость), Настройка ограничена
- профили, Настройка ограниченного VBR
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 84d4f9546d67040bb5fb1aa5e43de34323679fe27aaf26826b57c3f0307c1181
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119929244"
---
# <a name="to-configure-constrained-vbr"></a>Настройка ограниченного VBR

В потоке можно использовать кодирование с ограничением переменной скорости (VBR) для указания средней скорости потока, которая будет поддерживаться в кодированном содержимом. Вы также указываете максимальную скорость потока и максимально необходимое окно буфера.

Вы не можете узнать, какая средняя скорость будет использоваться для потока с ограничением VBR перед кодированием, но можно использовать приблизительную оценку. Как правило, максимальная скорость, которую вы задаете, составляет от двух до трех раз средней скорости.

В сочетании с двумя проходными кодировками необходимо использовать ограниченные VBR. В профиле не задано двустороннее кодирование. Перед записью потока необходимо настроить модуль записи для выполнения этапа предварительной обработки. Дополнительные сведения об использовании двусторонней кодировки см. [в разделе использование Two-Pass Encoding](using-two-pass-encoding.md).

Чтобы настроить поток в профиле для использования ограниченного кодирования VBR, выполните следующие действия.

1.  Создайте объект диспетчера профилей, вызвав функцию [**вмкреатепрофилеманажер**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-wmcreateprofilemanager) .
2.  Откройте существующий профиль, в который требуется добавить поддержку VBR. Дополнительные сведения об открытии профилей см. [в разделе Работа с профилями](working-with-profiles.md).
3.  Получите объект конфигурации потока для потока, который вы хотите использовать, вызвав либо [**ивмпрофиле::**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmprofile-getstream) GetObject, либо [**Ивмпрофиле:: жетстреамбинумбер**](/previous-versions/windows/desktop/api/wmsdkidl/nf-wmsdkidl-iwmprofile-getstreambynumber).
4.  Получите указатель на интерфейс [**ивмпропертиваулт**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmpropertyvault) объекта конфигурации потока, вызвав **Ивмстреамконфиг:: QueryInterface**.
5.  Включите кодирование VBR для потока, вызвав метод [**ивмпропертиваулт:: SetProperty**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmpropertyvault-setproperty) для свойства **g \_ всзвбренаблед** .
6.  Используйте вызовы метода **ивмпропертиваулт:: SetProperty** , чтобы задать требуемые максимальные значения для свойств **g \_ всзвбрбитратемакс** и **g \_ всзвбрбуффервиндовмакс** .
7.  Сохраните изменения, внесенные в поток, вызвав [**ивмпрофиле:: реконфигстреам**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmprofile-reconfigstream).
8.  Сохраните профиль или передайте его в объект модуля записи.
9.  Настройте модуль записи для выполнения этапа предварительной обработки.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**настройка Потоки VBR**](configuring-vbr-streams.md)
</dt> </dl>

 

 




