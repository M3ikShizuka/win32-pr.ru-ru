---
title: Профили
description: Профили
ms.assetid: 6e70393f-3dab-4036-8d34-a672ef1795c6
keywords:
- Windows Media Format SDK, профили
- Расширенный формат систем (ASF), профили
- ASF (Расширенный системный формат), профили
- Windows Media Format SDK, пркс файлы
- Расширенные системные форматы (ASF), пркс-файлы
- ASF (Расширенный системный формат), пркс-файлы
- Пакет Windows Media Format SDK, редактор профилей
- Расширенный формат систем (ASF), редактор профилей
- ASF (Расширенный системный формат), редактор профилей
- файлы пркс
- файлы пркс
- Редактор профилей
- Кодировщик Windows Media
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de244445a7c1301c7a14ef273b81ac9fd9cbfb62
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2020
ms.locfileid: "105691458"
---
# <a name="profiles"></a>Профили

Профиль — это набор данных, описывающих конфигурацию ASF-файла. Профиль должен содержать как минимум параметры конфигурации для одного потока.

Сведения о потоке в профиле содержат скорость потока, окно буфера и свойства мультимедиа для него. В сведениях о потоках для аудио и видео описывается, как в файле настраивается носитель, включая, какой кодек (если он используется) будет использоваться для сжатия данных.

Профиль также содержит сведения о различных функциях ASF-файлов, которые будут использоваться в файлах, созданных с помощью. К ним относятся [взаимное исключение](mutual-exclusion.md), [Определение приоритетов потоков](stream-prioritization.md), [совместное использование пропускной способности](bandwidth-sharing.md)и [расширения модулей данных](data-unit-extensions.md).

В предыдущих версиях пакета SDK для формата Windows Media предусмотрены предварительно настроенные системные профили, которые можно использовать для создания общих типов файлов или незначительно изменяются в соответствии с потребностями приложения. Системные профили не поддерживаются для кодеков Windows Media 9 Series. Это связано с тем, что число общих типов файлов увеличилось экспоненциально с добавлением новых функций. Ожидается, что практически каждый создатель содержимого нуждается в отсутствии простых решений, предоставляемых системными профилями. Старые системные профили по-прежнему можно использовать в качестве отправной позиции. Дополнительные сведения см. [в разделе Использование системных профилей](using-system-profiles.md).

Необходимо предоставить модуль записи с профилем для каждого записываемого файла. Можно указать профиль для использования с модулем записи, вызвав [**ивмвритер:: сетпрофиле**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmwriter-setprofile).

Данные профиля существуют в нескольких формах, которые могут использоваться пакетом SDK Windows Media Format. Сведения о профиле также можно получить несколькими способами. Это может привести к путанице с тем, что представляет собой профиль и как он используется.

На следующей схеме показано, как данные профилирования используются в пакете SDK.

![Схема, показывающая поток сведений о профиле.](images/formatsdk01.png)

Данные профиля принимают три различные формы: данные, содержащиеся в объекте профиля в приложении, XML-файл на диске, и данные в заголовке файла ASF. Каждая из этих форм данных отображается в виде затененного прямоугольника на схеме.

## <a name="data-in-a-profile-object"></a>Данные в объекте профиля

При редактировании профиля используется объект профиля, который инкапсулирует все данные профиля. Пустой объект профиля можно создать с помощью объекта диспетчера профилей. Можно также использовать объект диспетчера профилей для загрузки существующих данных профиля в объект профиля.

Большая часть данных профиля должна добавляться и обрабатываться с помощью объектов, представляющих отдельные части профиля. К ним относятся объекты конфигурации потока, взаимоисключающие объекты, объекты совместного использования пропускной способности и объект определения приоритетов потоков. Каждый из этих типов объектов можно создать с помощью методов в объекте Profile. Внесение изменений в эти объекты не влияет на объект Profile, пока не будет использован метод в объекте Profile для включения обновленных данных из другого объекта.

## <a name="data-in-an-xml-file"></a>Данные в XML-файле

Данные профиля хранятся на диске в виде XML-файла с расширением имени файла пркс. В состав пакета SDK для Windows Media Format входит набор профилей, называемых системными профилями, охватывающий наиболее распространенные типы файлов ASF. Системные профили хранятся в файле с именем WMSysPr9. пркс. (Обратите внимание, что в этом файле нет системных профилей для серии Windows Media 9, поскольку концепция системных профилей больше не используется.) При сохранении пользовательских профилей их необходимо сохранить в собственных файлах.

Объект диспетчера профилей можно использовать для сохранения данных из объекта профиля в строку XML-текста. Затем можно использовать любые функции файлового ввода-вывода для сохранения строки в файл на диске.

## <a name="data-in-the-header-of-an-asf-file"></a>Данные в заголовке файла ASF

Модуль записи получает информацию из профиля и использует ее для создания потоков, которые попадают в раздел данных ASF. Основная часть данных профиля хранится в разделе заголовка файла при его написании. При воспроизведении объект Reader (или синхронный объект Reader) может получить доступ к информации в заголовке файла. В этом случае объект Read создает объект профиля и заполняет его данными из заголовка.

При доступе к данным профиля с помощью средства чтения (или синхронного средства чтения) можно вносить изменения в сведения о профиле, но не существует способа применить эти изменения к файлу в модуле чтения. Вы можете применить сведения о профиле из файла в модуле чтения к профилю в средстве записи, чтобы создать новый файл с теми же параметрами, что и у файла в модуле чтения. В этом случае любые изменения, внесенные в сведения о профиле до настройки профиля в модуле записи, будут отражены в сведениях о профиле, зарегистрированном модулем записи.

## <a name="using-profile-editor"></a>Использование редактора профилей

Вместо создания профилей с помощью пакета SDK Windows Media Format можно использовать редактор профилей — служебную программу, которая входит в состав кодировщика Windows Media. В приложении кодирования используйте метод **ивмпрофилеманажер:: лоадпрофилебидата** для загрузки сохраненного профиля. В некоторых сценариях, например при использовании ограниченного количества профилей, которые никогда не изменялись динамически, для создания профилей удобнее использовать редактор профилей.

Тем не менее, если вы используете редактор профилей, рекомендуется не использовать параметр "размер видео: то же, что и входные видео". Если этот флажок установлен, редактор профилей будет создавать профиль с высотой и шириной вывода видео, установленным в ноль. Когда кодировщик Windows Media обнаруживает эти профили, он устанавливает правильные значения, соответствующие входным данным видео. Однако модуль записи в пакете SDK формата Windows Media не делает этого автоматически, поэтому необходимо убедиться, что приложение задает размер видеокадра в случаях, когда в профиле нет.

**Примечание** . Некоторые элементы конфигурации потока не хранятся в профиле. Данные в профиле описывают формат готового ASF файла. Входные свойства носителя и другие данные конфигурации, используемые объектом модуля записи для настройки кодеков, не сохраняются в профиле. Сюда входят все свойства, заданные с помощью метода [**ивмпропертиваулт:: SetProperty**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmpropertyvault-setproperty) .

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Объект, совместно использующие пропускную способность**](bandwidth-sharing-object.md)
</dt> <dt>

[**Основные понятия**](concepts.md)
</dt> <dt>

[**Интерфейс Ивмпрофиле**](iwmprofile.md)
</dt> <dt>

[**Интерфейс Ивмпрофилеманажер**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmprofilemanager)
</dt> <dt>

[**Объект взаимного исключения**](mutual-exclusion-object.md)
</dt> <dt>

[**Объект диспетчера профилей**](profile-manager-object.md)
</dt> <dt>

[**Объект конфигурации потока**](stream-configuration-object.md)
</dt> <dt>

[**Объект определения приоритетов потоков**](stream-prioritization-object.md)
</dt> <dt>

[**Работа с профилями**](working-with-profiles.md)
</dt> </dl>

 

 




