---
title: Чтение многоканального звука
description: Чтение многоканального звука
ms.assetid: 9d577c5c-7275-493e-8a77-318c264b59b3
keywords:
- Windows Пакет SDK для формата мультимедиа, чтение многоканального звука
- Расширенный формат систем (ASF), чтение многоканального звука
- ASF (Расширенный системный формат), чтение многоканального звука
- Расширенный формат систем (ASF), многоканальный звук
- ASF (Расширенный системный формат), многоканальный звук
- кодеки, чтение многоканального звука
- многоканальное аудио, чтение
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 93ba314c6f2579bb18cd73593a775089c4b04b1c4a8ecd34868af911da29a67a
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119658534"
---
# <a name="reading-multichannel-audio"></a>Чтение многоканального звука

кодек Windows Media audio 9 Professional может кодировать звук многоканального звука (более двух каналов). При чтении файла с многоканальным звуком необходимо правильно настроить выходные данные, а звук будет доставляться с более низким качеством и стерео. Чтобы задать выходные данные для многоканальной звуковой доставки, необходимо задать два выходных параметра: g \_ всзенабледискретеаутпут и g \_ всзспеакерконфиг.

Установка параметра g \_ всзенабледискретеаутпут в **значение true** задает кодек для доставки звуковых данных высокой четкости. звук с высокой степенью четкости кодируется кодеком Windows Media audio 9 с 24-разрядными примерами на стерео или нескольких каналах. Если этот параметр имеет **значение false**, будут доставляться только 16-разрядные выходные данные стерео.

Число динамиков на воспроизводимом компьютере задается с помощью g \_ всзспеакерконфиг. Этот параметр имеет значение **DWORD** , равное одной из констант динамика DirectSound, перечисленных в следующей таблице. Чтобы разрешить эти константные имена для компилятора, необходимо включить дсаунд. h.



| Константа             | Значение      | Описание                                                                  |
|----------------------|------------|------------------------------------------------------------------------------|
| ДССПЕАКЕР \_ | 0x00000000 | Звук передается напрямую, без настройки для динамиков. |
| \_наушники дсспеакер | 0x00000001 | Клиентский компьютер оснащен наушниками.                             |
| ДССПЕАКЕР \_ Mono      | 0x00000002 | Клиентский компьютер оснащен монауралным докладчиком.                     |
| ДССПЕАКЕР \_ Quad      | 0x00000003 | Клиентский компьютер оснащен куадрафоник колонками.                  |
| \_стерео дсспеакер    | 0x00000004 | Клиентский компьютер оснащен стереодинамиками.                        |
| ДССПЕАКЕР \_ вокруг  | 0x00000005 | Клиентский компьютер оснащен динамиками с четырьмя каналами.   |
| ДССПЕАКЕР \_ 5POINT1   | 0x00000006 | Клиентский компьютер оснащен пятью динамиками и сабвуфером.          |
| ДССПЕАКЕР \_ 7POINT1   | 0x00000007 | Клиентский компьютер оснащен семью динамиками и сабвуфером.         |



 

Чтобы задать эти параметры, используйте [**IWMReaderAdvanced2:: сетаутпутсеттинг**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-setoutputsetting).

Наконец, для вывода каналов дискретными без свертывания в стерео необходимо задать правильный тип носителя для выходных данных, выполнив следующие действия.

1.  Вызовите метод [**ивмреадер:: жетаутпутформаткаунт**](/previous-versions/windows/desktop/api/wmsdkidl/nf-wmsdkidl-iwmreader-getoutputformatcount) , чтобы получить количество поддерживаемых форматов для соответствующих выходных данных звука. Индексы формата выходных данных отсчитываются от нуля.
2.  Для каждого поддерживаемого формата вызовите [**ивмреадер:: жетаутпутформат**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreader-getoutputformat) , чтобы получить интерфейс [**ивмаутпутмедиапропс**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmoutputmediaprops) в выходном объекте свойств мультимедиа.
3.  Вызовите [**ивммедиапропс:: жетмедиатипе**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmmediaprops-getmediatype) , чтобы получить тип мультимедиа.
4.  Если полученный тип мультимедиа является нужным типом многоканального типа, установите его, вызвав [**ивмреадер:: сетаутпутпропс**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreader-setoutputprops).

После установки дискретных выходных данных и конфигурации динамиков выходные форматы, перечисленные модулем чтения, должны включать многоканальные форматы, в которых используется структура [**вавеформатекстенсибле**](/previous-versions/windows/desktop/legacy/dd757721(v=vs.85)) . Если перечислить форматы вывода перед заданием свойств, то будут включаться только форматы с 1 или 2 каналами и максимум 16 бит на канал. Как и в случае с другими звуковыми форматами, следует использовать только форматы, перечисленные в модуле чтения. не настраивайте собственный.

> [!Note]  
> вы можете вывести многоканальный звук только в том случае, если приложение работает под управлением microsoft Windows XP или более поздней версии microsoft Windows.

 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**входные данные, Потоки и выходные данные**](inputs-streams-and-outputs.md)
</dt> <dt>

[**Чтение файлов ASF**](reading-asf-files.md)
</dt> <dt>

[**Параметры вывода**](output-settings.md)
</dt> <dt>

[**Работа с аудио High-Resolution PCM**](working-with-high-resolution-pcm-audio.md)
</dt> </dl>

 

 