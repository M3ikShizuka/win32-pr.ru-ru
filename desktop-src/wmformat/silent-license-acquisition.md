---
title: Автоматическое получение лицензий
description: Автоматическое получение лицензий
ms.assetid: bf88f1bb-0cbb-4c30-92e0-3d342977d67f
keywords:
- Пакет SDK для формата Windows Media, автоматическое получение лицензий
- Пакет SDK для Windows Media Format, лицензии
- Управление цифровыми правами (DRM), автоматическое получение лицензий
- DRM (Управление цифровыми правами), автоматическое получение лицензий
- Управление цифровыми правами (DRM), лицензии
- DRM (Управление цифровыми правами), лицензии
- Расширенные API клиента DRM, автоматическое получение лицензий
- Расширенные API клиента, автоматическое получение лицензий
- Автоматическое получение лицензий
- лицензии, получение бесшумной лицензии
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b7ef92eaf4e347e8eb30f56c1111ec5b27f1e62d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104068262"
---
# <a name="silent-license-acquisition"></a>Автоматическое получение лицензий

Для получения бесшумной лицензии требуется только один вызов метода, который асинхронно обрабатывает все сетевые соединения с сервером лицензий.

Этот тип приобретения лицензий обычно используется как ответ конечного пользователя, пытающегося получить доступ к защищенному содержимому, например, при попытке воспроизвести защищенный файл в приложении проигрывателя мультимедиа. Поскольку получение лицензии без уведомления получает лицензию с одним вызовом, его нельзя использовать, если требуется дополнительный ввод пользователя, например оплата содержимого.

Для автоматического приобретения лицензий выполните следующие действия.

1.  Вызовите метод [**ивмдрмлиценсеманажемент:: AcquireLicense**](iwmdrmlicensemanagement-acquirelicense.md) . Передайте заголовок DRM из защищенного файла в качестве параметра *бстрхеадердата* . Укажите, какие права вы хотите предоставить лицензии в параметре *бстрактионс* . Наконец, задайте для параметра *dwFlags* значение " \_ Автоматическая установка лицензии на получение WMDRM" \_ \_ .
2.  События ловушек для интерфейса [**ивмдрмлиценсеманажемент**](iwmdrmlicensemanagement.md) . При получении события **мевмдрмлиценсеаккуиситионкомплетед** проверьте его код возврата, вызвав метод **имфмедиаевент::-Status** , который описан в документации по Media Foundation. Если полученное значение **HRESULT** является кодом успешного выполнения, то лицензия была успешно скачана и находится в локальном хранилище лицензий, готовом к использованию.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Получение лицензий**](acquiring-licenses.md)
</dt> <dt>

[**Использование модели событий Media Foundation**](using-the-media-foundation-model.md)
</dt> </dl>

 

 




