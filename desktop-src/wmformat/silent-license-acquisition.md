---
title: Автоматическое получение лицензий
description: Автоматическое получение лицензий
ms.assetid: bf88f1bb-0cbb-4c30-92e0-3d342977d67f
keywords:
- Windows Пакет SDK для формата мультимедиа, автоматическое получение лицензий
- Windows Пакет SDK для формата мультимедиа, лицензии
- Управление цифровыми правами (DRM), автоматическое получение лицензий
- DRM (Управление цифровыми правами), автоматическое получение лицензий
- Управление цифровыми правами (DRM), лицензии
- DRM (Управление цифровыми правами), лицензии
- Расширенные API клиента DRM, автоматическое получение лицензий
- Расширенные API клиента, автоматическое получение лицензий
- Автоматическое получение лицензий
- лицензии, получение бесшумной лицензии
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7eff454ce673230f0c7dbe6f64afbf46e9bbe8b5f948609f5fb67d647a4151ca
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118197466"
---
# <a name="silent-license-acquisition"></a>Автоматическое получение лицензий

Для получения бесшумной лицензии требуется только один вызов метода, который асинхронно обрабатывает все сетевые соединения с сервером лицензий.

Этот тип приобретения лицензий обычно используется как ответ конечного пользователя, пытающегося получить доступ к защищенному содержимому, например, при попытке воспроизвести защищенный файл в приложении проигрывателя мультимедиа. Поскольку получение лицензии без уведомления получает лицензию с одним вызовом, его нельзя использовать, если требуется дополнительный ввод пользователя, например оплата содержимого.

Для автоматического приобретения лицензий выполните следующие действия.

1.  Вызовите метод [**ивмдрмлиценсеманажемент:: AcquireLicense**](iwmdrmlicensemanagement-acquirelicense.md) . Передайте заголовок DRM из защищенного файла в качестве параметра *бстрхеадердата* . Укажите, какие права вы хотите предоставить лицензии в параметре *бстрактионс* . Наконец, задайте для параметра *dwFlags* значение " \_ Автоматическая установка лицензии на получение WMDRM" \_ \_ .
2.  События ловушек для интерфейса [**ивмдрмлиценсеманажемент**](iwmdrmlicensemanagement.md) . При получении события **мевмдрмлиценсеаккуиситионкомплетед** проверьте его код возврата, вызвав метод **имфмедиаевент::-Status** , который описан в документации по Media Foundation. Если полученное значение **HRESULT** является кодом успешного выполнения, то лицензия была успешно скачана и находится в локальном хранилище лицензий, готовом к использованию.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**Получение лицензий**](acquiring-licenses.md)
</dt> <dt>

[**Использование модели событий Media Foundation**](using-the-media-foundation-model.md)
</dt> </dl>

 

 




