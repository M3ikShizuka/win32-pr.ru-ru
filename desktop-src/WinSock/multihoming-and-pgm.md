---
description: Особое внимание должно быть уделено многосетевым отправителям или получателям PGM. На этой странице описываются рекомендации и приводятся рекомендации по оптимальным методикам программирования.
ms.assetid: 10fb56dd-3c96-4944-9b53-aee76c269528
title: Многосайтовое и PGM
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 142527c7fdf3e5d34d80c51e4002bc21ad47691c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105656117"
---
# <a name="multihoming-and-pgm"></a>Многосайтовое и PGM

Особое внимание должно быть уделено многосетевым отправителям или получателям PGM. На этой странице описываются рекомендации и приводятся рекомендации по оптимальным методикам программирования.

## <a name="multihomed-pgm-sender"></a>Многосетевой отправитель PGM

Когда приложению не удается указать интерфейс при вызове функции [**Connect**](/windows/desktop/api/Winsock2/nf-winsock2-connect) , используется первый доступный интерфейс. Если интерфейс недоступен, **Подключение** не выполняется.

Если приложение указывает интерфейс с помощью параметра [RM \_ Set \_ Send \_](socket-options.md) , то попытка [**привязки**](/windows/desktop/api/winsock/nf-winsock-bind) выполняется НЕЯВНО к этому интерфейсу с помощью TCP/IP и завершается ошибкой, если TCP/IP не может выполнить запрос на привязку. Если интерфейс задается с помощью команды RM \_ Set \_ Send \_ несколько раз, применяется только последний набор интерфейсов.

Сокеты Windows сохраняют, какой интерфейс задан, и если этот интерфейс исчезает, сеанс отключается.

## <a name="multihomed-pgm-receiver"></a>Многосетевой приемник PGM

Когда приложению не удается указать интерфейс при вызове функции [**Listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen) , используется интерфейс по умолчанию. Если интерфейс недоступен, произойдет сбой [**привязки**](/windows/desktop/api/winsock/nf-winsock-bind) .

Если приложение указывает один или несколько интерфейсов для прослушивания, при помощи команды [RM \_ Add Receive, \_ \_ Если](socket-options.md)сокеты Windows пытаются выполнить привязку к запрошенному интерфейсу или интерфейсам с помощью TCP/IP. Любая ошибка из TCP/IP приводит к сбою запроса. В отличие от случая отправителя PGM, Добавление интерфейса получения несколько раз приводит к тому, что прослушивает все успешно добавленные интерфейсы. Используйте команду RM \_ Del \_ Receive, \_ Если сокет используется для прекращения прослушивания интерфейса.

Сокеты Windows не поддерживают состояние нескольких указанных интерфейсов прослушивания, а вместо этого используют TCP/IP. Однако после выполнения сеанса сокеты Windows отключают входящий интерфейс для этого сеанса и, если этот интерфейс исчезает, сокеты Windows отключает сеанс.

 

 



