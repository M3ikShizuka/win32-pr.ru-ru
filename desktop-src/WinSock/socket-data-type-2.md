---
description: В приложениях Winsock дескриптор сокета не является дескриптором файла и должен использоваться с функциями Winsock.
ms.assetid: bc434b35-9231-4b03-bc8f-cf59aaeb821e
title: Тип данных сокета
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2a95f890a14f68a0422ec91d31cb09735e2c85ab15cad52f9bd40499cee1167c
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120121244"
---
# <a name="socket-data-type"></a>Тип данных сокета

В приложениях Winsock дескриптор сокета не является дескриптором файла и должен использоваться с функциями Winsock.

в UNIX дескриптор сокета представлен стандартным дескриптором файла. в результате дескриптор сокета на UNIX может быть передан любой из стандартных функций файлового ввода-вывода (например, чтение и запись).

кроме того, все дескрипторы в UNIX, включая дескрипторы сокетов, являются маленькими, неотрицательными целыми числами, и некоторые приложения делают предположения, что это будет истинно.

Windows Дескрипторы сокетов не имеют ограничений, Кроме того, что значение Недопустимый сокет не является \_ допустимым сокетом. Дескрипторы сокетов могут принимать любое значение в диапазоне от 0 до НЕДОПУСТИМого \_ сокета — 1.

поскольку тип **сокета** не подписан, компиляция существующего исходного кода из, например, UNIX среда может привести к предупреждениям компилятора о несоответствии типа данных со знаком и без знака.

Это означает, например, что проверка ошибок, возникающих при возврате функций [**Socket**](/windows/desktop/api/Winsock2/nf-winsock2-socket) и [**Accept**](/windows/desktop/api/Winsock2/nf-winsock2-accept) , не должна выполняться путем сравнения возвращаемого значения со значением – 1 или просмотра отрицательного значения (как общих, так и юридических подходов в UNIX). Вместо этого приложение должно использовать константу манифеста недопустимый \_ сокет, как определено в файле заголовка *Winsock2. h* . Например:

типичный стиль UNIX BSD


```C++
s = socket(...);
if (s == -1)    /* or s < 0 */
    {/*...*/}
```



Предпочтительный стиль


```C++
s = socket(...);
if (s == INVALID_SOCKET)
    {/*...*/}
```



## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Перенос приложений сокета в Winsock](porting-socket-applications-to-winsock.md)
</dt> <dt>

[Вопросы программирования Winsock](winsock-programming-considerations.md)
</dt> </dl>

 

 



