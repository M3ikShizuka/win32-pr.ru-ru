---
description: Необходимо всегда соблюдать осторожность, чтобы учитывать любые различия между порядком байтов, используемым для хранения целых чисел в архитектуре узла, и порядком байтов, используемым для передачи отдельными транспортными протоколами.
ms.assetid: 54c84cdb-50a1-4f5e-a18f-0477d90c74d2
title: Порядок байтов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 47af5ea9d22c01e6ae1ad3d78af48b4216f71ecc
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127058429"
---
# <a name="byte-ordering"></a>Порядок байтов

Необходимо всегда соблюдать осторожность, чтобы учитывать любые различия между порядком байтов, используемым для хранения целых чисел в архитектуре узла, и порядком байтов, используемым для передачи отдельными транспортными протоколами. любая ссылка на адрес или номер порта, передаваемые или из подпрограммы Windows sockets, должна быть в сетевом порядке (с обратным порядком байтов) для используемого протокола. В случае IP-адреса это включает IP-адрес и параметры порта структуры [**SOCKADDR**](sockaddr-2.md) (но не параметра *\_ семейства Sin* ).

несколько UNIX систем работают с процессорами, представляющими целые числа в сетевом байтом порядке (с обратным порядком байтов). Поэтому необходимость преобразования целых чисел из порядка байтов узла в сетевой порядок байтов можно пропустить, не вызывая проблем, даже если это не рекомендуется для переносимости.

В отличие от этого, порядок байтов, используемый для представления целых чисел в большинстве процессоров Intel®, имеет прямой порядок байтов. Поэтому становится обязательным Преобразование целых чисел из байта узла в порядковый байт в сети перед использованием в функциях и структурах Winsock.

Рассмотрим приложение, которое обычно связывается с сервером через TCP-порт, соответствующий службе времени, но предоставляет пользователю механизм для указания альтернативного порта. Номер порта, возвращенный [**жетсервбинаме**](/windows/desktop/api/winsock/nf-winsock-getservbyname) , уже находится в сетевом порядке. это формат, необходимый для создания адреса, чтобы перевод не требовался. Однако если пользователь выбирает использование другого порта, который вводит как целое число, приложение должно преобразовать его из узла в сетевой порядок TCP/IP (с помощью функции [**хтонс**](/windows/desktop/api/winsock/nf-winsock-htons) или [**всахтонс**](/windows/desktop/api/Winsock2/nf-winsock2-wsahtons) ), прежде чем использовать его для создания адреса. И наоборот, если приложение должно отобразить номер порта в адресе (например, возвращено [**жетпирнаме**](/windows/desktop/api/winsock/nf-winsock-getpeername) ), номер порта должен быть преобразован из сети в порядок размещения (с помощью функции [**нтохс**](/windows/desktop/api/winsock/nf-winsock-ntohs) или [**всантохс**](/windows/desktop/api/Winsock2/nf-winsock2-wsantohs) ) перед отображением.

Так как порядок байтов Intel и Интернета отличается, преобразования, описанные выше, не могут быть предотвращены. Средства записи приложений соблюдают, что они должны использовать стандартные функции преобразования, предоставляемые как часть Winsock, вместо написания собственного кода преобразования, так как будущие реализации Winsock, скорее всего, будут работать на системах, для которых порядок размещения идентичен сетевому порядку байтов. Переносимыми могут быть только приложения, использующие стандартные функции преобразования между узлом и сетевым порядком байтов.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**жетпирнаме**](/windows/desktop/api/winsock/nf-winsock-getpeername)
</dt> <dt>

[**жетсервбинаме**](/windows/desktop/api/winsock/nf-winsock-getservbyname)
</dt> <dt>

[**хтонл**](/windows/desktop/api/winsock/nf-winsock-htonl)
</dt> <dt>

[**хтонс**](/windows/desktop/api/winsock/nf-winsock-htons)
</dt> <dt>

[**нтохл**](/windows/desktop/api/winsock/nf-winsock-ntohl)
</dt> <dt>

[**нтохс**](/windows/desktop/api/winsock/nf-winsock-ntohs)
</dt> <dt>

[Перенос приложений сокета в Winsock](porting-socket-applications-to-winsock.md)
</dt> <dt>

[**SOCKADDR**](sockaddr-2.md)
</dt> <dt>

[Вопросы программирования Winsock](winsock-programming-considerations.md)
</dt> <dt>

[**всахтонл**](/windows/desktop/api/Winsock2/nf-winsock2-wsahtonl)
</dt> <dt>

[**всахтонс**](/windows/desktop/api/Winsock2/nf-winsock2-wsahtons)
</dt> <dt>

[**всантохл**](/windows/desktop/api/Winsock2/nf-winsock2-wsantohl)
</dt> <dt>

[**всантохс**](/windows/desktop/api/Winsock2/nf-winsock2-wsantohs)
</dt> </dl>

 

 



