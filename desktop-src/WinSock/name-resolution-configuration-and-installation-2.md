---
description: Чтобы поставщик пространства имен был доступен через сокеты Windows, он должен быть правильно установлен в системе и зарегистрирован с помощью сокетов Windows.
ms.assetid: c73baf62-b862-476c-b381-be00699e78ca
title: Настройка разрешения имен и установка
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 423e0ca7c9c5290a040a17e0f1ded2a97a1aed15
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673275"
---
# <a name="name-resolution-configuration-and-installation"></a>Настройка разрешения имен и установка

Чтобы поставщик пространства имен был доступен через сокеты Windows, он должен быть правильно установлен в системе и зарегистрирован с помощью сокетов Windows. При установке поставщика пространства имен путем вызова программы установки поставщика необходимо добавить сведения о конфигурации в базу данных конфигурации, чтобы предоставить Ws2 \_32.dll необходимые сведения о поставщике услуг. Ws2 \_32.dll экспортирует [**всЦинсталлнамеспаце**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespace) для использования программой установки поставщика. Эта функция используется для предоставления релевантной информации о устанавливаемом поставщике услуг. Эти данные включают:

-   Имя поставщика — строка, представляющая поставщика для интерфейса на панели управления.
-   Версия поставщика — версия этого поставщика.
-   Путь к поставщику — путь к библиотеке DLL поставщика.
-   Пространство имен — пространство имен, поддерживаемое поставщиком.
-   GUID поставщика — уникальный, предоставленный поставщиком номер, представляющий эту комбинацию поставщика и пространства имен. Он используется в качестве ключа для всех последующих ссылок на этот поставщик, а также для удаления. Эти значения создаются с помощью служебной программы Uuidgen.exe.
-   Хранит все флаги — флаг, указывающий, будет ли данный поставщик пространства имен отвечать за хранение всех сведений о схеме класса службы для всех классов служб. Если такой поставщик существует, \_32.dllу Ws2 не требуется запрашивать эти сведения у каждого отдельного поставщика пространства имен.

В Windows Vista и более поздних версиях предусмотрена Улучшенная функция [**WSCInstallNameSpaceEx32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespaceex32) , позволяющая поставщику пространства имен передавать дополнительный большой двоичный объект данных, относящийся к пространству имен.

На 64-разрядных платформах для установки пространства имен в 32-разрядном каталоге предоставляются аналогичные функции [**WSCInstallNameSpace32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespace32) и [**WSCInstallNameSpaceEx32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespaceex32) .

32.dll Ws2 \_ также предоставляет функцию [**вскунинсталлнамеспаце**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscuninstallnamespace)для программы удаления поставщика, которая удаляет всю необходимую информацию из базы данных конфигурации. Точное расположение и формат этих сведений о конфигурации являются частными для32.dll Ws2 \_ и могут управляться только описанными выше функциями.

На 64-разрядных платформах для удаления пространства имен в 32-разрядном каталоге предоставляется аналогичная функция [**WSCInstallNameSpace32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespace32) .

В любой момент поставщик пространства имен считается активным или неактивным, и этот параметр управляется с помощью функций [**всценабленспровидер**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenablensprovider) и [**WSCEnableNSProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenablensprovider32) . Неактивные поставщики пространства имен продолжают отображаться при перечислении (с помощью функций [**всаенумнамеспацепровидерс**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersa), [**всаенумнамеспацепровидерсекс**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersexa), [**WSCEnumNameSpaceProviders32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceproviders32)и [**WSCEnumNameSpaceProvidersEx32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceprovidersex32) ), но \_32.dll Ws2 не будет маршрутизировать запросы или операции регистрации служб для этих поставщиков. Эта возможность может быть полезной в ситуациях, когда более одного из установленных поставщиков пространств имен может поддерживать заданное пространство имен.

Если в одной функции API имеется ссылка на несколько поставщиков пространств имен, порядок, в котором выполняется маршрутизация запросов и операций регистрации в поставщики пространства имен, не определен. Порядок не связан с порядком, в котором устанавливаются поставщики пространства имен. Существует два способа управления тем, какие поставщики пространства имен используются для разрешения запроса имени. Во-первых, функции [**всценабленспровидер**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenablensprovider) и [**WSCEnableNSProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenablensprovider32) можно использовать для включения и отключения пространств имен на уровне компьютера, постоянно. Во-вторых, приложения могут направить отдельный запрос конкретному поставщику, указав идентификатор GUID, определяющий поставщика, как часть запроса.

 

 



