---
description: Трассировка Winsock
ms.assetid: 0c430fc2-28e7-4537-a887-4c36d24fedee
title: Трассировка Winsock
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 803be6220d4d2d440811033786b0f043fab0ff9d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105711007"
---
# <a name="winsock-tracing"></a>Трассировка Winsock

## <a name="introduction"></a>Введение

Трассировка Winsock — это функция устранения неполадок, которую можно включить в двоичных файлах розничной торговли для трассировки определенных событий Windows Socket с минимальными издержками. Цель добавления трассировки розничной торговли в сокеты Windows — обеспечить улучшенные возможности диагностики для разработчиков и поддержки продуктов. Трассировка событий сети Winsock поддерживает операции сокета трассировки для приложений IPv4 и IPv6. Трассировка изменений каталога Winsock поддерживает трассировку изменений, внесенных в каталог Winsock с помощью многоуровневых поставщиков служб (LSP). Трассировка Winsock поддерживается в Windows Vista и более поздних версиях.

> [!Note]  
> Многоуровневые поставщики служб являются устаревшими. Начиная с Windows 8 и Windows Server 2012, используйте [платформу фильтрации Windows](../fwp/windows-filtering-platform-start-page.md).

 

При возникновении непредвиденной ошибки в сокете основным моментом для диагностики проблемы является возвращенный код ошибки. Очень часто в возвращенном коде ошибки не объясняется, почему произошла ошибка, особенно если ошибка инициируется базовым сетевым транспортом. Трассировка Winsock предоставляет более подробный уровень трассировки, который может регистрировать дополнительные сведения для перехвата повреждений буфера и плохо написанных приложений.

Трассировка Winsock использует средство трассировки событий для Windows (ETW), предназначенное для общего назначения, высокоскоростной трассировки, обеспечиваемой операционной системой. Используя механизм буферизации и ведения журнала, реализованный в ядре, ETW предоставляет механизм трассировки для событий, создаваемых как приложениями пользовательского режима, так и драйверами устройств в режиме ядра. Кроме того, ETW позволяет динамически включать и отключать ведение журнала, что упрощает выполнение подробной трассировки в рабочей среде без необходимости перезагрузки или перезапуска приложений. Механизм ведения журнала использует буферы, которые записываются на диск потоком асинхронного модуля записи. Это позволяет крупномасштабным серверным приложениям записывать события с минимальным беспорядки. ETW впервые появился в Windows 2000. Поддержка трассировки Winsock с помощью ETW была добавлена в Windows Vista и более поздних версиях. Общие сведения о трассировке событий Windows см. в статье [улучшение отладки и настройка производительности с помощью ETW](/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw).

Трассировку Winsock можно включить только на уровне операционной системы для всех процессов и потоков, выполняющихся на компьютере. Трассировку Winsock в настоящее время нельзя включить только для одного процесса или потока. Если включена трассировка событий сети Winsock, все приложения сокетов (IPv4 и IPv6) на компьютере отслеживаются.

В следующих разделах подробно описывается трассировка Winsock:

-   [Уровни трассировки Winsock](winsock-tracing-levels.md)
-   [Управление трассировкой Winsock](control-of-winsock-tracing.md)
-   [Сведения о трассировке событий сети Winsock](winsock-tracing-event-details.md)
-   [Сведения о трассировке изменений каталога Winsock](winsock-layered-service-provider-tracing-event-details.md)

## <a name="related-topics"></a>См. также

<dl> <dt>

[Усовершенствованные отладка и настройка производительности с помощью приложения ETW](/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw)
</dt> <dt>

[Средства отладки и трассировки](debug-and-trace-facilities-2.md)
</dt> </dl>

 

 
