---
description: Трассировка Winsock
ms.assetid: 0c430fc2-28e7-4537-a887-4c36d24fedee
title: Трассировка Winsock
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 803be6220d4d2d440811033786b0f043fab0ff9d
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "126967210"
---
# <a name="winsock-tracing"></a>Трассировка Winsock

## <a name="introduction"></a>Введение

трассировка Winsock — это функция устранения неполадок, которую можно включить в двоичных файлах розничной торговли для трассировки определенных Windows событий сокета с минимальными издержками. цель добавления трассировки розничной торговли в Windowsные сокеты — предоставить улучшенные средства диагностики для разработчиков и поддержки продуктов. Трассировка событий сети Winsock поддерживает операции сокета трассировки для приложений IPv4 и IPv6. Трассировка изменений каталога Winsock поддерживает трассировку изменений, внесенных в каталог Winsock с помощью многоуровневых поставщиков служб (LSP). трассировка Winsock поддерживается в Windows Vista и более поздних версиях.

> [!Note]  
> Многоуровневые поставщики служб являются устаревшими. начиная с Windows 8 и Windows Server 2012 используйте [платформу фильтрации Windows](../fwp/windows-filtering-platform-start-page.md).

 

При возникновении непредвиденной ошибки в сокете основным моментом для диагностики проблемы является возвращенный код ошибки. Очень часто в возвращенном коде ошибки не объясняется, почему произошла ошибка, особенно если ошибка инициируется базовым сетевым транспортом. Трассировка Winsock предоставляет более подробный уровень трассировки, который может регистрировать дополнительные сведения для перехвата повреждений буфера и плохо написанных приложений.

трассировка Winsock использует трассировку событий для Windows (ETW), средства высокоскоростной трассировки общего назначения, обеспечиваемой операционной системой. Используя механизм буферизации и ведения журнала, реализованный в ядре, ETW предоставляет механизм трассировки для событий, создаваемых как приложениями пользовательского режима, так и драйверами устройств в режиме ядра. Кроме того, ETW позволяет динамически включать и отключать ведение журнала, что упрощает выполнение подробной трассировки в рабочей среде без необходимости перезагрузки или перезапуска приложений. Механизм ведения журнала использует буферы, которые записываются на диск потоком асинхронного модуля записи. Это позволяет крупномасштабным серверным приложениям записывать события с минимальным беспорядки. трассировка событий windows впервые появилась в Windows 2000. поддержка трассировки Winsock с помощью ETW была добавлена в Windows Vista и более поздних версий. Общие сведения о трассировке событий Windows см. в статье [улучшение отладки и настройка производительности с помощью ETW](/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw).

Трассировку Winsock можно включить только на уровне операционной системы для всех процессов и потоков, выполняющихся на компьютере. Трассировку Winsock в настоящее время нельзя включить только для одного процесса или потока. Если включена трассировка событий сети Winsock, все приложения сокетов (IPv4 и IPv6) на компьютере отслеживаются.

В следующих разделах подробно описывается трассировка Winsock:

-   [Уровни трассировки Winsock](winsock-tracing-levels.md)
-   [Управление трассировкой Winsock](control-of-winsock-tracing.md)
-   [Сведения о трассировке событий сети Winsock](winsock-tracing-event-details.md)
-   [Сведения о трассировке изменений каталога Winsock](winsock-layered-service-provider-tracing-event-details.md)

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Усовершенствованные отладка и настройка производительности с помощью приложения ETW](/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw)
</dt> <dt>

[Средства отладки и трассировки](debug-and-trace-facilities-2.md)
</dt> </dl>

 

 
