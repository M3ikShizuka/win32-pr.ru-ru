---
description: Ниже приведено пошаговое руководство по началу работы с программированием Windows Sockets.
ms.assetid: 905cd5bc-44af-4d3f-841a-9e9a2700a785
title: начало работы с помощью Winsock
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 43751663a637fafb2eec453a48c329ff8e4499f2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105692287"
---
# <a name="getting-started-with-winsock"></a>начало работы с помощью Winsock

Ниже приведено пошаговое руководство по началу работы с программированием Windows Sockets. Он предназначен для понимания основных функций и структур данных Winsock и их совместной работы.

Приложение клиента и сервера, используемое для иллюстрации, является очень базовым клиентом и сервером. В образцы, входящие в состав пакета средств разработки программного обеспечения (SDK) для Microsoft Windows, включены более сложные примеры кода.

Первые несколько шагов одинаковы для клиентских и серверных приложений.

-   [О серверах и клиентах](about-clients-and-servers.md)
-   [Создание базового приложения Winsock](creating-a-basic-winsock-application.md)
-   [Инициализация Winsock](initializing-winsock.md)

В следующих разделах описаны оставшиеся шаги по созданию клиентского приложения Winsock.

-   [Создание сокета для клиента](creating-a-socket-for-the-client.md)
-   [Подключение к сокету](connecting-to-a-socket.md)
-   [Отправка и получение данных на клиенте](sending-and-receiving-data-on-the-client.md)
-   [Отсоединение клиента](disconnecting-the-client.md)

В следующих разделах описаны оставшиеся шаги по созданию серверного приложения Winsock.

-   [Создание сокета для сервера](creating-a-socket-for-the-server.md)
-   [Привязка сокета](binding-a-socket.md)
-   [Прослушивание на сокете](listening-on-a-socket.md)
-   [Принятие подключения](accepting-a-connection.md)
-   [Получение и отправка данных на сервере](receiving-and-sending-data-on-the-server.md)
-   [Отключение сервера](disconnecting-the-server.md)

Полный исходный код для этих основных примеров.

-   [Выполнение примера кода клиента и сервера Winsock](finished-server-and-client-code.md)
-   [Завершение кода клиента Winsock](complete-client-code.md)
-   [Завершение кода сервера Winsock](complete-server-code.md)

## <a name="advanced-winsock-samples"></a>Расширенные примеры Winsock

В Windows SDK включены несколько дополнительных примеров клиента и сервера Winsock. По умолчанию исходный код примера Winsock устанавливается в следующий каталог Windows SDK для Windows 7:

*C: \\ Program Files \\ Microsoft SDK \\ Windows \\ v 7.0 \\ Samples \\ нетдс \\ Winsock*

В более ранних версиях Windows SDK номер версии в указанном выше пути изменится. Например, исходный код примера Winsock устанавливается в следующий каталог по умолчанию Windows SDK для Windows Vista.

*C: \\ Program Files \\ Microsoft SDK \\ Windows \\ v 6.0 \\ Samples \\ нетдс \\ Winsock*

Более сложные примеры, перечисленные ниже, в порядке возрастания производительности находятся в следующих каталогах:

-   IOCP

    Этот каталог содержит три примера программ, использующих порты завершения ввода-вывода. В число программ входит сервер Winsock (иокпсервер), использующий функцию [**всаакцепт**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) , сервер Winsock (иокпсерверекс), использующий функцию [**акцептекс**](/windows/win32/api/mswsock/nf-mswsock-acceptex) , и простой многопоточный клиент Winsock (иокпклиент), используемый для тестирования любого из этих серверов. Серверные программы поддерживают несколько клиентов, подключающихся по протоколу TCP/IP, и отправляют произвольный размер буферов данных, которые сервер возвращает обратно клиенту. Для удобства простая клиентская программа, иокпклиент, была разработана для подключения и непрерывной отправки данных на сервер, чтобы нагрузить их с помощью нескольких потоков. Серверы Winsock, использующие порты завершения ввода-вывода, обеспечивают наибольшую производительность.

-   крывает

    Этот каталог содержит образец серверной программы, которая использует перекрывающиеся операции ввода-вывода. Пример программы использует функцию [**акцептекс**](/windows/win32/api/mswsock/nf-mswsock-acceptex) и перекрывающиеся операции ввода-вывода для эффективной обработки нескольких асинхронных запросов на подключение от клиентов. Сервер использует функцию **акцептекс** для мультиплексирования различных клиентских подключений в приложении Win32 с одним потоком. Использование перекрывающихся операций ввода-вывода позволяет повысить масштабируемость.

-   всаполл

    Этот каталог содержит базовый пример программы, демонстрирующий использование функции [**всаполл**](/windows/win32/api/winsock2/nf-winsock2-wsapoll) . Объединенная клиентская и серверная программы не блокируются и используют функцию **всаполл** , чтобы определить, когда возможна отправка или получение без блокировки. Этот пример более нагляден для иллюстрации и не является высокопроизводительным сервером.

-   простой

    Этот каталог содержит три основных примера программ, демонстрирующих использование нескольких потоков сервером. В число программ входит простой сервер TCP/UDP (простой), сервер TCP-сервера (Simple \_ IOCTL), использующий функцию [**SELECT**](/windows/desktop/api/Winsock2/nf-winsock2-select) в консольном приложении Win32 для поддержки нескольких клиентских запросов, а также клиентская программа TCP/UDP (симплек) для тестирования серверов. Серверы демонстрируют использование нескольких потоков для обработки нескольких клиентских запросов. Этот метод имеет проблемы масштабируемости, так как для каждого клиентского запроса создается отдельный поток.

-   гласит

    Этот каталог содержит базовый пример сервера и клиентской программы. Сервер демонстрирует использование неблокирующего приема с помощью функции [**SELECT**](/windows/desktop/api/Winsock2/nf-winsock2-select) или асинхронного приема с помощью функции [**всаасинкселект**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) . Этот пример более нагляден для иллюстрации и не является высокопроизводительным сервером.

 

 
