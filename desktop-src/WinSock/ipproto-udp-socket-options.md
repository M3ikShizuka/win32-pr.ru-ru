---
description: В следующей таблице описаны \_ параметры сокета иппрото UDP, применяемые к сокетам, созданным для семейств IPv4 и IPv6-адресов (AF \_ INET и AF \_ INET6) с параметром протокола для функции сокета, указанной как UDP (иппрото \_ UDP).
ms.assetid: 579448a1-22af-488f-a1f5-97ba69a15524
title: Параметры сокета IPPROTO_UDP
ms.topic: article
ms.date: 10/02/2019
ms.openlocfilehash: 6f1f25ebae34d7db4290ab23bbf799fc0e0b68df
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127461250"
---
# <a name="ipproto_udp-socket-options"></a>\_Параметры сокета UDP иппрото

В следующей таблице описаны параметры сокета **иппрото \_ UDP** , применяемые к сокетам, созданным для семейств IPv4 и IPv6-адресов (AF \_ INET и AF \_ INET6) с параметром *протокола* для функции [**сокета**](/windows/win32/api/Winsock2/nf-winsock2-socket) , указанной как UDP (иппрото \_ UDP). Дополнительные сведения о получении и настройке параметров сокета см. на страницах справочника по функциям [**жетсоккопт**](/windows/win32/api/winsock/nf-winsock-getsockopt) и [**сетсоккопт**](/windows/win32/api/winsock/nf-winsock-setsockopt) .

Для перечисления протоколов и обнаружения поддерживаемых свойств для каждого установленного протокола используйте функцию [**всаенумпротоколс**](/windows/win32/api/Winsock2/nf-winsock2-wsaenumprotocolsa), [**всценумпротоколс**](/windows/win32/api/Ws2spi/nf-ws2spi-wscenumprotocols)или [**WSCEnumProtocols32**](/windows/win32/api/Ws2spi/nf-ws2spi-wscenumprotocols32) .

## <a name="options"></a>Параметры

| Параметр | Получить | Присвойте параметру | Тип оптвал | Описание |
|-|-|-|-|-|
| \_Объем контрольной суммы UDP \_ (ws2tcpip. h) | Да | Да | DWORD (логическое значение) | Если **значение равно true**, UDP-датаграммы отправляются с использованием контрольной суммы. |
| \_НЕконтрольная сумма UDP (ws2tcpip. h) | Да | Да | DWORD (логическое значение) | Если **значение равно true**, UDP-датаграммы отправляются с контрольной суммой, равной нулю. Требуется для поставщиков услуг. Если поставщик услуг не имеет механизма для отключения вычисления контрольной суммы UDP, он может просто сохранить этот параметр, не принимая никаких действий. Этот параметр не поддерживается для IPv6. |
| UDP_RECV_MAX_COALESCED_SIZE (ws2ipdef. h; include ws2tcpip. h) | Да | Да | DWORD | Если задано ненулевое значение, несколько полученных датаграмм могут быть объединены в один буфер сообщений, прежде чем они будут указаны приложению. Значение параметра представляет максимальный размер сообщения в байтах для Объединенных сообщений, которые могут быть указаны для приложения. Необъединенные сообщения, превышающие значение параметра, могут по-прежнему быть указаны. Значение по умолчанию — 0 (без объединения). Датаграммы будут объединены, только если они поступили с одного и того же исходного адреса и порта. Все объединенные датаграммы имеют одинаковый размер &mdash; , за исключением последней датаграммы, которая может быть меньше. Если приложению требуется получить размеры датаграмм (за исключением последней датаграммы, которая может различаться), необходимо использовать API приема, который поддерживает управляющую информацию (например, [**LPFN_WSARECVMSG (всареквмсг)**](/windows/win32/api/mswsock/nc-mswsock-lpfn_wsarecvmsg)). Размер всех сообщений, кроме последнего, можно найти в сообщении управления **UDP_COALESCED_INFO** , которое имеет тип DWORD. Для обеспечения безопасности типа приложение должно использовать функции [всажетудпреквмакскоалесцедсизе](/windows/win32/api/ws2tcpip/nf-ws2tcpip-wsagetudprecvmaxcoalescedsize) и [всасетудпреквмакскоалесцедсизе](/windows/win32/api/ws2tcpip/nf-ws2tcpip-wsasetudprecvmaxcoalescedsize) , а не параметр сокета напрямую. |
| UDP_SEND_MSG_SIZE (ws2ipdef. h; include ws2tcpip. h) | Да | Да | DWORD | Если задано ненулевое значение, буферы, отправленные приложением, разбиваются на несколько сообщений в сетевом стеке. Значение параметра представляет размер каждого неработающего сообщения. Значение параметра представлено в байтах. Размер последнего сегмента может быть меньше значения параметра. Значение по умолчанию — 0 (без сегментации). В приложении должно быть задано значение меньше MTU пути к местам назначения, чтобы избежать фрагментации IP-адресов. Для обеспечения безопасности типа приложение должно использовать функции [всажетудпсендмессажесизе](/windows/win32/api/ws2tcpip/nf-ws2tcpip-wsagetudpsendmessagesize) и [всасетудпсендмессажесизе](/windows/win32/api/ws2tcpip/nf-ws2tcpip-wsasetudpsendmessagesize) , а не параметр сокета напрямую. |

## <a name="legacy-windows-support-for-ipproto_udp-options"></a>поддержка устаревших Windows для \_ параметров UDP иппрото

**UDP-порт \_ \_покрытие контрольной суммы** недоступно на Windows 2000 и в Windows NT4. **UDP-порт \_ недоступность контрольной суммы \_** и **\_ неконтрольной суммы UDP** в Windows 9x/Me. 

## <a name="remarks"></a>Remarks

в пакете Microsoft Windows Software Development Kit (SDK), выпущенном для Windows Vista и более поздних версий, организация файлов заголовков изменилась, а в файле заголовков *Ws2def. h* , который автоматически включается в заголовочный файл *Winsock2. h* , будет определен **иппрото уровень \_ UDP** . Параметры сокета **иппрото \_ UDP** определяются в файле заголовка *Ws2tcpip. h* . Файл заголовка *Ws2def. h* никогда не должен использоваться напрямую.

## <a name="requirements"></a>Требования

| Требование | Значение |
|-|-|
| Заголовок<br/> | <dl> <dt>ws2ipdef. h (include ws2tcpip. h) и ws2tcpip. h</dt> <dt>Winsock2. h на Windows Server 2003, Windows XP и Windows 2000</dt> </dl> |
