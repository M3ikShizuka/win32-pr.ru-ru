---
description: '\_ \_ Параметр сокета уровня защиты IPv6 позволяет разработчикам размещать ограничения доступа к сокетам IPv6.'
ms.assetid: bfb934b3-1e86-431f-a21c-880048d32d35
title: IPV6_PROTECTION_LEVEL
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0e2a8dd70bb1fb5b21f74f8939f11da0d9e2a3ba
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105692281"
---
# <a name="ipv6_protection_level"></a>\_Уровень защиты \_ IPv6

\_ \_ Параметр сокета уровня защиты IPv6 позволяет разработчикам размещать ограничения доступа к сокетам IPv6. Такие ограничения позволяют приложению, работающему в частной локальной сети, просто и надежно защититься от внешних атак. \_ \_ Параметр сокета уровня защиты IPv6 расширяет или ограничивает область действия прослушивающего сокета, обеспечивая неограниченный доступ от общедоступных и частных пользователей при необходимости или ограничивающий доступ только для того же сайта, если это необходимо.

\_Уровень защиты IPv6 \_ в настоящее время имеет три определенных уровня защиты.



| Уровень защиты                                                                                                                                 | Описание                                                                                                                                                                                                                                                                                                                        |
|--------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="PROTECTION_LEVEL_UNRESTRICTED"></span><span id="protection_level_unrestricted"></span>\_НЕограниченный уровень защиты \_<br/>       | Используется приложениями, предназначенными для работы в Интернете, включая приложения, использующие преимущества возможностей обхода NAT IPv6, встроенные в Windows (например, Teredo). Эти приложения могут обходить брандмауэры протокола IPv4, поэтому они должны быть защищены от атак из Интернета, направленных на открытый порт.<br/> |
| <span id="PROTECTION_LEVEL_EDGERESTRICTED"></span><span id="protection_level_edgerestricted"></span>\_еджерестриктед уровня \_ защиты<br/> | Используется приложениями, предназначенными для взаимодействия через Интернет. Этот параметр не разрешает обход NAT с помощью реализации Windows Teredo. Эти приложения могут обходить брандмауэры протокола IPv4, поэтому они должны быть защищены от атак из Интернета, направленных на открытый порт.<br/>                                   |
| <span id="PROTECTION_LEVEL_RESTRICTED"></span><span id="protection_level_restricted"></span>\_ \_ ограниченный уровень защиты<br/>             | Используется приложениями интрасети, которые не реализуют сценарии Интернета. Эти приложения обычно не тестируются и не защищаются против атак из Интернета.<br/> Этот параметр ограничивает получаемый трафик локальным.<br/>                                                                             |



 

В следующем примере кода представлены определенные значения для каждого из них:

``` syntax
#define PROTECTION_LEVEL_UNRESTRICTED   10  /* for peer-to-peer apps */
#define PROTECTION_LEVEL_EDGERESTRICTED 20  /* Same as unrestricted, except for Teredo  */
#define PROTECTION_LEVEL_RESTRICTED     30  /* for Intranet apps     */
```

Эти значения являются взаимоисключающими и не могут быть объединены в одном вызове функции [**сетсоккопт**](/windows/desktop/api/winsock/nf-winsock-setsockopt) . Другие значения для этого параметра сокета зарезервированы. Эти уровни защиты применяются только к входящим подключениям. Установка этого параметра сокета не влияет на исходящие пакеты или соединения.

В Windows 7 и Windows Server 2008 R2 значение по умолчанию для \_ уровня защиты IPv6 \_ не указано, а **\_ уровень защиты \_ по умолчанию** определен как-1 — недопустимое значение для \_ уровня защиты IPv6 \_ .

В Windows Vista и Windows Server 2008 значением по умолчанию для \_ уровня защиты IPv6 \_ является **\_ \_ Неограниченный уровень защиты** , а **\_ уровень защиты \_ по умолчанию** определяется равным – 1 — недопустимое значение для \_ уровня защиты IPv6 \_ .

В Windows Server 2003 и Windows XP значением по умолчанию для \_ уровня защиты IPv6 является уровень защиты \_ **\_ \_ еджерестриктед** , **а \_ уровень защиты \_ по умолчанию** — **уровень \_ защиты \_ еджерестриктед**.

> [!Note]  
> \_ \_ Перед привязкой сокета необходимо задать параметр сокета уровня защиты IPv6. В противном случае пакеты, полученные между вызовами [**BIND**](/windows/desktop/api/winsock/nf-winsock-bind) и [**сетсоккопт**](/windows/desktop/api/winsock/nf-winsock-setsockopt) , будут соответствовать **\_ уровню защиты \_ еджерестриктед** и могут быть переданы в приложение.

 

В следующей таблице описан результат применения каждого уровня защиты к сокету прослушивания.

Уровень защиты

Разрешенный входящий трафик

Тот же сайт

External

Обход NAT (Teredo)

\_ \_ ограниченный уровень защиты

Да

Нет

Нет

\_еджерестриктед уровня \_ защиты

Да

Да

Нет

\_НЕограниченный уровень защиты \_

Да

Да

Да



 

В приведенной выше таблице **один и тот же столбец сайта** является сочетанием следующего:

-   Связывание локальных адресов
-   Локальные адреса сайта
-   Глобальные адреса, известные для того же сайта (соответствующие таблице префиксов сайта);

В Windows 7 и Windows Server 2008 R2 значение по умолчанию для \_ уровня защиты IPv6 \_ не указано. Если на локальном компьютере не установлено программное обеспечение брандмауэра с поддержкой обхода узлов (брандмауэр Windows отключен или установлен какой-либо другой брандмауэр, который игнорирует трафик Teredo), трафик Teredo будет получен только в том случае, если \_ для параметра сокет уровня защиты IPv6 задано значение \_ **\_ \_ Неограниченный уровень защиты**. Однако брандмауэр Windows или любая политика брандмауэра с поддержкой обхода краев может игнорировать этот параметр в зависимости от параметров политики брандмауэра. Если установить этот параметр сокета в состояние **защиты без \_ \_ ограничений**, приложение будет связываться с явной целью получения трафика, обход которого проходит через брандмауэр узла, установленный на локальном компьютере. Поэтому, если установлен брандмауэр узла с поддержкой обхода узлов, он будет принимать окончательное решение о принятии пакета. По умолчанию без указания параметра сокета:

-   o Если брандмауэр Windows включен (или установлен другой брандмауэр узла с поддержкой обхода узлов) на локальном компьютере, будет наблюдаться любое принудительное применение. Стандартный брандмауэр узла, поддерживающий обходы узлов, блокирует трафик Teredo по умолчанию. Поэтому приложения будут наблюдать по умолчанию так, как если бы это был **\_ уровень защиты \_ еджерестриктед**.
-   o Если брандмауэр Windows не включен и на локальном компьютере не установлен другой брандмауэр узла с поддержкой пограничной передачи, то по умолчанию будет использоваться **уровень защиты \_ \_ еджерестриктед**.

В Windows Vista и Windows Server 2008 значением по умолчанию для \_ уровня защиты IPv6 \_ является **\_ \_ Неограниченный уровень защиты**. Но действующее значение зависит от того, включен ли брандмауэр Windows. В брандмауэре Windows учитывается режим обхода, независимо от того, какое значение задано для \_ уровня защиты IPv6 \_ и игнорируется, если уровень защиты IPv6 \_ \_ не **\_ \_ ограничен**. Поэтому эффективное значение зависит от политики брандмауэра. Если брандмауэр Windows отключен и на локальном компьютере не установлен другой брандмауэр с поддержкой обхода узлов, для уровня защиты IPV6 по умолчанию используется значение \_ \_ **\_ \_ Неограниченный уровень защиты**.

В Windows Server 2003 и Windows XP значением по умолчанию для \_ уровня защиты IPv6 \_ является **\_ уровень защиты \_ еджерестриктед**. Если не установлен \_ \_ параметр сокета уровня защиты IPv6 на **уровень защиты \_ без \_ ограничений**, трафик Teredo не будет получен.

В зависимости от \_ уровня защиты IPv6 \_ приложение, которому требуется незапрошенный трафик из Интернета, может не получить незапрошенный трафик. Однако эти требования не требуются для получения запрошенного трафика через интерфейс Windows Teredo. Дополнительные сведения о взаимодействии с Teredo см. в статье [Получение запрошенного трафика через Teredo](../teredo/receiving-solicited-traffic-over-teredo.md).

Если входящие пакеты или подключения отклоняются из-за установленного уровня защиты, отклонения обрабатываются так, как если бы ни одно приложение не прослушивает этот сокет.

> [!Note]
>
> \_ \_ Параметр сокета уровня защиты IPv6 не обязательно размещает ограничения доступа для сокетов IPv6 или ОГРАНИЧИВАЕТ обход NAT с помощью какого-либо метода, отличного от Windows Teredo, или даже другой реализации Teredo другим поставщиком.

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[**жетсоккопт**](/windows/desktop/api/winsock/nf-winsock-getsockopt)
</dt> <dt>

[Получение запрошенного трафика через Teredo](../teredo/receiving-solicited-traffic-over-teredo.md)
</dt> <dt>

[**сетсоккопт**](/windows/desktop/api/winsock/nf-winsock-setsockopt)
</dt> </dl>

 

 
