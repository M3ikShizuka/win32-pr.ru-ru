---
description: В этой редакции пример приложения перерабатывается для устранения ненужных подключений.
ms.assetid: 0db6ded4-0a59-454e-824e-8cd7f0dc9fec
title: Редакция 2. перепроектирование для уменьшения числа подключений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ae8d5a8c8648f43f9ddac93c9d17f667b4b97011
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104155874"
---
# <a name="revision-two-redesigning-for-fewer-connects"></a>Редакция 2. перепроектирование для уменьшения числа подключений

В этой редакции пример приложения перерабатывается для устранения ненужных подключений.

> [!WARNING]
> Эти примеры приложений также обеспечивают намеренно низкую производительность, чтобы продемонстрировать улучшения производительности, внесенные в код. Не используйте этот пример кода в приложении. Он предназначен только для иллюстрации.

 


```C++
ComputeNext( Map );
bind( s, ... );
connect( s, ... );
for(int i=0 ; i < ROWS ; ++i)
  for(int j=0 ; j < COLS ; ++j)
  {
    BYTE tmp[3];
    tmp[0] = i;
    tmp[1] = j;
    tmp[2] = Map[i][j];
    send( s, tmp, 3 );
    recv( s, &byRet, 1 );
  }
closesocket( s );
```



## <a name="remaining-problems"></a>Оставшиеся проблемы

Изменения в редакции два переизменили приложение, чтобы установить только одно подключение для каждого обновления. Приложение по-прежнему включает следующие проблемы с производительностью.

-   Приложение по-прежнему сериализуется и передается в чате.
-   Приложение по-прежнему имеет структуру FAT; Существует много операций отправки, которые не нуждаются в операции в этом проекте.
-   Отправка по-прежнему составляет всего 3 байта, что снижает скорость потоковой передачи.

## <a name="key-performance-metrics"></a>Ключевые метрики производительности

Следующие метрики производительности выражаются в времени кругового пути (RTT), Гудпут и служебных издержках. Описание этих терминов см. в разделе [терминология сети](network-terminology-2.md) .

Эта версия отражает следующие метрики производительности.

-   Время ячейки — 1 \* RTT
-   Гудпут — 4 байта/RTT
-   Дополнительная нагрузка на протоколы — 96,8%

## <a name="related-topics"></a>См. также

<dl> <dt>

[Повышение скорости работы приложения](improving-a-slow-application-2.md)
</dt> <dt>

[Терминология сети](network-terminology-2.md)
</dt> <dt>

[Базовая версия: очень плохо выполняемое приложение](the-baseline-version-a-very-poor-performing-application-2.md)
</dt> <dt>

[Редакция 1. Очистка очевидных](revision-1-cleaning-up-the-obvious-2.md)
</dt> <dt>

[Редакция 3: отправка сжатого блока](revision-3-compressed-block-send-2.md)
</dt> <dt>

[Будущие улучшения](future-improvements-2.md)
</dt> </dl>

 

 



