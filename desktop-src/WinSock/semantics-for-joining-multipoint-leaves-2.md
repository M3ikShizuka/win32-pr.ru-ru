---
description: В следующем примере сокет MultiPoint часто описывается путем определения его роли на одной из двух плоскостей (управление или данные).
ms.assetid: 34f639e2-9363-4f3f-a8de-b7c5d12618c9
title: Семантика присоединения к листьям MultiPoint
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df12683838fbad89f717b08d7a19802f24556761
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105702088"
---
# <a name="semantics-for-joining-multipoint-leaves"></a>Семантика присоединения к листьям MultiPoint

В следующем примере сокет MultiPoint часто описывается путем определения его роли на одной из двух плоскостей (управление или данные). Следует понимать, что у того же сокета есть роль в другой плоскости, но это не упоминается для того, чтобы обеспечить короткий вид ссылок. Например, при создании ссылки на "c-" \_ корневой сокет "это может быть \_ корневой или d-или корневой \_ \_ сокет c \_ .

В схемах плоскости управления с корнями новые конечные узлы добавляются в сеанс MultiPoint одним или двумя разными способами. В первом методе корень использует [**всажоинлеаф**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) для инициации подключения к конечному узлу и его появления в качестве участника. На конечном узле одноранговый узел должен создать \_ конечный сокет c и использовать [**Listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen) , чтобы присвоить ему режим прослушивания. Конечный узел получает уведомление о принятии ДЕМОна \_ , когда приглашено присоединиться к сеансу, и сигнализирует о его готовности присоединиться к вызову [**всаакцепт**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept). \_После завершения операции **соединения** корневое приложение получает уведомление демона по подключению.

Во втором методе роли по сути реверсируются. Корневое приложение создает \_ корневой сокет c и переводит его в режим прослушивания. Конечный узел, желающий присоединиться к сеансу, создает \_ конечный сокет c и использует [**всажоинлеаф**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) для инициации подключения и запроса поступления. Корневое приложение получает ДЕМОна \_ по разпринятию при поступлении входящего запроса поступления и доставляет конечный узел путем вызова [**всаакцепт**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept). Конечный узел получает демон \_ по подключению, когда он был допущен.

В некорневой плоскости управления, где все узлы имеют конечный объект c \_ , [**всажоинлеаф**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) используется для инициирования включения узла в существующий сеанс MultiPoint. \_Если соединение завершено, а возвращенный дескриптор сокета используется в сеансе MultiPoint, указывается индикатор соединения с помощью фильтра. В случае многоадресной рассылки IP это будет соответствовать \_ параметру IP-добавления \_ сокета.

(Читатели, знакомые с использованием многоадресного протокола UDP без подключения, могут думать о семантике, ориентированной на подключение, представленной здесь. В частности, понятие использования [**всажоинлеаф**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) на сокете UDP и ожидание индикации подключения демо-фильтра \_ может быть беспокоят. Однако, очень важно применять семантику, ориентированную на подключение, к протоколам без подключения. Это разрешено и иногда полезно, например, для вызова стандартной функции [**Connect**](/windows/desktop/api/Winsock2/nf-winsock2-connect) на сокете UDP. Общий результат применения семантики, ориентированной на соединение, к сокетам без подключения, — это ограничение использования таких сокетов, а также в этом случае. Сокет UDP, используемый в **всажоинлеаф** , будет иметь определенные ограничения и ожидать \_ указания по подключению к демо-фильтра (которое в данном случае просто означает, что соответствующее сообщение IGMP было отправлено) — одно из таких ограничений.)

В связи с этим три экземпляра, где приложение будет использовать [**всажоинлеаф**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) , выступающее в качестве:

-   Корневой узел MultiPoint и приглашение нового листа для приподключения к сеансу
-   Конечный объект, выполняющий запрос поступления к корневому сеансу MultiPoint
-   Конечный Поиск поступления в некорневом сеансе MultiPoint (например, многоадресная рассылка IP)

 

 



