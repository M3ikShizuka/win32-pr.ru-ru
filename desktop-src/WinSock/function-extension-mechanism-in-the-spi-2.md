---
description: Поскольку сама библиотека DLL Winsock больше не предоставляется каждым отдельным поставщиком стека, поставщику стека невозможно предоставить расширенные функциональные возможности, добавив точки входа в библиотеку DLL Winsock.
ms.assetid: 5c71532a-c565-4f65-ab36-ca0e23190718
title: Механизм расширения функции в SPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: db2e5e32a4d79174893cfb2d9fa2ae0c0521a51ac80c40bcb6c45feab49693d8
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119132427"
---
# <a name="function-extension-mechanism-in-the-spi"></a>Механизм расширения функции в SPI

Поскольку сама библиотека DLL Winsock больше не предоставляется каждым отдельным поставщиком стека, поставщику стека невозможно предоставить расширенные функциональные возможности, добавив точки входа в библиотеку DLL Winsock. Чтобы преодолеть это ограничение, Winsock использует преимущества новой функции [**всаиоктл**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) для предоставления поставщикам услуг, которые хотят предложить расширения функциональности, зависящие от поставщика. Этот механизм предполагает, что приложение осведомлено о конкретном расширении и распознает как семантику, так и используемую синтаксис. Такие сведения обычно предоставлены поставщиком поставщика услуг.

Чтобы вызвать функцию расширения, приложение должно сначала запросить указатель на нужную функцию. Это осуществляется с помощью функции [**всаиоктл**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) с использованием \_ \_ \_ кода команды указателя функции получения расширения SIO \_ . Входной буфер функции **всаиоктл** содержит идентификатор для нужной функции расширения, а выходной буфер будет содержать указатель на функцию. Приложение может вызвать функцию расширения напрямую без передачи через Ws2 \_32.dll.

Идентификаторы, назначенные функциям расширения, являются глобально уникальными идентификаторами (GUID), которые назначаются поставщиками поставщиков услуг. Поставщики, создающие функции расширения, законодателей для публикации полных сведений о функции, включая синтаксис прототипа функции. Это упрощает распространенные и/или популярные функции расширения, предоставляемые несколькими поставщиками услуг. Приложение может получить указатель на функцию и использовать функцию без необходимости знать о конкретном поставщике услуг, реализующем функцию.

 

 



