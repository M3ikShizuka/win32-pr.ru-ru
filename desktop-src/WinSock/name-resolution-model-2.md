---
description: Пространство имен относится к некоторой возможности для сопоставления (как минимум) протокола и адресации атрибутов сетевой службы с одним или несколькими понятными именами.
ms.assetid: 4139a8c2-d940-41e0-a3e8-fce3b70a1ff3
title: Модель разрешения имен
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dcb209254dcee2419e1ed92c017fc7d37dc9c0a6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104541559"
---
# <a name="name-resolution-model"></a>Модель разрешения имен

*Пространство имен* относится к некоторой возможности для сопоставления (как минимум) протокола и адресации атрибутов сетевой службы с одним или несколькими понятными именами. В настоящее время многие пространства имен используются в широком спектре, включая службу [доменных имен](../dns/dns-start-page.md) (DNS), [домен Active Directory Services](../ad/active-directory-domain-services.md), привязки, службы каталогов NetWare (NDS) из Novell и X. 500. Эти пространства имен могут сильно различаться в том, как они организованы и реализованы. Некоторые из их свойств особенно важны для понимания с точки зрения разрешения имен Winsock.

## <a name="types-of-namespaces"></a>Типы пространств имен

Существует три разных типа пространств имен, в которых можно зарегистрировать службу:

-   Динамический
-   Статические
-   Постоянный

Динамические пространства имен позволяют службам регистрироваться в пространстве имен на лету, а клиенты могут обнаруживать доступные службы во время выполнения. Динамические пространства имен часто полагаются на широковещательные рассылки, чтобы указать на непрерывную доступность сетевой службы. Более старые примеры динамических пространств имен включают пространство имен протокола SAP, используемое в среде NetWare, и пространство имен протокола привязки имен (NBP), используемое протоколом AppleTalk. Пространство имен протокола PNRP, используемое в Windows, является более новым примером динамического пространства имен.

Для статических пространств имен все службы должны быть зарегистрированы заранее, то есть при создании пространства имен. Примером статического пространства имен являются *узлы*, *протоколы* и файлы *служб* , используемые большинством реализаций TCP/IP. В Windows эти файлы обычно находятся в папке *C: \\ Windows \\ system32 \\ Drivers \\ и т. д* .

Постоянные пространства имен позволяют службам регистрироваться в пространстве имен в режиме реального времени. В отличие от динамических пространств имен, постоянные пространства имен сохранит сведения о регистрации в энергонезависимом хранилище, где они остаются до тех пор, пока не будут удалены запросы службы. Постоянные пространства имен типифиед такими службами каталогов, как X. 500 и NDS (Служба каталогов NetWare). Эти среды позволяют добавлять, удалять и изменять свойства службы. Кроме того, объект службы, представляющий службу в службе каталогов, может иметь разнообразные атрибуты, связанные со службой. Наиболее важным атрибутом для клиентских приложений являются сведения об адресации службы. DNS является еще одним примером постоянного пространства имен. Хотя существует программный способ разрешения имен DNS с помощью сокетов Windows, поставщик пространства имен DNS в Windows не поддерживает регистрацию новых DNS-имен с помощью Winsock. Для регистрации DNS-имен необходимо использовать функции DNS напрямую. Дополнительные сведения см. в [справочнике по DNS](../dns/dns-reference.md).

## <a name="namespace-organization"></a>Организация пространства имен

Многие пространства имен упорядочиваются иерархически. Некоторые, такие как X. 500 и NDS, разрешают неограниченное вложение. Другие позволяют объединять службы в один уровень иерархии или группы. Обычно это называется *рабочей группой*. При создании запроса часто бывает необходимо установить контекстную точку внутри иерархии пространства имен, из которой начнется поиск.

## <a name="namespace-provider-architecture"></a>Архитектура поставщика пространства имен

Естественно, программные интерфейсы, используемые для запроса различных типов пространств имен и для регистрации информации в пространстве имен (если поддерживается), различаются. *Поставщик пространства имен* — это локально резидентный компонент программного обеспечения, который знает, как сопоставлять пространство имен Winsock SPI и некоторое существующее пространство имен (которое может быть реализовано локально или доступно через сеть). Архитектура поставщика пространства имен показана ниже:

![Архитектура поставщика пространства имен](images/ovrvw3-1.png)

Обратите внимание, что для данного пространства имен, скажем, DNS, можно установить более одного поставщика пространства имен на данном компьютере.

Как упоминалось выше, универсальная *Служба* терминов относится к серверной части приложения клиента/сервера. В Winsock служба связана с *классом службы*, а каждый экземпляр конкретной службы имеет *имя службы* , которое должно быть уникальным в пределах класса службы. Примерами классов служб являются FTP-сервер, SQL Server, XYZ Corp. Employee info Server и т. д. Как показано в примере, некоторые классы служб хорошо известны, а другие являются уникальными и относятся к конкретному вертикальному приложению. В любом случае каждый класс службы представляется как имя класса, так и идентификатор класса. Имя класса не обязательно должно быть уникальным, но идентификатор класса должен быть. Глобальные уникальные идентификаторы (GUID) используются для представления идентификаторов классов служб. Для хорошо известных служб имена классов и идентификаторы классов (GUID) были предварительно выделены, и для их преобразования доступны макросы, например номера TCP-портов (в порядке размещения в байтах) и соответствующие идентификаторы GUID идентификатора класса. Для других служб разработчик выбирает имя класса и использует служебную программу Uuidgen.exe для создания идентификатора GUID для идентификатора класса.

Существует понятие класса службы, позволяющее установить набор атрибутов, которые хранятся в общих экземплярах конкретной службы. Этот набор атрибутов предоставляется во время определения класса службы для Winsock и называется сведениями о схеме класса службы. Если служба установлена и доступна на главном компьютере, она считается *экземпляром*, а ее имя службы используется для различения конкретного экземпляра службы от других экземпляров, которые могут быть известны пространству имен.

Обратите внимание, что установка класса службы должна выполняться только на компьютерах, где выполняется служба, а не на всех клиентах, которые могут использовать эту службу. По возможности Ws2 \_32.dll предоставляет поставщику пространства имен сведения о схеме класса службы на момент регистрации экземпляра службы или запуска запроса службы. 32.dll Ws2, \_ само собой, не хранит эту информацию, но пытается получить ее из поставщика пространства имен, который указывал на возможность предоставления этих данных. Поскольку не существует гарантии, что Ws2 \_32.dll может предоставить схему класса службы, поставщики пространства имен, которым требуются эти сведения, должны иметь резервный механизм, чтобы получить его с помощью средств, зависящих от пространства имен.

Как отмечалось выше, Интернет применяет то, что может быть термином модели службы на основе узла. Приложения, которым требуется найти транспортный адрес службы, обычно должны сначала разрешить адрес определенного узла, на котором размещена служба. По этому адресу они добавляются в известный номер порта, поэтому создается полный транспортный адрес. Чтобы упростить разрешение имен узлов, предварительно выделился Специальный идентификатор класса службы (**свЦид \_ HostName**). Запрос, указывающий **имя \_ узла свЦид** в качестве класса службы и указывающий название узла для имени экземпляра службы, возвращает сведения об адресе узла, если запрос выполнен успешно.

В Windows Sockets 2 приложения, независимые от протокола, не должны понимать внутренние детали транспортного адреса. Поэтому необходимо сначала получить адрес узла, а затем добавить его в порт. Чтобы избежать этого, запросы могут также включать известное имя конкретной службы и протокол, по которому работает служба, например FTP через TCP. В этом случае успешный запрос возвращает полный адрес транспорта для указанной службы на указанном узле, и приложению не требуется проверять внутренние компоненты структуры [**SOCKADDR**](sockaddr-2.md) .

В системе доменных имен Интернета нет четко определенных средств для хранения сведений о схеме класса службы. В результате поставщики пространства имен DNS для Winsock могут поддерживать только хорошо известные службы TCP/IP, для которых был предварительно выделен идентификатор GUID класса службы.

На практике это не является серьезным ограничением, так как идентификаторы GUID класса службы предварительно выделены для всего набора портов TCP и UDP, а также доступны макросы для получения GUID, связанного с портом TCP или UDP, с портом, выраженным в порядке байтов на уровне узла. Таким образом, все привычные службы, такие как HTTP, FTP, Telnet, Whois и т. д., хорошо поддерживаются.

В нашем примере с нашим классом службы имена экземпляров службы FTP могут быть "alder.intel.com" или "ftp.microsoft.com", тогда как экземпляру сервера XYZ Corp. Employee info можно присвоить имя "XYZ Corp. Employee info Server версии 3,5".

В первых двух случаях сочетание идентификатора GUID класса службы для FTP и имени компьютера (указанное в качестве имени экземпляра службы) однозначно определяет нужную службу. В третьем случае имя узла, где находится служба, может быть обнаружено во время запроса службы, поэтому имя экземпляра службы не должно включать имя узла.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Справочник по DNS](../dns/dns-reference.md)
</dt> <dt>

[Структуры данных разрешения имен](name-resolution-data-structures-2.md)
</dt> <dt>

[Разрешение имен, не зависящее от протокола](protocol-independent-name-resolution-2.md)
</dt> <dt>

[Регистрация и разрешение имен](registration-and-name-resolution-2.md)
</dt> <dt>

[**SOCKADDR**](sockaddr-2.md)
</dt> <dt>

[Общие сведения о функциях разрешения имен](summary-of-name-resolution-functions-2.md)
</dt> </dl>

 

 
