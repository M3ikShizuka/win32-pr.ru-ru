---
description: Поставщик пространства имен реализует сопоставление интерфейса между пространством имен Winsock SPI и собственным программным интерфейсом существующей службы имен, такой как DNS, X. 500 или службы каталогов NetWare (NDS).
ms.assetid: 9b35aa58-9011-4e0d-8c93-02714952b4a5
title: Поставщики служб пространства имен
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35e6ecc9ad0dcb9667bdd3d08049b9d41c3211de422cae0530506f6103494527
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118822642"
---
# <a name="namespace-service-providers"></a>Поставщики служб пространства имен

Поставщик пространства имен реализует сопоставление интерфейса между пространством имен Winsock SPI и собственным программным интерфейсом существующей службы имен, такой как DNS, X. 500 или службы каталогов NetWare (NDS). Хотя поставщик пространства имен поддерживает только одно пространство имен, можно установить несколько поставщиков для данного пространства имен. Можно также создать экземпляр нескольких поставщиков пространства имен с помощью одной библиотеки DLL. При установке поставщиков пространства имен сохраняется каталог структур [**всанамеспаце \_ info**](/windows/desktop/api/Winsock2/ns-winsock2-wsanamespace_infow) . Приложение может использовать [**всаенумнамеспацепровидерс**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersa) , чтобы определить, какие пространства имен поддерживаются на компьютере.

в Windows Vista и более поздних версий предоставляются улучшенная структура [**всанамеспаце \_ инфоекс**](/windows/desktop/api/Winsock2/ns-winsock2-wsanamespace_infoexw) и функция [**всаенумнамеспацепровидерсекс**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersexa) .

На 64-разрядных платформах для перечисления 32-разрядного каталога предоставляются аналогичные функции [**WSCEnumNameSpaceProviders32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceproviders32) и [**WSCEnumNameSpaceProvidersEx32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceprovidersex32) .

Подробные сведения см. в разделе [требования к поставщику службы пространства имен Winsock](winsock-namespace-service-provider-requirements.md) .

## <a name="legacy-getxbyy-service-providers"></a>Устаревшие поставщики услуг Жетксбии

Windows сокеты 2 полностью поддерживают средства разрешения имен, относящиеся к протоколу TCP/IP, которые находятся в Windows сокетах версии 1,1. Это достигается путем включения набора функций **жетксбии** в SPI. Однако обработка этого набора функций немного отличается от остальных функций SPI. Функции **жетксбии** , отображаемые в SPI, начинаются с жетксбиисп \_ и обобщены в следующей таблице.

Функции в стиле Berkeley



| Имя функции SPI           | Описание                                                                              |
|-----------------------------|------------------------------------------------------------------------------------------|
| ЖЕТКСБИИСП \_ жесостбяддр    | Предоставляет структуру [**хостент**](/windows/desktop/api/winsock/ns-winsock-hostent) для указанного адреса узла.        |
| ЖЕТКСБИИСП \_ gethostbyname    | Предоставляет структуру [**хостент**](/windows/desktop/api/winsock/ns-winsock-hostent) для указанного имени узла.           |
| ЖЕТКСБИИСП \_ жетпротобинаме   | Предоставляет структуру [**протоент**](/windows/desktop/api/winsock/ns-winsock-protoent) для указанного имени протокола.     |
| ЖЕТКСБИИСП \_ жетпротобинумбер | Предоставляет структуру [**протоент**](/windows/desktop/api/winsock/ns-winsock-protoent) для указанного номера протокола.   |
| ЖЕТКСБИИСП \_ жетсервбинаме    | Предоставляет структуру [**Сервент**](/windows/desktop/api/winsock/ns-winsock-servent) для указанного типа Service. e        |
| ЖЕТКСБИИСП \_ жетсервбипорт    | Предоставляет структуру [**Сервент**](/windows/desktop/api/winsock/ns-winsock-servent) для службы по указанному порту. |
| ЖЕТКСБИИСП \_ .      | Возвращает стандартное имя узла для локального компьютера.                                   |



 

Асинхронные функции стилей



| Имя функции SPI                   | Описание                                                                              |
|-------------------------------------|------------------------------------------------------------------------------------------|
| ЖЕТКСБИИСП \_ всаасинкжесостбяддр    | Предоставляет структуру [**хостент**](/windows/desktop/api/winsock/ns-winsock-hostent) для указанного адреса узла.        |
| ЖЕТКСБИИСП \_ всаасинкжесостбинаме    | Предоставляет структуру [**хостент**](/windows/desktop/api/winsock/ns-winsock-hostent) для указанного имени узла.           |
| ЖЕТКСБИИСП \_ всаасинкжетпротобинаме   | Предоставляет структуру [**протоент**](/windows/desktop/api/winsock/ns-winsock-protoent) для указанного имени протокола.     |
| ЖЕТКСБИИСП \_ всаасинкжетпротобинумбер | Предоставляет структуру [**протоент**](/windows/desktop/api/winsock/ns-winsock-protoent) для указанного номера протокола.   |
| ЖЕТКСБИИСП \_ всаасинкжетсервбинаме    | Предоставляет структуру [**Сервент**](/windows/desktop/api/winsock/ns-winsock-servent) для указанного имени службы.        |
| ЖЕТКСБИИСП \_ всаасинкжетсервбипорт    | Предоставляет структуру [**Сервент**](/windows/desktop/api/winsock/ns-winsock-servent) для службы по указанному порту. |
| ЖЕТКСБИИСП \_ всаканцеласинкрекуест    | Отменяет асинхронную операцию **жетксбии** .                                           |



 

Синтаксис и семантика этих функций **жетксбии** в SPI точно так же, как в спецификации API, и, следовательно, не повторяются здесь.

библиотека DLL Windows sockets 2 позволяет предоставлять эти службы только одному поставщику услуг. Поэтому нет необходимости включать указатели на эти функции в таблицу процедур, полученную от поставщиков служб при запуске. в Windows средах путь к библиотеке DLL, реализующей эти функции, извлекается из значения, найденного в следующем пути реестра. Эта запись реестра не существует по умолчанию:

**HKey \_ Параметры \_ локальной** \\ **системы** \\ **CurrentControlSet** \\ **Services** \\ **Winsock2** \\  \\ **жетксбиилибрарипас**

## <a name="built-in-default-getxbyy-service-provider"></a>Поставщик службы Built-In по умолчанию Жетксбии

поставщик службы **жетксбии** по умолчанию интегрирован в стандартные компоненты времени выполнения Windows sockets 2. Этот поставщик по умолчанию реализует все приведенные выше функции, поэтому не требуется, чтобы эти функции были реализованы каким-либо поставщиком пространства имен. Однако поставщик пространства имен может предоставить любые или все эти функции (и, таким же, переопределить значения по умолчанию), просто сохранив строку, которая является путем к библиотеке DLL, реализующей эти функции, в указанном разделе реестра. Любые функции **жетксбии** , не экспортированные с помощью ИМЕНОВАННОЙ библиотеки DLL поставщика, будут предоставлены через встроенные значения по умолчанию. Однако обратите внимание, что если поставщик решает предоставить любую асинхронную версию функций **жетксбии** , он должен предоставить все асинхронные функции, чтобы операция отмены работала правильно.

Текущая реализация поставщика службы **жетксбии** по умолчанию находится в Wsock32.dll. В зависимости от того, как параметры TCP/IP были установлены с помощью панели управления, разрешение имен выполняется с помощью DNS или файлов локального узла. при использовании dns поставщик службы **жетксбии** по умолчанию использует стандартные вызовы API Windows sockets 1,1 для взаимодействия с DNS-сервером. Эти транзакции будут выполняться с использованием любого стека TCP/IP, настроенного в качестве стека TCP/IP по умолчанию. Однако в двух особых случаях следует учитывать особое упоминание.

По умолчанию реализация ЖЕТКСБИИСП \_ . hostname получает имя локального узла из реестра. Это будет соответствовать имени, присвоенному "Мой компьютер". Реализация по умолчанию ЖЕТКСБИИСП \_ gethostbyname и жетксбиисп \_ всаасинкжесостбинаме всегда сравнивает переданное имя узла с именем локального узла. Если они совпадают, реализация по умолчанию использует частный интерфейс для проверки стека Microsoft TCP/IP, чтобы обнаружить его локальный IP-адрес. Поэтому, чтобы быть полностью независимым от стека Microsoft TCP/IP, поставщик пространства имен должен реализовать как ЖЕТКСБИИСП \_ gethostbyname, так и жетксбиисп \_ всаасинкжесостбинаме.

 

 



