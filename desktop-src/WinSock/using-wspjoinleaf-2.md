---
description: Как упоминалось ранее, Вспжоинлеаф используется для приподключения конечного узла к сеансу MultiPoint.
ms.assetid: 03325f5e-4d4a-405b-b644-3d8c03435e17
title: Использование Вспжоинлеаф
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ef4426c0d22657b26dcc2217d856865d9ebe98db
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263062"
---
# <a name="using-wspjoinleaf"></a>Использование Вспжоинлеаф

Как упоминалось ранее, [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) используется для приподключения конечного узла к сеансу MultiPoint. **Вспжоинлеаф** имеет те же параметры и семантику, что и [**вспконнект**](/previous-versions/windows/hardware/network/ff566275(v=vs.85)) , за исключением того, что она возвращает дескриптор сокета (как в [**вспакцепт**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept)) и имеет дополнительный параметр *dwFlags* . Параметр *dwFlags* используется для указания того, будет ли сокет действовать только как отправитель, только как получатель или как и то, и другое. *В этой* функции для входных параметров можно использовать только сокеты MultiPoint. Если сокет MultiPoint находится в неблокирующем режиме, возвращаемый дескриптор сокета не будет использоваться до тех пор, пока не \_ получится соответствующее указание соединения с демоном фильтра. Корневое приложение в сеансе MultiPoint может вызвать **вспжоинлеаф** один или несколько раз, чтобы добавить несколько конечных узлов, однако одновременно может выполняться не более одного запроса на подключение MultiPoint.

Дескриптор сокета, возвращаемый функцией [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) , отличается в зависимости от *того, является* ли входной дескриптор сокета, \_ корневой c или \_ конечным листом c. При использовании с \_ корневым сокетом c параметр *Name* обозначает добавляемый конечный узел, а возвращаемый дескриптор сокета — конечный сокет c, \_ соответствующий вновь добавленному конечному узлу. Он не предназначен для использования при обмене данными MultiPoint, а используется для получения событий сетевого события (например, "\ \ \_ " Закрыть ") для соединения, которое существует на конкретном конечном диске c \_ . Некоторые реализации MultiPoint также могут разрешить использование этого сокета для побочных сеансов между корнем и отдельным конечным узлом. \_Для этого сокета должно быть задано указание Close, если соответствующий конечный узел вызывает [**вспклосесоккет**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) для удаления сеанса MultiPoint. В симметричном виде вызов **вспклосесоккет** на \_ оконечном сокете c, возвращенном из [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) , приведет к тому, что сокет в соответствующем конечном узле будет получать \_ уведомление о закрытии демона.

При вызове [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) с \_ конечным сокетом c параметр *Name* содержит адрес корневого приложения (для схемы корневого элемента управления) или существующий сеанс MultiPoint (неадминистративная схема управления), а возвращаемый дескриптор сокета совпадает с дескриптором входного сокета. В схеме корневого элемента управления корневой клиент поместит свой \_ корневой сокет c в режим прослушивания, вызвав [**всплистен**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)). Стандартное \_ уведомление о принятии запроса на включение в очередь будет доставлено, когда конечный узел запросит присоединиться к сеансу MultiPoint. Корневой клиент использует обычную функцию [**вспакцепт**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) , чтобы признать новый конечный узел. Значение, возвращаемое из **вспакцепт** , также является \_ дескриптором конечного сокета c, точно так же, как возвращаемые из **вспжоинлеаф**. Для размещения схем MultiPoint, которые допускают соединения, инициированные как с помощью корневого, так и для конечной точки, допускается \_ Использование корневого сокета c, который уже находится в режиме прослушивания, в качестве входных данных для **вспжоинлеаф**.

Корневой клиент MultiPoint обычно отвечает за упорядоченный дисмантлинг сеанса MultiPoint. Такое приложение может использовать [**вспшутдовн**](/previous-versions/windows/desktop/legacy/ms742294(v=vs.85)) или [**вспклосесоккет**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) на \_ корневом сокете c для выполнения всех связанных \_ конечных сокетов c, включая те, которые возвращаются из [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) и соответствующих \_ конечных сокетов c в удаленных КОНЕЧных узлах для получения \_ уведомления о закрытии демона.

 

 
