---
description: В этой версии примера программы были внесены несколько очевидных изменений, которые будут принимать первоначальный шаг при повышении производительности.
ms.assetid: ef9d594c-31fe-44c0-b707-47c01e2c5bf0
title: 'Редакция One: Очистка очевидных'
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 631bea7395000531cce542b41ace3b3aab9afff0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105711773"
---
# <a name="revision-one-cleaning-up-the-obvious"></a>Редакция One: Очистка очевидных

В этой версии примера программы были внесены несколько очевидных изменений, которые будут принимать первоначальный шаг при повышении производительности. Эта версия кода далеко не настроена на производительность, но это хороший добавочный шаг, позволяющий проанализировать влияние инкрементно лучших подходов.

> [!WARNING]
> Этот пример приложения обеспечивает намеренно низкую производительность, чтобы продемонстрировать улучшения производительности, внесенные в код. Не используйте этот пример кода в приложении. Он предназначен только для иллюстрации.

 


```C++
#include <windows.h>

BYTE Set(row, col, bAlive)
{
    SOCKET s = socket(...);
    BYTE byRet = 0;
    BYTE tmp[3];
    tmp[0] = (BYTE)row;
    tmp[1] = (BYTE)col;
    tmp[2] = (BYTE)bAlive;
    bind( s, ... );
    connect( s, ... );
    send( s, &tmp, 3 );
    recv( s, &byRet, 1 );
    closesocket( s );
    return byRet;
}
```



## <a name="changes-in-this-version"></a>Изменения в этой версии

Эта версия отражает следующие изменения:

-   Удален СНДБУФ = 0. Задержка 200 миллисекунд из-за небуферизованных отправлений и отложенных подтверждений удаляется.
-   Удалено поведение отправки и отправки. Это изменение устраняет задержку в 200 мс из-за взаимодействий Nagle и отложенных ПОДТВЕРЖДЕНий.
-   Удалено предположение с прямым порядком следования. Теперь байты находятся в порядке.

## <a name="remaining-problems"></a>Оставшиеся проблемы

В этой версии остаются следующие проблемы:

-   Приложение по-прежнему активно подключено. Так как задержка 600 + миллисекунд удаляется, приложение теперь обращается к 12 постоянно поддерживаемой скорости подключения в секунду. Многие одновременные подключения теперь становятся проблемой.
-   Приложение по-прежнему имеет формат FAT; неизмененные ячейки по-прежнему распространяются на сервер.
-   Приложение по-прежнему имеет низкую потоковую передачу; 3-байтовые отправки по-прежнему небольшие отправляются.
-   Теперь приложение отправляет 2 байта/RTT, что равно 4 КБ/с при непосредственном соединении Ethernet. Это не слишком быстро, но время ожидания может вызвать проблемы первыми.
-   Дополнительная нагрузка составляет до 99,3%, что по-прежнему не является хорошим процентом.

## <a name="key-performance-metrics"></a>Ключевые метрики производительности

Следующие ключевые метрики производительности выражаются во времени кругового пути (RTT), Гудпут и служебных издержках. Описание этих терминов см. в разделе [терминология сети](network-terminology-2.md) .

Эта версия отражает следующие метрики производительности:

-   Время ячейки — 2 × RTT
-   Гудпут — 2 байта/RTT
-   Дополнительная нагрузка на протоколы — 99.3 процентов

## <a name="related-topics"></a>См. также

<dl> <dt>

[Повышение скорости работы приложения](improving-a-slow-application-2.md)
</dt> <dt>

[Терминология сети](network-terminology-2.md)
</dt> <dt>

[Базовая версия: очень плохо выполняемое приложение](the-baseline-version-a-very-poor-performing-application-2.md)
</dt> <dt>

[Редакция 2. перепроектирование для уменьшения количества подключений](revision-2-redesigning-for-fewer-connects-2.md)
</dt> <dt>

[Редакция 3: отправка сжатого блока](revision-3-compressed-block-send-2.md)
</dt> <dt>

[Будущие улучшения](future-improvements-2.md)
</dt> </dl>

 

 



