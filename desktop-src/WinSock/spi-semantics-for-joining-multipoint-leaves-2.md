---
description: В следующем примере сокет MultiPoint часто характеризуется описанием его роли в одной из двух плоскостей (элемент управления или данные).
ms.assetid: 35e4a8c9-d943-44b8-be61-605b60a6cf5d
title: Семантика SPI для присоединения к листьям MultiPoint
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa0e77203e5405f6cb820baba5d545de03e3a8ce
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105712197"
---
# <a name="spi-semantics-for-joining-multipoint-leaves"></a>Семантика SPI для присоединения к листьям MultiPoint

В следующем примере сокет MultiPoint часто характеризуется описанием его роли в одной из двух плоскостей (элемент управления или данные). Следует понимать, что у того же сокета есть роль в другой плоскости, но это не упоминается для того, чтобы обеспечить короткий вид ссылок. Например, ссылка на \_ корневой сокет c может ссылаться на корень c root \_ /d или на \_ \_ конечный сокет c/d \_ .

В схемах плоскости управления с корнями новые конечные узлы добавляются в сеанс MultiPoint одним или двумя разными способами. В первом методе корень использует [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) для инициации подключения к конечному узлу и его появления в качестве участника. На конечном узле одноранговый узел должен создать \_ конечный сокет c и использовать [**всплистен**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)) , чтобы задать для него режим прослушивания. Конечный узел получит уведомление о принятии участником ДЕМОна \_ , когда приглашено присоединиться к сеансу, и сигнализирует о его готовности присоединиться, вызвав [**вспакцепт**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept). \_При завершении операции соединения корневое приложение получит уведомление об установке соединения.

Во втором методе роли по сути реверсируются. Корневой клиент создает \_ корневой сокет c и переводит его в режим прослушивания. Конечный узел, желающий присоединиться к сеансу, создает \_ конечный сокет c и использует [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) для инициации подключения и запроса поступления. Корневой клиент получает ДЕМОна \_ по разпринятию, когда получен входящий запрос поступления, и доставляет конечный узел путем вызова [**вспакцепт**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept). Конечный узел получает демон \_ по подключению, когда он был допущен.

В некорневой плоскости управления, где все узлы имеют значение c \_ листья, функция [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) используется для инициирования включения узла в существующий сеанс MultiPoint. \_Если соединение завершено, а возвращенный дескриптор сокета используется в сеансе MultiPoint, указывается индикатор соединения с помощью фильтра. В случае многоадресной рассылки IP это будет соответствовать \_ параметру IP-добавления \_ сокета.

В связи с этим три экземпляра, где клиент будет использовать [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf):

-   Выступает в роли корня MultiPoint и приглашает нового листа для приподключения к сеансу.
-   Действует как конечный объект, выполняющий запрос поступления к корневому сеансу MultiPoint.
-   Выступая в качестве конечного поиска поступления в некорневом сеансе MultiPoint (например, многоадресная рассылка IP).

 

 
