---
description: Событие трассировки сети Winsock для операции создания сокета.
ms.assetid: 59B9A570-5AEC-429D-AF71-AB6D8325C341
title: AFD_EVENT_CREATE событие
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- AFD_EVENT_CREATE
api_type:
- NA
api_location: ''
ms.openlocfilehash: 3216e1adccca6c7c7d64a22f77babe3cbb699c05
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103897365"
---
# <a name="afd_event_create-event"></a>\_ \_ Событие создания события АФД

Событие **\_ \_ создания события АФД** — это событие трассировки сети Winsock для операции создания сокета.


```C++
const EVENT_DESCRIPTOR AFD_EVENT_CREATE = {0x3e8, 0x0, 0x10, 0x4, 0xa, 0x3e8, 0x8000000000000004};
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*ентерексит* 
</dt> <dd>

Сведения об этом событии.

В следующей таблице перечислены возможные значения для параметра *ентерексит* :



| Значение                                                                        | Значение                                                                                              |
|------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|
| <dl> <dt>0</dt> </dl> | Начало запроса Winsock.<br/>                                                           |
| <dl> <dt>1</dt> </dl> | Запрос Winsock завершен.<br/>                                                            |
| <dl> <dt>2</dt> </dl> | Драйвер Winsock АФД выполнял внутреннее действие (например, прерывание подключения).<br/>      |
| <dl> <dt>3</dt> </dl> | Драйвер TCP/IP привел к возникновению этого события. Обычно это указывает на уведомление об изменении данных.<br/> |
| <dl> <dt>4</dt> </dl> | Драйвер Winsock АФД привел к возникновению этого события (например, при настройке параметра сокета).<br/> |



 

</dd> <dt>

*Расположение* 
</dt> <dd>

Закрытое поле, используемое внутри.

</dd> <dt>

*Процесс* 
</dt> <dd>

[Епроцесс](/windows-hardware/drivers/kernel/eprocess) адрес процесса, которому принадлежит связанный сокет. Это непрозрачная структура, которая служит объектом процесса для процесса. Дополнительные сведения см. в документации по пакету драйверов Windows для структуры [епроцесс](/windows-hardware/drivers/kernel/eprocess) .

</dd> <dt>

*Конечная точка* 
</dt> <dd>

\_Адрес конечной точки АФД сокета.

</dd> <dt>

*AddressFamily* 
</dt> <dd>

Спецификация семейства адресов для сокета. Возможные значения для семейства адресов определяются в файле заголовка *Ws2def. h* . Обратите внимание, что файл заголовка *Ws2def. h* автоматически включается в *Winsock2. h* и никогда не должен использоваться напрямую.

В настоящее время поддерживаются такие значения: AF \_ inet или AF \_ INET6, которые являются форматами семейства адресов Интернета для IPv4 и IPv6. Другие варианты семейства адресов ( \_ например, AF NetBIOS для использования с NetBIOS) поддерживаются, если установлен поставщик услуг сокетов Windows для семейства адресов.

В таблице ниже перечислены общие значения для семейства адресов, хотя многие другие значения возможны.



| AF                                                                                                                                                                                                                 | Значение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="AF_UNSPEC"></span><span id="af_unspec"></span><dl> <dt>**AF \_ Неспецификация**</dt> <dt>0</dt> </dl>           | Семейство адресов не указано.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span id="AF_INET"></span><span id="af_inet"></span><dl> <dt>**AF \_ INET**</dt> <dt>2</dt> </dl>                 | Семейство адресов протокола IP версии 4 (IPv4).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span id="AF_IPX"></span><span id="af_ipx"></span><dl> <dt>**AF \_ IPX**</dt> <dt>6</dt> </dl>                    | Семейство адресов IPX/SPX. Это семейство адресов поддерживается только в том случае, если установлен протокол NWLink IPX/SPX, совместимый с NetBIOS. <br/> Это семейство адресов не поддерживается в Windows Vista и более поздних версиях.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="AF_APPLETALK"></span><span id="af_appletalk"></span><dl> <dt>**AF \_ APPLETALK**</dt> <dt>16</dt> </dl> | Семейство адресов AppleTalk. Это семейство адресов поддерживается только в том случае, если установлен протокол AppleTalk. <br/> Это семейство адресов не поддерживается в Windows Vista и более поздних версиях.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="AF_NETBIOS"></span><span id="af_netbios"></span><dl> <dt>**AF \_ NETBIOS**</dt> <dt>17</dt> </dl>       | Семейство адресов NetBIOS. Это семейство адресов поддерживается только в том случае, если установлен поставщик сокетов Windows для NetBIOS. <br/> Поставщик сокетов Windows для NetBIOS поддерживается в 32-разрядных версиях Windows. Этот поставщик устанавливается по умолчанию в 32-разрядных версиях Windows. <br/> Поставщик сокетов Windows для NetBIOS не поддерживается в 64-разрядных версиях Windows. <br/> Поставщик сокетов Windows для NetBIOS поддерживает только сокеты, для которых параметр *Type* имеет значение **Сокк \_ дграм**.<br/> Поставщик сокетов Windows для NetBIOS не связан напрямую с интерфейсом программирования [NetBIOS](/previous-versions/windows/desktop/netbios/portal) . Интерфейс программирования NetBIOS не поддерживается в Windows Vista, Windows Server 2008 и более поздних версиях.<br/> |
| <span id="AF_INET6"></span><span id="af_inet6"></span><dl> <dt>**AF \_ INET6**</dt> <dt>23</dt> </dl>             | Семейство IP-адресов версии 6 (IPv6).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span id="AF_IRDA"></span><span id="af_irda"></span><dl> <dt>**AF \_ IRDA**</dt> <dt>26</dt> </dl>                | Семейство адресов инфракрасной связи (IrDA). <br/> Это семейство адресов поддерживается только в том случае, если на компьютере установлен инфракрасный порт и драйвер.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span id="AF_BTH"></span><span id="af_bth"></span><dl> <dt>**AF \_ БС**</dt> <dt>32</dt> </dl>                   | Семейство адресов Bluetooth. <br/> Это семейство адресов поддерживается только в том случае, если на компьютере установлен адаптер Bluetooth и драйвер.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |



 

</dd> <dt>

*соккеттипе* 
</dt> <dd>

Спецификация типа для нового сокета. Возможные значения для типа сокета определены в файле заголовка *Winsock2. h* .

В следующей таблице перечислены возможные значения параметра *Type* , поддерживаемого для сокетов Windows Sockets 2.



| Тип                                                                                                                                                                                                                    | Значение                                                                                                                                                                                                                                                                                                                                                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="SOCK_STREAM"></span><span id="sock_stream"></span><dl> <dt>**Сокк \_ ПОТОК**</dt> <dt>1</dt> </dl>          | Тип сокета, предоставляющий последовательные, надежные, двусторонние байтовые потоки на основе соединений с механизмом передачи данных OOB. Этот тип сокета использует протокол TCP для семейства Интернет-адресов (AF \_ inet или AF \_ INET6).<br/>                                                                                                                                |
| <span id="SOCK_DGRAM"></span><span id="sock_dgram"></span><dl> <dt>**Сокк \_ ДГРАМ**</dt> <dt>2</dt> </dl>             | Тип сокета, который поддерживает датаграммы без установления соединения, ненадежные буферы фиксированной (обычно небольшой) максимальной длины. Этот тип сокета использует протокол UDP для семейства Интернет-адресов (AF \_ inet или AF \_ INET6).<br/>                                                                                                                                       |
| <span id="SOCK_RAW"></span><span id="sock_raw"></span><dl> <dt>**Сокк \_ Необработанный**</dt> <dt>3</dt> </dl>                   | Тип сокета, предоставляющий необработанный сокет, позволяющий приложению управлять следующим заголовком протокола верхнего уровня. Для работы с заголовком IPv4 на сокете должен быть установлен параметр сокета [**IP \_ хдринкл**](ipproto-ip-socket-options.md) . Для работы с заголовком IPv6 на сокете должен быть установлен параметр сокета [**\_ хдринкл IPv6**](ipproto-ipv6-socket-options.md) . <br/> |
| <span id="SOCK_RDM"></span><span id="sock_rdm"></span><dl> <dt>**Сокк \_ RDM**</dt> <dt>4</dt> </dl>                   | Тип сокета, обеспечивающий надежную датаграмму сообщения. Примером такого типа является реализация протокола многоадресной рассылки PGM в Windows, которая часто называется [надежным многоадресным программированием](reliable-multicast-programming--pgm-.md). <br/> Это значение *типа* поддерживается, только если установлен надежный протокол многоадресной рассылки.<br/>              |
| <span id="SOCK_SEQPACKET"></span><span id="sock_seqpacket"></span><dl> <dt>**Сокк \_ СЕКПАККЕТ**</dt> <dt>5</dt> </dl> | Тип сокета, предоставляющий псевдо-потоковый пакет на основе датаграмм. <br/>                                                                                                                                                                                                                                                                                                                |



 

</dd> <dt>

*Протокол* 
</dt> <dd>

Используемый протокол. Возможные параметры для параметра *протокола* относятся к указанному семейству адресов и типу сокета. Возможные значения для *протокола* определены в файле заголовка *WSRM. h* и в типе перечисления **иппрото** , определенном в файле заголовка *Ws2def. h* . Обратите внимание, что файл заголовка *Ws2def. h* автоматически включается в *Winsock2. h* и никогда не должен использоваться напрямую.

Если указано значение 0, вызывающий объект не хочет указывать протокол, а поставщик услуг выберет используемый *протокол* .

В таблице ниже перечислены общие значения *протокола* , хотя многие другие значения возможны.



| protocol                                                                                                                                                                                                                   | Значение                                                                                                                                                                                                                                                                                                             |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="IPPROTO_ICMP"></span><span id="ipproto_icmp"></span><dl> <dt>**Иппрото \_ ICMP**</dt> <dt>1</dt> </dl>          | Протокол ICMP. Это возможное значение, если параметр *AF* имеет вид **AF \_ unspec**, **AF \_ inet** или **AF \_ INET6** , а параметр *Type* имеет значение **Сокк \_ RAW** или не задан.<br/>                                                                                               |
| <span id="IPPROTO_IGMP"></span><span id="ipproto_igmp"></span><dl> <dt>**Иппрото \_ IGMP**</dt> <dt>2</dt> </dl>          | Протокол IGMP. Это возможное значение, если параметр *AF* имеет вид **AF \_ unspec**, **AF \_ inet** или **AF \_ INET6** , а параметр *Type* имеет значение **Сокк \_ RAW** или не задан.<br/>                                                                                              |
| <span id="BTHPROTO_RFCOMM"></span><span id="bthproto_rfcomm"></span><dl> <dt>**Бспрото \_ RFCOMM**</dt> <dt>3</dt> </dl> | Протокол Bluetooth радиочастотной связи (Bluetooth RFCOMM). Это возможное значение, если параметр *AF* имеет вид **AF \_ БС** , а параметр *типа* — **Сокк \_ Stream**. <br/>                                                                                                                 |
| <span id="IPPROTO_TCP"></span><span id="ipproto_tcp"></span><dl> <dt>**Иппрото \_ Протокол TCP**</dt> <dt>6</dt> </dl>             | Протокол TCP. Это возможное значение, если параметр *AF* имеет вид **AF \_ inet** или **AF \_ INET6** , а параметр *типа* — **Сокк \_ Stream**.<br/>                                                                                                                                 |
| <span id="IPPROTO_UDP"></span><span id="ipproto_udp"></span><dl> <dt>**Иппрото \_ UDP**</dt> <dt>17</dt> </dl>            | Протокол UDP. Это возможное значение, если параметр *AF* имеет вид **AF \_ inet** или **AF \_ INET6** , а параметр *Type* — **Сокк \_ дграм**.<br/>                                                                                                                                         |
| <span id="IPPROTO_ICMPV6"></span><span id="ipproto_icmpv6"></span><dl> <dt>**Иппрото \_ ICMPV6**</dt> <dt>58</dt> </dl>   | Протокол сообщения управления Интернетом версии 6 (ICMPv6). Это возможное значение, если параметр *AF* имеет вид **AF \_ unspec**, **AF \_ inet** или **AF \_ INET6** , а параметр *Type* имеет значение **Сокк \_ RAW** или не задан.<br/>                                                                                   |
| <span id="IPPROTO_RM"></span><span id="ipproto_rm"></span><dl> <dt>**Иппрото \_ RM**</dt> <dt>113</dt> </dl>              | Протокол PGM для надежной многоадресной рассылки. Это возможное значение, если параметр *AF* имеет вид **AF \_ inet** , а параметр *типа* — **Сокк \_ RDM**. Этот протокол называется также **иппрото \_ PGM**. <br/> Это значение *протокола* поддерживается только в том случае, если установлен надежный протокол многоадресной рассылки.<br/> |



 

</dd> <dt>

*Идентификатор* 
</dt> <dd>

Фактический идентификатор процесса или индикатор, если событие было результатом выполнения кода Winsock в системном процессе или в контексте отложенного вызова процедур (DPC) (контексты выходят за пределы пользовательского процесса).

</dd> <dt>

*Состояние* 
</dt> <dd>

Код NTSTATUS для операции.

</dd> </dl>

## <a name="remarks"></a>Комментарии

Событие **\_ \_ создания события АФД** отслеживается для сетевой операции Winsock с целью создания сокета. Канал для этого события — Winsock-АФД. Уровень этого события является информационным.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|---------------------------------------------------------|
| Минимальная версия клиента<br/> | \[Только классические приложения Windows 7\]<br/>              |
| Минимальная версия сервера<br/> | Только классические приложения Windows Server 2008 R2 \[\]<br/> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Управление трассировкой Winsock](control-of-winsock-tracing.md)
</dt> <dt>

[**\_дескриптор события**](/windows/desktop/api/evntprov/ns-evntprov-event_descriptor)
</dt> <dt>

[Трассировка Winsock](winsock-tracing.md)
</dt> <dt>

[Уровни трассировки Winsock](winsock-tracing-levels.md)
</dt> <dt>

[Сведения о трассировке изменений каталога Winsock](winsock-layered-service-provider-tracing-event-details.md)
</dt> </dl>

 

