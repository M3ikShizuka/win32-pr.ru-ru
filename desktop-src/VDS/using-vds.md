---
description: Использование VDS
ms.assetid: aa4be499-625d-4dbd-828c-4a55ff2dba2c
title: Использование VDS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6406e938a8fb49314511047bb038ec94a5af9151f5c077ad1fb14984e74474f1
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118125870"
---
# <a name="using-vds"></a>Использование VDS

\[начиная с Windows 8 и Windows Server 2012, интерфейс COM [службы виртуальных дисков](virtual-disk-service-portal.md) заменяется [API Windows служба хранилища управления](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]

служба VDS предоставляет интерфейс для разработки сценариев и графического пользовательского интерфейса, который может упростить действия, выполняемые администратором Windows server, который управляет разнородным набором систем хранения, переносит данные между различными конфигурациями оборудования с течением времени. Если вы не знакомы с объектами, используемыми в разработке VDS, см. статью [объектная модель VDS](vds-object-model.md).

Несколько точек перед началом:

-   Хотя служба VDS включает поставщика программного обеспечения, вы должны приобрести поставщик оборудования и соответствующее оборудование отдельно, чтобы воспользоваться преимуществами операций поставщика оборудования. Инструкции по установке см. в документации, предоставляемой производителем оборудования.
-   Для некоторых операций требуются тома в формате NTFS. Например, при подключении тома к существующему каталогу том, содержащий каталог, должен быть отформатирован с помощью NTFS. Другие файловые системы не поддерживают эту операцию. Сведения об операциях, требующих файловой системы NTFS, см. на странице каждого метода в [справочнике по службе VDS](vds-reference.md).

## <a name="programming-languages"></a>Языки программирования

Используйте любой язык программирования, который подходит для разработки с использованием модели COM, например языка C или C++.

## <a name="security"></a>Безопасность

Windows Брандмауэр включен по умолчанию. Это может вызвать сбой проверки подлинности для интерфейсов обратного вызова, например [**ивдсадвисесинк**](/windows/desktop/api/Vds/nn-vds-ivdsadvisesink), которые могут быть выполнены удаленно. если Windows брандмауэр включен на клиенте или сервере, необходимо добавить удаленное управление томами на вкладку **исключения** в Windows брандмауэре.

**Windows Server 2003:** в Windows Server 2003 с пакетом обновления 2 (sp2) и Windows Server 2003 с пакетом обновления 1 (SP1), если Windows брандмауэр включен на клиенте или сервере и если сервер настроен на использование проверки подлинности NTLM, необходимо добавить следующие параметры на вкладку **исключения** в брандмауэре Windows для соответствующего компьютера.

| Компьютер                 | Параметры исключений                                                                 |
|--------------------------|-------------------------------------------------------------------------------------|
| Клиентский компьютер (локальный)  | Dmremote.exe<br/> Mmc.exe<br/> Vdsldr.exe<br/> TCP 135<br/> |
| Серверный компьютер (удаленный) | Dmadmin.exe<br/> Vds.exe<br/> TCP 135<br/>                        |



 

обратите внимание, что Windows брандмауэр не включен по умолчанию, пока Windows Server 2003 с пакетом обновления 1 (SP1).

Приложение, использующее службу VDS, должно запускаться в учетной записи группы "оператор архивации" или "Администраторы". Без соответствующих прав приложение может создать объект загрузчика службы, но объект не будет загружать VDS. Вместо этого возвращается ошибка, указывающая, что доступ к службе VDS запрещен.

Если сеть использует проверку подлинности NTLM, клиентский компьютер должен разрешить анонимный доступ. в этом случае, если клиентский компьютер работает под управлением серверной операционной системы Windows, анонимный доступ включен по умолчанию. если используется клиентская операционная система Windows, необходимо включить анонимный доступ с помощью Dcomcnfg.exe.

## <a name="configuration-and-query-operations"></a>Операции настройки и запросов

Для операций настройки и запросов используется наиболее подходящий компьютер, поставщик, подсистема или пакет. Запросы переходят только на одного поставщика или на один уровень иерархии привязки. Для создания полного представления вызывающий объект должен запрашиваться по каждому уровню. В следующем списке приведены примеры.

-   Чтобы просмотреть все диски на компьютере, вызывающие объекты должны запрашивать все поставщики программного обеспечения для дисков, которые требуются этим поставщикам.
-   Чтобы определить, какие диски участвуют в томе с программным стеком, вызывающие объекты сначала определяют участвующие в нем плексов, а затем запрашивают экстенты дисков для каждого плекса.
-   Чтобы просмотреть все диски, подключенные к данной подсистеме, вызывающие объекты должны запрашивать подсистему.
-   Чтобы просмотреть все LUN, предоставляемые данной подсистемой, вызывающие объекты должны запрашивать подсистему.
-   Чтобы просмотреть все хранилища в сети SAN или кластере, вызывающие объекты должны запрашивать каждый из компьютеров для всех поставщиков оборудования, запрашивать каждый поставщик для всех подсистем, а затем запрашивать каждую подсистему.

Хотя каждый отдельный запрос не возвращает дубликаты, повторяющиеся запросы между компьютерами или поставщиками могут накапливать дубликаты. Вызывающие объекты должны реализовывать любую фильтрацию. Обратите внимание, что приложения управления SAN могут использовать Active Directory или репозиторий для хранения сведений о конфигурации; может не потребоваться запрашивать каждый компьютер.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Служба виртуальных дисков](virtual-disk-service-portal.md)
</dt> <dt>

[Объектная модель VDS](vds-object-model.md)
</dt> <dt>

[Ссылка на службу VDS](vds-reference.md)
</dt> </dl>

 

