---
description: LUN, объект
ms.assetid: ea22bd6d-4a7a-4674-82e9-08460914ff8e
title: LUN, объект
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d315e33b8d253e346b42b01f86a85379aadace73e517a169cc653214a9c674d3
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118347495"
---
# <a name="lun-object"></a>LUN, объект

\[начиная с Windows 8 и Windows Server 2012, интерфейс COM [службы виртуальных дисков](virtual-disk-service-portal.md) заменяется [API Windows служба хранилища управления](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]

Объект LUN (логический номер устройства) моделирует логическую единицу адресного пространства хранилища, созданного поставщиком оборудования и выпадающего подсистемой. Каждый LUN состоит по крайней мере из одного плекса LUN, который, в свою очередь, состоит из экстентов одного или нескольких дисков.

## <a name="lun-types"></a>Типы LUN

Служба VDS поддерживает пять типов LUN: простые, составные, чередующиеся, зеркальные и чередующиеся с четностью. Простые, составные и чередующиеся LUN не являются отказоустойчивыми; зеркальные и контрольные номера логических устройств являются отказоустойчивыми. В оставшейся части этого раздела описываются все типы LUN VDS.

-   Простой LUN — это неотказоустойчивый LUN, который состоит из одного непрерывного экстента диска с одного диска. Непрерывный экстент может состоять из одного диапазона блоков или нескольких диапазонов связанных друг с другом блоков.
-   Составной LUN — это неотказоустойчивый LUN, который состоит из нескольких несмежных экстентов с нескольких дисков. Данные записываются линейно в каждый экстент на первом диске, пока все области первого диска не будут заполнены, а затем к каждому экстенту на втором диске и т. д. Составные LUN обеспечивают эффективное использование дискового пространства в подсистемах, составляющих диски различных размеров.
-   Чередующийся LUN — это неотказоустойчивый LUN, состоящие из нескольких чередующихся непрерывных экстентов с нескольких дисков. Чередующиеся LUN используют конфигурацию RAID-0, так что данные распределяются циклически по экстентам на участвующих дисках. Чередующиеся LUN лучше подходят для дисков того же размера, модели и производителя.
-   Зеркальные LUN — это отказоустойчивые LUN, которые обеспечивают аварийное восстановление путем дублирования данных на несколько плексов LUN. Каждый плекс в зеркально отображенном LUN содержит копию данных, хранящихся на исходном плекс. Каждый из этих плексов находится на отдельном диске. Все данные, записываемые в зеркальный LUN, записываются одновременно на каждый из его плексов. В случае сбоя одного из таких дисков Плекс на этом диске становится недоступным, но система продолжит работать с использованием нетронутого плекса или плексов. У зеркально отображаемого LUN может быть любое количество плексов.
-   Чередующиеся с контролем четности LUN — это отказоустойчивые LUN, которые обеспечивают аварийное восстановление путем временного чередования данных четности на трех или более дисках. В случае сбоя одного из участвующих дисков потерянные данные могут быть созданы повторно из оставшихся данных и четности.

## <a name="lun-creation"></a>Создание LUN

Служба VDS поддерживает четыре модели, с помощью которых приложения могут создавать LUN: явное, частичное, перенаправленное, автомагическое и зависящее от поставщика. Все поставщики оборудования должны поддерживать явное и частично направленное создание LUN, и настоятельно рекомендуется поддерживать создание LUN с автоволшебием. (Создание LUN, зависящего от поставщика, выходит за рамки данного руководством.)

Явное направление создания LUN позволяет вызывающему объекту указать все атрибуты LUN. Создание LUN с частичным направлением позволяет вызывающему объекту указывать только те атрибуты, которые относятся к определенному интересу, а затем позволяет поставщику выбрать остальные. Автоматическое создание LUN включает в себя предоставление вызывающей стороне простого указания типа и размера LUN вместе с набором "автомагическых советов" (предопределенные настройки для атрибутов LUN), а затем позволяет поставщику автоматически создавать LUN.

## <a name="lun-masking"></a>Режим маски LUN

Служба VDS поддерживает расмаску LUN для подсистем, которые обеспечивают эту возможность. Все LUN отображаются на компьютере, на котором выполняется поставщик. Снятие маски LUN позволяет вызывающему объекту "снять маску" выбранных LUN для других компьютеров в сети. Если снять маску LUN для компьютера, компьютер будет иметь доступ к LUN. Компьютеры, для которых маска LUN не используется.

Немаскированный LUN предоставляет интерфейсы [**ивдслун**](/windows/desktop/api/Vds/nn-vds-ivdslun) и [**ивдсдиск**](/windows/desktop/api/Vds/nn-vds-ivdsdisk) на локальный узел. **Ивдсдиск** можно использовать для добавления LUN в пакет поставщика программного обеспечения, создания и удаления томов, назначения букв дисков и т. д. Дополнительные сведения об операциях, выполняемых на диске, см. в разделе [объект Disk](disk-object.md).

После того как LUN размаскируется на целевой компьютер или маскируется от целевого компьютера, видимость LUN на этом компьютере может измениться, пока не будет выполнено повторное сканирование шины. Приложение VDS на целевом компьютере инициирует повторное сканирование шины путем вызова [**ивдссервице:: Rescan**](/windows/desktop/api/Vds/nf-vds-ivdsservice-reenumerate). За запуск повторного сканирования шины отвечает приложение VDS, а не поставщик оборудования.

## <a name="lun-multipathing"></a>Многопутевое расположение LUN

Поставщики оборудования, поддерживающие Multipath I/O (MPIO), могут устанавливать политики балансировки нагрузки для путей между LUN и локальным узлом. LUN, поддерживающие эту возможность, предоставляют интерфейс [**ивдслунмпио**](/windows/desktop/api/Vds/nn-vds-ivdslunmpio) локальному узлу.

## <a name="working-with-luns"></a>Работа с LUN

Чтобы создать новый объект LUN, используйте метод [**ивдссубсистем:: креателун**](/windows/desktop/api/Vds/nf-vds-ivdssubsystem-createlun) . Можно запросить номера LUN, вызываемые определенной подсистемой, вызвав метод [**куерилунс**](/windows/desktop/api/Vds/nf-vds-ivdssubsystem-queryluns) , который также предоставляется [**ивдссубсистем**](/windows/desktop/api/Vds/nn-vds-ivdssubsystem). Вызывающий объект может получить указатель на конкретный LUN, выбрав нужный объект LUN из перечисления, возвращаемого **куерилунс**. С помощью объекта LUN можно задать состояние LUN. запрос всех активных контроллеров, плексов и советов по автоволшебу; расширение и сжатие LUN; Добавление и удаление плексов; Задание масок; применить указания; и удалите LUN.

В дополнение к идентификатору объекта, имени и серийному номеру свойства объекта LUN включают тип LUN, размер, состояние, работоспособность, состояние перехода и флаги. Список размаскирования; и параметр приоритета перестроения.

В следующей таблице перечислены связанные интерфейсы, перечисления и структуры.



| Тип                                                                                              | Элемент                                                                                                                                                                                                                                                                                                             |
|---------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Интерфейсы, которые всегда предоставляются этим объектом                                                 | [**ивдслун**](/windows/desktop/api/Vds/nn-vds-ivdslun)                                                                                                                                                                                                                                                                                          |
| Интерфейсы, которые всегда предоставляются этим объектом в службе VDS 1,1 и 2,0 Fibre Channel только поставщики | [**ивдслунконтроллерпортс**](/windows/desktop/api/Vds/nn-vds-ivdsluncontrollerports)                                                                                                                                                                                                                                                            |
| Интерфейсы, которые всегда предоставляются этим объектом в поставщиках iSCSI для VDS 1,1 и 2,0         | [**ивдслунискси**](/windows/desktop/api/Vds/nn-vds-ivdsluniscsi)                                                                                                                                                                                                                                                                                |
| Интерфейсы, которые могут предоставляться этим объектом\*                                                   | [**ивдсмаинтенанце**](/windows/desktop/api/Vds/nn-vds-ivdsmaintenance), [**ивдслунмпио**](/windows/desktop/api/Vds/nn-vds-ivdslunmpio), [**ивдслуннаминг**](/windows/desktop/api/Vds/nn-vds-ivdslunnaming)и [**ивдслуннумбер**](/windows/desktop/api/Vds/nn-vds-ivdslunnumber)**Windows server 2008, Windows Vista и Windows server 2003:** интерфейс [**ивдслуннумбер**](/windows/desktop/api/Vds/nn-vds-ivdslunnumber) не поддерживается.<br/> |
| Связанные перечисления                                                                           | Служба [**VDS \_ \_Флаг LUN**](/windows/desktop/api/Vds/ne-vds-vds_lun_flag) и [**\_ \_ состояние LUN VDS**](/windows/desktop/api/Vds/ne-vds-vds_lun_status)и [**\_ \_ тип LUN VDS**](/windows/desktop/api/Vds/ne-vds-vds_lun_type)                                                                                                                                                                                   |
| Связанные структуры                                                                             | Служба [**VDS \_ \_Сведения о LUN**](/windows/desktop/api/VdsLun/ns-vdslun-vds_lun_information), "Служба [**VDS \_ LUN \_**](/windows/desktop/api/Vds/ns-vds-vds_lun_prop)" и [**\_ \_ уведомление о LUN VDS**](/windows/desktop/api/Vds/ns-vds-vds_lun_notification)                                                                                                                                                            |



 

\* См. раздел [объект диска](disk-object.md) для дополнительного интерфейса ([**ивдсдиск**](/windows/desktop/api/Vds/nn-vds-ivdsdisk)), который предоставляется, если LUN размещается в виде диска на локальном компьютере узла.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Объекты поставщика оборудования](hardware-provider-objects.md)
</dt> <dt>

[Объект Pack](pack-object.md)
</dt> <dt>

[Объект диска](disk-object.md)
</dt> <dt>

[**ивдслун**](/windows/desktop/api/Vds/nn-vds-ivdslun)
</dt> <dt>

[**ивдсдиск**](/windows/desktop/api/Vds/nn-vds-ivdsdisk)
</dt> <dt>

[Добавление буквы диска к LUN](adding-a-drive-letter-to-a-lun.md)
</dt> </dl>

 

