---
description: О службе VDS
ms.assetid: b2f7628c-b567-40a9-9ad7-6c47077af5fb
title: О службе VDS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 911145fda8f2dd63c886530af3d8507c38d8e829
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "126890432"
---
# <a name="about-vds"></a>О службе VDS

\[начиная с Windows 8 и Windows Server 2012, интерфейс COM [службы виртуальных дисков](virtual-disk-service-portal.md) заменяется [API Windows служба хранилища управления](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]

служба виртуальных дисков — это служба Microsoft Windows, которая выполняет операции запроса и настройки по запросу конечных пользователей, сценариев и приложений. служба расширяет имеющиеся возможности хранения Windows серверных операционных систем следующими способами.

-   Предоставляет API для существующих функций управления томами и дисками в Windows.
-   Объединяет управление томами и аппаратно избыточный массив независимых дисков (RAID) с помощью одного API.

Служба VDS не выполняет следующие действия по управлению хранилищем:

-   Управление подсистемой оборудования, например мониторинг температуры или мониторинг статистики производительности для дисковых массивов.
-   служба хранилища Управление структурой сети хранения данных (SAN), например, зонирование Host-Based Adapter (HBA) и безопасность.

В следующих разделах описывается архитектура VDS, роль поставщиков VDS и API.

## <a name="service-architecture"></a>Архитектура службы

Служба VDS определяет три интерфейса: единый интерфейс между уровнем приложения и службой, а также два интерфейса между программами службы и поставщика на уровне данных. На следующем рисунке показана граница между службами и границами между приложениями и поставщиками.

![Схема, на которой показана архитектура службы, разбивается на разделы "приложения", "Служба виртуальных дисков" и "поставщики VDS".](images/vdsoverview.png)

N-уровневая архитектура позволяет службе VDS координировать функции файловой системы, синхронизировать действия поставщика и выполнять арбитраж между приложениями. Между приложением и поставщиком служба VDS предоставляет единую функциональность для приложений, даже если некоторые из базовых поставщиков могут не иметь такой единообразия.

Служба реализует общие функциональные возможности: форматирование томов, Добавление и удаление букв дисков или подключенных папок, а также управление нераспределенными дисками — дисками, не имеющими сведений о разделах. Служба VDS также возвращает уведомления о событиях зарегистрированным приложениям. Дополнительные сведения см. в разделе [уведомления службы VDS](vds-notification-model.md).

## <a name="role-of-providers"></a>Роль поставщиков

Служба VDS определяет два интерфейса поставщика, один для поставщика программного обеспечения, а другой для поставщика оборудования. Каждый поставщик реализует отдельную часть API, определенную службой VDS:

-   *Поставщик программного обеспечения* — это программа на основе узла, поддерживаемая драйвером режима ядра в стеке ввода-вывода хранилища. Поставщик — среда выполнения ядра взаимодействует с диспетчером подключения во время загрузки или диспетчер самонастраивающийся (PnP) во время обнаружения, чтобы затребовать каждый диск. Поставщики программного обеспечения работают с томами, дисками и разделами диска.

    Служба VDS содержит два типа поставщиков. Базовый поставщик программного обеспечения управляет базовыми дисками и не поддерживает отказоустойчивую привязку. Динамический поставщик программного обеспечения управляет динамическими дисками и предлагает управление сбоями там, где это возможно. Поведение поставщика программного обеспечения согласуется с поведением базовых и динамических дисков на узле. Например, если операционная система данного узла поддерживает отказоустойчивые динамические диски, служба VDS также поддерживает это поведение на узле.

-   *Поставщик оборудования* реализует методы, используемые для управления подсистемой хранения — аппаратным массивом дисков или адаптером, который позволяет создавать логические диски, настроенные для повышения производительности, доступности данных или восстановления данных. Многие производители больших массивов RAID создают поставщик оборудования, предназначенный для использования с VDS. Потребители служб должны получить поставщика оборудования и соответствующее оборудование от изготовителя.

    Возможности поставщика оборудования зависят от возможностей базового оборудования. Следовательно, степень, в которой каждый производитель реализует API, может различаться. Например, производители могут включать дополнительные методы для оптимизации конфигураций, отслеживания и динамической настройки производительности, автоматизации управления сбоями или предоставления других выгодных функций.

    Поставщики оборудования предлагают несколько вариантов настройки, недоступных для поставщиков программного обеспечения. Наиболее важным является модель конфигурации автоматического волшебя, которая представляет собой представление хранилища на основе атрибутов для каждого приложения. Указания привязки, такие как "главным образом" операции чтения или "требуется быстрое восстановление после сбоя", заменяют сложность привязки физического хранилища к виртуальному хранилищу. Каждый поставщик оборудования выполняет сопоставление экстентов, выделение пространства и выбор типа привязки на основе подсказок, которые передаются приложением. Описание полного поставщика оборудования, включая параметры конфигурации, см. в документации, поставляемой производителем подсистемы.

## <a name="application-programming-interface"></a>Прикладной программный интерфейс

Приложения могут вызывать методы VDS для запроса и настройки дисков на основе узла, хранилища RAID или и того и другого. Общие сведения об API см. в разделе [объектная модель VDS](vds-object-model.md).

Типичные приложения для службы VDS позволяют решать проблемы управления конфигурацией и мониторинга, а также варьировать диапазон от выделенных систем управления хранением до приложений для обратной Организации, которые ищут более эффективное управление конфигурацией и управлением сбоями. Следующие приложения используют службу VDS сегодня:

-   Оснастка "Управление дисками" позволяет настраивать диски, управляемые главным компьютером, и управлять ими. Системные администраторы и конечные пользователи могут запрашивать и настраивать локальные (или удаленные) диски и тома с помощью этого средства пользовательского интерфейса.
-   Diskpart.exe — это программа командной строки, которая настраивает диски, тома и разделы и управляет ими.
-   Diskraid.exe — это программа командной строки, которая настраивает и управляет аппаратными подсистемами RAID. Эта служебная программа может взаимодействовать с любым оборудованием хранилища, сопровождаемым поставщиком оборудования VDS.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Служба виртуальных дисков](virtual-disk-service-portal.md)
</dt> <dt>

[Уведомления службы VDS](vds-notification-model.md)
</dt> <dt>

[Объектная модель VDS](vds-object-model.md)
</dt> </dl>

 

 
