---
description: Служба VDS предоставляет объекты для выполнения действий, связанных со службами. В этом разделе описывается каждый объект.
ms.assetid: ae4d18f2-4d50-480c-bc7a-4eec0334707d
title: Объекты запуска и службы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 92beb0a4f825f767299a7ced74d43ef2487fa252
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105674328"
---
# <a name="startup-and-service-objects"></a>Объекты запуска и службы

\[Начиная с Windows 8 и Windows Server 2012, интерфейс COM [службы виртуальных дисков](virtual-disk-service-portal.md) заменяется [API управления хранилищами Windows](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]

Служба VDS предоставляет объекты для выполнения действий, связанных со службами. В этом разделе описывается каждый объект.

## <a name="service-loader-object"></a>Объект загрузчика службы

Объект загрузчика службы предоставляет методы, используемые приложениями для загрузки и инициализации службы VDS. Чтобы подготовить VDS для использования, приложение должно выполнить следующие операции:

-   Создайте экземпляр объекта Service Loader, который возвращает интерфейс [**ивдссервицелоадер**](/windows/desktop/api/Vds/nn-vds-ivdsserviceloader) .
-   Вызовите метод [**ивдссервицелоадер:: лоадсервице**](/windows/desktop/api/Vds/nf-vds-ivdsserviceloader-loadservice) , чтобы загрузить службу.

Пример кода см. в разделе [Загрузка VDS](loading-vds.md).

Всегда разрешайте службе полностью инициализировать службу перед вызовом методов, предоставляемых объектом службы. Чтобы определить состояние процесса загрузки, используйте метод [**ивдссервице:: иссервицереади**](/windows/desktop/api/Vds/nf-vds-ivdsservice-isserviceready) . Используйте метод [**ивдссервице:: ваитфорсервицереади**](/windows/desktop/api/Vds/nf-vds-ivdsservice-waitforserviceready) , чтобы блокировать вызовы объектов VDS до завершения инициализации.

В следующей таблице перечислены связанные интерфейсы, перечисления и структуры.

| Тип                                              | Элемент                                         |
|---------------------------------------------------|-------------------------------------------------|
| Интерфейсы, которые всегда предоставляются этим объектом | [**Ивдссервицелоадер**](/windows/desktop/api/Vds/nn-vds-ivdsserviceloader). |
| Связанные перечисления                           | Нет.                                           |
| Связанные структуры                             | Нет.                                           |



 

## <a name="service-object"></a>Объект службы

Объект службы — это многофункциональный объект, который является центральным для всех приложений VDS. С помощью этого объекта вызывающий объект может выполнять следующие операции:

-   Определите состояние инициализации службы.
-   Получение всех поставщиков оборудования или программного обеспечения, зарегистрированных в службе VDS.
-   Отчет о нераспределенных дисках.
-   Возврат типа файловой системы и буквы диска, связанной с томами на диске.
-   Удалите неиспользуемые пути пользовательского режима и подключенные папки из реестра и обновите диски.
-   Получение уведомлений VDS.
-   Перезагрузите узел.
-   Получение Fibre Channel портов HBA или адаптеров инициатора iSCSI на локальном компьютере.
-   Безопасно подготавливать LUN, предоставляемые на локальном компьютере, в качестве дисков для удаления.

Структуры уведомлений VDS передают идентификаторы GUID для всех приложений, зарегистрированных в службе VDS, для получения уведомлений. Используйте метод [**ивдссервице:: GetObject**](/windows/desktop/api/Vds/nf-vds-ivdsservice-getobject) для преобразования идентификатора GUID объекта в указатель объекта. Более полное описание модели уведомлений см. в разделе уведомления службы [VDS](vds-notification-model.md).

В следующей таблице перечислены связанные интерфейсы, перечисления и структуры. 

| Тип                                                                   | Элемент                                                                                                                                                                                                                                                                                                                                                                                                   |
|------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Интерфейсы, которые всегда предоставляются этим объектом                      | [**Ивдссервице**](/windows/desktop/api/Vds/nn-vds-ivdsservice), [**ивдссервицехба**](/windows/desktop/api/Vds/nn-vds-ivdsservicehba) \* , [**ивдссервицеискси**](/windows/desktop/api/Vds/nn-vds-ivdsserviceiscsi) \* , [**ивдссервицеунинсталлдиск**](/windows/desktop/api/Vds/nn-vds-ivdsserviceuninstalldisk) \* .                                                                                                                                                                                                           |
| Интерфейсы, которые всегда реализуются, но не предоставляются приложениям | [**ивдсадмин**](/windows/desktop/api/VdsHwPrv/nn-vdshwprv-ivdsadmin)                                                                                                                                                                                                                                                                                                                                                                            |
| Связанные перечисления                                                | Служба [**VDS \_ \_ \_ флаг поставщика запросов**](/windows/desktop/api/Vds/ne-vds-vds_query_provider_flag), [**\_ \_ тип объекта VDS**](/windows/desktop/api/Vds/ne-vds-vds_object_type), [**\_ \_ флаг службы VDS**](/windows/desktop/api/Vds/ne-vds-vds_service_flag), [**\_ \_ \_ флаг "буква диска VDS**](/windows/desktop/api/Vds/ne-vds-vds_drive_letter_flag)", [**\_ \_ \_ флаг файловой системы VDS**](/windows/desktop/api/Vds/ne-vds-vds_file_system_flag), [**\_ \_ \_ \_ флаг Prop файловой системы**](/windows/desktop/api/Vds/ne-vds-vds_file_system_prop_flag).                                                      |
| Связанные структуры                                                  | Служба [**VDS \_ SERVICE \_ prop**](/windows/desktop/api/Vds/ns-vds-vds_service_prop), [**\_ \_ \_ prop файловая система**](/windows/desktop/api/Vds/ns-vds-vds_file_system_prop)службы VDS, имя [**\_ \_ \_ типа \_ файловой системы VDS**](/windows/desktop/api/Vds/ns-vds-vds_file_system_type_prop), [**\_ \_ \_ уведомление диска VDS**](/windows/desktop/api/Vds/ns-vds-vds_drive_letter_notification), уведомление [**\_ файловой \_ системы \_ VDS**](/windows/desktop/api/Vds/ns-vds-vds_file_system_notification), уведомление о [**\_ \_ точке подключения \_ VDS**](/windows/desktop/api/Vds/ns-vds-vds_mount_point_notification). |



 

**\* Windows Server 2003:** эти интерфейсы не поддерживаются до Windows Server 2003 R2.

## <a name="initiator-adapter-object"></a>Объект адаптера инициатора

Объект адаптера инициатора моделирует адаптер инициатора iSCSI на главном компьютере службы VDS. Служба VDS может просматривать только адаптеры инициатора на локальном компьютере. Роль объекта адаптера инициатора — управление сеансами входа с локального компьютера на целевые объекты iSCSI.

В следующей таблице перечислены связанные интерфейсы, перечисления и структуры. 

| Тип                                              | Элемент                                                                                                                                                                  |
|---------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Интерфейсы, которые всегда предоставляются этим объектом | [**Ивдсисксиинитиаторадаптер**](/windows/desktop/api/Vds/nn-vds-ivdsiscsiinitiatoradapter) \* .                                                                                                        |
| Связанные перечисления                           | Служба [**VDS \_ \_ \_ тип имени входа iSCSI**](/windows/desktop/api/Vds/ne-vds-vds_iscsi_login_type). Служба [**VDS \_ \_ \_ флаг входа iSCSI**](/windows/desktop/api/Vds/ne-vds-vds_iscsi_login_flag), [**\_ \_ \_ тип проверки подлинности iSCSI для VDS**](/windows/desktop/api/Vds/ne-vds-vds_iscsi_auth_type). |
| Связанные структуры                             | Служба [**VDS \_ \_ \_ \_ prop адаптера инициатора iSCSI**](/windows/desktop/api/Vds/ns-vds-vds_iscsi_initiator_adapter_prop).                                                                                        |



 

**\* Windows Server 2003:** этот интерфейс не поддерживается до Windows Server 2003 R2.

## <a name="initiator-portal-object"></a>Объект портала инициатора

Объект портала инициатора моделирует портал инициатора iSCSI на инициаторе iSCSI. Портал инициатора — это сочетание IP-адреса и порта, через который главный компьютер подключается к порталу в подсистеме iSCSI. Роль объекта портала инициатора заключается в том, чтобы служить одной из конечных точек пути MPIO и настроить параметры безопасности IPSEC.

В следующей таблице перечислены связанные интерфейсы, перечисления и структуры. 

| Тип                                              | Элемент                                                                                                                                                                         |
|---------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Интерфейсы, которые всегда предоставляются этим объектом | [**Ивдсисксиинитиаторпортал**](/windows/desktop/api/Vds/nn-vds-ivdsiscsiinitiatorportal) \* .                                                                                                                 |
| Связанные перечисления                           | Служба [**VDS \_ \_ \_ флаг iSCSI IPSec**](/windows/desktop/api/Vds/ne-vds-vds_iscsi_ipsec_flag).                                                                                                                        |
| Связанные структуры                             | Служба [**VDS \_ \_портал инициатора \_ \_ iSCSI**](/windows/desktop/api/Vds/ns-vds-vds_iscsi_initiator_portal_prop), [**\_ \_ \_ ключ IPsec iSCSI**](/windows/desktop/api/Vds/ns-vds-vds_iscsi_ipsec_key), VDS, [**\_ IPAddress**](/windows/desktop/api/Vds/ns-vds-vds_ipaddress). |



 

**\* Windows Server 2003:** этот интерфейс не поддерживается до Windows Server 2003 R2.

## <a name="hba-port-object"></a>Объект порта HBA

Объект порта HBA моделирует Fibre Channel порт адаптера шины.

Используйте метод [**ивдссервицехба:: куерихбапортс**](/windows/desktop/api/Vds/nf-vds-ivdsservicehba-queryhbaports) для определения портов HBA, известных службе VDS на локальном компьютере.

В следующей таблице перечислены связанные интерфейсы, перечисления и структуры.

| Тип                                              | Элемент                                                                                                                                                          |
|---------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Интерфейсы, которые всегда предоставляются этим объектом | [**Ивдшбапорт**](/windows/desktop/api/Vds/nn-vds-ivdshbaport) \* .                                                                                                                            |
| Связанные перечисления                           | Служба [**VDS \_ \_тип хбапорт**](/windows/desktop/api/Vds/ne-vds-vds_hbaport_type), [**\_ \_ состояние службы VDS хбапорт**](/windows/desktop/api/Vds/ne-vds-vds_hbaport_status), [**флаг службы VDS \_ хбапорт \_ Speed \_**](/windows/desktop/api/Vds/ne-vds-vds_hbaport_speed_flag). |
| Связанные структуры                             | Служба [**VDS \_ ХБАПОРТ \_ prop**](/windows/desktop/api/Vds/ns-vds-vds_hbaport_prop).                                                                                                                  |



 

**\* Windows Server 2003:** этот интерфейс не поддерживается до Windows Server 2003 R2.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Объектная модель VDS](vds-object-model.md)
</dt> <dt>

[**Ивдссервицелоадер:: Лоадсервице**](/windows/desktop/api/Vds/nf-vds-ivdsserviceloader-loadservice)
</dt> <dt>

[Идет загрузка VDS](loading-vds.md)
</dt> <dt>

[**Ивдссервице:: GetObject**](/windows/desktop/api/Vds/nf-vds-ivdsservice-getobject)
</dt> <dt>

[Уведомления службы VDS](vds-notification-model.md)
</dt> </dl>

 

 
