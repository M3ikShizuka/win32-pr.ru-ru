---
description: Объект диска
ms.assetid: 65e14273-8127-4667-b5c8-362ad54b4782
title: Объект диска
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5979e6e2e25ee6ded15b987ddbcda0c5c135f92452174853577d7781475c5d03
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119137242"
---
# <a name="disk-object"></a>Объект диска

\[начиная с Windows 8 и Windows Server 2012, интерфейс COM [службы виртуальных дисков](virtual-disk-service-portal.md) заменяется [API Windows служба хранилища управления](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]

Объект диска моделирует физический диск на основе узла. Поставщик программного обеспечения, который работает на локальном узле, может получить доступ к LUN в качестве диска, когда объект LUN размаскируется на локальный узел. Дополнительные сведения о маскировании LUN см. в разделе [объект LUN](lun-object.md).

Каждый объект диска вносит в ровно один объект Pack; Однако диск может размещать экстенты на любом количестве томов в пакете. Можно назначить диск горячим резервом.

## <a name="partition-to-volume-mapping"></a>Сопоставление секций и томов

Операционная система включает поддержку базовых и динамических дисков. Служба VDS предоставляет базовый поставщик и динамический поставщик для управления этими типами дисков. Базовые диски никогда не являются отказоустойчивыми. Динамические диски могут быть отказоустойчивыми, если операционная система разрешает такую привязку томов. Базовые и динамические диски могут содержать секции, структурированные в соответствии с одним из следующих стилей разделов: основная загрузочная запись (MBR) или таблица разделов GUID (GPT). Секционирование MBR имеет до четырех основных разделов, либо три основных раздела и один дополнительный раздел с бесконечными логическими дисками. Секционирование GPT обеспечивает до 128 основных разделов.

Приведенное ниже описание является общим по своей природе. В нем показана типичная связь между секциями и томами, в которых есть несколько исключений. Подробное описание сопоставления секций и томов см. в разделе интерфейс [**ивдсадванцеддиск**](/windows/desktop/api/Vds/nn-vds-ivdsadvanceddisk) . Сопоставление секций и томов зависит от типа диска: базовый или динамический.

-   Базовые диски

    Раздел на базовом диске непосредственно сопоставляется с томом, в большинстве случаев он может быть оформлен как раздел MBR или GPT. На следующем рисунке показано сопоставление для обеих версий разделов MBR. В первом случае секции (P1 – P4) сопоставляются непосредственно с томами (от v1 до v4). Расширенный раздел (EXT) заменяет P4 во втором стиле MBR. Число логических дисков в расширенном разделе, сопоставленных с томами, не ограничено.

    ![Показывает два варианта сопоставления для секций M B R.](images/vdsbasicmapping.png)

    Разделы GPT (P1 – P128) на следующем рисунке сопоставляются непосредственно с томами (от v1 до V128), если все доступные секции используются. Диск GPT не использует дополнительный раздел как способ повышения удобства использования.

    ![Показывает раздел GPT.](images/vdsbasicmappinggpt.png)

-   Динамические диски

    Специальный тип раздела на динамическом диске сопоставляется с большим количеством томов. Оценочный предел, накладываемый динамическим поставщиком, см. в разделе [объект Pack](pack-object.md). Как показано на следующем рисунке, в P1 может быть любое количество экстентов, которые сопоставляются с томами.

    ![Отображает Специальный тип раздела на динамическом диске.](images/vdsdynamicmapping.png)

Независимо от типа диска, диск может содержать один или несколько экстентов диска. Область диска — это непрерывный диапазон логических блоков, предоставляемых диском. Например, область диска может представлять весь том, одну часть составного тома, один член чередующегося тома или один Плекс зеркального тома.

### <a name="working-with-disks"></a>Работа с дисками

Используйте метод [**ивдспакк:: адддиск**](/windows/desktop/api/Vds/nf-vds-ivdspack-adddisk) , чтобы добавить диск в существующий пакет. Вызывающие объекты могут получить указатель на конкретный диск, выбрав нужный объект диска из перечисления, возвращаемого методом [**ивдспакк:: куеридискс**](/windows/desktop/api/Vds/nf-vds-ivdspack-querydisks) . Аналогичным образом можно вызвать метод [**ивдсдиск:: unpack**](/windows/desktop/api/Vds/nf-vds-ivdsdisk-getpack) , чтобы определить, какой пакет содержит заданный диск.

Можно переместить диск из одного пакета в другой, вызвав метод [**ивдспакк:: мигратедискс**](/windows/desktop/api/Vds/nf-vds-ivdspack-migratedisks) . (Служба VDS не поддерживает миграцию базового диска между пакетами, управляемыми базовым поставщиком.) Кроме того, можно переместить пакет на другой узел, физически переместив все диски в пакете на новый узел. Пакет перемещается вместе с дисками и отображается как внешний пакет на новом узле. Инструкции см. [в разделе Добавление внешних дисков в пакет](adding-foreign-disks-to-a-pack.md).

В дополнение к идентификатору объекта, имени, адреса, типа устройства и типа носителя свойства объекта диска включают состояние диска, работоспособность и флаги. Размер в байтах, байты на сектор, секторов на дорожку и дорожек на цилиндр; и шины и типа секции.

В следующей таблице перечислены связанные интерфейсы, перечисления и структуры.



| Тип                                              | Элемент                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|---------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Интерфейсы, которые всегда предоставляются этим объектом | [**Ивдсдиск**](/windows/desktop/api/Vds/nn-vds-ivdsdisk), [**ивдсдисконлине**](/windows/desktop/api/Vds/nn-vds-ivdsdiskonline), [**ивдсадванцеддиск**](/windows/desktop/api/Vds/nn-vds-ivdsadvanceddisk), [**IVdsAdvancedDisk2**](/windows/desktop/api/Vds/nn-vds-ivdsadvanceddisk2), [**ивдсдискпартитионмф**](/windows/desktop/api/Vds/nn-vds-ivdsdiskpartitionmf), [**IVdsDiskPartitionMF2**](/windows/desktop/api/Vds/nn-vds-ivdsdiskpartitionmf2)и [**ивдскреатепартитионекс**](/windows/desktop/api/Vds/nn-vds-ivdscreatepartitionex). **Windows Server 2008:** Интерфейс [**IVdsDiskPartitionMF2**](/windows/desktop/api/Vds/nn-vds-ivdsdiskpartitionmf2) не поддерживается.<br/> **Windows Vista:** интерфейс [**ивдсдисконлине**](/windows/desktop/api/Vds/nn-vds-ivdsdiskonline) не поддерживается до Windows Vista с пакетом обновления 1 (SP1). Вместо этого используйте [**IVdsDisk2**](/windows/desktop/api/Vds/nn-vds-ivdsdisk2) . Интерфейс [**IVdsDiskPartitionMF2**](/windows/desktop/api/Vds/nn-vds-ivdsdiskpartitionmf2) не поддерживается.<br/> **Windows Server 2003:** Интерфейсы [**IVdsAdvancedDisk2**](/windows/desktop/api/Vds/nn-vds-ivdsadvanceddisk2), [**IVdsDisk2**](/windows/desktop/api/Vds/nn-vds-ivdsdisk2), [**ивдсдисконлине**](/windows/desktop/api/Vds/nn-vds-ivdsdiskonline), [**ивдсдискпартитионмф**](/windows/desktop/api/Vds/nn-vds-ivdsdiskpartitionmf)и [**IVdsDiskPartitionMF2**](/windows/desktop/api/Vds/nn-vds-ivdsdiskpartitionmf2) не поддерживаются.<br/> |
| Интерфейсы, которые могут предоставляться этим объектом     | [**Ивдсремовабле**](/windows/desktop/api/Vds/nn-vds-ivdsremovable). (См. раздел [объект LUN](lun-object.md) для дополнительных интерфейсов, которые предоставляются, если диск является LUN.)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Связанные перечисления                           | Служба [**VDS \_ \_Флаг диска**](/windows/desktop/api/Vds/ne-vds-vds_disk_flag), [**\_ \_ состояние диска VDS**](/windows/desktop/api/Vds/ne-vds-vds_disk_status), [**\_ \_ флаг раздела VDS**](/windows/desktop/api/Vds/ne-vds-vds_partition_flag), [**\_ \_ стиль раздела VDS**](/windows/win32/api/vds/ne-vds-__vds_partition_style)и [**\_ \_ \_ тип экстента диска VDS**](/windows/desktop/api/Vds/ne-vds-vds_disk_extent_type).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Связанные структуры                             | Служба [**VDS \_ DISK \_ prop**](/windows/desktop/api/Vds/ns-vds-vds_disk_prop), [**\_ \_ уведомление диска VDS**](/windows/desktop/api/Vds/ns-vds-vds_disk_notification), [**\_ \_ диск ввода**](/windows/desktop/api/Vds/ns-vds-vds_input_disk)для службы [**VDS, сведения о разделе "Служба VDS \_ \_**](/windows/desktop/api/Vds/ns-vds-vds_partition_prop)", [**\_ \_ \_ GPT**](/windows/desktop/api/Vds/ns-vds-vds_partition_info_gpt), [**\_ \_ сведения о разделе " \_ MBR**](/windows/desktop/api/Vds/ns-vds-vds_partition_info_mbr)" и [**\_ дисковый \_ экстент VDS**](/windows/desktop/api/Vds/ns-vds-vds_disk_extent).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Объекты поставщика программного обеспечения](software-provider-objects.md)
</dt> <dt>

[Объект Pack](pack-object.md)
</dt> <dt>

[LUN, объект](lun-object.md)
</dt> <dt>

[Добавление внешних дисков в пакет](adding-foreign-disks-to-a-pack.md)
</dt> </dl>

 

