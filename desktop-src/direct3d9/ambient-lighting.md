---
description: Внешнее освещение предоставляет постоянное освещение для сцены.
ms.assetid: 327095a7-f4e0-48c2-9e4d-bec8493fe37e
title: Окружающее освещение (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0a1d1d890d2de0a9cb617759ac3a9bb6d57f81b13440049bfb54575aee7a6546
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120069453"
---
# <a name="ambient-lighting-direct3d-9"></a>Окружающее освещение (Direct3D 9)

Внешнее освещение предоставляет постоянное освещение для сцены. Оно освещает все вершины объекта одинаково, потому что не зависит ни от каких других факторов освещения, таких как нормали вершины, направление света, положение света, диапазон или затухание. Это самый быстрый тип освещения, но он выдает наиболее реалистичные результаты. Direct3D содержит одно глобальное свойство внешнего освещения, которое можно использовать, не создавая никакого света. Кроме того, можно настроить любой объект освещения так, чтобы он обеспечивал внешнее освещение. Внешнее освещение для сцены описывается в следующем уравнении.

Окружающее освещение = C ₐ \* \[ g ₐ + Sum (аттен<sub>я разберу</sub> \* <sub>i</sub> \* L<sub>AI</sub>)\]

Где:



| Параметр         | Значение по умолчанию | Тип          | Описание                                                                                                                    |
|-------------------|---------------|---------------|--------------------------------------------------------------------------------------------------------------------------------|
| Cₐ                | (0,0,0,0)     | D3DCOLORVALUE | Внешний цвет материала                                                                                                         |
| Gₐ                | (0,0,0,0)     | D3DCOLORVALUE | Глобальный внешний цвет                                                                                                           |
| Аттен<sub>i</sub> | (0,0,0,0)     | D3DCOLORVALUE | Затухание света i. См. раздел " [ослабление и прожектор" (Direct3D 9)](attenuation-and-spotlight-factor.md). |
| Точечная<sub>i</sub>  | (0,0,0,0)     | D3DVECTOR     | Коэффициент вспышки света i. См. раздел " [ослабление и прожектор" (Direct3D 9)](attenuation-and-spotlight-factor.md).  |
| Sum               | Недоступно           | Недоступно           | Сумма внешнего освещения                                                                                                       |
| L<sub>AI</sub>    | (0,0,0,0)     | D3DVECTOR     | Внешний цвет света i                                                                                           |



 

Значение Cₐ равно одному из следующих:

-   Вершинный color1, если АМБИЕНТМАТЕРИАЛСАУРЦЕ = D3DMCS \_ color1, а первый цвет вершин указан в объявлении вершины.
-   Вершинный color2, если АМБИЕНТМАТЕРИАЛСАУРЦЕ = D3DMCS \_ color2, а второй цвет вершин указан в объявлении вершины.
-   внешний цвет материала.

> [!Note]  
> Если используется параметр АМБИЕНТМАТЕРИАЛСАУРЦЕ и не указан цвет вершины, используется окружающий цвет материала.

 

Чтобы использовать внешний цвет материала, используйте свойство SetMaterial, как показано в примере кода ниже.

Gₐ — это глобальный внешний цвет. Он задается с помощью Сетрендерстате ( \_ внешнего D3DRS). В сцене Direct3D существует один глобальный внешний цвет. Этот параметр не связан с объектом света Direct3D.

L<sub>ai</sub> — это внешний цвет света i в сцене. Каждый свет Direct3D имеет набор свойств, одно из которых — внешний цвет. Термин sum(L<sub>ai</sub>) представляет собой сумму всех внешних цветов в сцене.

## <a name="example"></a>Пример

В этом примере объект окрашен с помощью внешнего света сцены и внешнего цвета материала.


```
#define GRAY_COLOR  0x00bfbfbf

// create material
D3DMATERIAL9 mtrl;
ZeroMemory(&mtrl, sizeof(mtrl));
mtrl.Ambient.r = 0.75f;
mtrl.Ambient.g = 0.0f;
mtrl.Ambient.b = 0.0f;
mtrl.Ambient.a = 0.0f;
m_pd3dDevice->SetMaterial(&mtrl);
m_pd3dDevice->SetRenderState(D3DRS_AMBIENT, GRAY_COLOR);
```



Согласно уравнению, получившийся цвет для вершин объекта — это сочетание цвета материала и цвета света.

На двух следующих рисунках показан цвет материала (серый) и цвет света (ярко-красный).

![иллюстрация серой сферы](images/amb1.jpg)![иллюстрация красной сферы](images/lightred.jpg)

Получившаяся сцена показана на следующем рисунке. Единственный объект в сцене — сфера. Внешний свет освещает все вершины объекта одинаковым цветом. Это не зависит от нормали вершины или направления света. В результате сфера выглядит как двухмерный круг, поскольку затенение вокруг поверхности объекта одинаковое.

![иллюстрация сферы с внешним светом](images/lighta.jpg)

Чтобы объекты выглядели более реалистично, используйте помимо внешнего света еще рассеянный и зеркальный свет.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Математика освещения](mathematics-of-lighting.md)
</dt> </dl>

 

 



