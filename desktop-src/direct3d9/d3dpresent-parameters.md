---
description: Описывает параметры представления.
ms.assetid: d677aeb7-a188-4ddc-b8c9-48e13676e9c8
title: Структура D3DPRESENT_PARAMETERS (D3D9Types. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- D3DPRESENT_PARAMETERS
api_type:
- HeaderDef
api_location:
- D3D9Types.h
ms.openlocfilehash: f113b3df247765b958dfe47bb04fafb6c9a13bbe
ms.sourcegitcommit: b40a986d5ded926ae7617119cdd35d99b533bad9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2021
ms.locfileid: "110343109"
---
# <a name="d3dpresent_parameters-structure"></a>\_Структура параметров D3DPRESENT

Описывает параметры представления.

## <a name="syntax"></a>Синтаксис


```C++
typedef struct D3DPRESENT_PARAMETERS {
  UINT                BackBufferWidth;
  UINT                BackBufferHeight;
  D3DFORMAT           BackBufferFormat;
  UINT                BackBufferCount;
  D3DMULTISAMPLE_TYPE MultiSampleType;
  DWORD               MultiSampleQuality;
  D3DSWAPEFFECT       SwapEffect;
  HWND                hDeviceWindow;
  BOOL                Windowed;
  BOOL                EnableAutoDepthStencil;
  D3DFORMAT           AutoDepthStencilFormat;
  DWORD               Flags;
  UINT                FullScreen_RefreshRateInHz;
  UINT                PresentationInterval;
} D3DPRESENT_PARAMETERS, *LPD3DPRESENT_PARAMETERS;
```



## <a name="members"></a>Участники

<dl> <dt>

**баккбуффервидс**
</dt> <dd>

Тип: **[ **uint**](../winprog/windows-data-types.md)**

</dd> <dd>

Ширина задних буферов новой цепочки перекачки в пикселях. Если **окно** имеет **значение false** (презентация находится в полноэкранном режиме), это значение должно быть равно ширине одного из перечисляемых режимов отображения, найденных с помощью [**енумадаптермодес**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-enumadaptermodes). Если **окно** имеет **значение true** , а **либо баккбуффервидс** , либо **баккбуфферхеигхт** равны нулю, выполняется соответствующее измерение клиентской области **хдевицевиндов** (или окна фокуса, если **хдевицевиндов** имеет **значение NULL**).

</dd> <dt>

**баккбуфферхеигхт**
</dt> <dd>

Тип: **[ **uint**](../winprog/windows-data-types.md)**

</dd> <dd>

Высота задних буферов новой цепочки перекачки в пикселях. Если **окно** имеет **значение false** (презентация находится в полноэкранном режиме), это значение должно равняться высоте одного из перечисляемых режимов отображения, найденных с помощью [**енумадаптермодес**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-enumadaptermodes). Если **окно** имеет **значение true** , а **либо баккбуффервидс** , либо **баккбуфферхеигхт** равны нулю, выполняется соответствующее измерение клиентской области **хдевицевиндов** (или окна фокуса, если **хдевицевиндов** имеет **значение NULL**).

</dd> <dt>

**баккбуфферформат**
</dt> <dd>

Тип: **[D3DFORMAT](d3dformat.md)**

</dd> <dd>

Формат заднего буфера. Дополнительные сведения о форматах см. в разделе [D3DFORMAT](d3dformat.md). Это значение должно быть одним из форматов подготовки к просмотру, как проверено [**чеккдевицетипе**](/windows/desktop/api). Для получения текущего формата можно использовать [**жетдисплаймоде**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getdisplaymode) .

На самом деле D3DFMT \_ Unknown можно указать для **баккбуфферформат** в оконном режиме. Это указывает среде выполнения использовать текущий формат режима экрана и устраняет необходимость вызова [**жетдисплаймоде**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getdisplaymode).

Для оконных приложений формат заднего буфера больше не должен соответствовать формату режима экрана, так как преобразование цветов теперь может быть выполнено оборудованием (если оборудование поддерживает преобразование цветов). Набор возможных форматов заднего буфера ограничен, но среда выполнения позволит представить любой допустимый формат заднего буфера в любой формат рабочего стола. (Существует дополнительное требование, которое устройство должно быть работоспособным на рабочем столе; обычно устройства не работают в режиме 8 бит на пиксель.)

Полноэкранные приложения не могут выполнять преобразование цветов.

</dd> <dt>

**баккбуфферкаунт**
</dt> <dd>

Тип: **[ **uint**](../winprog/windows-data-types.md)**

</dd> <dd>

Это значение может находиться в диапазоне от 0 до [D3DPRESENT \_ задних \_ буферов \_ максимум](d3dpresent-back-buffers.md) (или [D3DPRESENT в \_ обратном \_ буфере с \_ максимальным \_ ](d3dpresent-back-buffers.md) значением при использовании Direct3D 9Ex). Значения 0 обрабатываются как 1. Если число задних буферов не может быть создано, среда выполнения не сможет вызвать метод и заполнит это значение количеством буферов, которые могли быть созданы. В результате приложение может вызывать метод дважды с той же \_ структурой параметров D3DPRESENT и ждать, когда она будет работать второй раз.

Метод завершается ошибкой, если невозможно создать один задний буфер. Значение **баккбуфферкаунт** влияет на то, какой набор эффектов переключения разрешен. В частности, любой \_ из D3DSWAPEFFECTых эффектов переключения копирования требует ровно один задний буфер.

</dd> <dt>

**мултисамплетипе**
</dt> <dd>

Тип: **[ **D3DMULTISAMPLE \_ тип**](./d3dmultisample-type.md)**

</dd> <dd>

Член перечисляемого [**типа \_ D3DMULTISAMPLE**](./d3dmultisample-type.md) . Значение должно быть D3DMULTISAMPLE \_ None, если только для **SwapEffect** не задано D3DSWAPEFFECT \_ Discard. Множественная выборка поддерживается только в том случае, если в результате переключения используется D3DSWAPEFFECT \_ Discard.

</dd> <dt>

**мултисамплекуалити**
</dt> <dd>

Тип: **[ **DWORD**](../winprog/windows-data-types.md)**

</dd> <dd>

Уровень качества. Диапазон допустимых значений — от нуля до уровня, возвращенного Пкуалитилевелс, используемым [**чеккдевицемултисамплетипе**](/windows/desktop/api). Передача большего значения возвращает ошибку D3DERR \_ инвалидкалл. Парные значения целевых объектов прорисовки или поверхности трафарета набора элементов и [**\_ типа D3DMULTISAMPLE**](./d3dmultisample-type.md) должны совпадать.

</dd> <dt>

**SwapEffect**
</dt> <dd>

Тип: **[ **D3DSWAPEFFECT**](./d3dswapeffect.md)**

</dd> <dd>

Член перечисляемого типа [**D3DSWAPEFFECT**](./d3dswapeffect.md) . Среда выполнения гарантирует подразумеваемую семантику, касающуюся поведения буфера обмена. Таким образом, если **окно** имеет **значение true** , а для **SwapEffect** задано значение D3DSWAPEFFECT \_ reпереворот, среда выполнения создаст один лишний задний буфер и скопирует их, когда станет передним буфером во время презентации.

D3DSWAPEFFECT \_ Copy требует, чтобы **баккбуфферкаунт** было установлено значение 1.

D3DSWAPEFFECT \_ Отмена будет применена в отладочной среде выполнения путем заполнения любого буфера с шумом после его представления.

Различия между Direct3D9 и Direct3D9Ex:

- В Direct3D9Ex \_ добавляется D3DSWAPEFFECT флипекс, чтобы обозначить, когда приложение использует режим перелистывания. То есть вхан фрейм приложения передается в режим окна (вместо копирования) в диспетчер окон рабочего стола (DWM) для композиции. Режим перелистывания обеспечивает более эффективную пропускную способность памяти и позволяет приложению воспользоваться преимуществами полноценного отображения статистики. Он не изменяет режим работы во весь экран. Поведение режима отражения доступно начиная с Windows 7.



 

</dd> <dt>

**хдевицевиндов**
</dt> <dd>

Тип: **[ **HWND**](../winprog/windows-data-types.md)**

</dd> <dd>

Окно устройства определяет расположение и размер заднего буфера на экране. Это используется Direct3D, когда содержимое заднего буфера копируется в передний буфер во время их [**присутствия**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-present).

-   Для полноэкранного приложения это является обработчиком для верхнего окна (которое является окном фокуса).

    Для приложений, использующих несколько полноэкранных устройств (например, систему с несколькими мониторами), в качестве окна устройства можно использовать только одно устройство. Все остальные устройства должны иметь уникальные окна устройств.

-   Для оконного приложения этот обработчик будет использоваться в качестве целевого окна по умолчанию для [**представления**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-present). Если этот маркер имеет **значение NULL**, то окно фокуса будет принято.

Обратите внимание, что среда выполнения не предоставила никаких попыток, чтобы отразить изменения, внесенные пользователем в размер окна. Задний буфер не будет неявно сброшен при сбросе этого окна. Однако [**текущий**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-present) метод автоматически следит за изменениями расположения окна.

</dd> <dt>

**Оконные**
</dt> <dd>

Тип: **[ **bool** .](../winprog/windows-data-types.md)**

</dd> <dd>

**Значение true** , если приложение запускается с окнами; **Значение false** , если приложение работает в полноэкранном режиме.

</dd> <dt>

**енаблеаутодепсстенЦил**
</dt> <dd>

Тип: **[ **bool** .](../winprog/windows-data-types.md)**

</dd> <dd>

Если это значение равно **true**, то Direct3D будет управлять буферами глубины для приложения. Устройство создаст буфер шаблона глубины при его создании. Буфер шаблона глубины будет автоматически установлен в качестве целевого объекта рендеринга для устройства. При сбросе устройства буфер шаблона глубины автоматически уничтожается и создается заново в новом размере.

Если ЕнаблеаутодепсстенЦил имеет **значение true**, то аутодепсстенЦилформат должен быть допустимым форматом трафарета глубины.

</dd> <dt>

**аутодепсстенЦилформат**
</dt> <dd>

Тип: **[D3DFORMAT](d3dformat.md)**

</dd> <dd>

Член перечисляемого типа [D3DFORMAT](d3dformat.md) . Формат поверхности автоматического набора элементов глубины, который будет создан устройством. Этот элемент игнорируется, если **енаблеаутодепсстенЦил** имеет **значение true**.

</dd> <dt>

**Флаги**
</dt> <dd>

Тип: **[ **DWORD**](../winprog/windows-data-types.md)**

</dd> <dd>

Одна из констант [D3DPRESENTFLAG](d3dpresentflag.md) .

</dd> <dt>

**Полноэкранный \_ рефрешратеинхз**
</dt> <dd>

Тип: **[ **uint**](../winprog/windows-data-types.md)**

</dd> <dd>

Скорость, с которой адаптер отображения обновляет экран. Значение зависит от режима, в котором выполняется приложение:

-   Для оконного режима частота обновления должна быть равна 0.
-   Для полноэкранного режима частота обновления является одной из частот обновления, возвращаемых функцией [**енумадаптермодес**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-enumadaptermodes).

</dd> <dt>

**пресентатионинтервал**
</dt> <dd>

Тип: **[ **uint**](../winprog/windows-data-types.md)**

</dd> <dd>

Максимальная скорость, с которой задние буферы цепочки перекачки можно представить в передний буфер. Подробное описание режимов и поддерживаемых интервалов см. в разделе [D3DPRESENT](d3dpresent.md).

</dd> </dl>

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------|----------------------------------------------------------------------------------------|
| Заголовок<br/> | <dl> <dt>D3D9Types. h</dt> </dl> |



## <a name="see-also"></a>См. также

<dl> <dt>

[Структуры Direct3D](dx9-graphics-reference-d3d-structures.md)
</dt> <dt>

[**креатедевице**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-createdevice)
</dt> <dt>

[**креатеаддитионалсвапчаин**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createadditionalswapchain)
</dt> <dt>

[**Настоящее**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-present)
</dt> <dt>

[**Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset)
</dt> </dl>

 

 
