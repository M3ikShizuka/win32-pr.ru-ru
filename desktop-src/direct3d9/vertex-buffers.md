---
description: Буферы вершин, представленные интерфейсом IDirect3DVertexBuffer9, представляют собой буферы памяти, содержащие данные вершин.
ms.assetid: vs|directx_sdk|~\vertex_buffers.htm
title: Буферы вершин (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8e38feb34e7b9f637f383bf451bff812d9ee6fb1
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127580115"
---
# <a name="vertex-buffers-direct3d-9"></a>Буферы вершин (Direct3D 9)

Буферы вершин, представленные интерфейсом [**IDirect3DVertexBuffer9**](/windows/desktop/api) , представляют собой буферы памяти, содержащие данные вершин. Буферы вершин могут содержать любой тип вершины — преобразованный или непреобразованный, горит или унлит, который может быть визуализирован с помощью методов отрисовки в интерфейсе [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) . Вершины в буфере вершин можно обрабатывать для выполнения таких операций, как преобразование, освещение или создание флагов кадрирования. Преобразование выполняется во всех случаях.

Гибкость буферов вершин делает их идеальным механизмом промежуточного хранения для многократного использования преобразованной геометрии. Можно создать один буфер вершин, преобразовать, осветить и кадрировать вершины в нем, а затем отрисовать модель в сцене столько раз, сколько нужно, — без повторного ее преобразования, даже если отрисовка перемежается с изменениями состояния отрисовки. Это удобно делать при отрисовки моделей, в которых используется множество текстур: геометрия преобразовывается только один раз, после чего ее части можно отрисовывать по необходимости, перемежая отрисовку необходимыми изменениями текстур. Изменения состояния отрисовки, происходящие после обработки вершин, вступают в силу при следующей обработке вершин.

-   [Описание](#description)
-   [Пул памяти и использование](#memory-pool-and-usage)

## <a name="description"></a>Описание

Буфер вершин описывается в терминах его возможностей:, если он может существовать только в системной памяти, если он используется только для операций записи, а также тип и количество вершин, которые он может содержать. Все эти признаки хранятся в структуре [**D3DVERTEXBUFFER \_ DESC**](d3dvertexbuffer-desc.md) .

Элементу Format присваивается значение D3DFMT \_ вертексдата, указывающее, что это буфер вершин. Тип определяет тип ресурса для буфера вершин. Член структуры использования содержит общие флаги возможностей. Флаг D3DUSAGE \_ софтварепроцессинг указывает, что буфер вершин должен использоваться с обработкой вершин программного обеспечения. Наличие \_ флага D3DUSAGE WRITEONLY в использовании указывает на то, что память буфера вершин используется только для операций записи. Это освобождает драйвер для размещения данных вершин в оптимальном расположении в памяти для быстрой обработки и подготовки к просмотру. Если флаг D3DUSAGE \_ WRITEONLY не используется, драйвер, скорее всего, поместит данные в расположение, неэффективное для операций чтения. Это пожертвует некоторую скорость обработки и отрисовки. Если этот флаг не указан, то предполагается, что приложения выполняют операции чтения и записи данных в буфере вершин.

Pool указывает класс памяти, выделенный для буфера вершин. Флаг D3DPOOL \_ системмем указывает, что система создала буфер вершин в системной памяти.

Элемент size сохраняет размер данных буфера вершин в байтах. Элемент ФВФ содержит сочетание [D3DFVF](d3dfvf.md) , которое определяет тип вершин, содержащихся в буфере.

## <a name="memory-pool-and-usage"></a>Пул памяти и использование

Можно создавать буферы вершин с помощью метода [**IDirect3DDevice9:: креатевертексбуффер**](/windows/desktop/api) , принимающего параметры пула (класса памяти) и параметров использования. **IDirect3DDevice9:: креатевертексбуффер** можно также создать с помощью УКАЗАННОГО кода фвф для использования в фиксированной функции обработки вершин или в качестве выходных данных вершин процессов. Дополнительные сведения см. в разделе [буферы вершин фвф (Direct3D 9)](fvf-vertex-buffers.md).

Флаг D3DUSAGE \_ софтварепроцессинг можно задать при обработке вершин в смешанном режиме или на уровне программного обеспечения (D3DCREATE \_ Mixed \_ вертекспроцессинг/D3DCREATE \_ Software \_ вертекспроцессинг) для этого устройства включена. D3DUSAGE \_ софтварепроцессинг должен быть установлен для использования буферов с обработкой вершин программного обеспечения в смешанном режиме, но не должен быть установлен для наилучшей производительности при использовании аппаратной обработки вершин в смешанном режиме. ( D3DCREATE \_ оборудование \_ вертекспроцессинг). Однако параметр D3DUSAGE \_ софтварепроцессинг используется только в том случае, если один буфер используется одновременно с аппаратной и программной обработкой вершин. D3DUSAGE \_ софтварепроцессинг разрешено использовать для смешанного, а также для программных устройств.

Можно принудительно использовать буферы вершин и индексов в системной памяти, указав D3DPOOL \_ системмем, даже если обработка вершин выполняется в оборудовании. Это способ избежать чрезмерно больших объемов памяти, заблокированных страницей, когда драйвер помещает эти буферы в память AGP.

В этом разделе представлены основные понятия, необходимые для понимания и использования буферов вершин в приложении Direct3D. Сведения делятся на следующие разделы.

-   [Создание буфера вершин (Direct3D 9)](creating-a-vertex-buffer.md)
-   [Доступ к содержимому буфера вершин (Direct3D 9)](accessing-the-contents-of-a-vertex-buffer.md)
-   [Подготовка к просмотру из буфера вершин (Direct3D 9)](rendering-from-a-vertex-buffer.md)
-   [Буферы вершин ФВФ (Direct3D 9)](fvf-vertex-buffers.md)
-   [Обработка вершин фиксированной функции (Direct3D 9)](fixed-function-vertex-processing.md)
-   [Программируемая обработка вершин (Direct3D 9)](programmable-vertex-processing.md)
-   [Типы устройств и требования к обработке вершин (Direct3D 9)](device-types-and-vertex-processing-requirements.md)

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Ресурсы Direct3D](direct3d-resources.md)
</dt> <dt>

[Отрисовка из буферов вершин и индексов (Direct3D 9)](rendering-from-vertex-and-index-buffers.md)
</dt> <dt>

[Буферы индексов (Direct3D 9)](index-buffers.md)
</dt> </dl>

 

 
