---
description: Свойства освещения описывают тип и цвет источника освещения.
ms.assetid: b39f1287-c67b-4cbb-b599-4a1b2f4981ac
title: Свойства освещения (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 14c3e815401fe0b35c7409dec783515de5c3422ac92d6aed6fd4adebf09f8c18
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119747004"
---
# <a name="light-properties-direct3d-9"></a>Свойства освещения (Direct3D 9)

Свойства освещения описывают тип и цвет источника освещения. В зависимости от типа используемого источника его свет может иметь свойства затухания и дальности действия, а также эффектов узконаправленности. Но не все типы источников света используют все свойства. Direct3D использует структуру [**D3DLIGHT9**](d3dlight9.md) для получения сведений о свойствах освещения для всех типов источников освещения. Этот раздел содержит сведения обо всех свойствах освещения. Сведения делятся на следующие группы.

Свойства расположения, дальности действия и затухания определяют положение источника света в пространстве и поведение излучаемого им светового потока на расстоянии. Как и все свойства освещения, используемые в C++, они содержатся в [**D3DLIGHT9**](d3dlight9.md) структуре.

-   [Ослабление яркости](#light-attenuation)
-   [Светло-цвет](#light-color)
-   [Направление света](#light-direction)
-   [Светлое расположение](#light-position)
-   [Диапазон освещения](#light-range)

## <a name="light-attenuation"></a>Затухание света

Затухание определяет, как интенсивность света снижается по мере удаления от источника к максимальному расстоянию, заданному в свойстве дальности действия. Три члена структуры [**D3DLIGHT9**](d3dlight9.md) представляют ослабление яркости: Attenuation0, Attenuation1 и Attenuation2. Эти элементы содержат значения с плавающей запятой в диапазоне от 0,0 до бесконечности, контролируя ослабление падения. Некоторые приложения задают члену Attenuation1 значение 1,0, а другие — 0,0, что определяет интенсивность света, изменяющуюся в пропорции 1 / D, где D — расстояние от источника света до вершины. Максимальная интенсивность света достигается в его источнике, и затем она уменьшается до значения 1 / (дальность действия) по мере удаления от источника. Как правило, приложение устанавливает для Attenuation0 значение 0,0, Attenuation1 в константу, а Attenuation2 — 0,0.

Для получения более сложных эффектов затухания можно комбинировать различные значения затухания. Также можно задать значения за пределами стандартного диапазона, чтобы создать еще более необычные эффекты затухания. Однако отрицательные значения затухания не допускаются. См. раздел " [ослабление и прожектор" (Direct3D 9)](attenuation-and-spotlight-factor.md).

## <a name="light-color"></a>Цвет освещения

Источники света в Direct3D излучают три цвета, которые используются независимо друг от друга в расчетах освещения системы: рассеянный цвет, фоновый цвет и отраженный цвет. Каждый из них интегрирован в модуль освещения Direct3D, взаимодействует с другими компонентами из текущего материала и создает окончательный цвет, используемый во время отрисовки. Рассеянный цвет взаимодействует со свойством рассеивающей отражающей способности текущего материала, отраженный цвет — со свойством зеркальной отражающей способности материала и т. д. Конкретные сведения о том, как Direct3D применяет эти цвета, см. в разделе [математика освещения (Direct3D 9)](mathematics-of-lighting.md).

В приложении C++ структура [**D3DLIGHT9**](d3dlight9.md) включает три элемента для этих цветов — диффузия, окружающей среды и отражения — каждая из них является структурой [**D3DCOLORVALUE**](d3dcolorvalue.md) , определяющей выдаваемый цвет.

Наиболее значимым типом цвета, применяемым в системных вычислениях, является рассеянный цвет. Самым распространенным рассеянным цветом является белый (R:1,0 G:1,0 B:1,0), но можно создавать различные цвета, необходимые для достижения нужного эффекта. Например, можно использовать для красный свет для камина или зеленый для разрешающего сигнала светофора.

Как правило, цветовым компонентам освещения присваиваются значения от 0,0 до 1,0 включительно, но это не является обязательным требованием. Например, можно задать всем компонентам значение 2,0, создав источник света, который будет «ярче, чем белый». Значения такого типа могут быть особенно полезны при использовании параметров затухания, отличных от констант.

Обратите внимание, что хотя Direct3D использует значения RGBA для источников света, компонент альфа-цвета не используется.

Обычно для освещения используются цвета материалов. Тем не менее, вы можете задать переопределение цветов материалов — излучаемых, фоновых, рассеянных и отраженных — рассеянными или отраженными цветами вершин. Это делается путем вызова [**сетрендерстате**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate) и задания переменных состояния устройства, перечисленных в следующей таблице.



| Переменная состояния устройства         | Значение                                       | Тип                   | По умолчанию          |
|-------------------------------|-----------------------------------------------|------------------------|------------------|
| D3DRS \_ амбиентматериалсаурце  | Определяет, где можно получить цвет окружающих материалов.  | D3DMATERIALCOLORSOURCE | \_Материал D3DMCS |
| D3DRS \_ диффусематериалсаурце  | Определяет, где следует получить цвет рассеянного материала.  | D3DMATERIALCOLORSOURCE | D3DMCS \_ COLOR1   |
| D3DRS \_ спекуларматериалсаурце | Определяет, где можно получить цвет отражающих материалов. | D3DMATERIALCOLORSOURCE | D3DMCS \_ COLOR2   |
| D3DRS \_ емиссивематериалсаурце | Определяет, где получить цвет эмиссионный материала. | D3DMATERIALCOLORSOURCE | \_Материал D3DMCS |
| D3DRS \_ колорвертекс            | Отключает или позволяет использовать цвета вершин.     | BOOL                   | TRUE             |



 

Значение альфа-канала и прозрачности всегда поступает только из альфа-канала рассеянного цвета.

Значение дымки всегда поступает только из альфа-канала отраженного цвета.

D3DMATERIALCOLORSOURCE могут иметь следующие значения.

-   \_В качестве источника используется цвет материала D3DMCS.
-   D3DMCS \_ COLOR1 — цвет вершины диффузии используется в качестве источника.
-   D3DMCS \_ COLOR2 — цвет зеркальной вершины используется в качестве источника.

## <a name="light-direction"></a>Направление света

Свойство направленности света определяет направление, в котором испускаемый объектом свет проходит через пространство. Направление используется только для направленных и прожекторных источников света и задается вектором.

Задайте направление освещения в элементе Direction структуры [**D3DLIGHT9**](d3dlight9.md) . Элемент Direction имеет тип [**D3DVECTOR**](d3dvector.md). Векторы направления задаются как расстояния от логического начала координат независимо от расположения источника света в сцене. Таким образом, в центре внимания, который указывает на сцену, а вдоль положительной оси z, вектор направления имеет значение <0, 0, 1> независимо от того, где определена его позиция. Аналогичным образом можно имитировать солнечное освещение, используя направленный свет, направление которого <0,-1, 0>. Очевидно, что не нужно создавать огни, которые освещены по осям координат; Вы можете сочетать и сопоставлять значения для создания источников света, которые имеют более интересные углы.

> [!Note]  
> Несмотря на то что нормализация векторов направленности света не требуется, не забывайте задавать им какую-либо величину. Иными словами, не используйте <0, 0, 0> вектор направления.

 

## <a name="light-position"></a>Расположение источника света

Освещение описывается с помощью структуры [**D3DVECTOR**](d3dvector.md) в элементе «позиционирование» структуры [**D3DLIGHT9**](d3dlight9.md) . Предполагается, что координаты x, y и z находятся в мировом пространстве. Направленные источники света — это единственный тип источников, не использующих свойство расположения.

## <a name="light-range"></a>Дальность действия источника света

Свойство дальности действия источника света определяет расстояние в пространстве мира, после которого объекты сцены перестают получать свет, излучаемый этим источником. Элемент Range содержит значение с плавающей запятой, представляющее максимальный диапазон света в мировом пространстве. Направленные источники света не используют свойство дальности действия.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Индикаторы и материалы](lights-and-materials.md)
</dt> </dl>

 

 
