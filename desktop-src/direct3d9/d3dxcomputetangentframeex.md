---
description: Выполняет вычисления касательных кадров в сетке. Генерируются тангенс, бинормал и (при необходимости) обычные векторы. Единственные числа обрабатываются по мере необходимости путем группирования краев и разделения вершин.
ms.assetid: 15cc46bc-6db6-4e1d-a95e-cd60d2666600
title: Функция D3DXComputeTangentFrameEx (D3DX9Mesh. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- D3DXComputeTangentFrameEx
api_type:
- LibDef
api_location:
- d3dx9.lib
- d3dx9.dll
ms.openlocfilehash: 7d091b7ca243e4833cd6aa36a409fca32069e52a267ec3f588b338777ed34338
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118988675"
---
# <a name="d3dxcomputetangentframeex-function"></a>Функция D3DXComputeTangentFrameEx

Выполняет вычисления касательных кадров в сетке. Генерируются тангенс, бинормал и (при необходимости) обычные векторы. Единственные числа обрабатываются по мере необходимости путем группирования краев и разделения вершин.

## <a name="syntax"></a>Синтаксис


```C++
HRESULT D3DXComputeTangentFrameEx(
  _In_        ID3DXMesh   *pMesh,
  _In_        DWORD       dwTextureInSemantic,
  _In_        DWORD       dwTextureInIndex,
  _In_        DWORD       dwUPartialOutSemantic,
  _In_        DWORD       dwUPartialOutIndex,
  _In_        DWORD       dwVPartialOutSemantic,
  _In_        DWORD       dwVPartialOutIndex,
  _In_        DWORD       dwNormalOutSemantic,
  _In_        DWORD       dwNormalOutIndex,
  _In_        DWORD       dwOptions,
  _In_  const DWORD       *pdwAdjacency,
  _In_        FLOAT       fPartialEdgeThreshold,
  _In_        FLOAT       fSingularPointThreshold,
  _In_        FLOAT       fNormalEdgeThreshold,
  _Out_       ID3DXMesh   **ppMeshOut,
  _Out_       ID3DXBuffer **ppVertexMapping
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*пмеш* \[ окне\]
</dt> <dd>

Тип: **[ **ID3DXMesh**](id3dxmesh.md)\***

Указатель на входной объект сетки [**ID3DXMesh**](id3dxmesh.md) .

</dd> <dt>

*двтекстуреинсемантик* \[ окне\]
</dt> <dd>

Тип: **[ **DWORD**](../winprog/windows-data-types.md)**

Задает семантическую семантику ввода координаты текстуры. Если D3DX \_ по умолчанию, функция предполагает, что нет координат текстуры, и функция завершится ошибкой, если не задано нормальное вычисление вектора.

</dd> <dt>

*двтекстуреининдекс* \[ окне\]
</dt> <dd>

Тип: **[ **DWORD**](../winprog/windows-data-types.md)**

Если в сетке есть несколько координат текстуры, задает координату текстуры, используемую для вычислений касательных кадров. Если значение равно нулю, то сетка имеет только одну координату текстуры.

</dd> <dt>

*двупартиалаутсемантик* \[ окне\]
</dt> <dd>

Тип: **[ **DWORD**](../winprog/windows-data-types.md)**

Задает выходную семантику для типа, обычно D3DDECLUSAGE \_ тангенс, который описывает, где будет храниться частичный производный объект относительно координаты текстуры U. Если D3DX \_ по умолчанию, то этот частичный производный не будет сохранен.

</dd> <dt>

*двупартиалаутиндекс* \[ окне\]
</dt> <dd>

Тип: **[ **DWORD**](../winprog/windows-data-types.md)**

Задает семантический индекс, по которому будет храниться частичный производный объект относительно координаты текстуры U.

</dd> <dt>

*дввпартиалаутсемантик* \[ окне\]
</dt> <dd>

Тип: **[ **DWORD**](../winprog/windows-data-types.md)**

Указывает тип [**D3DDECLUSAGE**](./d3ddeclusage.md) , обычно D3DDECLUSAGE \_ бинормал, который описывает, где будет храниться частичный производный относительно координаты текстуры V. Если D3DX \_ по умолчанию, то этот частичный производный не будет сохранен.

</dd> <dt>

*дввпартиалаутиндекс* \[ окне\]
</dt> <dd>

Тип: **[ **DWORD**](../winprog/windows-data-types.md)**

Задает семантический индекс для хранения частичного производного, относительно координаты текстуры V.

</dd> <dt>

*двнормалаутсемантик* \[ окне\]
</dt> <dd>

Тип: **[ **DWORD**](../winprog/windows-data-types.md)**

Задает выходную семантическую семантику, обычно D3DDECLUSAGE \_ нормальную, которая описывает, где будет храниться стандартный вектор в каждой вершине. Если D3DX \_ по умолчанию, то этот стандартный вектор не будет сохранен.

</dd> <dt>

*двнормалаутиндекс* \[ окне\]
</dt> <dd>

Тип: **[ **DWORD**](../winprog/windows-data-types.md)**

Задает семантический индекс для хранения обычного вектора в каждой вершине.

</dd> <dt>

*двоптионс* \[ окне\]
</dt> <dd>

Тип: **[ **DWORD**](../winprog/windows-data-types.md)**

Сочетание одного или нескольких флагов [**D3DXTANGENT**](./d3dxtangent.md) , задающих параметры вычисления касательных кадров. Если **значение равно NULL**, будут указаны следующие параметры:



| Описание                                                                                              | [**D3DXTANGENT**](./d3dxtangent.md) Значение флага                               |
|----------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|
| Установите вес обычной векторной длины на угол в радианах, который выдается двумя краями, оставляемыми вершиной. | &! (D3DXTANGENT \_ Вес \_ по \_ области \| D3DXTANGENT \_ вес \_ равен)                |
| Вычисление ортогональной декартовой координаты из координат текстуры (u, v). См. заметки.                   | &! (D3DXTANGENT \_ ОРСОГОНАЛИЗЕ \_ от \_ U \| D3DXTANGENT \_ орсогонализе \_ от \_ V) |
| Текстуры не упаковываются в направлениях u или v                                                     | &! (D3DXTANGENT \_ переносить \_ UV)                                                      |
| Частичные производные от относительно координат текстуры нормализованы.                                  | &! (D3DXTANGENT \_ НЕ \_ нормализовать \_ частичные части)                                     |
| Вершины упорядочиваются в направлении против часовой стрелки вокруг каждого треугольника.                               | &! (D3DXTANGENT \_ ОБМОТКа \_ во вт.)                                                      |
| Используйте одновершинные векторы, уже имеющиеся во входной сетке.                                         | &! (D3DXTANGENT \_ ВЫЧИСЛЕНие \_ нормалй)                                            |



 

Если D3DXTANGENT \_ \_ \_ не задан, то будет клонирована входная сеть. Таким образом, Исходная сетка должна иметь достаточно места для хранения вычисленных обычных векторов и частично производных данных.

</dd> <dt>

*пдваджаценци* \[ окне\]
</dt> <dd>

Тип: **const [**DWORD**](../winprog/windows-data-types.md) \***

Указатель на массив из трех DWORD на грань, который указывает три соседа для каждой грани в сети. Число байтов в этом массиве должно быть не менее 3 \* [**жетнумфацес**](id3dxbasemesh--getnumfaces.md) \* sizeof (DWORD).

</dd> <dt>

*фпартиаледжесрешолд* \[ окне\]
</dt> <dd>

Тип: **[ **float**](../winprog/windows-data-types.md)**

Указывает максимальный косинус угла, в котором два частичных производных класса считаются несовместимыми друг с другом. Если скалярное произведение направления двух частичных производных элементов в смежных треугольниках меньше или равно этому пороговому значению, вершины, совместно используемые этими треугольниками, будут разделены.

</dd> <dt>

*фсингуларпоинтсрешолд* \[ окне\]
</dt> <dd>

Тип: **[ **float**](../winprog/windows-data-types.md)**

Указывает максимальную величину частичного производного класса, при котором вершина будет считаться единственным. Так как несколько треугольников являются инцидентами в точке, у которой есть ближайшие касательные кадры, но они полностью отменяют друг друга (например, в верхней части сферы), величина частичного производного класса будет уменьшена. Если величина меньше или равна этому пороговому значению, то вершина будет разделяться для каждого треугольника, содержащего этот порог.

</dd> <dt>

*фнормаледжесрешолд* \[ окне\]
</dt> <dd>

Тип: **[ **float**](../winprog/windows-data-types.md)**

Как и в случае с Фпартиаледжесрешолд, задает максимальный косинус угла между двумя нормальными значениями, которые выходят за пределы вершин, которые совместно используются треугольниками. Если скалярное произведение двух нормалей меньше порогового значения, то общие вершины будут разбиты, формируя жесткую границу между соседними треугольниками. Если значение произведения точки больше, чем пороговое, соседние треугольники будут интерполируются.

</dd> <dt>

*ппмешаут* \[ заполняет\]
</dt> <dd>

Тип: **[ **ID3DXMesh**](id3dxmesh.md)\*\***

Адрес указателя на выходной объект сетки [**ID3DXMesh**](id3dxmesh.md) , который получает вычисленные данные о тангенсе, бинормал и обычных векторных данных.

</dd> <dt>

*ппвертексмаппинг* \[ заполняет\]
</dt> <dd>

Тип: **[ **ID3DXBuffer**](id3dxbuffer.md)\*\***

Адрес указателя на выходной объект буфера [**ID3DXBuffer**](id3dxbuffer.md) , который получает сопоставление новых вершин, вычисленных этим методом, с исходными вершинами. Буфер представляет собой массив DWORD, размер массива которого определяется как количество вершин в Ппмешаут.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Тип: **[ **HRESULT**](https://msdn.microsoft.com/library/Bb401631(v=MSDN.10).aspx)**

Если функция выполнена успешно, возвращается значение S \_ ОК. Если функция завершается ошибкой, возвращаемое значение может быть одним из следующих: D3DERR \_ инвалидкалл, D3DXERR \_ INVALIDDATA, E \_ OUTOFMEMORY.

## <a name="remarks"></a>Remarks

Упрощенная версия этой функции доступна в виде [**D3DXComputeTangentFrame**](d3dxcomputetangentframe.md).

Вычисленный Стандартный вектор в каждой вершине всегда нормализуется с длиной единицы.

Самым надежным решением для вычисления ортогональных декартных координат является не устанавливать флаги D3DXTANGENT \_ орсогонализе \_ от \_ вас и D3DXTANGENT \_ орсогонализе \_ из \_ V, чтобы ортогональные координаты вычисляться как в координатах текстуры, так и в v. Однако в этом случае, если значение u или v равно нулю, функция будет рассчитывать ортогональные координаты с помощью D3DXTANGENT \_ орсогонализе \_ из \_ v или D3DXTANGENT \_ орсогонализе \_ от \_ u соответственно.

## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------|----------------------------------------------------------------------------------------|
| Заголовок<br/>  | <dl> <dt>D3DX9Mesh. h</dt> </dl> |
| Библиотека<br/> | <dl> <dt>D3dx9. lib</dt> </dl>   |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Функции сетки](dx9-graphics-reference-d3dx-functions-mesh.md)
</dt> <dt>

[**D3DXComputeTangentFrame**](d3dxcomputetangentframe.md)
</dt> </dl>

 

 
