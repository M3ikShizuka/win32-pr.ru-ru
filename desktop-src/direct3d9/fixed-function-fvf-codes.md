---
description: Код ФВФ описывает содержимое вершин, хранимых чередованием, в одном потоке данных.
ms.assetid: 1a616f42-ec24-44ab-872f-7ea43646dd00
title: Фиксированные коды ФВФ функций (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3ec4fb691192fcc4dbd7dc42c4d6c00829c209f87f68ec32ea42f6c26ff4663c
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120069194"
---
# <a name="fixed-function-fvf-codes-direct3d-9"></a>Фиксированные коды ФВФ функций (Direct3D 9)

Код ФВФ описывает содержимое вершин, хранимых чередованием, в одном потоке данных. Обычно в нем указываются данные, которые должны обрабатываться конвейером обработки вершин фиксированной функции. Это объявление вершины в старом стиле; чтобы просмотреть текущий стиль объявления вершины, см. раздел [**D3DVERTEXELEMENT9**](d3dvertexelement9.md).

Приложения Direct3D могут определять вершины модели различными способами. Поддержка гибких определений вершин, также известных как гибкие форматы вершин или гибкие коды форматов вершин, позволяет вашему приложению использовать только необходимые компоненты вершин, устраняя неиспользуемые компоненты. Используя только необходимые компоненты вершины, приложение может сэкономить память и снизить пропускную способность обработки, необходимую для отрисовки моделей. Описание форматирования вершин можно описать с помощью сочетания [D3DFVF](d3dfvf.md) кодов.

Спецификация ФВФ включает в себя форматы размера точки, заданные параметром D3DFVF \_ псизе. Этот размер выражается в единицах области камеры для непреобразованных и освещенных вершин (TL) и в единицах устройства для вершин TL.

Методы отрисовки интерфейса [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) предоставляют приложения C++ с методами, которые принимают сочетание этих флагов и используют их для определения способа отрисовки примитивов. По сути, эти флаги указывают системе, какие компоненты вершины — расположение, весовые коэффициенты смешивания вершин, нормальные, цвета и число и формат координат текстуры — приложение использует и, косвенно, какие части конвейера отрисовки, к которому требуется применить Direct3D. Кроме того, присутствие или отсутствие определенного флага формата вершины обменивается данными с системой, в которой находятся поля компонентов вершины в памяти и которые были пропущены.

Чтобы определить ограничения для устройств, можно запросить у устройства значения D3DFVFCAPS \_ донотстрипелементс и D3DFVFCAPS \_ текскурдкаунтмаск в фвфкапс-члене [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9).

Координаты текстуры могут быть объявлены в разных форматах, что позволяет адресовать текстуры с помощью как минимум одной координаты или до четырех координат текстуры (для 2D-прогнозируемых координат текстуры). Дополнительные сведения см. в разделе [форматы координат текстуры (Direct3D 9)](texture-coordinate-formats.md). Используйте набор макросов [**D3DFVF \_ текскурдсизен**](d3dfvf-texcoordsizen.md) для создания битовых шаблонов, которые указывают форматы координат текстуры, используемые в вашем формате вершин.

Ни один из приложений не будет использовать каждый компонент. Поля взаимного однородного W (РХВ) и нормали вершины являются взаимоисключающими. И большинство приложений пытаются использовать все восемь наборов координат текстуры, но это может быть у Direct3D. Существует несколько ограничений на флаги, которые можно использовать с другими флагами. Например, нельзя \_ одновременно использовать флаги D3DFVF XYZ и D3DFVF \_ ксизрхв, так как это указывает, что приложение описывает расположение вершины как непреобразованные, так и преобразованные вершины.

Чтобы использовать индексированное смешение вершин, в \_ \_ конце объявления фвф должен ПОЯВИТЬСЯ флаг D3DFVF ластбета UBYTE4. Наличие этого флага означает, что Пятый вес смешивания будет рассматриваться как DWORD, а не как float. Дополнительные сведения см. в разделе [индексирование вершинного смешения (Direct3D 9)](indexed-vertex-blending.md).

В следующих примерах кода показано различие между кодом ФВФ, в котором используется \_ флаг D3DFVF ластбета \_ UBYTE4, и другой. Флаг D3DFVF \_ XYZB3 существует, когда используются четыре индекса смешения, так как всегда вычитаются сумма первых трех значений из числа, чтобы получить четвертый (Blend ₄ = 1-(Blend ₁ + Blend ₂ + Blend ₃)).


```
#define D3DFVF_BLENDVERTEX (D3DFVF_XYZB3|D3DFVF_NORMAL|D3DFVF_TEX1)

struct BLENDVERTEX
{
    D3DXVECTOR3 v;       // Referenced as v0 in the vertex shader
    FLOAT       blend1;  // Referenced as v1.x in the vertex shader
    FLOAT       blend2;  // Referenced as v1.y in the vertex shader
    FLOAT       blend3;  // Referenced as v1.z in the vertex shader
                         // v1.w = 1.0 - (v1.x + v1.y + v1.z)
    D3DXVECTOR3 n;       // Referenced as v3 in the vertex shader
    FLOAT       tu, tv;  // Referenced as v7 in the vertex shader
};
```



В ФВФ, определенном ниже, \_ используется \_ флаг D3DFVF Last UBYTE4.


```
#define D3DFVF_BLENDVERTEX (D3DFVF_XYZB4 | D3DFVF_LASTBETA_UBYTE4 |D3DFVF_NORMAL|D3DFVF_TEX1)

struct BLENDVERTEX
{
    D3DXVECTOR3 v;       // Referenced as v0 in the vertex shader
    FLOAT       blend1;  // Referenced as v1.x in the vertex shader
    FLOAT       blend2;  // Referenced as v1.y in the vertex shader
    FLOAT       blend3;  // Referenced as v1.z in the vertex shader
                         // v1.w = 1.0 - (v1.x + v1.y + v1.z)
    DWORD       indices; // Referenced as v2.xyzw in the vertex shader 
    D3DXVECTOR3 n;       // Referenced as v3 in the vertex shader
    FLOAT       tu, tv;  // Referenced as v7 in the vertex shader
};
```



## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Объявление вершины](vertex-declaration.md)
</dt> </dl>

 

 
