---
description: Определяет эффекты переключения.
ms.assetid: 522a5f71-3ad9-4cfc-a899-e25b9b721b1b
title: Перечисление D3DSWAPEFFECT (D3D9Types.h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- D3DSWAPEFFECT
api_type:
- HeaderDef
api_location:
- D3D9Types.h
ms.openlocfilehash: 41327dc66f676c6f498ad0cefb23202bedc13112
ms.sourcegitcommit: 14010c34b35fa268046c7683f021f86de08ddd0a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/15/2021
ms.locfileid: "105713600"
---
# <a name="d3dswapeffect-enumeration"></a>Перечисление D3DSWAPEFFECT

Определяет эффекты переключения.

## <a name="syntax"></a>Синтаксис

```cpp
typedef enum D3DSWAPEFFECT { 
  D3DSWAPEFFECT_DISCARD      = 1,
  D3DSWAPEFFECT_FLIP         = 2,
  D3DSWAPEFFECT_COPY         = 3,
  D3DSWAPEFFECT_OVERLAY      = 4,
  D3DSWAPEFFECT_FLIPEX       = 5,
  D3DSWAPEFFECT_FORCE_DWORD  = 0xFFFFFFFF
} D3DSWAPEFFECT, *LPD3DSWAPEFFECT;
```

## <a name="constants"></a>Константы

<dl> <dt>

<span id="D3DSWAPEFFECT_DISCARD"></span><span id="d3dswapeffect_discard"></span>**D3DSWAPEFFECT \_ отбросить**
</dt> <dd>

При создании цепочки буферов с помощью D3DSWAPEFFECT \_ отражения или D3DSWAPEFFECT \_ Copy среда выполнения гарантирует, что операция повторной отправки [**IDirect3DDevice9::P**](/windows/desktop/api) не будет влиять на содержимое всех задних буферов. К сожалению, такая гарантия может включать значительный объем видеопамяти или обработку заголовков, особенно при реализации семантики отражения для оконной цепочки буферов или семантики копирования для всей цепочки буфера обмена. Приложение может использовать D3DSWAPEFFECT \_ Отмена переключения, чтобы избежать этих перестановок и включить драйвер экрана для выбора наиболее эффективной методики представления цепочки буферов. Это также единственный результат переключения, который может использоваться при указании значения, отличного от D3DMULTISAMPLE \_ None, для элемента мултисамплетипе в [**\_ параметрах D3DPRESENT**](d3dpresent-parameters.md).

Как и цепочка подкачки, использующая \_ перелистывание D3DSWAPEFFECT, цепочка подкачки, использующая D3DSWAPEFFECT \_ Discard, может включать несколько задних буферов, к которым можно получить доступ с помощью [**IDirect3DDevice9:: жетбаккбуффер**](/windows/desktop/api) или [**IDirect3DSwapChain9:: жетбаккбуффер**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dswapchain9-getbackbuffer). Цепочка буфера обмена лучше предусмотрено как очередь, в которой 0 всегда индексирует задний буфер, который будет отображаться в следующей операции, и из которого удаляются буферы, когда они отображаются.

Приложение, использующее этот результат переключения, не может делать никаких предположений о содержимом отклоненного заднего буфера и, следовательно, обновлять весь задний буфер перед вызовом текущей операции, которая будет отображать его. Хотя это не применяется принудительно, отладочная версия среды выполнения перезаписывает содержимое удаленных буферов случайными данными, чтобы позволить разработчикам проверить, правильно ли обновляются все поверхности заднего буфера в своих приложениях.

</dd> <dt>

<span id="D3DSWAPEFFECT_FLIP"></span><span id="d3dswapeffect_flip"></span>**Перевернуть D3DSWAPEFFECT \_**
</dt> <dd>

Цепочка буфера обмена может включать несколько задних буферов и лучше предусмотрено в качестве циклической очереди, включающей передний буфер. В этой очереди задние буферы всегда нумеруются последовательно от 0 до (n-1), где n — число задних буферов, чтобы значение 0 обозначает самый наименее недавно представленный буфер. Если вызывается метод Present, очередь поворачивается таким образом, что передний буфер становится обратным буфером (n-1), а задний буфер 0 становится новым интерфейсным буфером.

</dd> <dt>

<span id="D3DSWAPEFFECT_COPY"></span><span id="d3dswapeffect_copy"></span>**\_Копирование D3DSWAPEFFECT**
</dt> <dd>

Этот результат переключения может быть указан только для цепочки буферов, состоящей из одного заднего буфера. Независимо от того, является ли цепочка буферов оконной или полноэкранной, среда выполнения гарантирует семантику, подразумеваемую операцией на основе копирования, а именно то, что операция оставляет содержимое заднего буфера без изменений, вместо того чтобы заменять его содержимым переднего буфера в качестве операции, основанной на переворачивании.

Для цепочки полноэкранного переключения среда выполнения использует сочетание операций отражения и операций копирования, поддерживаемых, если это необходимо для скрытых задних буферов, для выполнения текущей операции. Соответственно, презентация синхронизируется с вертикальной перетрассировкой видеоадаптера, и ее частота ограничена выбранным интервалом презентации. Единственным исключением является цепочка подкачки, указанная с помощью \_ \_ флага интерпретации интервала D3DPRESENT. (См. Описание элемента **пресентатионинтервалс** структуры [**\_ параметров D3DPRESENT**](d3dpresent-parameters.md) .) В этом случае операция приведения копирует содержимое заднего буфера непосредственно в передний буфер, не дожидаясь вертикальной повторной трассировки.

</dd> <dt>

<span id="D3DSWAPEFFECT_OVERLAY"></span><span id="d3dswapeffect_overlay"></span>**Наложение D3DSWAPEFFECT \_**
</dt> <dd>

Используйте выделенную область видеопамяти, которая может быть наложена на основную поверхность. При отображении оверлея не выполняется ни одна копия. Операция наложения выполняется в оборудовании без изменения данных на основной поверхности.

|                                                                                                                                                                                         |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Различия между Direct3D 9 и Direct3D 9Ex:<br/> Наложение D3DSWAPEFFECT \_ доступно только в Direct3D9Ex, работающем в Windows 7 (или более текущей операционной системе).<br/> |

</dd> <dt>

<span id="D3DSWAPEFFECT_FLIPEX"></span><span id="d3dswapeffect_flipex"></span>**D3DSWAPEFFECT \_ флипекс**
</dt> <dd>

Указывает, когда приложение использует режим перелистывания, в течение которого кадр приложения передается вместо копирования в диспетчер окон рабочего стола (DWM) для композиции, когда приложение представлено в оконном режиме. Режим отражения позволяет приложению более эффективно использовать пропускную способность памяти, а также позволяет приложению воспользоваться преимуществами полноценного отображения статистики. Режим отражения не влияет на полноэкранное поведение.

> [!Note]  
> При создании цепочки подкачки с помощью D3DSWAPEFFECT \_ флипекс нельзя переопределить элемент **хдевицевиндов** структуры [**\_ параметров D3DPRESENT**](d3dpresent-parameters.md) при отображении нового кадра для отображения. То есть необходимо передать **значение NULL** параметру *хдествиндововерриде* объекта [**IDirect3DDevice9Ex::P ресентекс**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-presentex) , чтобы указать среде выполнения использовать член **хдевицевиндов** **\_ параметров D3DPRESENT** для презентации.

|                                                                                                                                                                                        |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Различия между Direct3D 9 и Direct3D 9Ex:<br/> D3DSWAPEFFECT \_ флипекс доступен только в Direct3D9Ex, работающем в Windows 7 (или более текущей операционной системе).<br/> |

</dd> <dt>

<span id="D3DSWAPEFFECT_FORCE_DWORD"></span><span id="d3dswapeffect_force_dword"></span>**D3DSWAPEFFECT \_ Force \_ DWORD**
</dt> <dd>

Заставляет это перечисление компилироваться до 32 бит в размере. Без этого значения некоторые компиляторы позволяли бы компилировать это перечисление до размера, отличного от 32 бит. Это значение не используется.

</dd> </dl>

## <a name="remarks"></a>Комментарии

Состояние заднего буфера после вызова метода Present четко определено каждым из этих эффектов переключения, а также от того, было ли устройство Direct3D создано с помощью цепочки полноэкранной замены или цепочки оконных буферов не влияет на это состояние. В частности, \_ результат переключения D3DSWAPEFFECT отражения работает одинаково в оконном или полноэкранном режиме, а среда выполнения Direct3D гарантирует это путем создания дополнительных буферов. Поэтому рекомендуется, чтобы приложения по возможности использовали D3DSWAPEFFECT Discard, \_ чтобы избежать каких-либо потерь. Это обусловлено тем, что этот результат переключения всегда будет наиболее эффективным в плане потребления памяти и производительности.

Приложения, использующие D3DSWAPEFFECT \_ переворот или D3DSWAPEFFECT, \_ не должны ждать, пока не будет работать альфа-канал назначения в полноэкранном режиме. Это означает, что \_ состояние визуализации D3DRS дестбленд не будет работать должным образом, так как цепочки полноэкранного переключения с этими эффектами переключения не имеют явного формата пикселей от точки зрения драйвера. Драйвер определяет, что они должны иметь формат вывода, у которого нет альфа-канала. Чтобы обойти это, выполните следующие действия.

-   Используйте D3DSWAPEFFECT \_ Copy.
-   Установите флаг D3DCAPS3 \_ Alpha \_ в полноэкранном режиме \_ \_ или \_ отклонить в элементе Caps3 структуры [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) . Этот флаг указывает, может ли драйвер выполнять альфа-смешение при \_ использовании D3DSWAPEFFECT отражения или D3DSWAPEFFECT \_ Discard.
-   Приложения, использующие режим перелистывания (D3DSWAPEFFECT \_ флипекс), должны вызывать [**пресентекс**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-presentex) после изменения размера окна или региона, чтобы обеспечить обновление отображаемого содержимого.

Невидимое окно не может принимать события пользовательского режима; Кроме того, невидимое полноэкранное окно повлияет на представление окна оконного режима окна другого приложения. Таким образом, каждое приложение должно обеспечить видимость окна устройства, когда имеющуюся цепочку буферов представлен в полноэкранном режиме.

## <a name="requirements"></a>Требования

| Требование | Значение |
|-------------------|----------------------------------------------------------------------------------------|
| Header<br/> | <dl> <dt>D3D9Types. h</dt> </dl> |

## <a name="see-also"></a>См. также раздел

[Перечисления Direct3D](dx9-graphics-reference-d3d-enums.md)

[**IDirect3DDevice9::Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset)
