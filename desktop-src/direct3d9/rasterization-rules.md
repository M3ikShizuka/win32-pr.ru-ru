---
description: Довольно часто точки, заданные для вершин, не имеют точного соответствия с пикселями на экране. В этом случае Direct3D применяет правила растеризации по треугольнику, чтобы определить, какие пиксели относятся к определенному треугольнику.
ms.assetid: 919b36f1-d4de-4d5d-ba1a-0605bf59a6cd
title: Правила растрирования (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5115b2f12e0064202fcbca58f52cb163166d0a82
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/04/2021
ms.locfileid: "104273174"
---
# <a name="rasterization-rules-direct3d-9"></a>Правила растрирования (Direct3D 9)

Довольно часто точки, заданные для вершин, не имеют точного соответствия с пикселями на экране. В этом случае Direct3D применяет правила растеризации по треугольнику, чтобы определить, какие пиксели относятся к определенному треугольнику.

-   [Правила растрирования треугольников](#triangle-rasterization-rules)
-   [Правила для точек и линий](#point-and-line-rules)
-   [Правила для точки спрайтов](#point-sprite-rules)

## <a name="triangle-rasterization-rules"></a>Правила растеризации по треугольнику

Direct3D использует общепринятый подход с началом отсчета в левом верхнему углу для размещения геометрических элементов. Этот же подход используется для прямоугольников в GDI и OpenGL. В Direct3D центр пикселя является решающей точкой. Если центр находится внутри треугольника, этот пиксель является частью такого треугольника. Центрам пикселей соответствуют целочисленные координаты.

Это описание правил растеризации по треугольнику, используемых Direct3D, не обязательно распространяется на все доступное оборудование. Во время тестирования вы можете обнаружить небольшие расхождения в реализации этих правил.

На следующем рисунке показан прямоугольник, левый верхний угол которого находится в точке (0, 0), а правый нижний угол — в точке (5, 5). Этот прямоугольник заполняет 25 пикселей, как и следовало ожидать. Ширина прямоугольника определяется как значение правой координаты минус значение левой координаты. Высота определяется как значение нижней координаты минус значение верхней координаты.

![Иллюстрация нумерованного квадрата, разделенного на шесть строк и столбцов](images/pixmap.png)

В подходе с заполнением от верхнего левого угла термин *верхний* указывает на расположение горизонтальных отрезков по вертикали, а термин *левый* указывает на расположение пикселей в отрезке по горизонтали. Сторона фигуры не может быть верхней, если она не является горизонтальной. Чаще всего у большинства треугольников есть только левая и правая стороны. На следующем рисунке показаны верхняя и правая стороны.

![Иллюстрация нумерованного квадрата, содержащего два треугольника](images/triedge.png)

Подход с заполнением от левого верхнего угла определяет действие, предпринимаемое Direct3D, когда треугольник проходит через центр пикселя. На следующем рисунке показаны два треугольника, один с координатами вершин (0, 0), (5, 0) и (5, 5) и второй с координатами вершин (0, 5) (0, 0) и (5, 5). К первому треугольнику в этом случае относятся 15 пикселей (показаны черным цветом), тогда как ко второму только 10 пикселей (отображаются серым цветом), поскольку их общая сторона — левая сторона первого треугольника.

![Иллюстрация нумерованного квадрата, показывающего два треугольника](images/twotris.png)

Если определить прямоугольник с верхним левым углом в точке (0,5, 0,5) и нижним правым углом в точке (2,5, 4,5), центральной точкой этого прямоугольника будет (1,5, 2,5). При растеризации Direct3D раскладывает этот прямоугольник, центр каждого пикселя однозначно находится внутри каждого из четырех треугольников и подход с заполнением от левого верхнего угла не требуется. На следующем рисунке показана такая ситуация. Пиксели в прямоугольнике помечены согласно треугольнику, в который Direct3D их включает.

![Показывает нумерованный квадрат, который содержит прямоугольник, разделенный на четыре треугольника.](images/noambig.png)

При перемещении прямоугольника с предыдущего рисунка таким образом, чтобы его верхний левый угол оказался в точке (1,0, 1,0), его правый нижний угол — в точке (3,0, 5,0), а центр — в точке (2,0, 3,0), Direct3D применяет подход с заполнением от левого верхнего угла. Большинство пикселей в этом прямоугольнике попадают на границу между двумя или более треугольниками, как показано на рисунке ниже.

![Иллюстрация нумерованного квадрата, содержащего прямоугольник, разделенный на четыре треугольника](images/fillrule.png)

Для обоих прямоугольников задействуются те же пиксели, как показано на следующем рисунке.

![Иллюстрация пикселей, затрагиваемых предыдущими двумя пронумерованными квадратами](images/samepix.png)

## <a name="point-and-line-rules"></a>Правила линий и точек

Точки отрисовываются так же, как и точечные спрайты, то есть оба эти вида элементов отрисовываются как выровненные по экрану четырехгранники, и, соответственно, на них распространяются те же правила, что и на отрисовку многоугольников.

Правила отрисовки линий без сглаживания являются точно такими же, что и для [линий GDI](../gdi/lines.md).

Дополнительные сведения о визуализации линий со сглаженными псевдонимами см. в разделе [**ID3DXLine**](id3dxline.md).

## <a name="point-sprite-rules"></a>Правила точечных спрайтов

Точечные спрайты и фрагментарные примитивы подвергаются растеризации таким образом, как если бы эти примитивы сначала рассекались на треугольники и затем проводилась бы растеризация полученных треугольников. Дополнительные сведения см. в разделе [Point Sprites (Direct3D 9)](point-sprites.md).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Системы координат и геометрия](coordinate-systems-and-geometry.md)
</dt> </dl>

 

 
