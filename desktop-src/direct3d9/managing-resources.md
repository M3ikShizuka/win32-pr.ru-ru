---
description: Управление ресурсами — это процесс, в ходе которого ресурсы переносятся из хранилища системной памяти в хранилище, доступное для устройств, и удаляются из хранилища, доступного для устройств.
ms.assetid: 4aa55313-b86c-48e7-829a-a0917c2ebae7
title: Управление ресурсами (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b860f1c394de932f167de94a3552315b1b70396e9900fccc079ab09142c9e31c
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117728467"
---
# <a name="managing-resources-direct3d-9"></a>Управление ресурсами (Direct3D 9)

Управление ресурсами — это процесс, в ходе которого ресурсы переносятся из хранилища системной памяти в хранилище, доступное для устройств, и удаляются из хранилища, доступного для устройств. Во время выполнения Direct3D используется собственный алгоритм управления, основанный на методе приоритета "самый последний раз". Direct3D переключается на наиболее часто используемый метод приоритета при обнаружении того, что больше ресурсов, чем могут сосуществовать в памяти, доступной для устройств, используется в одном кадре между [**IDirect3DDevice9:: бегинсцене**](/windows/desktop/api) и [**IDirect3DDevice9:: ендсцене**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-endscene) .

Используйте флаг [**D3DPOOL \_ по умолчанию**](./d3dpool.md) во время создания, чтобы указать, что ресурс помещается в пул памяти, наиболее подходящий для набора использований, запрошенных для данного ресурса. Обычно это видеопамять, в том числе как локальная видеопамять, так и графическая карта (AGP). Ресурсы в пуле по умолчанию не сохраняются посредством переходов между потерянным и операционным состояниями устройства. Эти ресурсы должны быть освобождены перед вызовом Reset и затем должны быть созданы повторно.

Используйте [**\_ управляемый флаг D3DPOOL**](./d3dpool.md) во время создания, чтобы указать управляемый ресурс. Управляемые ресурсы сохраняются посредством переходов между потерянным и операционным состояниями устройства. Эти ресурсы существуют в видео и системной памяти. Управляемый ресурс будет скопирован в видеопамять, когда он понадобится во время подготовки к просмотру. Устройство можно восстановить с помощью вызова [**IDirect3DDevice9:: Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset), и такие ресурсы продолжают работать нормально без повторной загрузки с данными. Однако если устройство должно быть уничтожено и создано повторно, все ресурсы необходимо создать заново.

Управление ресурсами не рекомендуется для ресурсов, которые меняются с высокой частотой. Например, буферы вершин и индексов, которые используются для прохода по графу сцены, каждый кадр отображают только геометрию, видимую для пользователя, каждый кадр изменяется. Так как управляемые ресурсы поддерживаются системной памятью, постоянные изменения должны быть обновлены в системной памяти, что может привести к серьезному снижению производительности. Для этого конкретного сценария следует использовать [**D3DPOOL \_ по умолчанию**](./d3dpool.md) вместе с [**D3DUSAGE \_ dynamic**](d3dusage.md) .

Еще один пример, в котором управление ресурсами не рекомендуется (и явно не разрешено средой выполнения), — это управление текстурой, созданной с помощью [**D3DUSAGE \_ рендертаржет**](d3dusage.md). Если память, используемая объектами прорисовки, была управляться средой выполнения, ее содержимое будет постоянно копироваться в системную память во время подготовки к просмотру, что приведет к значительному снижению производительности. По этой причине целевые объекты рендеринга должны быть созданы в пуле по умолчанию. Если требуется доступ ЦП к данным, содержащимся в целевом объекте прорисовки, данные должны быть скопированы в ресурс, созданный в [**D3DPOOL \_ системмем**](./d3dpool.md) с помощью [**IDirect3DDevice9:: упдатетекстуре**](/windows/desktop/api)или [**IDirect3DDevice9:: упдатесурфаце**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatesurface)

Дополнительные сведения о состоянии потерянного устройства см. в разделе [потерянные устройства (Direct3D 9)](lost-devices.md).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Ресурсы Direct3D](direct3d-resources.md)
</dt> </dl>

 

 
