---
description: Блок состояния можно использовать для захвата только состояния вершины (см. раздел состояния сохранение и восстановление состояния (Direct3D 9)).
ms.assetid: cb898228-dc45-4a2a-a82e-8d64523e9b85
title: Сохранение состояний вершин с помощью Статеблокк (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 81c6bc7fd291a2609ef60709f05a04fe8d27f8eb
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "105691999"
---
# <a name="saving-vertex-states-with-a-stateblock-direct3d-9"></a>Сохранение состояний вершин с помощью Статеблокк (Direct3D 9)

Блок состояния можно использовать для захвата только состояния вершины (см. раздел [состояния сохранение и восстановление состояния (Direct3D 9)](state-blocks-save-and-restore-state.md)). Следующее состояние — состояние вершины:

-   Состояние визуализации вершины (см. [конвейер вершин: состояние рендеринга](#vertex-pipeline-render-state)).
-   Состояние образца вершин (см. раздел [конвейер вершин: состояние](#vertex-pipeline-sampler-state)выборки).
-   Состояние текстуры вершин (см. раздел [конвейер вершин: состояние текстуры](#vertex-pipeline-texture-state)).
-   Нпатч режима в [**IDirect3DDevice9:: сетнпатчмоде**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setnpatchmode).
-   Каждый источник освещения из [**IDirect3DDevice9:: сетлигхт**](/windows/desktop/api), а также включение или выключение освещения с помощью [**IDirect3DDevice9::**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-lightenable)допустить.
-   Текущий шейдер вершин и все константы шейдера вершин.
-   Для каждого потока вершин сохраните значение разделителя из [**IDirect3DDevice9:: сетстреамсаурцефрек**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setstreamsourcefreq).
-   Текущее объявление вершины.

Чтобы записать состояние вершины в блоке состояния, укажите D3DSBT \_ вертексстате при вызове [**IDirect3DDevice9:: креатестатеблокк**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createstateblock).

## <a name="vertex-pipeline-render-state"></a>Конвейер вершин: состояние визуализации

Состояния визуализации устройства влияют на поведение почти каждой части конвейера. Состояния отрисовки задаются путем вызова [**IDirect3DDevice9:: сетрендерстате**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate).

В следующей таблице содержатся все состояния подготовки к просмотру, настроенные для состояния вершин.



| Состояния отрисовки                           | Значение по умолчанию          |
|-----------------------------------------|------------------------|
| D3DRS \_ куллмоде                         | D3DCULL \_ CCW           |
| D3DRS \_ фогколор                         | 0                      |
| D3DRS \_ фогтаблемоде                     | D3DFOG \_ None           |
| D3DRS \_ фогстарт                         | 0                      |
| D3DRS \_ фоженд                           | 1                      |
| D3DRS \_ фогденсити                       | 1                      |
| D3DRS \_ ранжефоженабле                   | **FALSE**              |
| D3DRS \_ окружение                          | 0                      |
| D3DRS \_ колорвертекс                      | **TRUE**               |
| D3DRS \_ фогвертексмоде                    | D3DFOG \_ None           |
| D3DRS \_ Обрезка                         | **TRUE**               |
| \_Освещение D3DRS                         | **TRUE**               |
| D3DRS \_ локалвиевер                      | **TRUE**               |
| D3DRS \_ емиссивематериалсаурце           | \_Материал D3DMCS       |
| D3DRS \_ амбиентматериалсаурце            | \_Материал D3DMCS       |
| D3DRS \_ диффусематериалсаурце            | D3DMCS \_ COLOR1         |
| D3DRS \_ спекуларматериалсаурце           | D3DMCS \_ COLOR2         |
| D3DRS \_ вертексбленд                      | \_Отключение D3DVBF        |
| D3DRS \_ клиппланинабле                  | 0                      |
| D3DRS \_ POINTSIZE                        | Зависит от драйвера       |
| D3DRS \_ POINTSIZE \_ мин                   | 1                      |
| D3DRS \_ поинтспритинабле                | **FALSE**              |
| D3DRS \_ поинтскалинабле                 | **FALSE**              |
| D3DRS \_ поинтскале \_ A                    | 1                      |
| D3DRS \_ поинтскале \_ B                    | 0                      |
| D3DRS \_ поинтскале \_ C                    | 0                      |
| D3DRS \_ мултисамплеантиалиас             | **TRUE**               |
| D3DRS \_ мултисамплемаск                  | 0xFFFFFFFF             |
| D3DRS \_ патчеджестиле                   | \_Дискретный D3DPATCHEDGE |
| D3DRS \_ POINTSIZE \_ Max                   | 1                      |
| D3DRS \_ индекседвертексбленденабле         | **FALSE**              |
| D3DRS \_ твинфактор                      | 0                      |
| D3DRS \_ поситиондегри                   | D3DDEGREE \_ кубический       |
| D3DRS \_ нормалдегри                     | \_Линейная D3DDEGREE      |
| D3DRS \_ минтесселлатионлевел             | 1                      |
| D3DRS \_ макстесселлатионлевел             | 1                      |
| D3DRS \_ адаптиветесс \_ X                  | 0                      |
| D3DRS \_ адаптиветесс \_ Y                  | 0                      |
| D3DRS \_ адаптиветесс \_ Z                  | 1                      |
| D3DRS \_ адаптиветесс \_ W                  | 0                      |
| D3DRS \_ енаблеадаптиветесселлатион "/> | **FALSE**              |



 

## <a name="vertex-pipeline-sampler-state"></a>Конвейер вершин: состояние образца

Состояния образцов контролируют связанные с выборкой разделы, такие как фильтрация, мозаичное заполнение и режимы адресации текстуры. Используйте [**IDirect3DDevice9:: сетсамплерстате**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setsamplerstate) , чтобы настроить состояние выборки (включая ту, которая используется в блоке тесселяции в качестве образца карт смещения). Состояния образца были переименованы с \_ префиксом "D3DSAMP", чтобы включить обнаружение ошибок во время компиляции при переносе из DirectX 8.

В следующей таблице приведены все состояния образцов, которые настроили состояние вершин.



| Состояния образцов      | Значение по умолчанию |
|---------------------|---------------|
| D3DSAMP \_ дмапоффсет | 256           |



 

## <a name="vertex-pipeline-texture-state"></a>Конвейер вершин: состояние текстуры

Состояние текстуры управляет операциями смешения текстур для многотекстурного смешения. Для состояния текстуры настройки используйте [**IDirect3DDevice9:: сеттекстурестажестате**](/windows/desktop/api) . Используйте [**IDirect3DDevice9:: сеттекстуре**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) , чтобы связать текстуру с стадией образца.

В следующей таблице перечислены все состояния текстур, настроенные для состояния вершин.



| Состояния текстуры                | Значение по умолчанию    |
|-------------------------------|------------------|
| D3DTSS \_ текскурдиндекс         | 0                |
| D3DTSS \_ текстуретрансформфлагс | \_Отключение D3DTTFF |



 

D3DTSS \_ текскурдиндекс — это состояние обработки фиксированной вершины функции. Если используется программируемый шейдер вершин, это состояние игнорируется.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Состояние блоков сохранения и восстановления](state-blocks-save-and-restore-state.md)
</dt> </dl>

 

 
