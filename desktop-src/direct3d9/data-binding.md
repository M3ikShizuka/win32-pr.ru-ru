---
description: Используйте коллекцию Сашостпараметервалуе, чтобы определить коллекцию значений ведущего приложения, а также их тип и члены, предоставленные для эффектов.
ms.assetid: 3fef353d-323a-4cc1-a8c9-2bf154754835
title: Привязка данных
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b67305d4acc8a4ed9e0827203e4602db26a99da
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104341542"
---
# <a name="data-binding"></a>Привязка данных

Используйте [коллекцию сашостпараметервалуе](#sashostparametervalue-collection) , чтобы определить коллекцию значений ведущего приложения, а также их тип и члены, предоставленные для эффектов. Используйте заметку [сасбиндаддресс](#sasbindaddress) в файле эффектов, чтобы связать параметр Effect с соответствующим параметром в ведущем приложении.

## <a name="sashostparametervalue-collection"></a>Коллекция Сашостпараметервалуе

Сашостпараметервалуе определяется с помощью синтаксиса файла эффектов (. FX). Хотя синтаксис очень похож на синтаксис файла эффектов, существуют некоторые различия. Например, типы объектов, такие как Texture2D, пробы и строки, недопустимы в файлах фактических эффектов, но являются допустимыми в Сашостпараметервалуе. Ведущее приложение может реализовать Сашостпараметервалуе любым способом до тех пор, пока он соответствует описанию ниже. фактическое определение находится в файле стандартных эффектов ДКССАС, включаемых в файл ( \[ корень пакета SDK \] /утилитиес/саурце/САС/САС.фксх).

Обратите внимание, что массивы в Сашостпараметервалуе, такие как индикаторы или камеры, имеют неограниченную длину. Это означает, что эффекты могут быть привязаны к любому произвольному индексу в этих массивах, и ведущие приложения должны предоставлять осмысленные значения по умолчанию в случаях, когда не может быть предоставлено значение приложения.

Некоторые типы и константы, которые необходимо определить в стандарте ДКССАС, включают, как указано в определении стандартного включения. Это позволяет эффектам легко привязывать агрегированные значения из Сашостпараметервалуе к параметрам структурированного эффекта.



| Коллекция Сашостпараметервалуе    | Type            | Член                                       |
|-------------------------------------|-----------------|----------------------------------------------|
| [Time](#time)                       | FLOAT           | SAS. time. Now                                 |
|                                     | FLOAT           | SAS. time. Last                                |
|                                     | INT             | SAS. time. Фраменумбер                         |
| [Схема среды](#environment-map) | текстурекубе     | SAS. Енвиронментмап                           |
| [Камера](#camera)                   | саскамера       | SAS. Camera                                   |
|                                     | float4x4        | SAS. Camera. Ворлдтовиев                       |
|                                     | float4x4        | SAS. Camera. проекция                        |
|                                     | float2          | SAS. Camera. Неарфарклиппинг                   |
| [Светлый](#light)                     | сасамбиентлигхт | AmbientLight \[ зерурморе \] ;                  |
|                                     | INT             | SAS. Нумамбиентлигхтс                         |
|                                     | сасамбиентлигхт | DirectionalLight \[ зерурморе \] ;              |
|                                     | INT             | SAS. Нумдиректионаллигхтс                     |
|                                     | сасамбиентлигхт | PointLight \[ зерурморе \] ;                    |
|                                     | INT             | SAS. Нумпоинтлигхтс                           |
|                                     | сасамбиентлигхт | Прожектор \[ зерурморе \] ;                     |
|                                     | INT             | SAS. Нумспотлигхтс                            |
| [Shadow](#shadow)                   | float4x4        | SAS. Shadow \[ зерурморе \] . ворлдтошадов       |
|                                     | texture2D       | SAS. Shadow \[ зерурморе \] . шадовмап           |
| [Скелет](#skeleton)               | float4x4        | SAS. скелет. Мештожоинттоворлд \[ онеорморе\] |
|                                     | INT             | SAS. скелет. Нумжоинтс                       |



 

### <a name="time"></a>Время

Виртуальное время или значение времени ведущего приложения. Члены включают:

-   SAS. time. Now — значение виртуальных часов ведущего приложения в точке, в которой будет отображаться результат.
-   SAS. time. Last — значение на предыдущем этапе рендеринга.
-   SAS. time. Фраменумбер — значение счетчика, увеличивающееся один раз для каждого отображаемого кадра.

Эффекты должны правильно обходиться на тот факт, что значения этих элементов потенциально могут быть обработаны в течение крайне долгого времени выполнения. Теперь и Last могут иметь очень большие значения.

### <a name="environment-map"></a>Схема среды

Схема кубических сред. Ведущие приложения должны предоставить допустимую текстуру Куба, если действие пытается выполнить привязку к SAS. Енвиронментмап.

### <a name="camera"></a>Камера

Камера, которая готовится к просмотру. Члены включают:

-   SAS. Camera. Ворлдтовиев — составная матрица представления для камеры.
-   SAS. Camera. проекция — матрица проекции для камеры.
-   SAS. Camera. Неарфарклиппинг — значения ближайших и дальне обрезанных плоскостей.

### <a name="light"></a>Светлая

Один или несколько индикаторов сцены. Коллекция источников света объявляется как массив, где:

-   Color — цвет RGB. Значение по умолчанию — (0,0,0).
-   Направление — направление освещения. Значение по умолчанию — (0,0,0).
-   Диапазон — расстояние от освещения, где лампочки не влияют на сцену. Значение по умолчанию — 0.
-   Тета — внутренний угол конуса прожектора, измеряемый в радианах. Значение по умолчанию — 0.
-   Фи — угол внешнего конуса в центре внимания, измеряемый в радианах. Значение по умолчанию — 0.

Число источников света должно быть равно числу источников света, привязанных к связанному массиву. Эффекты могут игнорировать количество источников света и привязывать их к любому элементу одного из массивов освещения. Поэтому ведущие приложения должны предоставить допустимую привязку для элементов, которые выходят за пределы числа источников света в массиве.

Зерурморе подразумевает, что массив может содержать любое количество элементов.

### <a name="shadow"></a>Shadow

Теневые буферы, которые состоят из:

-   Ворлдтошадов — массив матриц.
-   Шадовмап — файл двухмерной текстуры.

Зерурморе подразумевает, что массив может содержать любое количество элементов (ноль означает пустой массив).

Результатом будет объявление образца следующим образом:


```
texture2D Shadow 
<
  string SasBindAddress = "Sas.Shadow[0].ShadowMap";
>;

sampler ShadowSampler = shadow_sampler(Shadow);
```



### <a name="skeleton"></a>Скелет

Набор кадров, составляющих текущий объект отрисовки. Примерами кадров являются кости и преобразования. В том числе:

-   Мештожоинттоворлд — массив матриц.
-   Нумжоинтс — число соединений в скелете.

Онеорморе подразумевает, что массив содержит по крайней мере один элемент и может содержать любое количество элементов.

Определение поддерживает объекты сетки как с жесткими, так и с обложками, используя один набор значений [Сашостпараметервалуе коллекций](#sashostparametervalue-collection) с разной интерпретацией.

## <a name="sasbindaddress"></a>сасбиндаддресс

Эта заметка добавляется в начало файла действия, чтобы связать параметр Effect с соответствующим параметром, определенным в [коллекции сашостпараметервалуе](#sashostparametervalue-collection). Аннотация объявляется следующим образом:


```
string SasBindAddress = "SasHostParameterValue";
```



В этом примере в матрицу Мештожоинттоворлд привязывается матрица, содействующая по всему миру:


```
float4x3 World
<
  string SasBindAddress = "Sas.Skeleton.MeshToJointToWorld[0]";
>;
```



Эта заметка сообщает ведущему приложению, что ему нужно задать значение матрицы эффектов в мире, используя данные в матрице Мештожоинттоворлд.

Синтаксис заметки адреса привязки был очень похож на синтаксис, используемый [**ID3DXEffect**](id3dxeffect.md) для получения и установки параметров эффектов. Единственное различие между методами грамматики ДКССАС и **ID3DXEffect** заключается в добавлении маркера «звездочка». Ниже приведен еще один пример использования указателя со звездочкой:


```
float3 LightColors[6]
<
  string SasBindAddress = "Sas.Light[*].Color";
>;
```



Маркер индекса звездочки означает, что все элементы определенного массива значений енвирнмант узла (цвет в данном случае) должны быть привязаны в связанном параметре. Несколько маркеров индекса звездочки позволяют привязывать эффекты к вложенным элементам массива структур без необходимости привязки всей структуры. В этом примере значения цвета первых шести источников привязываются к параметру Effect.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Справочник по стандарту DirectX для заметок и семантик](dx9-graphics-reference-effects-dxsas.md)
</dt> </dl>

 

 



