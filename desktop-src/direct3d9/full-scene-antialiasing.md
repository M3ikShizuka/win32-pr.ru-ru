---
description: Сглаживание в полноэкранном режиме означает размытие краев каждого многоугольника в сцене по мере его растрирования в один проход; второй проход не требуется.
ms.assetid: b57974ab-5654-412d-ae59-58f67a88c121
title: Сглаживание Full-Scene (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d3fdeab18997db57ed1391af97f40f1500e7c326411019ddcb42453e4a68cc7e
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119893994"
---
# <a name="full-scene-antialiasing-direct3d-9"></a>Сглаживание Full-Scene (Direct3D 9)

Сглаживание в полноэкранном режиме означает размытие краев каждого многоугольника в сцене по мере его растрирования в один проход; второй проход не требуется. Сглаживание с полным монтажом сцены влияет только на треугольники и группы треугольников. Линии не могут быть сглажены с помощью служб Direct3D. Сглаживание в полноэкранном режиме выполняется в Direct3D с использованием множественной выборки на каждом пикселе. Если включена многовыборочная выборка, все подмножества пикселов обновляются за один проход, но при использовании других эффектов, использующих несколько этапов отрисовки, приложение может указать, что только некоторые подвыборки будут затронуты данным проходом отрисовки. Этот второй подход позволяет имитировать размытие движения, эффекты фокуса в поле глубины, размытие отражения и т. д.

В обоих случаях различные примеры, записанные для каждого пикселя, объединяются и выводятся на экран. Это позволяет улучшить качество сглаживания изображения или других эффектов.

Перед созданием устройства с помощью метода [**IDirect3D9:: креатедевице**](/windows/desktop/api) необходимо определить, поддерживается ли сглаживание в полном монтаже. Для этого вызовите метод [**IDirect3D9:: чеккдевицемултисамплетипе**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdevicemultisampletype) , как показано в примере кода ниже.


```
/*
* The code below assumes that pD3D is a valid pointer 
*   to a IDirect3D9 interface.
*/

if( SUCCEEDED(pD3D->CheckDeviceMultiSampleType( D3DADAPTER_DEFAULT, 
                    D3DDEVTYPE_HAL , D3DFMT_R8G8B8, FALSE, 
                    D3DMULTISAMPLE_2_SAMPLES, NULL ) ) )
// Full-scene antialiasing is supported. Enable it here.
```



Первый параметр, [**IDirect3D9:: чеккдевицемултисамплетипе**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdevicemultisampletype) , принимает порядковый номер, обозначающий отображаемый видеоадаптер. В этом образце используется D3DADAPTER \_ по умолчанию для указания основного видеоадаптера. Второй параметр — это значение из перечислимого типа [**D3DDEVTYPE**](./d3ddevtype.md) , которое указывает тип устройства. Третий параметр задает формат поверхности. Четвертый параметр сообщает платформе Direct3D, следует ли выполнять запрос многовыборочной (**true**) или полной (**false**)-сцены. В этом примере используется **значение false** , чтобы сообщить Direct3D о том, что он выполняет запрос на полное сглаживание. Последний параметр указывает метод многовыборки, который необходимо протестировать. Используйте значение из перечисляемого [**типа \_ D3DMULTISAMPLE**](./d3dmultisample-type.md) . Этот пример проверяет, поддерживаются ли два уровня множественной выборки.

Если устройство поддерживает требуемый уровень многоуровневой выборки, необходимо задать параметры презентации, заполнив соответствующие члены структуры [**\_ параметров D3DPRESENT**](d3dpresent-parameters.md) , чтобы создать многовыборочную область отрисовки. После этого можно создать устройство. В примере кода ниже показано, как настроить устройство с многовыборочной областью отрисовки.


```
/*
* The example below assumes that pD3D is a valid pointer 
* to a IDirect3D9 interface, d3dDevice is a pointer to a 
* IDirect3DDevice9 interface, and hWnd is a valid handle
* to a window.
*/

D3DPRESENT_PARAMETER d3dPP
ZeroMemory( &d3dPP, sizeof( d3dPP ) );
d3dPP.Windowed        = FALSE
d3dPP.SwapEffect      = D3DSWAPEFFECT_DISCARD;
d3dPP.MultiSampleType = D3DMULTISAMPLE_2_SAMPLES;
pD3D->CreateDevice(D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, hWnd,
                    D3DCREATE_SOFTWARE_VERTEXPROCESSING,
                    &d3dpp, &d3dDevice)
```



Чтобы использовать многовыборочную настройку, члену SwapEffect \_ параметра D3DPRESENT должно быть присвоено значение D3DSWAPEFFECT \_ Discard.

Последний шаг — включить многовыборочное сглаживание, вызвав метод [**IDirect3DDevice9:: сетрендерстате**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate) и УСТАНОВИВ \_ для D3DRS мултисамплеантиалиас **значение true**. После установки этого значения в значение **true** для любой визуализации, к которой применена многовыборка, применяется. Может потребоваться включить и отключить множественную выборку в зависимости от того, что вы выводяте.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Сглаживания](antialiasing.md)
</dt> </dl>

 

 
