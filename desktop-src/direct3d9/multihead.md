---
description: Многоголовные карты — это общие буферы кадров и ускорители, независимые цифровые и аналоговые преобразователи (приложений уровня данных), а также мониторы выходных данных.
ms.assetid: f741cdb4-2eb6-42e9-81ea-a8c677e07582
title: Многоголовной (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 04a74f51cea282618c9471eb9a63eedf8eef73c38b4d961209064261a93c4d46
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119563523"
---
# <a name="multihead-direct3d-9"></a>Многоголовной (Direct3D 9)

Многоголовные карты — это общие буферы кадров и ускорители, независимые цифровые и аналоговые преобразователи (приложений уровня данных), а также мониторы выходных данных. Такие устройства могут предоставлять гораздо более удобную поддержку нескольких мониторов, чем аналогичное число разнородных адаптеров отображения.

Многоголовные карты представлены в API как одно устройство на уровне API, которое может послужить несколькими цепочками полноэкранного переключения. Следовательно, все ресурсы совместно используются всеми заголовками, и у каждого из них есть точно такие же возможности. Для каждой головки можно задать независимые режимы экрана. Для обновления каждого заголовка можно использовать отдельные вызовы [**IDirect3DSwapChain9::P.**](/windows/desktop/api) Для последовательного обновления каждого заголовка можно также использовать один вызов [**IDirect3DDevice9::P**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-present) .

> [!Note]  
> Обновление каждого заголовка не происходит одновременно с одним вызовом [**IDirect3DDevice9::P**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-present)повторной отправки. Наличие статистики в Direct3D 9Ex может использовать структуру [**D3DPRESENTSTATS**](d3dpresentstats.md) для того, чтобы обновить каждую головку вблизи друг от друга, чтобы ограничить эффект разрывов в нескольких головах адаптеров. Сведения о синхронизации кадров в приложениях модели 9Ex для отражения Direct3D см. в разделе [улучшения Direct3D 9Ex](../direct3darticles/direct3d-9ex-improvements.md).

 

Каждая цепочка подкачки для многоголовного устройства должна быть полноэкранной. Когда устройство перешло в многоголовной режим, оно должно оставаться в полноэкранном режиме. Переход обратно в оконный режим требует уничтожения устройства (за исключением обычной операции ALT + TAB-сворачивания).

Старый метод разделения видеопамяти между головными элементами и разработкой каждого из них как полностью независимого ускорителя по-прежнему будет распространенным сценарием использования. Это предложение не заменяет этот механизм, если только приложение не было специально закодировано для работы в многоголовном режиме Direct3D 9.

Драйверам предоставлены достаточные знания для переключения между двумя режимами работы.

Одна головка будет называться главным головным, а все остальные заголовки на той же карте будут называться подчиненными головками. Если в системе имеется более одного многоголовного адаптера, главный и подчиненный адаптеры из одного многоголовного адаптера называются группой. Группы обозначаются порядковым номером главного головного устройства.

Структура [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) была обновлена для предоставления следующих новых аппаратных ограничений.


```
UINT NumberOfAdaptersInGroup; 
UINT MasterAdapterOrdinal; 
UINT AdapterOrdinalInGroup;
```



-   Нумберофадаптерсинграуп имеет значение 1 для стандартных адаптеров и больше 1 для главного адаптера многоголовной карты. Значение будет равно 0 для подчиненного адаптера многоголовной карты. Каждая карточка может иметь не более одного главного сервера, но может иметь множество подчиненных.
-   Мастерадаптерординал указывает, какое устройство является главным для этого подчиненного.
-   Адаптерординалинграуп указывает порядок, в котором заголовки ссылаются API. У главного адаптера всегда есть Адаптерординалинграуп 0. Эти значения не соответствуют порядковым номерам адаптеров, передаваемым методам IDirect3D9, но применяются только к заголовкам внутри группы.

Это определение позволяет многоголовным картам по прежнему представлять несколько адаптеров, как если бы они были независимыми картами, как и в DirectX 8.

Чтобы создать устройство с многоголовным заголовком, укажите флаг поведения D3DCREATE \_ адаптерграуп \_ Device в [**IDirect3D9:: креатедевице**](/windows/desktop/api). Параметры представления (массив [**\_ параметров D3DPRESENT**](d3dpresent-parameters.md)) должны содержать элементы нумберофадаптерсинграуп. Среда выполнения будет назначать каждый элемент каждому заголовку в Адаптерординалинграуп числовом порядке. Если \_ \_ задано устройство D3DCREATE адаптерграуп, каждый параметр презентации должен иметь следующее:

-   Оконный элемент **имеет значение false** (иными словами, в полноэкранном режиме).
-   То же значение для элемента ЕнаблеаутодепсстенЦил в [**\_ параметрах D3DPRESENT**](d3dpresent-parameters.md).

Кроме того, если ЕнаблеаутодепсстенЦил имеет **значение true**, то каждое из следующих полей должно иметь одно и то же значение для каждого [**\_ параметра D3DPRESENT**](d3dpresent-parameters.md):

-   аутодепсстенЦилформат
-   баккбуффервидс
-   баккбуфферхеигхт
-   баккбуфферформат

Если установлено приложение уровня данных, дополнительные вызовы [**IDirect3DDevice9:: креатеаддитионалсвапчаин**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createadditionalswapchain) являются недопустимыми.

Если устройство было создано с помощью DAC, [**IDirect3DDevice9:: Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset) будет иметь массив [**\_ параметров D3DPRESENT**](d3dpresent-parameters.md).

Каждая [**Структура \_ параметров D3DPRESENT**](d3dpresent-parameters.md) , передаваемая [**IDirect3DDevice9:: Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset) , должна быть полноэкранной. Чтобы переключиться обратно в оконный режим, приложение должно уничтожить устройство и повторно создать устройство, не являющееся многоголовным, в оконном режиме.

Ниже приведен простой сценарий использования.


```
1. Create multihead device 
2. For each swap chain of device:
   3. Call GetBackBuffer for the i-th swapchain
   4. Call SetRenderTarget 
   5. Call DrawPrimitive 
   6. Optionally call swapchain::Present (or wait until 
all swap chains are drawn and present outside of loop)
7. End the for loop
8. Optionally present all swap chains with device::Present
```



Дополнительные сведения см. в разделе [**IDirect3D9:: креатедевице**](/windows/desktop/api) and [**IDirect3DDevice9:: жетнумберофсвапчаинс**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getnumberofswapchains).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Советы программирования](programming-tips.md)
</dt> </dl>

 

 
