---
description: Сведения о поддержке рисования линий в D3DX. D3DX — это служебная Библиотека, которая предоставляет вспомогательные службы. Это уровень выше компонента Direct3D.
ms.assetid: 34ad82f2-542c-4342-af02-a767d6d4c96c
title: Поддержка рисования линий в D3DX (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c4cf15eae461d0dbe719e99cfac605a6c8b8d272
ms.sourcegitcommit: 5d4e99f4c8f42f5f543e52cb9beb9fb13ec56c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2021
ms.locfileid: "112407537"
---
# <a name="line-drawing-support-in-d3dx-direct3d-9"></a><span data-ttu-id="d7b17-105">Поддержка рисования линий в D3DX (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="d7b17-105">Line Drawing Support in D3DX (Direct3D 9)</span></span>

<span data-ttu-id="d7b17-106">D3DX — это служебная Библиотека, которая предоставляет вспомогательные службы.</span><span class="sxs-lookup"><span data-stu-id="d7b17-106">D3DX is a utility library that provides helper services.</span></span> <span data-ttu-id="d7b17-107">Это уровень выше компонента Direct3D.</span><span class="sxs-lookup"><span data-stu-id="d7b17-107">It is a layer above the Direct3D component.</span></span>

<span data-ttu-id="d7b17-108">D3DX поддерживает сглаженные линии с одним пикселем.</span><span class="sxs-lookup"><span data-stu-id="d7b17-108">D3DX supports single-pixel-wide antialiased lines.</span></span> <span data-ttu-id="d7b17-109">Шаблоны линий больше не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="d7b17-109">Line patterns are no longer supported.</span></span>

<span data-ttu-id="d7b17-110">Библиотека рисования линий эмулирует линии с помощью треугольников текстуры и предполагает следующее:</span><span class="sxs-lookup"><span data-stu-id="d7b17-110">The line drawing library emulates lines using texture triangles and assumes the following:</span></span>

-   <span data-ttu-id="d7b17-111">Оборудование доступно через интерфейсы Direct3D 9.</span><span class="sxs-lookup"><span data-stu-id="d7b17-111">Hardware is available through the Direct3D 9 interfaces.</span></span>
-   <span data-ttu-id="d7b17-112">Доступен по крайней мере один этап текстуры.</span><span class="sxs-lookup"><span data-stu-id="d7b17-112">At least one texture stage is available.</span></span>
-   <span data-ttu-id="d7b17-113">используются текстуры 64 x 64.</span><span class="sxs-lookup"><span data-stu-id="d7b17-113">64x64 textures are used.</span></span>
-   <span data-ttu-id="d7b17-114">Доступны следующие режимы.</span><span class="sxs-lookup"><span data-stu-id="d7b17-114">The following modes are available:</span></span>
    -   <span data-ttu-id="d7b17-115">билинейная фильтрация;</span><span class="sxs-lookup"><span data-stu-id="d7b17-115">Bilinear filtering</span></span>
    -   <span data-ttu-id="d7b17-116">Режим адреса среза</span><span class="sxs-lookup"><span data-stu-id="d7b17-116">Clamp address mode</span></span>
    -   <span data-ttu-id="d7b17-117">Режим адреса для переноса</span><span class="sxs-lookup"><span data-stu-id="d7b17-117">Wrap address mode</span></span>
    -   <span data-ttu-id="d7b17-118">Альфа-операция модуляции</span><span class="sxs-lookup"><span data-stu-id="d7b17-118">Alpha op modulate</span></span>
    -   <span data-ttu-id="d7b17-119">Альфа-смешение (СРКБЛЕНД = SRC \_ альфа, дестбленд = Инв \_ src \_ Alpha)</span><span class="sxs-lookup"><span data-stu-id="d7b17-119">Alpha blending (SRCBLEND = SRC\_ALPHA, DESTBLEND = INV\_SRC\_ALPHA)</span></span>
    -   <span data-ttu-id="d7b17-120">Альфа-канал теста, если недоступно сочетание Alpha. более низкий результат качества</span><span class="sxs-lookup"><span data-stu-id="d7b17-120">Alpha test if alpha blending is not available; lower quality result</span></span>

<span data-ttu-id="d7b17-121">Для отображения сглаженных линий в многопримерных целевых объектах рендеринга используйте [**ID3DXLine**](id3dxline.md) , который создает текстурированные многоугольники.</span><span class="sxs-lookup"><span data-stu-id="d7b17-121">For antialiased line rendering in multisample render targets, use [**ID3DXLine**](id3dxline.md) which generates textured polygons.</span></span> <span data-ttu-id="d7b17-122">Значения покрытия пикселей, созданные сглаженной линией, обменяются альфа-значением пикселя, вычисленным шейдером пикселей.</span><span class="sxs-lookup"><span data-stu-id="d7b17-122">The pixel coverage values, generated by antialiased line rasterization, modulate the pixel's alpha value computed by the pixel shader.</span></span> <span data-ttu-id="d7b17-123">Чтобы нарисовать сглаженную линию, приложение должно включить альфа-смешение, а затем установить \_ состояние визуализации D3DRS антиалиаседлининабле в **значение true**.</span><span class="sxs-lookup"><span data-stu-id="d7b17-123">To draw an antialiased line, an application must enable alpha blending and then it must set the D3DRS\_ANTIALIASEDLINEENABLE render state to **TRUE**.</span></span>

## <a name="functionality-description"></a><span data-ttu-id="d7b17-124">Описание функциональности</span><span class="sxs-lookup"><span data-stu-id="d7b17-124">Functionality Description</span></span>

<span data-ttu-id="d7b17-125">Библиотека поддерживает Рисование цветных полос линий с помощью следующих функций строки, каждый из которых не зависит друг от друга:</span><span class="sxs-lookup"><span data-stu-id="d7b17-125">The library supports drawing colored line strips with the following line features, each of which is independent of any other:</span></span>

-   <span data-ttu-id="d7b17-126">Толщина линии</span><span class="sxs-lookup"><span data-stu-id="d7b17-126">Line width</span></span>
-   <span data-ttu-id="d7b17-127">Шаблон линии с повторением (счетчик шаблона линии сбрасывается при каждом вызове [**ID3DXLine::D RAW**](id3dxline--draw.md) или [**ID3DXLine::D равтрансформ**](id3dxline--drawtransform.md) .</span><span class="sxs-lookup"><span data-stu-id="d7b17-127">Line pattern with repetition (the line pattern counter resets with each [**ID3DXLine::Draw**](id3dxline--draw.md) or [**ID3DXLine::DrawTransform**](id3dxline--drawtransform.md) call.</span></span> <span data-ttu-id="d7b17-128">Он не сбрасывается с каждым сегментом линейки линий.)</span><span class="sxs-lookup"><span data-stu-id="d7b17-128">It does not reset with each segment of the line strip.)</span></span>
-   <span data-ttu-id="d7b17-129">Сглаживания</span><span class="sxs-lookup"><span data-stu-id="d7b17-129">Antialiasing</span></span>
-   <span data-ttu-id="d7b17-130">Линии в стиле OpenGL</span><span class="sxs-lookup"><span data-stu-id="d7b17-130">OpenGL-style lines</span></span>

> [!Note]  
> <span data-ttu-id="d7b17-131">Угловое соединение не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="d7b17-131">No mitering is supported.</span></span>

 

<span data-ttu-id="d7b17-132">Библиотека использует встроенную поддержку отрисовки линий оборудования (если она доступна на устройстве) только в том случае, если:</span><span class="sxs-lookup"><span data-stu-id="d7b17-132">The library uses native hardware line drawing support (if available in the device) only if:</span></span>

-   <span data-ttu-id="d7b17-133">Толщина линии — 1.</span><span class="sxs-lookup"><span data-stu-id="d7b17-133">Line width is 1.</span></span>
-   <span data-ttu-id="d7b17-134">Шаблон линии не включен.</span><span class="sxs-lookup"><span data-stu-id="d7b17-134">No line pattern is enabled.</span></span>

<span data-ttu-id="d7b17-135">В некоторых аппаратных устройствах поддерживаются сглаженные линии с одним пикселем, поэтому библиотека использует ее, если она доступна.</span><span class="sxs-lookup"><span data-stu-id="d7b17-135">Single-pixel-wide antialiased lines are supported by some hardware, so the library uses that, if available.</span></span> <span data-ttu-id="d7b17-136">Элемент Линекапс структуры [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) перечисляет аппаратные возможности для примитивов рисования линий.</span><span class="sxs-lookup"><span data-stu-id="d7b17-136">The LineCaps member of the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure enumerates hardware capabilities for line-drawing primitives.</span></span>

<span data-ttu-id="d7b17-137">При использовании программной прорисовки каждая строка разворачивается в прямоугольнике, а в драйвере отправляются четыре вершины.</span><span class="sxs-lookup"><span data-stu-id="d7b17-137">When the software line drawing is used, each line is expanded into a rectangle and four vertices are sent down to the driver.</span></span>

<span data-ttu-id="d7b17-138">Каждый сегмент линии рисуется с двумя треугольниками.</span><span class="sxs-lookup"><span data-stu-id="d7b17-138">Each line segment is drawn with two triangles.</span></span> <span data-ttu-id="d7b17-139">Ширина примитива равна заданной ширине плюс 1,0, что может привести к появлению дополнительной строки или столбца пикселей.</span><span class="sxs-lookup"><span data-stu-id="d7b17-139">The width of the primitive is the specified width plus 1.0, which may result in an extra row or column of pixels.</span></span> <span data-ttu-id="d7b17-140">По мере того, как линия расширяется, градиентная заливка текстуры становится более грубой, а более полностью непрозрачные пикселей текстуры реплицируются по середине.</span><span class="sxs-lookup"><span data-stu-id="d7b17-140">As the line gets wider, the antialias gradient in the texture becomes more coarse, and more fully-opaque texels are replicated around the middle.</span></span> <span data-ttu-id="d7b17-141">Градиент кодируется в соответствии с v-направлением текстуры и обычно реплицируется вдоль u-направления.</span><span class="sxs-lookup"><span data-stu-id="d7b17-141">The gradient is encoded in the v-direction of the texture, and typically replicated along the u-direction.</span></span> <span data-ttu-id="d7b17-142">Режим адресации текстуры для v — это зажим.</span><span class="sxs-lookup"><span data-stu-id="d7b17-142">The texture addressing mode for v is clamp.</span></span>

<span data-ttu-id="d7b17-143">Каждый сегмент строки в списке можно рассматривать как отдельную строку, которая начинается с предыдущей конечной точки.</span><span class="sxs-lookup"><span data-stu-id="d7b17-143">Each line segment in the list can be considered to be a separate line that happens to start from the previous end point.</span></span>

<span data-ttu-id="d7b17-144">Качество сглаживания по краям, параллельно с длиной исходной строки, снижается по мере того, как линия становится шире.</span><span class="sxs-lookup"><span data-stu-id="d7b17-144">Antialiasing quality along the edges parallel to the length of the original line suffers as the line gets wider.</span></span> <span data-ttu-id="d7b17-145">Ожидается, что ширина строк, превышающая 32,0, начнет демонстрировать артефакты на этих краях.</span><span class="sxs-lookup"><span data-stu-id="d7b17-145">It is expected that line widths greater than 32.0 will start to exhibit artifacts along these edges.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d7b17-146">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="d7b17-146">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d7b17-147">D3DX</span><span class="sxs-lookup"><span data-stu-id="d7b17-147">D3DX</span></span>](d3dx.md)
</dt> </dl>

 

 



