---
description: Устройства Direct3D могут преобразовывать координаты текстуры для вершин, применяя матрицу 4x4.
ms.assetid: f36439de-e37a-457c-9485-a435847eb01e
title: Преобразования координат текстуры (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f45b8107f609348ae2367b1171ae7913797f4558
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104139963"
---
# <a name="texture-coordinate-transformations-direct3d-9"></a>Преобразования координат текстуры (Direct3D 9)

Устройства Direct3D могут преобразовывать координаты текстуры для вершин, применяя матрицу 4x4. Система применяет преобразования к текстурным координатам таким же образом, как и геометрия Geometry. Любое преобразование (масштабирование, вращение, перевод, проекция, наклон или любое сочетание этих значений) можно выполнить с матрицей 4x4.

> [!Note]  
> Direct3D не изменяет преобразованные и освещенные вершины. В результате приложение, использующее преобразованные и освещенные вершины, не может использовать Direct3D для преобразования координат текстуры вершин.

 

Устройства, поддерживающие операции преобразования и освещения с аппаратным ускорением (T&L HAL), также ускоряют преобразование координат текстуры. Если аппаратное ускорение преобразований недоступно, оптимизации для конкретной платформы в конвейере геометрии Direct3D применяются к преобразованиям координат текстуры.

Преобразования координат текстуры полезны для создания специальных эффектов, при этом не нужно напрямую изменять координаты текстуры геометрического объекта. Можно использовать простые матрицы перевода или вращения, чтобы анимировать текстуры на объекте, или можно преобразовать координаты текстуры, которые автоматически создаются Direct3D для упрощения и, возможно, ускорения сложных эффектов, таких как прогнозируемые текстуры и динамическое освещение. Кроме того, преобразования координат текстуры можно использовать для повторного использования одного набора координат текстуры для нескольких целей на нескольких стадиях текстуры.

## <a name="setting-and-retrieving-texture-coordinate-transformations"></a>Установка и извлечение преобразований координат текстуры

Как и в случае с матрицами, используемыми приложением для геометрии, вы устанавливаете и получаете преобразования координат текстуры путем вызова методов [**IDirect3DDevice9:: сеттрансформ**](/windows/desktop/api) и [**IDirect3DDevice9:: Transform**](/windows/desktop/api) . Эти методы принимают D3DTS \_ TEXTURE0 через D3DTS \_ TEXTURE7-члены перечислимого типа [**D3DTRANSFORMSTATETYPE**](./d3dtransformstatetype.md) , чтобы находить матрицы преобразования для стадий текстуры от 0 до 7 соответственно.

Следующий код задает матрицу, применяемую к координатам текстуры для этапа текстуры 0.


```
// For this example, assume the d3dDevice variable contains a 
//   valid pointer to an IDirect3DDevice9 interface.

D3DMATRIX matTrans = D3DXMatrixIdentity( NULL );

// Set up the matrix for the desired transformation.
d3dDevice->SetTransform( D3DTS_TEXTURE0, &matTrans );
```



## <a name="enabling-texture-coordinate-transformations"></a>Включение преобразования координат текстуры

\_Состояние этапа текстуры D3DTSS текстуретрансформфлагс управляет применением преобразований координат текстуры. Значения для этого состояния стадии текстуры определяются перечисляемым типом [**D3DTEXTURETRANSFORMFLAGS**](./d3dtexturetransformflags.md) .

Преобразования координат текстуры отключаются, когда D3DTSS \_ текстуретрансформфлагс имеет значение D3DTTFF \_ Disable (значение по умолчанию). При условии, что преобразование координат текстуры было включено для этапа 0, следующий код отключает их.


```
// For this example, assume the d3dDevice variable contains a 
// valid pointer to an IDirect3DDevice9 interface.

d3dDevice->SetTextureStageState( 0, D3DTSS_TEXTURETRANSFORMFLAGS, 
                                 D3DTTFF_DISABLE );
```



Другие значения, определенные в [**D3DTEXTURETRANSFORMFLAGS**](./d3dtexturetransformflags.md) , используются для включения преобразования координат текстуры, а также для управления тем, сколько результирующих элементов координат текстуры передается в средство программной прорисовки. Например, рассмотрим следующий код.


```
// For this example, assume the d3dDevice variable contains a 
//   valid pointer to an IDirect3DDevice9 interface.

d3dDevice->SetTextureStageState( 0, D3DTSS_TEXTURETRANSFORMFLAGS, 
                                 D3DTTFF_COUNT2 );
```



Значение D3DTTFF \_ COUNT2 предписывает системе применить матрицу преобразования, установленную для этапа текстуры 0, а затем передать первые два элемента измененных координат текстуры в средство программной прорисовки.

\_Флаг преобразования D3DTTFF проецируемая текстура указывает координаты проецируемой текстуры. Если этот флаг указан, средство программной прорисовки делит элементы, переданные последним элементом. Возьмем, например, следующий код.


```
// For this example, assume the d3dDevice variable contains a 
//   valid pointer to an IDirect3DDevice9 interface.

d3dDevice->SetTextureStageState( 0, D3DTSS_TEXTURETRANSFORMFLAGS, 
                                 D3DTTFF_COUNT3 | D3DTTFF_PROJECTED );
```



В этом примере система информирует систему о передаче трех элементов координат текстуры в средство программной прорисовки. Средство программной прорисовки делит первые два элемента на треть, создавая координаты двухмерной текстуры, необходимые для адресации текстуры.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Обработка координат текстуры](texture-coordinate-processing.md)
</dt> </dl>

 

 
