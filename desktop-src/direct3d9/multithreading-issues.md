---
description: Полноэкранные приложения Direct3D предоставляют обработчику окна время выполнения Direct3D.
ms.assetid: 66a9e14f-46c8-45e8-ae0e-4d8cf5106acc
title: Проблемы многопоточности (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa8d163698e6cc1b4855668d255ed46fd28700d1
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104416508"
---
# <a name="multithreading-issues-direct3d-9"></a>Проблемы многопоточности (Direct3D 9)

Полноэкранные приложения Direct3D предоставляют обработчику окна время выполнения Direct3D. Окно подключается к времени выполнения. Это означает, что все сообщения, передаваемые в процедуру сообщения окна приложения, сначала проверялись собственной процедурой обработки сообщений во время выполнения Direct3D.

Изменения режима экрана зависят от подпрограмм поддержки, встроенных в базовую операционную систему. Когда происходит изменение режима, система передает несколько сообщений всем приложениям. В приложениях Direct3D сообщения принимаются в потоке окна процедуры, что не обязательно является тем же потоком, который вызвал [**IDirect3DDevice9:: Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset) или [**IDirect3D9:: креатедевице**](/windows/desktop/api) (или окончательный выпуск [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9), что может привести к изменению режима экрана). Во время выполнения Direct3D поддерживаются несколько критических разделов. Поскольку по крайней мере один из этих критических разделов удерживается через коммутатор режима, вызванный **IDirect3DDevice9:: Reset** или **IDirect3D9:: креатедевице**, эти критические разделы по-прежнему сохраняются, когда приложение получает сообщения окон режима, связанные с изменением состояния.

Эта схема имеет некоторые последствия для многопоточных приложений. В частности, приложение должно строго разделять потоки обработки сообщений окна от своих потоков Direct3D. Приложение, которое вызывает изменение режима в одном потоке, но выполняет вызовы Direct3D в другом потоке в его процедуре окна, заключается в опасности взаимоблокировки.

По этим причинам Direct3D спроектирован таким образом, что методы [**IDirect3DDevice9:: Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset), [**IDirect3D9:: креатедевице**](/windows/desktop/api), [**IDirect3DDevice9:: тесткуперативелевел**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-testcooperativelevel)или окончательный выпуск [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) могут вызываться только из того же потока, который обрабатывает сообщения окна.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Советы по программированию](programming-tips.md)
</dt> </dl>

 

 
