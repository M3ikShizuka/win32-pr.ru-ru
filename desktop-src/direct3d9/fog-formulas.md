---
description: Приложения C++ могут управлять влиянием тумана на цвет объектов в сцене, изменяя способ, которым Microsoft Direct3D будет рассчитывать эффекты тумана по расстоянию.
ms.assetid: b7148ae8-45c7-4dbe-8295-0335c7fdeff0
title: Формулы тумана (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ac92b6d00ff5f4d4ec03dbe7bb40365917f8b835fd121cdc934c470c45c38814
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120027010"
---
# <a name="fog-formulas-direct3d-9"></a>Формулы тумана (Direct3D 9)

Приложения C++ могут управлять влиянием тумана на цвет объектов в сцене, изменяя способ, которым Microsoft Direct3D будет рассчитывать эффекты тумана по расстоянию. Перечисляемый тип [**D3DFOGMODE**](./d3dfogmode.md) содержит члены, которые обозначают три формулы тумана. Во всех формулах коэффициент тумана вычисляется как функция расстояния, учитывая параметры, заданные приложением.

## <a name="linear-fog"></a>Линейный туман

Это задается со следующим \_ линейным уравнением D3DFOG.

![уравнение линейного тумана Direct3D](images/fogliner.png)

where

-   Начало — это расстояние, с которого начинается эффект тумана.
-   конец — это расстояние, с которым эффекты тумана больше не увеличиваются.
-   d представляет глубину или расстояние от точки зрения. Для тумана на основе диапазона значение d является расстоянием между положением камеры и вершиной. Для тумана, не основанного на диапазоне, значение d является абсолютным значением координаты Z в пространстве камеры.

## <a name="exponential-fog"></a>Экспоненциальный туман

Линейные и экспоненциальные формулы поддерживаются как для пиксельных, так и для вершинных туманов.

Это задается следующим \_ уравнением D3DFOG Exp.

![уравнение экспоненциального тумана Direct3D](images/fogexp.png)

where

-   e — основание натуральных логарифмов (приблизительно 2,71828).
-   плотность — это произвольная плотность тумана, которая может варьироваться от 0,0 до 1,0.
-   d представляет глубину или расстояние от точки зрения, как было сказано ранее.

Это задается следующим \_ уравнением D3DFOG EXP2.

![уравнение экспоненциального тумана Direct3D 2](images/fogexp2.png)

where

-   e — основание натуральных логарифмов, как указано выше.
-   плотность — это произвольная плотность тумана, которая может варьироваться от 0,0 до 1,0, как указано выше.
-   d представляет глубину или расстояние от точки зрения, как указано выше.

> [!Note]  
> Система сохраняет коэффициент тумана в альфа-компоненте отраженного цвета для вершины. Если приложение выполняет собственное преобразование и освещение, можно вставлять значения коэффициента тумана вручную, чтобы они были применены системой во время подготовки к просмотру.

 

На следующей диаграмме показаны эти формулы с использованием общих значений, как в параметрах формулы.

![Диаграмма для формул тумана по расстоянию и количеству цветов](images/foggraph.png)

\_Линейный D3DFOG — 1,0 в начале и 0,0 в конце. Он не измеряется относительно ближайших или дальнего плоскости.

Когда Direct3D вычисляет эффекты тумана, он использует коэффициент тумана из одного из предыдущих уравнений в следующем уравнении смешения.

![уравнение эффектов тумана для Direct3D](images/fogcalc.png)

Эта формула эффективно масштабирует цвет текущего многоугольника C на коэффициент тумана f и добавляет продукт к цвету тумана C, который масштабируется по побитовому инвертированию от фактора тумана. Полученное значение цвета — это смешение цвета тумана и исходного цвета в качестве коэффициента расстояния. Формула применяется ко всем устройствам, поддерживаемым в Microsoft DirectX 7,0 и более поздних версиях. Для устройства с устаревшим пандусом фактор тумана масштабирует компоненты рассеянного и зеркального цвета с фиксацией в диапазоне от 0,0 до 1,0 включительно. Коэффициент тумана обычно начинается с 1,0 для ближней плоскости и уменьшается до 0,0 на дальней плоскости.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Типы туманов](fog-types.md)
</dt> </dl>

 

 
