---
description: Приложения могут оптимизировать, какое подмножество текстуры копируется, указав &\# 0034; dirty&\# 0034; регионах на текстурах.
ms.assetid: 102081bc-d5d5-4ec1-b935-00d4eda8f470
title: Изменившиеся регионы текстур (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35e3f1ce350a2728c99c49455b5fb8b638c47d10
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "105701143"
---
# <a name="texture-dirty-regions-direct3d-9"></a>Изменившиеся регионы текстур (Direct3D 9)

Приложения могут оптимизировать, какое подмножество текстуры копируется путем указания "грязных" областей на текстурах. Только те регионы, которые помечены как "грязные", копируются путем вызова [**IDirect3DDevice9:: упдатетекстуре**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatetexture). Однако «грязные» регионы могут быть развернуты для оптимизации выравнивания. При создании текстуры вся текстура считается «грязной». Только следующие операции влияют на «грязное» состояние текстуры.

-   Добавление «грязной» области к текстуре.
-   Блокировка некоторого буфера в текстуре. Эта операция добавляет заблокированный регион в качестве "грязной" области. Приложение может отключить автоматическое обновление "грязной" области, если оно лучше знает фактические "грязные" регионы.
-   Использование уровня поверхности текстуры в качестве назначения в [**IDirect3DDevice9:: упдатесурфаце**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatesurface) помечает всю текстуру как "грязную".
-   Использование текстуры в качестве источника в [**IDirect3DDevice9:: упдатетекстуре**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatetexture) очищает все изменившиеся регионы на исходной текстуре.
-   Использование [**IDirect3DSurface9:: GetDC**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dsurface9-getdc) для возврата контекста устройства.
-   Вызов [**IDirect3DBaseTexture9:: женератемипсублевелс**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dbasetexture9-generatemipsublevels) помечает всю текстуру как "грязную".
-   Вызов [**IDirect3DBaseTexture9:: сетаутоженфилтертипе**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dbasetexture9-setautogenfiltertype) помечает всю текстуру как "грязную".

"Грязные" регионы задаются на верхнем уровне текстуры мипмаппед, а [**IDirect3DDevice9:: упдатетекстуре**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatetexture) может развернуть "грязную" область вниз по цепочке MIP, чтобы свести к минимальному числу байтов, копируемых для каждого подуровня. Обратите внимание, что координаты «грязной» области подуровня округляются наружу, то есть их дробные части округляются в сторону ближайшего края текстуры.

Так как каждый тип текстуры имеет различные типы «грязных» регионов, для каждого типа текстуры существуют методы. 2D-текстуры используют "грязный" прямоугольник, а текстуры тома — с помощью рамок.

-   [**IDirect3DCubeTexture9:: Адддиртирект**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dcubetexture9-adddirtyrect)
-   [**IDirect3DTexture9:: Адддиртирект**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dtexture9-adddirtyrect)
-   [**IDirect3DVolumeTexture9:: Адддиртибокс**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dvolumetexture9-adddirtybox)

Передача **значения NULL** для параметров Пдиртирект или пдиртибокс в указанных выше методах расширяет область «грязной» области для покрытия всей текстуры.

Каждый метод блокировки может принимать D3DLOCK \_ без \_ "грязного" \_ обновления, что предотвращает любые изменения в "грязном" состоянии текстуры. Дополнительные сведения см. в разделе [Блокировка ресурсов (Direct3D 9)](locking-resources.md).

Если доступны дополнительные сведения о истинном наборе регионов, измененных во время операции блокировки, приложения должны использовать D3DLOCK \_ без \_ "грязного" \_ обновления. Обратите внимание, что блокировка или копия только для подуровне текстуры (т. е. без блокировки или копирования на верхний уровень) не обновляет «грязные» регионы для этой текстуры. Приложения предполагают такую же ответственность за обновление «грязных» регионов при блокировке более низких уровней без блокировки самого верхнего уровня.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Основные понятия текстурирования](basic-texturing-concepts.md)
</dt> </dl>

 

 
