---
description: API Direct3D 9 работает в модели Windows XP дисплей (XPDM) или Windows Vista дисплей Driver (WDDM) в зависимости от установленной операционной системы.
ms.assetid: b552c822-aa01-4f1d-a0a6-1411ab006e7b
title: XPDM и WDDM
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e12c7d811850c953eb53c346b628363a2642dda9
ms.sourcegitcommit: b40a986d5ded926ae7617119cdd35d99b533bad9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2021
ms.locfileid: "110343539"
---
# <a name="xpdm-vs-wddm"></a>XPDM и WDDM

API Direct3D 9 работает в модели Windows XP дисплей (XPDM) или Windows Vista дисплей Driver (WDDM) в зависимости от установленной операционной системы. Существует ряд различий в способе, которым API Direct3D ведет себя в двух моделях драйверов.

-   [Безопасный рабочий стол](#secure-desktop)
-   [Удаленный рабочий стол](#remote-desktop)
-   [Служба Windows](#windows-service)
-   [См. также](#related-topics)

## <a name="secure-desktop"></a>Безопасный рабочий стол

Безопасный рабочий стол активизируется каждый раз, когда происходит любое из следующих условий: пользователь блокирует свой рабочий стол (Windows + L), активируется экранная заставка (если пользователь не вошел в систему) или по умолчанию, когда контроль учетных записей предоставляет запрос. Когда безопасный рабочий стол активен, устройство HAL недоступно.

Различия между XPDM и WDDM:

- Попытка создать устройство уровня HAL с помощью Direct3D9 завершится сбоем (с **D3DERR \_ \_ недоступно**), а любое существующее устройство Direct3D 9 будет указывать на наличие потерянного кода возврата устройства.

- API-интерфейсы Direct3D9Ex и Direct3D 10 могут успешно создавать устройства, пока активен безопасный рабочий стол, и любые вызовы ([**IDirect3D9Ex**](/windows/desktop/api/d3d9/nn-d3d9-idirect3d9ex) или DXGI) будут возвращать код состояния, указывающий на то, что рабочий стол в данный момент недоступен.



 

## <a name="remote-desktop"></a>Удаленный рабочий стол

Когда удаленный рабочий стол активен, монитор обрабатывается компьютером, на котором размещается компьютер, на котором выполняется отправка сведений через сеть.

Различия между XPDM и WDDM:

- В XPDM все попытки создать устройство Direct3D 9 на удаленном рабочем столе завершатся сбоем.

- В WDDM удаленный рабочий стол поддерживает создание устройства HAL через сеанс удаленного рабочего стола.



 

## <a name="windows-service"></a>Служба Windows

Служба Windows — это процесс, выполняемый в фоновом режиме и управляемый диспетчером управления службами (SCM). Служба работает независимо от Active Desktop и, следовательно, имеет ограниченную возможность взаимодействовать с пользователями.

Различия между XPDM и WDDM:

- В режиме WDDM изоляция "сеанс 0" гарантирует, что служба не имеет доступа к рабочему столу пользователя в качестве меры безопасности, поэтому устройство Direct3D 9 HAL никогда не будет доступно из службы Windows.



 

> [!Note]  
> Direct3D 9 нельзя использовать в службе Windows. Дополнительные сведения см. в [статье 978635 технической поддержки Майкрософт](https://support.microsoft.com/kb/978635).

 


В следующей таблице перечислены различия, перечисленные здесь.



| Безопасный рабочий стол | ДРАЙВЕРЫ | WDDM (Direct3D9) | WDDM (Direct3D9Ex/Direct3D10) |
|-----------------|------|------------------|------------------------------|
| нуллреф         | Да  | Да              | Да                          |
| ПРОЦЕССОР             | Нет   | Нет               | Да                          |
| REF             | Да  | Да              | Да                          |
| Удаленный рабочий стол  |      |                  |                              |
| нуллреф         | Нет   | Да              | Да                          |
| ПРОЦЕССОР             | Нет   | Да              | Да                          |
| REF             | Да  | Да              | Да                          |
| Служба Windows |      |                  |                              |
| нуллреф         | Нет   | Нет               | Нет                           |
| ПРОЦЕССОР             | Нет   | Нет               | Нет                           |
| REF             | Нет   | Нет               | Нет                           |
| WARP10          | Н/Д  | Н/Д              | Да                          |



 

Дополнительные сведения о модели XPDM, WDDM, Direct3D9Ex и Direct3D 10 см. [в статье интерфейсы API графики в Windows](../direct3darticles/graphics-apis-in-windows-vista.md).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Устройства Direct3D](direct3d-devices.md)
</dt> </dl>

 

 
