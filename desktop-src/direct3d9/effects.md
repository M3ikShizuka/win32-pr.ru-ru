---
description: Microsoft DirectX Effect позволяет интегрировать шейдеры вершин и пикселей с состоянием конвейера для отрисовки объектов. Эффекты — это следующий логический шаг в объединении шейдеров для создания уникальных условий рендеринга.
ms.assetid: vs|directx_sdk|~\effects.htm
title: Эффекты (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 59ed52a3a75f4b0682be4447f02ed305cf026af6aa30a59e921f4fa23f0e2211
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119985993"
---
# <a name="effects-direct3d-9"></a>Эффекты (Direct3D 9)

Microsoft DirectX Effect позволяет интегрировать шейдеры вершин и пикселей с состоянием конвейера для отрисовки объектов. Эффекты — это следующий логический шаг в объединении шейдеров для создания уникальных условий рендеринга.

Эффекты также предоставляют удобный способ создания шейдеров для различных версий оборудования. Поскольку различные видеоадаптеры поддерживают различные функциональные возможности, приложение может написать несколько методов, которые будут работать на различных устройствах. Таким образом, если приложение выполняется на новейшем и максимальном оборудовании, приложение может запустить самый сложный способ воздействия. С другой стороны, менее сложные методики эффектов могут быть автоматически выбраны для запуска на оборудовании с низким или меньшим объемом.

Результат может заменить обработку вершин и часть обработки пикселей, выполняемую графическим конвейером. Примером влияния, которое использует шейдер вершин и шейдер пикселей, является пример Басичлсл. Вы можете получить этот пример и узнать о нем из пакета SDK DirectX. Сведения о пакете SDK для DirectX см. в разделе [где находится пакет DirectX SDK?](../directx-sdk--august-2009-.md).

Дополнительные сведения о влиянии см. в следующих разделах:

-   [Запись результата](writing-an-effect.md)
-   [Использование действия](using-an-effect.md)

## <a name="effects-and-the-3d-pipeline"></a>Эффекты и трехмерный конвейер

На следующей схеме показан конвейер.

![Схема трехмерного конвейера](images/effects-block-diagram.png)

Конвейер преобразует входные данные в выходные Пиксели, которые заполняют буфер кадров. Входные данные поступают из объектов, которые состоят из вершин в пространстве объектов, или поверхностей более высокого порядка, созданные по N-исправлениям, обновлениям прямоугольников и исправлениям треугольников. После тесселяции входных данных конвейер выполняет обработку вершин, примитивную обработку и обработку пикселей перед созданием конечных цветов пикселей.

Обработка вершин и пикселей может осуществляться с помощью фиксированного конвейера функций или же может быть реализована с программируемыми шейдерами. Для управления тесселяцией входных данных, обработки примитивов и вывода данных используется состояние конвейера. Все это можно интегрировать в действие. Воздействие задает состояние, которое управляет процессом конвейера. Эффекты управляют программируемыми шейдерами, а также состоянием фиксированной функции.

Эффекты могут сохранять и восстанавливать состояние, открывая устройство в том же состоянии, что и до запуска эффекта. Ниже перечислены типы состояний, которыми может управлять действие.

-   Состояние шейдера. Это включает создание и удаление шейдеров, настройку констант шейдера, настройку состояния шейдера и отрисовку с помощью шейдеров.
-   Состояние текстуры и образца. Сюда входит указание файлов текстур, инициализация стадий текстуры, создание объектов выборки и Настройка состояния образца.
-   Другое состояние конвейера. Сюда входят состояния для настройки преобразований, освещения, материалов и параметров подготовки к просмотру. Это могут быть глобальные или локальные переменные. Переменные могут быть заданы либо самим действием, либо приложением.

Эффекты содержат несколько параметров отрисовки, называемых методами. Каждый прием инкапсулирует глобальные переменные, состояние конвейера, состояние текстуры и образца и состояние шейдера. В ходе подготовки к просмотру реализуется один стиль. Один или несколько проходов могут быть инкапсулированы в прием. Все проходы и методы можно проверить, чтобы определить, будет ли код действия выполняться на устройстве.

## <a name="effects-save-and-restore-state"></a>Результаты сохранения и восстановления состояния

Эффекты управляют состоянием. Слово State («состояние») используется очень широко, так как включает все виды информации, которые должны быть указаны в конвейере для указания условий рендеринга. Сюда входят почти все функциональные области конвейера.

Параметры отрисовки управляются методами и передаются. Приложение визуализирует результат, установив один активный метод и выполнив один или несколько проходов. Все отрисовки в результате выполняются в соответствующей паре [**Begin**](id3dxeffect--begin.md) и [**End**](id3dxeffect--end.md) Calls. При вызове **Begin** создается статеблокк и сохраняется состояние устройства (если не указано иное). После того как метод отрисовывает проходы, которые отображаются в приложении, вызывается **End** , чтобы завершить активный метод. Система влияния отвечает за счет автоматического восстановления состояния конвейера, которое было захвачено в блоке состояния (если вы не решили отключить эту функцию сохранения и восстановления).

При программировании многопроходных последовательностей отрисовки, каждая из которых требует настройки собственного состояния, эффекты могут уменьшить номер обслуживания, необходимый для отслеживания изменений состояния. Дополнительные сведения о состояниях, которые можно сохранить и восстановить с помощью эффектов, см. в разделе [состояния эффектов (Direct3D 9)](effect-states.md).

## <a name="effects-can-share-parameters"></a>Эффекты могут совместно использовать параметры

Параметры эффектов — это все нестатические переменные, объявленные в результате. Это могут быть глобальные переменные и заметки. Параметры эффектов могут совместно использоваться различными эффектами путем объявления параметров с помощью ключевого слова Shared и последующего создания эффекта с пулом эффектов.

Клонированные эффекты используют тот же пул эффектов, что и результат клонирования. При клонировании действия создается точная копия результата, включая глобальные переменные, методы, проходы и заметки.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Руководством по программированию для Direct3D 9](dx9-graphics-programming-guide.md)
</dt> </dl>

 

 
