---
description: Direct3D может накладывать на примитивы до восьми текстур за один проход.
ms.assetid: vs|directx_sdk|~\texture_blending.htm
title: Смешение текстур (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 688be4c80fb87d0d96f8f930ed85c9cc934fc4392151196ec0c510a4cbe482bb
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118291615"
---
# <a name="texture-blending-direct3d-9"></a>Смешение текстур (Direct3D 9)

Direct3D может накладывать на примитивы до восьми текстур за один проход. Использование множественного наложения текстур способно значительно увеличить частоту кадров приложения Direct3D. Приложения используют множественное наложение текстур для нанесения текстур, теней, зеркального освещения, рассеянного освещения и других специальных эффектов за один проход.

Чтобы использовать наложение текстур, приложению необходимо сначала проверить, поддерживает ли оно оборудованием пользователя. Эти сведения находятся в элементе Текстурекапс структуры [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) . Дополнительные сведения о том, как запросить оборудование пользователя для возможностей смешения текстур, см. в разделе [**IDirect3DDevice9:: жетдевицекапс**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getdevicecaps).

## <a name="texture-stages-and-the-texture-blending-cascade"></a>Этапы текстуры и смешение текстур

Direct3D поддерживает однопроходное наложение нескольких текстур посредством использования шагов текстурирования. Шаг текстурирования получает два аргумента и выполняет с ними операцию наложения, передавая результат для дальнейшей обработки или растеризации. Шаг текстурирования можно изобразить, как показано на следующем рисунке.

![Схема шага текстурирования](images/texstg.png)

Как показано на схеме выше, на шаге текстурирования происходит наложение двух аргументов с помощью определенного оператора. Среди типичных операций — простая модуляция или добавления цветовых или альфа-компонентов аргументов. При этом поддерживается более двух десятков операций. Аргументами для шага текстурирования могут являться связанные текстуры, обработанный цвет или альфа-канал (обработка происходит во время заливки Гуро), произвольный цвет и альфа-канал или результат предыдущего шага текстурирования. Дополнительные сведения см. в разделе [операции смешения текстур и аргументы (Direct3D 9)](texture-blending-operations-and-arguments.md).

> [!Note]  
> Direct3D отличает смешение цветов от альфа-смешения. Приложения задают операции и аргументы наложения цвета и альфа-канала по отдельности, и результаты этих параметров не зависят друг от друга.

 

Сочетание аргументов и операций, производимых в ходе различных этапов наложения, определяет простой язык наложения на основе потока. Результаты одного этапа перетекают на другой, потом на следующий и т. д. Концепцию перетекания результатов из одного этапа в другой перед конечной растеризацией на многоугольнике часто называют каскадом наложения текстур. На следующей схеме показано, как отдельные шаги текстурирования составляют каскад наложения текстур.

![схема шагов текстурирования в каскаде наложения текстур](images/tcascade.png)

Каждый шаг на устройстве имеет индекс с отчетом от нуля Direct3D поддерживает до восьми этапов наложения, однако следует всегда проверять возможности устройства, чтобы определить, сколько этапов поддерживает именно оно. Первый этап наложения имеет индекс 0, второй — 1 и т. д., вплоть до 7. Система накладывает этапы в порядке возрастания индекса.

Используйте только необходимое количество этапов; по умолчанию неиспользуемые этапы отключаются. Поэтому если приложение использует только первые два этапа, необходимо настроить операции и аргументы только для этапа 0 и 1. Система обрабатывает эти два этапа и игнорирует отключенные этапы.

> [!Note]  
> Если количество этапов в вашем приложении меняется в зависимости от ситуации, например если для некоторых объектов используется четыре этапа, а для других — только два, не нужно явно отключать все ранее использованные этапы. Можно отключить операцию цвета для первого неиспользуемого этапа, тогда все этапы с более высоким индексом применены не будут. Кроме того, можно полностью отключить сопоставление текстур, установив для первой стадии текстуры (этап 0) значение D3DTOP \_ disable. Третьим вариантом является то, что стадия текстуры имеет D3DTSS \_ COLORARG1, равную \_ ТЕКСТУРе D3DTA, а указатель текстуры для этапа — **null**, этот этап и все этапы после этого не обрабатываются.

 

Дополнительные сведения содержатся в следующих разделах.

-   [Операции и аргументы смешения текстур (Direct3D 9)](texture-blending-operations-and-arguments.md)
-   [Назначение текущих текстур (Direct3D 9)](assigning-the-current-textures.md)
-   [Создание стадий смешения (Direct3D 9)](creating-blending-stages.md)
-   [Смешение текстур альфа (Direct3D 9)](alpha-texture-blending.md)
-   [Многопроходное смешение текстур (Direct3D 9)](multipass-texture-blending.md)
-   [Светлое сопоставление с текстурами (Direct3D 9)](light-mapping-with-textures.md)

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Текстуры Direct3D](direct3d-textures.md)
</dt> </dl>

 

 
