---
description: В этом разделе описываются основные понятия преобразования представления и приводятся подробные сведения о настройке матрицы преобразования представления в приложении Direct3D.
ms.assetid: a9885a77-f04e-4ca5-9202-67c4779d03de
title: Преобразование представления (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 60cf933db7424b2c3aeb5aa7c06a37b03782eaa6
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104537583"
---
# <a name="view-transform-direct3d-9"></a>Преобразование представления (Direct3D 9)

В этом разделе описываются основные понятия преобразования представления и приводятся подробные сведения о настройке матрицы преобразования представления в приложении Direct3D.

Видовое преобразование определяет положение наблюдателя в мировом пространстве и обеспечивает преобразование вершин в пространство камеры. В пространстве камеры камера, или наблюдатель, находится в начале координат и смотрит в направлении положительной полуоси Z. Вспомним, что Direct3D использует левую систему координат, поэтому z является положительным в сцене. Видовая матрица переносит объекты в мировом пространстве относительно положения камеры — начала координат пространства камеры — и ориентации камеры.

Существует множество способов создания видовой матрицы. Во всех случаях камера имеет некоторые логическое положение и ориентацию в мировом пространстве, которые используются в качестве начальной точки для создания видовой матрицы, которая будет применяться к моделям в сцене. Видовая матрица параллельно переносит и поворачивает объекты, чтобы поместить их в пространство камеры, где камера находится в начале координат. Один из способов создания видовой матрицы — это сочетание матрицы параллельного переноса с матрицами поворота для каждой оси. При таком подходе применяется следующее общее матричное уравнение.

![уравнение видового преобразования](images/viewtran.png)

В этой формуле V — это создаваемая видовая матрица, T — матрица параллельного переноса, которая перемещает объекты в мире, а Rₓ – R<sub>z</sub> — матрицы поворота, которые поворачивают объекты вокруг осей X, Y и Z. Матрицы параллельного переноса и поворота основываются на логическом положении и ориентации камеры в мировом пространстве. Таким образом, если логическая координата камеры в мире <10, 20100>, целью матрицы перевода является перемещение объектов — 10 единиц вдоль оси x, 20 единиц вдоль оси y и-100 единиц вдоль оси z. Матрицы поворота в формуле основываются на ориентации камеры — на том, насколько оси пространства камеры повернуты по отношению к мировому пространству. Например, если упомянутая выше камера направлена прямо вниз, ее ось Z на 90 градусов (пи/2 радиана) повернута относительно оси Z мирового пространства, как показано на следующем рисунке.

![иллюстрация видового пространства камеры в сравнении с мировым пространством](images/camtop.png)

Матрицы поворота применяют повороты равной — но противоположной — величины к моделям в сцене. Видовая матрица для этой камеры предполагает поворот на –90 градусов вокруг оси X. Матрица поворота объединяется с параллельного переноса для создания видовой матрицы, которая корректирует положение и ориентацию объектов в сцене так, что их верх обращен к камере, создавая впечатление, что камера находится над моделью.

## <a name="setting-up-a-view-matrix"></a>Установка видовой матрицы

Вспомогательные функции [**D3DXMatrixLookAtLH**](d3dxmatrixlookatlh.md) и [**D3DXMatrixLookAtRH**](d3dxmatrixlookatrh.md) создают матрицу представления на основе расположения камеры и точки просмотра.

В следующем примере создается матрица представления для координат левой части.


```
D3DXMATRIX out;
D3DXVECTOR3 eye(2,3,3);
D3DXVECTOR3 at(0,0,0);
D3DXVECTOR3 up(0,1,0);
D3DXMatrixLookAtLH(&out, &eye, &at, &up);
```



Direct3D использует мировую матрицу и видовую матрицу для конфигурирования нескольких внутренних структур данных. Каждый раз, когда вы устанавливаете новую мировую или видовую матрицу, система пересчитывает соответствующие внутренние структуры. Частая установка этих матриц занимает много вычислительного времени. Свести к минимуму количество необходимых вычислений можно путем конкатенации мировой и видовой матриц в мировую-видовую матрицу, задать ее в качестве мировой матрицы, а затем установить видовую матрицу в единичную. Сохраняйте кэшированные копии отдельных мировых и видовых матриц, чтобы вы могли изменять, объединять и сбрасывать мировую матрицу по необходимости. Для ясности примеры редко используют эту оптимизацию.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Преобразования](transforms.md)
</dt> </dl>

 

 



