---
description: Для освещения объектов в сцене используются источники света.
ms.assetid: 0751bb76-611a-41c4-aab2-aa6f68b61b0e
title: Индикаторы и материалы (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9a5ace2a80bb79d192fadc5376256eedf9229be9a36fa1d200341ccf28e961fe
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119277524"
---
# <a name="lights-and-materials-direct3d-9"></a>Индикаторы и материалы (Direct3D 9)

Для освещения объектов в сцене используются источники света. Если освещение включено, Direct3D вычисляет цвет каждой вершины объекта на основе сочетания:

> [!Note]  
> Этот раздел предназначен только для конвейера с фиксированной функцией. Программируемые шейдеры выполняют все функции освещения явным образом.

 

-   Текущий цвет материала и пикселей текстуры в связанной текстурной карте.
-   Диффузные и отраженные цвета на вершине, если они заданы.
-   Цвет и интенсивность света, производимого источниками света в сцене, или уровень фонового освещения сцены.

При использовании освещения и материалов Direct3D вы разрешаете Direct3D обработку подробных сведений о освещения. Опытные пользователи могут при необходимости заниматься освещением самостоятельно.

Способ работы с освещением и материалами сильно влияет на внешний вид отрисованной сцены. Материалы определяют, как свет отражается от поверхности. Уровни прямого и фонового освещения определяют, какой свет отражается. Если освещение включено, для отрисовки сцены необходимо использовать материалы. Для отрисовки сцены источники света не требуются, но компоненты в сцене без освещения не видны. В лучшем случае отрисовка неосвещенной сцены приведет к отображению силуэтов объектов сцены. Такой уровень детализации недостаточен для большинства целей.

## <a name="direct-light-vs-ambient-light"></a>Прямой и внешний свет

Несмотря на то что объекты в сцене получают и прямое, и фоновое освещение, они не зависят друг от друга, они оказывают очень различное действие и требуют совершенно различных подходов в работе.

Прямой источник — это просто: Direct. Прямое освещение всегда имеет направление и цвет, и это является важным фактором для алгоритмов заливки, например для заливки Гуро. Различные типы источников света испускают прямой свет различными способами, создавая особые эффекты угасания. Вы создаете набор параметров освещения для прямого освещения, вызывая метод [**IDirect3DDevice9:: сетлигхт**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setlight) .

Фоновое освещение оказывает воздействие во всей сцене. Его можно представить как общий уровень освещения, который заполняет всю сцену независимо от объектов и их расположений в этой сцене. У фонового освещения нет расположения и направления, есть только цвет и интенсивность. Каждый источник света усиливает общее фоновое освещение сцены. Задайте уровень окружающей среды с помощью вызова метода [**IDirect3DDevice9:: сетрендерстате**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate) , указав в \_ качестве параметра *State* окружающую среду D3DRS и желаемый цвет RGBA в качестве параметра значения.

Цвет фонового освещения принимает форму значения RGBA, где каждый компонент является целым числом от 0 до 255. Это отличает его от большинства значений цвета в Direct3D.

Для создания значений RGBA можно использовать макрос [**D3DCOLOR \_ RGBA**](d3dcolor-rgba.md) . Красный, зеленый и синий компоненты сочетаются и создают окончательный цвет фонового освещения. Альфа-компонент определяет прозрачность цвета. При использовании аппаратного ускорения или эмуляции RGB альфа-компонент игнорируется.

## <a name="direct3d-light-model-vs-nature"></a>Модель Direct3D Light и природа

По своей природе, когда свет испускается источником, он отражается от сотен, если не тысяч или миллионов объектов, перед тем как достичь глаз пользователя. Каждый раз, когда свет отражается, какая-то его часть поглощается поверхностью, другая рассеивается в случайных направлениях, а оставшийся свет попадает на другую поверхность или попадает в глаза пользователя. Этот процесс продолжается, пока уровень освещения не ослабнет до нуля или до восприятия света пользователем.

Очевидно, что вычисления, необходимые для абсолютно точного моделирования естественного освещения слишком сложны, чтобы использовать их в графике Direct3D в режиме реального времени. Таким образом, учитывая скорость обработки данных, модель освещения Direct3D приблизительно моделирует освещение реального мира. Direct3D описывает свет с помощью красного, зеленого и синего компонентов, которые в сочетании образуют окончательный цвет.

В Direct3D, когда свет отражается от поверхности, его цвет взаимодействует согласно математическим алгоритмам с самой этой поверхностью и создает цвет, который в конечном итоге отображается на экране. Конкретные сведения об алгоритмах, используемых Direct3D, см. в разделе [математика освещения (Direct3D 9)](mathematics-of-lighting.md).

Модель освещения Direct3D разделяет свет на два типа: фоновое освещение и прямой свет. Каждому типу присущи различные характеристики, и каждый тип взаимодействует с материалом поверхности различными способами. Фоновое освещение — это свет, который был настолько рассеян, что его направление и источник невозможно определить: он проникает повсюду с низким уровнем интенсивности. Отраженный свет, используемый фотографами, является хорошим примером фонового освещения. Фоновое освещение в Direct3D, как и в природе, не имеет направления или источника, а имеет лишь цвет и интенсивность. На самом деле уровень фонового освещения совершенно независим от каких-либо объектов сцены, испускающих свет. Фоновое освещение не влияет на зеркальное отражение.

Прямой свет — это свет, созданный каким-либо источником в сцене, он всегда имеет цвет и интенсивность, а также распространяется в заданном направлении. Прямой свет взаимодействует с материалом поверхности и создает блики, а его направление используется в качестве коэффициента для алгоритмов заливки, включая заливку Гуро. При отражении прямого света он не влияет на уровень фонового освещения в сцене. Источники в сцене, создающие прямой свет, имеют различные характеристики, которые влияют на то, как они освещают сцену.

Кроме того, материал многоугольников имеет определенные свойства, которые влияют на то, как этот многоугольник отражает попадающий на него свет. Вы задаете одно свойство отражения, которое определяет, как этот материал отражает фоновый свет, а также задаете индивидуальные особенности, чтобы определить зеркальное и рассеивающее отражающие свойства материала. Дополнительные сведения см. в разделе [материалы (Direct3D 9)](materials.md).

## <a name="color-values-for-lights-and-materials"></a>Цветовые значения для источников света и материалов

Direct3D описывает цвет с точки зрения четырех компонентов — красного, зеленого, синего и альфа-, который сочетается для создания окончательного цвета. Структура C++ [**D3DCOLORVALUE**](d3dcolorvalue.md) определена как содержащая значения для каждого компонента. Каждый элемент — это значение с плавающей запятой, которое обычно находится в диапазоне от 0,0 до 1,0 включительно. Хотя оба индикатора и материала используют одну и ту же структуру для описания цвета, значения в структуре используются по-разному.

Значения цвета для источников света определяют количество излучаемого им света. Поскольку для источников света не используется альфа-компонент, для них имеют значение только красный, зеленый и синий компоненты цвета. Эти три компонента можно представить как линзы красного, зеленого и синего цвета на проекторе. Каждую линзу можно снять (значение 0,0 для соответствующего члена), также ее интенсивность может быть максимально яркой (значение 1,0) либо иметь значение где-то между двумя этими пределами. Цвета, проходящие через линзы, сочетаются и образуют окончательный цвет освещения. Сочетание R(1,0), G(1,0), B(1,0) создает белый свет, тогда как сочетание B(0,0), R(0,0), G(0.0) не производит света вообще. Вы можете сделать источник света, излучающий только один компонент, что приведет к образованию чисто красного, зеленого или синего освещения; также можно использовать сочетания компонентов, чтобы образовать такие цвета, как, например, желтый или сиреневый. Вы можете даже задать отрицательное значение цвета для создания «темного света», который на самом деле ослабляет освещение в сцене. Также можно задать компонентам значение больше 1,0 для создания очень яркого света.

С другой стороны, у материалов значения цвета определяют, насколько интенсивно световой компонент отражается от поверхности, которая отрисовывается с использованием этого материала. Материал, цветовые компоненты которого имеют значения R(1,0), G(1,0), B(1,0), A(1,0), отражает весь попадающий на него свет. В свою очередь материал со значениями R(0,0), G(1,0), B(0,0), A(1,0) отражает весь попадающий на него зеленый свет. Материалы имеют несколько значений отражающей способности для создания различных эффектов.

Дополнительные сведения содержатся в следующих [источниках: типы освещения (Direct3D 9)](light-types.md)и [Свойства освещения (Direct3D 9)](light-properties.md).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Начало работы](getting-started.md)
</dt> </dl>

 

 
