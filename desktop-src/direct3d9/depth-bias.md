---
description: Многоугольники, копланар в трехмерном пространстве, могут выглядеть так, как если бы они не копланар, путем добавления z-смещения к каждому из них.
ms.assetid: 0ab4f63b-49de-4bd0-a10f-6f90b9706c58
title: Смещение глубины (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9ce605ea1df161e5ebfed95c214c3dd180ab7ee6
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104494925"
---
# <a name="depth-bias-direct3d-9"></a>Смещение глубины (Direct3D 9)

Многоугольники, копланар в трехмерном пространстве, могут выглядеть так, как если бы они не копланар, путем добавления z-смещения к каждому из них. Это метод, который обычно используется для обеспечения правильного отображения теней в сцене. Например, тень на стене, скорее всего, будет иметь то же значение глубины, что и стенка. Если сначала отобразить стену, а затем тень, теневая копия может быть невидимой, а также могут быть видны артефакты глубины. Можно изменить порядок отрисовки объектов копланар в надеется, чтобы отменить действие, но артефакты глубины все еще вероятны.

Приложение может обеспечить правильное отображение многоугольников копланар, добавив сдвиг к значениям z, которые система использует при отрисовке наборов многоугольников копланар. Чтобы добавить сдвиг z к набору многоугольников, вызовите метод [**IDirect3DDevice9:: сетрендерстате**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate) непосредственно перед их отображением, установив для параметра *State* значение D3DRS \_ депсбиас, а параметр *value* — для подходящего значения float (например, подходящее значение может быть от-1,0 до 1,0); чтобы передать это значение в **Сетрендерстате**, необходимо также привести значение к типу **DWORD**. Более высокое значение z-смещения увеличивает вероятность того, что отображаемые многоугольники будут видны при отображении с другими копланар многоугольниками.


```
Offset = m * D3DRS_SLOPESCALEDEPTHBIAS + D3DRS_DEPTHBIAS
```



где m — это максимальная глубина глубины отображаемого треугольника.


```
m = max(abs(delta z / delta x), abs(delta z / delta y)) 
```



Единицы измерения для D3DRS \_ депсбиас и D3DRS \_ слопескаледепсбиас, зависят от того, включена ли z-буферизация или w-buffer. Приложение должно предоставить подходящие значения.

Этот сдвиг не применяется к какой-либо линии и примитиву точки. Однако этот сдвиг должен применяться к треугольникам, нарисованным в режиме каркаса.


```
// RenderStates
D3DRS_SLOPESCALEDEPTHBIAS, // Defaults to zero
D3DRS_DEPTHBIAS,           // Defaults to zero
```




```
// Caps
D3DPRASTERCAPS_DEPTHBIAS           
D3DPRASTERCAPS_SLOPESCALEDEPTHBIAS 
```



## <a name="related-topics"></a>См. также

<dl> <dt>

[Конвейер пикселей](pixel-pipeline.md)
</dt> </dl>

 

 
