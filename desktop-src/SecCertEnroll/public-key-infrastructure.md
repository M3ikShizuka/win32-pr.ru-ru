---
description: Шифрование с открытым ключом (также называемое шифрованием асимметричного ключа) использует пару ключей для шифрования и расшифровки содержимого.
ms.assetid: 93f65367-ca4b-4b44-9833-0653cfd3f3d3
title: Инфраструктура открытых ключей
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 09a306f227a3e39c32b7e0eef2dbf1dc4ae9d59942096fb71428339d8a166a04
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120101134"
---
# <a name="public-key-infrastructure"></a>Инфраструктура открытых ключей

Шифрование с открытым ключом (также называемое шифрованием асимметричного ключа) использует пару ключей для шифрования и расшифровки содержимого. Пара ключей состоит из одного открытого и одного закрытого ключа, которые математически связаны. Человек, который может безопасно взаимодействовать с другими пользователями, сможет распространять [*открытый ключ*](/windows/desktop/SecGloss/p-gly) , но должен хранить секрет [*закрытого ключа*](/windows/desktop/SecGloss/p-gly) . Содержимое, зашифрованное с помощью одного из ключей, можно расшифровать с помощью другого. Предположим, например, что Боб хочет отправить Алисе сообщение электронной почты. Это можно сделать следующим образом:

1.  У Боба и Алисы есть свои пары ключей. Они безопасно сохранили свои закрытые ключи и отправили их открытые ключи непосредственно друг другу.
2.  Боб использует открытый ключ Алисы для шифрования и отправки сообщения.
3.  Алиса использует свой закрытый ключ для расшифровки сообщения.

В этом упрощенном примере выделяется по крайней мере одна очевидная проблема: у Боба должен быть открытый ключ, который он использовал для шифрования сообщения. То есть он не знает, что ключ, который он использовал для шифрования, на самом деле принадлежит Алисе. Возможно, что другая сторона, отслеживающая коммуникационный канал между Бобом и Алисой, заменяла другой ключ.

Концепция инфраструктуры открытого ключа изменилась для помощи в устранении этой проблемы и других. Инфраструктура открытых ключей (PKI) состоит из программных и аппаратных элементов, которые доверенная третья сторона может использовать для установления целостности и принадлежности открытого ключа. Доверенная сторона, называемая [*центром сертификации*](/windows/desktop/SecGloss/c-gly) (CA), обычно выполняет эту задачу, выдавая подписанные (зашифрованные) двоичные сертификаты, подтверждающие подлинность субъекта сертификата, и привязывает удостоверение к открытому ключу, содержащемуся в сертификате. ЦС подписывает сертификат с помощью его закрытого ключа. Он выдает соответствующий открытый ключ всем заинтересованным сторонам в самозаверяющего сертификата ЦС. При использовании ЦС предыдущий пример можно изменить следующим образом:

1.  Предположим, что центр сертификации выдал подписанный цифровой сертификат, который содержит его открытый ключ. ЦС самостоятельно подписывает этот сертификат с помощью закрытого ключа, соответствующего открытому ключу в сертификате.
2.  Алиса и Боб согласны использовать ЦС для проверки своих удостоверений.
3.  Алиса запрашивает сертификат открытого ключа от ЦС.
4.  Центр сертификации проверяет свое удостоверение, выдает хэш содержимого, которое будет являться его сертификатом, подписывает хэш с помощью закрытого ключа, соответствующего открытому ключу в опубликованном сертификате ЦС, создает новый сертификат путем сцепления содержимого сертификата и подписанного хэша и делает новый сертификат общедоступным.
5.  Боб получает сертификат, расшифровывает подписанный хэш с помощью открытого ключа ЦС, вычисляет новый хэш содержимого сертификата и сравнивает эти два хэша. Если хэши совпадают, подпись проверяется, и Боб может предположить, что открытый ключ в сертификате действительно принадлежит Алисе.
6.  Боб использует проверенный открытый ключ Алисы для шифрования сообщения.
7.  Алиса использует свой закрытый ключ для расшифровки сообщения от Боба.

В целом процесс подписи сертификата позволяет Бобу проверить, что открытый ключ не был изменен или поврежден во время передачи. Перед выдачей сертификата центр сертификации хэширует содержимое, подписывает (шифрует) хэш с помощью собственного закрытого ключа и включает зашифрованный хэш в выданный сертификат. Боб проверяет содержимое сертификата, расшифровывать хэш с помощью открытого ключа ЦС, выполняя отдельный хэш содержимого сертификата и сравнивая два хэша. Если они совпадают, Боб может быть уверенным в том, что сертификат и открытый ключ, которые он содержит, не были изменены.

Типичная PKI состоит из следующих элементов.

| Элемент                            | Описание                                                                                                                                                                               |
|------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Центр сертификации<br/> | Выступает в качестве корня доверия в инфраструктуре открытого ключа и предоставляет службы для проверки подлинности удостоверений отдельных пользователей, компьютеров и других сущностей в сети.<br/>      |
| Центр регистрации<br/>  | Сертификат выдается корневым ЦС для выдаче сертификатов для конкретных применений, разрешенных корнем. В PKI Майкрософт центр регистрации (RA) обычно называется подчиненным ЦС.<br/> |
| База данных сертификатов<br/>    | Сохраняет запросы сертификатов, выданные и отозванные сертификаты и запросы сертификатов в центре сертификации или RA.<br/>                                                                       |
| Хранилище сертификатов<br/>       | Сохраняет выданные сертификаты и ожидающие или отклоненные запросы сертификатов на локальном компьютере.<br/>                                                                                  |
| Сервер архивирования ключей<br/>     | Сохраняет зашифрованные закрытые ключи в базе данных сертификатов для восстановления после потери.<br/>                                                                                              |



 

API регистрации сертификатов позволяет отправлять запросы на архивацию сертификатов и ключей в центры сертификации и регистрации и устанавливать выданный сертификат на локальный компьютер. Он не позволяет напрямую управлять базой данных сертификатов или хранилищем сертификатов.

В следующих разделах инфраструктура открытых ключей Майкрософт обсуждается более подробно:

-   [Сертификаты открытого ключа X. 509](about-x-509-public-key-certificates.md)
-   [Элементы PKI](about-pki-components.md)
-   [Модели доверия](about-trust-models.md)

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Сведения об API регистрации сертификатов](about-the-certificate-enrollment-api.md)
</dt> </dl>

 

