---
title: Обработка защищенного содержимого
description: Обработка защищенного содержимого
ms.assetid: f218d69e-ac80-43ba-be31-af3abf2b8de9
keywords:
- Windows Диспетчер устройств мультимедиа, сертификаты
- Диспетчер устройств, сертификаты
- Классические приложения, сертификаты
- поставщики услуг, сертификаты
- рекомендации по программированию, сертификаты
- certificates
- Windows Диспетчер устройств мультимедиа, поставщик защищенного содержимого (SCP)
- Диспетчер устройств, поставщик защищенного содержимого (SCP)
- Классические приложения, поставщик защищенного содержимого (SCP)
- поставщики услуг, защищенный поставщик содержимого (SCP)
- программное обеспечение, защищенный поставщик содержимого (SCP)
- Поставщик защищенного содержимого (SCP)
- SCP (поставщик защищенного содержимого)
- Windows Диспетчер устройств мультимедиа, содержимое, защищенное с использованием DRM
- Диспетчер устройств, содержимое, защищенное с использованием DRM
- Путеводитель по программированию, содержимое, защищенное с использованием DRM
- Классические приложения, содержимое, защищенное с использованием DRM
- поставщики услуг, содержимое, защищенное с использованием DRM
- Содержимое, защищенное DRM
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ddd0fb6ab155d08ed19eb84988709695f9ed63fd
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "126967850"
---
# <a name="handling-protected-content"></a>Обработка защищенного содержимого

если вы создаете приложение или поставщик службы, который будет использовать содержимое, защищенное с помощью Windows Media digital rights management (DRM), необходимо иметь пару ключ/сертификат, выданную корпорацией майкрософт. Сведения о том, как получить этот сертификат, см. в разделе [средства для разработки](tools-for-development.md). Если вы не собираетесь работать с защищенным содержимым, вы можете использовать фиктивный ключ и сертификат, предоставляемые с этим пакетом SDK, в файл с именем KEY. c.

для любого файла, защищенного технологией DRM, Windows Media диспетчер устройств требует наличия безопасного поставщика содержимого (SCP) для этого формата файлов. Корпорация Майкрософт предоставляет модуль SCP для файлов WMA и WMV. Если приложение или поставщик услуг будет обрабатывать содержимое другого формата, защищенное с помощью DRM, необходимо предоставить собственный модуль SCP. Модуль SCP — это COM-объект, который реализует все [интерфейсы для защиты поставщиков содержимого](interfaces-for-secure-content-providers.md).

приложение может отсылать содержимое, защищенное с помощью drm, на устройства, созданные на Windows Media drm 10 для переносных устройств или в portable device drm (пддрм). Однако можно создать только поставщика услуг для устройств, построенных на основе ПДДРМ; нельзя создать поставщик услуг для устройств, созданных на Windows Media DRM 10 для переносных устройств. Эти последние устройства могут использовать только поставщик услуг MTP, предоставленный корпорацией Майкрософт.

Устройства, созданные на ПДДРМ, могут поддерживать только лицензии на приобретенное содержимое. лицензии с условиями срока действия поддерживаются только устройствами, созданными на Windows Media DRM 10 для портативных устройств, имеющих особые требования, такие как безопасное время и индивидуальная организация. Windows Пакет SDK для Media DRM 10 для переносных устройств предоставляет подробные сведения о требованиях к устройствам для поддержки технологии версии 10.

Перед отправкой содержимого DRM на устройство приложение должно проверить несколько вещей:

-   Устройство поддерживает технологию DRM.
-   Какая версия поддерживаемой технологии DRM (версия 10 или более ранняя).
-   Если устройство построено на базе версии 10, все его компоненты будут обновлены (например, безопасное время и любые индивидуальные требования).

все вызовы методов, отвечающие на эти вопросы, выполняются клиентом и обрабатываются Windows Media диспетчер устройств и компонентом поставщика безопасного содержимого; поставщик услуг не обрабатывает ни один из этих вызовов.

если устройство не поддерживает Windows Media DRM 10 для портативных устройств, оно может по-прежнему иметь возможность использовать защищенное содержимое (в зависимости от лицензии на содержимое и структуры устройства), но любое содержимое, отправленное на него, будет иметь упрощенную лицензию на использование с ограниченными правами (например, без истечения срока действия).

-   Примеры, демонстрирующие, как приложение проверяет, может ли устройство обрабатывать защищенное содержимое и требуется ли обновлять его компоненты DRM, см. в разделе [Обработка защищенного содержимого в приложении](handling-protected-content-in-the-application.md).
-   Дополнительные сведения о создании поставщика услуг, который может обрабатывать защищенное содержимое, см. [в разделе Обработка защищенного содержимого в поставщике услуг](handling-protected-content-in-the-service-provider.md).

> [!Note]  
> многие Windows Media диспетчер устройств передачи файлов или права, запрашивающие методы, завершатся сбоем (часто с mysterious значением **HRESULT** ) при обработке файлов, защищенных с помощью DRM, с подключенным отладчиком. таким образом, для отладки кода необходимо использовать альтернативные способы, такие как запись выходных данных в Windowsную форму или файл журнала. Дополнительные сведения о параметрах ведения журнала см. в разделе [Включение ведения журнала](enabling-logging.md). При запуске отладчика для защищенного содержимого метод возвращает один из кодов ошибок, перечисленных в разделе DRM [коды ошибок](error-codes.md)или, возможно, неизвестный код ошибки. Если при запуске отладчика в защищенном содержимом или методе вы получаете значения **HRESULT** Mysterious, это может быть вызвано защитой DRM.

 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**Инструкции по программированию**](programming-guide.md)
</dt> </dl>

 

 




