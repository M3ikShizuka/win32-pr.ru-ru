---
title: Создание списка воспроизведения на устройстве
description: Создание списка воспроизведения на устройстве
ms.assetid: 9f803e1a-ff33-443a-9448-e8c875d77e51
keywords:
- Windows Диспетчер устройств мультимедиа, списки воспроизведения
- Диспетчер устройств, списки воспроизведения
- рекомендации по программированию, списки воспроизведения
- Классические приложения, списки воспроизведения
- создание Windows мультимедиа диспетчер устройств приложений, списков воспроизведения
- Абстрактные списки воспроизведения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d4a61d45c234f1cdbe03a713e4d10568fa45c83bdd90227b815c85b0f544d2a9
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118585867"
---
# <a name="creating-a-playlist-on-the-device"></a>Создание списка воспроизведения на устройстве

пакет SDK для Windows Media диспетчер устройств предоставляет средства для создания списка воспроизведения на устройстве с помощью приложения MTP. Этот тип списка воспроизведения называется *абстрактным* списком воспроизведения, так как файл, созданный на устройстве, не содержит данных мультимедиа, а только метаданные, которые содержат ссылки на файлы мультимедиа в списке воспроизведения.

Другие абстрактные элементы, которые можно создать на устройстве, включают альбомы (по сути, списки воспроизведения с дополнительными свойствами, такими как изображение обложки), контакты и сообщения.

**Создание списка воспроизведения**

1.  Получите интерфейс [**IWMDMDevice3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmdevice3) для целевого устройства.
2.  Вызовите [**IWMDMDevice3:: Property**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice3-getproperty) , чтобы получить \_ свойство g всзвмдмформатссуппортед.
3.  Если форматы списка воспроизведения не поддерживаются, запретите отправку списков воспроизведения на устройство и пропустите следующие шаги. В противном случае выберите код формата, поддерживаемый устройством, который соответствует наиболее близкому типу объекта. \_ \_ \_ Наиболее часто поддерживаются коды формата универсальных вмдм ФОРМАТКОДЕ абстрактаудиовидеоплайлист и вмдм форматкоде \_ абстрактаудиолайлист.
4.  Получите интерфейс [**IWMDMStorage3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage3) для хранилища (корневой каталог или папку), в котором нужно создать объект. Некоторые устройства работают лучше, если объект списка воспроизведения размещается в папке верхнего уровня с именем "списки воспроизведения".
5.  Создайте пустой объект метаданных с помощью [**IWMDMStorage3:: креатимптиметадатаобжект**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage3-createemptymetadataobject).
6.  Используя интерфейс **ивмдмметадата** , полученный на предыдущем шаге, вызовите [**Ивмдмметадата:: AddItem**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmmetadata-additem) , чтобы добавить выбранный код формата (из шага 3) в свойства метаданных хранилища.
7.  Получите интерфейс [**IWMDMStorageControl3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstoragecontrol3) из интерфейса **IWMDMStorage3** .
8.  Вызовите [**IWMDMStorageControl3:: Insert3**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol3-insert3) , чтобы вставить новый файл списка воспроизведения в выбранное хранилище. Этот файл содержит метаданные, представленные интерфейсом **ивмдмметадата** , созданным на шаге 5 и передаваемым в **Insert3**. Метод возвращает интерфейс **ивмдмстораже** для файла списка воспроизведения. Вы можете запросить интерфейс [**IWMDMStorage4**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage4) .
9.  Вызовите [**IWMDMStorage4:: сетреференцес**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage4-setreferences) , чтобы создать ссылки на интерфейсы **ивмдмстораже** файлов мультимедиа в списке воспроизведения.

Пример кода см. в описании \_ функции онкреатеплайлист в [примере классического приложения](sample-desktop-application.md).

> [!Note]  
> Поставщик услуг MTP, предоставляемый корпорацией Майкрософт, позволяет приложению задавать ссылки в метаданных. Чтобы реализовать списки воспроизведения, приложение должно взаимодействовать с устройством MTP или использовать пользовательский поставщик услуг, который может обрабатывать абстрактные объекты. Поставщик служб CE обрабатывает списки воспроизведения и объекты альбома.

 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**Запись файлов на устройство**](writing-files-to-the-device.md)
</dt> </dl>

 

 




