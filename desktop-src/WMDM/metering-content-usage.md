---
title: Использование содержимого измерения
description: Использование содержимого измерения
ms.assetid: f87b5d95-a497-4356-817f-49ac3819df08
keywords:
- Диспетчер устройств Windows Media, использование содержимого измерения
- Диспетчер устройств, использование содержимого измерения
- программное содержимое, отслеживание использования содержимого
- Классические приложения, использование содержимого с учетом измерений
- Создание приложений диспетчер устройств Windows Media, использование содержимого измерения
- использование содержимого измерения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 649eee810e7bbdbc2ea93a32c6368ec345fa7364
ms.sourcegitcommit: 773fa6257ead6c74154ad3cf46d21e49adc900aa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/09/2020
ms.locfileid: "105691701"
---
# <a name="metering-content-usage"></a>Использование содержимого измерения

С помощью технологии Windows Media 10 теперь можно отслеживать использование содержимого на портативном устройстве. Если лицензия Windows Media 10 разрешает измерение, устройство может сохранять число воспроизводимых композиций и передавать их на издатель лицензий через Интернет. Эта система позволяет поставщикам содержимого настраивать свою оплату за счет точного измерения использования содержимого.

Для отслеживания содержимого приложение должно иметь сертификат отслеживания, предоставленный службой лицензирования, созданной на основе пакета SDK Windows Media Rights Manager 10. Измерение можно отслеживать только для содержимого, лицензированного этой же службой. Дополнительные сведения о том, как работает измерение, и о том, как создать службу контроля использования лицензий, см. в [документации по пакету SDK Windows Media Rights Manager](/previous-versions/ms986509(v=msdn.10)) на сайте MSDN. Пакет SDK можно получить, заполнив необходимые сведения на [странице Лицензирование Windows Media](https://www.microsoft.com/licensing/default).

В приложении может быть встроено измерение, или можно создать подключаемый модуль COM для существующего приложения, например проигрыватель Windows Media, если приложение принимает подключаемые модули измерения.

Приложение должно предупредить пользователей о том, что будет использоваться измерение использования содержимого. Дополнительные сведения см. на веб-страницах Майкрософт, перечисленных в заявлении [о конфиденциальности](privacy-statement.md).

Получение данных метрик с устройства может быть слишком высокой. Таким образом, если использование измеряется приложением, оно будет часто выполняться для предотвращения накопления больших объемов данных на устройстве и снижения скорости передачи данных. Чтобы предотвратить передачу данных, которые будут слишком замедляться, производители устройств могут отсылать подмножества доступных данных о метриках. Приложение должно отслеживать флаги, полученные с помощью [**ивмдрмдевицеапп::P роцессметерреспонсе**](iwmdrmdeviceapp-processmeterresponse.md) , чтобы узнать, остались ли на устройстве все больше данных отслеживания использования.

Ниже показано, как приложение может использовать содержимое для отслеживания использования содержимого.

1.  Так как измерение доступно только на устройствах, поддерживающих Windows Media DRM 10 для переносных устройств, приложение должно в некоторый момент вызвать **куеридевицестатус**, как описано в разделе [Обработка защищенного содержимого в приложении](handling-protected-content-in-the-application.md), чтобы убедиться, что устройство является действительным и актуальным.
2.  Запрос сведений о метриках с устройства путем вызова [**ивмдрмдевицеапп:: женератеметерчалленже**](iwmdrmdeviceapp-generatemeterchallenge.md).
3.  Отправьте полученные данные о метриках в службу измерения по URL-адресу, полученному с помощью **женератеметерчалленже**. Формат данных, отправляемых в службу, зависит от сценария для этой службы. Например, некоторые службы могут потребовать, чтобы данные отправлялись в качестве команды POST в виде пары "имя-значение". Поставщик услуг должен сообщить о конкретных требованиях к форматированию.
4.  Получите ответ от службы контроля использования и отправьте его на устройство, вызвав [**ивмдрмдевицеапп::P роцессметерреспонсе**](iwmdrmdeviceapp-processmeterresponse.md). Это заставляет устройство сбрасывать счетчики воспроизведения, а также возвращает значение, указывающее, существуют ли на устройстве больше данных отслеживания использования, которые необходимо получить, вызвав **женератеметерчалленже** еще раз.

Подробные сведения и примеры кода для измерения см. на [веб-сайте Windows Media](/previous-versions//bb614723(v=vs.85)).

 

 