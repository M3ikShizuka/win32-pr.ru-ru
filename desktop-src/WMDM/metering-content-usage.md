---
title: Использование содержимого измерения
description: Использование содержимого измерения
ms.assetid: f87b5d95-a497-4356-817f-49ac3819df08
keywords:
- Windows Диспетчер устройств мультимедиа, использование содержимого измерения
- Диспетчер устройств, использование содержимого измерения
- программное содержимое, отслеживание использования содержимого
- Классические приложения, использование содержимого с учетом измерений
- создание Windows мультимедиа диспетчер устройств приложений, использование содержимого измерения
- использование содержимого измерения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 029bae2bcdd69f9dc58c4a64317f974538c672b1d27597fbdc1915074aff0278
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119957204"
---
# <a name="metering-content-usage"></a>Использование содержимого измерения

используя технологию Windows Media 10, вы теперь можете отслеживать использование содержимого на портативном устройстве. если лицензия Windows Media 10 допускает измерение, устройство может сохранить число воспроизведений песен и передать их на издатель лицензий через интернет. Эта система позволяет поставщикам содержимого настраивать свою оплату за счет точного измерения использования содержимого.

для отслеживания содержимого приложение должно иметь сертификат отслеживания, предоставленный службой лицензирования, созданной на основе пакета SDK для Windows Media Rights Manager 10. Измерение можно отслеживать только для содержимого, лицензированного этой же службой. дополнительные сведения о том, как работает измерение, и о том, как создать службу контроля использования лицензий, см. в [документации по пакету SDK Windows Media Rights Manager](/previous-versions/ms986509(v=msdn.10)) на сайте MSDN. пакет SDK можно получить, заполнив необходимые сведения на [странице лицензирования Windows мультимедиа](https://www.microsoft.com/licensing/default).

в приложении может быть встроено измерение, или можно создать подключаемый модуль COM для существующего приложения, например проигрыватель Windows Media, если приложение принимает подключаемые модули измерения.

Приложение должно предупредить пользователей о том, что будет использоваться измерение использования содержимого. Дополнительные сведения см. на веб-страницах Майкрософт, перечисленных в заявлении [о конфиденциальности](privacy-statement.md).

Получение данных метрик с устройства может быть слишком высокой. Таким образом, если использование измеряется приложением, оно будет часто выполняться для предотвращения накопления больших объемов данных на устройстве и снижения скорости передачи данных. Чтобы предотвратить передачу данных, которые будут слишком замедляться, производители устройств могут отсылать подмножества доступных данных о метриках. Приложение должно отслеживать флаги, полученные с помощью [**ивмдрмдевицеапп::P роцессметерреспонсе**](iwmdrmdeviceapp-processmeterresponse.md) , чтобы узнать, остались ли на устройстве все больше данных отслеживания использования.

Ниже показано, как приложение может использовать содержимое для отслеживания использования содержимого.

1.  так как измерение доступно только на устройствах, поддерживающих Windows Media DRM 10 для портативных устройств, приложение должно в некоторый момент вызвать **куеридевицестатус**, как описано в разделе [обработка защищенного содержимого в приложении](handling-protected-content-in-the-application.md), чтобы убедиться, что устройство является действительным и актуальным.
2.  Запрос сведений о метриках с устройства путем вызова [**ивмдрмдевицеапп:: женератеметерчалленже**](iwmdrmdeviceapp-generatemeterchallenge.md).
3.  Отправьте полученные данные о метриках в службу измерения по URL-адресу, полученному с помощью **женератеметерчалленже**. Формат данных, отправляемых в службу, зависит от сценария для этой службы. Например, некоторые службы могут потребовать, чтобы данные отправлялись в качестве команды POST в виде пары "имя-значение". Поставщик услуг должен сообщить о конкретных требованиях к форматированию.
4.  Получите ответ от службы контроля использования и отправьте его на устройство, вызвав [**ивмдрмдевицеапп::P роцессметерреспонсе**](iwmdrmdeviceapp-processmeterresponse.md). Это заставляет устройство сбрасывать счетчики воспроизведения, а также возвращает значение, указывающее, существуют ли на устройстве больше данных отслеживания использования, которые необходимо получить, вызвав **женератеметерчалленже** еще раз.

подробные сведения и примеры кода для измерения см. на [веб-сайте Windows Media](/previous-versions//bb614723(v=vs.85)).

 

 