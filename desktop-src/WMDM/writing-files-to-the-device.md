---
title: Запись файлов на устройство
description: Запись файлов на устройство
ms.assetid: 66eaed16-032b-4ac0-a768-aded80f10255
keywords:
- Диспетчер устройств Windows Media, запись файлов на устройства
- Диспетчер устройств, запись файлов на устройства
- руководства по программированию, запись файлов на устройства
- Классические приложения, запись файлов на устройства
- Создание приложений диспетчер устройств Windows Media, запись файлов на устройства
- запись файлов на устройства, о
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 62d8b5234cc275eed1b4aa344c16a2b927b8122d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104531886"
---
# <a name="writing-files-to-the-device"></a>Запись файлов на устройство

Перед отправкой файла на устройство приложение должно выяснить, какие типы файлов и форматы могут обрабатываться устройством, чтобы приложение могла определить, должен ли файл быть перекодирован перед отправкой или отправкой неизмененных или вообще не отправляться.

В следующих шагах показано, как отправить существующий файл на устройство. Сведения о создании нового файла на устройстве, например списка воспроизведения, см. в разделе [Создание списка воспроизведения на устройстве](creating-a-playlist-on-the-device.md).

1.  Получите формат файла, который планируется отправить на устройство. Дополнительные сведения см. [в разделе Обнаружение формата файла](discovering-a-files-format.md).
2.  Если устройство предназначено для воспроизведения файла,
    -   Запросите у файла возможности его форматирования. Дополнительные сведения см. в разделе [Обнаружение возможностей форматирования устройств](discovering-device-format-capabilities.md).
    -   Найдите допустимый формат, который приложение может создать из исходного файла.
    -   Если файл необходимо перекодировать, перекодировать его.
3.  Найти родительское хранилище для нового объекта. Диспетчер устройств Windows Media не предоставляет способ обнаружения стандартного расположения хранилища для определенных типов файлов (видео-или звуковых файлов, WMV или BMP, папки "Избранное" и т. д.), поэтому необходимо изучить каждое устройство, чтобы выяснить, где лучше всего хранить новый объект. (В других приложениях применяется определенная структура папок, например проигрыватель Windows Media создает альбомы, списки воспроизведения и музыкальные папки, в которых папка Music содержит исполнителя и Албумнаме иерархии. По этой причине, так как некоторые устройства могут не проверяться с помощью программного обеспечения, отличного от проигрывателя Windows Media, следует помнить, что размещение списков воспроизведения или объектов альбома в любой папке, кроме списков воспроизведения или альбомов, иногда может привести к неработоспособности объектов на некоторых устройствах.)
4.  Если целевое хранилище поддерживает [**IWMDMStorageControl3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstoragecontrol3), создайте новый интерфейс метаданных, вызвав [**IWMDMStorage3:: креатимптиметадатаобжект**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage3-createemptymetadataobject). Задайте метаданные в интерфейсе [**ивмдмметадата**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmmetadata) . Дополнительные сведения см. [в разделе Установка метаданных для файла](setting-metadata-on-a-file.md). Единственными обязательными метаданными являются g \_ всзвмдмформаткоде (значение [**вмдм \_ форматкоде**](wmdm-formatcode.md) , описывающее содержимое), но чем больше метаданных вы можете предоставить, тем эффективнее будет перемещение для поставщика услуг.
5.  Отправьте файл на устройство с помощью метода [**INSERT**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol-insert), [**Insert2**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol2-insert2)или [**Insert3**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol3-insert3) . **Insert3** позволяет включить метаданные на устройстве как часть метода. Дополнительные сведения см. в разделе [Отправка файла на устройство](sending-the-file-to-the-device.md).

Код, демонстрирующий каждое из этих действий, приведен на страницах связанных разделов.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Создание приложения диспетчер устройств Windows Media**](creating-a-windows-media-device-manager-application.md)
</dt> </dl>

 

 




