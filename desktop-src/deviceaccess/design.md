---
title: Рекомендации по проектированию для пользовательских устройств
description: В этом разделе описаны рекомендации по проектированию, которые помогут определить, требуется ли устройству пользовательский драйвер.
ms.assetid: 8AADE304-4841-41E2-968B-DFCB5B954FF1
ms.topic: article
ms.date: 02/11/2020
ms.openlocfilehash: f503ae556009f3b4b9b88d9f895936218f402fc6
ms.sourcegitcommit: 3d718d8f69d3f86eaecf94c5705d761c5a9ef4a1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/20/2020
ms.locfileid: "103797190"
---
# <a name="design-considerations-for-custom-devices"></a>Рекомендации по проектированию для пользовательских устройств

В этом разделе описаны рекомендации по проектированию, которые помогут определить, требуется ли устройству пользовательский драйвер.

- [Определение типа драйвера для реализации](#determining-the-type-of-driver-to-implement)
- [Вопросы безопасности](#security-considerations)
- [Связанные темы](#related-topics)

## <a name="determining-the-type-of-driver-to-implement"></a>Определение типа драйвера для реализации

В этой таблице описывается, когда необходимо разработать пользовательский драйвер для устройства и взаимодействовать с ним с помощью API доступа к устройству, а также когда следует использовать указанные в Windows стеки устройств.

| Для поддержки | Реализация |
|:---|:---|
| Хорошо известные устройства, включая: <ul><li>Sensor</li><li>Расположение</li><li>Веб-камера</li><li>Близость</li><li>Служба коротких сообщений (SMS)</li><li>Широкополосное мобильное подключение</li></ul><br/> | Для многих типов известных устройств не требуется пользовательский драйвер, так как в Windows есть интерфейсы API и расширения классов (ДДИС), управляющие взаимодействием между драйвером и Windows. Устройства датчиков, расположения и портативных устройств Windows (WPD) являются примерами классов устройств, которые поддерживают эту поддержку. Если вы создаете драйвер, который использует один из этих ДДИС, предоставляемых Windows для отправки и получения данных и команд, нет необходимости использовать API доступа к устройству в приложении Магазина Windows для доступа к компоненту Broker или отправки управляющих кодов ввода-вывода непосредственно в драйвер. <br/> Когда приложение Магазина Windows запрашивает доступ к известному устройству с помощью среда выполнения Windows API для своего класса устройств, Windows 8 будет управлять доступом к устройству на основе типа устройства. Приложения всегда получают доступ к некоторым известным типам устройств (например, акселерометров), которые не раскрывают персональные данные. Другие типы хорошо известных устройств должны быть объявлены в манифесте приложения, прежде чем приложение сможет получить к ним доступ. Пользователь должен предоставить приложению разрешение на доступ к устройствам, которые раскрывают конфиденциальную информацию, например расположение, веб-камеру и микрофон, или могут изменять деньги пользователя, например устройства мобильной широкополосной связи. <br/> |
| Устройство типа WPD, которое реализует службы MTP.<br/> | Вы можете использовать драйвер класса MTP или создать драйвер с помощью DDI для WPD.<br/> Windows 8 поддерживает службы устройств MTP. Приложение может использовать для доступа к устройству интерфейс API [Windows. Devices. portable](/uwp/api/Windows.Devices.Portable) среда выполнения Windows, API-интерфейс переносимых устройств (com) или компонент автоматизации WPD. Приложению не требуется использовать API доступа к устройству.<br/> |
| Устройство, которое не имеет предоставляемого Windows расширения класса или драйвера класса.<br/>  | В этом случае просмотрите [приложения устройства UWP для внутренних устройств](/windows-hardware/drivers/devapps/uwp-device-apps-for-specialized-devices) для специализированных устройств, чтобы определить, нужно ли реализовать пользовательский доступ к драйверу с помощью API доступа к устройству.<br/> |

## <a name="security-considerations"></a>Вопросы безопасности

В следующих статьях содержатся рекомендации по написанию безопасного кода C++:

- [Рекомендации по обеспечению безопасности для C++](/cpp/security/security-best-practices-for-cpp)
- [Patterns & рекомендации по безопасности для приложений]/Previous-Versions/MSP-n-p/ff650760 (v = пандп. 10))

## <a name="related-topics"></a>Связанные темы

[Пример пользовательского доступа к драйверу](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/411c271e537727d737a53fa2cbe99eaecac00cc0/Official%20Windows%20Platform%20Sample/Custom%20driver%20access%20sample), [приложения для устройств UWP для внутренних устройств](/windows-hardware/drivers/devapps/uwp-device-apps-for-specialized-devices), [центр разработки оборудования](/windows-hardware/drivers/)
