---
description: в Windows Vista счетчики производительности реализовали новую архитектуру (версия 2,0) для предоставления данных счетчиков.
ms.assetid: c17eda2f-3cf8-40d6-8be6-c1ce190d1a26
title: Предоставление данных счетчиков
ms.topic: article
ms.date: 08/17/2020
ms.openlocfilehash: 0a17a6c75a86a7ee86f26350b9ea7680f0ba08338dbe7dc18cd56a8c425ba3ba
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117793627"
---
# <a name="providing-counter-data"></a>Предоставление данных счетчиков

программные компоненты, которые публикуют данные с помощью счетчиков производительности Windows, называются поставщиками данных производительности.

Windows поддерживает два типа поставщиков данных о производительности. Устаревшие поставщики данных о производительности (**v1**) реализуются с помощью файла .INI и библиотеки DLL производительности. Современные поставщики данных производительности (**поставщики v2**) используют. MAN (XML manifest) и API поставщика счетчика производительности.

## <a name="manifests"></a>Манифесты

Современные поставщики данных производительности используют. MAN (XML manifest) для определения данных счетчика и использования API поставщика счетчиков производительности для управления данными в контексте поставщика.

Поставщики, реализованные с использованием манифеста и API поставщика счетчиков производительности, часто называются **поставщиками версии 2**.

Windows поддерживает поставщики пользовательского режима V2 в Windows Vista или более поздней версии. Сведения о пользовательском режиме см. в разделе [предоставление данных счетчиков с помощью версии 2,0](providing-counter-data-using-version-2-0.md).

Windows поддерживает поставщики в режиме ядра V2 на Windows 7 или более поздней версии. Сведения о режиме ядра см. в разделе [мониторинг производительности в режиме ядра](/windows-hardware/drivers/devtest/kernel-mode-performance-monitoring).

## <a name="performance-dll-deprecated"></a>Библиотека DLL производительности (не рекомендуется)

В архитектуре устаревших счетчиков производительности поставщики реализовали библиотеку DLL производительности, которая выполнялась в процессе потребителя для получения и предоставления данных счетчиков, когда потребитель запросил его. Поставщик использовал файл инициализации (.INI) и записи реестра для определения счетчиков и настройки библиотеки производительности.

Поставщики, реализованные с помощью файла .INI и библиотеки DLL производительности, часто называются **поставщиками v1**.

> [!CAUTION]
> Хотя вы по-прежнему можете использовать библиотеку DLL производительности для предоставления данных счетчиков, эта архитектура устарела из-за существенных ограничений производительности и надежности. Кроме того, поставщики v1 часто сложнее реализовать, поскольку им требуется доставка отдельной библиотеки DLL, которая должна выполняться в процессе потребителя.

Дополнительные сведения см. [в разделе Предоставление данных счетчика с помощью библиотеки DLL производительности](providing-counter-data-using-a-performance-dll.md).
