---
description: Объект производительности — это сущность, для которой доступны данные о производительности.
ms.assetid: 97b9c9ec-e758-4928-b3fa-90d220bca5fb
title: Проектирование объектов и счетчиков
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cb925c30fa285e3517d8d2ad777b12e60dc9c3cdb1fbd524974150c867a5e6ad
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119143987"
---
# <a name="object-and-counter-design"></a>Проектирование объектов и счетчиков

Объект производительности — это сущность, для которой доступны данные о производительности. Счетчики производительности определяют тип данных, доступных для объекта производительности. Приложение может предоставлять сведения для нескольких объектов производительности. Объекты производительности могут содержать счетчики одного экземпляра или несколько экземпляров. Один объект экземпляра возвращает один набор значений счетчика.

Объект с несколькими экземплярами возвращает экземпляр объекта для каждого вхождения объекта, который контролируется приложением. Например, приложение SCSI может определить объект Drive с двумя счетчиками, например считанные байты и записанные байты. Когда потребитель запрашивает объект, Библиотека DLL производительности возвращает экземпляр объекта для каждого диска, который управляется приложением.

После принятия решения о том, поддерживает ли объект один экземпляр или несколько экземпляров, необходимо выбрать тип счетчиков, которые должен предоставить объект. Например, можно указать значения счетчиков, которые отображаются как необработанные значения, как тарифы или как проценты.

список предопределенных типов счетчиков, которые следует выбрать, см. в разделе типы счетчиков раздела [Windows Server 2003 Deployment Kit](/previous-versions/windows/it-pro/windows-server-2003/cc776490(v=ws.10)). В зависимости от типа счетчика можно просто предоставить необработанные данные или указать сведения о времени и частоте, а также дополнительные данные счетчика, используемые потребителем для вычисления воспроизводимого значения.

Метод, используемый для получения данных, может быть простым увеличением счетчика каждый раз, когда вызывается конкретная подкоманда в приложении, или может затрагивать длительные вычисления. Счетчики и таймеры должны увеличиваться и никогда не очищаться. Счетчики могут переноситься в оболочку при условии, что они не переносятся дважды между выборке потребителем. Приложение может сохранять и хранить данные в течение обычного выполнения, если оно не влияет на его производительность.

Для некоторых типов данных может быть более эффективным или уместным выполнять накопление данных по запросу. В этом случае библиотека DLL производительности должна взаимодействовать с приложением о том, что запрошены данные. Для данных, которые требуется собирать (с точки зрения загруженности процессора или использования памяти), рекомендуется собирать данные только в том случае, если потребитель запрашивает **дорогостоящие** данные. Это позволяет потребителю выполнять регулярный запрос данных для всех счетчиков, которые не являются дорогостоящими. Данные могут быть запрошены только при необходимости. Средство производительности не выполняет накопления **дорогостоящих** данных.

 

 
