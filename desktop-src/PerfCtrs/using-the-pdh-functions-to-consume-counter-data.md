---
description: Для получения данных о производительности используются функции PDH.
ms.assetid: 2510480e-cfea-4f7c-af0b-6d229c150c91
title: Использование функций PDH для использования данных счетчика
ms.topic: article
ms.date: 08/17/2020
ms.openlocfilehash: 6c506e3c7a73a94a6bc3c282920e17504e28dedb42e0e3bee8a6f05a1e77ebbc
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120033194"
---
# <a name="using-the-pdh-functions-to-consume-counter-data"></a>Использование функций PDH для использования данных счетчика

Используйте функции PDH для получения данных о производительности. Функции PDH проще в использовании, чем [функции реестра](using-the-registry-functions-to-consume-counter-data.md) , и могут использоваться для доступа к данным счетчика для поставщиков v1 и v2. PDH имеет API-интерфейсы для сбора текущих данных о производительности, сохранения данных производительности в файлах журнала и чтения данных из файлов журнала.

> [!Note]
> при написании Windows OneCore приложений нельзя использовать функции абстрагирования вспомогательного метода для данных производительности. Вместо этого используйте [функции-потребители версии PerfLib v2](using-the-perflib-functions-to-consume-counter-data.md).

PDH — это высокоуровневый API, упрощающий сбор данных счетчиков производительности. Она помогает выполнять синтаксический анализ запросов, кэширование метаданных, сопоставление экземпляров между примерами, вычисление форматированных значений из необработанных значений, чтение данных из файлов журнала и сохранение данных в файлах журнала. PDH автоматически использует [функции реестра](using-the-registry-functions-to-consume-counter-data.md) при сборе данных от **поставщиков v1** и использует [функции потребителя v2](using-the-perflib-functions-to-consume-counter-data.md) при сборе данных от **поставщиков v2**.

Чтобы получить данные о производительности с помощью функций PDH, выполните следующие действия.

1. [Создание запроса](creating-a-query.md)
2. [Добавление счетчиков в запрос](creating-a-query.md)
3. [Получение данных о производительности](collecting-performance-data.md)
4. [Отображение данных о производительности](displaying-performance-data.md)
5. [Закрытие запроса](creating-a-query.md)

Данные производительности можно собираются из источников или файлов журналов в режиме реального времени. Дополнительные сведения о записи данных о производительности в файлы журналов см. в разделе [Работа с файлами журналов](working-with-log-files.md).

## <a name="see-also"></a>См. также

- [Сбор данных о производительности](collecting-performance-data.md)
- [Просмотр счетчиков](browsing-counters.md)
- [Проверка возвращаемых значений интерфейса PDH](checking-pdh-interface-return-values.md)
- [Примеры](examples.md)
