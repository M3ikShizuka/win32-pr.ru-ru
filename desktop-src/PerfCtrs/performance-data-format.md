---
description: Формат данных, извлекаемых функцией процедура RegQueryValueEx, начинается с структуры заголовков фиксированной длины, \_ блока данных PERF \_ .
ms.assetid: a68fa617-834c-4ad9-b922-fac3a648ad75
title: Формат данных производительности
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6ea20d0cc0be6174fdd945c4bf956d7df60a067cd9f20b3d08d9762d75b8b97a
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119143925"
---
# <a name="performance-data-format"></a>Формат данных производительности

Формат данных, извлекаемых функцией [**процедура RegQueryValueEx**](/windows/desktop/api/winreg/nf-winreg-regqueryvalueexa) , начинается с структуры заголовков фиксированной длины, [**\_ \_ блока данных PERF**](/windows/desktop/api/Winperf/ns-winperf-perf_data_block). Структура **\_ \_ блока данных производительности** описывает систему и данные о производительности. За структурой **\_ \_ блока данных о производительности** следует переменное число элементов данных объектов с переменной длиной. Заголовок каждого элемента объекта содержит смещение следующего элемента объекта в списке. На следующей диаграмме показана базовая структура данных о производительности.

![Структура данных о производительности](images/perfdata.png)

Существует два формата для элементов данных объекта: один, который поддерживает несколько экземпляров, а другой, не поддерживающий несколько экземпляров.

Каждый блок элемента данных объекта содержит структуру [**\_ \_ типа объекта PERF**](/windows/desktop/api/Winperf/ns-winperf-perf_object_type) , которая описывает данные производительности для объекта. За структурой **\_ \_ типа объекта PERF** следует список структур [**\_ \_ определения счетчиков производительности**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) , по одному для каждого счетчика, определенного для объекта. Для объекта, имеющего только один экземпляр, список структур **\_ \_ определения счетчиков производительности** следует за одной структурой [**\_ \_ блока счетчика производительности**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) , за которой следуют данные счетчика. Каждая **Структура \_ \_ определения счетчика производительности** содержит смещение от начала структуры **\_ \_ блока счетчика производительности** к соответствующим данным счетчика. На следующей диаграмме показана структура объекта производительности, который не поддерживает несколько экземпляров.

![Структура объекта производительности, не поддерживающая несколько экземпляров](images/perfnoinst.png)

Для типа объекта, поддерживающего несколько экземпляров, за списком структур [**\_ \_ определения счетчиков производительности**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) следует список блоков сведений об экземплярах (по одному для каждого экземпляра). Каждый блок сведений об экземпляре содержит структуру [**\_ \_ определения экземпляра производительности**](/windows/desktop/api/Winperf/ns-winperf-perf_instance_definition) , имя экземпляра и структуру [**\_ \_ блока счетчика производительности**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) . На следующей диаграмме показана структура объекта производительности, который поддерживает два экземпляра.

![Структура объекта производительности, поддерживающего два экземпляра](images/perfinst.png)

Пример, в котором используются смещения, см. в разделе [Отображение имен объектов, экземпляров и счетчиков](displaying-object-instance-and-counter-names.md).

 

 
