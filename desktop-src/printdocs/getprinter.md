---
description: Функция PrintOut получает сведения о указанном принтере.
ms.assetid: f162edbb-83ee-40c3-8710-9c867301d652
title: Функция PrintOut (Винспул. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- GetPrinter
- GetPrinterA
- GetPrinterW
api_type:
- DllExport
api_location:
- Winspool.drv
- Ext-MS-Win-printer-Winspool-l1-1-0.dll
- Ext-MS-Win-printer-Winspool-l1-1-1.dll
- Ext-MS-Win-Printer-WinSpool-l1-1-2.dll
- Ext-MS-Win-Printer-WinSpool-L1-1-3.dll
ms.openlocfilehash: b6823795ea715ac72dfdb7150dac08fd7feb34445fcfab94412cb2dd0c6bd7a6
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119949093"
---
# <a name="getprinter-function"></a>Функция PrintOut

Функция **PrintOut** получает сведения о указанном принтере.

## <a name="syntax"></a>Синтаксис


```C++
BOOL GetPrinter(
  _In_  HANDLE  hPrinter,
  _In_  DWORD   Level,
  _Out_ LPBYTE  pPrinter,
  _In_  DWORD   cbBuf,
  _Out_ LPDWORD pcbNeeded
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*хпринтер* \[ окне\]
</dt> <dd>

Описатель принтера, для которого функция получает сведения. Используйте функцию [**опенпринтер**](openprinter.md) или [**аддпринтер**](addprinter.md) для получения маркера принтера.

</dd> <dt>

*Уровень* \[ окне\]
</dt> <dd>

Уровень или тип структуры, которую функция хранит в буфере, на который указывает *ппринтер*.

Это значение может быть равно 1, 2, 3, 4, 5, 6, 7, 8 или 9.

</dd> <dt>

*ппринтер* \[ заполняет\]
</dt> <dd>

Указатель на буфер, который получает структуру, содержащую сведения о указанном принтере. Буфер должен быть достаточно большим, чтобы получить структуру и любые строки или другие данные, на которые указывает элемент структуры. Если буфер слишком мал, параметр *пкбнидед* возвращает требуемый размер буфера.

Тип структуры определяется значением *Level*.



| Уровень                                                                                                | Структура                                                                                                                                                                                                        |
|------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="1"></span><dl> <dt>**1**</dt> </dl> | Структура [**принтера с информацией \_ \_ 1**](printer-info-1.md) , содержащая общие сведения о принтере.<br/>                                                                                                        |
| <span id="2"></span><dl> <dt>**2**</dt> </dl> | Структура [**сведений о принтере \_ \_ 2**](printer-info-2.md) , содержащая подробные сведения о принтере.<br/>                                                                                             |
| <span id="3"></span><dl> <dt>**3**</dt> </dl> | Структура [**принтера \_ info \_ 3**](printer-info-3.md) , содержащая сведения о безопасности принтера.<br/>                                                                                                 |
| <span id="4"></span><dl> <dt>**4**</dt> </dl> | Структура [**принтера с информацией \_ \_ 4**](printer-info-4.md) , содержащая минимальные сведения о принтерах, включая имя принтера, имя сервера, а также то, является ли принтер удаленным или локальным.<br/> |
| <span id="5"></span><dl> <dt>**5**</dt> </dl> | Структура сведений о принтере [**\_ \_ 5**](printer-info-5.md) , содержащая сведения о принтерах, такие как атрибуты принтера и параметры времени ожидания.<br/>                                                               |
| <span id="6"></span><dl> <dt>**6**</dt> </dl> | Структура [**принтера с \_ информацией \_ 6**](printer-info-6.md) , указывающая значение состояния принтера.<br/>                                                                                                      |
| <span id="7"></span><dl> <dt>**7**</dt> </dl> | Структура [**принтера с \_ информацией \_ 7**](printer-info-7.md) , указывающая, опубликован ли принтер в службе каталогов.<br/>                                                                      |
| <span id="8"></span><dl> <dt>**8**</dt> </dl> | Структура [**принтера \_ info \_ 8**](printer-info-8.md) , указывающая глобальные параметры принтера по умолчанию.<br/>                                                                                                |
| <span id="9"></span><dl> <dt>**9**</dt> </dl> | Структура [**принтера с \_ информацией \_ 9**](printer-info-9.md) , указывающая параметры принтера по умолчанию для каждого пользователя.<br/>                                                                                              |



 

</dd> <dt>

*кббуф* \[ окне\]
</dt> <dd>

Размер (в байтах) буфера, на который указывает *ппринтер*.

</dd> <dt>

*пкбнидед* \[ заполняет\]
</dt> <dd>

Указатель на переменную, для которой в качестве функции задается размер (в байтах) сведений о принтере. Если значение *кббуф* меньше этого значения, то не удается выполнить **Печать** , а значение представляет требуемый размер буфера. Если значение *кббуф* равно или больше этого значения, то будет выполнен **Повтор** , а значение представляет число байтов, хранящихся в буфере.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Если функция выполнена, возвращаемое значение будет ненулевым.

Если функция выполняется неудачно, возвращается нулевое значение.

## <a name="remarks"></a>Remarks

> [!Note]  
> Это блокирующая или синхронная функция, которая может не возвращать значение немедленно. Скорость возврата этой функцией зависит от факторов времени выполнения, таких как состояние сети, Конфигурация сервера печати и факторы реализации драйвера принтера, которые трудно предсказать при написании приложения. Вызов этой функции из потока, который управляет взаимодействием с пользовательским интерфейсом, может привести к невозможности реагирования приложения.

 

Элемент **пдевмоде** в структурах [**принтера \_ \_ 2**](printer-info-2.md), [**\_ сведения о принтере \_ 8**](printer-info-8.md)и [**\_ сведения о принтере \_ 9**](printer-info-9.md) могут иметь **значение NULL**. В этом случае принтер непригоден для использования, пока драйвер не будет успешно переустановлен.

Для структур [**" \_ сведения \_ о принтере 2**](printer-info-2.md) " и " [**\_ сведения о принтере \_ 3**](printer-info-3.md) ", которые содержат указатель на дескриптор безопасности, эта функция извлекает только те компоненты дескриптора безопасности, которые у вызывающего объекта есть разрешение на чтение. Чтобы получить определенные компоненты дескриптора безопасности, необходимо указать необходимые права доступа при вызове функции [**опенпринтер**](openprinter.md) для получения дескриптора принтера. В следующей таблице показаны права доступа, необходимые для чтения различных компонентов дескриптора безопасности.



| Право доступа                        | Компонент дескриптора безопасности                                                                 |
|-------------------------------------|-----------------------------------------------------------------------------------------------|
| \_Контроль чтения<br/>            | Владелец<br/> Основная группа<br/> Список управления доступом на уровне пользователей (DACL)<br/> |
| ДОСТУП \_ к \_ безопасности системы<br/> | Системный доступ — список управления (SACL)<br/>                                                  |



 

Если указан уровень 7, элемент **двактион** в [**\_ сведениях о принтере \_ 7**](printer-info-7.md) возвращает одно из следующих значений, чтобы указать, опубликован ли принтер в службе каталогов.



| значение Двактион     | Значение                                                                                                                                                                                                                                                  |
|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_Публикация дспринт   | Принтер опубликован. Член **псзобжектгуид** содержит идентификатор GUID объекта очереди печати служб каталогов, связанного с принтером.                                                                                                       |
| ДСПРИНТ \_ отменить публикацию | Принтер не опубликован.                                                                                                                                                                                                                            |
| \_Ожидание дспринт   | Указывает, что система пытается завершить операцию публикации или отмены публикации. Если при вызове [**сетпринтер**](setprinter.md) не удается опубликовать или отменить публикацию принтера, система выполняет дальнейшие попытки выполнить операцию в фоновом режиме. |



 

начиная с Windows Vista, данные **принтера, возвращаемые компонентом** *хпринтер* , получаются из локального кэша, если в качестве ссылки на принтер, размещенный на сервере печати, имеется по крайней мере одно открытое соединение с сервером печати. Во всех остальных конфигурациях данные принтера запрашиваются с сервера печати.

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|-------------------------------------|-----------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                                                |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                                                      |
| Заголовок<br/>                   | <dl> <dt>винспул. h (включает Windows. h)</dt> </dl> |
| Библиотека<br/>                  | <dl> <dt>Винспул. lib</dt> </dl>                   |
| DLL<br/>                      | <dl> <dt>Винспул. drv</dt> </dl>                   |
| Имя в кодировке Юникод и ANSI<br/>   | **Жетпринтерв** (Юникод) и a- **Printer** (ANSI)<br/>                                           |



## <a name="see-also"></a>См. также

<dl> <dt>

[Вывод на печать](printdocs-printing.md)
</dt> <dt>

[Функции API очереди печати принтера](printing-and-print-spooler-functions.md)
</dt> <dt>

[**абортпринтер**](abortprinter.md)
</dt> <dt>

[**аддпринтер**](addprinter.md)
</dt> <dt>

[**клосепринтер**](closeprinter.md)
</dt> <dt>

[**делетепринтер**](deleteprinter.md)
</dt> <dt>

[**енумпринтерс**](enumprinters.md)
</dt> <dt>

[**\_Сведения о принтере \_ 1**](printer-info-1.md)
</dt> <dt>

[**\_Сведения о принтере \_ 2**](printer-info-2.md)
</dt> <dt>

[**\_Сведения о принтере \_ 3**](printer-info-3.md)
</dt> <dt>

[**\_Сведения о принтере \_ 4**](printer-info-4.md)
</dt> <dt>

[**\_Сведения о принтере \_ 5**](printer-info-5.md)
</dt> <dt>

[**\_Сведения о принтере \_ 7**](printer-info-7.md)
</dt> <dt>

[**\_Сведения о принтере \_ 8**](printer-info-8.md)
</dt> <dt>

[**\_Сведения о принтере \_ 9**](printer-info-9.md)
</dt> <dt>

[**опенпринтер**](openprinter.md)
</dt> <dt>

[**сетпринтер**](setprinter.md)
</dt> </dl>

 

 




