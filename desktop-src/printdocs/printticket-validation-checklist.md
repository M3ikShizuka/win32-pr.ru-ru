---
description: Проверьте контрольный список для проверки PrintTicket. Этот раздел не является актуальным. Самые актуальные сведения см. в спецификации печати схемы.
ms.assetid: 4698f151-2237-4d16-b32f-4d15024cd063
title: Контрольный список для проверки PrintTicket
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6154b7cabb5825a0f0edcc8f90b8294557001f1a
ms.sourcegitcommit: b32433cc0394159c7263809ae67615ab5792d40d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/30/2021
ms.locfileid: "113120149"
---
# <a name="printticket-validation-checklist"></a><span data-ttu-id="5b5a8-105">Контрольный список для проверки PrintTicket</span><span class="sxs-lookup"><span data-stu-id="5b5a8-105">PrintTicket Validation Checklist</span></span>

<span data-ttu-id="5b5a8-106">Этот раздел не является актуальным.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-106">This topic is not current.</span></span> <span data-ttu-id="5b5a8-107">Самые актуальные сведения см. в [спецификации печати схемы](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span><span class="sxs-lookup"><span data-stu-id="5b5a8-107">For the most current information, see the [Print Schema Specification](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span></span>

<span data-ttu-id="5b5a8-108">Поставщики PrintTicket должны проверить PrintTicket перед его использованием для любых целей.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-108">PrintTicket providers must validate the PrintTicket prior to using it for any purpose.</span></span> <span data-ttu-id="5b5a8-109">После проверки PrintTicket он может быть возвращен клиенту или удален после использования его.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-109">After the PrintTicket is validated, it may be returned to the client, or it may be discarded after use.</span></span> <span data-ttu-id="5b5a8-110">В этом контрольном списке рассматриваются задачи, которые должен выполнить поставщик во время проверки.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-110">This checklist covers the tasks the provider must perform during validation.</span></span> <span data-ttu-id="5b5a8-111">Процесс проверки будет часто изменять содержимое PrintTicket, хотя он не будет изменять ранее проверенный PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-111">The validation process will frequently alter the content of the PrintTicket, although it will not alter a previously-validated PrintTicket.</span></span>

<span data-ttu-id="5b5a8-112">Проверка всегда выполняется для конкретного устройства с набором компонентов, параметров и экземпляров Параметердеф, определенных в документе PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-112">Validation is always performed against a specific device that has a set of Feature, Option and ParameterDef instances defined in a PrintCapabilities document.</span></span> <span data-ttu-id="5b5a8-113">Код проверки должен иметь доступ к набору экземпляров компонентов (и вложенным экземплярам параметров) и экземплярам Параметердеф для конкретного устройства и не должен иметь доступа к PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-113">The validation code should have access to the set of Feature instances (and the contained Option instances) and ParameterDef instances for the specific device, and should not need to access the PrintCapabilities.</span></span> <span data-ttu-id="5b5a8-114">Сведения из экземпляров компонента, параметра и Параметердеф необходимы в определенных частях процесса проверки.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-114">The information from the Feature, Option, and ParameterDef instances is needed in certain parts of the validation process.</span></span>

1.  <span data-ttu-id="5b5a8-115">При попытке найти соответствующий или соответствующий элемент Обратите внимание, что пространства имен элементов должны совпадать, прежде чем любое квалифицированное имя может считаться совпадением.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-115">During attempts to locate corresponding or matching elements, note that the namespaces of the elements must match before any Qualified Name can be considered a match.</span></span> <span data-ttu-id="5b5a8-116">Имена всех элементов, атрибутов и экземпляров задаются с указанием пространства имен.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-116">All element names, Attribute names, and instance names are namespace-qualified.</span></span> <span data-ttu-id="5b5a8-117">Для вложенных элементов их расположения должны совпадать, прежде чем элементы будут считаться соответствующими.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-117">For elements that are nested, their locations must match before the elements are considered a match.</span></span>

2.  <span data-ttu-id="5b5a8-118">Убедитесь, что все теги элементов находятся в общедоступном пространстве имен, определяются схемой PrintTicket, содержат правильные атрибуты и значения атрибутов XML, а расположение каждого типа элемента соответствует использованию, определяемым схемой PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-118">Verify that all element tags are in the public namespace, are defined by the PrintTicket Schema, contain the proper XML Attributes and Attribute Values, and that the location of each element type conforms to the PrintTicket Schema-defined usage.</span></span>

3.  <span data-ttu-id="5b5a8-119">Определение всех пространств имен, сообщаемых документом PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-119">Determine all namespaces reported by PrintCapabilities document.</span></span> <span data-ttu-id="5b5a8-120">Удалите все элементы (и их потомков) из PrintTicket, имена экземпляров которых принадлежат к пространствам имен, не сообщаемым документом PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-120">Remove all elements (and their descendants) from the PrintTicket whose instance names belong to namespaces not reported by PrintCapabilities document.</span></span> <span data-ttu-id="5b5a8-121">Обратите внимание на разницу между этим вариантом и следующим регистром, в котором используются нераспознанные имена экземпляров в известном пространстве имен.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-121">Note the difference between this case and the following case, which involves unrecognized instance names within a known namespace.</span></span>

4.  <span data-ttu-id="5b5a8-122">Из-за того, что схемы постоянно расширяются с добавлением новых определений экземпляров элементов, код проверки не должен быть написан с учетом предположения о том, что каждое имя экземпляра в заданном пространстве имен известно.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-122">Due to the fact that the schemas are continually being extended with the addition of new element instance definitions, the validation code should not be written under the assumption that every instance name in a given namespace is known.</span></span> <span data-ttu-id="5b5a8-123">Код проверки не может обрабатывать нераспознанные имена экземпляров в известном пространстве имен как ошибки, а также удалять их из PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-123">The validation code cannot treat unrecognized instance names within a known namespace as errors, nor can it delete them from the PrintTicket.</span></span>

5.  <span data-ttu-id="5b5a8-124">Если какой-либо экземпляр элемента имеет дублирующийся элемент того же уровня, который не является допустимым для схемы PrintTicket, следует использовать только первое вхождение и удалить дубликаты, включая содержимое повторяющегося элемента.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-124">If any element instance has a duplicate sibling that is not permitted by the PrintTicket Schema, keep only the first occurrence and delete the duplicates, including the contents of the duplicated element.</span></span>

6.  <span data-ttu-id="5b5a8-125">Удалите из PrintTicket любую функцию или подфункцию (и все ее дочерние элементы), у которых нет соответствующей функции в документе PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-125">Remove from the PrintTicket any Feature or subfeature (and all its children) that has no corresponding Feature in the PrintCapabilities document.</span></span>

7.  <span data-ttu-id="5b5a8-126">Проверьте свойство Селектионтипе, определенное в документе PrintCapabilities для каждого из оставшихся экземпляров компонента в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-126">Check the SelectionType Property defined in the PrintCapabilities document for each of the remaining Feature instances in the PrintTicket.</span></span> <span data-ttu-id="5b5a8-127">Любая функция, свойство Селектионтипе которой имеет значение Пикконе, должна иметь ровно один экземпляр параметра в PrintTicket, а функция, свойство Селектионтипе которой — Пиккмани, может иметь более одного экземпляра.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-127">Any Feature whose SelectionType Property is set to PickOne must have exactly one Option instance present in the PrintTicket, while a Feature whose SelectionType Property is PickMany may have more than one.</span></span> <span data-ttu-id="5b5a8-128">Если у функции PrintTicket нет экземпляра параметра, укажите экземпляр параметра по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-128">If a PrintTicket Feature has no Option instance, supply the default Option instance.</span></span> <span data-ttu-id="5b5a8-129">Поскольку вы являетесь поставщиком, вам известно, какой вариант является параметром по умолчанию для каждой функции.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-129">Since you are the provider, you know which Option is the default Option for every Feature.</span></span>

    <span data-ttu-id="5b5a8-130">Для функции, свойство Селектионтипе которой имеет значение Пиккмани, но в PrintTicket выбрано несколько параметров, убедитесь, что ни один параметр не обозначен как Идентитйоптион.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-130">For a Feature whose SelectionType Property is PickMany, with more than one Option selected in the PrintTicket, verify that no Option is designated as IdentityOption.</span></span> <span data-ttu-id="5b5a8-131">Если есть, удалите все остальные параметры, покрывая только один назначенный Идентитйоптион.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-131">If there is, delete every other Option, leaving only the one designated IdentityOption.</span></span>

8.  <span data-ttu-id="5b5a8-132">Удалите любой экземпляр Параметеринит в PrintTicket, который не имеет соответствующего экземпляра Параметердеф в документе PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-132">Remove any ParameterInit instance in the PrintTicket that has no corresponding ParameterDef instance in the PrintCapabilities document.</span></span>

    <span data-ttu-id="5b5a8-133">Для любых других экземпляров Параметеринит в PrintTicket убедитесь, что значение для каждого из них соответствует экземпляру Параметердеф документа PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-133">For any other ParameterInit instances in the PrintTicket, verify that the Value for each conforms to the PrintCapabilities document's ParameterDef instance.</span></span> <span data-ttu-id="5b5a8-134">Если значение отсутствует, укажите значение по умолчанию, указанное в Параметердеф.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-134">If a Value is missing, supply the default that is provided in the ParameterDef.</span></span>

9.  <span data-ttu-id="5b5a8-135">Свяжите каждый экземпляр параметра в PrintTicket с параметром, перечисленным в соответствующей функции в документе PrintCapabilities, на основе результатов процесса оценки.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-135">Pair each Option instance in the PrintTicket with an Option listed in the corresponding Feature in the PrintCapabilities document, based on the results of the scoring process.</span></span> <span data-ttu-id="5b5a8-136">Оценка — это процесс поиска параметра в документе PrintCapabilities, который наилучшим образом соответствует параметру, указанному в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-136">Scoring is the process of finding the Option in the PrintCapabilities document that best matches the Option named in the PrintTicket.</span></span> <span data-ttu-id="5b5a8-137">Описание того, что следует учитывать во время процесса оценки, см. в разделе [определения параметров](option-definitions.md).</span><span class="sxs-lookup"><span data-stu-id="5b5a8-137">For a description of what is taken into account during the scoring process, see [Option Definitions](option-definitions.md).</span></span> <span data-ttu-id="5b5a8-138">Замените каждый параметр ссылки в PrintTicket на соответствующий параметр соответствующего наиболее подходящего документа-кандидата PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-138">Replace each reference Option in the PrintTicket by the corresponding best matching candidate PrintCapabilities document Option.</span></span> <span data-ttu-id="5b5a8-139">Вы также можете ранжировать все кандидаты по оценке и передать эти сведения на этап разрешения, если конфликт ограничений не позволяет использовать наиболее подходящий кандидат.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-139">You may also rank all of the candidates by score and pass this information on to the resolving stage in case a constraint conflict prevents the best matching candidate from being used.</span></span> <span data-ttu-id="5b5a8-140">В таких случаях процесс разрешения может использовать второй вариант, а не выбирать другой кандидат в случайном порядке.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-140">In such cases, the resolving process can use the second-best candidate rather than pick another candidate at random.</span></span>

10. <span data-ttu-id="5b5a8-141">Для компонента, свойство Селектионтипе которого имеет значение Пиккмани и в списке PrintTicket выбрано несколько параметров, убедитесь, что ни один параметр не обозначен как Идентитйоптион.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-141">For a Feature whose SelectionType Property is set to PickMany, and that has more than one Option selected in the PrintTicket, verify that no Option is designated as IdentityOption.</span></span> <span data-ttu-id="5b5a8-142">Если такой параметр существует, удалите все остальные параметры, покрывая только один назначенный Идентитйоптион.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-142">If such an Option exists, delete every other Option, leaving only the one designated IdentityOption.</span></span> <span data-ttu-id="5b5a8-143">Этот шаг необходимо выполнить до и после применения процесса оценки.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-143">This step must be performed before and after the scoring process is applied.</span></span>

    <span data-ttu-id="5b5a8-144">Причина, по которой этот шаг должен быть выполнен дважды, заключается в том, что процесс оценки может сопоставлять несколько экземпляров эталонных параметров одному варианту-кандидату.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-144">The reason that this step must be performed twice is that it is possible for the scoring process to map multiple reference Option instances to the same candidate Option.</span></span> <span data-ttu-id="5b5a8-145">В этом случае удалите все повторяющиеся экземпляры параметров, чтобы параметры, перечисленные для определенной функции Пиккмани, были уникальными.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-145">If that happens, delete any duplicate Option instances so that the Options listed for a particular PickMany Feature are unique.</span></span>

11. <span data-ttu-id="5b5a8-146">Добавьте в объект PrintTicket любую функцию, имеющуюся в документе PrintCapabilities, которая не отображается в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-146">Add to the PrintTicket any Feature present in the PrintCapabilities document that does not appear in the PrintTicket.</span></span> <span data-ttu-id="5b5a8-147">Для такой функции следует назначить параметр по умолчанию в качестве выбранного параметра.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-147">For such a Feature, designate the default Option as the selected Option.</span></span>

12. <span data-ttu-id="5b5a8-148">Определите, есть ли экземпляры Параметердеф, соответствующие всем следующим критериям:</span><span class="sxs-lookup"><span data-stu-id="5b5a8-148">Determine whether there are any ParameterDef instances that meet all of the following criteria:</span></span>

    -   <span data-ttu-id="5b5a8-149">Экземпляр Параметердеф отображается в документе PrintCapabilities, но не в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-149">The ParameterDef instance appears in the PrintCapabilities document, but not in the PrintTicket.</span></span>

    -   <span data-ttu-id="5b5a8-150">Для свойства обязательного экземпляра Параметердеф задано значение безусловно или Conditional.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-150">The Mandatory Property of the ParameterDef instance is set to either Unconditional or Conditional.</span></span>

    -   <span data-ttu-id="5b5a8-151">На экземпляр Параметердеф ссылается экземпляр ParameterRef в PrintTicket в экземпляре параметра.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-151">The ParameterDef instance is referenced by a ParameterRef instance in the PrintTicket within an Option instance.</span></span>

    <span data-ttu-id="5b5a8-152">Для каждого такого экземпляра Параметердеф в документе PrintCapabilities добавьте в PrintTicket соответствующий экземпляр Параметеринит.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-152">For each such ParameterDef instance in the PrintCapabilities document, add to the PrintTicket a corresponding ParameterInit instance.</span></span> <span data-ttu-id="5b5a8-153">Присвойте вновь добавленным экземплярам Параметеринит значение по умолчанию, заданное соответствующими экземплярами Параметердеф.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-153">Set the Value of the newly added ParameterInit instances to the default Value specified by the corresponding ParameterDef instances.</span></span>

13. <span data-ttu-id="5b5a8-154">Выполните обнаружение конфликтов ограничений и измените конфигурацию, чтобы устранить такие конфликты.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-154">Perform constraint conflict detection and modify the configuration to eliminate any such conflicts.</span></span> <span data-ttu-id="5b5a8-155">В этом разделе не определен конкретный процесс, используемый для разрешения конфликтов ограничений.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-155">This topic does not define a particular process to use to resolve constraint conflicts.</span></span> <span data-ttu-id="5b5a8-156">Необходимо решить, какой компонент или экземпляр Параметеринит можно изменить, а также соответствующий параметр или значение, соответственно, для выбора с минимальным влиянием на общую цель конфигурации, заданную в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-156">You need to decide which Feature or ParameterInit instance can be changed, and an appropriate Option or Value, respectively, to select that has the least impact on the overall intent of the configuration specified in the PrintTicket.</span></span> <span data-ttu-id="5b5a8-157">Как упоминалось ранее, вы можете использовать оценку сопоставления каждого параметра и использовать параметр со вторым самым высоким показателем.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-157">As mentioned earlier, you might wish to make use of the mapping score of each Option, and use the Option with the second highest score.</span></span> <span data-ttu-id="5b5a8-158">Чтобы определить, какую функцию или Параметеринит изменить, может потребоваться определить частное свойство, которое клиент может добавить в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-158">To determine which Feature or ParameterInit to change, you might want to define a private Property that the client can add to the PrintTicket.</span></span> <span data-ttu-id="5b5a8-159">Это свойство может определять приоритет для экземпляров компонента и Параметеринит, чтобы процесс сопоставителя уведомил, какой компонент или экземпляры Параметеринит важны для клиента (и должны быть сохранены в PrintTicket), и что менее важно.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-159">This Property can define a priority for Feature and ParameterInit instances so that the resolver process is informed of which Feature or ParameterInit instances are important to the client (and need to be preserved in the PrintTicket), and which are less important.</span></span>

14. <span data-ttu-id="5b5a8-160">Если процесс разрешения ограничений вызвал изменения в PrintTicket для любых экземпляров ParameterRef, для которых для свойства обязательно задано значение Conditional, добавьте экземпляры Параметеринит со значениями по умолчанию для тех, которые теперь отображаются, и удалите любой экземпляр Параметеринит для экземпляра ParameterRef, который больше не отображается.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-160">If the constraint resolution process has caused changes in the PrintTicket to any ParameterRef instances for which the Mandatory Property is set to Conditional, add ParameterInit instances with default Values for those that now appear, and remove any ParameterInit instance for a ParameterRef instance that no longer appears.</span></span>

15. <span data-ttu-id="5b5a8-161">Удалите все экземпляры свойств и их содержимое, которое отображается в экземплярах параметров в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-161">Remove all Property instances and their contents that appear within Option instances in the PrintTicket.</span></span> <span data-ttu-id="5b5a8-162">Элементы свойств не имеют роли в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-162">Property elements have no role in the PrintTicket.</span></span> <span data-ttu-id="5b5a8-163">Если проверенный параметр для определенной функции соответствует предварительно проверенному параметру, перенесите все экземпляры свойств в этом параметре из PrintTicket "Предварительная проверка" в состояние "Предварительная авторизация" на проверяемый объект PrintTicket согласно условию, что пространства имен экземпляров свойств зарегистрированы в документе PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-163">If the validated Option for a particular Feature perfectly matches the prevalidated Option, transfer all of the Property instances in that Option from the prevalidation PrintTicket to the now-validated PrintTicket, subject to the condition that namespaces of Property instances are registered in the PrintCapabilities document.</span></span> <span data-ttu-id="5b5a8-164">Обратите внимание, что для двух экземпляров параметров, которые считаются идеальным совпадением, для каждого Скоредпроперти, найденного в одном варианте, в другом параметре должен быть соответствующий Скоредпроперти, а значения обоих экземпляров Скоредпроперти должны быть одинаковыми.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-164">Note that for two Option instances to be considered a perfect match, for every ScoredProperty found in one Option, there must be a corresponding ScoredProperty in the other Option, and the Values of both ScoredProperty instances must be the same.</span></span>

16. <span data-ttu-id="5b5a8-165">Если поставщик PrintTicket распознает и поддерживает все закрытые или общедоступные экземпляры свойств, которые в данный момент несохранившиись, выполните на них проверку.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-165">If your PrintTicket provider recognizes and supports any private or public Property instances that have survived to this point, perform validation on them.</span></span> <span data-ttu-id="5b5a8-166">Не удаляйте свойство на этом этапе, просто потому, что оно не распознается, оно может быть предназначено для другого этапа обработки документов.</span><span class="sxs-lookup"><span data-stu-id="5b5a8-166">Do not delete a Property at this point just because you do not recognize it, it might be intended for another phase of document processing.</span></span>

## <a name="related-topics"></a><span data-ttu-id="5b5a8-167">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="5b5a8-167">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5b5a8-168">Печать спецификации схемы</span><span class="sxs-lookup"><span data-stu-id="5b5a8-168">Print Schema Specification</span></span>](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip)
</dt> </dl>

 

 



