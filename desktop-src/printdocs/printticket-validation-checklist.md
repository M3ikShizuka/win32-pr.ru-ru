---
description: Проверьте контрольный список для проверки PrintTicket. Этот раздел не является актуальным. Самые актуальные сведения см. в спецификации печати схемы.
ms.assetid: 4698f151-2237-4d16-b32f-4d15024cd063
title: Контрольный список для проверки PrintTicket
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3dd9f6c04bc1cd57ce453c061e30c25d2111964f5f82bdaa21bf5921cd53c30e
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120091714"
---
# <a name="printticket-validation-checklist"></a>Контрольный список для проверки PrintTicket

Этот раздел не является актуальным. Самые актуальные сведения см. в [спецификации печати схемы](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).

Поставщики PrintTicket должны проверить PrintTicket перед его использованием для любых целей. После проверки PrintTicket он может быть возвращен клиенту или удален после использования его. В этом контрольном списке рассматриваются задачи, которые должен выполнить поставщик во время проверки. Процесс проверки будет часто изменять содержимое PrintTicket, хотя он не будет изменять ранее проверенный PrintTicket.

Проверка всегда выполняется для конкретного устройства с набором компонентов, параметров и экземпляров Параметердеф, определенных в документе PrintCapabilities. Код проверки должен иметь доступ к набору экземпляров компонентов (и вложенным экземплярам параметров) и экземплярам Параметердеф для конкретного устройства и не должен иметь доступа к PrintCapabilities. Сведения из экземпляров компонента, параметра и Параметердеф необходимы в определенных частях процесса проверки.

1.  При попытке найти соответствующий или соответствующий элемент Обратите внимание, что пространства имен элементов должны совпадать, прежде чем любое квалифицированное имя может считаться совпадением. Имена всех элементов, атрибутов и экземпляров задаются с указанием пространства имен. Для вложенных элементов их расположения должны совпадать, прежде чем элементы будут считаться соответствующими.

2.  Убедитесь, что все теги элементов находятся в общедоступном пространстве имен, определяются схемой PrintTicket, содержат правильные атрибуты и значения атрибутов XML, а расположение каждого типа элемента соответствует использованию, определяемым схемой PrintTicket.

3.  Определение всех пространств имен, сообщаемых документом PrintCapabilities. Удалите все элементы (и их потомков) из PrintTicket, имена экземпляров которых принадлежат к пространствам имен, не сообщаемым документом PrintCapabilities. Обратите внимание на разницу между этим вариантом и следующим регистром, в котором используются нераспознанные имена экземпляров в известном пространстве имен.

4.  Из-за того, что схемы постоянно расширяются с добавлением новых определений экземпляров элементов, код проверки не должен быть написан с учетом предположения о том, что каждое имя экземпляра в заданном пространстве имен известно. Код проверки не может обрабатывать нераспознанные имена экземпляров в известном пространстве имен как ошибки, а также удалять их из PrintTicket.

5.  Если какой-либо экземпляр элемента имеет дублирующийся элемент того же уровня, который не является допустимым для схемы PrintTicket, следует использовать только первое вхождение и удалить дубликаты, включая содержимое повторяющегося элемента.

6.  Удалите из PrintTicket любую функцию или подфункцию (и все ее дочерние элементы), у которых нет соответствующей функции в документе PrintCapabilities.

7.  Проверьте свойство Селектионтипе, определенное в документе PrintCapabilities для каждого из оставшихся экземпляров компонента в PrintTicket. Любая функция, свойство Селектионтипе которой имеет значение Пикконе, должна иметь ровно один экземпляр параметра в PrintTicket, а функция, свойство Селектионтипе которой — Пиккмани, может иметь более одного экземпляра. Если у функции PrintTicket нет экземпляра параметра, укажите экземпляр параметра по умолчанию. Поскольку вы являетесь поставщиком, вам известно, какой вариант является параметром по умолчанию для каждой функции.

    Для функции, свойство Селектионтипе которой имеет значение Пиккмани, но в PrintTicket выбрано несколько параметров, убедитесь, что ни один параметр не обозначен как Идентитйоптион. Если есть, удалите все остальные параметры, покрывая только один назначенный Идентитйоптион.

8.  Удалите любой экземпляр Параметеринит в PrintTicket, который не имеет соответствующего экземпляра Параметердеф в документе PrintCapabilities.

    Для любых других экземпляров Параметеринит в PrintTicket убедитесь, что значение для каждого из них соответствует экземпляру Параметердеф документа PrintCapabilities. Если значение отсутствует, укажите значение по умолчанию, указанное в Параметердеф.

9.  Свяжите каждый экземпляр параметра в PrintTicket с параметром, перечисленным в соответствующей функции в документе PrintCapabilities, на основе результатов процесса оценки. Оценка — это процесс поиска параметра в документе PrintCapabilities, который наилучшим образом соответствует параметру, указанному в PrintTicket. Описание того, что следует учитывать во время процесса оценки, см. в разделе [определения параметров](option-definitions.md). Замените каждый параметр ссылки в PrintTicket на соответствующий параметр соответствующего наиболее подходящего документа-кандидата PrintCapabilities. Вы также можете ранжировать все кандидаты по оценке и передать эти сведения на этап разрешения, если конфликт ограничений не позволяет использовать наиболее подходящий кандидат. В таких случаях процесс разрешения может использовать второй вариант, а не выбирать другой кандидат в случайном порядке.

10. Для компонента, свойство Селектионтипе которого имеет значение Пиккмани и в списке PrintTicket выбрано несколько параметров, убедитесь, что ни один параметр не обозначен как Идентитйоптион. Если такой параметр существует, удалите все остальные параметры, покрывая только один назначенный Идентитйоптион. Этот шаг необходимо выполнить до и после применения процесса оценки.

    Причина, по которой этот шаг должен быть выполнен дважды, заключается в том, что процесс оценки может сопоставлять несколько экземпляров эталонных параметров одному варианту-кандидату. В этом случае удалите все повторяющиеся экземпляры параметров, чтобы параметры, перечисленные для определенной функции Пиккмани, были уникальными.

11. Добавьте в объект PrintTicket любую функцию, имеющуюся в документе PrintCapabilities, которая не отображается в PrintTicket. Для такой функции следует назначить параметр по умолчанию в качестве выбранного параметра.

12. Определите, есть ли экземпляры Параметердеф, соответствующие всем следующим критериям:

    -   Экземпляр Параметердеф отображается в документе PrintCapabilities, но не в PrintTicket.

    -   Для свойства обязательного экземпляра Параметердеф задано значение безусловно или Conditional.

    -   На экземпляр Параметердеф ссылается экземпляр ParameterRef в PrintTicket в экземпляре параметра.

    Для каждого такого экземпляра Параметердеф в документе PrintCapabilities добавьте в PrintTicket соответствующий экземпляр Параметеринит. Присвойте вновь добавленным экземплярам Параметеринит значение по умолчанию, заданное соответствующими экземплярами Параметердеф.

13. Выполните обнаружение конфликтов ограничений и измените конфигурацию, чтобы устранить такие конфликты. В этом разделе не определен конкретный процесс, используемый для разрешения конфликтов ограничений. Необходимо решить, какой компонент или экземпляр Параметеринит можно изменить, а также соответствующий параметр или значение, соответственно, для выбора с минимальным влиянием на общую цель конфигурации, заданную в PrintTicket. Как упоминалось ранее, вы можете использовать оценку сопоставления каждого параметра и использовать параметр со вторым самым высоким показателем. Чтобы определить, какую функцию или Параметеринит изменить, может потребоваться определить частное свойство, которое клиент может добавить в PrintTicket. Это свойство может определять приоритет для экземпляров компонента и Параметеринит, чтобы процесс сопоставителя уведомил, какой компонент или экземпляры Параметеринит важны для клиента (и должны быть сохранены в PrintTicket), и что менее важно.

14. Если процесс разрешения ограничений вызвал изменения в PrintTicket для любых экземпляров ParameterRef, для которых для свойства обязательно задано значение Conditional, добавьте экземпляры Параметеринит со значениями по умолчанию для тех, которые теперь отображаются, и удалите любой экземпляр Параметеринит для экземпляра ParameterRef, который больше не отображается.

15. Удалите все экземпляры свойств и их содержимое, которое отображается в экземплярах параметров в PrintTicket. Элементы свойств не имеют роли в PrintTicket. Если проверенный параметр для определенной функции соответствует предварительно проверенному параметру, перенесите все экземпляры свойств в этом параметре из PrintTicket "Предварительная проверка" в состояние "Предварительная авторизация" на проверяемый объект PrintTicket согласно условию, что пространства имен экземпляров свойств зарегистрированы в документе PrintCapabilities. Обратите внимание, что для двух экземпляров параметров, которые считаются идеальным совпадением, для каждого Скоредпроперти, найденного в одном варианте, в другом параметре должен быть соответствующий Скоредпроперти, а значения обоих экземпляров Скоредпроперти должны быть одинаковыми.

16. Если поставщик PrintTicket распознает и поддерживает все закрытые или общедоступные экземпляры свойств, которые в данный момент несохранившиись, выполните на них проверку. Не удаляйте свойство на этом этапе, просто потому, что оно не распознается, оно может быть предназначено для другого этапа обработки документов.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Печать спецификации схемы](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip)
</dt> </dl>

 

 



