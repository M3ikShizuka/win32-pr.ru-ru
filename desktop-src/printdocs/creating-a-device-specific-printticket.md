---
description: Узнайте, как создать объект PrintTicket, относящийся к конкретному устройству, предназначенный для конкретного устройства и переносимый на несколько устройств.
ms.assetid: 487f294f-dfe0-48f8-9077-06c55c3af8f1
title: Создание Device-Specific PrintTicket
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 119b0062a7d5effa5c4a4f45570c8f9430faa963934cdec80c8005c2bc8e7699
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119950254"
---
# <a name="creating-a-device-specific-printticket"></a>Создание Device-Specific PrintTicket

Этот раздел не является актуальным. Самые актуальные сведения см. в [спецификации печати схемы](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).

PrintTicket, относящийся к конкретному устройству, предназначен для конкретного устройства и поэтому обычно не переносим на несколько устройств.

Шаги, приведенные в следующем списке, следует использовать при создании PrintTicket, относящегося к конкретному устройству.

1.  Получите документ PrintCapabilities, содержащий только соответствующие экземпляры компонента для устройства. Запросите документ PrintCapabilities по умолчанию. Для этого не требуется указывать входной PrintTicket, так как атрибуты устройства (экземпляры компонентов и параметров, а также параметры), используемые для создания PrintTicket, не зависят от конфигурации.

2.  Создайте пустой XML-документ, содержащий корневой элемент PrintTicket. Назначьте префикс пространства имен для пространства имен печатной схемы и назначьте префиксы для всех других пространств имен, которые будут использоваться PrintTicket. Укажите версию схемы PrintTicket.

3.  Вы можете определить параметры в PrintTicket для каждого компонента и экземпляра Параметердеф, сообщаемого в документе PrintCapabilities, или только те, которые вас интересуют. Если в интерфейс PrintTicket представлен частичный PrintTicket, то значения по умолчанию для пропущенных экземпляров компонента и Параметердеф автоматически предоставляются во время проверки PrintTicket.

4.  Изучите документ PrintCapabilities для экземпляров компонентов и определите, какие из них необходимо определить в списке PrintTicket. Добавьте эти экземпляры компонентов в PrintTicket, но не переносите содержимое экземпляров компонента в PrintTicket. При передаче подкомпоненту также необходимо передать родительский компонент, и в PrintTicket должно быть сохранено отношение «родители-потомки».

    Для каждого передаваемой функции определите, какие экземпляры параметров применимы к вашему PrintTicket. Перенесите весь параметр, как определено в документе PrintCapabilities, а затем удалите все существующие экземпляры свойств. Экземпляры свойств используются в документах PrintCapabilities, но не предназначены для использования в PrintTicket. Сохраните все экземпляры Скоредпроперти, убедившись в том, что их расположение сохраняется. они являются встроенной частью определения параметра.

5.  Экземпляры свойств также можно добавить в любой экземпляр Скоредпроперти. Экземпляры свойств используются, только если поставщик PrintTicket явно поддерживает их использование. Каждый поставщик должен документировать назначение и использовать все поддерживаемые экземпляры свойств. Обратите внимание, что во время проверки все экземпляры свойств, содержащиеся в экземпляре параметра, удаляются, если только пространство имен свойства не распознается целевым поставщиком PrintCapabilities или PrintTicket, и в документе PrintCapabilities, чьи экземпляры Скоредпроперти вполне соответствуют параметрам, заданным в ссылке.

6.  Если ключевые слова схемы печати устанавливают для свойства Селектионтипе значение Пиккмани для определенной функции, можно выбрать несколько параметров для этой функции при условии, что параметр, обозначенный как Идентитйоптион, не является одним из выбранных. Идентитйоптион в схеме печати имеет тот же результат, что и параметр None в файлах PPD и Unidrv ГПД. Она служит в качестве холостого.

7.  Изучите документ PrintCapabilities для экземпляров Параметердеф, которые должны быть заданы в PrintTicket. Для каждого такого экземпляра Параметердеф выберите значение, которое будет использоваться в экземпляре Параметеринит в PrintTicket. Это значение должно иметь правильный тип данных и должно находиться в диапазоне, определенном в экземпляре Параметердеф, и должно соответствовать всем другим требованиям, указанным в экземпляре Параметердеф. Используйте экземпляр Параметеринит, чтобы инициализировать параметр для выбранного значения.

8.  Изучите содержимое каждого экземпляра параметра, который отображается в PrintTicket для вхождений экземпляров ParameterRef. Если соответствующий экземпляр Параметеринит еще не отображается в PrintTicket, выполните предыдущий шаг, чтобы создать экземпляр Параметеринит в PrintTicket. Этот экземпляр Параметеринит предназначен для инициализации параметра, на который ссылается экземпляр ParameterRef.

9.  Помните, что конфликты ограничений могут помешать устройству применить конфигурацию, указанную в PrintTicket. При необходимости процесс проверки изменяет конфигурацию, определенную в PrintTicket, на одну из конфликтов.

10. Изучите ключевые слова схемы Print для экземпляров свойств, которые должны присутствовать в PrintTicket. Добавьте экземпляр свойства в PrintTicket для каждого необходимого значения и укажите для него подходящее значение, используя тип элемента value. Убедитесь, что экземпляры свойств правильно расположены в PrintTicket.

11. Изучите необязательные экземпляры свойств в схеме PrintTicket. Если существуют экземпляры свойств, которые должны находиться в PrintTicket, создайте их в PrintTicket.

12. Кроме того, можно добавить закрытые экземпляры свойств на корневом уровне или в любой компонент, параметр или экземпляр свойства. Обратите внимание, что эти закрытые экземпляры свойств удаляются во время проверки, если пространство имен, к которому они принадлежат, не распознается целевым поставщиком PrintCapabilities или PrintTicket. Кроме того, экземпляры свойств, которые появляются в любом месте в экземпляре параметра, удаляются во время проверки, если только документ PrintCapabilities не содержит параметр, который является идеальной точностью. Два экземпляра параметров являются идеальным соответствием, если каждый Скоредпроперти в одном экземпляре Option имеет соответствующий Скоредпроперти в другом, а значения экземпляров Скоредпроперти одинаковы. Список распознаваемых экземпляров закрытых свойств и их применения см. в частной схеме поставщика PrintTicket.

13. Дочерние элементы одного и того же типа элемента не могут быть вложены в глубину более 10 элементов. Это правило применяется независимо к каждому типу элементов, которые могут быть определены.

> [!Note]  
> XML-содержимое PrintTicket должно быть закодировано с помощью UTF-8 или UTF-16.

 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Печать спецификации схемы](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip)
</dt> </dl>

 

 



