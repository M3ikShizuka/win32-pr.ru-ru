---
description: Узнайте, как создать объект PrintTicket, относящийся к конкретному устройству, предназначенный для конкретного устройства и переносимый на несколько устройств.
ms.assetid: 487f294f-dfe0-48f8-9077-06c55c3af8f1
title: Создание Device-Specific PrintTicket
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 497b825bd875ada534c8c467cd18d90f2db9a2a7
ms.sourcegitcommit: 5d4e99f4c8f42f5f543e52cb9beb9fb13ec56c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2021
ms.locfileid: "112409553"
---
# <a name="creating-a-device-specific-printticket"></a><span data-ttu-id="5d882-103">Создание Device-Specific PrintTicket</span><span class="sxs-lookup"><span data-stu-id="5d882-103">Creating a Device-Specific PrintTicket</span></span>

<span data-ttu-id="5d882-104">Этот раздел не является актуальным.</span><span class="sxs-lookup"><span data-stu-id="5d882-104">This topic is not current.</span></span> <span data-ttu-id="5d882-105">Самые актуальные сведения см. в [спецификации печати схемы](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span><span class="sxs-lookup"><span data-stu-id="5d882-105">For the most current information, see the [Print Schema Specification](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span></span>

<span data-ttu-id="5d882-106">PrintTicket, относящийся к конкретному устройству, предназначен для конкретного устройства и поэтому обычно не переносим на несколько устройств.</span><span class="sxs-lookup"><span data-stu-id="5d882-106">A device-specific PrintTicket targets a particular device and is therefore not generally portable across multiple devices.</span></span>

<span data-ttu-id="5d882-107">Шаги, приведенные в следующем списке, следует использовать при создании PrintTicket, относящегося к конкретному устройству.</span><span class="sxs-lookup"><span data-stu-id="5d882-107">The steps shown in the following list should be used when you create a device-specific PrintTicket.</span></span>

1.  <span data-ttu-id="5d882-108">Получите документ PrintCapabilities, содержащий только соответствующие экземпляры компонента для устройства.</span><span class="sxs-lookup"><span data-stu-id="5d882-108">Obtain a PrintCapabilities document containing only the relevant Feature instances for the device.</span></span> <span data-ttu-id="5d882-109">Запросите документ PrintCapabilities по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="5d882-109">Request a default PrintCapabilities document.</span></span> <span data-ttu-id="5d882-110">Для этого не требуется указывать входной PrintTicket, так как атрибуты устройства (экземпляры компонентов и параметров, а также параметры), используемые для создания PrintTicket, не зависят от конфигурации.</span><span class="sxs-lookup"><span data-stu-id="5d882-110">This does not require you to specify an input PrintTicket because the device attributes (Feature and Option instances and parameters) that are used to construct the PrintTicket are independent of the configuration.</span></span>

2.  <span data-ttu-id="5d882-111">Создайте пустой XML-документ, содержащий корневой элемент PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-111">Create an empty XML document containing the PrintTicket root.</span></span> <span data-ttu-id="5d882-112">Назначьте префикс пространства имен для пространства имен печатной схемы и назначьте префиксы для всех других пространств имен, которые будут использоваться PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-112">Assign a namespace prefix to the Print Schema namespace, and assign prefixes for all other namespaces that will be used by the PrintTicket.</span></span> <span data-ttu-id="5d882-113">Укажите версию схемы PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-113">Specify the PrintTicket Schema version.</span></span>

3.  <span data-ttu-id="5d882-114">Вы можете определить параметры в PrintTicket для каждого компонента и экземпляра Параметердеф, сообщаемого в документе PrintCapabilities, или только те, которые вас интересуют.</span><span class="sxs-lookup"><span data-stu-id="5d882-114">You may define settings in the PrintTicket for every Feature and ParameterDef instance reported in the PrintCapabilities document, or only those of interest to you.</span></span> <span data-ttu-id="5d882-115">Если в интерфейс PrintTicket представлен частичный PrintTicket, то значения по умолчанию для пропущенных экземпляров компонента и Параметердеф автоматически предоставляются во время проверки PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-115">If a partial PrintTicket is presented to the PrintTicket interface, defaults are automatically provided for omitted Feature and ParameterDef instances during PrintTicket validation.</span></span>

4.  <span data-ttu-id="5d882-116">Изучите документ PrintCapabilities для экземпляров компонентов и определите, какие из них необходимо определить в списке PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-116">Examine the PrintCapabilities document for Feature instances and determine which of these you want defined in your PrintTicket.</span></span> <span data-ttu-id="5d882-117">Добавьте эти экземпляры компонентов в PrintTicket, но не переносите содержимое экземпляров компонента в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-117">Add these Feature instances to the PrintTicket, but do not transfer the contents of the Feature instances to your PrintTicket.</span></span> <span data-ttu-id="5d882-118">При передаче подкомпоненту также необходимо передать родительский компонент, и в PrintTicket должно быть сохранено отношение «родители-потомки».</span><span class="sxs-lookup"><span data-stu-id="5d882-118">If you transfer a subfeature, the parent Feature must also be transferred, and the parent-child relationship must be preserved in the PrintTicket.</span></span>

    <span data-ttu-id="5d882-119">Для каждого передаваемой функции определите, какие экземпляры параметров применимы к вашему PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-119">For each Feature that you transfer, determine which Option instances are applicable to your PrintTicket.</span></span> <span data-ttu-id="5d882-120">Перенесите весь параметр, как определено в документе PrintCapabilities, а затем удалите все существующие экземпляры свойств.</span><span class="sxs-lookup"><span data-stu-id="5d882-120">Transfer the entire Option as defined in the PrintCapabilities document, and then remove any Property instances that are present.</span></span> <span data-ttu-id="5d882-121">Экземпляры свойств используются в документах PrintCapabilities, но не предназначены для использования в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-121">The Property instances are used within PrintCapabilities documents, but serve no purpose in the PrintTicket.</span></span> <span data-ttu-id="5d882-122">Сохраните все экземпляры Скоредпроперти, убедившись в том, что их расположение сохраняется. они являются встроенной частью определения параметра.</span><span class="sxs-lookup"><span data-stu-id="5d882-122">Keep all of the ScoredProperty instances, making sure that you preserve their location; they are an intrinsic part of the Option definition.</span></span>

5.  <span data-ttu-id="5d882-123">Экземпляры свойств также можно добавить в любой экземпляр Скоредпроперти.</span><span class="sxs-lookup"><span data-stu-id="5d882-123">You may also add Property instances to any ScoredProperty instance.</span></span> <span data-ttu-id="5d882-124">Экземпляры свойств используются, только если поставщик PrintTicket явно поддерживает их использование.</span><span class="sxs-lookup"><span data-stu-id="5d882-124">Property instances are used only if the PrintTicket provider explicitly supports their use.</span></span> <span data-ttu-id="5d882-125">Каждый поставщик должен документировать назначение и использовать все поддерживаемые экземпляры свойств.</span><span class="sxs-lookup"><span data-stu-id="5d882-125">Each provider should document the purpose and use of all supported Property instances.</span></span> <span data-ttu-id="5d882-126">Обратите внимание, что во время проверки все экземпляры свойств, содержащиеся в экземпляре параметра, удаляются, если только пространство имен свойства не распознается целевым поставщиком PrintCapabilities или PrintTicket, и в документе PrintCapabilities, чьи экземпляры Скоредпроперти вполне соответствуют параметрам, заданным в ссылке.</span><span class="sxs-lookup"><span data-stu-id="5d882-126">Note that during validation, any Property instances contained within an Option instance are stripped off, unless the namespace of the Property is recognized by the target PrintCapabilities or PrintTicket provider, and a candidate Option is found in the PrintCapabilities document whose ScoredProperty instances perfectly match those defined in the reference Option.</span></span>

6.  <span data-ttu-id="5d882-127">Если ключевые слова схемы печати устанавливают для свойства Селектионтипе значение Пиккмани для определенной функции, можно выбрать несколько параметров для этой функции при условии, что параметр, обозначенный как Идентитйоптион, не является одним из выбранных.</span><span class="sxs-lookup"><span data-stu-id="5d882-127">If the Print Schema Keywords set the SelectionType Property to PickMany for a particular Feature, you may select more than one Option for that Feature, provided that the Option designated as IdentityOption is not one of those selected.</span></span> <span data-ttu-id="5d882-128">Идентитйоптион в схеме печати имеет тот же результат, что и параметр None в файлах PPD и Unidrv ГПД. Она служит в качестве холостого.</span><span class="sxs-lookup"><span data-stu-id="5d882-128">IdentityOption in the Print Schema has the same effect as the None option in Postscript PPD files and Unidrv GPD files; it serves as a no-op.</span></span>

7.  <span data-ttu-id="5d882-129">Изучите документ PrintCapabilities для экземпляров Параметердеф, которые должны быть заданы в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-129">Examine the PrintCapabilities document for ParameterDef instances that should be set in your PrintTicket.</span></span> <span data-ttu-id="5d882-130">Для каждого такого экземпляра Параметердеф выберите значение, которое будет использоваться в экземпляре Параметеринит в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-130">For each such ParameterDef instance, select a Value to be used in the ParameterInit instance in the PrintTicket.</span></span> <span data-ttu-id="5d882-131">Это значение должно иметь правильный тип данных и должно находиться в диапазоне, определенном в экземпляре Параметердеф, и должно соответствовать всем другим требованиям, указанным в экземпляре Параметердеф.</span><span class="sxs-lookup"><span data-stu-id="5d882-131">This Value must be of the correct data type and must fall within the range defined in the ParameterDef instance, and must meet all of the other requirements specified in the ParameterDef instance.</span></span> <span data-ttu-id="5d882-132">Используйте экземпляр Параметеринит, чтобы инициализировать параметр для выбранного значения.</span><span class="sxs-lookup"><span data-stu-id="5d882-132">Use a ParameterInit instance to initialize the parameter to the Value you have selected.</span></span>

8.  <span data-ttu-id="5d882-133">Изучите содержимое каждого экземпляра параметра, который отображается в PrintTicket для вхождений экземпляров ParameterRef.</span><span class="sxs-lookup"><span data-stu-id="5d882-133">Examine the contents of each Option instance that appears in the PrintTicket for occurrences of ParameterRef instances.</span></span> <span data-ttu-id="5d882-134">Если соответствующий экземпляр Параметеринит еще не отображается в PrintTicket, выполните предыдущий шаг, чтобы создать экземпляр Параметеринит в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-134">If a corresponding ParameterInit instance does not already appear in the PrintTicket, follow the previous step to create a ParameterInit instance in the PrintTicket.</span></span> <span data-ttu-id="5d882-135">Этот экземпляр Параметеринит предназначен для инициализации параметра, на который ссылается экземпляр ParameterRef.</span><span class="sxs-lookup"><span data-stu-id="5d882-135">The purpose of this ParameterInit instance is to initialize the parameter referenced by the ParameterRef instance.</span></span>

9.  <span data-ttu-id="5d882-136">Помните, что конфликты ограничений могут помешать устройству применить конфигурацию, указанную в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-136">Keep in mind that constraint conflicts might prevent the device from applying the configuration you have specified in the PrintTicket.</span></span> <span data-ttu-id="5d882-137">При необходимости процесс проверки изменяет конфигурацию, определенную в PrintTicket, на одну из конфликтов.</span><span class="sxs-lookup"><span data-stu-id="5d882-137">If necessary, the validation process modifies the configuration defined in the PrintTicket to one that is free of conflicts.</span></span>

10. <span data-ttu-id="5d882-138">Изучите ключевые слова схемы Print для экземпляров свойств, которые должны присутствовать в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-138">Examine the Print Schema Keywords for Property instances that must be present in your PrintTicket.</span></span> <span data-ttu-id="5d882-139">Добавьте экземпляр свойства в PrintTicket для каждого необходимого значения и укажите для него подходящее значение, используя тип элемента value.</span><span class="sxs-lookup"><span data-stu-id="5d882-139">Add a Property instance to your PrintTicket for each that is required, and provide a suitable value for it using the Value element type.</span></span> <span data-ttu-id="5d882-140">Убедитесь, что экземпляры свойств правильно расположены в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-140">Make sure that Property instances are located properly within the PrintTicket.</span></span>

11. <span data-ttu-id="5d882-141">Изучите необязательные экземпляры свойств в схеме PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-141">Examine the optional Property instances in the PrintTicket Schema.</span></span> <span data-ttu-id="5d882-142">Если существуют экземпляры свойств, которые должны находиться в PrintTicket, создайте их в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-142">If there are any such Property instances that should be in your PrintTicket, create them in your PrintTicket.</span></span>

12. <span data-ttu-id="5d882-143">Кроме того, можно добавить закрытые экземпляры свойств на корневом уровне или в любой компонент, параметр или экземпляр свойства.</span><span class="sxs-lookup"><span data-stu-id="5d882-143">You may also add privately-defined Property instances at the root level, or to any Feature, Option, or Property instance.</span></span> <span data-ttu-id="5d882-144">Обратите внимание, что эти закрытые экземпляры свойств удаляются во время проверки, если пространство имен, к которому они принадлежат, не распознается целевым поставщиком PrintCapabilities или PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-144">Note however, that these privately-defined Property instances are stripped off during validation, unless the namespace they belong to is recognized by the target PrintCapabilities or PrintTicket provider.</span></span> <span data-ttu-id="5d882-145">Кроме того, экземпляры свойств, которые появляются в любом месте в экземпляре параметра, удаляются во время проверки, если только документ PrintCapabilities не содержит параметр, который является идеальной точностью.</span><span class="sxs-lookup"><span data-stu-id="5d882-145">In addition, Property instances that appear anywhere within an Option instance are stripped off during validation, unless the PrintCapabilities document contains an Option that is a perfect match.</span></span> <span data-ttu-id="5d882-146">Два экземпляра параметров являются идеальным соответствием, если каждый Скоредпроперти в одном экземпляре Option имеет соответствующий Скоредпроперти в другом, а значения экземпляров Скоредпроперти одинаковы.</span><span class="sxs-lookup"><span data-stu-id="5d882-146">Two Option instances are a perfect match if every ScoredProperty in one Option instance has a corresponding ScoredProperty in the other, and the Values of the ScoredProperty instances are the same.</span></span> <span data-ttu-id="5d882-147">Список распознаваемых экземпляров закрытых свойств и их применения см. в частной схеме поставщика PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="5d882-147">Consult the PrintTicket provider's Private Schema for a list of recognized private Property instances and their uses.</span></span>

13. <span data-ttu-id="5d882-148">Дочерние элементы одного и того же типа элемента не могут быть вложены в глубину более 10 элементов.</span><span class="sxs-lookup"><span data-stu-id="5d882-148">Children of the same element type may not nest to a depth of more than 10 elements.</span></span> <span data-ttu-id="5d882-149">Это правило применяется независимо к каждому типу элементов, которые могут быть определены.</span><span class="sxs-lookup"><span data-stu-id="5d882-149">This rule applies independently to each type of element that can be defined.</span></span>

> [!Note]  
> <span data-ttu-id="5d882-150">XML-содержимое PrintTicket должно быть закодировано с помощью UTF-8 или UTF-16.</span><span class="sxs-lookup"><span data-stu-id="5d882-150">PrintTicket XML content MUST be encoded using either UTF-8 or UTF-16.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="5d882-151">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="5d882-151">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5d882-152">Печать спецификации схемы</span><span class="sxs-lookup"><span data-stu-id="5d882-152">Print Schema Specification</span></span>](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip)
</dt> </dl>

 

 



