---
description: Этот раздел не является актуальным. Самые актуальные сведения см. в спецификации печати схемы.
ms.assetid: 1f991b6b-8443-4234-ad46-dc4220e34c5c
title: Создание универсального элемента PrintTicket
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c34281eda82a48ea0ac4077248547522ddc305ea
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2021
ms.locfileid: "105703489"
---
# <a name="creating-a-generic-printticket"></a>Создание универсального элемента PrintTicket

Этот раздел не является актуальным. Самые актуальные сведения см. в [спецификации печати схемы](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).

Если документ PrintCapabilities для устройства недоступен или если целевое устройство неизвестно, следует создать универсальный PrintTicket. Поскольку нет документа PrintCapabilities, предоставляющего набор функций и элементов параметров или, поддерживаемые экземпляры этих типов элементов должны быть получены непосредственно из ключевых слов схемы Print.

При создании универсального PrintTicket необходимо использовать шаги, приведенные в следующем списке.

1.  Создайте пустой XML-документ, содержащий корневой элемент PrintTicket. Назначьте префикс пространства имен пространству имен для схемы печати. Укажите версию схемы.

2.  Проверьте экземпляры компонента в ключевых словах "Печать схемы" и определите, какие из них необходимо определить в списке PrintTicket. Добавьте эти экземпляры компонентов в PrintTicket. При перемещении подкомпонента необходимо переместить родительский компонент и сохранить связь типа «родители-потомки» между функцией и подкомпонентом в PrintTicket.

    Для каждого переносимого экземпляра компонента определите, какие экземпляры параметров применимы к вашему PrintTicket. В этом наборе экземпляров параметров перенесите все экземпляры параметров, как они появляются в схеме печати, а затем удалите все существующие свойства, за исключением тех, которые имеют значение для PrintTicket. Сохраните все экземпляры Скоредпроперти, убедившись в том, что их расположение сохраняется. они являются встроенной частью определения параметра.

3.  Вы также можете добавлять экземпляры свойств в любой Скоредпроперти. Элементы свойств применимы только в том случае, если поставщик PrintTicket явно поддерживает их использование. Каждый поставщик должен документировать назначение и использовать все поддерживаемые экземпляры свойств. Поскольку у вас нет представления о том, какой поставщик будет обрабатывать PrintTicket, может потребоваться добавить только те экземпляры свойств, которые явно поддерживаются поставщиком PrintTicket системы.

4.  Если ключевые слова схемы печати устанавливают для свойства Селектионтипе значение Пиккмани для определенной функции, можно выбрать несколько параметров для этой функции при условии, что параметр, обозначенный как Идентитйоптион, не является одним из выбранных. Идентитйоптион в схеме печати имеет тот же результат, что и параметр None в файлах PPD и Unidrv ГПД. Она служит в качестве холостого.

5.  Изучите ключевые слова схемы Print для экземпляров Параметердеф, которые должны быть инициализированы в PrintTicket. Для каждого такого экземпляра Параметердеф выберите значение, которое будет использоваться в экземпляре Параметеринит в PrintTicket. Это значение должно иметь правильный тип данных, должен попадать в диапазон, определенный в экземпляре Параметердеф, и должен соответствовать всем другим требованиям, указанным в экземпляре Параметердеф. Используйте экземпляр Параметеринит, чтобы инициализировать параметр для выбранного значения.

    При разработке компонента пользовательского интерфейса Создайте методы создания PrintTicket, чтобы пользователи могли ввести значение для элемента Параметеринит. Кроме того, метод ввода пользовательского интерфейса должен наблюдать и соответствовать любым ограничениям ввода, указанным в соответствующем элементе Параметердеф.

6.  Изучите содержимое каждого экземпляра параметра, который отображается в PrintTicket для вхождений ParameterRef. Если соответствующий экземпляр Параметеринит еще не отображается в PrintTicket, выполните предыдущий шаг, чтобы создать экземпляр Параметеринит в PrintTicket. Этот экземпляр Параметеринит предназначен для инициализации параметра, на который ссылается экземпляр ParameterRef.

7.  Помните, что устройство, обрабатывающее задание, может не поддерживать все функции, указанные в PrintTicket. Помните также, что именованный компонент может поддерживаться, но указанный параметр этой функции может быть недоступен. Те же предостережения применимы к параметрам. Даже если устройство поддерживает именованный параметр, значение, указанное в экземпляре Параметеринит, может не находиться в пределах допустимого диапазона для устройства.

8.  Изучите ключевые слова схемы Print для экземпляров свойств, которые должны присутствовать в PrintTicket. Добавьте экземпляр свойства для каждого из этих элементов в PrintTicket и укажите подходящее значение для него, используя тип элемента value. Убедитесь, что экземпляры свойств правильно расположены в PrintTicket. Убедитесь, что вы обращаетесь к схеме PrintTicket, а не к схеме PrintCapabilities.

9.  Изучите необязательные экземпляры свойств, определенные в схеме PrintTicket. Если существуют экземпляры свойств, которые должны находиться в PrintTicket, создайте их в PrintTicket.

10. Дочерние элементы одного и того же типа элемента не могут быть вложены в глубину более 10 элементов. Это правило применяется независимо к каждому типу элементов, которые могут быть определены.

> [!Note]  
> XML-содержимое PrintTicket должно быть закодировано с помощью UTF-8 или UTF-16.

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Печать спецификации схемы](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip)
</dt> </dl>

 

 



