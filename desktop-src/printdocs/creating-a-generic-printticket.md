---
description: Узнайте, как создать универсальный PrintTicket, если документ PrintCapabilities для устройства недоступен.
ms.assetid: 1f991b6b-8443-4234-ad46-dc4220e34c5c
title: Создание универсального элемента PrintTicket
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 69e611205663138b9cc3c0d3cd315c2c19d2d7e6
ms.sourcegitcommit: 5d4e99f4c8f42f5f543e52cb9beb9fb13ec56c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2021
ms.locfileid: "112409527"
---
# <a name="creating-a-generic-printticket"></a><span data-ttu-id="81481-103">Создание универсального элемента PrintTicket</span><span class="sxs-lookup"><span data-stu-id="81481-103">Creating a Generic PrintTicket</span></span>

<span data-ttu-id="81481-104">Этот раздел не является актуальным.</span><span class="sxs-lookup"><span data-stu-id="81481-104">This topic is not current.</span></span> <span data-ttu-id="81481-105">Самые актуальные сведения см. в [спецификации печати схемы](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span><span class="sxs-lookup"><span data-stu-id="81481-105">For the most current information, see the [Print Schema Specification](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span></span>

<span data-ttu-id="81481-106">Если документ PrintCapabilities для устройства недоступен или если целевое устройство неизвестно, следует создать универсальный PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-106">If the PrintCapabilities document for the device is unavailable, or if the target device is unknown, you should construct a generic PrintTicket.</span></span> <span data-ttu-id="81481-107">Поскольку нет документа PrintCapabilities, предоставляющего набор функций и элементов параметров или, поддерживаемые экземпляры этих типов элементов должны быть получены непосредственно из ключевых слов схемы Print.</span><span class="sxs-lookup"><span data-stu-id="81481-107">Because there is no PrintCapabilities document that provides a set of Feature and Option elements, or parameters, the supported instances of these element types must be obtained directly from the Print Schema Keywords.</span></span>

<span data-ttu-id="81481-108">При создании универсального PrintTicket необходимо использовать шаги, приведенные в следующем списке.</span><span class="sxs-lookup"><span data-stu-id="81481-108">The steps shown in the following list should be used when you create a generic PrintTicket.</span></span>

1.  <span data-ttu-id="81481-109">Создайте пустой XML-документ, содержащий корневой элемент PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-109">Create an empty XML document that contains the PrintTicket root.</span></span> <span data-ttu-id="81481-110">Назначьте префикс пространства имен пространству имен для схемы печати.</span><span class="sxs-lookup"><span data-stu-id="81481-110">Assign a namespace prefix to the Print Schema namespace.</span></span> <span data-ttu-id="81481-111">Укажите версию схемы.</span><span class="sxs-lookup"><span data-stu-id="81481-111">Specify the Schema version.</span></span>

2.  <span data-ttu-id="81481-112">Проверьте экземпляры компонента в ключевых словах "Печать схемы" и определите, какие из них необходимо определить в списке PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-112">Examine the Feature instances in the Print Schema Keywords and determine which of these you want defined in your PrintTicket.</span></span> <span data-ttu-id="81481-113">Добавьте эти экземпляры компонентов в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-113">Add these Feature instances to your PrintTicket.</span></span> <span data-ttu-id="81481-114">При перемещении подкомпонента необходимо переместить родительский компонент и сохранить связь типа «родители-потомки» между функцией и подкомпонентом в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-114">When you transfer a subfeature, you must transfer the parent Feature, and preserve the parent-child relationship between the Feature and subfeature in the PrintTicket.</span></span>

    <span data-ttu-id="81481-115">Для каждого переносимого экземпляра компонента определите, какие экземпляры параметров применимы к вашему PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-115">For each Feature instance that you transfer, determine which Option instances are applicable to your PrintTicket.</span></span> <span data-ttu-id="81481-116">В этом наборе экземпляров параметров перенесите все экземпляры параметров, как они появляются в схеме печати, а затем удалите все существующие свойства, за исключением тех, которые имеют значение для PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-116">From this set of Option instances, transfer each entire Option instance as it appears in the Print Schema, and then remove any Property instances that are present, with the possible exception of those that have significance to your PrintTicket.</span></span> <span data-ttu-id="81481-117">Сохраните все экземпляры Скоредпроперти, убедившись в том, что их расположение сохраняется. они являются встроенной частью определения параметра.</span><span class="sxs-lookup"><span data-stu-id="81481-117">Keep all of the ScoredProperty instances, making sure that you preserve their location; they are an intrinsic part of the Option definition.</span></span>

3.  <span data-ttu-id="81481-118">Вы также можете добавлять экземпляры свойств в любой Скоредпроперти.</span><span class="sxs-lookup"><span data-stu-id="81481-118">You may also add Property instances to any ScoredProperty.</span></span> <span data-ttu-id="81481-119">Элементы свойств применимы только в том случае, если поставщик PrintTicket явно поддерживает их использование.</span><span class="sxs-lookup"><span data-stu-id="81481-119">Property elements are applicable only if the PrintTicket provider explicitly supports their use.</span></span> <span data-ttu-id="81481-120">Каждый поставщик должен документировать назначение и использовать все поддерживаемые экземпляры свойств.</span><span class="sxs-lookup"><span data-stu-id="81481-120">Each provider should document the purpose and use of all supported Property instances.</span></span> <span data-ttu-id="81481-121">Поскольку у вас нет представления о том, какой поставщик будет обрабатывать PrintTicket, может потребоваться добавить только те экземпляры свойств, которые явно поддерживаются поставщиком PrintTicket системы.</span><span class="sxs-lookup"><span data-stu-id="81481-121">Because you have no idea which provider will process the PrintTicket, you might wish to append only the Property instances that are explicitly supported by the system PrintTicket provider.</span></span>

4.  <span data-ttu-id="81481-122">Если ключевые слова схемы печати устанавливают для свойства Селектионтипе значение Пиккмани для определенной функции, можно выбрать несколько параметров для этой функции при условии, что параметр, обозначенный как Идентитйоптион, не является одним из выбранных.</span><span class="sxs-lookup"><span data-stu-id="81481-122">If the Print Schema Keywords set the SelectionType Property to PickMany for a particular Feature, you may select more than one Option for that Feature, provided that the Option designated as IdentityOption is not one of those selected.</span></span> <span data-ttu-id="81481-123">Идентитйоптион в схеме печати имеет тот же результат, что и параметр None в файлах PPD и Unidrv ГПД. Она служит в качестве холостого.</span><span class="sxs-lookup"><span data-stu-id="81481-123">IdentityOption in the Print Schema has the same effect as the None option in Postscript PPD files and Unidrv GPD files; it serves as a no-op.</span></span>

5.  <span data-ttu-id="81481-124">Изучите ключевые слова схемы Print для экземпляров Параметердеф, которые должны быть инициализированы в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-124">Examine the Print Schema Keywords for ParameterDef instances that should be initialized in your PrintTicket.</span></span> <span data-ttu-id="81481-125">Для каждого такого экземпляра Параметердеф выберите значение, которое будет использоваться в экземпляре Параметеринит в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-125">For each such ParameterDef instance, select the Value to be used in the ParameterInit instance in the PrintTicket.</span></span> <span data-ttu-id="81481-126">Это значение должно иметь правильный тип данных, должен попадать в диапазон, определенный в экземпляре Параметердеф, и должен соответствовать всем другим требованиям, указанным в экземпляре Параметердеф.</span><span class="sxs-lookup"><span data-stu-id="81481-126">This Value must be of the correct data type, must fall within the range defined in the ParameterDef instance, and must meet all of the other requirements specified in the ParameterDef instance.</span></span> <span data-ttu-id="81481-127">Используйте экземпляр Параметеринит, чтобы инициализировать параметр для выбранного значения.</span><span class="sxs-lookup"><span data-stu-id="81481-127">Use a ParameterInit instance to initialize the parameter to the Value you have selected.</span></span>

    <span data-ttu-id="81481-128">При разработке компонента пользовательского интерфейса Создайте методы создания PrintTicket, чтобы пользователи могли ввести значение для элемента Параметеринит.</span><span class="sxs-lookup"><span data-stu-id="81481-128">If you are developing a user interface (UI) component, design your PrintTicket generation methods so that users can enter the Value for the ParameterInit element.</span></span> <span data-ttu-id="81481-129">Кроме того, метод ввода пользовательского интерфейса должен наблюдать и соответствовать любым ограничениям ввода, указанным в соответствующем элементе Параметердеф.</span><span class="sxs-lookup"><span data-stu-id="81481-129">In addition, the UI entry method should observe and comply with any input restrictions specified by the associated ParameterDef element.</span></span>

6.  <span data-ttu-id="81481-130">Изучите содержимое каждого экземпляра параметра, который отображается в PrintTicket для вхождений ParameterRef.</span><span class="sxs-lookup"><span data-stu-id="81481-130">Examine the contents of each Option instance that appears in the PrintTicket for occurrences of ParameterRef.</span></span> <span data-ttu-id="81481-131">Если соответствующий экземпляр Параметеринит еще не отображается в PrintTicket, выполните предыдущий шаг, чтобы создать экземпляр Параметеринит в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-131">If a corresponding ParameterInit instance does not already appear in the PrintTicket, follow the previous step to create a ParameterInit instance in the PrintTicket.</span></span> <span data-ttu-id="81481-132">Этот экземпляр Параметеринит предназначен для инициализации параметра, на который ссылается экземпляр ParameterRef.</span><span class="sxs-lookup"><span data-stu-id="81481-132">The purpose of this ParameterInit instance is to initialize the parameter referenced by the ParameterRef instance.</span></span>

7.  <span data-ttu-id="81481-133">Помните, что устройство, обрабатывающее задание, может не поддерживать все функции, указанные в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-133">Keep in mind that the device that processes the job might not support every Feature specified in the PrintTicket.</span></span> <span data-ttu-id="81481-134">Помните также, что именованный компонент может поддерживаться, но указанный параметр этой функции может быть недоступен.</span><span class="sxs-lookup"><span data-stu-id="81481-134">Keep in mind also, that a named Feature might be supported, but a specified Option of that Feature might not be.</span></span> <span data-ttu-id="81481-135">Те же предостережения применимы к параметрам.</span><span class="sxs-lookup"><span data-stu-id="81481-135">The same caveats apply to parameters.</span></span> <span data-ttu-id="81481-136">Даже если устройство поддерживает именованный параметр, значение, указанное в экземпляре Параметеринит, может не находиться в пределах допустимого диапазона для устройства.</span><span class="sxs-lookup"><span data-stu-id="81481-136">Even if a device supports a named parameter, the Value specified in the ParameterInit instance might not be within the valid range for the device.</span></span>

8.  <span data-ttu-id="81481-137">Изучите ключевые слова схемы Print для экземпляров свойств, которые должны присутствовать в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-137">Examine the Print Schema Keywords for Property instances that must be present in your PrintTicket.</span></span> <span data-ttu-id="81481-138">Добавьте экземпляр свойства для каждого из этих элементов в PrintTicket и укажите подходящее значение для него, используя тип элемента value.</span><span class="sxs-lookup"><span data-stu-id="81481-138">Add a Property instance for each of these to your PrintTicket, and provide a suitable value for it using the Value element type.</span></span> <span data-ttu-id="81481-139">Убедитесь, что экземпляры свойств правильно расположены в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-139">Make sure that Property instances are located properly within the PrintTicket.</span></span> <span data-ttu-id="81481-140">Убедитесь, что вы обращаетесь к схеме PrintTicket, а не к схеме PrintCapabilities.</span><span class="sxs-lookup"><span data-stu-id="81481-140">Make sure that you consult the PrintTicket Schema rather than the PrintCapabilities Schema.</span></span>

9.  <span data-ttu-id="81481-141">Изучите необязательные экземпляры свойств, определенные в схеме PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-141">Examine the optional Property instances defined in the PrintTicket Schema.</span></span> <span data-ttu-id="81481-142">Если существуют экземпляры свойств, которые должны находиться в PrintTicket, создайте их в PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="81481-142">If there are any such Property instances that should be in your PrintTicket, create them in your PrintTicket.</span></span>

10. <span data-ttu-id="81481-143">Дочерние элементы одного и того же типа элемента не могут быть вложены в глубину более 10 элементов.</span><span class="sxs-lookup"><span data-stu-id="81481-143">Children of the same element type may not nest to a depth of more than 10 elements.</span></span> <span data-ttu-id="81481-144">Это правило применяется независимо к каждому типу элементов, которые могут быть определены.</span><span class="sxs-lookup"><span data-stu-id="81481-144">This rule applies independently to each type of element that can be defined.</span></span>

> [!Note]  
> <span data-ttu-id="81481-145">XML-содержимое PrintTicket должно быть закодировано с помощью UTF-8 или UTF-16.</span><span class="sxs-lookup"><span data-stu-id="81481-145">PrintTicket XML content MUST be encoded using either UTF-8 or UTF-16.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="81481-146">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="81481-146">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="81481-147">Печать спецификации схемы</span><span class="sxs-lookup"><span data-stu-id="81481-147">Print Schema Specification</span></span>](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip)
</dt> </dl>

 

 



