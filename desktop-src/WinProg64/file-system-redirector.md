---
title: Перенаправитель файловой системы
description: Каталог WINDIR \\ system32 зарезервирован для 64-разрядных приложений в 64-разрядной версии Windows.
ms.assetid: b4d36fe8-8bbb-469b-8ad1-650d559a4c75
keywords:
- перенаправление файловой системы 64-разрядное программирование для Windows
- 64-разрядное руководством по программированию для Windows, 64-разрядное программирование для Windows, перенаправитель файловой системы
- WOW64 64-разрядное программирование Windows, перенаправитель файловой системы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 568ddde85d18f90b951051251774c3509081dfdd
ms.sourcegitcommit: 099ecdda1e83618b844387405da0db0ebda93a65
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2021
ms.locfileid: "111443635"
---
# <a name="file-system-redirector"></a>Перенаправитель файловой системы

Каталог% WINDIR% \\ system32 зарезервирован для 64-разрядных приложений в 64-разрядной версии Windows. Большинство имен файлов DLL не были изменены при создании 64-разрядных версий библиотек DLL, поэтому 32-разрядные версии библиотек DLL хранятся в другом каталоге. WOW64 скрывает это различие с помощью *перенаправителя файловой системы*.

В большинстве случаев каждый раз, когда 32-разрядное приложение пытается получить доступ к папке% WINDIR% \\ System32,% WINDIR% \\ ластгуд \\ System32 или% WINDIR% \\regedit.exe, доступ перенаправляется на путь, зависящий от архитектуры.

> [!Note]  
> Эти пути предоставляются только для справки. В целях совместимости приложения не должны использовать эти пути напрямую. Вместо этого они должны вызывать интерфейсы API, описанные ниже.

 



| Исходный путь                | Путь перенаправления для 32-разрядных процессов x86 | Путь перенаправления для процессов ARM 32-bit |
|------------------------------|------------------------------------------|------------------------------------------|
| % WINDIR% \\ system32           | % WINDIR% \\ SysWOW64                       | % WINDIR% \\ SysArm32                       |
| % WINDIR% \\ ластгуд \\ system32 | % WINDIR% \\ ластгуд \\ SysWOW64             | % WINDIR% \\ ластгуд \\ SysArm32             |
| % WINDIR% \\regedit.exe        | % WINDIR% \\ SysWOW64 \\regedit.exe          | % WINDIR% \\ SysArm32 \\regedit.exe         |



 

Если доступ приводит к тому, что система выводит запрос UAC, перенаправление не происходит. Вместо этого запускается 64-разрядная версия запрашиваемого файла. Чтобы избежать этой проблемы, укажите каталог SysWOW64, чтобы избежать перенаправления и обеспечить доступ к 32-разрядной версии файла, или запустите 32-разрядное приложение с правами администратора, чтобы запрос UAC не отображался.

* * Windows Server 2003 и Windows XP: * * контроль учетных записей не поддерживается.

Некоторые подкаталоги исключены из перенаправления. Доступ к этим подкаталогам не перенаправляется в% WINDIR% \\ SysWOW64: <dl> % WINDIR% \\ system32 \\ катрут  
% WINDIR% \\ System32, \\ Catroot2  
% WINDIR% \\ system32 \\ дриверсторе  
драйверы% WINDIR \\ % \\ system32 \\ и т. д.  
файлы журнала% windir% \\ system32 \\  
% WINDIR% \\ System32, \\ очередь  
</dl>

* * Windows Server 2008, Windows Vista, Windows Server 2003 и Windows XP: * *% WINDIR% \\ system32 \\ дриверсторе перенаправляется.

Чтобы получить имя 32-разрядного системного каталога, 64-разрядные приложения должны использовать функцию [**GetSystemWow64Directory2**](/windows/desktop/api/wow64apiset/nf-wow64apiset-getsystemwow64directory2a) (Windows 10, версия 1511) или функцию [**GetSystemWow64Directory**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderpath) .

Приложения должны использовать функцию [**шжеткновнфолдерпас**](https://www.bing.com/search?q=**SHGetKnownFolderPath**) для определения имени каталога% ProgramFiles%.

**Windows Server 2003 и Windows XP:** Приложения должны использовать функцию [**шжетспеЦиалфолдерпас**](/windows/win32/api/shlobj_core/nf-shlobj_core-shgetspecialfolderpatha) для определения имени каталога% ProgramFiles%.

Приложения могут управлять перенаправитель файловой системы WOW64 с помощью функций [**Wow64DisableWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64disablewow64fsredirection), [**Wow64EnableWow64FsRedirection**](/windows/desktop/api/winbase/nf-winbase-wow64enablewow64fsredirection)и [**Wow64RevertWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64revertwow64fsredirection) . Отключение перенаправления файловой системы влияет на все операции с файлами, выполняемые вызывающим потоком, поэтому его следует отключить только при необходимости для одного вызова [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) и снова включить снова сразу после возврата функции. Отключение перенаправления файловой системы для более длительных периодов может препятствовать тому, что 32-разрядные приложения загружают системные библиотеки DLL, что приводит к сбою приложений.

32-разрядные приложения могут получить доступ к собственному системному каталогу, подставив% WINDIR% \\ сиснативе для% WINDIR% \\ System32. WOW64 распознает Сиснативе как Специальный псевдоним, используемый для указания того, что файловая система не должна перенаправлять доступ. Этот механизм является гибким и простым в использовании, поэтому он является рекомендуемым механизмом обхода перенаправления файловой системы. Обратите внимание, что 64-разрядные приложения не могут использовать псевдоним Сиснативе, так как это виртуальный каталог, а не реальный.

**Windows Server 2003 и Windows XP:** Псевдоним Сиснативе был добавлен начиная с Windows Vista.

 

 