---
title: Производительность и использование памяти в эмуляторе WOW64
description: Производительность и использование памяти в эмуляторе WOW64 определяются следующими факторами.
ms.assetid: 77759840-7b1a-4956-a038-d6374b6ec354
keywords:
- производительность при программировании WOW64 64-bit Windows
- использование памяти при программировании WOW64 64-bit Windows
- WOW64 64-bit Windows программирование, производительность
- WOW64 64-bit Windows программирование, использование памяти
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 03d5dd20cb42245318bf2666da788b9eea9e371c3945155c1b03b876fa513f5b
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119613834"
---
# <a name="performance-and-memory-consumption-under-wow64"></a>Производительность и использование памяти в эмуляторе WOW64

Производительность и использование памяти в эмуляторе WOW64 определяются следующими факторами.

-   Оборудование процессора. Эмуляция инструкций выполняется на микросхеме. На процессоре x64 инструкции x86 выполняются в собственном процессоре. Следовательно, скорость выполнения в эмуляторе WOW64 на x64 аналогична скорости в 32-разрядной Windows. На процессорах Intel Itanium и любых процессорах ARM64 больше программного обеспечения, вовлеченное в эмуляцию, и в результате производительность снижается.
-   Издержки преобразователей API. Эти издержки невелики по сравнению с системными вызовами ядра NT. Функции ядра NT должны вызываться редко.
-   Размер виртуальной памяти. В процессоре Intel Itanium Подсистема WOW64 добавляет значительные издержки, если два или более экземпляра одного и того же 32-разрядного приложения работают одновременно. Это связано с нестандартными страницами размером 8 КБ в Intel Itanium, что усложняет эмуляцию собственных страниц размером 4 КБ в архитектуре x86 (дополнительные страницы помечены как доступные для записи; все страницы, доступные для записи, являются частными для процесса). Это может негативно сказаться на масштабируемости служб терминалов на определенных процессорах. Это не так для процессора x64.
-   Рабочий набор. WOW64 увеличивает размер рабочего набора приложения.

WOW64 позволяет 32-разрядным приложениям использовать преимущества 64-разрядного ядра. Поэтому в 32-разрядных приложениях может использоваться большее количество дескрипторов ядра и окон. Однако 32-разрядные приложения могут не иметь возможности создавать столько потоков в эмуляторе WOW64, сколько это возможно при работе в системах на базе x86, так как WOW64 выделяет дополнительный 64-битный стек (обычно 512 КБ) для каждого потока. Кроме того, некоторое количество адресного пространства резервируется для самого подсистемы WOW64 и используемых им структур данных. Зарезервированное значение зависит от процессора; Дополнительные сведения зарезервированы на процессорах Intel Itanium, чем на процессорах x64 или ARM64.

Если в приложении задан флаг с большим количеством адресов для [**\_ файла \_ \_ \_ образа**](/windows/desktop/api/dbghelp/ns-dbghelp-loaded_image) , установленный в заголовке образа, каждое 32-разрядное приложение получает 4 ГБ виртуального адресного пространства в среде WOW64. Если флаг **с \_ \_ большим \_ адресом \_ файла изображения** не установлен, каждое 32-разрядное приложение получает 2 ГБ виртуального адресного пространства в среде WOW64.

 

 