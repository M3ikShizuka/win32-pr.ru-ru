---
title: Предотвращение полиморфизма
description: Новые типы данных включают два полиморфизма типа, INT \_ PTR и long \_ ptr.
ms.assetid: 3d18016d-772c-45bc-8057-7281e71a8707
keywords:
- полиморфизм 64-bit Windows программирование
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dec0fd26944d58a9ba0d253da8b8dbcd68156436
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127056262"
---
# <a name="avoiding-polymorphism"></a>Предотвращение полиморфизма

Новые типы данных включают два полиморфизма типа, **int \_ ptr** и **Long \_ ptr**. в 32-разрядной Windows значение **int \_ ptr** сопоставляется с **int** и **long \_ ptr** **.** в 64-разрядном Windows оба типа сопоставляются с внутренним типом **\_ \_ int64** . Компилятор MIDL поддерживает эти типы для удаленных вызовов процедур, но существует ряд ограничений, которые следует помнить при использовании в распределенной среде. Обязательно закомментируйте код соответствующим образом.

Независимо от размера платформы, размер данных в этих преводных типах всегда равен 32 бит. при демаршалировании в 64-разрядном Windows знак библиотеки времени выполнения расширяет значения со знаком и присваивает нулевое значение байтов высокого порядка для значения без знака. При помещении в канал 64-битного значения время выполнения усекает байты высокого порядка. Поэтому можно использовать только младшие 32-разрядные значения.

Используйте полиморфизмы, только если это необходимо для переноса. Для новых интерфейсов используйте встроенные целочисленные типы с интерфейсом MIDL **\_ \_ Int32** и **\_ \_ Int64** или используйте тип указателя или маркер контекста, в зависимости от типа передаваемых данных.

64-разрядный компилятор поддерживает новый полиморфизм **\_ \_ int3264**. Опять же, этот тип был разработан для поддержки усилий по переносу, в данном случае для прозрачной поддержки типов **uint \_ ptr** . (Другой внутренний, **\_ \_ long3264**, будет поддерживать тип **типа \_ ulong** .) Не используйте **\_ \_ int3264** напрямую; используйте тип **int \_ ptr** , если требуется тип с полиморфизмом для целей переноса.

 

 




