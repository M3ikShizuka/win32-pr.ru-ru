---
title: Общие рекомендации по переносу
description: перенос 32-разрядных приложений на 64-разрядную версию Microsoft Windows будет проще, чем перенос 16-разрядных приложений в 32-bit Windows. Тем не менее, перемещение будет более плавным благодаря тщательному планированию. Ниже приведены некоторые общие рекомендации.
ms.assetid: 28c1656e-93a2-441b-8946-18017e0b2b29
keywords:
- перенос 32-разрядных приложений на 64-разрядную Windows 64 Windows-разрядное программирование
- 64-разрядное Windows руководство по программированию 64-bit Windows, рекомендации по переносу
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3a586318ecc6ec8852077052cbcff41bffacff6c35c36d23de4b020ce19f12af
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119680244"
---
# <a name="general-porting-guidelines"></a>Общие рекомендации по переносу

перенос 32-разрядных приложений на 64-разрядную версию Microsoft Windows будет проще, чем перенос 16-разрядных приложений в 32-bit Windows. Тем не менее, перемещение будет более плавным благодаря тщательному планированию. Ниже приведены некоторые общие рекомендации.

## <a name="planning"></a>Планирование

-   Определите величину усилий, требуемых для порта. Оценить, сколько работы вовлечено, определив следующие элементы:
    -   Проблема с 32-битным кодом. Скомпилируйте 32-разрядный код с помощью 64-разрядного компилятора и изучите экстент ошибок и предупреждений.
    -   Общие компоненты или зависимости. Определите, какие компоненты приложения берутся из других групп и планируете ли эти команды разрабатывать 64-разрядные версии кода.
    -   Устаревший или код сборки. 16-разрядные приложения Windows не работают на 64-разрядной Windows и должны быть перезаписаны. Хотя код сборки x86 выполняется в WOW64, может потребоваться переписать этот код, чтобы воспользоваться преимуществами скорости архитектуры Intel Itanium.
-   Перенос всего приложения, а не только его частей.

    Хотя можно перенести части приложения или ограничить код до 2G с помощью/LARGEADDRESSAWARE: нет, эта стратегия меняет краткосрочный выигрыш на долгосрочные.

    > [!Note]  
    > /LARGEADDRESSAWARE: для двоичного файла ARM64 не учитывается.

     

-   Найти замены для технологий, которые не будут перенесены.

    Некоторые технологии, включая DAO (объект доступа к данным) и ядро базы данных Jet Red, не будут перенесены в 64-разрядные Windows.

-   Рассматривайте 64-разрядную версию в виде отдельного выпуска продукта.

    Несмотря на то, что ваш 64-разрядный продукт может совместно использовать ту же базу кода, что и ваша 32-разрядная версия, она требует дополнительного тестирования и может иметь другие соображения о выпуске.

## <a name="development"></a>Разработка

-   Начните разрабатывать совместимый код прямо сейчас.

    разработчики могут приступить к написанию совместимого кода, используя новейшие файлы заголовков Windows и новые типы данных без негативных последствий при разработке 32-разрядного продукта. Дополнительные сведения см. в разделе [Подготовка к 64-разрядной Windows](getting-ready-for-64-bit-windows.md).

-   Убедитесь, что код может быть скомпилирован как для 32, так и для 64-разрядной Windows.

    Новая модель данных была разработана для того, чтобы разрешить сборку 32-и 64-разрядных приложений из одной базы кода с несколькими изменениями. группы разработки SQL Server и Windows разрабатывают 32-и 64-разрядные версии своих продуктов из одной и той же базы кода.

-   Для лучшей производительности используйте новые функции оптимизации компилятора.

    Оптимизация кода для процессоров Intel Itanium важнее, чем для x86. Компилятор предполагает наличие многих функций оптимизации, ранее обработанных микропроцессором. Вы можете максимально увеличить производительность 64-разрядного приложения, используя два новых средства оптимизации компилятора: Оптимизация с использованием *профиля* и *Оптимизация всей программы*. Обе эти функции приводят к длительному времени сборки и нуждаются в ранней разработке хороших сценариев тестирования.

    *Оптимизация, управляемая профилированием* , включает в себя двухэтапный процесс компиляции. Во время первой компиляции код инструментирован для отслеживания поведения выполнения. Эти сведения используются во второй компиляции для указания всех возможностей оптимизации.

    *Оптимизация всей программы* анализирует код во всех файлах приложения, а не только в одной. Такой подход повышает производительность несколькими способами, включая лучшее встраивание, а также улучшает анализ побочных эффектов и пользовательские соглашения о вызовах.

## <a name="testing"></a>Тестирование

-   Определите, выполняется ли тестирование 64 или 32-разрядного кода в эмуляторе WOW64.

    Некоторые приложения включают в себя как машинный, так и не64 управляемый код и 32-разрядный код, выполняющиеся в WOW64. Внимательно изучите это время при разработке плана тестирования и определите, должны ли средства тестирования быть 64-разрядными, 32-разрядными или комбинацией. Часто требуется тестировать 64-и 32-разрядные версии приложения на 64-bit Windows.

-   Тестирование часто используемых 32-разрядных компонентов.

    Сначала перекомпилируйте код до 64-разрядного и тестового. Во-вторых, устраните проблемы, выполните повторную компиляцию в 32-бит, а затем протестируйте. В-третьих, выполните повторную компиляцию до 64 бит и тест.

-   Проверьте компоненты COM и RPC.

    Убедитесь, что как 32, так и 64-разрядные компоненты COM и RPC правильно обмениваются данными. Также может потребоваться тестирование связи с 16-разрядными компонентами по сети.

-   Протестируйте 32-разрядную версию на 64-Windows.

    клиенты могут продолжать использовать 32-разрядные приложения на 64-разрядной Windows, где проблемы с производительностью и памятью не являются главными соображениями.

-   Тестирование различных конфигураций памяти.

    Добавление больших объемов памяти на сервере иногда предоставляет ранее незамеченные проблемы в приложении или операционной системе.

 

 




