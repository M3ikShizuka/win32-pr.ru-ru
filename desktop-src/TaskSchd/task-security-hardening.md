---
title: Усиление безопасности задач
description: Использование функции усиления безопасности задач позволяет владельцам задач выполнять свои задачи с минимальными необходимыми привилегиями.
ms.assetid: ba03add5-aa05-4bef-baec-684ca17363bd
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0ab70679d605a9ad56c6d26116245ae17d41a7a1
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104253292"
---
# <a name="task-security-hardening"></a>Усиление безопасности задач

Использование функции усиления безопасности задач позволяет владельцам задач выполнять свои задачи с минимальными необходимыми привилегиями. Обратите внимание, что эта функция включена по умолчанию, и владельцы задач могут вносить дальнейшие изменения с помощью массива идентификаторов безопасности маркера процесса задачи и необходимых прав задач.

## <a name="task-process-token-sid-type-and-task-required-privileges-array"></a>Тип идентификатора безопасности маркера процесса задачи и массив необходимых привилегий для задачи

Указание **процесстокенсидтипе** на уровне определения задачи позволяет владельцам задач запрашивать запуск процесса задачи с типом SID "None" или "Unrestricted". Если поле имеется в определении задачи, проверка гарантирует, что задача UserId содержит имя или соответствующую строку идентификатора безопасности для одной из встроенных учетных записей службы: "СЕТЕВая служба" или "ЛОКАЛЬная служба".

Тип SID "нет" означает, что задача выполняется в процессе, который не содержит идентификатор безопасности токена процесса (изменения в списке групп токенов процессов не вносятся). Идентификатор безопасности учетной записи участника задачи (LocalService/NetworkService) в этом случае имеет полный доступ к маркеру процесса.

Тип SID "Unrestricted" означает, что идентификатор безопасности задачи будет производным от полного пути задачи и будет добавлен в список групп токенов процесса. Например, \\ \\ рактаск Microsoft Windows \\ RAC \\ , который выполняется в учетной записи Local Service, идентификатор безопасности задачи является производным от имени Microsoft-Windows-RAC-рактаск, где символ "-" заменяется на " \\ ", так как "" \\ является недопустимым знаком имени пользователя. Хорошо известное имя группы для идентификатора безопасности задачи — «задача NT \\ <modified full task path> » ( \\ Формат имени пользователя имя_домена). Список управления доступом по умолчанию для маркера процесса (DACL) также изменится, чтобы разрешить полный доступ для идентификатора SID задачи и ИД безопасности локальной системы, а также управлять доступом на уровне SID учетной записи участника задачи. "schtasks.exe/шовсид/TN <full task path> " отобразит идентификатор безопасности задачи, соответствующий задаче.

Когда запускается действие задачи, не относящегося к COM-сервером, подсистема планирования записывает в журнал учетной записи участника задачи, получает маркер процесса и запрашивает список привилегий, которые имеет маркер, а затем сравнивает его со списком привилегий, указанным в Рекуиредпривилежес. Если в последнем случае привилегия не указана, то она помечается как \_ привилегия SE \_ . Затем исполняемое действие будет запущено с результирующим маркером маркера с помощью API параметр CreateProcessAsUser.

Когда запускается действие задачи COM, оно должно быть активировано taskhost.exe процессом. Механизм планирования запрашивает блок контекста каждого запущенного taskhost.exe с той же учетной записью, что и начальная задача. Если обнаруживается, что ведущий процесс был запущен с надмножеством привилегий, необходимых для запуска задачи, то эта задача будет размещена в этом процессе. Если такой процесс не найден, он объединяет сведения о усилении безопасности всех задач, выполняемых в серверов задач, под учетной записью участника задачи с указанной маской Рекуиредпривилежес, а затем запускает новый экземпляр taskhost.exe.

Если Рекуиредпривилежес отсутствует в определении задачи, для процесса задачи будут использоваться права доступа по умолчанию для учетной записи участника задачи без SeImpersonatePrivilege. Если **процесстокенсидтипе** отсутствует в определении задачи, в качестве значения по умолчанию используется "unrestricteded".

## <a name="related-topics"></a>См. также

<dl> <dt>

[Сведения о регистрации задачи](task-registration-information.md)
</dt> <dt>

[Сведения о планировщик задач](about-the-task-scheduler.md)
</dt> <dt>

[Контексты безопасности для задач](security-contexts-for-running-tasks.md)
</dt> </dl>

 

 




