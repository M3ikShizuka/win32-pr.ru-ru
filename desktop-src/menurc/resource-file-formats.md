---
title: Форматы файлов ресурсов
description: В этом разделе описывается формат двоичного файла ресурсов, создаваемого компилятором ресурсов на основе содержимого файла определения ресурса.
ms.assetid: a0b17555-f50a-4d58-b2bc-760843dd67eb
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b90c789cd1684c1f5ca31af0e2d60a31052ca03f
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "103890621"
---
# <a name="resource-file-formats"></a>Форматы файлов ресурсов

В этом разделе описывается формат двоичного файла ресурсов, создаваемого компилятором ресурсов на основе содержимого файла определения ресурса. Этот файл обычно имеет расширение. Res. Компоновщик переформатирует RES-файл в файл объекта ресурса, а затем связывает его с исполняемым файлом приложения.

Файл двоичных ресурсов состоит из нескольких Объединенных записей ресурсов. Каждая запись состоит из заголовка ресурса и данных для этого ресурса. Заголовок ресурса в файле выстраивается по **значению DWORD** и состоит из следующих элементов:

-   Значение **типа DWORD** , содержащее размер заголовка ресурса
-   Значение **типа DWORD** , содержащее размер данных ресурса
-   Тип ресурса
-   Имя ресурса
-   Дополнительные сведения о ресурсах

Структура [**ресаурцехеадер**](resourceheader.md) описывает формат этого заголовка. Данные ресурса следуют заголовку ресурса и относятся к каждому типу ресурса. Некоторые ресурсы также используют структуру заголовков групп, связанных с ресурсами, для предоставления сведений о группе ресурсов.

## <a name="accelerator-table-resources"></a>Ресурсы таблицы ускорителя

Таблица сочетаний клавиш — это одна запись ресурса в файле ресурсов. У него нет заголовка группы. Структура [**акцелтаблинтри**](acceltableentry.md) описывает каждую запись в таблице сочетаний клавиш. Разрешено использовать несколько таблиц ускорителя.

## <a name="cursor-and-icon-resources"></a>Ресурсы курсора и значков

Система обрабатывает каждый значок и курсор как один файл. Однако они хранятся в RES-файлах и исполняемых файлах в виде группы ресурсов значков или группы ресурсов курсора. Формат файлов ресурсов значков и курсоров аналогичен. В RES-файле заголовок группы ресурсов соответствует всем отдельным компонентам значков или групп курсоров.

Формат каждого компонента значка во многом напоминает формат файла ICO. Каждый образ значка хранится в структуре [**битмапинфо**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) , за которой следует цвет битовой маски **XOR** значка (DIB), не зависящей от устройства. Монохромный DIB бит значка **и** маски соответствует цвету DIB.

Формат каждого компонента курсора напоминает формат файла cur. Каждый образ курсора хранится в структуре [**битмапинфо**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) , за которой следуют МОНОХРОМные DIB-биты маски **XOR** курсора, а затем — монохромные DIB-биты курсора **и** маски. Обратите внимание, что существует разница в точечных рисунках двух ресурсов: в отличие от значков, маски XOR для курсора не имеют цветового DIB-бита. Несмотря на то, что точечные рисунки масок курсоров являются монохромными и не имеют заголовков DIB или цветных таблиц, они по-прежнему имеют формат DIB в соответствии с выравниванием и направлением. Еще одно существенное различие между курсорами и значками заключается в том, что курсоры имеют активную точку, а значки — нет.

Заголовок группы для ресурсов значков и курсоров состоит из структуры [**невхеадер**](newheader.md) и одной или нескольких структур [**ресдир**](resdir.md) . Для каждого значка или курсора существует одна структура **ресдир** . Заголовок группы содержит сведения, необходимые приложению для выбора правильного значка или курсора для показа. Заголовок группы и данные, повторяющиеся для каждого значка или курсора в группе, имеют фиксированную длину. Это позволяет приложению получить случайный доступ к данным.

## <a name="dialog-box-resources"></a>Ресурсы диалоговых окон

Диалоговое окно также является одной записью ресурса в файле ресурсов. Он состоит из одной структуры заголовка диалогового окна [**длгтемплате**](/windows/desktop/api/winuser/ns-winuser-dlgtemplate) и одной структуры [**длгитемтемплате**](/windows/desktop/api/winuser/ns-winuser-dlgitemtemplate) для каждого элемента управления в диалоговом окне. Структуры [**длгтемплатикс**](/windows/desktop/dlgbox/dlgtemplateex) и [**длгитемтемплатикс**](/windows/desktop/dlgbox/dlgitemtemplateex) описывают формат расширенных ресурсов диалогового окна.

## <a name="font-resources"></a>Ресурсы шрифтов

Шрифты хранятся в файле ресурсов как группа ресурсов. Отдельные шрифты составляют группу шрифтов. Инструкция определения ресурса в [инструкции Font](./font-statement.md) в. В файле RC определяется каждый шрифт. Каждый отдельный шрифт в ресурсе состоит из полного содержимого связанного фнт файла. Структура [**фонтграуфдр**](fontgrouphdr.md) соответствует всем отдельным компонентам Font в RES-файле.

Ресурсы шрифтов не добавляются в ресурсы конкретного приложения. Вместо этого они обычно добавляются в исполняемые файлы с расширением FON. Эти файлы обычно являются библиотеками DLL только для ресурсов, а не приложениями.

## <a name="menu-resources"></a>Ресурсы меню

*Ресурс меню* состоит из структуры [**менухеадер**](menuheader.md) , за которой следует одна или несколько структур [**нормалменуитем**](normalmenuitem.md) или [**попупменуитем**](popupmenuitem.md) , по одному для каждого пункта меню в шаблоне меню. [**\_ \_ Заголовок шаблона менуекс**](menuex-template-header.md) и структуры [**\_ \_ элементов шаблона менуекс**](menuex-template-item.md) описывают формат ресурсов расширенного меню.

## <a name="message-table-resources"></a>Ресурсы таблицы сообщений

*Таблица сообщений* — это ресурс, который содержит форматированный текст, отображаемый в виде сообщения об ошибке или в окне сообщения. Основной структурой в ресурсе таблицы сообщений является структура [**\_ \_ данных ресурса сообщения**](/windows/desktop/api/Winnt/ns-winnt-message_resource_data) .

## <a name="version-resources"></a>Ресурсы версии

Основной структурой в ресурсе версии является структура [**VS \_ FIXEDFILEINFO**](/windows/win32/api/verrsrc/ns-verrsrc-vs_fixedfileinfo) . К дополнительным структурам относится структура [**варфилеинфо**](varfileinfo.md) для хранения данных о языке, а также [**стрингфилеинфо**](stringfileinfo.md) для определяемой пользователем строки. Все строки в ресурсе версии имеют формат Юникода. Каждый блок данных выдается по границе **DWORD** .

 

 