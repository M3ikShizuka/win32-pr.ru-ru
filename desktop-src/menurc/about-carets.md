---
title: Около крышки
description: В этом разделе рассматриваются символы крышки.
ms.assetid: 4487c93c-9a0f-467c-86b1-969f664d5526
keywords:
- ресурсы, символы крышки
- крышки, удаление
- Мигающие линии
- Мигающие блоки
- Мигающие растровые изображения
- крышки, видимость
- крышки, мигающие моменты
- мерцание времени
- крышки, позиции
- Удаление крышки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4a19eb3895ada13297f090a09529b2bcb7c75dee
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127344395"
---
# <a name="about-carets"></a>Около крышки

Система предоставляет один курсор на очередь сообщений. Окно должно создавать курсор, только если он имеет фокус клавиатуры или активен. Окно должно уничтожить курсор перед тем, как теряет фокус клавиатуры или становится неактивным. Дополнительные сведения о вводе с клавиатуры см. в разделе [Ввод с клавиатуры](/windows/desktop/inputdev/keyboard-input).

Используйте функцию [**креатекарет**](/windows/desktop/api/Winuser/nf-winuser-createcaret) , чтобы указать параметры для курсора. Система формирует курсор путем инвертирования цвета пикселя в прямоугольнике, заданном положением, шириной и высотой курсора. Ширина и высота указываются в логических единицах. Таким образом, внешний вид курсора подчиняется режиму сопоставления окна.

В этом разделе рассматриваются следующие темы.

-   [Видимость курсора](#caret-visibility)
-   [Время мерцания курсора](#caret-blink-time)
-   [Позиции курсора](#caret-position)
-   [Удаление курсора](#removing-a-caret)

## <a name="caret-visibility"></a>Видимость курсора

После определения курсора используйте функцию [**шовкарет**](/windows/desktop/api/Winuser/nf-winuser-showcaret) , чтобы сделать курсор видимым. Когда появится курсор, он автоматически начнет мигать. Чтобы отобразить сплошной курсор, система инвертирует каждый пиксель в прямоугольнике. чтобы отобразить серый курсор, система инвертирует все остальные Пиксели. чтобы отобразить знак крышки, система инвертирует только белые биты точечного рисунка.

## <a name="caret-blink-time"></a>Время мерцания курсора

Затраченное время (в миллисекундах), необходимое для инвертирования курсора, называется *временем мигания*. Курсор будет мигать, пока поток, владеющий очередью сообщений, имеет конвейер обработки сообщений, обрабатывающий сообщения.

Пользователь может задать время мерцания курсора с помощью панели управления, и приложения должны учитывать параметры, выбранные пользователем. Приложение может определить время мерцания курсора с помощью функции [**жеткаретблинктиме**](/windows/desktop/api/Winuser/nf-winuser-getcaretblinktime) . При написании приложения, позволяющего пользователю настраивать время мерцания, например приложение панели управления, используйте функцию [**сеткаретблинктиме**](/windows/desktop/api/Winuser/nf-winuser-setcaretblinktime) , чтобы установить частоту мерцания в указанное число миллисекунд.

*Время* в миллисекундах — это время, затраченное на отображение, инверсию и восстановление экрана курсора, в мс. Время мигания курсора вдвое больше времени мерцания.

## <a name="caret-position"></a>Позиции курсора

Вы можете определить позиции курсора с помощью функции [**жеткаретпос**](/windows/desktop/api/Winuser/nf-winuser-getcaretpos) . Значение положения в клиентских координатах копируется в структуру, указанную параметром в **жеткаретпос**. Приложение может перемещать курсор в окне с помощью функции [**сеткаретпос**](/windows/desktop/api/Winuser/nf-winuser-setcaretpos) . Окно может перемещать курсор, только если он уже владеет курсором. **Сеткаретпос** может перемещать курсор независимо от того, является ли он видимым.

## <a name="removing-a-caret"></a>Удаление курсора

Вы можете временно удалить курсор, скрыв его, или навсегда удалить курсор, удалив его. Чтобы скрыть курсор, используйте функцию [**хидекарет**](/windows/desktop/api/Winuser/nf-winuser-hidecaret) . Это полезно в том случае, когда приложение должно перерисовывать экран при обработке сообщения, но должен отследить курсор. Когда приложение завершает рисование, оно может снова отобразить курсор с помощью функции [**шовкарет**](/windows/desktop/api/Winuser/nf-winuser-showcaret) . Скрытие курсора не приводит к уничтожению его фигуры или недействительности курсора. Скрытие курсора является кумулятивным; то есть, если приложение вызывает **хидекарет** пять раз, оно также должно вызвать **шовкарет** пять раз, прежде чем курсор появится снова.

Чтобы удалить курсор с экрана и уничтожить его фигуру, используйте функцию [**дестройкарет**](/windows/desktop/api/Winuser/nf-winuser-destroycaret) . **Дестройкарет** уничтожает курсор, только если окно, вовлеченное в текущую задачу, принадлежит курсору.

 

 