---
description: Обратите внимание, что нельзя указать порядок, в котором установщик регистрирует или отменяет регистрацию библиотек DLL с помощью действий Селфрегмодулес и Селфунрегмодулес.
ms.assetid: 46ee5ea2-35fd-4352-8a45-572d6fb5e080
title: Указание порядка самостоятельной регистрации
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9bb26fbebad3167fbea95679a1ea7a29c28946ae6fa2dd2b014be6ade986e28f
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120039684"
---
# <a name="specifying-the-order-of-self-registration"></a>Указание порядка самостоятельной регистрации

Обратите внимание, что нельзя указать порядок, в котором установщик регистрирует или отменяет регистрацию библиотек DLL с помощью действий [селфрегмодулес](selfregmodules-action.md) и [селфунрегмодулес](selfunregmodules-action.md) . Эти действия регистрируют все модули, перечисленные в [таблице селфрег](selfreg-table.md). Установщик не выполняет самостоятельную регистрацию файлов .exe.

Чтобы указать порядок, в котором установщик регистрирует или отменяет регистрацию модулей, необходимо использовать два [настраиваемых действия](custom-actions.md) для каждого модуля. Одно настраиваемое действие для DllRegisterServer и второе для DllUnregisterServer. Эти настраиваемые действия должны быть созданы в [таблице инсталлексекутесекуенце](installexecutesequence-table.md) в точке последовательности везде, где будет зарегистрирована или отменена регистрация библиотеки DLL.

В следующем примере показано, как создать базу данных, чтобы запланировать самостоятельную регистрацию библиотеки DLL в определенной точке последовательности действий.

[Таблица файлов](file-table.md) (частичная)



| File  | Компонент\_ | FileName  | Последовательность |
|-------|-------------|-----------|----------|
| myDll | myComponent | Mydll.dll | 13       |



 

[Таблица Component](component-table.md) (частичная)



| Компонент   | ComponentId | Каталог\_ | Путь |
|-------------|-------------|-------------|---------|
| myComponent | {*a GUID*}  | myFolder    | myDll   |



 

[Таблица каталога](directory-table.md)



| Каталог | \_Родительский каталог | дефаултдир          |
|-----------|-------------------|---------------------|
| TARGETDIR |                   | SourceDir           |
| myFolder  | TARGETDIR         | myFolder \| мою папку |



 

[Таблица CustomAction](customaction-table.md)



| Действие     | Тип | Источник   | Назначение                                     |
|------------|------|----------|--------------------------------------------|
| мидллрег   | 3170 | myFolder | " \[ Системфолдер \] msiexec"/y " \[ \# myDll \] " |
| мидллунрег | 3170 | myFolder | " \[ Системфолдер \] msiexec"/z " \[ \# myDll \] " |



 

[Таблица инсталлексекутесекуенце](installexecutesequence-table.md) (частичная)



| Действие           | Условие         | Последовательность |
|------------------|-------------------|----------|
| селфунрегмодулес |                   | 2200     |
| мидллунрег       | $myComponent = 2    | 2201     |
| ремовефилес      |                   | 3500     |
| инсталлфилес     |                   | 4000     |
| селфрегмодулес   |                   | 6500     |
| мидллрег         | $myComponent>2 | 6501     |



 

 

 



