---
description: установщик Windows может определить, когда требуется перезагрузка системы, и автоматически предложить пользователю перезагрузить компьютер в конце установки.
ms.assetid: 10117d2c-c2c8-456f-9fce-a89c2d69d3c1
title: Перезагрузка системы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 23e5ff72b91b50a3da03fbfb0c52ff351af907c7f89b400120c463dab233f288
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119626834"
---
# <a name="system-reboots"></a>Перезагрузка системы

установщик Windows может определить, когда требуется перезагрузка системы, и автоматически предложить пользователю перезагрузить компьютер в конце установки. Например, установщик автоматически запрашивает перезагрузку, если требуется заменить все файлы, используемые во время установки.

приложения, использующие [установщик Windows](windows-installer-portal.md) версии 4,0 или более поздней для установки и обслуживания, автоматически используют [диспетчер перезапуска](../rstmgr/restart-manager-portal.md) для уменьшения числа перезапусков системы. Windows в установщике версии 4,0 или более поздней есть свойства и политики, позволяющие авторам пакетов и администраторам управлять взаимодействием установщик Windows с диспетчером перезапуска. дополнительные сведения см. в разделе [использование установщик Windows с диспетчером перезапуска](using-windows-installer-with-restart-manager.md).

Авторы пакетов установки могут запланировать и подавить перезагрузки с помощью стандартных действий в таблицах последовательности и путем установки свойств. Для управления перезагрузками системы используются следующие действия и свойства.



| Действие, диалоговое окно или свойство                                                | Краткое описание                                                                                                                                             |
|--------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [Действие Форцеребут](forcereboot-action.md)                                   | Запрашивает у пользователя перезагрузку во время установки.                                                                                                        |
| [Действие Счедулеребут](schedulereboot-action.md)                             | Запрашивает у пользователя перезагрузку в конце установки.                                                                                                 |
| [**Перезагрузка свойства**](reboot.md)                                              | Принудительное включение или отключение определенных автоматических запросов на перезагрузку системы.                                                                                           |
| [**РЕБУТПРОМПТ, свойство**](rebootprompt.md)                                  | Подавляет отображение запросов на перезагрузку для пользователя. Все необходимые перезагрузки происходят автоматически.                                                           |
| [**АФТЕРРЕБУТ, свойство**](afterreboot.md)                                    | Обычно используется в условии, накладываемом действием Форцеребут.                                                                                               |
| [Действие Инсталлвалидате](installvalidate-action.md)                           | Отображает диалоговое окно Филесинусе (при необходимости), предоставляя пользователям возможность завершать процессы и устраняя некоторые перезагрузки системы.                              |
| [Диалоговое окно Филесинусе](filesinuse-dialog.md)                                     | Предоставляет пользователям возможность завершать процессы, чтобы избежать некоторых перезагрузок системы.                                                                              |
| [Диалоговое окно Мсирмфилесинусе](msirmfilesinuse-dialog.md)                           | Дает пользователям возможность использовать [Диспетчер перезапуска](../rstmgr/restart-manager-portal.md) для закрытия и перезапуска приложений. доступно начиная с версии установщик Windows 4,0. |
| [**Реплацединусефилес, свойство**](replacedinusefiles.md)                      | Задайте значение, если установщик установит файл, который используется. Это свойство используется настраиваемыми действиями для обнаружения необходимости перезагрузки.                                |
| [**мсирестартманажерконтрол**](msirestartmanagercontrol.md)                   | свойство для отключения установщик Windows взаимодействия с [диспетчером перезапуска](../rstmgr/restart-manager-portal.md). доступно начиная с версии установщик Windows 4,0.          |
| [**мсидисаблермрестарт**](msidisablermrestart.md)                             | Указывает, каким способом [Диспетчер перезапуска](../rstmgr/restart-manager-portal.md) закрывает и перезапускает приложения. доступно начиная с версии установщик Windows 4,0.                  |
| [**мсирмшутдовн**](msirmshutdown.md)                                         | Указывает, каким способом [Диспетчер перезапуска](../rstmgr/restart-manager-portal.md) закрывает и перезапускает приложения. доступно начиная с версии установщик Windows 4,0.                  |
| [**мсисистемребутпендинг**](msisystemrebootpending.md)                       | Установщик задает это свойство, если ожидается перезагрузка операционной системы. доступно начиная с версии установщик Windows 4,0.                         |
| [дисаблеаутоматикаппликатионшутдовн](disableautomaticapplicationshutdown.md) | политика для отключения взаимодействия установщик Windows с [диспетчером перезапуска](../rstmgr/restart-manager-portal.md). доступно начиная с версии установщик Windows 4,0.                |



 

Ошибка \_ установки \_ приостановки означает, что установка не была завершена или откатить. Установка должна быть возобновлена до ее завершения. Перед возобновлением установки может потребоваться перезагрузка системы.

установщик Windows возвращает код ошибки " \_ \_ приостановка установки" при выполнении [действия форцеребут](forcereboot-action.md) . \_ \_ \_ Если перед запуском приложения требуется перезагрузка, необходимо выполнить перезагрузку после успешного выполнения, после чего она вернет сообщение об \_ успешном завершении \_ перезагрузки, \_ Если установщик действительно начал перезагрузку. Обратите внимание, что поскольку перезагрузки являются асинхронными, перезагрузка может быть выполнена до того, как будет возвращен код ошибки. Дополнительные сведения см. в разделе [коды ошибок](error-codes.md).

Настраиваемые действия могут принудительно выполнить перезагрузку в конце установки, вызвав [**мсисетмоде**](/windows/desktop/api/Msiquery/nf-msiquery-msisetmode). Настраиваемые действия также могут проверять отложенную перезагрузку, вызывая [**мсижетмоде**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode).

## <a name="filesinuse-dialog"></a>Диалоговое окно Филесинусе

Установщик может определить, когда требуется перезагрузка системы, и запросить у пользователя запрос на перезагрузку. Как правило, требуется перезагрузка системы, так как установщик пытается установить файл, который используется в данный момент. Если [действие инсталлвалидате](installvalidate-action.md) обнаруживает, что установка файла используется, отображается [диалоговое окно филесинусе](filesinuse-dialog.md).

Если вы предполагаете, что установщик отображает Филесинуседиалог, но это не так, это может быть вызвано одной из следующих причин:

-   Используемые файлы не являются исполняемыми объектами.
-   Установщик на самом деле не пытается установить эти файлы.
-   Процесс, удерживающий эти файлы, называется процессом, который вызывает установку.
-   Процесс, удерживающий эти файлы, не имеет окна с названием, связанным с ним.

Дополнительные сведения см. в разделе [ведение журнала запросов на перезагрузку](logging-of-reboot-requests.md).

 

 
