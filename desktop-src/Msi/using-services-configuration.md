---
description: Настройка служб позволяет установщик Windows настраивать службы на компьютере.
ms.assetid: 164280b2-1c75-49d2-ac04-c3654be84134
title: Использование конфигурации служб
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2f6e3040d51b1056a370490fc5328a6bafe07555
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104496893"
---
# <a name="using-services-configuration"></a>Использование конфигурации служб

Настройка служб позволяет установщик Windows настраивать [службы](../services/services.md) на компьютере. Разработчики могут создать установщик Windows пакет для установки, запуска и удаления служб во время установки с помощью таблиц [ServiceControl](servicecontrol-table.md) и [сервицеинсталл](serviceinstall-table.md) , а также действий [инсталлсервицес](installservices-action.md), [стопсервицес](stopservices-action.md) и [делетесервицес](deleteservices-action.md) .

Начиная с пакетов, написанных для установщик Windows 5,0, разработчики также могут использовать стандартное действие [мсиконфигуресервицес](msiconfigureservices-action.md) и [таблицу мсисервицеконфиг](msiserviceconfig-table.md) для настройки расширенных параметров настройки службы, доступных в Windows 7 и Windows Server 2008 R2 и Windows Vista и Windows Server 2008. Существующие пакеты установки, написанные для версий установщик Windows, которые не включали таблицу Мсисервицеконфиг, можно по-прежнему устанавливать с помощью установщик Windows 5,0. Функция настройки служб установщик Windows не может настроить учетные записи сетевой службы, установить процессы узла общей службы (SVCHOST) или перезапустить службы, остановленные в ходе установки.

**Windows XP и Windows Server 2003 или более ранних версий:** Не поддерживается. Таблицы конфигурации службы и стандартные действия доступны начиная с установщик Windows 5,0, работающих в Windows 7 и Windows Server 2008 R2 и установщик Windows 4,5, работающих под управлением Windows Vista и Windows Server 2008.

Чтобы запросить конфигурации службы, указанные в [таблице мсисервицеконфиг](msiserviceconfig-table.md), необходимо включить действие [Мсиконфигуресервицес](msiconfigureservices-action.md) в таблицу [инсталлексекутесекуенце](installexecutesequence-table.md) . Установщик Windows использует сведения из таблицы Мсисервицеконфиг только в том случае, если стандартное действие Мсиконфигуресервицес включено в таблицу последовательностей. Стандартное действие Мсиконфигуресервицес также использует сведения в таблицах [ServiceControl](servicecontrol-table.md) и [сервицеинсталл](serviceinstall-table.md) .

Чтобы запросить, чтобы система предмсисервицеконфига только необходимые привилегии для конкретной службы, укажите в [таблице](msiserviceconfig-table.md)параметр конфигурации служба и **\_ \_ \_ \_ сведения о необходимых привилегиях настройки службы** . Удалите ненужные права из токена процесса службы. Этот параметр можно использовать для настройки служб, выполняемых в контексте безопасности [учетных записей пользователя службы](../services/service-user-accounts.md)LocalSystem, LocalService или NetworkService.

Чтобы запросить, чтобы система запускала автоматический запуск службы в течение времени после запуска всех других автоматически запускаемых служб, укажите службу и параметр **\_ \_ отложенного \_ автоматического \_ запуска для настройки службы** в [таблице мсисервицеконфиг](msiserviceconfig-table.md). Отложенная служба должна быть установлена текущим пакетом с \_ \_ автозапуском службы, указанным в таблице [сервицеинсталл](serviceinstall-table.md) , либо служба должна быть уже установлена в качестве службы автоматического запуска.

Чтобы запросить, что система зарезервирует ресурс для монопольного использования конкретной службы, укажите службу, тип идентификатора безопасности службы и параметр конфигурации **Service \_ config Service \_ \_ \_ info** в [таблице мсисервицеконфиг](msiserviceconfig-table.md). Добавьте идентификатор безопасности службы в список управления доступом (ACL) ресурса.

Чтобы запросить, что [Диспетчер управления службами](../services/service-control-manager.md) (SCM) должен ждать после отправки уведомления о **\_ \_ завершении работы службы управления службами** , выполните следующие действия. Укажите службу, продолжительность времени ожидания SCM, а также параметр конфигурации службы настройки предварительного **\_ \_ завершения работы \_** в [таблице мсисервицеконфиг](msiserviceconfig-table.md).

Чтобы настроить, когда система должна выполнять действия после сбоя службы, укажите параметр службы и **\_ \_ \_ \_ флаг действия при сбое настройки службы** в [таблице мсисервицеконфиг](msiserviceconfig-table.md). Добавьте действия для выполнения в [таблицу мсисервицеконфигфаилуреактионс](msiserviceconfigfailureactions-table.md).

Дополнительные сведения о возможностях расширенной настройки служб, появившихся в операционных системах Windows Vista и Windows Server 2008, см. в статье [изменения служб для Windows Vista](../services/service-changes-for-windows-vista.md).

 

 
