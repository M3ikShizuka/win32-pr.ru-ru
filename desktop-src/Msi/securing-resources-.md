---
description: Возможность установщик Windows устанавливать разрешения доступа к службам, файлам, созданным папкам и записям реестра может помочь в обеспечении безопасности приложений установки.
ms.assetid: a25fcecf-f15f-4772-8f41-d03864484cc9
title: Защита ресурсов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 415fe7b2df343a54aa0819031f4fd22b05857618
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105650850"
---
# <a name="securing-resources"></a>Защита ресурсов

Возможность установщик Windows устанавливать разрешения доступа к службам, файлам, созданным папкам и записям реестра может помочь в обеспечении безопасности приложений установки. Использование таблиц [мсилоккпермиссионсекс](msilockpermissionsex-table.md) или [локкпермиссионс](lockpermissions-table.md) для защиты ресурсов является одним из рекомендуемых [рекомендаций по созданию безопасных установок](guidelines-for-authoring-secure-installations.md). Таблица Мсилоккпермиссионсекс может позволить автору пакета защитить ресурс без необходимости написания [настраиваемого действия](custom-actions.md).

Начиная с пакетов, разработанных для установщик Windows 5,0, таблица [мсилоккпермиссионсекс](msilockpermissionsex-table.md) должна заменить использование таблицы [локкпермиссионс](lockpermissions-table.md) . Расширенные функциональные возможности, предоставляемые таблицей Мсилоккпермиссионсекс, позволяют пакету защищать [службы](../services/services.md)Windows, файлы, папки и разделы реестра. Пакет не должен содержать таблицы Мсилоккпермиссионсекс и Локкпермиссионс.

Установщик Windows 4,5 и более ранних версий игнорирует [таблицу мсилоккпермиссионсекс](msilockpermissionsex-table.md). Начиная с установщик Windows 5,0, установка завершается с сообщением об ошибке 1941, если пакет содержит как [таблицу локкпермиссионс](lockpermissions-table.md) , так и таблицу мсилоккпермиссионсекс. Существующие пакеты установки, содержащие только таблицу Локкпермиссионс, можно по-прежнему устанавливать с помощью установщик Windows 5,0.

Установщик Windows 5,0 обрабатывает данные в таблице [мсилоккпермиссионсекс](msilockpermissionsex-table.md) при выполнении стандартных действий [инсталлфилес](installfiles-action.md), [инсталлсервицес](installservices-action.md), [вритерегистривалуес](writeregistryvalues-action.md) и [креатефолдерс](createfolders-action.md) . Защищаемый объект должен быть установлен или переустановлен для защиты, поэтому невозможно добавить [список управления доступом](../secauthz/access-control-lists.md) (ACL) к существующему объекту без переустановки этого объекта.

Чтобы указать службу, файл, каталог или раздел реестра, который должен быть защищен, введите идентификационные данные в поля LockObject и table таблицы [мсилоккпермиссионсекс](msilockpermissionsex-table.md) . Объект идентифицируется по первичному ключу в [таблице сервицеинсталл](serviceinstall-table.md), [таблице файлов](file-table.md), [таблице реестра](registry-table.md)или [таблице креатефолдер](createfolder-table.md).

Чтобы запросить, чтобы указанные разрешения применялись к объекту, введите допустимую строку дескриптора безопасности в поле *сддлтекст* таблицы [мсилоккпермиссионсекс](msilockpermissionsex-table.md) , используя допустимый [язык определения дескрипторов безопасности](../secauthz/security-descriptor-definition-language.md) (SDDL). В таблице **мсилоккпермиссионсекс** можно указать дескриптор безопасности, который запрещает разрешения, задает наследование разрешений от родительского ресурса или указывает разрешения новой учетной записи. Список всех разрешений, которые могут быть предоставлены, запрещены или унаследованы, см. в разделе [строки ACE](../secauthz/ace-strings.md). Установщик Windows 5,0 расширяет набор доступных идентификаторов безопасности (SID). Список допустимых идентификаторов безопасности см. в разделе [строки идентификатора безопасности](../secauthz/sid-strings.md).

> [!NOTE]
> Если вы хотите настроить дескриптор безопасности родительского ресурса, чтобы указать, что его разрешения наследуются дочерними объектами, установщик должен применить разрешения к родительскому ресурсу перед созданием дочерних объектов. Если установщик создает дочерние объекты до того, как он применяет наследуемые разрешения к родительскому ресурсу, разрешения родительского ресурса не будут распространяться на дочерние объекты.

Начиная с установщик Windows 5,0, тип данных [форматтедсддлтекст](formattedsddltext.md) расширяет [форматированный](formatted.md) тип данных. Установщик Windows проверяет, что строка Форматтедсддлтекст, заданная в столбце Сддлтекст таблицы [мсилоккпермиссионсекс](msilockpermissionsex-table.md) , соответствует [формату строки дескриптора безопасности](../secauthz/security-descriptor-string-format.md).

**[Установщик Windows 4,5 или более ранней версии](not-supported-in-windows-installer-4-5.md):** Не поддерживается. Таблица [мсилоккпермиссионсекс](msilockpermissionsex-table.md) и тип данных [форматтедсддлтекст](formattedsddltext.md) доступны начиная с установщик Windows 5,0.

 

 
