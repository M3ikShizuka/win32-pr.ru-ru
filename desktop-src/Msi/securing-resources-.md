---
description: возможность установщик Windows устанавливать разрешения доступа к службам, файлам, созданным папкам и записям реестра может помочь в обеспечении безопасности приложений установки.
ms.assetid: a25fcecf-f15f-4772-8f41-d03864484cc9
title: Защита ресурсов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5005f906118d4f5e321b062dd4c98c9a6204d90190b60b0275f636763bcd9cd0
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120040854"
---
# <a name="securing-resources"></a>Защита ресурсов

возможность установщик Windows устанавливать разрешения доступа к службам, файлам, созданным папкам и записям реестра может помочь в обеспечении безопасности приложений установки. Использование таблиц [мсилоккпермиссионсекс](msilockpermissionsex-table.md) или [локкпермиссионс](lockpermissions-table.md) для защиты ресурсов является одним из рекомендуемых [рекомендаций по созданию безопасных установок](guidelines-for-authoring-secure-installations.md). Таблица Мсилоккпермиссионсекс может позволить автору пакета защитить ресурс без необходимости написания [настраиваемого действия](custom-actions.md).

начиная с пакетов, разработанных для установщик Windows 5,0, таблица [мсилоккпермиссионсекс](msilockpermissionsex-table.md) должна заменить использование таблицы [локкпермиссионс](lockpermissions-table.md) . расширенные функциональные возможности, предоставляемые таблицей мсилоккпермиссионсекс, позволяют пакету защищать [службы](../services/services.md)Windows, файлы, папки и разделы реестра. Пакет не должен содержать таблицы Мсилоккпермиссионсекс и Локкпермиссионс.

Windows Установщик 4,5 и более ранних версий игнорирует [таблицу мсилоккпермиссионсекс](msilockpermissionsex-table.md). начиная с установщик Windows 5,0, установка завершается с сообщением об ошибке 1941, если пакет содержит как [таблицу локкпермиссионс](lockpermissions-table.md) , так и таблицу мсилоккпермиссионсекс. существующие пакеты установки, содержащие только таблицу локкпермиссионс, можно по-прежнему устанавливать с помощью установщик Windows 5,0.

Windows Установщик 5,0 обрабатывает сведения в таблице [мсилоккпермиссионсекс](msilockpermissionsex-table.md) при выполнении стандартных действий [инсталлфилес](installfiles-action.md), [инсталлсервицес](installservices-action.md), [вритерегистривалуес](writeregistryvalues-action.md) и [креатефолдерс](createfolders-action.md) . Защищаемый объект должен быть установлен или переустановлен для защиты, поэтому невозможно добавить [список управления доступом](../secauthz/access-control-lists.md) (ACL) к существующему объекту без переустановки этого объекта.

Чтобы указать службу, файл, каталог или раздел реестра, который должен быть защищен, введите идентификационные данные в поля LockObject и table таблицы [мсилоккпермиссионсекс](msilockpermissionsex-table.md) . Объект идентифицируется по первичному ключу в [таблице сервицеинсталл](serviceinstall-table.md), [таблице файлов](file-table.md), [таблице реестра](registry-table.md)или [таблице креатефолдер](createfolder-table.md).

Чтобы запросить, чтобы указанные разрешения применялись к объекту, введите допустимую строку дескриптора безопасности в поле *сддлтекст* таблицы [мсилоккпермиссионсекс](msilockpermissionsex-table.md) , используя допустимый [язык определения дескрипторов безопасности](../secauthz/security-descriptor-definition-language.md) (SDDL). В таблице **мсилоккпермиссионсекс** можно указать дескриптор безопасности, который запрещает разрешения, задает наследование разрешений от родительского ресурса или указывает разрешения новой учетной записи. Список всех разрешений, которые могут быть предоставлены, запрещены или унаследованы, см. в разделе [строки ACE](../secauthz/ace-strings.md). Windows Установщик 5,0 расширяет набор доступных идентификаторов безопасности (SID). Список допустимых идентификаторов безопасности см. в разделе [строки идентификатора безопасности](../secauthz/sid-strings.md).

> [!NOTE]
> Если вы хотите настроить дескриптор безопасности родительского ресурса, чтобы указать, что его разрешения наследуются дочерними объектами, установщик должен применить разрешения к родительскому ресурсу перед созданием дочерних объектов. Если установщик создает дочерние объекты до того, как он применяет наследуемые разрешения к родительскому ресурсу, разрешения родительского ресурса не будут распространяться на дочерние объекты.

начиная с установщик Windows 5,0, тип данных [форматтедсддлтекст](formattedsddltext.md) расширяет [форматированный](formatted.md) тип данных. установщик Windows проверяет, что строка форматтедсддлтекст, заданная в столбце сддлтекст таблицы [мсилоккпермиссионсекс](msilockpermissionsex-table.md) , соответствует [формату строки дескриптора безопасности](../secauthz/security-descriptor-string-format.md).

**[установщик Windows 4,5 или более ранней версии](not-supported-in-windows-installer-4-5.md):** Не поддерживается. таблица [мсилоккпермиссионсекс](msilockpermissionsex-table.md) и тип данных [форматтедсддлтекст](formattedsddltext.md) доступны начиная с установщик Windows 5,0.

 

 
