---
description: Действие Инсталлвалидате проверяет, достаточно ли места для всех томов, на которые произошел атрибут cost. Действие Инсталлвалидате завершает установку с неустранимой ошибкой, если какой-либо из томов имеет небольшой объем места на диске.
ms.assetid: 1c55794d-1ecc-43bf-956f-96afc5f36964
title: Действие Инсталлвалидате
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6dd8a5e2f69df5e588c2366f7cf9fff0fb3621889e9b725605a38acc14f39457
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117805642"
---
# <a name="installvalidate-action"></a>Действие Инсталлвалидате

Действие Инсталлвалидате проверяет, достаточно ли места для всех [*томов*](v-gly.md) , на которые произошел атрибут [*Cost*](c-gly.md) . Действие Инсталлвалидате завершает установку с неустранимой ошибкой, если какой-либо из томов имеет небольшой объем места на диске.

Действие Инсталлвалидате также уведомляет пользователя, если один или несколько файлов для перезаписи или удаления в настоящее время используются активным процессом. Дополнительные сведения см. в разделе [перезагрузки системы](system-reboots.md).

## <a name="sequence-restrictions"></a>Ограничения последовательности

Действие [костфинализе](costfinalize-action.md) и все последовательности диалоговых окон пользовательского интерфейса, позволяющие пользователю изменять состояния выбора и каталоги, должны быть упорядочены перед действием инсталлвалидате.

[Настраиваемые действия](custom-actions.md) , которые изменяют состояние установки компонентов или компонентов, должны быть упорядочены перед действием инсталлвалидате.

## <a name="actiondata-messages"></a>Сообщения Актиондата

Нет сообщений Актиондата.

## <a name="remarks"></a>Remarks

Как правило, последовательность диалоговых окон более раннего пользователя должна выполнять ту же проверку, что и действие Инсталлвалидате, когда пользователь пытается инициировать копирование файлов. Эта последовательность диалоговых окон пользовательского интерфейса должна показывать диалоговое окно " **недостаточно места на диске** ", если на выбранных томах недостаточно места для установки. Диалоговые окна пользовательского интерфейса должны быть созданы таким образом, чтобы пользователь не пройдет установку, если на диске недостаточно места. В случае автоматической установки отсутствует пользовательский интерфейс, и действие Инсталлвалидате завершает установку, если на диске недостаточно места. Причина преждевременного завершения записывается в файл журнала, если ведение журнала включено.

Запись добавляется во внутреннюю таблицу Филесинусе, если какой-либо файл перезаписывается или удаляется, пока он открыт для выполнения или изменения любым процессом во время [*учета стоимости*](c-gly.md)файлов. Таблица Филесинусе содержит столбцы для имени и полного пути к файлу. При выполнении действия Инсталлвалидате установщик запрашивает в таблице Филесинусе записи и определяет имя процесса с помощью файла. Действие Инсталлвалидате добавляет одну запись в таблицу пользовательского интерфейса [ListBox](listbox-table.md) для каждого уникального процесса, определенного этим запросом. Запись содержит следующие значения в каждом столбце:

**Свойство**: филеинусепроцесс

 

**Значение**: *имя процесса* .

 

**Text**: *текст, содержащийся в заголовке главного окна процесса*

Затем действие Инсталлвалидате отображает диалоговое окно **используемые файлы** . В этом диалоговом окне отображаются процессы, которые необходимо завершить, чтобы избежать необходимости перезапуска системы для замены используемых файлов.

Действие Инсталлвалидате запрашивает таблицу [диалоговых](dialog-table.md) окон для созданного диалогового окна с зарезервированным именем [филесинусе](filesinuse-dialog.md) и отображает его. Это диалоговое окно должно содержать элемент управления [ListBox](listbox-control.md) , привязанный к свойству с именем филеинусепроцесс. По соглашению в этом диалоговом окне есть кнопка **выйти**, **повторить** или **пропустить** , но это не тот автор пользовательского интерфейса. Каждая кнопка должна быть привязана к таблице ControlEvent событие [EndDialog](enddialog-controlevent.md) в таблице [таблице ControlEvent событие](controlevent-table.md) . Действие Инсталлвалидате реагирует следующим образом на значение, возвращенное [DoAction](doaction-controlevent.md) таблице ControlEvent событие, в соответствии с одним из этих аргументов [EndDialog](enddialog-controlevent.md) , связанных с кнопкой, отправленной пользователем:

**Повторная попытка**. все значения, добавленные в таблицу [ListBox](listbox-table.md) , очищаются, и вся хранимая процедура [*учета стоимости*](c-gly.md) файлов повторяется повторно, повторно проверяются на наличие файлов, которые еще используются. Если один или несколько процессов по-прежнему определяются как использующие файлы для переписывания или удаления, процесс повторяется; в противном случае Инсталлвалидате возвращает управление в установщик с состоянием Мсидоактионстатуссукцесс.

**Выход**. действие инсталлвалидате немедленно возвращает управление в установщик с состоянием мсидоактионстатусусерексит. Это прерывает установку.

**Любое другое возвращаемое значение**. действие инсталлвалидате немедленно возвращает управление в установщик с состоянием мсидоактионстатуссукцесс. В этом случае, поскольку один или несколько файлов по-прежнему используются, последующие действия [инсталлфилес](installfiles-action.md) и (или) [инсталладминпаккаже](installadminpackage-action.md) должны запланировать, что используемые файлы будут заменены или удалены при перезапуске системы.

Если в базе данных нет таблицы [ListBox](listbox-table.md) , инсталлвалидате автоматически завершает работу без ошибки.

Точка с запятой представляет собой разделитель списка для преобразований, источников и исправлений, и не должен использоваться в этих именах файлов или путях.

Файлы, помеченные как доступные только для чтения в расположении только для чтения, никогда не считаются используемыми установщиком.

Для пользователя появляется диалоговое окно по умолчанию **нехватки места на диске** , содержащее кнопки **прервать** и **повторить** , если уровень пользовательского интерфейса является базовым.

 

 



