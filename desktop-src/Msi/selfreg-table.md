---
description: Таблица Селфрег содержит сведения о модулях, которые должны быть зарегистрированы самостоятельно.
ms.assetid: 7fe5c96e-16a4-49c9-9a93-616608aa55b2
title: Таблица Селфрег
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 61d00b9f18755cf3284edfd1ba9476b12ba6343c816dbafe84ac3c3676f663f8
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118625510"
---
# <a name="selfreg-table"></a>Таблица Селфрег

Таблица Селфрег содержит сведения о модулях, которые должны быть зарегистрированы самостоятельно. Установщик вызывает функцию [**DllRegisterServer**](/windows/win32/api/olectl/nf-olectl-dllregisterserver) во время установки модуля. Он вызывает [**DllUnregisterServer**](/windows/win32/api/olectl/nf-olectl-dllunregisterserver) во время удаления модуля. Установщик не выполняет самостоятельную регистрацию EXE файлов.

Таблица Селфрег содержит следующие столбцы.



| Столбец | Type                         | Ключ | Допускает значения NULL |
|--------|------------------------------|-----|----------|
| Файл\_ | [Идентификатор](identifier.md) | Д   | Нет        |
| Cost   | [Integer](integer.md)       | Нет   | Д        |



 

## <a name="columns"></a>Столбцы

<dl> <dt>

<span id="File_"></span><span id="file_"></span><span id="FILE_"></span>File\_
</dt> <dd>

Внешний ключ в первый столбец [таблицы File](file-table.md) , указывающий модуль, который необходимо зарегистрировать.

</dd> <dt>

<span id="Cost"></span><span id="cost"></span><span id="COST"></span>Маршрут
</dt> <dd>

Стоимость регистрации модуля в байтах. Это значение должно быть неотрицательным числом.

</dd> </dl>

## <a name="remarks"></a>Remarks

Авторы пакета установки настоятельно рекомендуется использовать самостоятельную регистрацию. Вместо этого они должны регистрировать модули путем создания одной или нескольких таблиц, предоставляемых установщиком для этой цели. Дополнительные сведения см. в разделе « [таблицы реестра»](registry-tables-group.md). Многие преимущества службы централизованного установщика теряются при самостоятельной регистрации, поскольку подпрограммы самостоятельной регистрации, как правило, скрывают важную информацию о конфигурации. Причины для предотвращения самостоятельной регистрации:

-   Откат установки с самостоятельными модулями не может быть безопасно выполнен с помощью [**DllUnregisterServer**](/windows/win32/api/olectl/nf-olectl-dllunregisterserver) , так как нет способа определить, используются ли самостоятельные ключи другой функцией или приложением.
-   Возможность использования объявления уменьшается, если регистрация сервера класса или расширения выполняется в подпрограммых самостоятельной регистрации.
-   Установщик автоматически обрабатывает ключи HKCR в таблицах реестра для установки на уровне пользователя или на компьютере. В настоящее время подпрограммы [**DllRegisterServer**](/windows/win32/api/olectl/nf-olectl-dllregisterserver) не поддерживают понятие ключа HKCR для каждого пользователя.
-   Если на одном компьютере используется самостоятельно зарегистрированное приложение, каждый пользователь должен установить приложение при первом его запуске. В противном случае установщик не сможет легко определить, что существуют соответствующие разделы реестра HKCU.
-   Функция [**DllRegisterServer**](/windows/win32/api/olectl/nf-olectl-dllregisterserver) может запретить доступ к сетевым ресурсам, таким как библиотеки типов, если компонент задан как Run-from-Source и указан в таблице селфрег. Это может привести к сбою установки компонента во время административной установки.
-   Библиотеки DLL с собственной регистрацией более уязвимы для ошибок программирования, поскольку новый код, необходимый для [**DllRegisterServer**](/windows/win32/api/olectl/nf-olectl-dllregisterserver) , обычно отличается для каждой библиотеки DLL. Вместо этого используйте таблицы реестра в базе данных, чтобы воспользоваться преимуществами существующего кода, предоставляемого установщиком.
-   Библиотеки DLL с собственной регистрацией иногда могут ссылаться на вспомогательные библиотеки DLL, которые отсутствуют или имеют неправильную версию. В отличие от этого, установщик может зарегистрировать библиотеки DLL с помощью таблиц реестра без зависимости от текущего состояния системы.

> [!Note]  
> Нельзя указать порядок, в котором установщик регистрирует или отменяет регистрацию библиотек DLL с помощью действий [селфрегмодулес](selfregmodules-action.md) и [селфунрегмодулес](selfunregmodules-action.md) . См. раздел [Указание порядка самостоятельной регистрации](specifying-the-order-of-self-registration.md).

 

## <a name="validation"></a>Проверка

<dl>

[ICE03](ice03.md)  
[ICE06](ice06.md)  
[ICE32](ice32.md)  
</dl>

 

 
