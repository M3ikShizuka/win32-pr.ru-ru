---
description: Windows Установщик содержит функциональные возможности отображения индикатора хода выполнения в диалоговом окне отображения действий.
ms.assetid: cfc2d974-4f2d-4f52-9835-eab1dc091c9b
title: Создание элемента управления ProgressBar
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1074744220bde8734fe0cd1f65aa1037ff1f0cb26763a11845a7ea7f1b58e507
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119066164"
---
# <a name="authoring-a-progressbar-control"></a>Создание элемента управления ProgressBar

Windows Установщик содержит функциональные возможности отображения индикатора хода выполнения в диалоговом окне отображения действий. [Элемент управления ProgressBar](progressbar-control.md) графически представляет установку отдельных компонентов и сообщает либо общее время, прошедшее относительно оставшегося времени, либо приблизительное общее время, оставшееся до завершения установки.

Чтобы определить общее время, ожидаемое для установки, установщик отслеживает общее число тактов хода выполнения, ожидаемое каждым действием во время создания скрипта выполнения. После завершения создания скрипта будет сохранена сумма хода выполнения и начинается установка.

Сообщения о ходе выполнения, описывающие прошедшее количество тактов прогресса, отправляются в активный обработчик сообщений по мере выполнения каждого действия в скрипте. При каждом сообщении о ходе выполнения установщик передает сообщение [Сетпрогресс таблице ControlEvent событие](setprogress-controlevent.md) в текущее активное диалоговое окно. Последовательность пользовательского интерфейса должна быть создана для создания диалогового окна "Отображение действия" во время выполнения скрипта для получения сообщений таблице ControlEvent событие Сетпрогресс из установщика.

Когда диалоговое окно "Отображение действия" получает Сетпрогресс таблице ControlEvent событие, оно проверяет [таблицу таблица eventmapping](eventmapping-table.md) на наличие элементов управления, подписавшихся на таблице ControlEvent событие. Элемент управления ProgressBar в диалоговом окне "Отображение действия" подписывается на атрибут управления ходом выполнения, указанный в столбце атрибуты. Атрибут управления progress указывает, что элемент управления ProgressBar будет передавать значения "Тиккссофар" и "Тоталтиккс" вместе с Сетпрогресс таблице ControlEvent событие. Элемент управления "индикатор выполнения" использует эти сведения, чтобы переместить графическую линию слева направо для установки и справа налево для выполнения операции [отката](rollback-installation.md) .

Кроме того, установщик выполняет широковещательную рассылку [TimeRemaining таблице ControlEvent событие](timeremaining-controlevent.md) для каждого сообщения о ходе выполнения. Общее время, оставшееся для установки, определяется первым расчетом частоты выполнения. это общее число тактов, проделенное на общее время, прошедшее с момента начала установки. Общее количество тактов, деленное на скорость выполнения, дает приблизительное оставшееся время.

Когда диалоговое окно "Отображение действия" получает TimeRemaining таблице ControlEvent событие, оно снова ищет в таблице таблица eventmapping все элементы управления, на которые оформлена подписка. Чтобы отобразить оставшееся время, [элемент управления "текст](text-control.md) " должен быть подписан на TimeRemaining таблице ControlEvent событие с помощью [атрибута элемента управления TimeRemaining](timeremaining-control-attribute.md) , указанного в столбце Attributes.

Элемент управления "подписанный текст" запрашивает [таблицу уитекст](uitext-table.md) для параметризованной строки шаблона с именем "TimeRemaining". Эта строка имеет два параметра: \[ 1 \] для минут и \[ 2 \] для секунд. Элемент управления "текст" преобразует каждое значение в минуты и секунды, вычисляет строку шаблона TimeRemaining и обновляет элемент управления "текст" новыми данными.

Если уровень отображения пользовательского интерфейса имеет значение базовый или ниже, то установщик отображает диалоговое окно по умолчанию, содержащее индикатор выполнения и текстовое поле TimeRemaining. Дополнительные сведения см. в разделе [уровни пользовательского интерфейса](user-interface-levels.md).

 

 



