---
description: Поскольку пользовательское действие может быть запланировано как в пользовательском интерфейсе, так и для выполнения таблиц последовательности и может выполняться в службе или клиентском процессе, настраиваемое действие может выполняться несколько раз.
ms.assetid: a3ffeecb-cdd6-43af-a3fe-48e3e843ec8b
title: Параметры планирования выполнения настраиваемых действий
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6bfa5aee44f3ad357eefc6f9dd9c5ee5ae45797c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105663529"
---
# <a name="custom-action-execution-scheduling-options"></a>Параметры планирования выполнения настраиваемых действий

Поскольку пользовательское действие может быть запланировано как в пользовательском интерфейсе, так и для выполнения таблиц последовательности и может выполняться в службе или клиентском процессе, настраиваемое действие может выполняться несколько раз.

Обратите внимание, что установщик:

-   По умолчанию выполняет действия в таблице последовательности.
-   Не выполняет действие, если поле условного выражения в таблице последовательности имеет значение false.
-   Обрабатывает таблицу последовательности ПОЛЬЗОВАТЕЛЬСКОГО интерфейса в клиентском процессе, если для внутреннего уровня интерфейса пользователя задан режим полного пользовательского интерфейса (см. раздел [**мсисетинтерналуи**](/windows/desktop/api/Msi/nf-msi-msisetinternalui) для описания уровней пользовательского интерфейса).
-   — Это служба, зарегистрированная по умолчанию при использовании Windows 2000, и в этом случае таблица выполнения последовательности обрабатывается в службе установщика.

Можно использовать следующие флаги параметров для управления несколькими немедленным выполнением настраиваемых действий. Чтобы задать параметр, добавьте значение в этой таблице к значению в поле Тип [таблицы CustomAction](customaction-table.md). Не следует использовать ни один из следующих флагов с [отложенными настраиваемыми действиями выполнения](deferred-execution-custom-actions.md).

<dl> <dt>

<span id="_default_"></span><span id="_DEFAULT_"></span>параметры
</dt> <dd>

Шестнадцатеричное: 0x00000000

Десятичное число: 0

Всегда выполнять. Действие может выполняться дважды, если оно есть в обеих таблицах последовательности.

</dd> <dt>

<span id="msidbCustomActionTypeFirstSequence_"></span><span id="msidbcustomactiontypefirstsequence_"></span><span id="MSIDBCUSTOMACTIONTYPEFIRSTSEQUENCE_"></span>**мсидбкустомактионтипефирстсекуенце** 
</dt> <dd>

Шестнадцатеричное: 0x00000100

Десятичное число: 256

Выполняется не более одного раза, если оно есть в обеих таблицах последовательности. Всегда пропускает действие в последовательности выполнения, если выполнялась последовательность пользовательского интерфейса. Не влияет на последовательность пользовательского интерфейса. Действие не обязательно должно присутствовать или выполняться в последовательности пользовательского интерфейса для пропуска в последовательности выполнения. Не затрагивается при установке регистрации службы.

</dd> <dt>

<span id="msidbCustomActionTypeOncePerProcess"></span><span id="msidbcustomactiontypeonceperprocess"></span><span id="MSIDBCUSTOMACTIONTYPEONCEPERPROCESS"></span>**мсидбкустомактионтипеонцеперпроцесс**
</dt> <dd>

Шестнадцатеричное: 0x00000200

Десятичное число: 512

Выполните один раз для каждого процесса, если они находятся в обеих таблицах последовательности. Пропускает действие в последовательности выполнения, если последовательность пользовательского интерфейса была запущена в том же процессе, например, в процессе выполнения в клиенте. Используется для предотвращения выполнения действий, изменяющих состояние сеанса, таких как свойства и данные базы данных, в два раза.

</dd> <dt>

<span id="msidbCustomActionTypeClientRepeat"></span><span id="msidbcustomactiontypeclientrepeat"></span><span id="MSIDBCUSTOMACTIONTYPECLIENTREPEAT"></span>**мсидбкустомактионтипеклиентрепеат**
</dt> <dd>

Шестнадцатеричное: 0x00000300

Десятичное число: 768

Выполнять, только если выполняется на клиенте после выполнения последовательности пользовательского интерфейса. Действие выполняется только в том случае, если последовательность выполнения выполняется на клиенте в следующем порядке пользовательского интерфейса. Может использоваться для предоставления логики либо (или), либо для подавления обработки, связанной с ИП, если она уже выполнена для сеанса клиента.

</dd> </dl>

Обратите внимание, что для выполнения настраиваемого действия в двух различных режимах выполнения создайте две записи в [таблице CustomAction](customaction-table.md) . Например, чтобы создать пользовательское действие, которое вызывает библиотеку динамической компоновки C/C++ ( [тип настраиваемого действия 1](custom-action-type-1.md)) как мсирунмоде \_ Scheduled и мсирунмоде \_ Rollback, поставьте две записи в таблицу CustomAction, которые вызывают одну и ту же библиотеку DLL, но имеют разные числовые типы. Включите код, вызывающий [**мсижетмоде**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode) , чтобы определить, когда следует запускать настраиваемое действие.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Ссылка на настраиваемое действие](custom-action-reference.md)
</dt> <dt>

[Сведения о настраиваемых действиях](about-custom-actions.md)
</dt> <dt>

[Использование настраиваемых действий](using-custom-actions.md)
</dt> </dl>

 

 



