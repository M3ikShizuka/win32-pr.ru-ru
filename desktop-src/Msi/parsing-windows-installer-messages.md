---
description: Внешний обработчик пользовательского интерфейса может обрабатывать список сообщений установщика, указанных параметром Двмессажедфилтер функции Мсисетекстерналуи.
ms.assetid: c4405803-9abd-40f4-9090-c075e7dcf293
title: Синтаксический анализ сообщений установщик Windows
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 65cf96c85499b44accd0e01548ca184a030775d1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263839"
---
# <a name="parsing-windows-installer-messages"></a>Синтаксический анализ сообщений установщик Windows

Внешний обработчик пользовательского интерфейса может обрабатывать список сообщений установщика, указанных параметром *двмессажедфилтер* функции [**мсисетекстерналуи**](/windows/desktop/api/Msi/nf-msi-msisetexternaluia) . Некоторые из этих сообщений содержат строки, которые можно использовать напрямую, а также может потребоваться синтаксический анализ и обработка других сообщений с помощью внешнего обработчика пользовательского интерфейса. Внешнему пользовательскому интерфейсу может потребоваться отслеживать только установщик Windows сообщения без выполнения каких бы то ни было операций, влияющих на установку.

Следующие установщик Windows сообщения содержат строки, которые могут отображаться в диалоговом окне и не требуют дополнительной обработки. Эти сообщения содержат список кнопок и значков, отображаемых в диалоговом окне. Для указания значков и кнопок можно использовать значения **\_ типемаск** **MB (МБ) \_ Иконмаск**, **MB \_ дефмаск** и MB.

<dl> <dt>

<span id="INSTALLMESSAGE_FATALEXIT"></span><span id="installmessage_fatalexit"></span>**ИНСТАЛЛМЕССАЖЕ \_ фаталексит**
</dt> <dd>

Произошло преждевременное завершение установки.

</dd> <dt>

<span id="INSTALLMESSAGE_ERROR"></span><span id="installmessage_error"></span>**ИНСТАЛЛМЕССАЖЕ, \_ Ошибка**
</dt> <dd>

Отформатированное сообщение об ошибке.

</dd> <dt>

<span id="INSTALLMESSAGE_WARNING"></span><span id="installmessage_warning"></span>**\_предупреждение инсталлмессаже**
</dt> <dd>

Форматированное предупреждающее сообщение.

</dd> <dt>

<span id="INSTALLMESSAGE_INFO"></span><span id="installmessage_info"></span>**\_сведения о инсталлмессаже**
</dt> <dd>

Форматированное сообщение журнала.

</dd> <dt>

<span id="INSTALLMESSAGE_USER"></span><span id="installmessage_user"></span>**\_пользователь инсталлмессаже**
</dt> <dd>

Форматированное сообщение пользователя.

</dd> <dt>

<span id="INSTALLMESSAGE_OUTOFDISKSPACE"></span><span id="installmessage_outofdiskspace"></span>**ИНСТАЛЛМЕССАЖЕ \_ аутофдискспаце**
</dt> <dd>

Форматированное сообщение, указывающее на недостаточное место на диске

</dd> </dl>

Внешний пользовательский обработчик может использовать следующие установщик Windows сообщения для отслеживания последовательности пользовательского интерфейса установщик Windows. Установщик отправляет эти сообщения в начале последовательности пользовательского интерфейса установщик Windows, когда отображается каждое диалоговое окно и в конце последовательности пользовательского интерфейса. Для использования этих сообщений обработка не требуется.

<dl> <dt>

<span id="INSTALLMESSAGE_TERMINATE"></span><span id="installmessage_terminate"></span>\_Завершение инсталлмессаже
</dt> <dd>

Это сообщение указывает на конец последовательности пользовательского интерфейса. Строка является пустой строкой.

</dd> <dt>

<span id="INSTALLMESSAGE_INITIALIZE"></span><span id="installmessage_initialize"></span>\_Инициализация инсталлмессаже
</dt> <dd>

Это сообщение означает, что последовательность пользовательского интерфейса запущена. Строка является пустой строкой.

</dd> <dt>

<span id="INSTALLMESSAGE_SHOWDIALOG"></span><span id="installmessage_showdialog"></span>ИНСТАЛЛМЕССАЖЕ \_ SHOWDIALOG
</dt> <dd>

Строка содержит имя текущего диалогового окна.

</dd> </dl>

Для следующих установщик Windows сообщений требуется дополнительная обработка внешним обработчиком пользовательского интерфейса.

<dl> <dt>

<span id="INSTALLMESSAGE_RESOLVESOURCE"></span><span id="installmessage_resolvesource"></span>**ИНСТАЛЛМЕССАЖЕ \_ ресолвесаурце**
</dt> <dd>

Обработчик внешнего пользовательского интерфейса должен возвращать значение 0 и разрешить установщик Windows обработку сообщения. Обработчик внешнего пользовательского интерфейса может отслеживать это сообщение, но не должен выполнять никаких действий, влияющих на установку.

</dd> <dt>

<span id="INSTALLMESSAGE_FILESINUSE"></span><span id="installmessage_filesinuse"></span>**ИНСТАЛЛМЕССАЖЕ \_ филесинусе**
</dt> <dd>

Внешний пользовательский интерфейс должен отображать [диалоговое окно филесинусе](filesinuse-dialog.md) в ответ на это сообщение.

</dd> <dt>

<span id="INSTALLMESSAGE_RMFILESINUSE"></span><span id="installmessage_rmfilesinuse"></span>**ИНСТАЛЛМЕССАЖЕ \_ рмфилесинусе**
</dt> <dd>

Внешний пользовательский интерфейс должен отображать [диалоговое окно мсирмфилесинусе](msirmfilesinuse-dialog.md) в ответ на это сообщение. Доступно начиная с версии установщик Windows 4,0. Дополнительные сведения об этом сообщении см. в разделе [Использование диспетчера перезапуска с внешним пользовательским интерфейсом](using-restart-manager-with-an-external-ui-.md).

</dd> <dt>

<span id="INSTALLMESSAGE_ACTIONSTART"></span><span id="installmessage_actionstart"></span>**ИНСТАЛЛМЕССАЖЕ \_ актионстарт**
</dt> <dd>

Это сообщение содержит сведения о текущем действии. Формат — действие \[ 1 \] : \[ 2 \] . \[3 \] , где двоеточие используется для отделения поля 1 и поля 2, а точка используется для отделения поля 2 и поля 3. Поле \[ 1 \] содержит время начала действия с использованием формата свойства [**времени**](time.md) . Поле \[ 2 \] содержит имя действия из таблицы последовательности. Поле \[ 3 \] предоставляет описание действия из [таблицы актионтекст](actiontext-table.md) или из функции [**мсипроцессмессаже**](/windows/desktop/api/Msiquery/nf-msiquery-msiprocessmessage) .

</dd> <dt>

<span id="INSTALLMESSAGE_ACTIONDATA"></span><span id="installmessage_actiondata"></span>**ИНСТАЛЛМЕССАЖЕ \_ актиондата**
</dt> <dd>

Формат этой строки определяется значением [шаблона](template.md) , указанным в [таблице Актионтекст](actiontext-table.md) или функцией [**мсипроцессмессаже**](/windows/desktop/api/Msiquery/nf-msiquery-msiprocessmessage) . После сообщения **инсталлмессаже \_ актионстарт** может быть неограниченным числом **инсталлмессаже \_ актиондата** сообщений.

</dd> <dt>

<span id="INSTALLMESSAGE_COMMONDATA"></span><span id="installmessage_commondata"></span>**ИНСТАЛЛМЕССАЖЕ \_ коммондата**
</dt> <dd>

Это сообщение имеет три подтипа: язык, заголовок и Канцелшов. Строка может содержать три поля, разделенные знаком, за которым следует двоеточие. Не все поля являются обязательными. Сообщение может быть пустой строкой ("") или иметь значение NULL.

<dl> <dt>

<span id="Language"></span><span id="language"></span><span id="LANGUAGE"></span>Языке
</dt> <dd>

Поле 1 содержит значение 0, указывающее, что эта строка содержит сведения о языке. Поле 2 содержит значение [языка](language.md) , которое является числовым идентификатором языка (LangID.) Поле 3 — это значение, представляющее кодовую страницу ANSI.

</dd> <dt>

<span id="Caption"></span><span id="caption"></span><span id="CAPTION"></span>Пояснитель
</dt> <dd>

Поле 1 содержит значение 1, указывающее, что эта строка содержит текст заголовка или заголовка. Поле 2 содержит текст, который может использоваться внешним обработчиком пользовательского интерфейса в качестве заголовка для диалогового окна. Поле 3 имеет значение NULL или является пустой строкой (""). Поле 3 может отсутствовать в тексте сообщения.

</dd> <dt>

<span id="CancelShow"></span><span id="cancelshow"></span><span id="CANCELSHOW"></span>канцелшов
</dt> <dd>

Поле 1 содержит значение 2, указывающее, что эта строка содержит сведения о том, следует ли отображать кнопку Отмена. Если кнопка отмена должна быть скрыта, поле 2 содержит значение 0. Если кнопка отмена должна быть видимой, поле 2 содержит значение 1.

</dd> </dl> </dd> <dt>

<span id="INSTALLMESSAGE_PROGRESS"></span><span id="installmessage_progress"></span>\_ход выполнения инсталлмессаже
</dt> <dd>

Это сообщение имеет четыре подтипа: Reset, ActionInfo, Прогрессрепорт и Прогрессаддитион. Внешний обработчик не должен действовать ни для одного из этих сообщений, пока не будет получено первое сообщение о ходе выполнения сброса. Это позволяет оценить общее количество тактов для индикатора выполнения.

<dl> <dt>

<span id="Reset"></span><span id="reset"></span><span id="RESET"></span>Перезапуск
</dt> <dd>

Поле 1 содержит значение 0, указывающее на Сброс индикатора выполнения. Поле 2 содержит общее число тактов на индикаторе выполнения. Поле 3 содержит значение 0 для перемещения индикатора выполнения вперед. Поле 3 содержит значение 1 для перемещения индикатора хода выполнения. Значение 0 в поле 4 означает, что установка выполняется и оставшееся время может быть вычислено. Значение 1 в поле 4 означает, что сценарий выполняется и "Подождите..." может отображаться сообщение. Оценка общего числа тактов является приближением и может быть неточной.

</dd> <dt>

<span id="ActionInfo"></span><span id="actioninfo"></span><span id="ACTIONINFO"></span>ActionInfo
</dt> <dd>

Поле 1 содержит значение 1, указывающее, что эта строка содержит сведения о действии. Поле 2 содержит количество тактов, на которое перемещается индикатор выполнения для каждого сообщения Актиондата, отправленного текущим действием. Если поле 3 содержит значение 0, не учитывать поле 2. Если поле 3 содержит значение 1, увеличьте индикатор выполнения на число тактов в поле 2 для каждого сообщения Актиондата, отправленного текущим действием. Поле 4 не используется.

</dd> <dt>

<span id="ProgressReport"></span><span id="progressreport"></span><span id="PROGRESSREPORT"></span>прогрессрепорт
</dt> <dd>

Поле 1 содержит значение 2, указывающее, что эта строка содержит сведения о ходе выполнения. Поле 2 содержит число тактов, на которое переместился индикатор выполнения. Поле 3 не используется. Поле 4 не используется.

</dd> <dt>

<span id="ProgressAddition"></span><span id="progressaddition"></span><span id="PROGRESSADDITION"></span>прогрессаддитион
</dt> <dd>

Поле 1 содержит значение 3, указывающее, что действие может добавить такты на индикаторе выполнения. Поле 2 содержит число тактов для добавления к общему ожидаемому количеству тактов хода выполнения. Поле 3 не используется. Поле 4 не используется.

</dd> </dl> </dd> </dl>

 

 



