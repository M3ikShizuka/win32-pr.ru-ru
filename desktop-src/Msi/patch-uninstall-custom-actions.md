---
description: Чтобы указать, что установщик запускает настраиваемое действие только при удалении исправления, можно использовать параметр Удаление исправления настраиваемого действия.
ms.assetid: c741aa40-ba4c-459e-936a-19c002620c30
title: Настраиваемые действия при удалении исправлений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b90cfffbdb37f1f2fab046b794010a790e9a5212
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127173668"
---
# <a name="patch-uninstall-custom-actions"></a>Настраиваемые действия при удалении исправлений

Чтобы указать, что установщик запускает настраиваемое действие только при удалении исправления, можно использовать [параметр Удаление исправления настраиваемого действия](custom-action-patch-uninstall-option.md) .

**установщик Windows 4,5 и более поздних версий:** Чтобы указать, что установщик будет запускать настраиваемое действие только при удалении исправления, можно использовать [параметр удалить с помощью настраиваемого действия удаление исправления](custom-action-patch-uninstall-option.md) .

**[установщик Windows 4,0 и более ранних версий](not-supported-in-windows-installer-4-0.md): * *

[Параметр Удаление исправления настраиваемого действия](custom-action-patch-uninstall-option.md) недоступен. Не существует метода пометки [настраиваемого действия](custom-actions.md) в пакете исправлений для запуска при удалении исправления, так как установщик не применяет удаляемые пакеты исправлений.

Чтобы [пользовательское действие](custom-actions.md) выполнялось при удалении определенного исправления, пользовательское действие должно присутствовать в исходном приложении или быть исправлением для продукта, который всегда применяется.

разработчики могут использовать свойство [**MsiPatchRemovalList**](msipatchremovallist.md) для создания пакета установщик Windows или исправления, которое выполняет [пользовательские действия](custom-actions.md) по удалению исправления. Пользовательское действие может быть создано в исходном пакете установки, уже примененном к пакету или в исправлении, которое не является [удаляемым](uninstallable-patches.md). Настраиваемое действие может быть условным для свойства **MsiPatchRemovalList** в таблицах последовательности. Дополнительные сведения о действиях кондитионализинг см. [в разделе Использование свойств в условных инструкциях](using-properties-in-conditional-statements.md) .

Настраиваемое действие может получать идентификаторы GUID удаляемых исправлений из значения свойства [**MsiPatchRemovalList**](msipatchremovallist.md) . Пользовательское действие может определить, применено ли состояние установки исправления, устарело или заменено путем вызова свойства [**мсижетпатчинфоекс**](/windows/desktop/api/Msi/nf-msi-msigetpatchinfoexa) или [**патчпроперти**](patch-patchproperty.md) [объекта Patch](patch-object.md).

Если для настраиваемого действия требуются специальные метаданные из исправления, то исправление должно содержать пользовательское действие, записывающее метаданные в реестр или расположение файла при применении исправления. Пользовательское действие в исходном приложении или исправление, которое всегда применяется, может получить сведения, необходимые для удаления изменений исправления.

Исправления, выполняющие изменения, которые трудно отменить правильно, не должны помечаться как [неустанавливаемые исправления](uninstallable-patches.md).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Последовательность исправлений](sequencing-patches.md)
</dt> <dt>

[Удаление исправлений](removing-patches.md)
</dt> <dt>

[Неустанавливаемые исправления](uninstallable-patches.md)
</dt> <dt>

[Удаление исправлений](uninstalling-patches.md)
</dt> <dt>

[**мсипатчремове**](msipatchremove.md)
</dt> <dt>

[**мсиенумаппликатионсекс**](/windows/desktop/api/Msi/nf-msi-msienumproductsexa)
</dt> <dt>

[**мсижетпатчинфоекс**](/windows/desktop/api/Msi/nf-msi-msigetpatchinfoexa)
</dt> <dt>

[**мсиремовепатчес**](/windows/desktop/api/Msi/nf-msi-msiremovepatchesa)
</dt> </dl>

 

 



