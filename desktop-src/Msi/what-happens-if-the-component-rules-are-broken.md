---
description: В некоторых случаях авторы могут принять решение о необходимости разрушить правила создания компонентов, как описано в разделе Упорядочение приложений по компонентам и изменение кода компонента.
ms.assetid: 487b6a00-77eb-4c51-8e32-46bcd4493df8
title: Что произойдет, если правила компонентов будут разорваны?
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e3f830fa402da44be992d74adc957d88a19442dcbb51173a87e79fa2266552a1
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119498771"
---
# <a name="what-happens-if-the-component-rules-are-broken"></a>Что произойдет, если правила компонентов будут разорваны?

В некоторых случаях авторы могут принять решение о необходимости разрушить правила создания компонентов, как описано в разделе [Упорядочение приложений по компонентам](organizing-applications-into-components.md) и [изменение кода компонента](changing-the-component-code.md). Авторы должны знать о возможных последствиях этого, и в противном случае гарантировать, что их компоненты никогда не устанавливаются там, где они могут повредить другие приложения или компоненты в системе пользователя.

В следующем списке описаны способы, с помощью которых авторы иногда нарушают Рекомендуемые правила компонентов и возможные последствия.

Автор добавляет ресурсы в компонент без изменения кода компонента.

-   Продукты, установленные с помощью старого компонента, не имеют сведений о добавленных ресурсах в своей базе данных установки.
-   Если как новый продукт с добавленными ресурсами, так и старый продукт устанавливаются на одном и том же компьютере, ресурсы могут остаться после удаления нового продукта.
-   Старый продукт без добавленных ресурсов не может восстановить более новую версию компонента. Повторная установка старого продукта не приводит к восстановлению добавленных ресурсов.

Автор удаляет ресурсы из компонента, не изменяя код компонента.

-   Продукты, установленные с новым компонентом, не имеют сведений об удаленных ресурсах в базе данных установки.
-   Если старый продукт, наличие сведений о ресурсах и новый продукт установлены на одном и том же компьютере, ресурсы могут остаться, если сначала удаляется старый продукт.
-   Новый продукт с удаленными ресурсами не может восстановить старую версию продукта. Переустановка нового продукта не приводит к восстановлению удаленных ресурсов.

Автор включает файл, который несовместим с предыдущими версиями без изменения кода компонента.

Если несовместимый файл включается в компонент без изменения кода компонента, [Управление версиями файлов по умолчанию](default-file-versioning.md) приводит к тому, что установщик перезаписывает исходный файл с более новым несовместимым файлом. Это может повредить старые продукты, которым требуется исходный файл. Он также может препятствовать восстановлению старого продукта установщиком, поскольку версия файла пути к ключу компонента определяет версию компонента. Если уже установлена более новая версия файла пути к ключу, установщик не установит более раннюю версию компонента. Дополнительные сведения см. в разделе [правила управления версиями файлов](file-versioning-rules.md). В этом случае необходимо удалить новый продукт, прежде чем можно будет переустановить старый продукт.

-   [Управление версиями файлов по умолчанию](default-file-versioning.md) приводит к тому, что установщик перезаписывает исходный файл с более новым несовместимым файлом.
-   Старые продукты, которым требуется исходный файл, повреждены.
-   Он также может препятствовать восстановлению старого продукта установщиком, поскольку версия файла пути к ключу компонента определяет версию компонента. Если уже установлена более новая версия файла пути к ключу, установщик не установит более раннюю версию компонента. Дополнительные сведения см. в разделе [правила управления версиями файлов](file-versioning-rules.md). В этом случае необходимо удалить новый продукт, прежде чем можно будет переустановить старый продукт.

Автор включает один и тот же ресурс в два разных компонента.

Если два компонента имеют ресурс с тем же именем и расположением, и оба компонента устанавливаются в одну и ту же папку, то при удалении любого из этих компонентов удаляется общий ресурс, который повреждает оставшийся компонент.

-   Удаление любого из компонентов приводит к удалению ресурса и прерыванию другого компонента.
-   Механизм подсчета ссылок на компоненты поврежден.

 

 



