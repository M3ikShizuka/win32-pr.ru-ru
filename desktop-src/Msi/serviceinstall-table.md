---
description: Таблица Сервицеинсталл используется для установки службы и содержит следующие столбцы.
ms.assetid: 81688d31-e560-4dd0-8d84-efb50206c76e
title: Таблица Сервицеинсталл
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3850b957df4dd0af662354c14f82717e4b86ad597f151c6a45bb8dc1bebea5af
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120039964"
---
# <a name="serviceinstall-table"></a>Таблица Сервицеинсталл

Таблица Сервицеинсталл используется для установки службы и содержит следующие столбцы.



| Столбец         | Type                               | Ключ | Допускает значения NULL |
|----------------|------------------------------------|-----|----------|
| сервицеинсталл | [Идентификатор](identifier.md)       | Д   | Нет        |
| Имя           | [Формате](formatted.md)         | Нет   | Нет        |
| DisplayName    | [Формате](formatted.md)         | Нет   | Д        |
| ServiceType    | [даублеинтежер](doubleinteger.md) | Нет   | Нет        |
| StartType      | [даублеинтежер](doubleinteger.md) | Нет   | Нет        |
| ErrorControl   | [даублеинтежер](doubleinteger.md) | Нет   | Нет        |
| LoadOrderGroup | [Формате](formatted.md)         | Нет   | Д        |
| Зависимости   | [Формате](formatted.md)         | Нет   | Д        |
| StartName      | [Формате](formatted.md)         | Нет   | Д        |
| Пароль       | [Формате](formatted.md)         | Нет   | Д        |
| Аргументы      | [Формате](formatted.md)         | Нет   | Д        |
| Компонент\_    | [Идентификатор](identifier.md)       | Нет   | Нет        |
| Описание    | [Формате](formatted.md)         | Нет   | Д        |



 

## <a name="columns"></a>Столбцы

<dl> <dt>

<span id="ServiceInstall"></span><span id="serviceinstall"></span><span id="SERVICEINSTALL"></span>сервицеинсталл
</dt> <dd>

Это первичный ключ для таблицы.

</dd> <dt>

<span id="Name"></span><span id="name"></span><span id="NAME"></span>Безымян
</dt> <dd>

Этот столбец представляет собой строку, которая предоставляет имя службы для установки. Максимальная длина строки — 256 символов. База данных диспетчера управления службами сохраняет регистр символов в имени службы, но при сравнении имен служб регистр не учитывается. Прямые косая черта (/) и обратная косая черта ( \\ ) являются недопустимыми символами имени службы.

</dd> <dt>

<span id="DisplayName"></span><span id="displayname"></span><span id="DISPLAYNAME"></span>DisplayName
</dt> <dd>

Этот столбец является локализуемой строкой, используемой программами пользовательского интерфейса для обнаружения службы. Максимальная длина строки — 256 символов. Диспетчер управления службами сохраняет регистр отображаемого имени, но при сравнении отображаемых имен регистр не учитывается.

</dd> <dt>

<span id="ServiceType"></span><span id="servicetype"></span><span id="SERVICETYPE"></span>ServiceType
</dt> <dd>

Этот столбец представляет собой набор битовых флагов, указывающих тип службы. В этом столбце должен быть указан один из следующих типов служб.



| Тип службы                | Значение      | Описание                                                                                                                                                                                                                  |
|--------------------------------|------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_ \_ Собственный процесс Win32 \_ службы   | 0x00000010 | Служба Microsoft Win32, которая выполняет собственный процесс.                                                                                                                                                                         |
| \_ \_ Общий процесс Win32 \_ для службы | 0x00000020 | Служба Win32, которая совместно использует процесс.                                                                                                                                                                                       |
| \_Интерактивный \_ процесс службы  | 0x00000100 | Служба Win32, взаимодействующая с рабочим столом. Это значение не может использоваться отдельно и должно быть добавлено к одному из двух предыдущих типов. При использовании этого флага для столбца StartName должно быть задано значение LocalSystem или null.<br/> |



 

Следующие типы служб не поддерживаются.



| Тип службы               | Значение      | Описание                   |
|-------------------------------|------------|-------------------------------|
| \_драйвер ядра \_ службы       | 0x00000001 | Служба драйверов.             |
| \_драйвер файловой \_ системы \_ службы | 0x00000002 | Служба драйвера файловой системы. |



 

</dd> <dt>

<span id="StartType"></span><span id="starttype"></span><span id="STARTTYPE"></span>старттипе
</dt> <dd>

Этот столбец представляет собой набор битовых флагов, указывающих время запуска службы. В этом столбце должен быть указан один из следующих типов запуска службы.



| Тип запуска службы  | Значение      | Описание                                                                                                |
|------------------------|------------|------------------------------------------------------------------------------------------------------------|
| \_Автоматический \_ Запуск службы   | 0x00000002 | Запуск службы во время запуска системы.                                                              |
| \_Запуск запроса на обслуживание \_ | 0x00000003 | Служба запускается, когда диспетчер управления службами вызывает функцию [**StartService**](/windows/win32/api/winsvc/nf-winsvc-startservicea) . |
| Служба \_ отключена      | 0x00000004 | Указывает службу, которая больше не может быть запущена.                                                         |



 

установщик Windows не может использовать параметры запуска \_ \_ запуска службы и \_ системы службы \_ .

</dd> <dt>

<span id="ErrorControl"></span><span id="errorcontrol"></span><span id="ERRORCONTROL"></span>ErrorControl
</dt> <dd>

В этом столбце указывается действие, предпринимаемое программой запуска, если не удается запустить службу во время запуска. Эти значения влияют на события ServiceControl StartService для установленных служб. В этом столбце должен быть указан один из следующих флагов управления ошибками.

Добавление константы **мсидбсервицеинсталлеррорконтролвитал** (value = 0x08000) к флагам в следующей таблице указывает на то, что общая установка должна завершиться ошибкой, если не удается установить службу в системе.



| Флаг управления ошибками       | Значение      | Действие программы запуска                                                                                                                                                                       |
|--------------------------|------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Ошибка службы — \_ \_ пропустить   | 0x00000000 | Записывает в журнал ошибку и переходит к выполнению операции запуска.                                                                                                                                       |
| Ошибка службы — \_ \_ Обычная   | 0x00000001 | Записывает в журнал ошибку, отображает окно сообщения и возобновляет операцию запуска.                                                                                                                    |
| \_ \_ критическая ошибка службы | 0x00000003 | Регистрирует ошибку, если это возможно, а система перезапускается с последней конфигурацией, которая хорошо известна. При запуске последней удачной конфигурации операция запуска завершается ошибкой. |



 

</dd> <dt>

<span id="LoadOrderGroup"></span><span id="loadordergroup"></span><span id="LOADORDERGROUP"></span>лоадордерграуп
</dt> <dd>

Этот столбец содержит строку с именем группы порядка загрузки, членом которой является эта служба. Если служба не принадлежит группе, укажите значение null или пустую строку.

</dd> <dt>

<span id="Dependencies"></span><span id="dependencies"></span><span id="DEPENDENCIES"></span>Сборки
</dt> <dd>

Этот столбец представляет собой список имен служб или групп порядка загрузки, которые система должна запустить перед этой службой. Разделяйте имена значениями NULL в списке. Если служба не имеет зависимостей, укажите значение null или пустую строку. Используйте синтаксис \[ ~ \] для вставки значения NULL. Зависимость от группы означает, что эту службу можно запустить, если хотя бы один член группы запущен после попытки запуска всех членов группы.

Например, чтобы затребовать, чтобы система запускала Service1 и S2, перед запуском службы, указанной в столбце сервицеинсталл, введите Service1 \[ ~ \] S2 \[ ~ \] \[ ~ \] в столбец зависимости. Идентификаторы Service1 и S2 должны либо находиться в первичном ключе таблицы, либо быть именем уже установленной службы.

Имена групп должны иметь префикс +, чтобы их можно было отличать от имени службы. Чтобы затребовать, чтобы система запускала Service1 и хотя бы один член группы упорядочения MyGroup перед запуском службы, указанной в столбце сервицеинсталл, введите Service1 \[ ~ \] + MyGroup \[ ~ \] \[ ~ \] .

</dd> <dt>

<span id="StartName"></span><span id="startname"></span><span id="STARTNAME"></span>StartName
</dt> <dd>

Служба входит в систему как имя, заданное строкой в этом столбце. Если тип службы является \_ \_ собственным процессом Win32, \_ Используйте имя учетной записи в формате имя_домена \\ имя пользователя. Если учетная запись принадлежит встроенному домену, ей разрешается указывать. \\ Имен. Учетная запись LocalSystem должна использоваться, если типом службы является служба \_ \_ общих процессов Win32 \_ или \_ Интерактивный \_ процесс службы. Функция [**CreateService**](/windows/win32/api/winsvc/nf-winsvc-createservicea) использует учетную запись LocalSystem, если параметру StartName задано значение NULL и большинство служб, поэтому оставить этот столбец пустым.

</dd> <dt>

<span id="Password"></span><span id="password"></span><span id="PASSWORD"></span>Пароль
</dt> <dd>

Эта строка представляет собой пароль для имени учетной записи, указанной в столбце StartName. Обратите внимание, что пользователь должен иметь разрешения на вход в систему в качестве службы. Служба не имеет пароля, если значение StartName равно null или является пустой строкой. Значение StartName для LocalSystem равно null, поэтому пароль в этом экземпляре равен null, поэтому большинство служб оставляет этот столбец пустым.

Обратите внимание, что после удаления службы, которая была установлена с именем пользователя и паролем, установщик не сможет выполнить откат службы без предварительного использования настраиваемого действия для получения пароля. Установщик может получить все необходимые сведения о службе, за исключением пароля, который хранится в защищенной части системы. Пользовательское действие получает пароль, запрашивая пользователя, считывая свойство из базы данных или считывая файл. После этого пользовательское действие должно вызвать [**чанжесервицеконфиг**](/windows/win32/api/winsvc/nf-winsvc-changeserviceconfiga)для указания пароля перед переустановкой службы.

Windows Установщик не записывает значение, указанное в поле пароль, в файл журнала.

</dd> <dt>

<span id="Arguments"></span><span id="arguments"></span><span id="ARGUMENTS"></span>Даваемых
</dt> <dd>

Этот столбец содержит все аргументы командной строки или свойства, необходимые для запуска службы.

</dd> <dt>

<span id="Component_"></span><span id="component_"></span><span id="COMPONENT_"></span>См\_
</dt> <dd>

Внешний ключ к столбцу одной из [таблиц Component](component-table.md). Обратите внимание, что для установки этой службы с помощью таблицы Инсталлсервице ключевой путь для этого компонента должен быть исполняемым файлом для службы.

</dd> <dt>

<span id="Description"></span><span id="description"></span><span id="DESCRIPTION"></span>Nописание
</dt> <dd>

Этот столбец содержит Локализуемое описание для настраиваемой службы. Если этот столбец остается пустым, установщик использует существующее описание службы, если оно существует. дополнительные сведения см \_ . в описании службы в пакете средств разработки программного обеспечения (SDK) для Microsoft Windows. Чтобы стереть существующее описание, введите " \[ ~ \] " в этом столбце. Это приводит к пустому описанию для новой или существующей службы.

</dd> </dl>

## <a name="remarks"></a>Remarks

Действие [инсталлсервицес](installservices-action.md) в [*таблицах последовательностей*](s-gly.md) обрабатывает сведения в этой таблице. Дополнительные сведения об использовании *таблиц последовательности* см. [в разделе Использование таблицы последовательностей](using-a-sequence-table.md).

Эта таблица имеет большую часть параметров функции Win32 [**CreateService**](/windows/win32/api/winsvc/nf-winsvc-createservicea) .

Хотя можно использовать пользовательский интерфейс, чтобы указать, что служба должна быть установлена как запускаемая из исходного кода, установщик на самом деле не поддерживает этот тип установки. Службы, запускаемые с уровнем привилегий локальной системы, должны быть установлены для запуска с локального жесткого диска. Избегайте установки служб, имитирующих привилегии конкретного пользователя, так как это может записать данные безопасности в журнал или системный реестр. Это может вызвать проблемы безопасности, конфликт паролей или потери данных конфигурации при перезапуске системы.

Чтобы удалить службу во время удаления, должна быть соответствующая запись для службы в [таблице ServiceControl](servicecontrol-table.md) , а флаг **мсидбсервицеконтролевентунинсталлделете** должен появиться в столбце событий. Установщик не удаляет службу в таблице Сервицеинсталл во время удаления без этой записи в таблице ServiceControl.

Сведения о защите службы см. в [таблице мсилоккпермиссионсекс](msilockpermissionsex-table.md).

## <a name="validation"></a>Проверка

<dl>

[ICE03](ice03.md)  
[ICE06](ice06.md)  
[ICE32](ice32.md)  
[ICE45](ice45.md)  
[ICE46](ice46.md)  
[ICE66](ice66.md)  
[ICE69](ice69.md)  
</dl>

 

 
