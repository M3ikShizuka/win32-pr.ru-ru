---
description: ICEM09 проверяет, безопасно ли модуль слияния обрабатывает предопределенные каталоги.
ms.assetid: 747ae5ee-adc1-4aa7-8239-2379f76bfd0f
title: ICEM09
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 30542ead9a47ab5e92074227b1ae47fa6de0e643
ms.sourcegitcommit: 61a4c522182aa1cacbf5669683d9570a3bf043b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2021
ms.locfileid: "122887395"
---
# <a name="icem09"></a>ICEM09

ICEM09 проверяет, безопасно ли модуль слияния обрабатывает предопределенные каталоги. Это достигается путем проверки того, что ни один компонент в модуле не устанавливает каталог в предопределенный системный каталог, например "ProgramFilesFolder" или "Programmenufolder". Вместо этого модули должны использовать каталоги с уникальными именами (созданные с помощью соглашения об именовании модулей слияния) и использовать настраиваемые действия для соответствующего целевого каталога. Этот подход предотвращает конфликт модулей с существующей структурой каталогов в конечной базе данных. ICEM09 проверяет, что настраиваемые действия, необходимые для работы этого метода, не существуют (чтобы средство слияния создавало их) или существовало в правильной форме (чтобы они работали должным образом).

Ошибка при исправлении предупреждения или ошибки, о которой сообщило ICEM09, может привести к проблемам с клиентами модуля слияния. Строки таблицы каталогов с первичными ключами, например ProgramFilesFolder, часто существуют в базе данных. Таким образом, если компоненты модуля устанавливаются непосредственно в предопределенные каталоги, такие как ProgramFilesFolder, записи каталога в модуле могут конфликтовать с уже существующими строками. Это условие потребует от пользователя модуля разделить исходные файлы из модуля для сопоставления с существующим исходным каталогом.

## <a name="result"></a>Результат

ICEM09 сообщает об ошибке или предупреждении, когда компонент модуля устанавливает каталог в предварительно определенный системный каталог, что приводит к конфликту имен с существующей структурой каталогов.

## <a name="example"></a>Пример

ICEM09 отправляет следующие предупреждения для модуля, содержащего отображаемые записи базы данных.

``` syntax
Warning: The component 'Component1.<GUID>' installs directly into the pre-defined 
directory 'ProgramFilesFolder'. It is recommended that merge modules alias 
all such directories to unique names.
```

переименуйте каталог модуля слияния, чтобы он не совпадал со свойством установщик Windows и, следовательно, уникален. затем задайте свойству с тем же именем значение каталога установщик Windows. При разрешении каталога Каталог имеет свойство с тем же именем, поэтому расположение установки каталога является значением свойства. Файлы перемещаются из отдельного исходного расположения в то же целевое расположение. Этот процесс должен полностью удалить конфликты слияния.

``` syntax
Warning: The 'ModuleInstallExecuteSequence' table contains a type 51 action 
(StartMenuFolder.<GUID>) for a pre-defined directory, but this action 
does not have sequence number '1'
```

Если действие не имеет порядкового номера 1, оно может не выполнить слияние в целевую базу данных, достаточно ранней в последовательности, чтобы эффективно работать.

Чтобы устранить это предупреждение, установите порядковый номер равным 1. Обратите внимание, что большинство текущих средств слияния (но не некоторых старых версий) будут создавать эти настраиваемые действия во время слияния, поэтому не всегда нужно явно создавать действия в модуле слияния.

``` syntax
Warning: The 'CustomAction' table contains a type 51 action (MyAppDataFolderAction) 
for a pre-defined directory, but the name is not the same as the target directory. 
Many merge tools will generate duplicate actions."
```

Поскольку столбец CustomAction является первичным ключом таблицы CustomAction, некоторые средства слияния могут создавать дублирующиеся действия, так как имя предварительно созданного действия отличается.

Чтобы устранить это предупреждение, присвойте действию имя, совпадающее с именем целевого каталога. Обратите внимание, что большинство текущих средств слияния (но не некоторых старых версий) создают эти пользовательские действия во время слияния, поэтому не всегда нужно явно создавать действия в модуле слияния.

[Таблица каталога](directory-table.md)



| Каталог          | \_Родительский каталог | дефаултдир |
|--------------------|-------------------|------------|
| ProgramFilesFolder | Directory1        | A          |
| Programmenufolder    | Directory2        | б:к        |
| аппдатафолдер      | Directory3        | D          |
| мипиктуресфолдер   | Directory4        | E          |



 

[Таблица компонентов](component-table.md)



| Компонент               | Каталог          |
|-------------------------|--------------------|
| Component1. &lt; УСТРОЙСТВА&gt; | ProgramFilesFolder |
| Component2. &lt; УСТРОЙСТВА&gt; | Programmenufolder    |
| Component3. &lt; УСТРОЙСТВА&gt; | аппдатафолдер      |
| Component4. &lt; УСТРОЙСТВА&gt; | мипиктуресфолдер   |



 

[Таблица CustomAction](customaction-table.md)



| CustomAction                 | Тип | Источник                       | Назначение              |
|------------------------------|------|------------------------------|---------------------|
| Programmenufolder. &lt; УСТРОЙСТВА&gt; | 51   | Programmenufolder. &lt; УСТРОЙСТВА&gt; | \[Programmenufolder\] |
| мяппдатафолдерактион        | 51   | Аппдатафолдер. &lt; УСТРОЙСТВА&gt;   | \[аппдатафолдер\]   |



 

[Таблица Модулеинсталлексекутесекуенце](moduleinstallexecutesequence-table.md)



| Действие                       | Последовательность | басеактион | После | Условие |
|------------------------------|----------|------------|-------|-----------|
| Programmenufolder. &lt; УСТРОЙСТВА&gt; | 100      |            |       |           |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Ссылка на модуль слияния ICE](merge-module-ice-reference.md)
</dt> </dl>

 

 



