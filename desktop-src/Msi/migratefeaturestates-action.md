---
description: Действие Мигратефеатурестатес используется во время обновления и при установке нового приложения поверх связанного приложения.
ms.assetid: 3f53c555-02a9-4249-9f1a-98cd655fc79f
title: Действие Мигратефеатурестатес
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a8e76edb5fa13506291cc85ebcf8c8824e4ee28e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105674120"
---
# <a name="migratefeaturestates-action"></a>Действие Мигратефеатурестатес

Действие Мигратефеатурестатес используется во время обновления и при установке нового приложения поверх связанного приложения. Мигратефеатурестатес считывает состояния компонентов в существующем приложении, а затем устанавливает эти состояния компонентов в состоянии ожидания установки. Метод полезен только в том случае, если новое дерево функций сильно не изменилось с исходного.

Действие Мигратефеатурестатес выполняется только при первом установке продукта. Действие Мигратефеатурестатес не выполняется во время режима обслуживания или удаления.

Действие Мигратефеатурестатес выполняется через каждую запись [обновленной таблицы](upgrade-table.md) последовательно и сравнивает код обновления, версию продукта и язык в каждой строке со всеми установленными в системе продуктами. Если действие Мигратефеатурестатес обнаруживает корреспонденцию, а флаг Мсидбупградеаттрибутесмигратефеатурес bit задан в столбце Attributes таблицы Upgrade, то установщик запрашивает существующие состояния компонентов для продукта и устанавливает эти состояния для тех же функций в новом приложении. Действие переносит только те состояния компонентов, если не задано предварительно [**выбранное**](preselected.md) свойство.

## <a name="sequence-restrictions"></a>Ограничения последовательности

Действие Мигратефеатурестатес должно следовать сразу после [действия костфинализе](costfinalize-action.md). Мигратефеатурестатес должны быть упорядочены как в [таблице инсталлуисекуенце](installuisequence-table.md) , так и в [таблице инсталлексекутесекуенце](installexecutesequence-table.md). Установщик предотвращает запуск Мигратефеатурестатес в Инсталлексекутесекуенце, если действие уже выполнялось в Инсталлуисекуенце.

## <a name="actiondata-messages"></a>Сообщения Актиондата

Мигратефеатуресеттингс отправляет сообщение данных о действии для каждого продукта.

## <a name="remarks"></a>Комментарии

Если несколько установленных продуктов совместно используют одну и ту же функцию, то состояние установки этого компонента может отличаться для разных продуктов. Действие Мигратефеатурестате использует следующий порядок приоритета при переносе состояний установки компонентов: Запуск локальной системы, запуск из источника, объявление и удаление. Например, установленный продукт A может иметь функцию Y как INSTALLSTATE \_ Local и установленный продукт B может иметь функцию y, так как InstallState \_ отсутствует. Если при обновлении устанавливается продукт C и выполняется миграция состояния установки компонента Y, Мигратефеатурестате устанавливает в качестве состояния установки компонента Y в продукте C значение INSTALLSTATE \_ Local.

Дополнительные сведения об использовании действия Мигратефеатурестатес для обновления продукта см. в разделе [Подготовка приложения к будущим основным обновлениям](preparing-an-application-for-future-major-upgrades.md).

 

 



