---
description: Для проверки базы данных используйте специальное средство проверки, чтобы объединить CUB-файл, содержащий внутренние средства оценки согласованности (ICEs), в базу данных, выполнить ICEs и сообщить о результатах.
ms.assetid: bdf38673-ee3d-47d8-ad6e-562cd5626918
title: Использование внутренних средств оценки согласованности
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 423e6dab453ae495dc6029b54eb039c8acc60f33
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673303"
---
# <a name="using-internal-consistency-evaluators"></a>Использование внутренних средств оценки согласованности

Для проверки базы данных используйте специальное средство проверки, чтобы объединить CUB-файл, содержащий внутренние средства [оценки согласованности](internal-consistency-evaluators-ices.md) (ICES), в базу данных, выполнить ICEs и сообщить о результатах. Некоторые средства предоставляются в пакете средств разработки программного обеспечения (SDK) для Microsoft Windows. В средах разработки от сторонних поставщиков также можно включить систему проверки ICE в свою среду разработки. Также можно написать собственное средство для выполнения проверки на ICE. Большинство средств проверки ICE объединяют CUB-файл и базу данных в третью временную базу данных. Установщик Windows отображаются предупреждения, ошибки, отладочные сведения и ошибки API, так как они выполняют каждую ICE в файле. cub. Когда установщик завершает выполнение ICEs, он закрывает MSI файл,. cub и временную базу данных без сохранения изменений. MSI-файл и CUB-файл остаются неизменными при проверке.

Пользовательские действия ICE обмениваются данными с пользователем, вызывая [**мсипроцессмессаже**](/windows/desktop/api/Msiquery/nf-msiquery-msiprocessmessage) и публикуя \_ сообщение пользователя инсталлмессаже. Сообщение КОМПИЛЯТОРА обычно возвращает следующую информацию:

-   Имя ICE, которое обнаружило ошибку
-   Дата создания ICE
-   Автор ICE
-   Дата последнего изменения ICE.
-   Описание ошибки API, вызвавшей сбой ICE
-   Описание ошибки
-   Предупреждение для пользователя
-   Имя таблицы базы данных, содержащей ошибку или предупреждение
-   Имя столбца таблицы, содержащего ошибку или предупреждение
-   Первичные ключи таблицы, содержащей ошибку или предупреждение
-   URL-адрес для HTML-файла, предоставляющего предложения по отладке
-   Строка, которая может содержать другие сведения

Авторы пакетов установки могут создавать пользовательские действия ICE или использовать стандартный набор ICEs, включенный в файлы. CUB, поставляемые вместе с пакетом SDK. Дополнительные сведения о написании ICE см. в разделе [создание внутренней сборки](building-an-ice.md).

После написания соответствующего значения ICEs для проверки разработчик должен объединить пользовательские действия в базу данных. msi, которая называется CUB-файлом, который содержит только ICEs и их обязательные таблицы. Невозможно установить CUB-файл, который используется только для хранения и предоставления доступа к настраиваемым действиям ICE. Дополнительные сведения о создании файлов. cub см. в разделе [Создание базы данных Ice](building-an-ice-database.md). Кроме того, разработчики могут проверить свой пакет установки, используя существующее значение ICEs, описанное в [справочнике по Ice](ice-reference.md). Эти данные по стандарту ICEs можно получить из файлов Standard. CUB, поставляемых с пакетом SDK.

Установка редактора таблиц базы данных Orca или средства проверки msival2 предоставляет файлы Logo. CUB, Дарице. cub и Мержемод. cub. Набор ICEs в файле Logo. cub является подмножеством файлов в файле Дарице. cub. Если пакет проходит проверку с помощью Дарице. CUB, он передается с Logo. cub. Мержемод. cub содержит набор ICEs, используемый для проверки модулей слияния. Дополнительные сведения см. в разделе [Справочник по модулю слияния](merge-module-ice-reference.md).

**Проверка пакета установки**

1.  Получите или создайте соответствующие пользовательские действия ICE. Вы можете использовать одно или несколько существующих единиц с использованием класса ICEs, описанных в [справочнике по Ice](ice-reference.md). Если для проверки требуется, чтобы она еще не наступила в этом списке, можно создать новый объект ICE, как описано в разделе [создание внутренней сборки](building-an-ice.md).
2.  Подготовьте базу данных ICE, содержащую все пользовательские действия ICE. Сведения о подготовке файла. cub см. в разделе [Создание базы данных Ice](building-an-ice-database.md) .
3.  Предоставьте файл. cub и MSI-файл средству проверки пакетов, например [Orca.exe](orca-exe.md) или [Msival2.exe](msival2-exe.md).

Обратите внимание, что модули слияния должны быть проверены, как описано в разделе [Проверка модулей слияния](validating-merge-modules.md).

 

 



