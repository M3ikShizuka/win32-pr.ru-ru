---
description: список возможных причин, по которым установщик Windows удалению не удалось удалить все файлы приложения.
ms.assetid: 0a856f0f-a829-478e-a83b-dade7b05b4f2
title: Удаление потерянных файлов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0d5eeceb45c2139d146c32bdf9917e41885688df
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127274136"
---
# <a name="removing-stranded-files"></a>Удаление потерянных файлов

Если файл, который должен быть удален с компьютера пользователя, остается установленным после удаления, установщик может не удалить компонент, содержащий этот файл, по одной или нескольким из следующих причин:

-   Бит Мсидбкомпонентаттрибутесперманент был задан для компонента в столбце Attributes [таблицы Component](component-table.md).
-   Не было указано значение для компонента в столбце ComponentId таблицы Component.
-   Компонент используется другим приложением или компонентом, который по-прежнему установлен.
-   В таблице [условий](condition-table.md) указано условие, которое включает функцию во время установки и отключает эту функцию во время удаления.
-   в файле ключа для компонента имеется предыдущее число ссылок в разделе **HKLM** \\ **Software** \\ **Microsoft** \\ **Windows** \\ **CurrentVersion** \\ **SharedDLLs**.
-   компонент устанавливается в системную папку, а любой файл в компоненте имеет предыдущее число ссылок в разделе **HKLM** \\ **Software** \\ **Microsoft** \\ **Windows** \\ **CurrentVersion** \\ **SharedDLLs**.
-   установщик Windows не удаляет файлы или разделы реестра, защищенные [защита ресурсов Windows](../wfp/windows-resource-protection-portal.md) (WRP). дополнительные сведения см. [в разделе использование установщик Windows и защита ресурсов Windows](windows-resource-protection-on-windows-vista.md). в Windows Server 2003, Windows XP и Windows 2000, установщик не удаляет файлы, защищенные с помощью Windows защиты файлов (WFP). Если файл пути ключа или ключ реестра компонента защищены с помощью WFP или WRP, установщик не удаляет компонент.
    > [!Note]  
    > поскольку установщик Windows не устанавливает, не обновляет или не удаляет ресурсы, защищенные WRP, не следует включать защищенные ресурсы в пакет установки. вместо этого используйте только [поддерживаемые механизмы замены ресурсов](../wfp/supported-file-replacement-mechanisms.md) , описанные в разделе [защита ресурсов Windows](../wfp/windows-resource-protection-portal.md) .

     

 

 
