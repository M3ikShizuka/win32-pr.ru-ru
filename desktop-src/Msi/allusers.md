---
Description: Свойство ALLUSERS настраивает контекст установки пакета.
ms.assetid: 942e7764-a80f-4880-9559-72174f1827f7
title: Свойство ALLUSERS
ms.topic: reference
ms.custom: snippet-project
ms.date: 07/27/2020
ms.openlocfilehash: f4e490216a16b6ef36cdb90efebbbf24a7b1b9cf
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "105669125"
---
# <a name="allusers-property"></a>Свойство ALLUSERS

Свойство **ALLUSERS** настраивает контекст установки пакета. Установщик Windows выполняет установку на уровне пользователя или на компьютере в зависимости от привилегий доступа пользователя, требуются ли повышенные привилегии для установки приложения, значение свойства **ALLUSERS** , значение свойства [**мсиинсталлперусер**](msiinstallperuser.md) и версия операционной системы.

Значение свойства **ALLUSERS** во время установки определяет [контекст установки](installation-context.md).

-   Свойство **ALLUSERS** , равное 1, указывает контекст установки для каждого компьютера.
-   Значение свойства **ALLUSERS** пустой строки ("") указывает контекст установки для каждого пользователя.
-   Если свойству **ALLUSERS** присвоено значение 2, установщик Windows всегда сбрасывает значение свойства **ALLUSERS** равным 1 и выполняет установку на компьютере или сбрасывает значение свойства **ALLUSERS** в пустую строку ("") и выполняет установку на уровне пользователя. Значение ALLUSERS = 2 позволяет системе сбрасывать значение **ALLUSERS** и контекст установки, зависящие от привилегий пользователя и версии Windows.

    **Windows 7:** Задайте для свойства **ALLUSERS** значение 2, чтобы использовать свойство [**мсиинсталлперусер**](msiinstallperuser.md) для указания контекста установки. Для установки на компьютер задайте для свойства **мсиинсталлперусер** пустую строку (""). Присвойте свойству **мсиинсталлперусер** значение 1 для установки на уровне пользователя. Если пакет был написан согласно рекомендациям по разработке, описанным в разделе [Создание отдельного пакета](single-package-authoring.md), пользователи, имеющие доступ пользователей, могут установить в контекст для каждого пользователя без необходимости предоставлять учетные данные UAC. Если у пользователя есть права доступа пользователя, установщик выполняет установку на компьютере только в том случае, если в диалоговое окно UAC передаются учетные данные администратора.

    **Windows Vista:** Задайте для свойства **ALLUSERS** значение 2 и установщик Windows соответствует [*контролю учетных записей*](u-gly.md) (UAC). Если у пользователя есть права доступа пользователя и ALLUSERS = 2, установщик выполняет установку на компьютере только в том случае, если в диалоговое окно UAC передаются учетные данные администратора. Если включен контроль учетных записей и не предоставлены правильные учетные данные администратора, установка завершается с ошибкой, сообщающей, что требуются права администратора. Если контроль учетных записей отключен с помощью раздела реестра, групповой политики или панели управления, диалоговое окно UAC не отображается, и установка завершается с ошибкой, сообщающей о необходимости прав администратора.

    **Windows XP:** Присвойте свойству **ALLUSERS** значение 2, а установщик Windows выполняет установку на уровне пользователя, если у пользователя есть права доступа пользователя.

-   Если значение свойства **ALLUSERS** не равно 2, установщик Windows игнорирует значение свойства [**мсиинсталлперусер**](msiinstallperuser.md) .

## <a name="example"></a>Пример

```xml
  <!-- Disallow user from installing for all users -->
    <Property Id="ALLUSERS" Secure="yes"/>
    <Condition Message="Setting the ALLUSERS property is not allowed because [ProductName] is a per-user application. Setup will now exit.">
      NOT ALLUSERS
    </Condition>
```

Пример из [классической выборки Windows](https://github.com/microsoft/Windows-classic-samples/blob/1d363ff4bd17d8e20415b92e2ee989d615cc0d91/Samples/DesktopToasts/CPP/Product.wxs) на сайте GitHub.

## <a name="default-value"></a>Значение по умолчанию

Рекомендуемый контекст установки по умолчанию — "на пользователя". Если параметр **ALLUSERS** не задан, установщик выполняет установку для отдельных пользователей. Чтобы убедиться, что свойство **ALLUSERS** не задано, присвоив ему значение пустой строки (""), ALLUSERS = "".

## <a name="remarks"></a>Комментарии

[Контекст установки](installation-context.md) определяет значения свойств [**DesktopFolder**](desktopfolder.md), [**программенуфолдер**](programmenufolder.md), [**programmenufolder**](startmenufolder.md), [**стартупфолдер**](startupfolder.md), [**темплатефолдер**](templatefolder.md), [**админтулсфолдер**](admintoolsfolder.md), [**ProgramFilesFolder**](programfilesfolder.md), [**коммонфилесфолдер**](commonfilesfolder.md), [**ProgramFiles64Folder**](programfiles64folder.md)и [**CommonFiles64Folder**](commonfiles64folder.md) . Контекст установки определяет части реестра, в которых записи в [таблице реестра](registry-table.md) и [таблице ремоверегистри](removeregistry-table.md)с параметром-1 в корневом столбце, записываются или удаляются.

## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Версия<br/> | Установщик Windows 5,0 в Windows Server 2012, Windows 8, Windows Server 2008 R2 или Windows 7. Установщик Windows 4,0 или установщик Windows 4,5 на Windows Server 2008 или Windows Vista. Установщик Windows в Windows Server 2003 или Windows XP. Сведения о минимальном пакете обновления Windows, который требуется для установщик Windows версии, см. в [установщик Windows Run-Time требования](windows-installer-portal.md) .<br/> |



## <a name="see-also"></a>См. также

<dl> <dt>

[Свойства](properties.md)
</dt> <dt>

[**мсиинсталлперусер**](msiinstallperuser.md)
</dt> <dt>

[Контекст установки](installation-context.md)
</dt> <dt>

[Создание отдельных пакетов](single-package-authoring.md)
</dt> </dl>

 

 




