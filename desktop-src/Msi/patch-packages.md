---
description: Установщик Windows исправление (MSP-файл) — это файл, который используется для доставки обновлений приложениям установщик Windows.
ms.assetid: f59736d7-0b5a-466c-ab60-f210ccccb07f
title: Пакеты исправлений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 56b4bb5b7e182c8118f5a40c45be440784b92099
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103812857"
---
# <a name="patch-packages"></a>Пакеты исправлений

Установщик Windows исправление (MSP-файл) — это файл, который используется для доставки обновлений приложениям установщик Windows. Исправление представляет собой автономный пакет, содержащий все сведения, необходимые для обновления приложения. Пакет исправлений (MSP-файл) может быть намного меньше, чем установщик Windows пакет (MSI-файл) для всего обновленного приложения. Дополнительные сведения о доставке небольших обновлений в приложения см. в разделе [уменьшение размера исправления](reducing-patch-size.md).

Пакет исправлений содержит фактические обновления приложения и описывает, какие версии приложения могут получить исправление. Исправления содержат не менее двух преобразований баз данных. Одно преобразование обновляет сведения в базе данных установки приложения. Другое преобразование добавляет сведения, используемые установщиком для файлов исправлений. Установщик использует сведения, предоставляемые преобразованиями для применения файлов исправлений, которые хранятся в потоке CAB-файлов пакета исправлений. У пакета исправлений нет базы данных, такой как установочный пакет (MSI-файл).

Начиная с версии установщик Windows 3,0, пакеты исправлений могут содержать сведения, описывающие последовательность исправлений для исправления относительно других обновлений в таблице [мсипатчсекуенце](msipatchsequence-table.md) , а также дополнительные описательные сведения в таблице [мсипатчметадата](msipatchmetadata-table.md) .

Пользователи могут устанавливать приложения и обновления из административного сетевого образа. Хотя пакеты исправлений можно применять к административным установкам, рекомендуемым методом для доставки обновлений является установка исходного приложения пользователями, а затем применение исправлений к локальному экземпляру приложения на своем компьютере. Это позволяет пользователям синхронизироваться с административным образом. Если к административной установке применяется исправление, все клиенты этой административной установки должны повторно кэшироваться и переустановить приложение для получения обновления. До повторного кэширования и переустановки пользователя пользователь не сможет выполнить установку по запросу и восстановить установки из исправленной административной установки.

Начиная с установщик Windows 3,0, пользователи, не являющиеся администраторами, могут устанавливать исправления для приложений, управляемых пользователем, после того как исправление будет утверждено администратором как доверенное. Дополнительные сведения о том, как это сделать, см. в статье об [установке исправлений Per-User управляемых приложениях](patching-per-user-managed-applications.md). Другой способ — использовать исправление учетной записи пользователя с минимальными правами.

> [!Note]  
> Если задана политика [алловлоккдовнпатч](allowlockdownpatch.md) , пользователи без прав администратора могут применить исправление к существующему приложению при выполнении установки с повышенными привилегиями. Этот метод не рекомендуется, так как он позволяет применять ненадежные исправления к приложению, которое может выполняться с повышенными привилегиями.

 

Пакеты исправлений состоят из следующих частей. Дополнительные сведения о создании пакетов исправлений см. в разделе [Создание пакета исправлений](creating-a-patch-package.md).

## <a name="summary-information-stream"></a>Сводный поток информации

Информационный поток сводки пакета исправлений содержит сведения об удостоверении и назначении исправления.

Информационный поток сводки содержит как минимум следующее:

-   Идентификатор GUID, однозначно определяющий исправление. Идентификатор GUID для этого исправления добавляется со списком идентификаторов GUID для более ранних исправлений, замененных этим исправлением.
-   Разделенный точками с запятой список кодов продуктов для допустимых целевых объектов для этого исправления.
-   Разделенный точками с запятой список преобразованных имен подхранилищ в том порядке, в котором они должны быть обработаны.
-   Разделенный точками с запятой список источников для этого исправления.

## <a name="transform-substorage"></a>Преобразование подхранилища

Пакет исправлений содержит преобразования, которые могут добавлять или удалять файлы, записи реестра, пользовательские интерфейсы и настройки. Преобразования включаются в пакет в качестве вложенных хранилищ. Пакет исправлений содержит два преобразования для каждой целевой базы данных. Одно преобразование — это фактические обновления базы данных установки, которое создается на основе различий между исходным и обновленным образами пакета установки. Другое преобразование добавляет записи в таблицы [Patch](patch-table.md), [патчпаккаже](patchpackage-table.md), [Media](media-table.md), [инсталлексекутесекуенце](installexecutesequence-table.md)и [админексекутесекуенце](adminexecutesequence-table.md) . Информация во внешнем хранилище связывается с конкретным [**UpgradeCode**](upgradecode.md), [**ProductCode**](productcode.md), [**ProductVersion**](productversion.md)и [**продуктлангуаже**](productlanguage.md). Пакет исправлений, который можно применить к нескольким целям, содержит более одной пары этих преобразований.

## <a name="cabinet-file-stream"></a>Поток CAB-файлов

Поток CAB-файлов, содержащийся в исправлении, может содержать файлы следующих типов:

-   Файлы исправлений, содержащие сведения, необходимые для изменения старой версии файла в новую версию. Для обновления одной или более старых версий файла можно использовать один файл обновления.
-   Дополнительные файлы добавляются в приложение, которое отсутствует в старой версии.
-   Полный файл замены. В редких случаях, когда новая версия файла меньше, чем исправление, необходимое для обновления старой версии этого файла, новый файл может быть включен полностью. Это новые файлы, которые устанавливаются со старыми версиями.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Создание пакета исправлений](creating-a-patch-package.md)
</dt> </dl>

 

 



