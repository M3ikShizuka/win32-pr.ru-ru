---
description: Разработчики установщик Windowsных пакетов могут использовать настраиваемое действие типа 17, если стандартные действия недостаточны для выполнения установки.
ms.assetid: 99efd6d5-e0a3-4e66-ae55-252d19090d31
title: Тип настраиваемого действия 17
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b53d0046cb7515d701eb1bae3d10de0570ee5843
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104349002"
---
# <a name="custom-action-type-17"></a>Тип настраиваемого действия 17

Это пользовательское действие вызывает библиотеку динамической компоновки (DLL), написанную на языке C или C++.

## <a name="source"></a>Источник

Библиотека DLL устанавливается вместе с приложением во время текущего сеанса. Исходное поле [таблицы CustomAction](customaction-table.md) содержит ключ к [таблице File](file-table.md). Расположение кода настраиваемого действия определяется разрешением целевого пути для этого файла; Поэтому это настраиваемое действие должно быть вызвано после установки этого файла и до его удаления.

## <a name="type-value"></a>Значение типа

Включите следующее значение в столбец Type [таблицы CustomAction](customaction-table.md) , чтобы указать базовый числовой тип.



| Константы                                                          | Шестнадцатеричный | Decimal |
|--------------------------------------------------------------------|-------------|---------|
| **мсидбкустомактионтипедлл**  +  **мсидбкустомактионтипесаурцефиле** | 0x011       | 17      |



 

## <a name="target"></a>Целевой объект

Библиотека DLL вызывается через точку входа с именем в поле Target [таблицы CustomAction](customaction-table.md), передавая один аргумент, который является обработчиком текущего сеанса установки. Имя точки входа, указанное в таблице, должно совпадать с именем, экспортированным из библиотеки DLL. Обратите внимание, что если функция записи не указана с помощью. DEF-файл или спецификация "/EXPORT: компоновщик" имя может содержать символ подчеркивания в начале и @4 суффикс "". Вызываемая функция должна задавать \_ \_ соглашение о вызовах STDCALL.

## <a name="return-processing-options"></a>Параметры обработки возвращаемых значений

Включите дополнительные биты флага в столбец Type [таблицы CustomAction](customaction-table.md) , чтобы указать параметры обработки возвращаемых данных. Описание параметров и значений см. в разделе [Параметры обработки возвращаемых пользовательских действий](custom-action-return-processing-options.md).

## <a name="execution-scheduling-options"></a>Параметры планирования выполнения

Включите дополнительные биты флагов в столбец Type [таблицы CustomAction](customaction-table.md) , чтобы указать параметры планирования выполнения. Эти параметры управляют несколькими выполнениями пользовательских действий. Описание параметров см. в разделе [Параметры планирования выполнения пользовательских действий](custom-action-execution-scheduling-options.md).

## <a name="in-script-execution-options"></a>Параметры выполнения In-Script

Включите дополнительные биты флага в столбец Type [таблицы CustomAction](customaction-table.md) , чтобы указать параметр выполнения в скрипте. Эти параметры копируют код действия в скрипт выполнения, отката или фиксации. Описание параметров см. в разделе [пользовательские действия In-Script параметры выполнения](custom-action-in-script-execution-options.md).

## <a name="return-values"></a>Возвращаемые значения

См. раздел [возвращаемые значения пользовательских действий](custom-action-return-values.md).

## <a name="remarks"></a>Комментарии

Для пользовательского действия, которое вызывает библиотеку динамической компоновки (DLL), требуется маркер сеанса установки. Если это также отложенное настраиваемое действие выполнения, сеанс может больше не существовать во время выполнения скрипта установки. Сведения о том, как пользовательское действие этого типа может получить сведения о контексте, см. в разделе [Получение контекстных сведений для отложенного выполнения настраиваемых действий](obtaining-context-information-for-deferred-execution-custom-actions.md).

Пользовательские действия выполняются в отдельном потоке и могут иметь ограниченный доступ к системе. Настраиваемые действия, которые выполняются асинхронно, блокируют основной поток при завершении текущей последовательности или сеанса установки до тех пор, пока они не будут возвращены.

Настраиваемые действия, которые ссылаются на установленный файл в качестве источника, например тип настраиваемого действия 17 (DLL), должны соответствовать следующим ограничениям последовательности.

-   Настраиваемое действие должно быть упорядочено после [действия костфинализе](costfinalize-action.md). Это необходимо для того, чтобы пользовательское действие могло разрешить путь, необходимый для поиска библиотеки DLL.
-   Если исходный файл еще не установлен на компьютере, отложенные (в скрипте) настраиваемые действия этого типа должны быть упорядочены после [действия инсталлфилес](installfiles-action.md).
-   Если исходный файл еще не установлен на компьютере, неотложенные настраиваемые действия этого типа должны быть упорядочены после [действия функции InstallFinalize](installfinalize-action.md).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Настраиваемые \_ действия](custom-actions.md)
</dt> <dt>

[Пользовательские действия отложенного выполнения](deferred-execution-custom-actions.md)
</dt> <dt>

[Библиотеки динамической компоновки](dynamic-link-libraries.md)
</dt> </dl>

 

 



