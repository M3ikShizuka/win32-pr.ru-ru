---
description: При создании 64-разрядного пакета установщик Windows следуйте приведенным ниже рекомендациям.
ms.assetid: e7dfd188-fd4d-49d6-8cf5-c17182b697ca
title: Использование 64-разрядных пакетов установщик Windows
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5b46ab8a9668d816ea99bd92c2575e9ea6367352
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105650961"
---
# <a name="using-64-bit-windows-installer-packages"></a>Использование 64-разрядных пакетов установщик Windows

При создании [64-разрядных установщик Windows пакетов](64-bit-windows-installer-packages.md) или приложений, вызывающих установщик Windows для установки 64-разрядных пакетов, выполните следующие действия.

-   Используйте установщик Windows схему базы данных 200 или более поздней версии. Укажите, что версия 2,0 является минимальной версией установщика, необходимой для установки пакета, задав для свойства " [**сводное число страниц**](page-count-summary.md) " целое число 200. Более ранние версии установщик Windows отклоняются попытки установки 64-разрядных пакетов. Для 64-разрядных пакетов на платформе Arm64 схема базы данных установщик Windows должна быть 500 или выше.
-   Укажите в свойстве [**Сводка шаблона**](template-summary.md) потока сводных данных о пакете, что это 64-разрядный пакет. Введите "Intel64" в поле "платформа" Свойства " **Сводка" шаблона** , если пакет должен выполняться на процессоре Intel64. Введите "x64", если пакет должен выполняться на 64-разрядном расширенном процессоре. Введите "Arm64", если пакет должен быть запущен на процессоре Arm64. Пакет не может быть помечен как поддерживающий платформы Intel64 и x64, значение свойства **сводки шаблона** "Intel64, x64" недопустимо. Пакет не может быть помечен как поддерживающий как 32-разрядную, так и 64-разрядную платформу. значения свойств "Сводка" для **шаблона** "Intel, x64" и "Intel, Intel64" являются недопустимыми.
-   Определение каждого 64-разрядного компонента путем установки **msidbComponentAttributes64bit** в столбце Attributes таблицы [Component](component-table.md) .
-   Используйте необязательные условные операторы, которые проверяют версию 64-разрядной операционной системы, ссылаясь на свойство [**VersionNT64**](versionnt64.md) . Установщик Windows устанавливает это свойство в 64-разрядную версию Windows и оставляет VersionNT64 неопределенным, если операционная система не является 64-разрядной Windows. Дополнительные сведения см. [в разделе Использование свойств в условных инструкциях](using-properties-in-conditional-statements.md).
-   Используйте необязательные условные операторы, которые проверяют числовой уровень процессора компьютера, ссылаясь на свойство [**Intel64**](intel64.md) или [**Msix64**](msix64.md) . Установщик Windows задает для этих свойств текущий числовой уровень процессора компьютера и оставляет свойство **Intel64** неопределенным, если это не процессор на базе процессоров Itanium. Дополнительные сведения см. [в разделе Использование свойств в условных инструкциях](using-properties-in-conditional-statements.md).
-   Используйте [таблицу аппсеарч](appsearch-table.md) и [действие аппсеарч](appsearch-action.md) , чтобы выполнить необязательный Поиск в реестре для существующих 64-разрядных компонентов. Чтобы найти существующие 64-разрядные компоненты, включите бит **msidbLocatorType64bit** в столбец Type [таблицы реглокатор](reglocator-table.md). Дополнительные сведения см. в разделе [Поиск существующих приложений, файлов, записей реестра или свойств записей ini-файлов.](searching-for-existing-applications-files-registry-entries-or--ini-file-entries.md)
-   Получите пути к системным папкам, ссылаясь на свойство [**System64Folder**](system64folder.md), свойство [**ProgramFiles64Folder**](programfiles64folder.md) и свойство [**CommonFiles64Folder**](commonfiles64folder.md) для 64-разрядных папок и свойство [**системфолдер**](systemfolder.md) , свойство [**ProgramFilesFolder**](programfilesfolder.md) и свойство [**коммонфилесфолдер**](commonfilesfolder.md) для 32-разрядных папок.
-   Убедитесь, что приложение использует правильный идентификатор GUID при ссылке на 64-разрядный компонент. При наличии 32-разрядных и 64-разрядных версий определенного компонента они должны иметь разные идентификаторы GUID компонента.
-   Определите, нужно ли определять новые переменные среды при установке 64-разрядных приложений.
-   Если требуется установить диспетчер драйверов ODBC 64, компонент, который его несет, должен называться ODBCDriverManager64. Диспетчер драйверов ODBC должен быть создан в пакете установщика, и должен быть добавлен компонент с именем ODBCDriverManager64. При необходимости диспетчер будет установлен.
-   Убедитесь, что приложение вызывает только 32-разрядные службы, запускаемые в качестве исполняемых файлов. Приложения не должны вызывать 32-разрядные службы, выполняемые в библиотеках DLL.
-   Если приложение устанавливает сосуществующую 32-разрядную и 64-разрядную версии компонента, убедитесь, что приложение имеет правильные сведения о файле shares. ini.
-   Убедитесь, что приложение применяет только 32-разрядные исправления для 32-разрядных двоичных файлов и 64-разрядных исправлений в 64-разрядные двоичные файлы.
-   Рекомендуется использовать будущие сценарии обновления как для 32-разрядных, так и для 64-разрядных версий и поддерживать коды обновления. Дополнительные сведения см. в разделе [Установка исправлений и обновления](patching-and-upgrades.md).
-   При использовании приложения [начальной загрузки](bootstrapping.md) для установки [64-разрядного пакета установщик Windows](64-bit-windows-installer-packages.md)скомпилируйте приложение начальной загрузки как 64-разрядное приложение.
-   Чтобы отключить [отражение реестра](../winprog64/registry-reflection.md) для разделов реестра, затронутых определенным компонентом, установите бит **Мсидбкомпонентаттрибутесдисаблерегистрирефлектион** в поле Attributes таблицы [Component](component-table.md) . Это может потребоваться для 32-разрядных и 64-разрядных копий одного и того же приложения. Если этот бит задан, установщик Windows вызывает функцию [**регдисаблерефлектионкэй**](/windows/win32/api/winreg/nf-winreg-regdisablereflectionkey) для каждого ключа, к которому обращается компонент. Этот бит доступен в установщик Windows версии 4,0. Этот бит не учитывается в 32-разрядных системах. Этот бит не учитывается в 64-разрядных версиях Windows XP и Windows 2000.

> [!Note]  
> Значение числового корня реестра, возвращенное параметром *лппасбуф* функции [**мсижеткомпонентпас**](/windows/desktop/api/Msi/nf-msi-msigetcomponentpatha) , различает компоненты в 32-разрядных и 64-разрядных операционных системах. Дополнительные сведения см. в разделе Функция **мсижеткомпонентпас** .

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[64-разрядные пользовательские действия](64-bit-custom-actions.md)
</dt> </dl>

 

 
