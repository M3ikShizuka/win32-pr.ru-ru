---
description: начиная с установщик Windows 3,0, авторы могут добавлять сведения о последовательности исправлений в базу данных пакета исправлений в таблице мсипатчсекуенце.
ms.assetid: 9cdcb25f-2c3d-411e-9aae-bdd52df38a97
title: Исправления последовательности
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2f61a72c8122f9f3679cf691f88bc3d9bc952732b9d638ca838f9992068b1c24
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120040013"
---
# <a name="sequencing-patches"></a>Исправления последовательности

начиная с установщик Windows 3,0, авторы могут добавлять сведения о последовательности исправлений в базу данных пакета исправлений в таблице [мсипатчсекуенце](msipatchsequence-table.md) . Установщик может использовать эти сведения для определения того, какие исправления применимы к установочному пакету, для определения наилучшей последовательности исправлений и установки исправлений в постоянном порядке независимо от порядка, в котором они предоставляются системе.

**установщик Windows 2,0:** Не поддерживается. Windows версии установщика, предшествующие установщик Windows 3,0, устанавливают исправления в том порядке, в котором они передаются в систему, независимо от того, содержат ли они таблицу [мсипатчсекуенце](msipatchsequence-table.md) .

Для использования функции последовательности исправлений необходимо выполнить следующие условия.

-   [Пакеты исправлений](patch-packages.md) (MSP-файлы) должны содержать таблицу [мсипатчсекуенце](msipatchsequence-table.md) , содержащую сведения о последовательности. Установщик устанавливает исправления, у которых нет таблицы Мсипатчсекуенце в том порядке, в котором они передаются в систему.
-   исправления устанавливаются с помощью установщик Windows 3,0 или более поздней версии.

Windows В установщике версии 3,0 есть следующие функции, которые могут использоваться приложениями для определения наилучшей последовательности исправлений.

-   Функция [**мсидетерминепатчсекуенце**](/windows/desktop/api/Msi/nf-msi-msideterminepatchsequencea) принимает список исправлений и определяет, в какой последовательности они могут быть применены к установленному продукту. Эта функция учетных записей содержит исправления или продукты, уже установленные в системе.
-   Функция [**мсидетерминеаппликаблепатчес**](/windows/desktop/api/Msi/nf-msi-msidetermineapplicablepatchesa) принимает список исправлений и определяет, в какой последовательности они могут быть применены к установленному продукту. Эта функция не учитывает какие либо исправления или продукты, уже установленные в системе.

Windows Установщик версии 3,0 может применять несколько исправлений к продукту в одной установке исправлений. Группа исправлений может содержать исправления, включающие сведения о последовательности исправлений ( [мсипатчсекуенце](msipatchsequence-table.md) таблицу) и исправления, которые не имеют. установщик Windows устанавливает пакеты исправлений без этой таблицы в том порядке, в котором они передаются в систему. Учетные записи установщика для пакетов исправлений, в которых отсутствует таблица Мсипатчсекуенце, но помечены как устаревшие или заменяемые исправлениями методом, описанным в следующем разделе.

если установщик Windows версии 3,0 устанавливает несколько исправлений, то для определения последовательности применения отдельных исправлений к продукту необходимо выполнить указанные ниже действия.

1.  Установленные исправления без таблицы [мсипатчсекуенце](msipatchsequence-table.md) помещаются в последовательность в том порядке, в котором они были применены к продукту. Первое примененное исправление помещается первым в последовательности.
2.  В последовательность помещаются новые исправления без [таблицы мсипатчсекуенце](msipatchsequence-table.md) . Эти исправления применяются текущей установкой исправлений. Они помещаются в том порядке, в котором они предоставляются системе, и помещаются после всех исправлений на шаге 1.
3.  Из последовательности исправлений устраняются устаревшие исправления.
    > [!Note]  
    > Пакет исправлений может быть указан в свойстве [**сводки номера редакции**](revision-number-summary.md) — явный список устаревших исправлений, которые будут удалены с помощью исправления. этот список предназначен для использования установщик Windows версиями, предшествующими версии 3,0. Windows Установщик версии 3,0 удаляет исправления, помеченные как устаревшие, из последовательности, только если в исправлениях нет [таблицы мсипатчсекуенце](msipatchsequence-table.md).

     

4.  Установщик выполняет шаги по последовательности установки и определяет, какие исправления применимы в данной последовательности. При применении к продукту нескольких исправлений каждое исправление в последовательности также преобразует базу данных установки продукта (.msi файл). Исправление применимо в определенной последовательности только в том случае, если его преобразование базы данных способно взять [код продукта](product-codes.md), [**версию**](productversion.md), [**язык**](productlanguage.md)и свойство [**UpgradeCode**](upgradecode.md) , которые были результатом применения преобразований всех предыдущих [пакетов исправлений](patch-packages.md) к базе данных продукта. Установщик удаляет все неприменимые исправления из последовательности.
5.  Установщик начинает размещать исправления, в таблице [мсипатчсекуенце](msipatchsequence-table.md) которых есть сведения о последовательности. [Незначительные обновления](minor-upgrades.md) , которые содержат таблицу мсипатчсекуенце, помещаются в последовательность после исправлений, которые были собраны в предыдущих шагах, а также в порядке их наименьшей и максимальной версий продукта после обновления. Windows Затем установщик устраняет незначительные исправления обновления, неприменимые в этой последовательности.
6.  [Небольшие исправления обновления](small-updates.md) , предназначенные для [незначительных обновлений](minor-upgrades.md) с таблицей [мсипатчсекуенце](msipatchsequence-table.md) , назначаются в самую новую версию незначительного обновления в последовательности.
7.  Все [небольшие исправления обновлений](small-updates.md) , которые остаются неназначенными после предыдущих шагов, и с таблицей [мсипатчсекуенце](msipatchsequence-table.md) , помещаются в последовательность перед первым [незначительным обновлением](minor-upgrades.md) с таблицей мсипатчсекуенце, а также после базы данных установки .msi и любых исправлений без таблицы мсипатчсекуенце. Windows Затем установщик удаляет небольшие исправления обновлений, неприменимые в данной последовательности.
8.  Windows Установщик версии 3,0 устраняет замененные исправления из последовательности. Когда исправление заменяет исправления, которые происходят ранее в последовательности исправлений, исправление содержит все исправления, описанные в предыдущих исправлениях. Более ранние исправления больше не требуются. установщик Windows требуется информация в таблице [мсипатчсекуенце](msipatchsequence-table.md) для устранения замененных исправлений.
    > [!Note]  
    > Исправления, предназначенные для замены более раннего набора исправлений, должны быть созданы для замены предыдущих исправлений во всех семействах исправлений. [Небольшие исправления обновления](small-updates.md) могут заменять только небольшие обновления. [Незначительные](minor-upgrades.md) обновления могут заменять как небольшие, так и другие небольшие обновления.

     

9.  [Небольшие исправления обновления](small-updates.md) , которые содержат таблицы [мсипатчсекуенце](msipatchsequence-table.md) , последовательно передаются в версии продукта в соответствии с информацией о последовательности в таблицах мсипатчсекуенце. Это определяет окончательную последовательность исправлений.

Исправление, которое больше не следует использовать, можно исключить из последовательности исправлений. Дополнительные сведения об устранении исправлений из последовательности исправлений см. в разделе [Устранение исправлений](eliminating-patches.md).

Пример использования таблицы [мсипатчсекуенце](msipatchsequence-table.md) для применения исправлений в том порядке, в котором они созданы, см. в [примере с несколькими исправлениями](multiple-patching-example.md).

 

 



