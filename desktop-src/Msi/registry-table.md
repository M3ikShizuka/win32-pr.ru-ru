---
description: В таблице реестра содержатся сведения о реестре, которые приложение должно задать в системном реестре.
ms.assetid: 809ffd02-cf97-42d8-aed9-c13a14dcd8b4
title: Таблица реестра
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b16cb2084716ea8cb9830056808e9c6be7da667f
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127057640"
---
# <a name="registry-table"></a>Таблица реестра

В таблице реестра содержатся сведения о реестре, которые приложение должно задать в системном реестре.

Таблица реестра содержит следующие столбцы.



| Столбец      | Type                         | Ключ | Допускает значения NULL |
|-------------|------------------------------|-----|----------|
| Реестр    | [Идентификатор](identifier.md) | Да   | Нет        |
| Root        | [Integer](integer.md)       | Нет   | Нет        |
| Ключ         | [регпас](regpath.md)       | Нет   | Нет        |
| Имя        | [Формате](formatted.md)   | Нет   | Да        |
| Значение       | [Формате](formatted.md)   | Нет   | Да        |
| Компонент\_ | [Идентификатор](identifier.md) | Нет   | Нет        |



 

## <a name="columns"></a>Столбцы

<dl> <dt>

<span id="Registry"></span><span id="registry"></span><span id="REGISTRY"></span>Реестра
</dt> <dd>

Первичный ключ, используемый для задания записи реестра.

</dd> <dt>

<span id="Root"></span><span id="root"></span><span id="ROOT"></span>Корневой
</dt> <dd>

Предопределенный корневой ключ для значения реестра. В этом поле введите значение-1, чтобы сделать корневой ключ зависимым от типа установки. Введите одно из других значений в следующей таблице, чтобы принудительно записать значение реестра с определенным корневым ключом.



| Константа                          | Шестнадцатеричный | Decimal | Корневой ключ                                                                                                                                                                                                                                                                                                                                     |
|-----------------------------------|-------------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| (нет)                            | \- 0x001    | -1      | Если это установка на уровне пользователя, значение реестра записывается в разделе **hKey \_ текущий \_ пользователь**. Если это установка на компьютере, значение реестра записывается на **\_ локальный \_ компьютер hKey**. Обратите внимание, что установка для отдельного компьютера задается путем присвоения свойству [**ALLUSERS**](allusers.md) значения 1.<br/>                |
| **мсидбрегистрирутклассесрут**  | 0x000       | 0       | **HKey \_ \_Корень классов**. установщик записывает или удаляет значение из **\\ \\ классов программного обеспечения HKCU** во время установки в [контексте установки](installation-context.md)на уровне пользователя.<br/> Установщик записывает или удаляет значение из **\\ \\ классов программного обеспечения HKLM** во время установки на компьютере.<br/> |
| **мсидбрегистрируткуррентусер**  | 0x001       | 1       | **HKEY \_ текущего \_ пользователя**                                                                                                                                                                                                                                                                                                                      |
| **мсидбрегистрирутлокалмачине** | 0x002       | 2       | **HKEY \_ локальный \_ компьютер**                                                                                                                                                                                                                                                                                                                     |
| **мсидбрегистрирутусерс**        | 0x003       | 3       | **\_Пользователи hKey**                                                                                                                                                                                                                                                                                                                              |



 

Обратите внимание, что записи реестра, записанные в куст **HKCU** , должны ссылаться на компонент, для которого установлен бит регистрикэйпас в столбце Attributes [таблицы Component](component-table.md). Это гарантирует, что установщик запишет необходимые записи реестра при наличии нескольких пользователей на одном компьютере.

</dd> <dt>

<span id="Key"></span><span id="key"></span><span id="KEY"></span>Раздел
</dt> <dd>

Локализуемый ключ для значения реестра.

</dd> <dt>

<span id="Name"></span><span id="name"></span><span id="NAME"></span>Безымян
</dt> <dd>

Этот столбец содержит имя значения реестра (локализуемое). Если это значение равно null, то данные, указанные в столбце значение, записываются в раздел реестра по умолчанию.

Если столбец значение имеет значение null, то строки, приведенные в следующей таблице в столбце имя, имеют особое значение.



| Строка | Значение                                                                                                                                                                                          |
|--------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \+     | Ключ будет создан, если он отсутствует, при установке компонента.                                                                                                                            |
| \-     | Ключ должен быть удален, если он есть, со всеми его значениями и подразделами при удалении компонента.                                                                                     |
| \*     | Ключ будет создан, если он отсутствует, при установке компонента. Кроме того, ключ должен быть удален (если он есть) со всеми его значениями и подразделами при удалении компонента. |



 

Обратите внимание, что необходимо использовать [таблицу ремоверегистри](removeregistry-table.md) , если установленный раздел реестра необходимо удалить вместе со своими значениями и подразделами при установке компонента.

</dd> <dt>

<span id="Value"></span><span id="value"></span><span id="VALUE"></span>Значений
</dt> <dd>

Этот столбец представляет собой локализуемое значение реестра. Поле [форматируется](formatted.md). Если значение прикрепляется к одному из следующих префиксов (т. е. \# % *значение*), то значение интерпретируется, как описано в таблице. Обратите внимание, что каждый префикс начинается со знака решетки ( \# ). Если значение начинается с двух или более последовательных знаков числа ( \# ), первый \# игнорируется, а значение интерпретируется и сохраняется как строка.



| Prefix | Значение                                                                        |
|--------|--------------------------------------------------------------------------------|
| \#x    | Значение интерпретируется и сохраняется как шестнадцатеричное значение ( \_ двоичный формат reg).      |
| \#%    | Значение интерпретируется и сохраняется как расширяемая строка (REG \_ expand \_ SZ). |
| \#     | Значение интерпретируется и сохраняется как целое число (REG \_ DWORD).                |



 

-   Если значение содержит последовательность тильда \[ ~ \] , то значение интерпретируется как список строк, разделенных символами NULL (REG \_ Multi \_ SZ). Например, чтобы указать список, содержащий три строки a, b и c, используйте "a \[ ~ \] b \[ ~ \] c".
-   Последовательность \[ ~ \] в значении разделяет отдельные строки и интерпретируется и сохраняется как символ null.
-   Если \[ ~ \] перед списком строк стоит строка, строки будут добавлены к любым существующим строкам значений реестра. Если добавляемая строка уже содержится в значении реестра, исходное вхождение строки удаляется.
-   Если \[ ~ \] после конца списка строк, строки будут добавляться в начало всех существующих строк значений реестра. Если в значении реестра уже есть строка, которая находится в состоянии ожидания, то исходное вхождение строки удаляется.
-   Если объект a \[ ~ \] находится как в начале, так и в конце строки или не в начале списка строк, строки должны заменять все существующие строки значений реестра.
-   В противном случае значение интерпретируется и сохраняется в виде строки (REG \_ SZ).

</dd> <dt>

<span id="Component_"></span><span id="component_"></span><span id="COMPONENT_"></span>См\_
</dt> <dd>

Внешний ключ в первый столбец [таблицы Component](component-table.md) , ссылающийся на компонент, который управляет установкой значения реестра.

</dd> </dl>

## <a name="remarks"></a>Комментарии

Действия [вритерегистривалуес](writeregistryvalues-action.md) и [ремоверегистривалуес](removeregistryvalues-action.md) в [*таблицах последовательностей*](s-gly.md) обрабатывают сведения, приведенные в этой таблице. Дополнительные сведения об использовании *таблиц последовательности* см. [в разделе Использование таблицы последовательностей](using-a-sequence-table.md).

Данные реестра записываются в системный реестр, когда соответствующий компонент был выбран для локальной установки или запуска из источника.

Обратите внимание, что установщик удаляет раздел реестра после удаления последнего значения или подраздела раздела. Чтобы предотвратить удаление пустого раздела реестра при удалении, напишите фиктивное значение с ключом, который необходимо сохранить, и введите + в столбце имя. Если \* параметр находится в столбце имя, ключ удаляется со всеми его значениями и подразделами при удалении компонента.

Пользовательское действие можно использовать для добавления строк в таблицу реестра во время установки, удаления или восстановления транзакции. Эти строки не сохраняются в таблице реестра, и эти данные доступны только во время текущей транзакции. Поэтому пользовательское действие должно выполняться при каждой установке, удалении или исправлении транзакций, для которых требуется информация в этих дополнительных строках. Пользовательское действие должно предшествовать действиям [ремоверегистривалуес](removeregistryvalues-action.md) и [вритерегистривалуес](writeregistryvalues-action.md) в последовательности действий.

Сведения о том, как защитить раздел реестра, см. в [таблице мсилоккпермиссионсекс](msilockpermissionsex-table.md) и таблице [локкпермиссионс](lockpermissions-table.md).

## <a name="validation"></a>Проверка

<dl>

[ICE02](ice02.md)  
[ICE03](ice03.md)  
[ICE06](ice06.md)  
[ICE32](ice32.md)  
[ICE38](ice38.md)  
[ICE43](ice43.md)  
[ICE46](ice46.md)  
[ICE49](ice49.md)  
[ICE53](ice53.md)  
[ICE55](ice55.md)  
[ICE57](ice57.md)  
[ICE70](ice70.md)  
[ICE80](ice80.md)  
</dl>

 

 




