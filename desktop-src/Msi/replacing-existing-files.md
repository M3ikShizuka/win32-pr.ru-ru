---
description: Поскольку ненужное копирование файлов замедлит установку, установщик Windows определяет, был ли уже установлен файл ключа компонента, прежде чем пытаться установить файлы любого компонента.
ms.assetid: 8be734c7-4f16-4f54-93db-bb8efb1ea6da
title: Замена существующих файлов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f0b3908749e5496e4be9bf0ff68c7038a9ea6573
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103910691"
---
# <a name="replacing-existing-files"></a>Замена существующих файлов

Поскольку ненужное копирование файлов замедлит установку, установщик Windows определяет, был ли уже установлен файл ключа компонента, прежде чем пытаться установить файлы любого компонента. Если установщик находит файл с тем же именем, что и файл ключей компонента, установленный в целевом расположении, он сравнивает версию, дату и язык двух ключевых файлов и использует правила управления версиями файлов, чтобы определить, следует ли установить компонент, предоставленный пакетом. Если установщик определит, что он должен заменить базу компонента на файл ключа, то он использует правила управления версиями файлов для каждого установленного файла, чтобы определить, следует ли заменить этот файл.

Обратите внимание, что при создании пакета установки с версиями файлов строка версии в столбце Version [таблицы File](file-table.md) должна всегда совпадать с версией файла, входящего в пакет.

Правила управления версиями файлов по умолчанию можно переопределить или изменить с помощью свойства [**REINSTALLMODE**](reinstallmode.md) . Установщик использует правила управления версиями файлов, заданные свойством **REINSTALLMODE** при установке, переустановке или восстановлении файла. В следующем примере показано, как установщик применяет [правила управления версиями файлов](file-versioning-rules.md)по умолчанию. Значение свойства **REINSTALLMODE** по умолчанию — "omus".

Следующие файлы ключей компонентов устанавливаются в системе до переустановки компонента.



| Файл                                    | Версия  | Дата создания | Дата изменения | Язык    |
|-----------------------------------------|----------|-------------|---------------|-------------|
| Файл а                                   | 1.0.0000 | 1/1/99      | 1/1/99        | ENG         |
| филеб                                   | 2.0.0000 | 1/1/99      | 1/1/99        | ENG         |
| филек                                   | 1.0.0000 | 1/1/99      | 1/1/99        | ENG         |
| Подан                                   | 1.0.0000 | 1/1/99      | 1/2/99        | ENG         |
| Файл                                   | нет     | 1/1/99      | 1/1/99        | нет        |
| Филеф (Изменено > создать)<br/> | нет     | 1/1/99      | 1/2/99        | нет        |
| филег                                   | 1.0.0000 | 1/1/99      | 1/1/99        | ENG         |
| филех                                   | 1.0.0000 | 1/1/99      | 1/1/99        | ENG, ФРН, SPN |
| филеи                                   | 1.0.0000 | 1/1/99      | 1/1/99        | ENG, ФРН     |
| филеж                                   | 1.0.0000 | 1/1/99      | 1/1/99        | ENG, GER, ВОССТАНОВЛЕНИЕ |



 

В пакет установщика включены следующие файлы ключей компонентов.



| Файл                               | Версия  | Дата создания | Дата изменения | Язык    |
|------------------------------------|----------|-------------|---------------|-------------|
| Файл a (помеченный как один)<br/>     | 1.0.0000 | 1/1/99      | 1/1/99        | ENG         |
| Филеб (более ранняя версия)<br/> | 1.0.0000 | 1/1/99      | 1/1/99        | ENG         |
| Филек (более поздняя версия)<br/>   | 2.0.0000 | 1/1/99      | 1/1/99        | ENG         |
| Заархивировано (более поздняя версия)<br/>   | 2.0.0000 | 12/31/98    | 1/10/99       | фрн         |
| Файл (помеченный как один)<br/>     | нет     | 1/1/99      | 1/1/99        | нет        |
| Филеф (новый файл)<br/>        | нет     | 1/3/99      | 1/3/99        | нет        |
| Филег (новый язык)<br/>    | 1.0.0000 | 1/1/99      | 1/1/99        | фрн         |
| Филех (новый язык)<br/>    | 1.0.0000 | 1/1/99      | 1/1/99        | ВОССТАНОВЛЕНИЕ, ENG, GER |
| Филеи (другие языки)<br/>  | 1.0.0000 | 1/1/99      | 1/1/99        | ENG, ФРН, SPN |
| Филеж (меньшее число языков)<br/> | 1.0.0000 | 1/1/99      | 1/1/99        | GER         |



 

Следующие файлы ключей компонентов остаются в системе после переустановки компонента. Состояние файла ключа определяет состояние всех остальных файлов в компоненте.



| Файл                | Версия  | Дата создания | Дата изменения | Язык    |
|---------------------|----------|-------------|---------------|-------------|
| Файл a (исходный)    | 1.0.0000 | 1/1/99      | 1/1/99        | ENG         |
| Филеб (исходный)    | 2.0.0000 | 1/1/99      | 1/1/99        | ENG         |
| Филек (замена) | 2.0.0000 | 1/1/99      | 1/1/99        | ENG         |
| Заархивировано (замена) | 2.0.0000 | 12/31/98    | 1/10/99       | фрн         |
| Файл (замена) | нет     | 1/1/99      | 1/1/99        | нет        |
| Филеф (исходный)    | нет     | 1/1/99      | 1/2/99        | нет        |
| Филег (замена) | 1.0.0000 | 1/1/99      | 1/1/99        | фрн         |
| Филех (замена) | 1.0.0000 | 1/1/99      | 1/1/99        | ВОССТАНОВЛЕНИЕ, ENG, GER |
| Филеи (замена) | 1.0.0000 | 1/1/99      | 1/1/99        | ENG, ФРН, SPN |
| Филеж (исходный)    | 1.0.0000 | 1/1/99      | 1/1/99        | ENG, GER, ВОССТАНОВЛЕНИЕ |



 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Проверка CRC во время установки](crc-checking-during-an-installation.md)
</dt> </dl>

 

 




