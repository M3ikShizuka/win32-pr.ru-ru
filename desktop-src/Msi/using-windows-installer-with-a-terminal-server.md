---
description: приведенные ниже инструкции могут повлиять на установщик Windows установки при использовании сервера терминалов. разработчики программы установки должны всегда проверять, что их установщик Windows устанавливаются, как и ожидается, когда пользователи также используют сервер терминалов.
ms.assetid: deda9efa-a0fc-4b4e-a531-650ac201fd84
title: использование установщик Windows с сервером терминалов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d471fa19b4588a01a2730af44fa5e9d978d18859
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127461869"
---
# <a name="using-windows-installer-with-a-terminal-server"></a>использование установщик Windows с сервером терминалов

приведенные ниже инструкции могут повлиять на установщик Windows установки при использовании сервера терминалов. разработчики программы установки должны всегда проверять, что их установщик Windows устанавливаются, как и ожидается, когда пользователи также используют сервер терминалов.

-   в операционных системах, предшествующих Windows Server 2008 и Windows Vista, необходимо настроить системную политику [енаблеадминтсремоте](enableadmintsremote.md) , чтобы позволить администраторам выполнять установки в клиентском сеансе. начиная с Windows Server 2008 и Windows Vista, политика енаблеадминтсремоте больше не оказывает никакого влияния. Независимо от его настройки администраторы и другие администраторы могут выполнять установку в сеансе клиента или в сеансе консоли. администраторы и другие администраторы всегда могут выполнять установщик Windows установки в сеансе консоли.
-   установщик Windows предотвращает установку в [контексте установки](installation-context.md) на уровне пользователя, если[системная политика](system-policy.md) [дисаблеусеринсталлс](disableuserinstalls.md)имеет значение 1. В этом случае установщик пропускает все приложения, зарегистрированные как "на пользователя", и выполняет поиск только для приложений, зарегистрированных как для каждого компьютера.
-   когда администратор выполняет установку в сеансе клиента сервера терминалов, размещенного в Windows 2000, при установке необходимо использовать unc-путь, а не букву подключенного диска.

при разработке установщик Windows компонента, который может использоваться с сервером терминалов, разработчикам следует соблюдать следующие рекомендации.

-   Запишите все данные реестра **HKCU** в разделе \\ **программного обеспечения** HKCU в реестре.
-   Хранение сведений о конфигурации в INI-файлах не рекомендуется.
-   Запись сведений для каждого пользователя в реестр при первом запуске приложения, а не во время установки. если во время установки необходимо записывать сведения для каждого пользователя в реестр, разделите сведения для каждого пользователя и компьютера на разные установщик Windows компоненты. Создайте пакет таким же, чтобы установщик не пытался проверить и восстановить компоненты, содержащие сведения о пользователе при установке приложения.
-   Пакет, используемый только для установки на компьютере, должен записывать переменные среды в среду компьютера, включив \* в столбец Name [таблицы Environment](environment-table.md). Если пакет можно использовать для установки на уровне пользователя или для отдельных компьютеров, используйте два компонента. Включите компонент для каждого пользователя в [таблицу Component](condition-table.md) и введите параметры пользователя в таблице среда. Включите компонент для компьютера в таблицу Component и введите параметры компьютера в таблице среда. Управление установкой компонента с помощью условных операторов на основе свойства [**ALLUSERS**](allusers.md) в поле Условие таблицы Component.
-   При выполнении установки на компьютере с сервера терминалов установщик записывает переменные среды для отдельных пользователей в **HKCU** \\ **. Среда по умолчанию** \\ . Так как сервер терминалов не реплицирует этот раздел реестра, при установке не устанавливаются переменные среды для отдельных пользователей.
-   Так как сервер можно настроить таким образом, чтобы пользователи не могли восстанавливать приложения, приложение должно надлежащим образом обрабатывать регистр отсутствующих разделов реестра.

следующее применимо, если пакет установщик Windows, использующий библиотеки DLL, EXE или [настраиваемые действия](custom-actions.md) сценария, устанавливается в контексте установки на компьютере на сервере терминалов. В этом случае установщик задает свойство [**терминалсервер**](terminalserver.md) .

-   Отложенные настраиваемые действия выполняются в контексте локальной системы, если только действие не имеет атрибута **мсидбкустомактионтипетсаваре** . Это справедливо даже в том случае, если пользовательское действие олицетворяет пользователя в системе, которая не является сервером терминалов. Обратите внимание, что если пользовательское действие с атрибутом **мсидбкустомактионтипетсаваре** изменяет реестр пользователя, установщик не гарантирует, что эти изменения также будут внесены в реестр каждого пользователя компьютера.
-   Любые операции реестра в отложенном настраиваемом действии, которые считываются из куста реестра **HKCU** , видят куст реестра по умолчанию, а не куст реестра текущего пользователя.
-   Все операции с реестром в отложенном пользовательском действии, которое записывает в \\ **программное обеспечение** HKCU, обнаруживаются установщиком и копируются каждому пользователю компьютера при следующем входе пользователя в систему.
-   Все операции с реестром в отложенном пользовательском действии, которое записывает в **HKCU**, но не находятся в разделе реестра **HKCU** \\  , не обнаруживаются установщиком или не копируются.

дополнительные сведения см. в разделе [службы терминалов](../termserv/terminal-services-portal.md) в пакете Microsoft Windows Software Development Kit (SDK).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[енаблеадминтсремоте](enableadmintsremote.md)
</dt> <dt>

[**Терминалсервер, свойство**](terminalserver.md)
</dt> <dt>

[**Ремотеадминтс, свойство**](remoteadmints.md)
</dt> <dt>

[Службы терминалов](../termserv/terminal-services-portal.md)
</dt> </dl>

 

 
