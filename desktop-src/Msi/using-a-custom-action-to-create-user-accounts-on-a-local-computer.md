---
description: В этом примере показано, как использовать настраиваемые действия для создания учетных записей пользователей на локальном компьютере при установке компонента.
ms.assetid: fc06dd7b-46d7-45a0-85b3-26f808c64f89
title: Использование настраиваемого действия для создания учетных записей пользователей на локальном компьютере
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cfd3bf002c0fa1d661c6bfebb6d1a18cbc4b0652
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104346575"
---
# <a name="using-a-custom-action-to-create-user-accounts-on-a-local-computer"></a>Использование настраиваемого действия для создания учетных записей пользователей на локальном компьютере

В этом примере показано, как использовать настраиваемые действия для создания учетных записей пользователей на локальном компьютере при установке компонента. При удалении компонента удаляются локальные учетные записи пользователей, созданные с помощью настраиваемого действия. Демонстрируются некоторые пользовательские действия, включая [отложенные пользовательские действия выполнения](deferred-execution-custom-actions.md) и [откат настраиваемых действий](rollback-custom-actions.md).

Пример соответствует следующим спецификациям.

-   При установке создаются учетные записи пользователей только при использовании Windows 2000.
-   Установка создает учетные записи пользователей только в том случае, если компонент устанавливается для локального запуска. Это исключает создание учетных записей пользователей во время восстановления или переустановки компонента.
-   Установщик удаляет учетные записи при удалении компонента.
-   Данные учетной записи пользователя считываются из пользовательской таблицы в базе данных установки и не запрограммированы в коде настраиваемого действия.
-   Поскольку для создания или удаления учетных записей пользователей требуются повышенные привилегии, некоторые из настраиваемых действий должны быть способны вносить изменения в систему, требующую повышенных привилегий. Эти настраиваемые действия должны быть отложенными пользовательскими действиями, которые выполняются в скрипте выполнения.
-   Каждая учетная запись имеет настраиваемое действие отката, чтобы гарантировать удаление учетной записи при откате установки компонента. Это не включает в себя откат удаления учетной записи во время удаления компонента.
-   Настраиваемые действия отправляют сообщения Актиондата для каждой создаваемой или удаляемой учетной записи. Это не включает в себя предоставление сообщений о ходе выполнения для ProgressBar.
-   Настраиваемые действия сообщают об ошибке, если учетная запись не может быть создана.
-   Пароль учетной записи получается через взаимодействие пользователя с пользовательским интерфейсом или в случае установки на уровне Basic UI или без [интерфейса пользователя](user-interface-levels.md), как свойство, передаваемое в командной строке.
-   Конфиденциальные данные скрываются из файла журнала.

Пример включает гипотетический компонент с именем Тестаккаунт. В обсуждении в следующих разделах предполагается, что вы уже создали ресурсы, необходимые для Тестаккаунт, и создали в образце базы данных необходимые для установки компонента таблицы [компонентов,](feature-table.md) [компонентов](component-table.md), [файлов](file-table.md), [каталогов](directory-table.md)и [феатурекомпонентс](featurecomponents-table.md) . Дополнительные сведения см. [в примере установки](an-installation-example.md).

Следующие разделы содержат сведения о том, как создать необходимые настраиваемые действия и добавить их в пакет установки.

-   [Создание настраиваемых действий](authoring-the-custom-actions.md)
-   [Добавление пользовательской таблицы Кустомусераккаунтс](adding-a-custom-customuseraccounts-table.md)
-   [Создание таблицы CustomAction](authoring-the-customaction-table.md)
-   [Создание Актионтекст и таблиц ошибок](authoring-the-actiontext-and-error-tables.md)
-   [Создание таблицы Инсталлексекутесекуенце](authoring-the-installexecutesequence-table.md)
-   [Создание пользовательского интерфейса для ввода пароля](authoring-the-user-interface-for-password-input.md)
-   [Защита установки](securing-the-installation.md)

 

 



