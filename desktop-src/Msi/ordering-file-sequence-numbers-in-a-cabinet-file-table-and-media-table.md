---
description: Таблица File содержит полный список всех исходных файлов для установки.
ms.assetid: 481fdc45-82db-4128-93de-388562f636e9
title: Упорядочение порядковых номеров файлов в CAB-файле, таблице файлов и таблице мультимедиа
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 87f64558a570c7184da36feba8aeea6d2a7dc32c0d8add4c6963dece131c4849
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119327870"
---
# <a name="ordering-file-sequence-numbers-in-a-cabinet-file-table-and-media-table"></a>Упорядочение порядковых номеров файлов в CAB-файле, таблице файлов и таблице мультимедиа

[Таблица File](file-table.md) содержит полный список всех исходных файлов для установки. Файлы могут храниться на исходном носителе как отдельные файлы или сжаты в [CAB-файлах](cabinet-files.md). Порядковые номера в столбце Sequence таблицы File вместе с полем Ластсекуенце [таблицы Media](media-table.md)указывают как порядок установки файлов, так и исходный носитель, на котором расположен каждый файл. Каждая запись в таблице Media определяет исходный диск, содержащий все файлы с порядковыми номерами, меньшими или равными значению, указанному в столбце Ластсекуенце и превышающим значение Ластсекуенце предыдущего диска.

Например, предположим, что файл содержит порядковый номер 92, указанный в столбце Sequence таблицы File. Чтобы определить, на каком исходном диске находится этот файл, установщик проверяет запись таблицы мультимедиа для записи с наименьшим значением Ластсекуенце, превышающим 92. Столбец DiskId является первичным ключом для таблицы Media, и это поле однозначно идентифицирует диск в таблице.

максимальное число файлов, которые могут быть перечислены в таблице файлов установщик Windows пакета, составляет 32767 файлов. сведения о создании пакета установщик Windows, содержащего больше файлов, см. в разделе [разработка большого пакета](authoring-a-large-package.md).

Авторы пакетов могут уменьшить размер пакетов установки путем сжатия исходных файлов и включения их в CAB-файлы. Исходный образ файла может быть сжат, несжатым или смесьом обоих типов. Дополнительные сведения о сжатых и несжатых источниках см. в разделе [сжатые и несжатые источники](compressed-and-uncompressed-sources.md). Сжатые исходные файлы должны храниться в CAB-файле. Сжатые файлы в CAB-файле имеют собственные внутренние порядковые номера. Значения этих внутренних порядковых номеров не должны совпадать со значениями порядковых номеров в таблице File. Однако последовательность файлов, указанных в таблице File, должна совпадать с фактической последовательностью файлов в ящиках. Порядковые номера несжатых файлов не должны быть уникальными. Например, если все файлы распакованы и находятся на одном диске, то все файлы могут иметь одинаковый порядковый номер в таблице File.

В таблице Media описывается набор дисков, которые составляют исходный носитель для установки. Первая запись в таблице Media всегда должна иметь значение 1 в поле DiskId. Файлы должны быть упорядочены на исходном носителе, так что все файлы на диске 1 содержат порядковые номера таблиц файлов, меньшие, чем порядковые номера файлов на диске 2, и все порядковые номера на диске 2 должны быть меньше, чем на диске 3, и т. д. Это требование также применимо к диску, который содержит как сжатые, так и несжатые источники. Например, если источники мультимедиа для установки расположены на двух исходных дисках, и если диск 1 содержит как несжатые файлы, так и CAB-файл, то оба несжатых файла и файлы в CAB-файле должны иметь порядковые номера меньше минимального порядкового номера любого файла, хранящегося на диске 2. Если все файлы на диске 1 сжаты в CAB-файле, можно создать таблицу мультимедиа, как показано в следующей таблице.

[Таблица мультимедиа](media-table.md) (частичная)



| DiskId | ластсекуенце | DiskPrompt | Файле   | VolumeLabel |
|--------|--------------|------------|-----------|-------------|
| 1      | 5            | 1          | mycab.cab | Диск 1      |
| 2      | 10           | 2          |           | Диск 2      |



 

Если некоторые файлы на диске 1 сжаты в CAB-файле, а некоторые — несжатыми, то таблицу мультимедиа можно создать следующим образом.

[Таблица мультимедиа](media-table.md) (частичная)



| DiskId | ластсекуенце | DiskPrompt | Файле   | VolumeLabel |
|--------|--------------|------------|-----------|-------------|
| 1      | 5            | 1          |           | Диск 1      |
| 2      | 10           | 1          | mycab.cab | Диск 1      |
| 3      | 15           | 2          |           | Диск 2      |



 

Обратите внимание, что создание следующей таблицы мультимедиа является неверным, так как указывает некоторые порядковые номера файлов на диске 2, которые меньше, чем некоторые файлы в CAB-файле на диске 1.

[Таблица мультимедиа](media-table.md)



| DiskId | ластсекуенце | DiskPrompt | Файле   | VolumeLabel |
|--------|--------------|------------|-----------|-------------|
| 1      | 5            | 1          |           | Диск 1      |
| 2      | 10           | 2          |           | Диск 2      |
| 3      | 15           | 1          | mycab.cab | Диск 1      |



 

Большие файлы можно разделить между двумя или более CAB-файлами. В одном CAB-файле может быть не более 15 файлов, охватывающих следующий CAB-файл. Например, если имеется три CAB-файла, в первом CAB-файле может сонаходиться 15 файлов, которые охватывают второй CAB-файл, а у второго CAB-файла может быть 15 файлов, охватывающих третий CAB-файл. При добавлении записи в таблицу файлов для файла нескольких ящиков используйте первую часть файла, чтобы указать порядковый номер файла, введенный в столбце последовательность.

Таблицы File и Media можно создать следующим образом, если имеется три файла, два ящика и два диска. В этом примере c1.cab находится в disk1 и c2.cab находится в диски 2. Файл F2 охватывает оба ящика. В c1.cabном CAB-файле содержится весь файл F1 и первая часть файла F2. CAB-файл c2.cab содержит вторую часть файла F2, а также все файлы F3.

[Таблица мультимедиа](media-table.md) (частичная)



| DiskId | ластсекуенце | DiskPrompt | Файле | VolumeLabel |
|--------|--------------|------------|---------|-------------|
| 1      | 5            | 1          | c1.cab  | Диск 1      |
| 2      | 10           | 2          | c2.cab  | Диск 2      |



 

[Таблица файлов](file-table.md) (частичная)



| File | Последовательность |
|------|----------|
| справоч   | 1        |
| F2   | 2        |
| f   | 6        |



 

 

 



