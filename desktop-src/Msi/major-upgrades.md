---
description: Основное обновление — это комплексное обновление продукта, требующего изменения свойства ProductCode.
ms.assetid: 0c8f2aad-b301-4404-9051-694d97db1a8d
title: Основные обновления
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7795695072f6c153373db914781ac4b919cd2572
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127067875"
---
# <a name="major-upgrades"></a>Основные обновления

Основное обновление — это комплексное обновление продукта, требующего изменения свойства [**ProductCode**](productcode.md) .

Типичное крупное обновление удаляет предыдущую версию приложения и устанавливает новую версию. Основное обновление может реорганизовать дерево компонентов компонентов. Дополнительные сведения см. в разделе [**ProductCode**](productcode.md) и [изменение кода продукта](changing-the-product-code.md).

во время основного обновления с помощью установщик Windows установщик ищет на компьютере пользователя приложения, связанные с ожидающим обновлением, и когда обнаруживает его, извлекает версию установленного приложения из системного реестра. Затем установщик использует сведения в базе данных обновления, чтобы определить, следует ли обновить установленное приложение.

Чтобы включить возможности обновления установщика, каждый пакет должен иметь свойство [**UpgradeCode**](upgradecode.md) и [таблицу обновления](upgrade-table.md). У каждого отдельного продукта или набора продуктов должно быть собственное свойство **UpgradeCode**. Дополнительные сведения об использовании **UpgradeCode** см. в разделе, посвященном [использованию UpgradeCode](using-an-upgradecode.md). Каждая запись в таблице обновления содержит сочетание кода обновления, версии продукта и языковой информации, используемой для указания набора продуктов, затронутых обновлением. Когда [действие финдрелатедпродуктс](findrelatedproducts-action.md) обнаруживает, что затронутый продукт установлен в системе, он добавляет код продукта к свойству в столбце Актионпроперти таблицы Upgrade. [Действие RemoveExistingProducts](removeexistingproducts-action.md) и [действие мигратефеатурестатес](migratefeaturestates-action.md) удаляют или переносят продукты, перечисленные в списке актионпроперти. Авторы пакетов также могут выполнить процедуру, описанную в разделе [Подготовка приложения к последующим основным обновлениям](preparing-an-application-for-future-major-upgrades.md).

Windows Пакеты обновления установщика могут быть созданы таким, что основные обновления не будут устанавливаться, если у пользователя уже установлена более новая версия приложения. Дополнительные сведения о создании пакета, который не будет устанавливаться более новой версией, см. в разделе [предотвращение установки старого пакета в более новой версии](preventing-an-old-package-from-installing-over-a-newer-version.md) .

> [!Note]  
> Windows Установщик использует только первые три поля версии продукта. Описания этих полей см. в описании свойства [**ProductVersion**](productversion.md) . Если включить в версию продукта четвертое поле, установщик игнорирует четвертое поле.

 

Рекомендуемый способ применения крупного обновления путем установки полного пакета для обновленного продукта. Сведения о применении основного обновления путем установки продукта см. в разделе [применение основных обновлений путем установки продукта](applying-major-upgrades-by-installing-the-product.md).

Основное обновление, применяемое в качестве [пакета исправлений](patch-packages.md) для продукта, не может быть виртуализировано с другими обновлениями и не является [удаляемым](uninstallable-patches.md). сведения о применении основного пакета исправлений для обновления к пакету установщик Windows см. в разделе [применение основных обновлений путем исправления локальной установки продукта](applying-major-upgrades-by-patching-the-local-installation-of-the-product.md). Применение основного обновления с помощью пакета исправлений не рекомендуется, вместо этого необходимо установить основные обновления, установив полный продукт.

> [!Note]  
> Если приложение установлено в [контексте установки](installation-context.md)«на пользователя», любое крупное обновление приложения также должно выполняться с использованием контекста «на пользователя». Если приложение установлено в контексте установки на компьютере, любое крупное обновление приложения также должно выполняться с использованием контекста на компьютер. установщик Windows не будет устанавливать основные обновления в контексте установки.

 

С помощью свойства [**упградингпродукткоде**](upgradingproductcode.md) можно выполнить пользовательские действия, упорядоченные после [инсталлвалидате](installvalidate-action.md) , чтобы управлять основными обновлениями.

-   Если вы хотите, чтобы пользовательское действие выполнялось во время удаления продукта, но не при его удалении при значительных обновлениях, используйте это условие.

    Remove = "ALL", а не [ **упградингпродукткоде**](upgradingproductcode.md)

-   Если вы хотите, чтобы пользовательское действие выполнялось только во время крупного обновления, используйте это условие.

    [**упградингпродукткоде**](upgradingproductcode.md)

 

 



