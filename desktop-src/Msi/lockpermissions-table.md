---
description: Используется для защиты отдельных частей приложения в заблокированной среде. Его можно использовать с установкой файлов, разделов реестра и созданных папок.
ms.assetid: 7c20e211-7704-49c2-a0c5-aaa695a09764
title: Таблица Локкпермиссионс
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2c07402b80caec7beff68083567f2ff2fb9bf5eb
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105683350"
---
# <a name="lockpermissions-table"></a>Таблица Локкпермиссионс

Таблица Локкпермиссионс используется для защиты отдельных частей приложения в заблокированной среде. Его можно использовать с установкой файлов, разделов реестра и созданных папок.

Пакет, предназначенный для установки в Windows Server 2008 R2 или Windows 7, должен использовать [таблицу мсилоккпермиссионсекс](msilockpermissionsex-table.md) , а не таблицу локкпермиссионс. Установщик Windows версии, предшествующие установщик Windows 5,0, игнорируют таблицу Мсилоккпермиссионсекс. Установщик Windows 5,0 может установить пакет, содержащий таблицу Локкпермиссионс. Начиная с установщик Windows 5,0, установка пакета, содержащего таблицы Мсилоккпермиссионсекс и Локкпермиссионс, завершается ошибкой и возвращает сообщение об ошибке установщик Windows 1941.

Таблица Локкпермиссионс содержит следующие столбцы.



| Столбец     | Type                               | Ключ | Допускает значения NULL |
|------------|------------------------------------|-----|----------|
| LockObject | [Идентификатор](identifier.md)       | Да   | Нет        |
| Таблица      | [Text](text.md)                   | Да   | Нет        |
| Домен     | [Формате](formatted.md)         | Да   | Да        |
| Пользователь       | [Формате](formatted.md)         | Да   | Нет        |
| Разрешение | [даублеинтежер](doubleinteger.md) | Нет   | Да        |



 

## <a name="columns"></a>Столбцы

<dl> <dt>

<span id="LockObject"></span><span id="lockobject"></span><span id="LOCKOBJECT"></span>LockObject
</dt> <dd>

Этот столбец и столбец таблицы вместе указывают файл, каталог или раздел реестра, который должен быть защищен. Столбец LockObject — это внешний ключ, указывающий на первичный ключ таблицы, заданный столбцом таблицы.

</dd> <dt>

<span id="Table"></span><span id="table"></span><span id="TABLE"></span>Таблица
</dt> <dd>

В этом столбце и столбце LockObject указывается файл, каталог или ключ реестра, который должен быть защищен. В столбце Таблица введите file, Registry или Креатефолдер, чтобы указать LockObject, перечисленные в таблице [файлов](file-table.md), [таблице реестра](registry-table.md)или [таблице креатефолдер](createfolder-table.md).

</dd> <dt>

<span id="Domain"></span><span id="domain"></span><span id="DOMAIN"></span>Поддомен
</dt> <dd>

Столбец, определяющий домен пользователя, для которого должны быть установлены разрешения. Это имя автономного компьютера или доменного имени. Тип данных столбца [отформатирован](formatted.md), и в этом поле можно использовать строку \[ % доменпользователя, \] чтобы получить значение переменной среды доменпользователя для текущего домена. Чтобы получить любой другой домен, необходимо использовать [Настраиваемые действия](custom-actions.md). Дополнительные сведения см. в таблице настраиваемых действий.

</dd> <dt>

<span id="User"></span><span id="user"></span><span id="USER"></span>Нажат
</dt> <dd>

Столбец, определяющий локализованное имя пользователя, для которого задаются разрешения. Это имя должно находиться на компьютере или в домене. Установка завершается сбоем, если компьютер или контроллер домена не распознает сочетание домена и пользователя или если не удается получить идентификатор безопасности пользователя (SID). Для одного LockObject можно указать несколько пользователей.

Общие имена пользователей "все" и "Администраторы" могут быть указаны на английском языке и сопоставлены с известными идентификаторами безопасности. LocalSystem получает полный доступ ко всем дескрипторам безопасности, созданным с помощью таблицы Локкпермиссионс. Для получения текущего пользователя можно использовать свойство [**ComputerName**](computername.md), [**свойство LogonUser**](logonuser.md) или [**свойство UserName**](username.md) в этом поле. Для ввода локализованного имени любого другого пользователя или группы требуется настраиваемое действие.

Чтобы указать списки управления доступом для нескольких пользователей, можно использовать несколько записей с одинаковыми LockObject и записями таблицы (но разными записями пользователей).

</dd> <dt>

<span id="Permission"></span><span id="permission"></span><span id="PERMISSION"></span>PermissionSet
</dt> <dd>

Столбец, определяющий целочисленное описание системных привилегий. Ниже приведены наиболее часто используемые значения (полный список находится в Winnt. h).



| Privilege                                                              | Описание                     |
|------------------------------------------------------------------------|---------------------------------|
| УНИВЕРСАЛЬНые \_ все<br/> 0X10000000<br/> 268435456<br/>     | Доступ для чтения, записи и выполнения |
| УНИВЕРСАЛЬНое \_ выполнение<br/> 0X20000000<br/> 536 870 912<br/> | Доступ для выполнения                  |
| УНИВЕРСАЛЬНая \_ запись<br/> 0X40000000<br/> 1073741824<br/>  | Доступ на запись                    |



 

Нельзя указать УНИВЕРСАЛЬНое \_ чтение в столбце разрешений. Попытка выполнить это приведет к сбою. Вместо этого необходимо указать значение, например \_ чтение ключа или \_ универсальное чтение файла \_ .

Значение null, указанное в этом столбце, зарезервировано для будущего использования.

</dd> </dl>

## <a name="remarks"></a>Комментарии

Действия [инсталлфилес](installfiles-action.md), [вритерегистривалуес](writeregistryvalues-action.md)и [креатефолдерс](createfolders-action.md) в [*таблицах последовательностей*](s-gly.md) обрабатывают сведения, приведенные в этой таблице. Дополнительные сведения об использовании *таблиц последовательности* см. [в разделе Использование таблицы последовательностей](using-a-sequence-table.md).

Разрешение можно задать только в таблице Локкпермиссионс для пользователей, которые уже существуют на компьютере или в домене. Попытка задать разрешения для неизвестного пользователя приводит к сбою установки, даже если эта учетная запись пользователя создается во время установки с помощью отложенного настраиваемого действия.

Рекомендуется включать локальную группу системных администраторов во все списки управления доступом (ACL). Это гарантирует, что системный администратор сможет получать доступ к объектам и обслуживать их.

Каждый файл, раздел реестра или каталог, указанный в таблице Локкпермиссионс, получает явный дескриптор безопасности, независимо от того, заменяет ли он существующий объект или нет. Установщик Windows пытается сохранить безопасность объектов, уже существующих в системе. Если объект не перечислен в таблице Локкпермиссионс и заменяет существующий объект, замена Возвращает параметры безопасности заменяемого объекта.

Если объект не указан в таблице Локкпермиссионс и не заменяет существующий объект, он не получает явно заданного дескриптора безопасности. Доступ к новому объекту основан на атрибутах его родительского объекта или контейнера. Если объект не перечислен в таблице и заменяет объект без явного дескриптора безопасности, доступ к новому объекту основан на атрибутах его родительского объекта или контейнера.

Установщик Windows задает [**для свойства скользящего значения идентификатор**](usersid.md) безопасности (SID) или пользователя, запускающего установку.

## <a name="validation"></a>Проверка

<dl>

[ICE03](ice03.md)  
[ICE06](ice06.md)  
[ICE46](ice46.md)  
[ICE55](ice55.md)  
</dl>

 

 




