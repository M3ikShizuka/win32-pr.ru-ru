---
description: поскольку контроль учетных записей (UAC) в Windows Vista позволяет ограничивать привилегии во время установки, разработчики установщик Windows пакетов не должны рассчитывать на то, что их установка всегда имеет доступ ко всем частям системы.
ms.assetid: 8e3b4ad8-b978-4e27-b060-1d023846718f
title: Рекомендации по пакетам
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 930cb97cd2bb01a2bd69c5950a7e054c73d355e534ab67c812bcde44b7495b7b
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119649324"
---
# <a name="guidelines-for-packages"></a>Рекомендации по пакетам

поскольку [*контроль учетных записей*](u-gly.md) (UAC) в Windows Vista позволяет ограничивать привилегии во время установки, разработчики установщик Windows пакетов не должны рассчитывать на то, что их установка всегда имеет доступ ко всем частям системы.

пакет установщика, который может быть успешно развернут для обычных пользователей с помощью [групповая политика](/previous-versions/windows/desktop/Policy/group-policy-start-page) , в большинстве случаев также работает с UAC в Windows Vista. Исключения могут возникать, если [Таблица инсталлуисекуенце](installuisequence-table.md) содержит [действие Лаунчкондитионс](launchconditions-action.md) или [Таблица Лаунчкондитион](launchcondition-table.md) содержит условие на основе [привилегированного свойства](privileged.md). Windows поэтому разработчики пакетов установщика должны соблюдать следующие рекомендации, чтобы обеспечить работу пакета с UAC и Windows Vista.

-   При включении условия [*контекста установки*](i-gly.md) с действием в [таблице инсталлуисекуенце](installuisequence-table.md)используйте условную инструкцию, основанную на [привилегированном свойстве](privileged.md). Не используйте условие на основе свойства [**AdminUser**](adminuser.md) .
-   При включении контекста установки с условиями запуска установки используйте [тип настраиваемого действия 19](custom-action-type-19.md) в [таблице инсталлексекутесекуенце](installexecutesequence-table.md) и сделайте настраиваемое действие условным по отношению к [привилегированному свойству](privileged.md). Не используйте действие в [таблице лаунчкондитион](launchcondition-table.md) с условием, основанным на [свойстве AdminUser](adminuser.md) или привилегированном свойстве.
-   Чтобы прочитать или изменить конфигурацию системы, используйте [настраиваемое действие отложенного выполнения](deferred-execution-custom-actions.md) в [таблице инсталлексекутесекуенце](installexecutesequence-table.md). Не используйте настраиваемые действия немедленного выполнения в [таблице инсталлуисекуенце](installuisequence-table.md) для изменения конфигурации системы.
-   Чтобы изменить части системы, не относящиеся к пользователям, используйте отложенное настраиваемое действие в [таблице инсталлексекутесекуенце](installexecutesequence-table.md). Необходимо включить бит msidbCustomActionTypeNoImpersonate в тип настраиваемого действия.
-   Опустите бит 3 со значения свойства Summary [**Count Words**](word-count-summary.md) , чтобы указать, что пакет может быть необходим для повышения прав. Не включайте этот бит, если для установки этого пакета не требуются повышенные привилегии.
-   Включите манифест с запрошенным уровнем выполнения приложения.
-   Включите сертификат в таблицу [мсипатчцертификате](msipatchcertificate-table.md) исходного пакета и подпишите все исправления с тем же сертификатом.
-   если для установки пакета установщик Windows требуются повышенные привилегии, автор пакета должен включать атрибут [елеватионшиелд](elevationshield-attribute.md) для [элемента управления "кнопка](pushbutton-control.md) ", используемого для запуска установки. При этом пользователю будет выводиться предупреждение о том, что нажатие кнопки приведет к отображению диалогового окна UAC, запрашивающего авторизацию администратора для продолжения установки.
-   присвойте свойству [**мсидеплойменткомплиант**](msideploymentcompliant.md) значение 1, чтобы указать установщик Windows, что пакет был создан и протестирован в соответствии с UAC в Windows Vista. Если это свойство не задано, установщик определяет, соответствует ли пакет контролю учетных записей.

за пределами [групповая политика](/previous-versions/windows/desktop/Policy/group-policy-start-page)в Windows XP можно использовать следующую проверку соответствия UAC.

**Проверка соответствия UAC за пределами групповая политика**

1.  Войдите в систему с учетной записью администратора.
2.  Объявить пакет для установки на компьютере:

    **msiexec/жм** *package.msi*

3.  Выйдите из системы на компьютере.
4.  Войдите в систему в качестве обычного пользователя.
5.  Попытка установить объявленный пакет:

    **msiexec/i** *package.msi*

6.  В большинстве случаев, если установка выполнена успешно, пакет совместим с UAC.
7.  Задайте для свойства [**мсидеплойменткомплиант**](msideploymentcompliant.md) в пакете значение 1.
8.  проверьте правильность установки пакета с помощью Windows Vista.

 

 
