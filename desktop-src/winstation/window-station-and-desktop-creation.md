---
title: Создание оконной станции и рабочего стола
description: Система автоматически создает интерактивную станцию.
ms.assetid: 5b908cb6-3a72-4afc-aed0-8411e8d0888f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 52a3cc85a3194bea6c8eaea00a7ce794901426e794c962e1b23713561f8fc744
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118030520"
---
# <a name="window-station-and-desktop-creation"></a>Создание оконной станции и рабочего стола

Система автоматически создает интерактивную станцию. Когда интерактивный пользователь входит в систему, система связывается с интерактивной рабочей станцией с сеансом входа пользователя. Система также создает входной Рабочий стол по умолчанию для интерактивной рабочей станции (Winsta0 \\ по умолчанию). Процессы, запущенные вошедшим в систему пользователем, связаны с \\ рабочим столом Winsta0 Default.

Процесс может использовать функцию [**креатевиндовстатион**](/windows/win32/api/winuser/nf-winuser-createwindowstationa) для создания новой станции Windows, а также функцию **креатедесктоп** или [**креатедесктопекс**](/windows/win32/api/winuser/nf-winuser-createdesktopexa) для создания нового рабочего стола. Число создаваемых рабочих столов ограничивается размером кучи системных рабочих столов. Дополнительные сведения см. в разделе [**креатедесктоп**](/windows/win32/api/winuser/nf-winuser-createdesktopa).

Когда Неинтерактивный процесс, например приложение службы, пытается подключиться к рабочей станции, и для сеанса входа в систему не существует станции Windows, система пытается создать оконную станцию и Рабочий стол для сеанса. Имя созданной станции Windows основано на идентификаторе сеанса входа в систему, а рабочий стол имеет имя по умолчанию, как описано здесь:

-   Если служба выполняется в контексте безопасности учетной записи LocalSystem, но не содержит \_ атрибут "интерактивный процесс службы" \_ , то он использует следующую оконную станцию и Рабочий стол: Service-0x0-3E7 $ \\ Default. Эта Оконная станция не является интерактивной, поэтому служба не может отобразить пользовательский интерфейс. Кроме того, процессы, созданные службой, не могут отображать пользовательский интерфейс.
-   Если служба выполняется в контексте безопасности учетной записи пользователя, имя рабочей станции основано на службе SID пользователя — 0x *Z1* - *Z2*$, где *Z1* — это старшая часть идентификатора безопасности входа, а *Z2* — младшие части идентификатора безопасности входа. Поскольку идентификатор безопасности уникален для сеанса входа в систему, две службы, работающие в одном контексте безопасности, получают отдельные станции Window. Эти оконные станции не являются интерактивными.

Список управления доступом на уровне пользователей (DACL) для рабочей станции и рабочего стола включает следующие права доступа для учетной записи пользователя службы:

Оконная станция:

<dl> ВИНСТА \_ акцессклипбоард  
ВИНСТА \_ акцессглобалатомс  
ВИНСТА \_ креатедесктоп  
ВИНСТА \_ екситвиндовс  
ВИНСТА \_ реадаттрибутес  
\_требуются стандартные права \_  
</dl>

Настольные ПК:

<dl> DESKTOP \_ креатемену  
DESKTOP \_ CREATEWINDOW  
\_перечисление Desktop  
DESKTOP \_ хукконтрол  
DESKTOP \_ READOBJECTS  
DESKTOP \_ вритеобжектс  
\_требуются стандартные права \_  
</dl>

 

 