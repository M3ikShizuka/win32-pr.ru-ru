---
description: Используйте предложение WITHIN в запросах событий, чтобы указать интервал опроса или интервал группировки.
ms.assetid: e2fc7627-fb3d-4966-b38b-441333868ae3
ms.tgt_platform: multiple
title: ВНУТРИ предложения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 73d863e2e71d52fe60aeed7697feeb1231164c05
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104155998"
---
# <a name="within-clause"></a>ВНУТРИ предложения

Потребители событий используют предложение in в запросах событий для указания *интервала опроса* или *интервала группировки*.

Интервал опроса — это интервал, который инструментарий управления Windows (WMI) (WMI) использует для опроса поставщика данных, ответственного за класс для [внутренних событий](determining-the-type-of-event-to-receive.md), для которых запрашиваемое событие является элементом. Этот интервал представляет собой максимальный интервал времени, которое может пройти до доставки уведомления о событии. Потребитель использует интервал опроса в предложении WITHIN, когда потребитель требует уведомления об изменениях в классе, а поставщик событий недоступен. Потребитель регистрируется для внутреннего события и включает интервал опроса.

Чтобы задать интервал опроса, поместите предложение WITHIN непосредственно перед предложением WHERE, как показано ниже:


```sql
SELECT * FROM IntrinsicEventClass WITHIN interval  WHERE property = value
```



Интринсицевенткласс — это встроенный класс событий, членом которого является событие, Interval — интервал опроса, а value — это значение для свойства, для которого потребителю требуется уведомление.

Интервал опроса — это число с плавающей запятой, которое может быть дробным, чтобы принимать значения меньше 1 секунды. Однако интервал должен представлять собой количество секунд, а не очень маленькое значение, такое как 0,001, поскольку указание слишком маленького значения может привести к тому, что инструментарий WMI отклонит недопустимый оператор из-за интенсивного опроса ресурсов. Поскольку большинство потребителей событий не требует немедленного уведомления, рекомендуется использовать интервал, превышающий 5 минут.

В следующем примере запроса выполняется проверка WMI каждые 10 секунд для изменений, происходящих в экземплярах класса [**\_ LogicalDisk Win32**](/windows/desktop/CIMWin32Prov/win32-logicaldisk) . Если экземпляр класса изменяется в пределах указанного интервала опроса, для каждого изменения отправляется событие уведомления.


```sql
SELECT * FROM __InstanceModificationEvent WITHIN 10  WHERE TargetInstance ISA "Win32_LogicalDisk"
```



В зависимости от запроса поставщик событий и WMI могут совместно использовать задачу предоставления событий. Например, поставщик событий, который поддерживает события системных классов [**\_ \_ инстанцекреатионевент**](--instancecreationevent.md) и [**\_ \_ инстанцемодификатионевент**](--instancemodificationevent.md) , а не события класса System [**\_ \_ инстанцеделетионевент**](--instancedeletionevent.md) . Следующий запрос позволяет поставщику событий создавать события создания и изменения по мере их возникновения и доставлять их при создании. Запрос также позволяет инструментарию WMI создавать события **\_ \_ инстанцеделетионевент** каждые 10 (десять) секунд с помощью механизма опроса.


```sql
SELECT * FROM __InstanceOperationEvent WITHIN 10  WHERE TargetInstance ISA "MyOwnClass"
```



Можно также использовать предложение in для указания интервала группировки. Интервал группирования — это 32-разрядное целое число без знака, указывающее период времени после получения начального события, в течение которого WMI должен собираются аналогичные события. По истечении этого периода WMI предоставляет статистическое событие, состоящие из всех аналогичных событий. Дополнительные сведения см. в разделе [предложение Group](group-clause.md).

Потребители событий, регистрируемые для часто встречающихся событий, используют интервал группировки с предложением WITHIN. Добавление группы в предложение WHERE в запросе события приводит к отправке WMI одного агрегатного события вместо многих событий. Статистическое событие представлено системным классом [**\_ \_ аггрегативент**](--aggregateevent.md) .

Чтобы задать интервал группировки, поместите предложение WITHIN сразу после предложения GROUP.


```sql
SELECT * FROM EventClass WHERE property = value GROUP WITHIN Interval
```



EventClass — это класс событий, членом которого является событие, value — это значение свойства, для которого потребитель требует уведомления, а Interval — интервал группирования.

Дополнительные сведения см. [в разделе Определение типа получаемого события](determining-the-type-of-event-to-receive.md).

Постоянные потребители событий можно создавать с помощью опросных запросов только в том случае, если у вас есть права администратора.

 

 
