---
description: 'Перед регистрацией для получения события необходимо определить типы получаемых событий: внутренний или внешний.'
ms.assetid: 46cdfcfa-42c6-4169-bc4d-725867224889
ms.tgt_platform: multiple
title: Определение типа получаемого события
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9172e3246a31cb42ada3b9f5099bc3b0575959c125dedd44d7c6ed745134a4a6
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119374654"
---
# <a name="determining-the-type-of-event-to-receive"></a>Определение типа получаемого события

Перед регистрацией для получения события необходимо определить типы получаемых событий: [внутренний](#intrinsic-events) или [внешний](#extrinsic-events). Дополнительные сведения о получении событий см. в разделе [Получение WMI-события](receiving-a-wmi-event.md). Дополнительные сведения о предоставлении событий см. в разделе [Разработка поставщика WMI](developing-a-wmi-provider.md) и [запись поставщика событий](writing-an-event-provider.md). Дополнительные сведения о проблемах безопасности, связанных с получением и предоставлением событий, см. в разделе [Защита событий WMI.](securing-wmi-events.md)

## <a name="intrinsic-events"></a>Внутренние события

Внутреннее событие — это событие, возникающее в ответ на изменение стандартной модели данных WMI. Каждый класс встроенного события представляет конкретный тип изменения и возникает, когда WMI или поставщик создает, удаляет или изменяет пространство имен, класс или экземпляр класса. Например, создание экземпляра [**Win32 \_ LogicalDisk**](/windows/desktop/CIMWin32Prov/win32-logicaldisk) приведет к созданию экземпляра [**\_ \_ инстанцекреатионевент**](--instancecreationevent.md) .

Инструментарий WMI создает внутренние события для объектов, хранящихся в репозитории WMI. Поставщик создает внутренние события для динамических классов, но WMI может создать экземпляр для динамического класса, если поставщик недоступен. Инструментарий WMI использует опрос для обнаружения изменений. В следующей таблице перечислены системные классы, которые Инструментарий WMI использует для передачи отчетов о внутренних событиях.



| Системный класс                                                           | Описание                                                                                                                                                                                             |
|------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**\_\_класскреатионевент**](--classcreationevent.md)                 | Уведомляет потребителя о создании класса.                                                                                                                                                            |
| [**\_\_классделетионевент**](--classdeletionevent.md)                 | Уведомляет потребителя об удалении класса.                                                                                                                                                            |
| [**\_\_классмодификатионевент**](--classmodificationevent.md)         | Уведомляет потребителя об изменении класса.                                                                                                                                                           |
| [**\_\_инстанцекреатионевент**](--instancecreationevent.md)           | Уведомляет потребителя о создании экземпляра класса.                                                                                                                                                   |
| [**\_\_инстанцеоператионевент**](--instanceoperationevent.md)         | Уведомляет потребитель, когда происходит какое-либо событие экземпляра, например создание, удаление или изменение экземпляра. Этот класс можно использовать в запросах для получения всех событий типов, связанных с экземпляром. |
| [**\_\_инстанцеделетионевент**](--instancedeletionevent.md)           | Уведомляет потребителя об удалении экземпляра.                                                                                                                                                        |
| [**\_\_инстанцемодификатионевент**](--instancemodificationevent.md)   | Уведомляет потребителя об изменении экземпляра.                                                                                                                                                       |
| [**\_\_намеспацекреатионевент**](--namespacecreationevent.md)         | Уведомляет потребителя о создании пространства имен.                                                                                                                                                        |
| [**\_\_намеспацеделетионевент**](--namespacedeletionevent.md)         | Уведомляет потребителя об удалении пространства имен.                                                                                                                                                        |
| [**\_\_намеспацемодификатионевент**](--namespacemodificationevent.md) | Уведомляет потребителя об изменении пространства имен.                                                                                                                                                       |
| [**\_\_консумерфаилуривент**](--consumerfailureevent.md)             | Уведомляет потребителя, когда какое-либо другое событие отбрасывается в связи с ошибкой в части потребителя события.                                                                                                 |
| [**\_\_евентдроппедевент**](--eventdroppedevent.md)                   | Уведомляет потребителя о том, что при отправке какого-либо другого события вместо доставки запрашивающему потребителю события происходит отброшение.                                                                                       |
| [**\_\_евенткуеуеоверфловевент**](--eventqueueoverflowevent.md)       | Уведомляет потребителя о том, что событие удаляется в результате переполнения очереди доставки.                                                                                                                  |
| [**\_\_месодинвокатионевент**](--methodinvocationevent.md)           | Уведомляет потребителя о возникновении события вызова метода.                                                                                                                                                    |



 

## <a name="extrinsic-events"></a>Внешние события

Внешнее событие — это предопределенное вхождение, которое невозможно напрямую связать с изменениями в модели данных WMI. Таким образом, Инструментарий WMI позволяет поставщику событий определить класс событий, описывающий событие. Например, событие, описывающее переключение компьютера в режим «в режиме ожидания», — это внешнее событие. Поставщик наследует внешнее событие из системного класса [**\_ \_ екстринсицевент**](--extrinsicevent.md) , который является подклассом класса системы [**\_ \_ событий**](--event.md) . [Системный реестр](/previous-versions/windows/desktop/regprov/system-registry-provider) и поставщики [SNMP](snmp-provider.md) определяют классы внешних событий, такие как **регистрикэйчанжеевент**, которые уведомляют потребителя при изменении раздела реестра. Дополнительные сведения см. в разделах [Регистрация для событий системного реестра](registering-for-system-registry-events.md) и [запись поставщика событий](writing-an-event-provider.md).

В следующем примере поставщик событий сообщает о нарушениях безопасности в одном или нескольких зданиях. Следующий класс может быть определен для внешних событий, представляющих нарушение безопасности.

``` syntax
class SecurityViolationEvent : __ExtrinsicEvent
{
   string Building;           // building where violation occurred
   sint32 EntranceNumber;     // entrance where violation occurred
   datetime TimeOfDetection;  // date and time of violation
}
```

Чтобы получать уведомления о нарушениях безопасности, потребитель регистрируется для типа события Секуритивиолатионевент. Если не указано иное, потребитель получает уведомление обо всех нарушениях безопасности в течение всех периодов времени и во всех зданиях. Класс событий также содержит сведения, которые потребители могут использовать для запроса более конкретных событий.

В следующем примере запрос регистрирует потребитель для событий нарушения безопасности при сборке только 24.

`SELECT * FROM SecurityViolationEvent WHERE Building = 24;`

 

 
