---
description: Инструментарий WMI использует стандартный дескриптор безопасности Windows для управления доступом к пространствам имен WMI.
ms.assetid: 5cf9886c-04fa-480e-889f-b64a6a70d053
ms.tgt_platform: multiple
title: Доступ к пространствам имен WMI
ms.topic: article
ms.date: 05/31/2018
topic_type:
- kbArticle
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: 6eaebe5370e97dcb42ddcf79018015ceff9147f8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103999381"
---
# <a name="access-to-wmi-namespaces"></a>Доступ к пространствам имен WMI

Инструментарий WMI использует стандартный *дескриптор безопасности* Windows для управления доступом к пространствам имен WMI. При подключении к WMI с помощью моникера WMI "винмгмтс" или вызова [**ивбемлокатор:: коннектсервер**](/windows/desktop/api/Wbemcli/nf-wbemcli-iwbemlocator-connectserver) или [**SWbemLocator. коннектсервер**](swbemlocator-connectserver.md)вы подключаетесь к определенному пространству имен.

В этом разделе рассматриваются следующие сведения:

-   [Безопасность пространства имен WMI](#wmi-namespace-security)
-   [Аудит пространства имен WMI](#wmi-namespace-auditing)
-   [Типы событий пространства имен](#types-of-namespace-events)
-   [Параметры доступа к пространству имен](#namespace-access-settings)
-   [Разрешения по умолчанию для пространств имен WMI](#default-permissions-on-wmi-namespaces)
-   [См. также](#related-topics)

## <a name="wmi-namespace-security"></a>Безопасность пространства имен WMI

WMI обеспечивает безопасность пространства имен, сравнивая [*маркер доступа*](/windows/desktop/SecGloss/a-gly) пользователя, подключающегося к пространству имен, с [*дескриптором безопасности*](/windows/desktop/SecGloss/s-gly) пространства имен. Дополнительные сведения о безопасности Windows см. [в разделе доступ к защищаемым ОБЪЕКТАМ WMI](access-to-wmi-securable-objects.md).

Имейте в виду, что начиная с Windows Vista [Управление учетными записями пользователей (UAC)](https://www.microsoft.com/technet/windowsvista/security/uac.mspx) влияет на доступ к данным WMI и что может быть настроено с помощью [*элемента управления WMI*](gloss-w.md). Дополнительные сведения см. [в разделе разрешения по умолчанию для пространств имен WMI](#default-permissions-on-wmi-namespaces) и [Управление учетными записями пользователей и WMI](user-account-control-and-wmi.md).

Доступ к пространствам имен WMI также влияет на подключение к удаленному компьютеру. Дополнительные сведения см. в статьях [Подключение к WMI на удаленном компьютере](connecting-to-wmi-on-a-remote-computer.md), [Защита удаленного WMI-подключения](securing-a-remote-wmi-connection.md)и [подключение через брандмауэр Windows](/windows/desktop/WmiSdk/connecting-to-wmi-remotely-starting-with-vista).

Чтобы определить, должен ли клиентский скрипт или приложение принимать данные, поставщики должны использовать параметр олицетворения. Дополнительные сведения о скриптах и клиентских приложениях см. в разделе [Установка параметров безопасности процессов для клиентских приложений](setting-client-application-process-security.md). Дополнительные сведения об олицетворении [*поставщика*](gloss-p.md) см. в разделе [Разработка поставщика WMI](developing-a-wmi-provider.md).

## <a name="wmi-namespace-auditing"></a>Аудит пространства имен WMI

Инструментарий WMI использует [*системные списки управления доступом (SACL)*](/windows/desktop/SecGloss/s-gly) пространства имен для аудита действий пространства имен. Чтобы включить аудит пространств имен WMI, используйте вкладку **Безопасность** в [*элементе управления WMI*](gloss-w.md) , чтобы изменить параметры аудита для пространства имен.

Аудит не включен во время установки операционной системы. Чтобы включить аудит, перейдите на вкладку **Аудит** в окне Стандартная **Безопасность** . Затем можно добавить запись аудита.

Групповая политика для локального компьютера должно быть настроено для разрешения аудита. Аудит можно включить, запустив оснастку MMC gpedit. msc и настроив **доступ к объектам аудита** в разделе **Конфигурация компьютера** Настройка  >  **Windows параметры**  >  **безопасности**  >  **Локальные политики**  >  **аудит политика**.

Запись аудита изменяет список SACL пространства имен. При добавлении записи аудита это может быть пользователь, группа, компьютер или встроенный субъект безопасности. После добавления записи можно задать операции доступа, которые приводят к событиям журнала безопасности. Например, для пользователей, прошедших проверку подлинности группы, можно нажать кнопку выполнить методы. Этот параметр приводит к возникновению событий журнала безопасности каждый раз, когда член группы «Пользователи, прошедшие проверку подлинности» выполняет метод в этом пространстве имен. Идентификатор события для событий WMI — 4662.

Чтобы изменить параметры аудита, ваша учетная запись должна быть в группе администраторов и запущена с повышенными привилегиями. Встроенная учетная запись администратора также может изменить безопасность или аудит пространства имен. Дополнительные сведения о работе в режиме с повышенными правами см. в разделе [Управление учетными записями пользователей и инструментарий WMI](user-account-control-and-wmi.md).

Аудит WMI создает события успешных или неудачных попыток доступа к пространствам имен WMI. Служба не выполняет аудит успешных или неудачных операций поставщика. Например, при подключении сценария к WMI и пространству имен может произойти сбой, так как учетная запись, под которой выполняется сценарий, не имеет доступа к этому пространству имен или может пытаться выполнить операцию, например изменение списка DACL, которое не предоставлено.

Если вы используете учетную запись в группе "Администраторы", то можете просмотреть события аудита пространства имен в **Просмотр событий** пользовательском интерфейсе.

## <a name="types-of-namespace-events"></a>Типы событий пространства имен

Инструментарий WMI отслеживает в журнале событий безопасности следующие типы событий:

-   Аудит выполнен успешно

    Операция должна успешно завершить два шага для успешного выполнения аудита. Во первых, WMI предоставляет доступ к клиентскому приложению или скрипту на основе идентификатора безопасности клиента и DACL пространства имен. Во вторых, запрошенная операция соответствует правам доступа в списке SACL пространства имен для этого пользователя или группы.

-   Сбой аудита

    Инструментарий WMI запрещает доступ к пространству имен, но запрошенная операция соответствует правам доступа в списке SACL пространства имен для этого пользователя или группы.

## <a name="namespace-access-settings"></a>Параметры доступа к пространству имен

Вы можете просмотреть права доступа к пространству имен для различных учетных записей в элементе управления WMI. Эти константы описаны в статье [**константы прав доступа к пространству имен**](namespace-access-rights-constants.md). Доступ к пространству имен WMI можно изменить с помощью элемента управления WMI или программно. Дополнительные сведения см. [в разделе Изменение параметров безопасности доступа к защищаемым объектам](changing-access-security-on-securable-objects.md).

WMI выполняет аудит изменений во всех разрешениях на доступ, перечисленных в следующем списке, за исключением разрешения на удаленную включение. Изменения регистрируются при успешном аудите или сбое, соответствующем разрешению на изменение безопасности.

<dl> <dt>

<span id="Execute_Methods"></span><span id="execute_methods"></span><span id="EXECUTE_METHODS"></span>Выполнение методов
</dt> <dd>

Разрешает пользователю выполнять методы, определенные в классах WMI. Соответствует константе разрешения на **\_ \_ выполнение метода WBEM** .

</dd> <dt>

<span id="Full_Write"></span><span id="full_write"></span><span id="FULL_WRITE"></span>Полная запись
</dt> <dd>

Разрешает полный доступ для чтения, записи и удаления к классам и экземплярам классов WMI, как статическим, так и динамическим. Соответствует константе разрешения на доступ **\_ \_ \_ представителя полной записи** .

</dd> <dt>

<span id="Partial_Write"></span><span id="partial_write"></span><span id="PARTIAL_WRITE"></span>Частичная запись
</dt> <dd>

Разрешает доступ на запись к статическим экземплярам классов WMI. Соответствует константе разрешения на доступ для **\_ частичной \_ записи \_ для WBEM** .

</dd> <dt>

<span id="Provider_Write"></span><span id="provider_write"></span><span id="PROVIDER_WRITE"></span>Запись поставщика
</dt> <dd>

Разрешает доступ на запись к динамическим экземплярам классов WMI. Соответствует константе разрешения доступа к **\_ \_ поставщику записи WBEM** .

</dd> <dt>

<span id="Enable_Account"></span><span id="enable_account"></span><span id="ENABLE_ACCOUNT"></span>Включить учетную запись
</dt> <dd>

Разрешает доступ на чтение к экземплярам класса WMI. Соответствует константе **WBEM \_** для разрешения доступа.

</dd> <dt>

<span id="Remote_Enable"></span><span id="remote_enable"></span><span id="REMOTE_ENABLE"></span>Включить удаленно
</dt> <dd>

Разрешает доступ к пространству имен с удаленных компьютеров. Соответствует константе разрешения на доступ для **\_ удаленного \_ доступа WBEM** .

</dd> <dt>

<span id="Read_Security"></span><span id="read_security"></span><span id="READ_SECURITY"></span>Чтение безопасности
</dt> <dd>

Разрешает доступ только для чтения к параметрам DACL. Соответствует константе разрешения на **\_ Управление** доступом на чтение.

</dd> <dt>

<span id="Edit_Security"></span><span id="edit_security"></span><span id="EDIT_SECURITY"></span>Изменить безопасность
</dt> <dd>

Разрешает доступ на запись к параметрам DACL. Соответствует константе разрешения на доступ для **записи \_ DAC** .

</dd> </dl>

## <a name="default-permissions-on-wmi-namespaces"></a>Разрешения по умолчанию для пространств имен WMI

Группы безопасности по умолчанию:

-   Прошедшие проверку пользователи
-   LOCAL SERVICE
-   СЕТЕВАЯ СЛУЖБА
-   Администраторы (на локальном компьютере)

Разрешения на доступ по умолчанию для пользователей, прошедших проверку подлинности, ЛОКАЛЬную службу и СЕТЕВую службу:

-   Выполнение методов
-   Полная запись
-   Включить учетную запись

Учетные записи в группе "Администраторы" имеют все доступные права, включая изменение дескрипторов безопасности. Однако из-за контроля учетных записей (UAC) элемент управления WMI или скрипт должен работать с повышенной безопасностью. Дополнительные сведения см. в разделе [Управление учетными записями пользователей и инструментарий WMI](user-account-control-and-wmi.md).

Иногда скрипт или приложение должны включать права администратора, например **SeSecurityPrivilege**, для выполнения операции. Например, сценарий может выполнить метод [**жетсекуритидескриптор**](/windows/desktop/CIMWin32Prov/getsecuritydescriptor-method-in-class-win32-printer) класса [**\_ принтера Win32**](/windows/desktop/CIMWin32Prov/win32-printer) без **SeSecurityPrivilege** и получить сведения о безопасности в [*списке управления доступом на уровне пользователей (DACL)*](/windows/desktop/SecGloss/d-gly) [*дескриптора безопасности*](/windows/desktop/SecGloss/s-gly)объекта принтера. Однако сведения о SACL не возвращаются в скрипт, если только привилегии **SeSecurityPrivilege** недоступны и не включены для учетной записи. Если у учетной записи нет доступных привилегий, ее нельзя включить. Дополнительные сведения см. в разделе [выполнение привилегированных операций](executing-privileged-operations.md).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Сведения об инструментарии WMI](about-wmi.md)
</dt> </dl>

 

 
