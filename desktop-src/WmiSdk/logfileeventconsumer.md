---
description: Класс Логфиливентконсумер записывает настраиваемые строки в текстовый файл журнала при доставке событий в него.
ms.assetid: 8934b60e-3763-4b85-89fd-58fe6136dff6
ms.tgt_platform: multiple
title: Класс Логфиливентконсумер
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- LogFileEventConsumer
- LogFileEventConsumer.CreatorSID
- LogFileEventConsumer.MachineName
- LogFileEventConsumer.MaximumQueueSize
- LogFileEventConsumer.Filename
- LogFileEventConsumer.IsUnicode
- LogFileEventConsumer.MaximumFileSize
- LogFileEventConsumer.Name
- LogFileEventConsumer.Text
api_type:
- DllExport
api_location:
- Wbemcons.dll
ms.openlocfilehash: dbcf0f90a8bca0cf1f648f74d1b58d7037b79fa8bc9d2d13c4fe2c6dc8306eba
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119996524"
---
# <a name="logfileeventconsumer-class"></a>Класс Логфиливентконсумер

Класс **логфиливентконсумер** записывает настраиваемые строки в текстовый файл журнала при доставке событий в него. Строки разделяются символами конца строки. Этот класс является одним из стандартных потребителей событий, предоставляемых инструментарием WMI. Дополнительные сведения см. [в разделе Мониторинг и реагирование на события с помощью стандартных потребителей](monitoring-and-responding-to-events-with-standard-consumers.md).

## <a name="syntax"></a>Синтаксис

``` syntax
[AMENDMENT]
class LogFileEventConsumer : __EventConsumer
{
  uint8   CreatorSID[];
  string  MachineName;
  uint32  MaximumQueueSize;
  string  Filename;
  boolean IsUnicode;
  uint64  MaximumFileSize = 65535;
  string  Name;
  string  Text;
};
```

## <a name="members"></a>Члены

Класс **логфиливентконсумер** имеет следующие типы членов:

-   [Свойства](#properties)

### <a name="properties"></a>Элемент Property

Класс **логфиливентконсумер** имеет следующие свойства.

<dl> <dt>

**креаторсид**
</dt> <dd> <dl> <dt>

Тип данных: массив **Uint8**
</dt> <dt>

Тип доступа: только для чтения
</dt> </dl>

Идентификатор безопасности (SID), однозначно определяющий пользователя, который создает фильтр. WMI хранит идентификатор безопасности пользователя, создающего экземпляр [**\_ \_ евентконсумер**](--eventconsumer.md) , или идентификатор безопасности администратора в зависимости от операционной системы. Дополнительные сведения см. в статьях [Привязка фильтра событий к логическому потребителю](binding-an-event-filter-with-a-logical-consumer.md) и [мониторинг и реагирование на события с помощью стандартных потребителей](monitoring-and-responding-to-events-with-standard-consumers.md).

Это свойство наследуется от [**\_ \_ евентконсумер**](--eventconsumer.md).

</dd> <dt>

**Имя файла**
</dt> <dd> <dl> <dt>

Тип данных: **строка**
</dt> <dt>

Тип доступа: только для чтения
</dt> </dl>

Имя файла, содержащего путь к которому добавляются записи журнала. Если файл не существует, **логфиливентконсумер** попытается создать его. Потребитель завершается ошибкой, если путь не существует, или когда пользователь, создавший потребитель, не имеет разрешений на запись для файла или пути.

</dd> <dt>

**Прев Юникоде**
</dt> <dd> <dl> <dt>

Тип данных: **логический**
</dt> <dt>

Тип доступа: только для чтения
</dt> </dl>

**Значение true**, если файл журнала является текстовым файлом в Юникоде. Если **значение равно false**, то файл журнала является текстовым файлом многобайтового кода. Если файл существует, это свойство игнорируется и используется текущий параметр файла. Например **, если в параметре** IsFalse задано **значение false**, но существующий файл является файлом Юникода, то используется Юникод. Если  **значение IsTrue равно true**, а файл — многобайтовый код, то используется многобайтовый код.

</dd> <dt>

**MachineName**
</dt> <dd> <dl> <dt>

Тип данных: **строка**
</dt> <dt>

Тип доступа: только для чтения
</dt> </dl>

имя компьютера, на который инструментарий управления Windows (WMI) (WMI) отправляет события.

Это свойство наследуется от [**\_ \_ евентконсумер**](--eventconsumer.md).

</dd> <dt>

**максимумфилесизе**
</dt> <dd> <dl> <dt>

Тип данных: **UInt64**
</dt> <dt>

Тип доступа: только для чтения
</dt> </dl>

Максимальный размер файла журнала в байтах. Если размер первичного файла превышает максимальный, содержимое перемещается в другой файл, а первичный файл очищается. Значение 0 (ноль) означает отсутствие ограничения на размер. Значение по умолчанию — 65 535 байт. Размер файла проверяется перед операцией записи. Поэтому у вас может быть файл, размер которого немного больше заданного предела. Следующая операция записи перехватывает ее и запускает новый файл.

В следующем списке указывается структура именования для файла резервной копии.

-   Если исходное имя файла — 8,3, расширение заменяется строкой в формате "001", "002" и т. д. с наименьшим числом, превышающим все ранее использованные и выбранные числа. Если используется значение "999", то выбранное число является наименьшим неиспользуемым числом.
-   Если исходное имя файла не 8,3, то строка в формате "001", "002" и т. д. добавляется к имени файла.

Дополнительные сведения об использовании значений **UInt64** в скриптах см. [в разделе Создание сценариев в WMI](/windows/desktop/WmiSdk/creating-a-wmi-script).

</dd> <dt>

**максимумкуеуесизе**
</dt> <dd> <dl> <dt>

Тип данных: **UInt32**
</dt> <dt>

Тип доступа: только для чтения
</dt> </dl>

Максимальная очередь для конкретного потребителя в байтах.

Это свойство наследуется от [**\_ \_ евентконсумер**](--eventconsumer.md).

</dd> <dt>

**Имя**
</dt> <dd> <dl> <dt>

Тип данных: **строка**
</dt> <dt>

Тип доступа: только для чтения
</dt> <dt>

Квалификаторы: [ **ключ**](key-qualifier.md)
</dt> </dl>

Уникальное имя для этого потребителя.

</dd> <dt>

**Text**
</dt> <dd> <dl> <dt>

Тип данных: **строка**
</dt> <dt>

Тип доступа: только для чтения
</dt> </dl>

Стандартный строковый [шаблон](using-standard-string-templates.md) для текста записи журнала.

</dd> </dl>

## <a name="remarks"></a>Remarks

> [!Note]  
> **Логфиливентконсумер** не защищает файл журнала. Поэтому при настройке **логфиливентконсумер** важно указать каталог, защищенный с учетом требуемого уровня.

 

Класс **логфиливентконсумер** является производным от абстрактного класса [**\_ \_ евентконсумер**](--eventconsumer.md) .

## <a name="examples"></a>Примеры

Пример использования **логфиливентконсумер** для создания потребителя см. в разделе [запись в файл журнала на основе события](writing-to-a-log-file-based-on-an-event.md).

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-----------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows Vista<br/>                                                                |
| Минимальная версия сервера<br/> | Windows Server 2008<br/>                                                          |
| Пространство имен<br/>                | Корневая \\ Подписка<br/>                                                           |
| MOF<br/>                      | <dl> <dt>Вбемконс. mof</dt> </dl> |
| DLL<br/>                      | <dl> <dt>Wbemcons.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Классы стандартных потребителей](standard-consumer-classes.md)
</dt> <dt>

[Запись в файл журнала на основе события](writing-to-a-log-file-based-on-an-event.md)
</dt> <dt>

[Создание логического потребителя](creating-a-logical-consumer.md)
</dt> <dt>

[Получение событий в любое время](receiving-events-at-all-times.md)
</dt> <dt>

[**\_\_евентконсумер**](--eventconsumer.md)
</dt> </dl>

 

