---
description: Файлы журналов WMI больше не поддерживаются.
ms.assetid: 4ba80063-7aa6-42df-a620-1b366b795034
ms.tgt_platform: multiple
title: Ведение журнала действий WMI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6ced8645eb7ad9005e6ba751d011ae7f0ccb3dd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105693273"
---
# <a name="logging-wmi-activity"></a>Ведение журнала действий WMI

Файлы журналов WMI больше не поддерживаются. Начиная с Windows Vista, Инструментарий WMI использует средство [трассировки событий для Windows (ETW](/windows/desktop/ETW/event-tracing-portal)) и события, доступные через пользовательский интерфейс **Просмотр событий** или программу командной строки wevtutil. Дополнительные сведения см. в разделе Поставщик ETW и документация по командной строке [вевутил](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc732848(v=ws.11)) .

В этом разделе обсуждаются следующие разделы:

-   [Файлы журналов WMI до Windows Vista](#wmi-log-files-before-windows-vista)
-   [Действия записи в журнал для компонентов WMI Core до Windows Vista](#logging-activities-for-wmi-core-components-before-windows-vista)
-   [Действия ведения журнала для компонентов поставщика WMI до Windows Vista](#logging-activities-for-wmi-provider-components-before-windows-vista)
-   [См. также](#related-topics)

## <a name="wmi-log-files-before-windows-vista"></a>Файлы журналов WMI до Windows Vista

Файлы журналов, созданные WMI и различными поставщиками, регистрируются в записях: события, трассировка или диагностические данные, ошибки и различные действия. Только администраторы имеют доступ на чтение к папке журнала WMI, найденной в журналах% WINDIR% \\ system32 \\ WBEM \\ .

В файлы журнала записываются только компоненты ядра WMI или поставщики WMI. Данные в этих журналах можно читать и просматривать только в целях диагностики. Вы можете создавать и хранить собственные файлы журнала в каталоге журнала WMI.

## <a name="logging-activities-for-wmi-core-components-before-windows-vista"></a>Действия записи в журнал для компонентов WMI Core до Windows Vista

Эти файлы не содержат единообразный формат, подходящий для программного чтения. Дополнительные сведения о конкретных журналах см. в разделе [файлы журналов WMI](wmi-log-files.md).

Действия по ведению журнала для компонентов WMI Core возникают при установке следующих разделов реестра:

-   Уровень ведения журнала

    Изменения в значении реестра уровня ведения журнала вступают в силу немедленно. Перезапуск службы WMI не требуется.

    **HKey \_ \_** \\ **Программное обеспечение** локального компьютера, \\  \\  \\  \\ **ведение журнала** Microsoft WBEM CIMOM = 2

    В следующем списке перечислены уровни ведения журнала, которые могут быть определены в реестре.

    

    | Уровень ведения журнала | Описание               |
    |---------------|---------------------------|
    | 0             | Без ведения журнала                |
    | 1             | Записывать только ошибки           |
    | 2             | Подробное ведение журнала (по умолчанию) |

    

     

-   Расположение файла журнала

    Чтобы изменения в расположении файла журнала вступили в силу, перезапустите службу WMI.

    **HKey \_ По локального \_ компьютера** \\ **программное обеспечение** \\ **Microsoft** \\ **WBEM** \\ **CIMOM** \\ **Каталог журнала** =% WINDIR% \\ system32 \\ WBEM \\ журналы

-   Максимальный размер файла журнала, в байтах

    **HKey \_ \_** \\ **Программное обеспечение** локального компьютера. \\  \\ файл журнала Microsoft **WBEM** \\ **CIMOM** \\ **максимальный размер** = 65536

Эти значения разделов реестра можно изменить с помощью редактора реестра или оснастки WMI для консоли управления (MMC).

**Установка уровня ведения журнала для инструментария WMI до Windows Vista**

1.  Нажмите кнопку **Пуск**, затем щелкните **Выполнить**.
2.  Введите **wmimgmt. msc**
3.  В меню **Действие** выберите пункт **Свойства**.
4.  На вкладке **ведение журнала** задайте для параметра уровень ведения журнала значение **отключено**, **включено** или **подробный**.
5.  В поле **Расположение:** введите путь к папке файла журнала и **максимальный размер (в байтах):**, установите максимальный размер файла журнала (в байтах).

Дополнительные сведения о настройке свойств файла журнала см. в интерактивной справке для управляющего приложения WMI.

## <a name="logging-activities-for-wmi-provider-components-before-windows-vista"></a>Действия ведения журнала для компонентов поставщика WMI до Windows Vista

Если включено ведение журнала для компонентов ядра WMI, ведение журнала также включено для любого поставщика с возможностями ведения журнала.

В следующем списке перечислены необходимые значения.

<dl> <dt>

<span id="File"></span><span id="file"></span><span id="FILE"></span>**File**
</dt> <dd>

Полный путь и имя файла журнала. По умолчанию используется значение% WINDIR% \\ system32 \\ WBEM \\ logs. Для использования этого именованного значения **тип** с именем value должен быть установлен в значение = File.

</dd> <dt>

<span id="Level"></span><span id="level"></span><span id="LEVEL"></span>**Уровню**
</dt> <dd>

32-разрядная логическая маска, определяющая тип выходных данных отладки, создаваемых поставщиком. Это значение зависит от поставщика. Значение по умолчанию — 0 (нуль).

</dd> <dt>

<span id="MaxFileSize"></span><span id="maxfilesize"></span><span id="MAXFILESIZE"></span>**MaxFileSize**
</dt> <dd>

Максимальный размер файла журнала в байтах. Это целое значение должно находиться в диапазоне от 1024 до 2 ^ 32-1. Если размер файла превышает это значение, файл переименовывается в **~ filename** и создается новый пустой файл журнала. Место на диске, необходимое для файла журнала, вдвое больше значения **MaxFileSize**. Значение по умолчанию — 65 535.

</dd> <dt>

<span id="Type"></span><span id="type"></span><span id="TYPE"></span>**Тип**
</dt> <dd>

Можно задать значение = File или = Debugger. Если задано значение = File, данные трассировки записываются в файл журнала, указанный в **файле** с именем value. Значение по умолчанию — = File.

</dd> </dl>

Например, чтобы вести журнал запросов и получать вызовы экземпляров от поставщика представления, используйте следующие значения раздела реестра. Журнал будет находиться в папке Log и будет иметь размер файла по умолчанию.

**HKey \_ \_** \\ **Программное обеспечение** локального компьютера \\ **поставщики Microsoft** \\ **WBEM** \\  \\ **ведение журнала** \\ **виевпровидер** \\ **файл** = C: \\ Windows \\ system32 \\ WBEM \\ журналы \\ виевпровидер. log

**HKey \_ \_** \\ **Программное обеспечение** локального компьютера \\ **поставщики Microsoft** \\ **WBEM** \\  \\ **ведение журнала** \\ **виевпровидер** \\ **уровень** = 2

**HKey \_ \_** \\ **Программное обеспечение** локального компьютера \\ **поставщики Microsoft** \\ **WBEM** \\  \\ **ведение журнала** \\ **виевпровидер** \\ **MaxFileSize** = 65535

**HKey \_ \_** \\ **Программное обеспечение** локального компьютера \\ **поставщики Microsoft** \\ **WBEM** \\  \\ **ведение журнала** \\ **виевпровидер** \\ **тип** = файл

> [!Note]  
> Для собственных поставщиков с возможностями ведения журнала необходимо записать необходимые разделы и значения реестра, чтобы включить ведение журнала.

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Устранение неполадок WMI](wmi-troubleshooting.md).
</dt> <dt>

[Файлы журналов WMI](wmi-log-files.md)
</dt> <dt>

[Классы устранения неполадок WMI](wmi-troubleshooting-classes.md)
</dt> <dt>

[Трассировка действий WMI](tracing-wmi-activity.md)
</dt> </dl>

 

 
