---
description: Поставщик WDM (WDM) предоставляет доступ к классам, экземплярам, методам и событиям драйверов оборудования, которые соответствуют модели WDM.
ms.assetid: 8686a613-0e53-4e6e-b193-7839abfb70de
ms.tgt_platform: multiple
title: Доступ к данным из драйверов устройств
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 72a59b59116ca0f71178fb2faed290d6bc76c9d6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105703317"
---
# <a name="accessing-data-from-device-drivers"></a>Доступ к данным из драйверов устройств

Поставщик WDM (WDM) предоставляет доступ к классам, экземплярам, методам и событиям драйверов оборудования, которые соответствуют модели WDM. Классы для драйверов оборудования находятся в \\ \\ корневом \\ пространстве имен WMI.

Поставщик WDM представляет интерес для тех, кто записывает драйверы устройств и администраторам, заинтересованным в данных драйвера устройства.

В этом разделе обсуждаются следующие разделы:

-   [Сведения для модулей записи драйверов устройств](#information-for-device-driver-writers)
-   [Сведения для администраторов и пользователей данных драйвера](#information-for-administrators-and-users-of-driver-data)
-   [См. также](#related-topics)

## <a name="information-for-device-driver-writers"></a>Сведения для модулей записи драйверов устройств

Классы WMI, связанные с конкретным драйвером устройства, создаются, когда поставщик WDM извлекает двоичный MOF-файл из исполняемого файла драйвера устройства. Это происходит при каждом запуске WMI, установке нового драйвера устройства или удалении экземпляра [вмибинаримофресаурце](/windows/desktop/WmiCoreProv/wmibinarymofresource) для конкретного драйвера. Путем проверки Вмипров. log можно определить, произошла ли ошибка, приводящая к сбою, при извлечении двоичного MOF-файла. Сведения об ошибках [mofcomp](mofcomp.md) приведены в сообщении MOFCOMP. log. Дополнительные сведения см. в разделе [файлы журналов WMI](wmi-log-files.md). Из соображений производительности Поставщик WDM не создает события при создании или удалении классов из-за запуска или остановки поставщика WDM.

Поставщик WDM преобразует все данные ВНОДЕ в сведения о классе. Если при преобразовании данных из ВНОДЕ в данные класса возникает ошибка, она сообщается в Вмипров. log с форматированным заголовком и байтами, отображаемыми в той же форме, что и дамп памяти.

Изменения, внесенные в параметры безопасности драйвера, вступают в силу только после выгрузки и перезагрузки поставщика WDM. Дополнительные сведения см. [в разделе выгрузка поставщика](unloading-a-provider.md).

Инструментарий WMI также может создавать высокопроизводительные счетчики для драйверов оборудования. Дополнительные сведения о создании высокопроизводительных классов и отображении данных в системном мониторе системного монитора см. в разделе [повышение эффективности работы поставщика экземпляров](improving-the-efficiency-of-an-instance-provider.md). Дополнительные сведения о создании драйверов устройств с поддержкой WMI см. в разделе [https://www.microsoft.com/ddk](https://msdn.microsoft.com/library/aa972908.aspx) . Дополнительные сведения об квалификаторах WDM в MOF-файле см. в разделе [**квалификаторы, относящиеся к поставщику WDM**](qualifiers-specific-to-the-wdm-provider.md).

## <a name="information-for-administrators-and-users-of-driver-data"></a>Сведения для администраторов и пользователей данных драйвера

Перечисление экземпляров класса [вмибинаримофресаурце](/windows/desktop/WmiCoreProv/wmibinarymofresource) предоставляет список драйверов в системе и сведения о том, был ли поставщик WDM выполнил компиляцию MOF для каждого драйвера. Можно принудительно выполнить повторную компиляцию и повторное создание классов для драйвера, удалив экземпляр Вмибинаримофресаурце, который представляет этот драйвер. Сведения об ошибках [mofcomp](mofcomp.md) приведены в сообщении MOFCOMP. log.

Если пространство имен WMI повреждено, его можно удалить и открыть повторно, чтобы принудительно перестроить классы драйверов с помощью WDM. Дополнительные сведения об открытии пространства имен см. [в разделе Создание иерархий в WMI](creating-hierarchies-within-wmi.md).

Когда загрузка драйвера прерывается или происходят другие аномальные операции, классы драйверов иногда могут получить «неудачно». Поставщик WDM будет искать и очищать "потерянные" классы при установке нового драйвера или если для **программного обеспечения \\ Microsoft \\ WBEM \\ Вдмпровидер** значение раздела реестра **процессстрандедклассес** равно **true**. Установка этого параметра в значение **true** снижает производительность запуска WMI из-за операции очистки. Значение по умолчанию — **false**. Поставщик WDM проверяет это значение реестра, только если корневое \\ пространство имен WMI открыто в первый раз.

Если в драйвер устройства WDM вносятся изменения в систему безопасности, изменения не вступят в силу до выгрузки и перезагрузки поставщика WDM. Для этого необходимо остановить и перезапустить службу управления Windows.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Использование инструментария WMI](using-wmi.md)
</dt> </dl>

 

 
