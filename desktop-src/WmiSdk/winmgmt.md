---
description: WinMgmt — это служба WMI в процессе SVCHOST, выполняемая в &\# 0034; \#Учетная запись LocalSystem&0034;.
ms.assetid: 3923322a-3acb-407e-8a07-09c59d252e8b
ms.tgt_platform: multiple
title: инициирует
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- winmgmt
api_type:
- NA
api_location: ''
ms.openlocfilehash: 090fe71edbb00bd7964e5dcc1d518f57179af943
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105703111"
---
# <a name="winmgmt"></a>инициирует

WinMgmt — это служба WMI в рамках процесса SVCHOST, работающего под учетной записью LocalSystem.

Во всех случаях служба WMI автоматически запускается, когда первое приложение или сценарий управления запрашивают соединение с пространством имен WMI. Дополнительные сведения см. в статье [Запуск и остановка службы WMI](starting-and-stopping-the-wmi-service.md).

> [!Note]  
> WMI — это основной компонент операционной системы Windows, позволяющий разработчикам и ИТ-администраторам создавать сценарии и приложения для автоматизации определенных задач. Winmgmt.exe — это служба, которая позволяет инструментарию WMI запускаться на локальном компьютере. Дополнительные сведения об использовании инструментария WMI см. в разделе [Использование WMI](using-wmi.md). Если вы получили сообщение об ошибке, касающееся winmgmt.exe, см. раздел [Устранение неполадок WMI](wmi-troubleshooting.md). Дополнительные сведения о Winmgmt.exe см. в разделе [использование средств управления WMI](/previous-versions/system-center/configuration-manager-2003/cc180468(v=technet.10)).

 

При запуске из командной строки служба WMI имеет следующие параметры.

``` syntax
winmgmt 
  [/backup <filename>] 
  [/restore <filename> <mode>] 
  [/resyncperf <winmgmt service process id>] 
  [/standalonehost <level>]
  [/sharedhost]
  [/verifyrepository <path>]
  [/salvagerepository] 
  [/resetrepository]
```

## <a name="switches"></a>коммутаторы;

<dl> <dt>

<span id="__________backup__filename_________"></span><span id="__________BACKUP__FILENAME_________"></span>**/баккуп***<filename>* 
</dt> <dd>

Заставляет Инструментарий WMI создать резервную копию репозитория по указанному имени файла. Аргумент *filename* должен содержать полный путь к расположению файла. Для этого процесса требуется блокировка записи в репозитории, чтобы операции записи в репозиторий приостанавливаются до завершения процесса резервного копирования.

Если путь к файлу не указан, он помещается в каталог% WINDIR% \\ System32.

</dd> <dt>

<span id="__________restore__filename____flag_____"></span><span id="__________RESTORE__FILENAME____FLAG_____"></span>**/RESTORE** *<filename>**<flag>* 
</dt> <dd>

Вручную восстанавливает репозиторий WMI из указанного файла резервной копии. Аргумент *filename* должен содержать полный путь к расположению файла резервной копии. Для выполнения операции восстановления Инструментарий WMI сохраняет существующий репозиторий для обратной записи в случае сбоя операции. Затем репозиторий восстанавливается из файла резервной копии, указанного в аргументе *filename* . Если не удается достичь монопольного доступа к репозиторию, существующие клиенты отключаются от WMI.

Аргумент *флага* должен быть равен 1 (принудительно отключать пользователей и восстанавливать) или 0 (восстановление по умолчанию, если пользователи не подключены) и указывает режим восстановления.

</dd> <dt>

<span id="__________resyncperf__winmgmt-service-process-id_____"></span><span id="__________RESYNCPERF__WINMGMT-SERVICE-PROCESS-ID_____"></span>**/ресинкперф** *<Winmgmt-Service-process-ID>* 
</dt> <dd>

Регистрирует библиотеки производительности компьютера с помощью инструментария WMI. WMI PID — это идентификатор процесса для службы WMI.

Требуется только в том случае, если классы системного монитора не возвращают надежные результаты.

</dd> <dt>

<span id="_standalonehost__level_"></span><span id="_STANDALONEHOST__LEVEL_"></span>**/стандалонехост**\[*<level>*\]
</dt> <dd>

Перемещает службу Winmgmt в автономный процесс svchost с фиксированной конечной точкой DCOM. Конечная точка по умолчанию — "нкакн \_ IP \_ TCP. 0.24158". Однако конечную точку можно изменить, запустив Dcomcnfg.exe. Дополнительные сведения о настройке фиксированного порта для WMI см. в разделе [Настройка фиксированного порта для WMI](setting-up-a-fixed-port-for-wmi.md).

Аргумент *Level* — это уровень проверки подлинности для процесса Svchost. WMI обычно работает как часть узла общей службы, и вы не можете увеличить уровень проверки подлинности только для WMI. Если параметр *Level* не указан, по умолчанию используется значение 4 (**RPC \_ C \_ AUTHN \_ Level \_ PKT** или **вбемаусентикатионлевелпкт**).

Вы можете более безопасно запускать Инструментарий WMI, увеличивая уровень проверки подлинности до уровня конфиденциальности пакетов (**RPC \_ C \_ AUTHN на \_ уровне \_ \_ безопасности PKT** или **вбемаусентикатионлевелпктприваци**). Уровни проверки подлинности для Visual Basic и сценариев описаны в разделе [**вбемаусентикатионлевеленум**](/windows/desktop/api/Wbemdisp/ne-wbemdisp-wbemauthenticationlevelenum). Сведения о C++ см. [в разделе Задание уровня безопасности процесса по умолчанию с помощью c++](setting-the-default-process-security-level-using-c-.md). Дополнительные сведения см. в разделе [обслуживание безопасности WMI](maintaining-wmi-security.md).

</dd> <dt>

<span id="_sharedhost"></span><span id="_SHAREDHOST"></span>**/шаредхост**
</dt> <dd>

Перемещает службу Winmgmt в общий процесс svchost.

</dd> <dt>

<span id="__________verifyrepository__path_____"></span><span id="__________VERIFYREPOSITORY__PATH_____"></span>**/верифирепоситори***<path>* 
</dt> <dd>

Выполняет проверку согласованности в репозитории WMI. При добавлении параметра **/верифирепоситори** без *<path>* аргумента проверяется текущий репозиторий, используемый WMI. При указании аргумента *path* можно проверить все сохраненные копии репозитория. В этом случае аргумент path должен содержать полный путь к сохраненной копии репозитория. Сохраненный репозиторий должен быть копией всей папки репозитория. Дополнительные сведения об ошибках, возвращаемых этой командой, см. в разделе "Примечания".

</dd> <dt>

<span id="_salvagerepository"></span><span id="_SALVAGEREPOSITORY"></span>**/салважерепоситори**
</dt> <dd>

Выполняет проверку согласованности в репозитории WMI и при обнаружении несогласованности перестраивает репозиторий. Содержимое несогласованного репозитория объединяется в перестроенный репозиторий, если его можно считать. Операция восстановления всегда работает с репозиторием, который в настоящее время использует служба WMI. Дополнительные сведения об ошибках, возвращаемых этой командой, см. в разделе "Примечания".

% MOF-файлов, содержащих инструкцию препроцессора [**\# pragma автовосстановления**](pragma-autorecover.md) , восстанавливается в репозитории.

</dd> <dt>

<span id="_resetrepository"></span><span id="_RESETREPOSITORY"></span>**/ресетрепоситори**
</dt> <dd>

При первой установке операционной системы репозиторий сбрасывается в первоначальное состояние. В репозиторий будут восстановлены MOF-файлы, содержащие инструкцию препроцессора [**\# pragma автовосстановления**](pragma-autorecover.md) .

</dd> </dl>

## <a name="remarks"></a>Комментарии

Это средство находится в каталоге% WINDIR% \\ system32 \\ WBEM. Для вывода списка доступных параметров введите `WinMgmt /?` в командной строке.

Репозиторий WMI, также известный как репозиторий CIM, не просто является отдельным файлом, а коллекцией файлов в папке репозитория, которые работают вместе в качестве базы данных. При использовании параметра **/баккуп** для резервного копирования репозитория результирующая резервная копия представляет собой один сжатый файл.

Инструментарий WMI возвращает **ошибку \_ внутренней \_ базы \_ данных** (net helpmsg 1358), если операция проверки указывает, что репозиторий находится в несогласованном состоянии. Эта ошибка может быть возвращена любой командой, выполняющей проверку репозитория, например **/верифирепоситори** или **/салважерепоситори**.

> [!Note]
>
> Если инструментарий WMI возвращает сообщения об ошибках, имейте в виду, что они могут не указывать на проблемы в службе WMI или в поставщиках WMI. Сбои могут исходить из других частей операционной системы и возникать как ошибки через инструментарий WMI. При любых обстоятельствах не удаляйте репозиторий WMI как первое действие, поскольку удаление репозитория может привести к повреждению системы или установке приложений.
>
> Чтобы получить дополнительные сведения об источнике проблемы, скачайте и запустите программу командной строки для диагностики [служебная программа для диагностики WMI](https://www.microsoft.com/downloads/en/details.aspx?familyid=d7ba3cd6-18d1-4d05-b11e-4c64192ae97d&displaylang=en) . Это средство создает отчет, который обычно может изолировать источник проблемы и предоставить инструкции по ее устранению. Этот отчет также помогает в работе со службой поддержки Майкрософт. Вы можете скачать [служебная программа для диагностики WMI](https://www.microsoft.com/downloads/details.aspx?FamilyID=d7ba3cd6-18d1-4d05-b11e-4c64192ae97d).

 

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|--------------------------------|
| Минимальная версия клиента<br/> | Windows Vista<br/>       |
| Минимальная версия сервера<br/> | Windows Server 2008<br/> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Устранение неполадок WMI](wmi-troubleshooting.md).
</dt> <dt>

[Удаленное подключение к WMI, начиная с Vista](connecting-to-wmi-remotely-starting-with-vista.md)
</dt> </dl>

 

