---
description: Компилятор MOF-файл (MOF) анализирует файл, содержащий инструкции MOF, и добавляет классы и экземпляры классов, определенные в файле, в репозиторий WMI.
ms.assetid: 9858da09-fb91-43a4-9817-83b10e2ee08f
ms.tgt_platform: multiple
title: mofcomp
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: da63525e4bb8a32f3628b68295e5cc8ade0b08de
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103898093"
---
# <a name="mofcomp"></a>mofcomp

Компилятор [*MOF-файл (MOF)*](gloss-m.md) анализирует файл, СОДЕРЖАЩИЙ инструкции MOF, и добавляет классы и экземпляры классов, определенные в файле, в репозиторий WMI. MOF-файлы обычно автоматически компилируются во время установки систем, с которыми они предоставляются, но можно также компилировать MOF-файлы с помощью этого средства.

Дополнительные сведения о поиске и использовании mofcomp.exe см. [в разделе Использование средств управления WMI](/previous-versions/system-center/configuration-manager-2003/cc180468(v=technet.10)). Сведения об удалении классов и экземпляров из репозитория WMI см. в описании команды препроцессора [**pragma делетекласс**](pragma-deleteclass.md) .

В следующем примере кода показано, как запустить компилятор MOF для файла.

``` syntax
mofcomp
  [-autorecover]
  [-check]
  [-N:<namespacepath>]
  [-class:createonly | -class:forceupdate | 
   -class:safeupdate | -class:updateonly ] 
  [-instance:updateonly | -instance:createonly]
  [-B:<filename>]
  [-WMI]
  [-P:<Password>]
  [-U:<UserName>]
  [-A:<Authority>]
  [-MOF:<path>] 
  [-MFL:<path>] 
  [-AMENDMENT:<Locale>]
  [-ER:<ResourceName>]
  [-L:<ResourceLocale>] 
  <MOFfile>
```

## <a name="switches"></a>коммутаторы;

<dl> <dt>

<span id="-autorecover"></span><span id="-AUTORECOVER"></span>**— автовосстановление**
</dt> <dd>

Добавляет именованный MOF-файл в список файлов, скомпилированных во время восстановления репозитория. Список MOF-файлов для автовосстановления хранится в разделе реестра:

**HKey \_ \_** \\ **Программное обеспечение** \\ **Microsoft** \\ **WBEM** \\ **CIMOM \\** для локального компьютера

MOF-файлы, перечисленные в этой записи реестра, должны находиться на локальном компьютере, так как файлы MOF, использующие команду **автовосстановления** , не могут восстанавливать MOF-файлы, расположенные на удаленном компьютере.

> [!Note]  
> Чтобы гарантировать, что все определения классов WMI для управляемых объектов будут восстановлены в [*репозитории WMI*](gloss-w.md) в случае сбоя и перезапуска WMI, используйте инструкцию препроцессора [**\# pragma автовосстановления**](pragma-autorecover.md) в файле [*MOF-файл*](gloss-m.md) (MOF).

 

</dd> <dt>

<span id="-check"></span><span id="-CHECK"></span>**— Проверка**
</dt> <dd>

Запрашивает выполнение компилятором только проверки синтаксиса и вывод соответствующих сообщений об ошибках. С этим параметром нельзя использовать другие коммутаторы. При использовании этого параметра подключение к инструментарий управления Windows (WMI) (WMI) не устанавливается и изменения в репозитории WMI не вносятся.

</dd> <dt>

<span id="-N__namespacepath_"></span><span id="-n__namespacepath_"></span><span id="-N__NAMESPACEPATH_"></span>**-N: <** _намеспацепас_*_>_*
</dt> <dd>Запрашивает загрузку MOF-файла компилятором в пространство имен, указанное как *намеспацепас*. Скомпилированный MOF-файл загружается в пространство имен mofcomp по умолчанию, корневое \\ по умолчанию, если этот параметр не используется. Можно также вставить **\# пространство имен директивы pragma** для команды препроцессора ("_путь к пространству имен_*_")_* в MOF-файл, чтобы добиться того же результата. Если используются как параметр **-N:** Switch, так и \# команда <a href="pragma-namespace.md">pragma Namespace</a> , то \# **директива pragma Namespace**  имеет приоритет. В этом случае единственным способом компиляции MOF в другое пространство имен является редактирование MOF-файла и изменение \# команды **pragma Namespace** . Удаленный компьютер можно указать с помощью \\ \\ \\ корневого корня \\ по умолчанию MachineName.</dd> <dt>

<span id="-class_createonly"></span><span id="-CLASS_CREATEONLY"></span>**-Class: креатеонли**
</dt> <dd>

Запрашивает, что компилятор не вносит изменения в существующие классы. Если используется этот параметр, операция компиляции завершается, если класс, указанный в MOF-файле, уже существует.

</dd> <dt>

<span id="-class_forceupdate"></span><span id="-CLASS_FORCEUPDATE"></span>**-Class: форцеупдате**
</dt> <dd>

Принудительно обновляет классы при наличии конфликтующих дочерних классов. Например, предположим, что квалификатор класса определен в дочернем классе, а базовый класс пытается добавить тот же квалификатор. В режиме **форцеупдате:** компилятор MOF разрешает этот конфликт, удаляя конфликтующий квалификатор в дочернем классе. Если дочерний класс имеет экземпляры, принудительное обновление завершается сбоем.

</dd> <dt>

<span id="-class_safeupdate"></span><span id="-CLASS_SAFEUPDATE"></span>**-Class: сафеупдате**
</dt> <dd>

Позволяет обновлять классы даже при наличии дочерних классов, если изменение не вызывает конфликты с дочерними классами. Например, этот флаг позволяет добавить новое свойство в базовый класс, который ранее не упоминался в дочерних классах. Если дочерние классы имеют экземпляры, обновление завершается ошибкой.

</dd> <dt>

<span id="-class_updateonly"></span><span id="-CLASS_UPDATEONLY"></span>**-Class: упдатеонли**
</dt> <dd>

Запрашивает, что компилятор не создает никаких новых классов. Если используется этот параметр, операция компиляции завершается, если класс, указанный в MOF-файле, не существует.

</dd> <dt>

<span id="-instance_updateonly"></span><span id="-INSTANCE_UPDATEONLY"></span>**-instance: упдатеонли**
</dt> <dd>

Запрашивает, что компилятор не создает никаких новых экземпляров. При использовании этого параметра операция компиляции завершается, если экземпляр, указанный в MOF-файле, не существует.

</dd> <dt>

<span id="-instance_createonly"></span><span id="-INSTANCE_CREATEONLY"></span>**-instance: креатеонли**
</dt> <dd>

Запрашивает, что компилятор не вносит изменения в существующие экземпляры. При использовании этого параметра операция компиляции завершается, если экземпляр, указанный в MOF-файле, уже существует.

</dd> <dt>

<span id="-B__filename_"></span><span id="-b__filename_"></span><span id="-B__FILENAME_"></span>**-B: <** _имя файла_*_>_*
</dt> <dd>

Запрашивает создание компилятором двоичной версии MOF-файла с именем *filename* без внесения изменений в репозиторий WMI.

Если для создания двоичного файла MOF используется параметр **-B: <** _filename_ *_>_* , в репозитории WMI будут храниться только флаги квалификаторов по умолчанию.

Двоичный формат MOF — это промежуточный формат для объединения драйвера WDM с MOF в качестве ресурса. Двоичный MOF представляет классы и экземпляры так же, как и текстовый MOF-файл, и сжимается перед сохранением на диске.

</dd> <dt>

<span id="-WMI"></span><span id="-wmi"></span>**— Инструментарий WMI**
</dt> <dd>

Запрашивает выполнение компилятором проверки синтаксиса WMI. Параметр **-B:** должен использоваться с этим параметром. Параметр **-WMI** используется только для создания двоичных файлов MOF для использования драйверами устройств WDM. Этот параметр вызывает отдельное средство проверки двоичных файлов MOF, которое запускается после создания двоичного MOF-файла.

</dd> <dt>

<span id="-P__Password_"></span><span id="-p__password_"></span><span id="-P__PASSWORD_"></span>**-P: <** _пароль_*_>_*
</dt> <dd>

Указывает *пароль* для входа пользователя компьютера при входе в систему.

</dd> <dt>

<span id="-U__UserName_"></span><span id="-u__username_"></span><span id="-U__USERNAME_"></span>**-U: <** _имя пользователя_*_>_*
</dt> <dd>

Указывает имя *пользователя* в качестве имени входа пользователя.

</dd> <dt>

<span id="-A__Authority_"></span><span id="-a__authority_"></span><span id="-A__AUTHORITY_"></span>**-A:** _центр_ <*_>_*
</dt> <dd>

Указывает *центр* в качестве центра (доменного имени), используемого для входа в WMI.

</dd> <dt>

<span id="-MOF__path_"></span><span id="-mof__path_"></span><span id="-MOF__PATH_"></span>**-MOF: <** _путь_*_>_*
</dt> <dd>

Имя выхода, не зависящего от языка. Используется с параметром **-** Renames, чтобы указать имя файла MOF, не зависящего от языка, который будет создан.

</dd> <dt>

<span id="-MFL__path_"></span><span id="-mfl__path_"></span><span id="-MFL__PATH_"></span>**-МФЛ: <** _путь_*_>_*
</dt> <dd>

Имя вывода, зависящего от языка. Используется с параметром **-** Renames, чтобы указать имя MOF-файла, который будет создан.

</dd> <dt>

<span id="-AMENDMENT__Locale_"></span><span id="-amendment__locale_"></span><span id="-AMENDMENT__LOCALE_"></span>-Поправка **: <** _языковой стандарт_*_>_*
</dt> <dd>

Разделяет MOF-файл на зависящие от языка и независимые версии. Компилятор MOF создает не зависящий от языка форму MOF-файла, в котором удалены все измененные квалификаторы. Локализованная версия MOF-файла также создается с расширением имени файла МФЛ. Параметр *locale* задает имя дочернего пространства имен, содержащего определения локализованных классов. Формат параметра *locale* — MS \_ xxx, где XXX — шестнадцатеричное значение LCID Windows. Например, языковой стандарт американский английский — MS \_ 409.

</dd> <dt>

<span id="-ER__ResourceName_"></span><span id="-er__resourcename_"></span><span id="-ER__RESOURCENAME_"></span>**-ER <** _resourceName_*_>_*
</dt> <dd>

Извлекает двоичный MOF из именованного ресурса. Этот параметр получает двоичный MOF-файл из класса в репозитории WMI, а параметр-B создает двоичный формат MOF из MOF-файла.

</dd> <dt>

<span id="-L__ResourceLocale_"></span><span id="-l__resourcelocale_"></span><span id="-L__RESOURCELOCALE_"></span>**-L: <** _ресаурцелокале_*_>_*
</dt> <dd>

Необязательный элемент. Извлекает локализованные описания MOF из двоичного MOF при использовании с параметром-ER.

</dd> <dt>

<span id="_MOFfile_"></span><span id="_moffile_"></span><span id="_MOFFILE_"></span>**<**_моффиле_*_>_*
</dt> <dd>

Имя анализируемого файла.

</dd> </dl>

## <a name="return-values"></a>Возвращаемые значения

В качестве первой операции компилятор MOF выполняет проверку синтаксиса MOF-файла. Если компилятор обнаружит ошибки, он выводит сообщение об ошибке и процесс завершается.

Компилятор MOF может возвращать следующие значения:

<dl> <dt>

<span id="0"></span>0
</dt> <dd>

Операция компиляции MOF выполнена успешно.

</dd> <dt>

<span id="1"></span>1
</dt> <dd>

Компилятору MOF не удалось соединиться с сервером WMI. Это происходит из-за семантической ошибки, такой как несовместимость с существующим репозиторием WMI, или фактической ошибки, такой как сбой сервера WMI для запуска.

</dd> <dt>

<span id="2"></span>2
</dt> <dd>

Один или несколько параметров командной строки недопустимы.

</dd> <dt>

<span id="3"></span>3-5
</dt> <dd>

Произошла синтаксическая ошибка MOF.

</dd> </dl>

Если MOF-файл проанализирован правильно, но предпринята попытка выполнить операцию, запрещенную параметром командной строки, компилятор возвращает код ошибки, сформированный WMI, а не любой из кодов возврата, перечисленных в списке выше. Например, если указан параметр **-instance: упдатеонли** , то возвращается код ошибки WMI, а файл MOF пытается создать экземпляр.

Если инструкция препроцессора [**\# pragma автовосстановления**](pragma-autorecover.md) отсутствует в файле, возвращается следующее предупреждение:

``` syntax
WARNING: FileYourMof.Mof does not contain #PRAGMA AUTORECOVER.
If the WMI repository is rebuilt in the future, the contents of this 
MOF file   will not be included in the new WMI repository.
To include this MOF file when the WMI Repository is automatically 
reconstructed, place the #PRAGMA AUTORECOVER statement on the first 
line of the MOF file.
```

## <a name="remarks"></a>Комментарии

Компилятор MOF доступен в каталоге% WINDIR% \\ system32 \\ WBEM. Необходимо указать MOF-файл в качестве параметра компилятора MOF. Можно также указать параметр автоматического восстановления, если необходимо автоматически перекомпилировать MOF-файл, если репозиторий CIM когда-либо будет автоматически восстановлен. Для получения дополнительных сведений введите **mofcomp/?** в командной строке.

MOF-файл, использующий набор символов Юникода, содержит подпись в виде первых двух байтов файла. Эта подпись имеет значение U + ФФФЕ или U + FEFF в зависимости от порядка байтов в файле.

Если в процессе синтаксического анализа ошибки не возникают, компилятор MOF подключается к серверу WMI, выполняющемуся на локальном компьютере, если не указан параметр **-Check** . Классы и экземпляры, определенные в MOF-файле, добавляются в репозиторий WMI.

При возникновении ошибки при обновлении репозитория WMI компилятор не предпринимает попытки вернуть репозиторий в состояние до начала обработки.

**Windows 8:** При установке поставщика mofcomp рассматривает \[ ключ \] и \[ статические \] Квалификаторы как true, если они есть, независимо от их реальных значений. Другие квалификаторы обрабатываются как false, если они есть, но не имеют явного значения true.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|--------------------------------|
| Минимальная версия клиента<br/> | Windows Vista<br/>       |
| Минимальная версия сервера<br/> | Windows Server 2008<br/> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**пространство имен pragma**](pragma-namespace.md)
</dt> <dt>

[Компиляция MOF-файлов](compiling-mof-files.md)
</dt> <dt>

[Компиляция локализованных MOF-файлов](compiling-localized-mof-files.md)
</dt> <dt>

[Регистрация поставщика](registering-a-provider.md)
</dt> <dt>

[**Имофкомпилер:: Компилефиле**](/windows/desktop/api/Wbemcli/nf-wbemcli-imofcompiler-compilefile)
</dt> </dl>

 

