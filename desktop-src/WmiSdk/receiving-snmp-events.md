---
description: Поставщики событий SNMP поддерживают сообщения о ловушках и SNMPv2.
ms.assetid: 715b2925-b01d-4631-86e3-a6239ff1dba7
ms.tgt_platform: multiple
title: Получение событий SNMP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cf09e32ec05d42adcc60891cd369cde1f3f078541416ce1a492484de024744bd
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119996024"
---
# <a name="receiving-snmp-events"></a>Получение событий SNMP

Поставщики событий SNMP поддерживают сообщения о ловушках и SNMPv2.

Поддерживаются следующие три типа уведомлений о ловушках и SNMPv2:

-   Универсальный шаблон

    Универсальные ловушки и уведомления соответствуют именованным событиям, таким как компоновка и холодный запуск. Универсальные ловушки и уведомления представлены классами, такими как **снмплинкупнотификатион** и **снмпвармстартекстендеднотификатион**, которые содержат имя ловушки в имени класса. Эти классы являются подклассами [снмпнотификатион](snmpnotification.md) и [снмпекстендеднотификатион](snmpextendednotification.md).

-   Enterprise

    Enterprise конкретные ловушки и уведомления соответствуют событиям, представленным классом WMI, который не является подклассом [снмпнотификатион](snmpnotification.md) и [снмпекстендеднотификатион](snmpextendednotification.md). Для поддержки ловушек и уведомлений, относящихся к корпоративной сети, потребитель должен определить классы путем компиляции определений MIB с помощью компилятора SNMP MIB.

-   Enterprise не зависит

    Ловушки и уведомления, не относящиеся к корпоративной среде, не соответствуют ни одному из типов общих событий или типов событий, связанных с предприятием. Для ловушек и уведомлений, отличных от конкретного предприятия, не были скомпилированы определения MIB в Смир. Они представлены классами [снмпнотификатион](snmpnotification.md), **SnmpV2Notification**, **SnmpV1ExtendedNotification** и **SnmpV2ExtendedNotification** , производными от снмпнотификатион и [снмпекстендеднотификатион](snmpextendednotification.md).

> [!Note]  
> Дополнительные сведения об установке поставщика см. в разделе [Настройка среды SNMP WMI](setting-up-the-wmi-snmp-environment.md).

 

В этом разделе обсуждаются следующие разделы:

-   [Получение общих событий SNMP](#receiving-generic-snmp-events)
-   [Получение событий Enterprise-Specific](#receiving-enterprise-specific-events)
-   [Получение событий Enterprise-Nonspecific](#receiving-enterprise-nonspecific-events)

## <a name="receiving-generic-snmp-events"></a>Получение общих событий SNMP

СиП и СРЕП поддерживают все типы стандартных ловушек и уведомлений о SNMPv2ах. Универсальные события SNMP представлены подклассами классов [снмпнотификатион](snmpnotification.md) и [снмпекстендеднотификатион](snmpextendednotification.md) .

Каждый тип события представлен одним классом СиП и одним классом СРЕП. Классы СиП являются производными от [снмпнотификатион](snmpnotification.md); классы СРЕП являются производными от [снмпекстендеднотификатион](snmpextendednotification.md). Поставщики событий нуждаются в различных классах, поскольку они используют разные механизмы в представлении данных событий SNMP.

СиП преобразует данные событий SNMP непосредственно в свойства класса WMI, в то время как СРЕП — нет. СРЕП добавляет уровень косвенного обращения к интерпретации, необходимой для использования свойств WMI. Свойства подклассов СРЕП [снмпекстендеднотификатион](snmpextendednotification.md) являются экземплярами классов SNMP. свойства подклассов СиП [снмпнотификатион](snmpnotification.md) — это целые числа и строки.

В следующей таблице перечислены типы общих событий SNMP и связанные классы событий.



| Событие SNMP                                    | Класс СиП                                | Класс СРЕП                                        |
|-----------------------------------------------|-------------------------------------------|---------------------------------------------------|
| Сбой проверки подлинности                        | **снмпаусентикатионфаилуренотификатион** | **снмпаусентикатионфаилурикстендеднотификатион** |
| Потерянный соседний протокол шлюза (ЕГП) | **снмпегпнеигхборлосснотификатион**       | **снмпегпнеигхборлоссекстендеднотификатион**       |
| Холодный запуск                                    | **снмпколдстартнотификатион**             | **снмпколдстартекстендеднотификатион**             |
| Горячий запуск                                    | **снмпвармстартнотификатион**             | **снмпвармстартекстендеднотификатион**             |
| Создать связь                                       | **снмплинкупнотификатион**                | **снмплинкупекстендеднотификатион**                |
| Связь отключена                                     | **снмплинкдовннотификатион**              | **снмплинкдовнекстендеднотификатион**              |



 

Например, классы **снмплинкупнотификатион** и **снмплинкупекстендеднотификатион** описывают событие компоновки. Оба класса включают свойства **ifIndex**, **ифадминстатус** и **ифоперстатус** , но имеют очень разные типы. Свойства класса **снмплинкупнотификатион** имеют тип SINT32 и String. Свойства класса **снмплинкупекстендеднотификатион** являются внедренными объектами IETF \_ SNMP \_ RFC1213 \_ MIB \_ ифтабле.

## <a name="receiving-enterprise-specific-events"></a>Получение событий Enterprise-Specific

СиП и СРЕП поддерживают любые ловушки и уведомления, связанные с предприятием, которые были скомпилированы в Смир.

В следующей процедуре описывается, как получить события, связанные с предприятием.

**Получение событий для конкретного предприятия**

1.  Скомпилируйте определения MIB с устройства, ответственного за создание события.

    Определения MIB можно компилировать с помощью компилятора SNMP MIB. Дополнительные сведения см. [в разделе Настройка среды SNMP WMI](setting-up-the-wmi-snmp-environment.md).

2.  Определите, какие типы классов необходимо сопоставить с событиями.

    При компиляции определения MIB для события, характерного для предприятия, можно определить тип класса, создаваемого компилятором. В частности, можно указать компилятору создать один из следующих вариантов:

    -   [Снмпнотификатион](snmpnotification.md) подклассы из определений.
    -   [Снмпекстендеднотификатион](snmpextendednotification.md) подклассы из определений.
    -   Подклассы [снмпнотификатион](snmpnotification.md) и [снмпекстендеднотификатион](snmpextendednotification.md) из определений.

    Дополнительные сведения см. в разделе [Компиляция MOF-файлов](compiling-mof-files.md).

Если поставщики событий SNMP получают определенную ловушку или уведомление, для которого нет класса, поставщики создают событие, не относящееся к Организации. дополнительные сведения см. в разделе [получение Enterprise неспецифичных событий](#receiving-enterprise-nonspecific-events).

## <a name="receiving-enterprise-nonspecific-events"></a>Получение событий Enterprise-Nonspecific

Событие, не зависящее от предприятия, — это событие, которое не сопоставляется со SNMPv2 или уведомлением о сопоставлении с подклассами [снмпнотификатион](snmpnotification.md) или [снмпекстендеднотификатион](snmpextendednotification.md) или любого класса, представляющего корпоративное событие.

СиП использует классы **SNMPV1Notification** или **SNMPV2Notification** для неспецифичных событий, тогда как среп использует классы **SNMPv1ExtendedNotification** и **SNMPV2ExtendedNotification** .

Все четыре класса, не зависящие от предприятия, являются производными от классов [снмпнотификатион](snmpnotification.md) или [снмпекстендеднотификатион](snmpextendednotification.md) и имеют одинаковый формат. Оба класса имеют одно свойство **варбиндлист**. **Варбиндлист** — это массив экземпляров класса **снмпварбинд** . **Снмпварбинд** — это базовый класс, поддерживаемый поставщиками событий SNMP для представления экземпляра привязки переменной SNMP. В следующей таблице перечислены свойства **снмпварбинд**.



| Свойство         | Описание                                                                                                    |
|------------------|----------------------------------------------------------------------------------------------------------------|
| Кодирование         | Строка, указывающая абстрактный синтаксис (ASN. 1) типа переменной в свойстве **value** . |
| ObjectIdentifier | Строка, идентифицирующая переменную в свойстве **value** .                                                 |
| Значение            | Необработанные данные в октетах.                                                                                            |



 

В классах **SnmpV1Notification** и **SnmpV2Notification** порядок привязки переменной из события SNMP был сохранен, за исключением первых двух привязок переменных, меток времени и снмптрапоид. Эти привязки были удалены и хранятся в свойствах **timestamp** и **Identification** родительского класса [снмпнотификатион](snmpnotification.md) или [снмпекстендеднотификатион](snmpextendednotification.md) .

 

 



