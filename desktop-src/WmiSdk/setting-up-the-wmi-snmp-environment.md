---
description: Для взаимодействия с сетевым устройством с помощью WMI-интерфейса SNMP требуется настройка устройств, SNMP и служб WMI. Сведения в этом разделе поясняют, как настроить среду WMI SNMP.
ms.assetid: 8074175a-af66-49b2-9723-dfb38a08fb63
ms.tgt_platform: multiple
title: Настройка среды SNMP WMI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8a090dab219c589fc8d9084c445e9a69c8d75afefb64400fe3029bfed66ab931
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119860427"
---
# <a name="setting-up-the-wmi-snmp-environment"></a>Настройка среды SNMP WMI

Для взаимодействия с сетевым устройством с помощью WMI-интерфейса SNMP требуется настройка устройств, SNMP и служб WMI. Сведения в этом разделе поясняют, как настроить среду WMI SNMP.

В этом разделе обсуждаются следующие разделы:

## <a name="installing-the-snmp-provider"></a>Установка поставщика SNMP

Служба SNMP не включена по умолчанию. Вы можете включить службу SNMP и поставщик SNMP WMI с помощью панели управления. Имейте в виду, что служба SNMP должна быть включена и запущена для работы поставщика SNMP WMI.

начиная с Windows Vista, используйте следующую процедуру для установки поставщика SNMP.

**Установка поставщика SNMP**

1.  В **панели управления** выберите **программы**.
2.  в разделе **программы и компоненты** выберите **включить или отключить компоненты Windows**.
3.  в списке компонентов Windows прокрутите вниз до **компонента SNMP** и разверните список, чтобы увидеть **поставщик WMI SNMP**.
4.  Установите флажок для **поставщика WMI SNMP**. Флажок для **компонента SNMP** выбирается автоматически, так как поставщик требует протокол SNMP.
5.  Нажмите **OK**.
6.  В командной строке или в меню " **Пуск** " запустите Services. msc и убедитесь, что служба SNMP запущена.

## <a name="creating-an-snmp-namespace"></a>Создание пространства имен SNMP

Пространство имен SNMP определяет представление сетевого устройства.

> [!Note]  
> Дополнительные сведения о поддержке и установке этого компонента в определенной операционной системе см. в статье [доступность компонентов WMI в операционной системе](operating-system-availability-of-wmi-components.md).

 

В следующей процедуре описывается создание [*пространства имен*](gloss-n.md)SNMP WMI.

**Создание пространства имен SNMP**

1.  Создайте экземпляр класса системы [**\_ \_ пространства имен**](--namespace.md) , выполнив компиляцию файла [*MOF-файл*](gloss-m.md) . mof или с помощью [API COM для WMI](com-api-for-wmi.md).

    Дополнительные сведения см. [в разделе Создание иерархий в WMI](creating-hierarchies-within-wmi.md).

2.  Свяжите [*Квалификаторы*](gloss-q.md) поставщика SNMP с определением пространства имен.

    Квалификаторы поставщика SNMP содержат зависящую от реализации контекстную информацию и свойства транспорта, определяющие, как поставщик SNMP получает доступ к SNMP-устройству. Дополнительные сведения см. в разделе [**квалификаторы, относящиеся к поставщику SNMP**](qualifiers-specific-to-the-snmp-provider.md).

3.  Используйте программу командной строки [mofcomp](mofcomp.md) для загрузки MOF-кода в репозиторий WMI.

    Дополнительные сведения см. в разделе [Компиляция MOF-файлов](compiling-mof-files.md).

В следующем примере кода MOF определяется \\ пространство имен SNMP с подмножеством квалификаторов, которые могут быть связаны с пространством имен SNMP.

``` syntax
// Load classes and instances into <\\.\root> namespace

#pragma namespace("\\\\.\\root")               

[ 
  AgentAddress( "localhost" ), 
  AgentReadCommunityName( "public"), 
  AgentWriteCommunityName( "private"), 
  AgentRetryCount( 1 ), 
  AgentRetryTimeout( 500 ), 
  AgentVarBindsPerPdu( 10 ),
  AgentFlowControlWindowSize ( 3 ) 
]

  instance of __Namespace
  {
      Name = "snmp" ;
  };
```

## <a name="inserting-snmp-mib-data-into-wmi"></a>Вставка данных SNMP MIB в WMI

Поставщик SNMP выступает в качестве моста между данными SNMP и классами WMI. Поэтому в инструментарии WMI должны быть классы, которые представляют различные аспекты устройства с поддержкой SNMP. Для этого необходимо использовать компилятор модуля SNMP Information ([smi2smir](smi2smir.md)) для компиляции данных SNMP-управления из формата SNMP в эквивалентные определения схемы CIM. После этого выходные данные компилятора сведений можно направить в базу данных схемы SNMP, которая называется "хранилище данных модуля SNMP (Смир)", или с помощью нескольких различных типов MOF-файлов.

Компилятор работает в режиме командной строки, используя в качестве входных данных один файл MIB. Следующая команда загружает указанный файл MIB в Смир.

**smi2smir/a***<MIB file>*

## <a name="setting-up-snmp-communities"></a>Настройка SNMP-сообществ

Как мера безопасности, сообщество SNMP "Public" по умолчанию не создается. вы можете создать сообщество, как описано в [разделе Параметры реестра сообществ](/previous-versions/windows/embedded/ms907028(v=msdn.10)). Если у вас нет сообщества, Создайте общедоступное сообщество для доступа к поставщику SNMP.

## <a name="generating-mof-files-from-mib-files"></a>Создание MOF-файлов из файлов MIB

Следующие команды являются примером создания MOF-файлов из файлов MIB, которые устанавливаются при установке поставщика SNMP.

**CD** *% WINDIR% \\ system32 \\ , \\ SNMP*

**Smi2smir/g** *.. \\ . \\ хостмиб. MIB* **>** *хостмиб. mof*

**Smi2smir/g** *.. \\ . \\ ипфорвд. MIB* **>** *ипфорвд. mof*

**Smi2smir/g** *.. \\ . \\ нипкс. MIB* **>** *нипкс. mof*

**Smi2smir/g** *.. \\ . \\ MIB \_ II. MIB* **>** *MIB \_ II. mof*

**Smi2smir/g** *.. \\ . \\ lmmib2. MIB* **>** *lmmib2. mof*

**Smi2smir/g** *.. \\ . \\ мкастмиб. MIB* **>** *мкастмиб. mof*

**Smi2smir/g** *.. \\ . \\ rfc2571. MIB* **>** *rfc2571. mof*

**Smi2smir/g** *.. \\ . \\ вфоспф. MIB* **>** *вфоспф. mof*

**Smi2smir/g** *.. \\ . \\ DHCP. MIB \\ . \\ .. MSFT. MIB* **>** *DHCP. mof*

**Smi2smir/g** *.. \\ . \\ WINS. MIB \\ . \\ .. MSFT. MIB* **>** *WINS. mof*

**Smi2smir/g** *.. \\ . \\ мипкс. MIB \\ . \\ .. MSFT. MIB* **>** *мипкс. mof*

**Smi2smir/g** *.. \\ . \\ мрипсап. MIB \\ . \\ .. MSFT. MIB* **>** *мрипсап. mof*

**Smi2smir/g** *.. \\ . \\ мсипбтп. MIB \\ . \\ .. MSFT. MIB* **>** *мсипбтп. mof*

**Smi2smir/g** *.. \\ . \\ msiprip2. MIB \\ . \\ .. MSFT. MIB* **>** *msiprip2. mof*

## <a name="adding-snmp-mof-files-to-the-wmi-repository"></a>Добавление MOF-файлов SNMP в репозиторий WMI

Следующие команды являются примером добавления MOF-файлов, созданных из файлов MIB, в репозиторий WMI. Если вы хотите добавить MOF-файлы в список файлов, которые будут автоматически восстановлены в процессе восстановления в [*репозитории WMI*](gloss-w.md) , добавьте флаг **— Автовосстановление** в конец каждой команды. Дополнительные сведения о средстве командной строки WMI Mofcomp.exe см. в разделе [**mofcomp**](mofcomp.md).

**mofcomp** *хостмиб. mof*

**mofcomp** *ипфорвд. mof*

**mofcomp** *нипкс. mof*

**mofcomp** *MIB \_ II. mof*

**mofcomp** *lmmib2. mof*

**mofcomp** *мкастмиб. mof*

**mofcomp** *rfc2571. mof*

**mofcomp** *вфоспф. mof*

**mofcomp** *DHCP. mof*

**mofcomp** *мипкс. mof*

**mofcomp** *мрипсап. mof*

**mofcomp** *мсипбтп. mof*

**mofcomp** *msiprip2. mof*

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Доступ к SNMP-устройствам](accessing-snmp-devices.md)
</dt> </dl>

 

 
