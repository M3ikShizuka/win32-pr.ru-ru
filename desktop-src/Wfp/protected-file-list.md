---
description: Список защищенных ресурсов
ms.assetid: 70413c13-3db0-4af0-b584-259cce70f084
title: Список защищенных ресурсов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 316a9bf9233283a7c0aba11f0d5fe8a09f38f1e7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104272584"
---
# <a name="protected-resource-list"></a>Список защищенных ресурсов

Разрешение на полный доступ для изменения ресурсов, защищенных WRP, ограничено TrustedInstaller. Ресурсы, защищенные WRP, можно изменять только с помощью [поддерживаемых механизмов замены ресурсов](supported-file-replacement-mechanisms.md) в службе установщика модулей Windows.

WRP защищает файлы со следующими расширениями, установленными в Windows Server 2008 или Windows Vista:. dll,. exe,. ocx и. sys.

WRP защищает критически важные файлы, установленные Windows Server 2008 или Windows Vista, со следующими расширениями:. ACM,. ade,. ADP,. app,. ASA,. ASP,. aspx,. AX,. BAS,. bat,.,. cmd,. chm,. cnt,. КНВ,. com, CPL,. кпкс,. CRT,. КШ,. dll,. drv,. DTD,. exe,. фксп,. GRP,. H1S,. hlp,. hta,. IME,. INF,.. жсе,. lnk,. Mad,. КШ,. ,. MAM,. Man,. maq,. Mar,. Mas,.,. MAU,. МАВ,. МАВ,. MDA,. mdb,. MDE,. MDT,. mdw,. МДЗ,. msc,. msi,. MSP,. MST,. MUI,. NLS,. ocx,. Ops,. PAL,. ПКД,. pif,. PRF,. ПРГ,. pst,. reg,. SCF,. SCR,. SCT,. ШБ,. ШС,. sys,. tlb,. TSP,. URL,. vb,. VBE,. vbs,. всмакрос,. VSS,. VST,. ВСВ,. WS,. WSC,. wsf,. WSH,. xsd и. xsl.

WRP защищает критические папки. Папка, содержащая только файлы, защищенные WRP, может быть заблокирована, чтобы только доверенный установщик Windows мог создавать файлы или вложенные папки в папке. Папка может быть частично заблокирована, чтобы позволить администраторам создавать файлы и вложенные папки в папке.

WRP защищает ключевые разделы реестра, установленные Windows Server 2008 и Windows Vista. Если ключ защищен WRP, все его подразделы и значения могут быть защищены.

WRP копирует файлы, необходимые для перезапуска Windows в *каталоге кэша* , расположенном в папке% WINDIR% \\ WinSxS \\ BACKUP. Критические файлы, которые не требуются для перезапуска Windows, не копируются в каталог кэша. Невозможно изменить размер каталога кэша и список файлов, скопированных в кэш.

* * Windows Server 2003 и Windows XP: * *

Защита файлов Windows (WFP) предшествует WRP.

WFP защищает файлы, установленные Windows, со следующими расширениями: DLL, exe, OCX и sys. Кроме того, также защищаются шрифты TrueType Fonts. ttf, Tahoma. ttf и Тахомабд. ttf.

В конце установки Windows система WFP выполняет проверку всех защищенных файлов, чтобы убедиться, что они не были изменены приложениями, установленными с помощью автоматической установки. WFP также копирует проверенные версии этих системных файлов в каталог кэша. Когда приложение пытается заменить защищенный файл, WFP может восстановить исходный файл из каталога кэша.

Значение по умолчанию —% SystemRoot% \\ system32 \\ Dllcache. Чтобы указать другое расположение кэша, создайте следующее значение реестра: **hKey \_ Local \_ Machine \\ Software \\ Microsoft \\ Windows NT \\ CurrentVersion \\ Winlogon \\ сфкдллкачедир**

Это должен быть локальный путь. При использовании сетевого пути создается один источник общей сети для файлов кэша, при условии, что все клиенты, использующие общую папку, работают с теми же пакетами обновления и исправлениями.

Размер кэша по умолчанию не ограничен. Чтобы изменить размер кэша, используйте следующий параметр реестра: **hKey \_ Local \_ Machine \\ Software \\ Microsoft \\ Windows NT \\ CurrentVersion \\ Winlogon \\ SFCQuota**

Если это значение равно \_ квоте \_ sfc \_ , все файлы будут кэшироваться в каталоге кэша.

Из-за соображений места на диске может быть нежелательно поддерживать кэшированные версии всех системных файлов в каталоге кэша. В зависимости от размера кэша WFP будет хранить проверенные версии файлов в каталоге кэша на жестком диске системы. WFP добавляет файлы в кэш до тех пор, пока размер каталога кэша не достигнет указанного предела.

Когда приложение пытается заменить защищенный файл, который не находится в кэше, WFP пытается восстановить исходный файл из источника установки, запрашивая пользователя при необходимости.

 

 



