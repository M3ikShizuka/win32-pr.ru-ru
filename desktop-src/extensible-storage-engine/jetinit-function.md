---
description: Дополнительные сведения о функции Жетинит
title: Функция JetInit
TOCTitle: JetInit Function
ms:assetid: b7f78cca-7268-4045-bda2-20746b1d6370
ms:mtpsurl: https://msdn.microsoft.com/library/Gg294068(v=EXCHG.10)
ms:contentKeyID: 32765683
ms.date: 04/11/2016
ms.topic: reference
api_name:
- JetInit
topic_type:
- apiref
- kbArticle
api_type:
- DLLExport
- COM
api_location:
- ESENT.DLL
ROBOTS: INDEX,FOLLOW
ms.openlocfilehash: 308c012bc5eb144e0ac0d608c64d63ccf39aeca1
ms.sourcegitcommit: 168d11879cb9fd89d26f826482725c0a626be00f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/16/2021
ms.locfileid: "104356213"
---
# <a name="jetinit-function"></a>Функция JetInit


_**Применимо к:** Windows | Windows Server_

## <a name="jetinit-function"></a>Функция JetInit

Функция **жетинит** помещает ядро СУБД в состояние, где оно может поддерживать использование файлов базы данных приложением. Подсистема уже должна быть правильно настроена для инициализации с помощью [жетсетсистемпараметер](./jetsetsystemparameter-function.md). Восстановление после сбоя базы данных выполняется автоматически в рамках процесса инициализации.

```cpp
JET_ERR JET_API JetInit(
  __in_out_opt  JET_INSTANCE* pinstance
);
```

### <a name="parameters"></a>Параметры

*пинстанце*

Экземпляр, используемый для этого вызова.

Для Windows 2000 этот параметр игнорируется и всегда должен иметь значение NULL.

Для Windows XP и более поздних версий использование этого параметра зависит от режима работы ядра. Если ядро работает в устаревшем режиме (режим совместимости Windows 2000), где поддерживается только один экземпляр, то этот параметр может иметь значение NULL или быть установлен в допустимый выходной буфер, который будет возвращать глобальный экземпляр, созданный в качестве побочного результата инициализации. Для этого выходного буфера необходимо задать значение NULL или JET_instanceNil. Этот экземпляр можно передать в любую другую функцию, использующую экземпляр. Если ядро работает в режиме с несколькими экземплярами, этот параметр должен быть установлен в допустимый входной буфер, содержащий экземпляр, возвращенный экземпляром функции [жеткреатеинстанце](./jetcreateinstance-function.md) , который инициализируется.


#### <a name="remarks"></a>Комментарии

Экземпляр должен быть инициализирован с помощью вызова **жетинит** , прежде чем он сможет использоваться любым другим, кроме [жетсетсистемпараметер](./jetsetsystemparameter-function.md).

Экземпляр уничтожается вызовом функции [жеттерм](./jetterm-function.md) , даже если этот экземпляр никогда не был инициализирован с помощью **жетинит**. Экземпляр — это единица восстановления для ядра СУБД. Он управляет жизненным циклом всех файлов, используемых для защиты целостности данных в наборе файлов базы данных. Эти файлы включают файл контрольных точек и файлы журнала транзакций.

Максимальное число экземпляров, которые могут быть созданы за один раз, контролируется [JET_paramMaxInstances](./resource-parameters.md), который можно настроить с помощью вызова [жетсетсистемпараметер](./jetsetsystemparameter-function.md). Когда ядро СУБД инициализируется в первый раз, **жетинит** создаст начальный набор файлов для поддержки этого экземпляра. Эти файлы содержат файл контрольных точек (с именем \<[JET_paramBaseName](./transaction-log-parameters.md)\> . CHK) — набор зарезервированных файлов журнала транзакций (с именем RES1. LOG и RES2. LOG) — исходный файл журнала транзакций (с именем \<[JET_paramBaseName](./transaction-log-parameters.md)\> . LOG) и временный файл базы данных (с именем в соответствии с [JET_paramTempPath](./temporary-database-parameters.md)). Если [JET_paramRecovery](./transaction-log-parameters.md) имеет значение OFF, файл контрольных точек и файлы журнала создаваться не будут. Если [JET_paramMaxTemporaryTables](./temporary-database-parameters.md) имеет значение 0, то временный файл базы данных не будет создан. Эти файлы представляют место на диске экземпляра, и управление им должно осуществляться с осторожностью. Если эти файлы повреждены по отдельности или по отношению друг к другу, то данные, хранящиеся в базах данных, связанных с экземпляром, могут быть потеряны.

Когда ядро СУБД инициализируется с помощью существующего набора файлов журнала транзакций, эти файлы будут проверены, чтобы узнать, не завершилось ли предыдущее воплощение экземпляра со сбоями. При обнаружении сбоя будет автоматически выполнено восстановление после сбоя. Этот процесс приведет к восстановлению баз данных, присоединенных к экземпляру, во время предыдущего создания подсистемы и сохранения изменений в файлах базы данных. Результатом будут базы данных с одинаковыми транзакциями. Этот процесс может занять довольно много времени, если количество файлов журнала транзакций, воспроизводимых с базами данных, велико.

Из-за того, что **жетинит** выполняет восстановление после сбоя, в случае сбоя может возвращаться почти любая ошибка ядра СУБД. На практике большинство ошибок, возникающих при развертывании, делятся на две категории: повреждение данных и неудачное Управление файлами. Повреждение данных будет очень часто переявляться в следующих или похожих ошибках:

  - JET_errReadVerifyFailure

  - JET_errLogFileCorrupt

  - JET_errCheckpointCorrupt

Эти ошибки почти всегда вызываются аппаратными проблемами, поэтому их нельзя избежать. Необычное Управление файлами сама по себе будет переявляться в следующих или похожих ошибках:

  - JET_errMissingLogFile

  - JET_errAttachedDatabaseMismatch

  - JET_errDatabaseSharingViolation

  - JET_errInvalidLogSequence

Если восстановление выполняется на наборе журналов, для которых не все базы данных (возвращающие ошибку JET_errAttachedDatabaseMismatch при нормальных обстоятельствах), и клиент желает восстановиться, несмотря на отсутствующие базы данных, можно использовать JET_ Битреплайигноремиссингдб для продолжения восстановления доступных баз данных. Эти ошибки предотвращаются приложением. Приложение должно быть аккуратным, чтобы защитить репозиторий этих файлов от манипуляции извне, такими как пользователь или другие приложения. Если приложение должно полностью уничтожить экземпляр, необходимо удалить все файлы, связанные с этим экземпляром. К ним относятся файл контрольных точек, файлы журнала транзакций и все файлы базы данных, присоединенные к экземпляру.

Функция **жетинит** ведет себя по-разному, в отношении файлов базы данных, присоединенных к экземпляру, между Windows 2000 и более поздними версиями.

**Windows 2000:**  В Windows 2000 любая база данных, присоединенная к экземпляру во время предыдущего создания этого экземпляра, остается прикрепленной к экземпляру после успешного завершения **жетинит** . Необязательно вызывать [жетаттачдатабасе](./jetattachdatabase-function.md) после **жетинит** , чтобы получить доступ к базе данных в дальнейшем. Если функция [жетаттачдатабасе](./jetattachdatabase-function.md) вызывается после функции **жетинит** , будет возвращено предупреждение JET_wrnDatabaseAttached. Это предупреждение означает, что вложение базы данных сохранено и может быть проигнорировано.

**Windows XP:**  В Windows XP и более поздних версиях все базы данных автоматически отсоединяются от экземпляра с помощью **жетинит**. Это означает, что в данном случае [жетаттачдатабасе](./jetattachdatabase-function.md) всегда должен вызываться после **жетинит** .

Любое приложение, написанное для запуска в Windows 2000 и последующих выпусках, должно всегда вызывать [жетаттачдатабасе](./jetattachdatabase-function.md) после **жетинит**. Если приложение выполняется в Windows 2000, в некоторых случаях должно появиться JET_wrnDatabaseAttached. Дополнительные сведения см. в разделе [жетаттачдатабасе](./jetattachdatabase-function.md) .

#### <a name="requirements"></a>Требования

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p><strong>Клиент</strong></p></td>
<td><p>Требуется Windows Vista, Windows XP или Windows 2000 Professional.</p></td>
</tr>
<tr class="even">
<td><p><strong>Server</strong></p></td>
<td><p>Требуется Windows Server 2008, Windows Server 2003 или Windows 2000 Server.</p></td>
</tr>
<tr class="odd">
<td><p><strong>Header</strong></p></td>
<td><p>Объявлено в ESENT. h.</p></td>
</tr>
<tr class="even">
<td><p><strong>Библиотека</strong></p></td>
<td><p>Используйте ESENT. lib.</p></td>
</tr>
<tr class="odd">
<td><p><strong>КОМПОНОВКИ</strong></p></td>
<td><p>Требуется ESENT.dll.</p></td>
</tr>
</tbody>
</table>


#### <a name="see-also"></a>См. также:

[Расширяемые файлы подсистемы хранилища](./extensible-storage-engine-files.md)  
[JET_ERR](./jet-err.md)  
[JET_GRBIT](./jet-grbit.md)  
[JET_INSTANCE](./jet-instance.md)  
[JET_paramMaxTemporaryTables](./temporary-database-parameters.md)  
[JET_paramRecovery](./transaction-log-parameters.md)  
[жетаттачдатабасе](./jetattachdatabase-function.md)  
[жеткреатеинстанце](./jetcreateinstance-function.md)  
[JetInit3](./jetinit3-function.md)  
[жетсетсистемпараметер](./jetsetsystemparameter-function.md)
