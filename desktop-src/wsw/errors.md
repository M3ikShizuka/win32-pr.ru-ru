---
title: Ошибки
description: в этом разделе описываются ошибки, которые могут быть вызваны Windowsными функциями веб-служб в результате сбоя выполнения команды.
ms.assetid: 2e5b853f-589c-4f89-9d7e-cd02263a2247
keywords:
- Ошибки веб-служб для Windows
- ввсапи
- WWS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4a08a6371dcc5265239c6a25ce0c01075cff3ae12533862ed8a1cbbbe7aba705
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119026532"
---
# <a name="errors"></a>Ошибки

в этом разделе описываются ошибки, которые могут быть вызваны Windowsными функциями веб-служб в результате сбоя выполнения команды.

-   [Выходные параметры](#out-parameters)
-   [Код ошибки](#error-codes)
-   [Подробные ошибки](#rich-errors)
-   [Сбои и ошибки](#faults-and-errors)
-   [Сведения об ошибке, зависящие от языка](#language-sensitive-error-information)
-   [Канонические коды ошибок](#canonical-error-codes)
-   [Недопустимое использование API](#invalid-api-usage)
-   [Безопасность](#security)

## <a name="out-parameters"></a>Выходные параметры

Как правило, значения параметров out не изменяются при сбое функции.

Существует несколько экземпляров, в которых параметры out изменяются в случае сбоя функции. Эти случаи явно вызываются в документации по каждому параметру. Если в документации не упоминается ничего об изменении параметров out в случае сбоя, можно спокойно предположить, что функция не будет изменять их.

## <a name="error-codes"></a>Коды ошибок

Все коды возврата ошибок — HRESULTs. этот API определяет набор значений hresult в \_ диапазоне служебных служб, но также возвращает ошибки, определенные в других местах Windows API.

Сведения о том, какие коды ошибок возвращаются, см. в документации по конкретным API. Список не должен быть исчерпывающим для каждого API, а представляет собой список кодов ошибок, для которых существуют распространенные сценарии для явной обработки. Вызывающий объект всегда должен предположить, что другие коды ошибок возможны из любого API.

Этот API определяет относительно небольшое количество кодов ошибок, соответствующих сценариям, в которых программа будет предпринимать действия в зависимости от ошибки. Только коды ошибок могут быть недостаточными для определения того, что пошло не так, или для предоставления хорошего описания проблемы пользователю. Лучшее понимание проблемы состоит в использовании обширных ошибок, как описано ниже.

## <a name="rich-errors"></a>Подробные ошибки

Кроме того, чтобы возвратить код ошибки, вызывающий объект может дополнительно запросить подробные сведения об ошибке для любого вызова API, передав объект [ \_ ошибки WS](ws-error.md) , отличный от **null**. Чтобы создать объект Error, используйте [**вскреатиррор**](/windows/desktop/api/WebServices/nf-webservices-wscreateerror). При возникновении ошибки API-интерфейс, вызвавший ошибку, будет заполнять объект ошибки дополнительным контекстом об ошибке. Если ошибка отсутствует, объект Error не изменяется. Передача объекта ошибки **null** означает, что вызывающему объекту не нужны подробные сведения об ошибке. Вызываемые (включая обратные вызовы) должен быть готов к обработке объектов ошибок **null** .

Обратите внимание, что один и тот же объект Error может использоваться для нескольких вызовов API, но может использоваться только для одного вызова API за раз (как это происходит в одном потоке). При каждом возникновении ошибки сведения об ошибке добавляются к объекту Error. При очистке цепочки вызовов несколько функций могут добавлять сведения в объект Error, чтобы предоставить дополнительный контекст об ошибке. Чтобы очистить содержимое объекта Error перед его повторным использованием (после возникновения ошибки), используйте [**всресетеррор**](/windows/desktop/api/WebServices/nf-webservices-wsreseterror). Если ошибка не возникает, не нужно сбрасывать объект Error перед его повторным использованием.

Подробные сведения об ошибке состоят из следующих компонентов:

-   Набор значений свойств, которые предоставляют дополнительные сведения об ошибке, если она есть. См. раздел [**\_ \_ свойства ошибки WS**](/windows/desktop/api/WebServices/ns-webservices-ws_error_property).
-   Ноль или более строк ошибок. Строки добавляются с помощью [**всаддеррорстринг**](/windows/desktop/api/WebServices/nf-webservices-wsadderrorstring), и их можно запрашивать с помощью [**всжетеррорстринг**](/windows/desktop/api/WebServices/nf-webservices-wsgeterrorstring). Количество строк можно запросить с помощью [**\_ строки свойства WS Error \_ \_ \_ Count**](/windows/desktop/api/WebServices/ne-webservices-ws_error_property_id).

## <a name="faults-and-errors"></a>Сбои и ошибки

Сведения о том, как связаны ошибки и сбои, см. в разделе [ошибки](faults.md) .

## <a name="language-sensitive-error-information"></a>Сведения об ошибке, зависящие от языка

При создании объекта Error задается LANGID требуемого перевода языка для сведений об ошибке. Используется при добавлении сведений об ошибке в объект Error.

Это значение языка можно получить или задать с помощью [**\_ Свойства WS \_ Error \_ LangID**](/windows/desktop/api/WebServices/ne-webservices-ws_error_property_id).

## <a name="canonical-error-codes"></a>Канонические коды ошибок

Этот API предоставляет канонический набор кодов ошибок (WS \_ E \_ \* ), которые позволяют использовать различные коммуникационные технологии без необходимости зависеть от конкретных кодов ошибок конкретной базовой реализации. полный список этих кодов ошибок см. в разделе [Windows возвращаемые значения веб-служб](windows-web-services-return-values.md).

Это позволяет, например, программе проверять наличие кода ошибки **WS \_ E, \_ \_ не \_ найден** ли он при использовании TCP, UDP или HTTP, и предпринимать какие-либо действия (например, пытаться использовать другую конечную точку).

Если код ошибки конкретной реализации сопоставлен с канонической ошибкой, исходный код ошибки сохраняется в объекте Error и по-прежнему может быть доступен в целях диагностики. Дополнительные сведения см. в разделе [**\_ свойство ошибки WS Error \_ \_ \_ \_ Code Error**](/windows/desktop/api/WebServices/ne-webservices-ws_error_property_id) .

## <a name="invalid-api-usage"></a>Недопустимое использование API

Следующие коды ошибок зарезервированы для недопустимого использования API и не будут возвращаться в других обстоятельствах. Если любая из этих ошибок возвращена, это может указывать на ошибку приложения.

-   **\_ \_ Недопустимая операция WS E \_**
-   **E \_ INVALIDARG**

Следующие перечисления являются частью трассировки:

-   [**\_ \_ идентификатор свойства ошибки \_ WS**](/windows/desktop/api/WebServices/ne-webservices-ws_error_property_id)
-   [**\_код исключения \_ WS**](/windows/desktop/api/WebServices/ne-webservices-ws_exception_code)

Следующие коды ошибок являются частью трассировки:

-   **СЕРТИФИКАТ \_ E \_ CN \_ без \_ совпадения**
-   **\_ \_ истек срок действия сертификата E**
-   **CERT \_ E \_ унтрустедрут**
-   **\_ \_ неправильное \_ Использование CERT E**
-   **дешифрование \_ \_ отзыва в \_ автономном режиме**
-   **E \_ INVALIDARG**
-   **E \_ OUTOFMEMORY**
-   **\_ \_ используемый адрес WS \_ E \_**
-   **\_адрес WS \_ E \_ \_ недоступен**
-   **\_ \_ \_ отказано в доступе к конечной точке WS E \_**
-   **\_ \_ действие КОНЕЧНОЙ точки WS E \_ \_ не \_ поддерживается**
-   **\_ \_ Конечная точка WS E \_ отключена**
-   **\_ \_ сбой КОНЕЧНОЙ точки WS E \_**
-   **\_ \_ получена ошибка КОНЕЧНОЙ точки WS E \_ \_**
-   **\_ \_ Конечная точка WS E \_ \_ недоступна**
-   **\_ \_ Конечная точка WS E \_ не \_ найдена**
-   **\_ \_ Конечная точка WS E \_ слишком \_ занята**
-   **\_ \_ Конечная точка WS E \_ недоступна**
-   **\_ \_ Недопустимый \_ \_ URL-адрес конечной точки WS E**
-   **\_ \_ Недопустимый \_ Формат WS E**
-   **\_ \_ Недопустимая операция WS E \_**
-   **WS \_ E \_ не \_ поддерживается**
-   **\_ \_ нет \_ доступных переводов WS E \_**
-   **\_ \_ переполнение числового значения WS E \_**
-   **\_ \_ сбой объекта WS \_ E**
-   **\_Операция WS \_ E \_ прервана**
-   **\_Операция WS \_ E \_ прервана**
-   **\_ \_ \_ время \_ ожидания операции WS E истекло**
-   **Прочие службы WS \_ \_**
-   **\_ \_ \_ отказано в доступе к прокси-серверу WS E \_**
-   **\_ \_ Сбой прокси-сервера WS E \_**
-   **для \_ \_ прокси-сервера WS E \_ требуется \_ Обычная \_ Проверка подлинности**
-   **для \_ \_ прокси-сервера WS E \_ требуется \_ Краткая \_ Проверка подлинности**
-   **для \_ \_ прокси-сервера WS E \_ требуется \_ \_ Проверка подлинности согласования**
-   **для \_ \_ прокси-сервера WS E \_ требуется \_ \_ Проверка подлинности NTLM**
-   **\_ \_ превышена квота WS E \_**
-   **\_ \_ \_ сбой системы безопасности WS \_ E**
-   **\_ \_ \_ истек срок действия токена безопасности WS E \_**
-   **\_ \_ \_ сбой проверки безопасности WS \_ E**
-   **для \_ сервера WS E \_ \_ требуется \_ Обычная \_ Проверка подлинности**
-   **для \_ сервера WS E \_ \_ требуется \_ дайджест- \_ Проверка подлинности**
-   **\_сервер WS \_ E \_ требует \_ \_ проверки подлинности согласования**
-   **для \_ сервера WS E \_ \_ требуется \_ \_ Проверка подлинности NTLM**
-   **WS \_ S — \_ асинхронный**
-   **\_конец WS S \_**

Следующие функции являются частью трассировки:

-   [**\_ \_ идентификатор свойства ошибки \_ WS**](/windows/desktop/api/WebServices/ne-webservices-ws_error_property_id)
-   [**\_код исключения \_ WS**](/windows/desktop/api/WebServices/ne-webservices-ws_exception_code)

В трассировку входит следующий маркер:

-   [\_Ошибка WS](ws-error.md)

Следующая структура является частью трассировки:

-   [**WS \_ Error, \_ свойство**](/windows/desktop/api/WebServices/ns-webservices-ws_error_property)

## <a name="security"></a>Безопасность

Существует ряд вопросов безопасности, которые следует учитывать пользователю объекта Error.

-   Объект Error может содержать ненадежные данные. Примеры: ошибки WS \_ и строки ошибок, которые могут храниться в объекте Error на основе данных, полученных по ненадежному каналу. При проверке сведений в объекте Error и принятии решений на основе его значений необходимо соблюдать осторожность.
-   Пользователь объекта Error должен вызвать [**всресетеррор**](/windows/desktop/api/WebServices/nf-webservices-wsreseterror) после проверки сведений об ошибке. Если этого не сделать, это может привести к накоплению памяти.
-   Пользователь объекта ошибки должен быть очень осторожным при использовании \_ значения перекрытия "WS Full" \_ \_ в перечислении ошибок [**WS \_ \_**](/windows/desktop/api/WebServices/ne-webservices-ws_fault_disclosure) , поскольку сформированная ошибка может содержать частные сведения, накопленные в ходе процесса записи ошибок.

 

 




