---
title: Средство компилятора веб-служб
description: Для поддержки модели службы wsutil.exe создает заголовок для использования на стороне клиента и службы. Он создает прокси-файл C для стороны клиента и файл заглушки C для службы, если это необходимо.
ms.assetid: 1c73297d-0d3d-421c-9e19-44a6012a5c65
keywords:
- Веб-службы средства компилятора веб-службы для Windows
- ввсапи
- WWS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6789b9e2b6e38d89e422adc363326656b8f693e2
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127458878"
---
# <a name="web-service-compiler-tool"></a>Средство компилятора веб-служб

Для поддержки модели службы wsutil.exe создает заголовок для использования на стороне клиента и службы. Он создает прокси-файл C для стороны клиента и файл заглушки C для службы, если это необходимо.


Для поддержки [сериализации](serialization.md)компилятор создает заголовки для описаний элементов для определений глобальных элементов и все сведения об определении типа в прокси-файле, используемые ядром сериализации.

Использование

**WsUtil.exe \[ Параметры командной строки, \[ Переключатели \] : \] &lt; имя файла&gt;**

параметры командной строки

Указывает WsUtil.exe параметров компилятора. Параметры могут использоваться в любом порядке. Тире ("-") и косая черта ("/") считаются одинаковыми.

Список параметров командной строки

-   @filename Указывает, что входной файл должен обрабатываться как файл ответов. Этот параметр можно использовать несколько раз в любом месте списка аргументов.
-   /всдл: &lt; filename &gt; : <необязательный \_ url-адрес> указывает, что входной файл должен обрабатываться как WSDL-файл. Допускается использование нескольких входных данных WSDL и обработка всех указанных WSDL-файлов. Необязательный \_ URL-адрес указывает расположение, из которого были получены метаданные. Если необязательный \_ URL-адрес не указан, всутил внутренним образом создает уникальный URL-адрес. См. также [Поддержка политик](policy-support.md).
-   /КССД: &lt; filename &gt; указывает, что входное имя файла должно рассматриваться как файл схемы. Разрешено несколько входных XSD-файлов, и все указанные файлы схемы обрабатываются.
-   /ВСП: &lt; filename &gt; : <необязательный \_ url-адрес> указывает, что входное имя файла должно рассматриваться как метаданные политики. Разрешено несколько входных файлов WSP, и все указанные файлы политики обрабатываются. Необязательный \_ URL-адрес указывает расположение, из которого были получены метаданные. Если необязательный \_ URL-адрес не указан, всутил внутренним образом создает уникальный URL-адрес. Файлы политики игнорируются, если указан флаг/нополици. См. также [Поддержка политик](policy-support.md).
-   /нополици отключить обработку политики.
-   /out: &lt; dirname &gt; указывает имя каталога для выходных файлов
-   /ноклиент не создают заглушку на стороне клиента.
-   /noservice не создают заглушку на стороне службы.
-   /префикс: &lt; строка &gt; , в начале которой указана строка для всех созданных идентификаторов.
-   /фуллнаме в начале нормализованного имени файла для созданных идентификаторов. По умолчанию только имя, указанное в атрибуте "Name", будет использоваться для создания идентификаторов для связанных описаний.
-   /стринг: <WS \_ string>\|<WCHAR \*> по умолчанию всутил создает WCHAR \* для XSD: String Type. Приложение может использовать этот флаг для перезаписи этого поведения и создает строку WS \_ для XSD: Type.
-   /help Отображение справочного сообщения
-   /? То же, что и/Help
-   Параметры обработки ошибок/w: x. Может быть W:0-W: 4 \| WX
-   /nologo не создают сведения о компиляторе для вывода на консоль.
-   /ностамп не создают специфические для компилятора сведения о созданных файлах.

По умолчанию компилятор создает следующие файлы для WSDL-файла или WSDL, возвращаемые из обмена метаданными:

-   Прокси клиента ({inputfilename}. c)
-   Заглушка службы ({inputfilename}. c)
-   Заголовочный файл ({inputfilename}. h)

    Корневым элементом созданного имени файла является имя входного файла. Исходные расширения входных файлов сохраняются, чтобы предотвратить конфликт имен файлов для создаваемых файлов. По умолчанию клиент и заглушки службы создаются в одном файле с кодом заглушки службы, созданным после кода прокси-сервера.

    По умолчанию компилятор создает следующие файлы для XSD-файла для схемы, возвращаемой из обмена метаданными:

-   описания сериализации ({inputfilename}. c)
-   Заголовочный файл ({inputfilename}. h)

    Корневым именем файла является имя службы.

Wsutil.exe создает раздел "метка" в начале всех созданных файлов, указывая параметр компилятора, версию средства, параметр командной строки и т. д. Этот раздел можно отключить с помощью параметра/ностамп, чтобы избежать шума при сравнении созданных файлов.

Всутил не поддерживает скачивание метаданных

Компилятор всутил работает только из локального файла метаданных. Средство не поддерживает скачивание метаданных из работающих веб-служб. Разработчики могут использовать другие поддерживаемые средства WebService, такие как Svcutil, для загрузки метаданных на локальный компьютер, проверки сохраненных файлов и передачи этих файлов в wsutil.exe для компиляции.

Поддержка нескольких входных и выходных файлов

WSDL и схема XML позволяют включать и импортировать определения из других пространств имен, указанных в других расположениях и файлах. Всутил поддерживает несколько входных данных схемы/WSDL/Policy и создают один набор заглушек или заголовка для каждого входного файла. Всутил не соответствует инструкциям include и Import. Вместо этого приложение должно передавать файлы, содержащие все необходимые пространства имен, всутил таким, что средство может разрешать все зависимости во время компиляции.

**WsUtil.exe/КССД: стокккуоте. xsd/всдл: стокккуоте. WSDL/всдл: stockquoteservice. WSDL**

всутил создает три набора выходных файлов:

-   стокккуоте. xsd. c стокккуоте. xsd. h
-   стокккуоте. WSDL. c стокккуоте. WSDL. h
-   stockquoteservice. WSDL. h стокккуотесервицес. WSDL. c

Формат выходных файлов

Для каждого выходного файла всутил создает внешние доступные определения в файле заголовка. В отличие от определений структуры C и прототипов функций-заглушек, все остальные определения, связанные с Web Services, инкапсулируются в глобальной структуре с нормализованным именем файла.

``` syntax
typedef struct _stockquote_wsdl {
  struct {
  ... // list of WS_STRUCT_DESCRIPTION for all global complex types.
  } globalTypes;
  struct {
  ... // WS_ELEMENT_DESCRIPTION for all global elements.
  } globalElements;
  struct {
  ...
  } messages;
  struct {
  ...
  } contracts;
} _stockquote_wsdl;

EXTERN_C _stockquote_wsdl stockquote_wsdl;
```

Обратите внимание, что для глобальной структуры созданы не все поля. Поле верхнего уровня создается только в том случае, если связанные определения указаны во входном файле. Например, для XSD-файлов не создаются поля Message, Operations и Contracts.

Уровни предупреждений и уровень ошибок

Как и компилятор C, WsUtil.exe поддерживает четыре уровня предупреждений и один уровень ошибки:

-   WsUtil.exe создает ошибки с неустранимыми сбоями, такими как недопустимый WSDL-файл, недопустимые параметры компилятора и т. д.
-   Всутил создает предупреждения W1 с серьезными устранимыми проблемами. Компилятор может продолжить работать, но пользователь должен знать о возникшей ошибке. Например, предупреждение W1 будет создано при наличии неподдерживаемых атрибутов, например некоторых аспектов WSDL, в WSDL, которые не влияют на создание кода.
-   Всутил создает предупреждения W2 с менее серьезными проблемами. Нет потерь функциональности, но разработчику приложения может быть необходимо иметь представление о том, что. Подобно поведениям, которые могут отличаться от других платформ.
-   Всутил создает предупреждения W3 с минимальным влиянием на созданный код. Например, wsutil.exe создает предупреждение W3, если Нормализованная строка отличается от исходной строки.
-   Предупреждение W4 больше похоже на "информационные" предупреждения, а Всутил выдает ошибку W4 в таких случаях, как пропуск атрибута документации в WSDL.
-   WX указывает компилятору обрабатывать предупреждение как ошибку. Например, всутил создает ошибку для всех предупреждений W1, если указан параметр/W: 1/WX.

/W: {N} укажите, какой уровень предупреждений должен создаваться. /W: 1 означает, что должны быть созданы предупреждения уровня 1 предупреждения, а предупреждения уровня предупреждения 2 и ниже должны быть маскированы и не созданы средством.

## <a name="fullname"></a>/фуллнаме

Этот параметр указывает, что WsUtil.exe создает полное имя для идентификаторов, чтобы избежать потенциальных конфликтов имен. Например, в примере. XSD есть:

``` syntax
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://Example.org" 
xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" targetNamespace="http://Example.org" 
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
 <wsdl:types>
  <xs:element name="SimpleStruct">
   <xs:complexType>
    <xs:sequence>
     <xs:element name="a" type="xs:int" />
     <xs:element name="b" type="xs:int" />
    </xs:sequence>
   </xs:complexType>
  </xs:element>
 </wsdl:types>
</wsdl:definitions>
```

По умолчанию WsUtil.exe создает:

``` syntax
typedef struct SimpleStruct {
  int a;
  int b;
};
```

Но если указан параметр командной строки/фуллнаме, вместо этого WsUtil.exe создает следующее определение структуры:

``` syntax
typedef struct exmaple_xsd_SimpleStruct {
  int a;
  int b;
};
```

## <a name="globalization"></a>Глобализация

Средство не зависит от языка и может быть локализовано на разные языки. Все сообщения об ошибках и выходные данные консоли могут быть локализованы. Однако параметры командной строки остаются на английском языке.

## <a name="environment-variable"></a>Переменная среды

WsUtil.exe не использует переменные среды.

## <a name="platform-independent"></a>Не зависит от платформы

Выходные файлы от WsUtil.exe не зависят от платформы. Код, зависящий от архитектуры, не создается в заглушке. компилятор C позаботится обо всех конкретных архитектурах. Заглушку можно использовать на всех поддерживаемых платформах.

Описание выходных данных wsutil.exe можно найти в разделе [Поддержка WSDL](wsdl-support.md) и [поддержка схемы](schema-support.md) .

 

 




