---
description: Файл конфигурации приложения — это XML-файл, используемый для управления привязкой сборки.
ms.assetid: b7453f2b-52a4-4af9-8410-ebbb430ada67
title: Файлы конфигурации приложений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9b1a2e0f6b493c217aded9e11507f660d517b400
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104144527"
---
# <a name="application-configuration-files"></a>Файлы конфигурации приложений

Файл конфигурации приложения — это XML-файл, используемый для управления привязкой сборки. Он может перенаправлять приложение с помощью одной версии параллельной сборки в другую версию той же сборки. Это называется [конфигурацией для каждого приложения](per-application-configuration.md). Файл конфигурации приложения применяется только к конкретному манифесту приложения и зависимым сборкам. Изолированным компонентам, компилируемым с помощью внедренного \_ манифеста ресурса манифеста исолатионаваре, \_ \_ требуется отдельный файл конфигурации приложения. Для манифестов, управляемых с помощью [**креатеакткткс**](/windows/desktop/api/Winbase/nf-winbase-createactctxa) , требуется отдельный файл конфигурации приложения.

Перенаправление, заданное в файле конфигурации приложения, может переопределять версии сборок, заданные [манифестами приложений](application-manifests.md) и [файлами конфигурации издателя](publisher-configuration-files.md). Например, если файл конфигурации издателя указывает, что все ссылки на сборку будут перенаправлены с версии 1.0.0.0 на 1.1.0.0, файл конфигурации приложения можно использовать для перенаправления конкретного приложения для использования версии 1.0.0.0. Файл конфигурации приложения применяется только к указанному манифесту приложения и зависимым сборкам.

Полный список схем XML см. в разделе [Схема файла конфигурации приложения](application-configuration-file-schema.md).

Файлы конфигурации приложения содержат элементы и атрибуты, приведенные в следующей таблице.



| Элемент               | Атрибуты                | Обязательно |
|-----------------------|---------------------------|----------|
| **Конфигурация**     |                           | Да      |
| **windows**           |                           | Да      |
| **Publisherpolicy Apply**   |                           | Да      |
|                       | **касаться**                 | Да      |
| **Среда выполнения**           |                           | Нет       |
| **assemblyBinding**   |                           | Да      |
| **проверки**           |                           | Нет       |
|                       | **privatePath**           | Да      |
| **зависимостей**        |                           | Нет       |
| **dependentAssembly** |                           | Да      |
| **Неправильн**  |                           | Да      |
|                       | **type**                  | Да      |
|                       | **name**                  | Да      |
|                       | **language**              | Нет       |
|                       | **processorArchitecture** | Да      |
|                       | **version**               | Да      |
|                       | **publicKeyToken**        | Нет       |
| **bindingRedirect**   |                           | Да      |
|                       | **oldVersion**            | Да      |
|                       | **newVersion**            | Да      |



 

## <a name="file-location"></a>Расположение файла

Файлы конфигурации приложения должны быть установлены в том же расположении, что и [манифест приложения](application-manifests.md)приложения.

## <a name="file-name-syntax"></a>Синтаксис имени файла

Имя файла конфигурации приложения — это имя исполняемого объекта приложения, за которым следует файл config.

Например, файл конфигурации приложения, который ссылается на Example.exe или Example.dll, будет использовать синтаксис имени файла, как показано в следующем примере. Можно опустить поле для <*идентификатор ресурса*> если установка файла конфигурации выполняется в отдельном файле или если идентификатор ресурса равен 1.

**example.exe. <*Resource id* # C1.config**

**example.dll. <*Resource id* # C1.config**

## <a name="elements"></a>Элементы

В именах элементов и атрибутов учитывается регистр. Значения элементов и атрибутов не учитывают регистр, за исключением значения атрибута Type.

<span id="configuration"></span><span id="CONFIGURATION"></span>

### <a name="configuration"></a>настройка

Элемент-контейнер для элементов **Windows** и **среды выполнения** файла конфигурации приложения. Обязательный.

<span id="windows"></span><span id="WINDOWS"></span>

### <a name="windows"></a>Windows

Включает части файла конфигурации приложения, применимые к перенаправлению сборок Win32.

> [!Note]  
> Автор приложения не должен включать файл конфигурации с подэлементом **Windows** в составе своего приложения. Это может быть разрешено, если только файл конфигурации предназначен только для включения функции **privatePath** элемента **зондирования** . Элемент **зондирования** недоступен в системах, предшествующих windows Server 2008 R2 и Windows 7.

<span id="publisherPolicy"></span><span id="publisherpolicy"></span><span id="PUBLISHERPOLICY"></span>

### <a name="publisherpolicy"></a>Publisherpolicy Apply

Указывает, следует ли применять политику издателя.

Этот элемент содержит атрибуты, приведенные в следующей таблице.



| attribute | Описание                                                                                                                     |
|-----------|---------------------------------------------------------------------------------------------------------------------------------|
| **касаться** | Значение "Да" применяет политику издателя. Это параметр по умолчанию. Значение No не применяется к политике издателя. |

<span id="runtime"></span><span id="RUNTIME"></span>

### <a name="runtime"></a>исполняющая среда

Включает части файла конфигурации приложения, которые применяются для перенаправления сборок .NET.

<span id="assemblyBinding"></span><span id="assemblybinding"></span><span id="ASSEMBLYBINDING"></span>

### <a name="assemblybinding"></a>assemblyBinding

Включает сведения о перенаправлении для приложения и сборки, затронутые этим файлом конфигурации приложения. Первым подэлементом **assemblyBinding** должен быть **assemblyIdentity** , идентифицирующий приложение.

Начиная с Windows Server 2008 R2 и Windows 7, элемент **assemblyBinding** может содержать вложенный элемент **зондирования** .

<span id="probing"></span><span id="PROBING"></span>

### <a name="probing"></a>проверки

Необязательный вложенный элемент элемента **assemblyBinding** , который расширяет возможности поиска сборок в дополнительных каталогах. Дополнительные каталоги не обязательно должны быть подкаталогами каталога сборки.

> [!Note]  
> Этот элемент недоступен в системах, предшествующих Windows Server 2008 R2 и Windows 7, и может использоваться только в пределах элемента **Windows** .

Этот элемент содержит атрибуты, приведенные в следующей таблице.

| attribute       | Описание                                                                                                                                                                                                                                   |
|-----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **privatePath** | Указывает [относительные пути к](/windows/desktop/FileIO/naming-a-file) подкаталогам базового каталога приложения, которые могут содержать сборки. Можно указать не более девяти путей подкаталогов. Разделяйте путь к подкаталогу точкой с запятой. |

Специальный описатель с двойными точками можно использовать в пути, чтобы обозначить родительский каталог текущего каталога. Можно указать не более двух уровней выше текущего каталога, используя двойные точки. Не используйте тройные точки. Например, приложение, использующее следующий элемент **зондирования** , проверяет дополнительные каталоги для сборки.

``` XML
<probing privatePath="bin;..\bin2\subbin;bin3"/>
```

<span id="dependency"></span><span id="DEPENDENCY"></span>

### <a name="dependency"></a>dependency
Элемент-контейнер по крайней мере для одного элемента **dependentAssembly**. Каждое **dependentAssembly** может находиться внутри только одной **зависимости**. Этот элемент не содержит атрибуты. Необязательный элемент.

<span id="dependentAssembly"></span><span id="dependentassembly"></span><span id="DEPENDENTASSEMBLY"></span>

### <a name="dependentassembly"></a>dependentAssembly

Первый подэлемент должен быть элементом **assemblyIdentity** , идентифицирующим параллельную сборку, которая перенаправляется файлом конфигурации приложения. У **dependentAssembly** нет атрибутов.

<span id="assemblyIdentity"></span><span id="assemblyidentity"></span><span id="ASSEMBLYIDENTITY"></span>

### <a name="assemblyidentity"></a>assemblyIdentity

Как первый подэлемент элемента **assemblyBinding** , **assemblyIdentity** описывает и уникально идентифицирует приложение. Файл конфигурации приложения перенаправляет привязку этого приложения на параллельные сборки. Например, следующий **assemblyIdentity** означает, что файл конфигурации приложения влияет на привязку приложения мисамплеапп к параллельным сборкам. Перенаправляемые сборки будут идентифицированы в **dependentAssembly**.

``` XML
<assemblyIdentity processorArchitecture="X86" name="Microsoft.Windows.mysampleApp" type="win32" version="1.0.0.0"/>
```

Как первый подэлемент элемента **dependentAssembly** , **assemblyIdentity** описывает параллельную сборку, от которой зависит приложение. Файл конфигурации приложения перестраивает удостоверение этой требуемой сборки. Например, следующие **assemblyIdentity** и **bindingRedirect** перестраивают зависимость от Microsoft. Windows. самплеассембли с версии 2.0.0.0 до версии 2.1.0.0.

``` XML
<dependency>
      <dependentAssembly>
         <assemblyIdentity type="win32"
          name="Microsoft.Windows.SampleAssembly"
          processorArchitecture="x86"
          publicKeyToken="0000000000000000"/>
         <bindingRedirect oldVersion="2.0.0.0" newVersion="2.1.0.0"/>
      </dependentAssembly>
</dependency>
```

Обратите внимание, что каждый **assemblyIdentity** , входящий в **dependentAssembly** , должен точно соответствовать **assemblyIdentity** в [манифесте сборки](assembly-manifests.md)сборки.

Элемент **assemblyIdentity** имеет следующие атрибуты. У него нет вложенных элементов.

| attribute                 | Описание                                                                                                                                                                                                                                                                                                          |
|---------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **type**                  | Значение должно быть в виде Win32 (строчное). Обязательный.                                                                                                                                                                                                                                                                      |
| **name**                  | Атрибут Name определяет приложение, на которое влияет файл конфигурации приложения или перенаправляемая сборка. Используйте следующий формат для имени: Organization.Division.Name. Обязательный. Например: Microsoft. Windows. Мисамплеапп или Microsoft. Windows. Мисамплеасм.<br/>            |
| **language**              | Определяет язык. Необязательный элемент. Для **assemblyIdentity** , ссылающегося на сборку, если сборка зависит от конкретного языка, укажите код языка DHTML. Если сборка предназначена для использования в разных странах мира (не зависит от языка), задайте значение как " \* ".<br/>                                                            |
| **processorArchitecture** | Указывает процессор, на котором работает приложение.                                                                                                                                                                                                                                                                     |
| **version**               | Указывает версию приложения или сборки. Используйте синтаксис версии из четырех частей: MMMM. nnnn. УУ. пппп. Обязательный.                                                                                                                                                                                                   |
| **publicKeyToken**        | Для **assemblyIdentity** , ссылающегося на сборку, это 16-символьная шестнадцатеричная строка, представляющая последние 8 байт хэша SHA-1 открытого ключа, для которого подписана сборка. Открытый ключ, используемый для подписи каталога, должен иметь длину 2048 бит или более. Требуется для всех общих параллельных сборок. |

<span id="bindingRedirect"></span><span id="bindingredirect"></span><span id="BINDINGREDIRECT"></span>

### <a name="bindingredirect"></a>bindingRedirect

Элемент **bindingRedirect** содержит сведения о перенаправлении для привязки сборки. Каждая **bindingRedirect** должна быть включена в **ровно одно.** В синтаксисе версии из четырех частей новой версии и старой версии должны быть указаны одинаковые основные и дополнительные версии.

Этот элемент содержит атрибуты, приведенные в следующей таблице.

| attribute      | Описание                                                                                                                                                                                                                           |
|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **oldVersion** | Указывает версию сборки, переопределяемую и перенаправляемую. Используйте синтаксис nnnnn. nnnnn. nnnnn. nnnnn из четырех частей. Укажите диапазон версий на тире без пробелов. Например, 2.14.3.0 или 2.14.3.0 2.16.0.0. Обязательный. |
| **newVersion** | Указывает заменяющую версию сборки. Используйте синтаксис nnnnn. nnnnn. nnnnn. nnnnn из четырех частей.                                                                                                                                     |

## <a name="remarks"></a>Комментарии

Файлы конфигурации приложения не указывают файлы.

## <a name="example"></a>Пример

``` XML
<bindingRedirect oldVersion="1.0.0.0" newVersion="1.0.10.0"/>
<bindingRedirect oldVersion="1.0.50.2011-1.0.60.65535" newVersion="1.0.70.0"/>
```
