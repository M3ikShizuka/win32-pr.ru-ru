---
description: Средство настройки сертификатов служб Microsoft Windows HTTP (WinHTTP), &\# 0034; WinHttpCertCfg.exe&\# 0034;, позволяет администраторам устанавливать и настраивать сертификаты клиентов в любом хранилище сертификатов, доступ к которому может получить учетная запись диспетчера веб-приложений Internet Server Web (IWAM). Это средство также устраняет необходимость в специальных возможностях для учетных записей, таких как учетная запись IWAM, для получения доступа к сертификатам при использовании Active Server страниц (ASP).
ms.assetid: e4c2afc2-0fd3-4bdd-812e-f112958e1576
title: WinHttpCertCfg.exe, средство настройки сертификатов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c4250cd717b9f611f4f23f17c93069760c283c97
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104145154"
---
# <a name="winhttpcertcfgexe-a-certificate-configuration-tool"></a>WinHttpCertCfg.exe, средство настройки сертификатов

Средство настройки сертификатов [служб Microsoft Windows HTTP (WinHTTP)](about-winhttp.md) , "WinHttpCertCfg.exe", позволяет администраторам устанавливать и настраивать сертификаты клиентов в любом [*хранилище сертификатов*](glossary.md) , доступ к которому может получить учетная запись диспетчера веб-приложений (IWAM) Internet Server. Это средство также устраняет необходимость в специальных возможностях для учетных записей, таких как учетная запись IWAM, для получения доступа к сертификатам при использовании Active Server страниц (ASP).

Консоль управления Microsoft (MMC) позволяет администраторам импортировать сертификаты клиентов на локальный компьютер. Однако при импорте сертификата не предоставляется автоматически доступ к закрытому ключу для других учетных записей. Этот закрытый ключ необходим для проверки подлинности сертификата клиента. При необходимости средство настройки сертификатов служб Microsoft Windows HTTP (WinHTTP) предоставляет возможность предоставления доступа к дополнительным учетным записям, таким как учетная запись IWAM.

-   [Использование средства настройки сертификатов](#using-the-certificate-configuration-tool)
-   [Примеры](#examples)

## <a name="using-the-certificate-configuration-tool"></a>Использование средства настройки сертификатов

Средство настройки сертификатов WinHTTP, WinHttpCertCfg.exe, доступно для загрузки на веб-сайте [средств комплекта ресурсов Windows Server 2003](https://www.microsoft.com/downloads/details.aspx?familyid=9d467a69-57ff-4ae7-96ee-b18c4790cffd) . В следующем примере кода показаны допустимые параметры командной строки для использования с этим инструментом.

``` syntax
winhttpcertcfg [-?]
 
winhttpcertcfg [-i PFXFile | -g | -r | -l]
               [-a Account] [-c CertStore] 
               [-s SubjectStr] [-p PFXPassword]
```

В следующей таблице перечислены параметры для средства настройки.



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>-?</td>
<td>Отображает данные синтаксиса.</td>
</tr>
<tr class="even">
<td>-i</td>
<td>Указывает, что сертификат должен быть импортирован из файла обмена личной информацией (PFX). После этого параметра должно следовать имя файла. Если этот параметр задан, &quot; &quot; &quot; &quot; также необходимо указать параметр-a и-c.</td>
</tr>
<tr class="odd">
<td>-g</td>
<td>Указывает, что доступ предоставляется закрытому ключу. Если указан этот параметр, &quot; &quot; необходимо также указать параметры-a, &quot; -c &quot; и &quot; -s &quot; .</td>
</tr>
<tr class="even">
<td>-r</td>
<td>Указывает, что доступ к закрытому ключу удаляется. Если указан этот параметр, &quot; &quot; необходимо также указать параметры-a, &quot; -c &quot; и &quot; -s &quot; .</td>
</tr>
<tr class="odd">
<td>-l</td>
<td>Указывает, что указаны учетные записи с доступом к закрытому ключу. Если указан этот параметр, &quot; &quot; &quot; &quot; необходимо также указать параметр-c и-s.</td>
</tr>
<tr class="even">
<td>-a</td>
<td>Указывает учетную запись пользователя на настраиваемой машине. Это может быть локальный компьютер или учетная запись домена, например &quot; IWAM_TESTMACHINE &quot; , &quot; TESTUSER &quot; или &quot; тестдомаин\домаинусер &quot; .</td>
</tr>
<tr class="odd">
<td>-c</td>
<td>Указывает расположение и имя <a href="glossary.md"><em>хранилища сертификатов</em></a>. Используйте &quot; LOCAL_MACHINE &quot; или &quot; CURRENT_USER &quot; , чтобы указать, какую ветвь реестра следует использовать для расположения. <em>Хранилище сертификатов</em> может быть установлено на компьютере. Типичными примерами имен являются &quot; My &quot; , &quot; root &quot; и &quot; TrustedPeople &quot; . Расположение и имя <em>хранилища сертификатов</em> разделяются обратной косой чертой, например &quot; LOCAL_MACHINE \рут &quot; .
<blockquote>
[!Note]<br />
Несмотря на &quot; то &quot; , что с этим параметром можно указать CURRENT_USERную ветвь реестра, расширение доступа к закрытым ключам в основном предназначено для сертификатов, установленных в <a href="glossary.md"><em>хранилище сертификатов</em></a> на локальном компьютере, к которому могут обращаться несколько пользователей.
</blockquote>
<br/></td>
</tr>
<tr class="even">
<td>-S</td>
<td>Указывает строку поиска, не учитывающую регистр, для поиска первого перечисленного сертификата с именем субъекта, содержащим эту подстроку.</td>
</tr>
<tr class="odd">
<td>-p</td>
<td>Указывает пароль, используемый для импорта сертификата и закрытого ключа. Используется только с параметром импорта.</td>
</tr>
</tbody>
</table>



 

> [!NOTE]
> Пользователь должен иметь достаточные привилегии для использования этого средства, что требует, чтобы пользователь был администратором и тем же пользователем, который установил сертификат клиента, если он установлен.
>
> Средство "WinHttpCertCfg.exe" нецелесообразно для настройки сертификатов, хранящихся в файловой системе, например FAT32, которая не поддерживает списки управления доступом (ACL).

## <a name="examples"></a>Примеры

В следующих примерах показаны некоторые способы использования средства настройки.

1.  Эта команда перечисляет учетные записи, которые имеют доступ к закрытому ключу для сертификата "Мойсертификат" в корневом [*хранилище сертификатов*](glossary.md) \_ ветви локального компьютера в реестре.

    **Winhttpcertcfg-l-c \_ корневая машина \\ root-s мойсертификат**

2.  Эта команда предоставляет доступ к закрытому ключу сертификата "Мойсертификат" в [*хранилище сертификатов*](glossary.md) "My" для учетной записи TESTUSER.

    **Winhttpcertcfg-g-c локальный \_ компьютер \\ Мой-s мойсертификат-a TESTUSER**

3.  Эта команда импортирует сертификат и закрытый ключ из PFX-файла и расширяет доступ к закрытому ключу для другой учетной записи.

    **Winhttpcertcfg-i Пфксфиле-c локальный \_ компьютер \\ Мой-a IWAM \_ Тестмачине-p пфкспассворд**

4.  Эта команда запрещает доступ к закрытому ключу \_ учетной записи IWAM тестмачине с указанным сертификатом.

    **Winhttpcertcfg-r-c локальный \_ компьютер \\ root-s мойсертификат — a IWAM \_ тестмачине**

 

 




