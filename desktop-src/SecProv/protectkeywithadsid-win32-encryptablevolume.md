---
description: Защищает ключ шифрования тома с помощью идентификатора безопасности (SID) Active Directory.
ms.assetid: 881EEAF2-49C5-4BBD-B2AA-5E30B61E7D3A
title: Метод Протекткэйвисадсид класса Win32_EncryptableVolume
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- Win32_EncryptableVolume.ProtectKeyWithAdSid
api_type:
- COM
api_location:
- Root\CIMV2\Security\MicrosoftVolumeEncryption
ms.openlocfilehash: 0279a6edc8aaa275fdf75a855452d987de802d86
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105683921"
---
# <a name="protectkeywithadsid-method-of-the-win32_encryptablevolume-class"></a>Метод Протекткэйвисадсид \_ класса Win32 енкриптаблеволуме

Метод **протекткэйвисадсид** класса [**Win32 \_ енкриптаблеволуме**](win32-encryptablevolume.md) защищает ключ шифрования тома с помощью идентификатора безопасности Active Directory (SID).

## <a name="syntax"></a>Синтаксис


```mof
uint32 ProtectKeyWithAdSid(
  [in, optional] string FriendlyName,
  [in]           string SidString,
  [in]           uint32 Flags,
  [out]          string VolumeKeyProtectorID
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*FriendlyName* \[ в необязательное\]
</dt> <dd>

Строка, указывающая назначенный пользователем идентификатор для этого предохранителя ключа. Если этот параметр не указан, используется пустое значение.

</dd> <dt>

*Сидстринг* \[ окне\]
</dt> <dd>

Строка, содержащая идентификатор безопасности Active Directory, используемый для защиты ключа шифрования.

</dd> <dt>

*Флаги* \[ окне\]
</dt> <dd>

Флаги, изменяющие поведение функции. Это может быть одно из следующих значений.



| Значение                                                                                                                                                                                                                                                                                                                     | Значение                                                                                                                                                                                                                                                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="FVE_DPAPI_NG_FLAG_NONE"></span><span id="fve_dpapi_ng_flag_none"></span><dl> <dt>**ФВЕ \_ DPAPI \_ NG \_ флаг \_ None**</dt> <dt>Символ 0x0000</dt> </dl>                                                                   | Не влияет.<br/>                                                                                                                                                                                                                                                                                                                   |
| <span id="FVE_DPAPI_NG_FLAG_UNLOCK_AS_SERVICE_ACCOUNT"></span><span id="fve_dpapi_ng_flag_unlock_as_service_account"></span><dl> <dt>**ФВЕ \_ DPAPI \_ NG \_ флаг \_ разблокировки \_ в качестве \_ \_ учетной записи службы**</dt> <dt>0x0001</dt> </dl> | Указывает, что предохранитель на основе идентификатора безопасности был защищен учетной записью службы. Если этот флаг указан, вызывающий объект должен убедиться, что он работает как соответствующая учетная запись службы перед вызовом [**унлокквисадсид**](unlockwithadsid-win32-encryptablevolume.md) (например, временное удаление олицетворения).<br/> |



 

</dd> <dt>

*Волумекэйпротекторид* \[ заполняет\]
</dt> <dd>

Уникальный идентификатор, связанный с созданным предохранителем. Эту строку можно использовать для управления предохранителем ключа.

Если диск поддерживает аппаратное шифрование, а BitLocker не использует нестандартное владение, для строки идентификатора задается значение "BitLocker", а предохранитель ключа записывается в метаданные диапазона.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

При сбое этот метод возвращает один из следующих кодов или другой код ошибки.



| Возвращаемый код и значение                                                                                                                                 | Описание                           |
|---------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
| <dl> <dt>**С \_ ОК**</dt> <dt>0 (0x0)</dt> </dl> | Метод успешно выполнен.<br/> |



 

## <a name="remarks"></a>Комментарии

Файлы MOF-файл (MOF) содержат определения для классов инструментарий управления Windows (WMI) (WMI). MOF-файлы не устанавливаются в составе Windows SDK. Они устанавливаются на сервере при добавлении связанной роли с помощью диспетчер сервера. Дополнительные сведения о файлах MOF см. в разделе [MOF-файл (MOF)](../wmisdk/managed-object-format--mof-.md) .

По умолчанию не удается удаленно добавить учетную запись Active Directory или предохранители групп. Необходимо включить ограниченное делегирование на контроллере домена и на исходном компьютере. На контроллере домена выполните следующие действия.

1.  Откройте диспетчер сервера.
2.  Выбор компьютеров в Active Directory ролях
3.  Выберите целевой клиентский компьютер и щелкните правой кнопкой мыши
4.  Выберите вкладку Делегирование
5.  Выберите переключатель "доверять компьютеру делегирование указанных служб"
6.  Выберите переключатель "использовать только Kerberos"
7.  Нажмите "Добавить"
8.  Выберите "пользователи или компьютеры"
9.  Выберите узел/как имя субъекта-службы.

Выполните шаги с 3 по 9 на исходном компьютере.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|---------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 8 Корпоративная, \[ только классические приложения Windows 8 Pro\]<br/>                                    |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2012\]<br/>                                                    |
| Пространство имен<br/>                | Корневой \\ CIMV2 \\ безопасности \\ микрософтволуминкриптион<br/>                                             |
| MOF<br/>                      | <dl> <dt>Win32 \_ енкриптаблеволуме. mof</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**\_Енкриптаблеволуме Win32**](win32-encryptablevolume.md)
</dt> </dl>

 

 
