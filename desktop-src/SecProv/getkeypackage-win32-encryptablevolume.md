---
description: Экспортирует сведения, которые могут помочь в восстановлении зашифрованных данных, если диск сильно поврежден и не существует файлов резервных копий данных.
ms.assetid: 3d376a02-3392-433e-b842-24c73074610c
title: Метод Жеткэйпаккаже класса Win32_EncryptableVolume
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- Win32_EncryptableVolume.GetKeyPackage
api_type:
- COM
api_location:
- Root\CIMV2\Security\MicrosoftVolumeEncryption
ms.openlocfilehash: d1b2348a90b6b3cd01685c740fdfa67ad5a2d81d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105684064"
---
# <a name="getkeypackage-method-of-the-win32_encryptablevolume-class"></a>Метод Жеткэйпаккаже \_ класса Win32 енкриптаблеволуме

Метод **жеткэйпаккаже** класса [**Win32 \_ енкриптаблеволуме**](win32-encryptablevolume.md) экспортирует сведения, которые могут помочь в восстановлении зашифрованных данных, если диск сильно поврежден и не существует файлов резервных копий данных.

Экспортированные данные состоят из ключа шифрования тома, защищенного предохранителем ключа типа "числовой пароль" или "внешний ключ". Чтобы использовать этот пакет, необходимо также сохранить соответствующий числовой пароль или внешний ключ.

> [!IMPORTANT]
> Если вы решили экспортировать пакет ключей, убедитесь, что эти сведения хранятся в надежном месте. Не выполняйте эти сведения вместе с компьютером. Если этот пакет ключей потерян или украден, необходимо будет расшифровать том и повторно зашифровать его с помощью нового ключа.

 

В случае сбоя диска существует средство восстановления BitLocker, помогающее в восстановлении доступных данных. Дополнительные сведения о том, как это средство может использовать пакет ключей, см. в разделе [Использование средства восстановления BitLocker для восстановления данных из зашифрованного тома в Windows Vista](https://support.microsoft.com/kb/928201).

## <a name="syntax"></a>Синтаксис


```mof
uint32 GetKeyPackage(
  [in]  string VolumeKeyProtectorID,
  [out] uint8  KeyPackage[]
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*Волумекэйпротекторид* \[ окне\]
</dt> <dd>

Тип: **строка**

Уникальный строковый идентификатор, используемый для управления предохранителем ключа зашифрованного тома. Для экспорта пакета ключей необходимо использовать предохранитель ключа типа "числовой пароль" или "внешний ключ".

</dd> <dt>

*\[ Кэйпаккаже \]* \[исходящий трафик\]
</dt> <dd>

Тип: **Uint8**

Байтовый поток, содержащий ключ шифрования для тома, защищенный с помощью указанного предохранителя ключа.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Тип: **UInt32**

При сбое этот метод возвращает один из следующих кодов или другой код ошибки.



| Возвращаемый код и значение                                                                                                                                                                            | Описание                                                                                                                                                                                                                                                                                                                                                                                                 |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <dt>**С \_ ОК**</dt> <dt>0 (0x0)</dt> </dl>                                            | Метод успешно выполнен.<br/>                                                                                                                                                                                                                                                                                                                                                                       |
| <dl> <dt>**ФВЕ \_ E с \_ заблокированным \_ томом**</dt> <dt>2150694912 (0x80310000)</dt> </dl>           | Том заблокирован.<br/>                                                                                                                                                                                                                                                                                                                                                                            |
| <dl> <dt>**ФВЕ \_ E \_ не \_ активировано**</dt> <dt>2150694920 (0x80310008)</dt> </dl>           | Средство BitLocker не включено в томе. Добавьте предохранитель ключа, чтобы включить BitLocker. <br/>                                                                                                                                                                                                                                                                                                                |
| <dl> <dt>**ФВЕ \_ \_ \_ Не \_ найден предохранитель "E**</dt> <dt>" 2150694963 (0x80310033)</dt> </dl>    | Указанный предохранитель ключа не существует на томе.<br/>                                                                                                                                                                                                                                                                                                                                         |
| <dl> <dt>**ФВЕ \_ \_Недопустимый \_ \_ тип предохранителя**</dt> <dt>2150694970 (0x8031003A)</dt> </dl> | Параметр *волумекэйпротекторид* не ссылается на предохранитель ключа типа "числовой пароль" или "внешний ключ". Используйте метод [**протекткэйвиснумерикалпассворд**](protectkeywithnumericalpassword-win32-encryptablevolume.md) или [**протекткэйвисекстерналкэй**](protectkeywithexternalkey-win32-encryptablevolume.md) для создания предохранителя ключа соответствующего типа.<br/> |



 

## <a name="remarks"></a>Комментарии

Файлы MOF-файл (MOF) содержат определения для классов инструментарий управления Windows (WMI) (WMI). MOF-файлы не устанавливаются в составе Windows SDK. Они устанавливаются на сервере при добавлении связанной роли с помощью диспетчер сервера. Дополнительные сведения о файлах MOF см. в разделе [MOF-файл (MOF)](../wmisdk/managed-object-format--mof-.md).

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|---------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows Vista Enterprise, \[ только для настольных приложений Windows Vista Ultimate\]<br/>                       |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2008\]<br/>                                                    |
| Пространство имен<br/>                | Корневой \\ CIMV2 \\ безопасности \\ микрософтволуминкриптион<br/>                                             |
| MOF<br/>                      | <dl> <dt>Win32 \_ енкриптаблеволуме. mof</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**\_Енкриптаблеволуме Win32**](win32-encryptablevolume.md)
</dt> </dl>

 

 
