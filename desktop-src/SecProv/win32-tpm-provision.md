---
description: Пытается подготовить доверенный платформенный модуль к полностью готовому состоянию и будет использовать владельца доверенного платформенного модуля, если он еще не принадлежит.
ms.assetid: D0C09A48-00D0-4BF2-8F0A-451A61EA7810
title: 'Win32_Tpm: метод:P ровисион'
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- Win32_Tpm.Provision
api_type:
- COM
api_location:
- Win32_tpm.dll
ms.openlocfilehash: 198d7b02b1813002ce55d175ad016ace23ee7da4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103912248"
---
# <a name="win32_tpmprovision-method"></a>\_TPM Win32::P метод ровисион

Пытается подготовить доверенный платформенный модуль к полностью готовому состоянию и будет использовать владельца доверенного платформенного модуля, если он еще не принадлежит. Этот метод является дорогостоящим для выполнения, так как он выполняет много проверок. Рекомендуется использовать этот метод только при необходимости.

Этот метод доступен только локальным администраторам.

## <a name="syntax"></a>Синтаксис


```C++
uint32 Provision(
  [in]  BOOL   ForceClear_Allowed,
  [in]  BOOL   PhysicalPresencePrompts_Allowed,
  [out] uint32 Information
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*Форцеклеар \_ Разрешено* \[ в\]
</dt> <dd>

Если задано **значение true** , метод может запрашивать физические операции присутствия для очистки доверенного платформенного модуля. Если задано значение **false**, метод не будет запрашивать физическую операцию присутствия для очистки доверенного платформенного модуля.

</dd> <dt>

*Фисикалпресенцепромптс \_ Разрешено* \[ в\]
</dt> <dd>

Если задано **значение true** , метод может запросить операции физического присутствия, требующие участия пользователя в процессе загрузки, чтобы подтвердить изменение состояния TPM.

</dd> <dt>

*Сведения о* \[ заполняет\]
</dt> <dd>

Возвращает битовую маску как часть информации, которая доступна для полной инициализации TPM. Значения маски, такие как \_ Перезагрузка информации, означают, что вызов метода должен инициировать перезагрузку, чтобы переместить процесс подготовки вперед.

*Информационный* параметр может состоять из следующих значений.



| Значение                                                                                                                                                                                                                                                                                              | Значение                                                                                                                                                                                                                                |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="INFORMATION_SHUTDOWN"></span><span id="information_shutdown"></span><dl> <dt>**Сведения о \_ Завершение работы**</dt> <dt>0x00000002</dt> </dl>                                                 | Требуется перезапуск платформы (завершение работы).<br/>                                                                                                                                                                                    |
| <span id="INFORMATION_REBOOT"></span><span id="information_reboot"></span><dl> <dt>**Сведения о \_ Перезагрузка**</dt> <dt>0x00000004</dt> </dl>                                                       | Требуется перезапуск платформы (перезагрузка).<br/>                                                                                                                                                                                      |
| <span id="INFORMATION_TPM_FORCE_CLEAR"></span><span id="information_tpm_force_clear"></span><dl> <dt>**Сведения о \_ TPM \_ принудительно \_ clear**</dt> <dt>0x00000008</dt> </dl>                          | TPM уже владеет. Необходимо либо очистить доверенный платформенный модуль, либо импортировать значение авторизации владельца доверенного платформенного модуля.<br/>                                                                                                     |
| <span id="INFORMATION_PHYSICAL_PRESENCE"></span><span id="information_physical_presence"></span><dl> <dt>**Сведения о \_ ФИЗИЧЕСКОЕ \_ присутствие**</dt> <dt>0x00000010</dt> </dl>                     | Для инициализации доверенного платформенного модуля требуется физическое присутствие.<br/>                                                                                                                                                                         |
| <span id="INFORMATION_TPM_ACTIVATE"></span><span id="information_tpm_activate"></span><dl> <dt>**Сведения о \_ TPM \_ активировать**</dt> <dt>0x00000020</dt> </dl>                                    | Доверенный платформенный модуль отключен или деактивирован.<br/>                                                                                                                                                                                         |
| <span id="INFORMATION_TPM_TAKE_OWNERSHIP"></span><span id="information_tpm_take_ownership"></span><dl> <dt>**Сведения о \_ TPM \_ принимает \_ владение**</dt> <dt>0x00000040</dt> </dl>                 | Владение TPM выполнено.<br/>                                                                                                                                                                                                |
| <span id="INFORMATION_TPM_CREATE_EK"></span><span id="information_tpm_create_ek"></span><dl> <dt>**Сведения о \_ \_Создание \_ доверенного платформенного модуля**</dt> <dt>0x00000080</dt> </dl>                                | Ключ подтверждения (EK) существует в доверенном платформенном модуле. <br/>                                                                                                                                                                                 |
| <span id="INFORMATION_TPM_OWNERAUTH"></span><span id="information_tpm_ownerauth"></span><dl> <dt>**Сведения о \_ 0x00000100 \_ ОВНЕРАУС TPM**</dt> <dt></dt> </dl>                                 | Авторизация владельца доверенного платформенного модуля неправильно хранится в реестре.<br/>                                                                                                                                                         |
| <span id="INFORMATION_TPM_SRK_AUTH"></span><span id="information_tpm_srk_auth"></span><dl> <dt>**Сведения о \_ 0x000000200 \_ \_ проверки подлинности TPM SRK**</dt> <dt></dt> </dl>                                  | Значение авторизации корневого ключа хранилища (SRK) не является нулевым.<br/>                                                                                                                                                            |
| <span id="INFORMATION_TPM_DISABLE_OWNER_CLEAR"></span><span id="information_tpm_disable_owner_clear"></span><dl> <dt>**Сведения о \_ TPM \_ отключает \_ владельца \_ clear**</dt> <dt>0x00000400</dt> </dl> | Если операционная система настроена на отключение очистки доверенного платформенного модуля с помощью значения авторизации владельца доверенного платформенного модуля, а ДОВЕРЕНный платформенный модуль еще не настроен для предотвращения очистки ДОВЕРЕНного платформенного модуля со значением авторизации владельца доверенного платформенного модуля.<br/> |
| <span id="INFORMATION_TPM_SRKPUB"></span><span id="information_tpm_srkpub"></span><dl> <dt>**Сведения о \_ 0x00000800 \_ СРКПУБ TPM**</dt> <dt></dt> </dl>                                          | Данные реестра операционной системы о корневом ключе хранилища доверенного платформенного модуля не соответствуют корневому ключу хранилища TPM.<br/>                                                                                                       |
| <span id="INFORMATION_TPM_READ_SRKPUB"></span><span id="information_tpm_read_srkpub"></span><dl> <dt>**Сведения о \_ \_Чтение TPM \_ сркпуб**</dt> <dt>0x00001000</dt> </dl>                          | Постоянный флаг доверенного платформенного модуля, чтобы разрешить чтение открытого значения корневого ключа хранилища, не задан.<br/>                                                                                                                                    |
| <span id="INFORMATION_TPM_BOOT_COUNTER"></span><span id="information_tpm_boot_counter"></span><dl> <dt>**Сведения о \_ 0x00002000 \_ \_ счетчика загрузки TPM**</dt> <dt></dt> </dl>                       | Монотонный счетчик, увеличивающийся во время загрузки, не был создан.<br/>                                                                                                                                                         |
| <span id="INFORMATION_TPM_AD_BACKUP"></span><span id="information_tpm_ad_backup"></span><dl> <dt>**Сведения о \_ 0x00004000 TPM \_ AD \_ BACKUP**</dt> <dt></dt> </dl>                                | Не выполнено резервное копирование авторизации владельца доверенного платформенного модуля на Active Directory.<br/>                                                                                                                                                   |
| <span id="INFORMATION_TPM_AD_BACKUP_PHASE_I"></span><span id="information_tpm_ad_backup_phase_i"></span><dl> <dt>**Сведения о \_ 0x00008000 \_ на \_ \_ этапе \_ резервного копирования TPM AD**</dt> <dt></dt> </dl>      | В Active Directory выполняется первая часть хранилища данных авторизации владельца доверенного платформенного модуля.<br/>                                                                                                                    |
| <span id="INFORMATION_TPM_AD_BACKUP_PHASE_II"></span><span id="information_tpm_ad_backup_phase_ii"></span><dl> <dt>**Сведения о \_ 0x00010000 \_ \_ этапа резервного копирования \_ \_ доверенного платформенного модуля II**</dt> <dt></dt> </dl>   | Вторая часть хранилища данных авторизации владельца TPM в Active Directory выполняется.<br/>                                                                                                                   |
| <span id="INFORMATION_LEGACY_CONFIGURATION"></span><span id="information_legacy_configuration"></span><dl> <dt>**Сведения о \_ УСТАРЕВШая \_ Конфигурация**</dt> <dt>0x00020000</dt> </dl>            | Групповая политика Windows настроен на отсутствие авторизации владельца доверенного платформенного модуля, поэтому доверенный платформенный модуль не может быть полностью готов.<br/>                                                                                                               |
| <span id="INFORMATION_EK_CERTIFICATE"></span><span id="information_ek_certificate"></span><dl> <dt>**Сведения о \_ 0x00040000 \_ сертификата EK**</dt> <dt></dt> </dl>                              | Сертификат EK не был считан из энергонезависимого ОЗУ доверенного платформенного модуля и хранится в реестре. <br/>                                                                                                                                            |
| <span id="INFORMATION_TCG_EVENT_LOG"></span><span id="information_tcg_event_log"></span><dl> <dt>**Сведения о \_ 0x00080000 \_ \_ журнала событий TCG**</dt> <dt></dt> </dl>                                | Журнал событий TCG пуст или не может быть прочитан. <br/>                                                                                                                                                                              |
| <span id="INFORMATION_NOT_REDUCED"></span><span id="information_not_reduced"></span><dl> <dt>**Сведения о \_ НЕ \_ уменьшено**</dt> <dt>0x00100000</dt> </dl>                                       | Доверенный платформенный модуль не принадлежит.<br/>                                                                                                                                                                                                       |
| <span id="INFORMATION_GENERIC_ERROR"></span><span id="information_generic_error"></span><dl> <dt>**Сведения о \_ Общая \_ Ошибка**</dt> <dt>0x00200000</dt> </dl>                                 | Произошла ошибка, но она не относится к определенной задаче.<br/>                                                                                                                                                                   |
| <span id="INFORMATION_DEVICE_LOCK_COUNTER"></span><span id="information_device_lock_counter"></span><dl> <dt>**Сведения о \_ 0x00400000 \_ \_ счетчика блокировки устройства**</dt> <dt></dt> </dl>              | Счетчик блокировки устройства не создан.<br/>                                                                                                                                                                               |



 

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Могут возвращаться все ошибки доверенного платформенного модуля, а также ошибки, относящиеся к [базовым службам TPM](../tbs/tbs-return-codes.md) .

Ниже приведены общие коды возврата.



| Возвращаемый код и значение                                                                                                                                 | Описание                           |
|---------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
| <dl> <dt>**С \_ ОК**</dt> <dt>0 (0x0)</dt> </dl> | Метод успешно выполнен.<br/> |



 

## <a name="remarks"></a>Комментарии

Файлы MOF-файл (MOF) содержат определения для классов инструментарий управления Windows (WMI) (WMI). MOF-файлы не устанавливаются в составе Windows SDK. Они устанавливаются на сервере при добавлении связанной роли с помощью диспетчер сервера. Дополнительные сведения о файлах MOF см. в разделе [MOF-файл (MOF)](../wmisdk/managed-object-format--mof-.md).

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | \[Только классические приложения Windows 8\]<br/>                                                |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2012\]<br/>                                      |
| Пространство имен<br/>                | \\\\.\\ корневой \\ CIMV2 \\ безопасности \\ микрософттпм<br/>                                     |
| MOF<br/>                      | <dl> <dt>Win32 \_ TPM. mof</dt> </dl> |
| DLL<br/>                      | <dl> <dt>\_tpm.dllWin32</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**\_TPM Win32**](win32-tpm.md)
</dt> </dl>

 

 
