---
description: Список функций поддержки, предоставляемых набором средств настройки безопасности.
ms.assetid: 5a771014-1706-490f-8540-ec516652cb83
title: Функции управления безопасностью
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9f5c17efd55b1dbb806295ac0a83763257ffcc97
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103912256"
---
# <a name="security-management-functions"></a>Функции управления безопасностью

В этом разделе содержатся подразделы для следующих групп функций.

-   [Функции обратного вызова вложений](#attachment-callback-functions)
-   [Функции подсистемы вложений](#attachment-engine-functions)
-   [Функции политики LSA](#lsa-policy-functions)
    -   [Функции политики](#lsa-policy-functions)
    -   [Функции учетной записи](#account-functions)
    -   [Функции доверенного домена](#trusted-domain-functions)
    -   [Закрытые функции данных](#private-data-functions)
    -   [Прочие функции](#miscellaneous-functions)
-   [Функции управляемой учетной записи службы](#managed-service-account-functions)
-   [Функции фильтрации паролей](#password-filter-functions)
-   [Более безопасные функции](#safer-functions)

## <a name="attachment-callback-functions"></a>Функции обратного вызова вложений

Следующие функции поддержки предоставляются набором средств настройки безопасности и могут использоваться модулями вложений и расширениями для чтения и записи данных конфигурации.



| Функция обратного вызова                                         | Описание                                                                                 |
|-----------------------------------------------------------|---------------------------------------------------------------------------------------------|
| [**\_бесплатная \_ информация пфсце**](/windows/win32/api/scesvc/nc-scesvc-pfsce_free_info)<br/>   | Используется для освобождения памяти, выделенной этими функциями поддержки.<br/>                        |
| [**\_ \_ сведения о журнале пфсце**](/windows/win32/api/scesvc/nc-scesvc-pfsce_log_info)<br/>     | Используется для записи сообщений в файл журнала конфигурации или в файл журнала анализа.<br/>          |
| [**\_ \_ сведения о запросе пфсце**](/windows/win32/api/scesvc/nc-scesvc-pfsce_query_info)<br/> | Используется для запроса сведений о конфигурации и анализе для определенной службы.<br/> |
| [**\_сведения о наборе пфсце \_**](/windows/win32/api/scesvc/nc-scesvc-pfsce_set_info)<br/>     | Используется для задания сведений о конфигурации и анализе для конкретной службы.<br/>       |



 

## <a name="attachment-engine-functions"></a>Функции подсистемы вложений



| Функция                                                              | Описание                                                                                                                                                                                       |
|-----------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**сцесвкаттачментанализе**](scesvcattachmentanalyze.md)<br/> | Реализовано библиотекой DLL подсистемы вложений. Подсистема настройки безопасности вызывает эту функцию при анализе системы.<br/>                                                           |
| [**сцесвкаттачментконфиг**](scesvcattachmentconfig.md)<br/>   | Реализовано библиотекой DLL подсистемы вложений. Подсистема настройки безопасности вызывает эту функцию при настройке системы.<br/>                                                         |
| [**сцесвкаттачментупдате**](scesvcattachmentupdate.md)<br/>   | Реализовано библиотекой DLL подсистемы вложений. Подсистема настройки безопасности вызывает эту функцию при получении запроса на обновление конфигурации из расширения оснастки вложения.<br/> |



 

## <a name="lsa-policy-functions"></a>Функции политики LSA

В следующих разделах приведены справочные сведения о функциях политики [*локального центра безопасности*](/windows/desktop/SecGloss/l-gly) (LSA).



| Раздел                               | Описание                                                                                                                                                                                   |
|-------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Функции политики<br/>         | Функции сведений, используемые для открытия объекта локальной [**политики**](policy-object.md) и для установки или получения сведений о глобальных политиках.<br/>                                                  |
| Функции учетной записи<br/>        | Сведения о функциях, используемых для управления разрешениями учетной записи и создания и удаления учетных записей пользователей.<br/>                                                                                       |
| Функции доверенного домена<br/> | Сведения о функциях, используемых для создания и удаления отношений доверия между доменами, а также для установки и получения сведений об этих доверенных доменах.<br/>                                          |
| Закрытые функции данных<br/>   | Не используйте закрытые функции данных LSA. Вместо этого используйте функции [**CryptProtectData**](/windows/desktop/api/dpapi/nf-dpapi-cryptprotectdata) и [**CryptUnprotectData**](/windows/desktop/api/dpapi/nf-dpapi-cryptunprotectdata) .<br/> |
| Прочие функции<br/>  | Функции сведений, не описанные в других местах.<br/>                                                                                                                                         |



 

### <a name="policy-functions"></a>Функции политики

Следующие функции перечисляют учетные записи пользователей и доверенные домены, получают уведомления об изменении политик, а также имена учетных записей и идентификаторы безопасности.



| Функция                                                                                          | Описание                                                                                                                                                                                                                                                                                                                                           |
|---------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**лсаенумератеаккаунтсвисусерригхт**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaenumerateaccountswithuserright)<br/>         | Перечисляет все учетные записи с указанными разрешениями пользователя.<br/>                                                                                                                                                                                                                                                                         |
| [**лсаенумератетрустеддомаинсекс**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaenumeratetrusteddomainsex)<br/>                   | Перечисляет доверенные домены.<br/>                                                                                                                                                                                                                                                                                                            |
| [**лсалукупнамес**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsalookupnames)<br/>                                               | Сопоставляет указанные имена с их идентификаторами безопасности. Возвращает идентификатор безопасности в виде пары идентификаторов безопасности RID или домена.<br/>                                                                                                                                                                                                                                                         |
| [**LsaLookupNames2**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsalookupnames2)<br/>                                             | Сопоставляет указанные имена с их идентификаторами безопасности. Возвращает идентификатор безопасности в виде одного элемента.<br/>                                                                                                                                                                                                                                                               |
| [**лсалукуппривилежевалуе**](/windows/desktop/api/ntlsa/nf-ntlsa-lsalookupprivilegevalue)<br/>                             | Извлекает [*локально уникальный идентификатор*](/windows/desktop/SecGloss/l-gly) (LUID), используемый [*локальным администратором безопасности*](/windows/desktop/SecGloss/l-gly) (LSA) для представления указанного имени привилегии.<br/> |
| [**лсалукупсидс**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsalookupsids)<br/>                                                 | Сопоставляет указанные имена учетных записей с их идентификаторами безопасности.<br/>                                                                                                                                                                                                                                                                                            |
| [**лсарегистерполицичанженотификатион**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaregisterpolicychangenotification)<br/>     | Регистрирует объект события для получения уведомлений при изменении сведений о локальной политике.<br/>                                                                                                                                                                                                                                              |
| [**лсаунрегистерполицичанженотификатион**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaunregisterpolicychangenotification)<br/> | Отменяет регистрацию объекта события, получающего уведомления об изменении политики.<br/>                                                                                                                                                                                                                                                                 |



 

### <a name="account-functions"></a>Функции учетной записи

Следующие функции добавляют, перечисляют и удаляют разрешения для учетной записи.



| Функция                                                                  | Описание                                                                                                  |
|---------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------|
| [**лсааддаккаунтригхтс**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaaddaccountrights)<br/>             | Добавьте разрешения для учетной записи. Если учетная запись еще не существует, она будет создана.<br/>              |
| [**лсаенумератеаккаунтригхтс**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaenumerateaccountrights)<br/> | Перечисление разрешений, предоставленных учетной записи.<br/>                                                  |
| [**лсаремовеаккаунтригхтс**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaremoveaccountrights)<br/>       | Удаление разрешений из учетной записи. При удалении всех разрешений учетная запись удаляется.<br/> |



 

### <a name="trusted-domain-functions"></a>Функции доверенного домена

Следующие функции создают, перечисляют и удаляют доверенные домены, а также устанавливают и извлекают сведения о доверенном домене.



| Функция                                                                                                                                                    | Описание                                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------|
| [**лсакреатетрустеддомаинекс**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsacreatetrusteddomainex)<br/>                                                                                     | Создает новый объект [**трустеддомаин**](trusteddomain-object.md) .<br/>            |
| [**лсаделететрустеддомаин**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsadeletetrusteddomain)<br/>                                                                                         | Удаляет объект [**трустеддомаин**](trusteddomain-object.md) .<br/>                |
| [**лсаенумератетрустеддомаинс**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaenumeratetrusteddomains)<br/> [**лсаенумератетрустеддомаинсекс**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaenumeratetrusteddomainsex)<br/> | Перечисляет домены, которые в настоящее время являются доверенными для локальной системы.<br/>                  |
| [**лсаопентрустеддомаинбинаме**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaopentrusteddomainbyname)<br/>                                                                                 | Открывает обработчик для объекта [**трустеддомаин**](trusteddomain-object.md) .<br/>      |
| [**лсакуеритрустеддомаининфо**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaquerytrusteddomaininfo)<br/>                                                                                   | Извлекает сведения о доверенном домене. Домен указывается с помощью идентификатора безопасности.<br/>  |
| [**LsaQueryTrustedDomainInfoByName**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaquerytrusteddomaininfobyname)<br/>                                                                       | Извлекает сведения о доверенном домене. Домен указывается по имени.<br/> |
| [**лсасеттрустеддомаининфобинаме**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsasettrusteddomaininfobyname)<br/>                                                                           | Задает сведения для доверенного домена. Домен указывается по имени.<br/>        |
| [**лсасеттрустеддомаининформатион**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsasettrusteddomaininformation)<br/>                                                                         | Задает сведения для доверенного домена. Домен указывается с помощью идентификатора безопасности.<br/>         |



 

### <a name="private-data-functions"></a>Закрытые функции данных

Не используйте закрытые функции данных LSA. Вместо этого используйте функции [**CryptProtectData**](/windows/desktop/api/dpapi/nf-dpapi-cryptprotectdata) и [**CryptUnprotectData**](/windows/desktop/api/dpapi/nf-dpapi-cryptunprotectdata) .



| Функция                                                            | Описание                                 |
|---------------------------------------------------------------------|---------------------------------------------|
| [**лсаретриевеприватедата**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaretrieveprivatedata)<br/> | Извлекает и расшифровывает строку.<br/> |
| [**лсастореприватедата**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsastoreprivatedata)<br/>       | Шифрует и сохраняет строку.<br/>    |



 

### <a name="miscellaneous-functions"></a>Прочие функции

В API политики LSA имеются следующие три функции, не попадающие в какие-либо другие категории функций политики LSA.



| Функция                                                          | Описание                                                                                                                       |
|-------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| [**лсаклосе**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsaclose)<br/>                           | Закрывает маркер объекта [**политики**](policy-object.md) или объекта [**трустеддомаин**](trusteddomain-object.md) .<br/> |
| [**лсафримемори**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsafreememory)<br/>                 | Освобождает буфер, выделенный функцией LSA.<br/>                                                                           |
| [**лсантстатустовинеррор**](/windows/desktop/api/Ntsecapi/nf-ntsecapi-lsantstatustowinerror)<br/> | Преобразует значение **NTSTATUS** в код ошибки Windows.<br/>                                                                |



 

## <a name="managed-service-account-functions"></a>Функции управляемой учетной записи службы

Следующие функции используются для создания, перечисления, поиска и удаления управляемых учетных записей служб.



| Функция                                                                      | Описание                                                                                                                 |
|-------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|
| [**нетаддсервицеаккаунт**](/windows/desktop/api/Lmaccess/nf-lmaccess-netaddserviceaccount)<br/>               | Создает управляемую учетную запись службы.<br/>                                                                               |
| [**нетенумератесервицеаккаунтс**](/windows/desktop/api/Lmaccess/nf-lmaccess-netenumerateserviceaccounts)<br/> | Перечисляет учетные записи сервера на указанном сервере.<br/>                                                          |
| [**нетиссервицеаккаунт**](/windows/desktop/api/Lmaccess/nf-lmaccess-netisserviceaccount)<br/>                 | Проверяет, существует ли указанная учетная запись службы в хранилище Netlogon на указанном сервере.<br/>                |
| [**нетремовесервицеаккаунт**](/windows/desktop/api/Lmaccess/nf-lmaccess-netremoveserviceaccount)<br/>         | Удаляет указанную учетную запись службы из [Active Directory](/windows/desktop/AD/active-directory-domain-services) базы данных.<br/> |



 

## <a name="password-filter-functions"></a>Функции фильтрации паролей

Следующие функции [*фильтрации паролей*](/windows/desktop/SecGloss/p-gly) реализуются с помощью пользовательских библиотек DLL фильтрации паролей, которые обеспечивают фильтрацию паролей и уведомление о смене паролей.



| Функция                                                            | Описание                                                     |
|---------------------------------------------------------------------|-----------------------------------------------------------------|
| [**инитиализечанженотифи**](/windows/desktop/api/Ntsecapi/nc-ntsecapi-psam_init_notification_routine)<br/> | Указывает, что библиотека DLL фильтра паролей инициализирована.<br/> |
| [**пассвордчанженотифи**](/windows/desktop/api/Ntsecapi/nc-ntsecapi-psam_password_notification_routine)<br/>     | Указывает, что пароль был изменен.<br/>          |
| [**пассвордфилтер**](/windows/desktop/api/Ntsecapi/nc-ntsecapi-psam_password_filter_routine)<br/>                 | Проверяет новый пароль на основе политики паролей.<br/>   |



 

## <a name="safer-functions"></a>Более безопасные функции

Следующие более безопасные функции можно использовать для проверки безопасного уровня любого исполняемого файла и ведения журнала событий.



| Функция                                                         | Описание                                                                                                                                                                          |
|------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**саферклоселевел**](/windows/desktop/api/WinSafer/nf-winsafer-safercloselevel)                       | Закрывает более \_ безопасный \_ маркер уровня, Открытый с помощью функции [**SaferIdentifyLevel**](/windows/desktop/api/WinSafer/nf-winsafer-saferidentifylevel) или функции [**саферкреателевел**](/windows/desktop/api/WinSafer/nf-winsafer-safercreatelevel) .<br/> |
| [**саферкомпутетокенфромлевел**](/windows/desktop/api/WinSafer/nf-winsafer-safercomputetokenfromlevel) | Ограничение маркера с помощью ограничений, заданных в более безопасном \_ \_ маркере уровня.<br/>                                                                                                 |
| [**саферкреателевел**](/windows/desktop/api/WinSafer/nf-winsafer-safercreatelevel)                     | Открывает более безопасный \_ \_ маркер уровня.<br/>                                                                                                                                             |
| [**сафержетлевелинформатион**](/windows/desktop/api/WinSafer/nf-winsafer-safergetlevelinformation)     | Извлекает сведения об уровне политики.<br/>                                                                                                                               |
| [**сафержетполициинформатион**](/windows/desktop/api/WinSafer/nf-winsafer-safergetpolicyinformation)   | Извлекает сведения о политике.<br/>                                                                                                                                     |
| [**SaferIdentifyLevel**](/windows/desktop/api/WinSafer/nf-winsafer-saferidentifylevel)                 | Извлекает сведения о уровне.<br/>                                                                                                                                      |
| [**сафериисексекутаблефилетипе**](/windows/desktop/api/WinSafer/nf-winsafer-saferiisexecutablefiletype) | Определяет, является ли указанный файл исполняемым файлом.<br/>                                                                                                                |
| [**саферрекордевентложентри**](/windows/desktop/api/WinSafer/nf-winsafer-saferrecordeventlogentry)     | Отправляет сообщение в журнал событий.<br/>                                                                                                                                         |
| [**саферсетлевелинформатион**](/windows/desktop/api/WinSafer/nf-winsafer-safersetlevelinformation)     | Задает сведения об уровне политики.<br/>                                                                                                                                |
| [**саферсетполициинформатион**](/windows/desktop/api/WinSafer/nf-winsafer-safergetlevelinformation)    | Задает глобальные элементы управления политикой.<br/>                                                                                                                                          |



 

 

