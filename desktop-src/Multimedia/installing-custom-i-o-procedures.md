---
title: Установка пользовательских процедур ввода-вывода
description: Установка пользовательских процедур ввода-вывода
ms.assetid: 7b26a062-fa52-4de3-b8c8-b9f9167068fc
keywords:
- пользовательские операции ввода-вывода файлов мультимедиа, процедуры
- Ввод-вывод файлов, пользовательские процедуры
- входные и выходные данные (ввод-вывод), пользовательские процедуры
- Ввод-вывод (входные и выходные данные), пользовательские процедуры
- Установка пользовательских процедур ввода-вывода
- пользовательский ввод-вывод
- Функция Ммиоинсталлиопрок
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1574b7076e7344fa8e800ef1f18ad13fcfd3f3af
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104412952"
---
# <a name="installing-custom-io-procedures"></a>Установка пользовательских процедур ввода-вывода

Для установки процедуры ввода-вывода, связанной с. Расширение имени файла ARC используйте функцию [**ммиоинсталлиопрок**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmioinstallioproc) следующим образом:


```C++
mmioInstallIOProc (mmioFOURCC('A', 'R', 'C', ' '), 
    (LPMMIOPROC)lpmmioproc, MMIO_INSTALLPROC); 
```



При установке процедуры ввода-вывода с помощью [**ммиоинсталлиопрок**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmioinstallioproc)процедура остается установленной до ее удаления. Процедура ввода-вывода используется для любого открываемого файла, если файл имеет соответствующее расширение имени файла.

Также можно временно установить процедуру ввода-вывода с помощью функции [**ммиупен**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmioopen) . В этом случае процедура ввода-вывода используется только с файлом, открытым с помощью **ммиупен** , и удаляется при закрытии файла с помощью функции [**ммиоклосе**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmioclose) . Чтобы указать процедуру ввода-вывода при открытии файла с помощью **ммиупен**, используйте параметр *лпммиоинфо* для ссылки на структуру [**ммиоинфо**](/previous-versions//dd757322(v=vs.85)) следующим образом:

1.  Установите для элемента **ФкЦиопрок** **значение NULL**.
2.  Задайте для элемента **пиопрок** адрес процедуры-экземпляра процедуры ввода-вывода.
3.  Задайте для всех остальных членов значение 0 (если не открыть файл памяти или прямое чтение или запись в буфер файлового ввода-вывода).

Не забудьте удалить все установленные процедуры ввода-вывода перед выходом из приложения.

 

 