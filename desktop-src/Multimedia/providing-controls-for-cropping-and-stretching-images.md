---
title: Предоставление элементов управления для обрезки и растяжения изображений
description: Предоставление элементов управления для обрезки и растяжения изображений
ms.assetid: cc62d70d-3f5f-477c-bc09-ab8ab0a9dce3
keywords:
- Макрос МЦивнджетсаурце
- Макрос МЦивндпутсаурце
- Макрос МЦивнджетдест
- Макрос МЦивндпутдест
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9cd0889b40204e7c99ec782e454dba2cdeebfe79
ms.sourcegitcommit: 9eebab0ead09cecdbc24f5f84d56c8b6a7c22736
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2021
ms.locfileid: "124372159"
---
# <a name="providing-controls-for-cropping-and-stretching-images"></a>Предоставление элементов управления для обрезки и растяжения изображений

МЦивнд позволяет обрезать и растянуть изображения видеоклипа. Чтобы понять эти возможности, необходимо понимать связи между *размером кадра*, *прямоугольником источника*, *прямоугольником назначения* и *областью воспроизведения*.

Видеоролик состоит из нескольких кадров, каждый из которых содержит одно изображение. Размер кадра видеоклипа — это размер изображения в текущем кадре. Как правило, видеоролик имеет один размер кадра, так как все изображения в картинке имеют одинаковый размер.

Исходный прямоугольник — это прямоугольная область, которая накладывается на кадры видеоклипа. Исходный прямоугольник определяет часть каждого кадра, отображаемого во время воспроизведения. Когда видеоролик загружается с помощью МЦивнд, исходный прямоугольник инициализируется с теми же размерами и положением, что и первоначальный кадр видеоклипа.

Прямоугольник назначения — это прямоугольная область, определяющая виртуальное окно воспроизведения. Прямоугольник назначения получает данные изображения из исходного прямоугольника для каждого кадра видеоклипа. Если размеры исходного и целевого прямоугольников различаются, МЦивнд корректирует данные изображения по горизонтали и вертикали по мере необходимости для заполнения прямоугольника назначения. Когда видеоролик загружается с помощью МЦивнд, прямоугольник назначения инициализируется с теми же размерами и положением, что и исходный кадр видеоклипа.

Область воспроизведения — это часть окна МЦивнд, используемая приложением для показа видеоклипа. Область воспроизведения — это клиентская область окна МЦивнд или часть клиентской области, которая исключает панель инструментов МЦивнд. Когда видеоролик загружается с помощью МЦивнд, область воспроизведения инициализируется с теми же размерами и положением, что и у первоначального кадра видеоклипа.

Вы можете обрезать видеоролик с помощью макросов [**мЦивнджетсаурце**](/windows/desktop/api/Vfw/nf-vfw-mciwndgetsource) и [**мЦивндпутсаурце**](/windows/desktop/api/Vfw/nf-vfw-mciwndputsource) , чтобы изменить исходный прямоугольник. Обрезка изображения определяет, какая часть фреймов отображается во время воспроизведения. Он не изменяет содержимое файла, который воспроизводится. Прежде чем обрезать изображение, можно получить текущий размер исходного прямоугольника с помощью **мЦивнджетсаурце**. После вычисления нового размера и расположения исходного прямоугольника можно задать границы кадрирования исходного прямоугольника с помощью **мЦивндпутсаурце**.

Для изменения прямоугольника назначения можно растянуть видеоролик с помощью макросов [**мЦивнджетдест**](/windows/desktop/api/Vfw/nf-vfw-mciwndgetdest) и [**мЦивндпутдест**](/windows/desktop/api/Vfw/nf-vfw-mciwndputdest) . При растяжении видеоклипа размер кадра видеоклипа увеличивается или уменьшается вертикально, горизонтально или в обоих направлениях. Перед растяжением изображения можно получить текущий размер и расположение прямоугольника назначения с помощью **мЦивнджетдест**. Макрос **мЦивндпутдест** позволяет переопределить конечный прямоугольник. Растяжение может искажать изображение во время воспроизведения, но не изменяет содержимое файла, который воспроизводится.

Если размер прямоугольника назначения становится больше области воспроизведения, можно указать, какая часть области воспроизведения будет отображать видеоклип с помощью **мЦивндпутдест**.

> [!Note]  
> Макрос [**мЦивндпутдест**](/windows/desktop/api/Vfw/nf-vfw-mciwndputdest) не изменяет размер области воспроизведения. Чтобы растянуть окно МЦивнд вместе с прямоугольником назначения, необходимо знать текущий размер окна МЦивнд и выдать новые размеры окон на основе прямоугольника назначения. Вы можете получить размеры окна МЦивнд с помощью функции [жетвиндоврект](/windows/win32/api/winuser/nf-winuser-getwindowrect) и изменить размер окна мЦивнд с помощью функции [SetWindowPos](/windows/win32/api/winuser/nf-winuser-setwindowpos) .

 

 

 