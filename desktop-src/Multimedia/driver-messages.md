---
title: Сообщения драйвера
description: Сообщения драйвера
ms.assetid: ed3748ac-08e6-418e-b345-30c796fa38f3
keywords:
- устанавливаемые драйверы, сообщения
- устанавливаемые драйверы, пользовательские сообщения
- сообщения драйвера
- пользовательские сообщения драйверов
- устанавливаемые драйверы, функция Дриверпрок
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 25e03f9d68254752655be8abe9040a17d44dc0ff
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104069868"
---
# <a name="driver-messages"></a>Сообщения драйвера

Каждое сообщение драйвера состоит из идентификатора сообщения и 2 32-разрядных параметров. Идентификатор сообщения — это уникальное значение, которое проверяется функцией [дриверпрок](/windows/win32/api/mmiscapi/nc-mmiscapi-driverproc) , чтобы определить, какое действие следует выполнить. Значение параметров сообщения зависит от сообщения. Параметры могут представлять значения или адреса. Во многих случаях параметры не используются и имеют значение 0.

Сообщения драйвера могут быть стандартными или пользовательскими. Windows отправляет стандартные сообщения драйвера, такие как [**DRV \_ Open**](drv-open.md), [**DRV \_ Close**](drv-close.md)и [**DRV \_ Configure**](drv-configure.md), на устанавливаемый драйвер в ответ на запрос на открытие, закрытие или настройку драйвера. Стандартные сообщения направляют устанавливаемый драйвер для загрузки или выгрузки ресурсов, включения или отключения его работы, открытия или закрытия экземпляра драйвера и вывода диалогового окна конфигурации. Некоторые стандартные сообщения, такие как [**DRV \_ Power**](drv-power.md) и [**DRV \_ екситсессион**](drv-exitsession.md), уведомляют драйвер о системных событиях, влияющих на работу драйвера или любого связанного оборудования.

Приложения и библиотеки DLL отправляют пользовательские сообщения драйвера для направления устанавливаемого драйвера для выполнения действий, связанных с драйвером. Устанавливаемые драйверы, поддерживающие пользовательские сообщения, должны содержать соответствующую обработку в функции **дриверпрок** . Чтобы предотвратить конфликт между пользовательскими и стандартными сообщениями драйверов, идентификаторы настраиваемых сообщений должны иметь значения от DRV, \_ зарезервированные для \_ пользователя DRV. Пользовательские сообщения, передаваемые в функцию [дефдриверпрок](/windows/win32/api/mmiscapi/nf-mmiscapi-defdriverproc) , игнорируются.

 

 