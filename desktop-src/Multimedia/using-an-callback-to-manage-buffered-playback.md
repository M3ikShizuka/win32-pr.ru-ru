---
title: Использование обратного вызова события для управления воспроизведением в буфере
description: Использование обратного вызова события для управления воспроизведением в буфере
ms.assetid: 3b60daea-574d-430b-b14e-1fefceb69dfb
keywords:
- Цифровой интерфейс MIDI, буферизованное воспроизведение
- MIDI (цифровой интерфейс музыкального инструмента), буферизованное воспроизведение
- Воспроизведение файлов MIDI, буферизованное воспроизведение
- Воспроизведение в буфере
- Функция CreateEvent
- Цифровой интерфейс MIDI, обратный вызов события
- MIDI (цифровой интерфейс музыкального инструмента), обратный вызов события
- Воспроизведение файлов MIDI, обратный вызов события
- обратный вызов события
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2fc6f6cc7bec7971c117cb81b2f823d7184bc2fd
ms.sourcegitcommit: 9eebab0ead09cecdbc24f5f84d56c8b6a7c22736
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2021
ms.locfileid: "124370929"
---
# <a name="using-an-event-callback-to-manage-buffered-playback"></a>Использование обратного вызова события для управления воспроизведением в буфере

Чтобы использовать обратный вызов события, используйте функцию [CreateEvent](/windows/win32/api/synchapi/nf-synchapi-createeventa) для получения маркера события. При вызове функции [**мидиаутопен**](/windows/win32/api/mmeapi/nf-mmeapi-midioutopen) укажите событие обратного вызова \_ для параметра *dwFlags* . После использования функции [**мидиаутпрепарехеадер**](/windows/win32/api/mmeapi/nf-mmeapi-midioutprepareheader) , но перед отправкой событий MIDI на устройство создайте несигнальное событие, вызвав функцию [ресетевент](/windows/win32/api/synchapi/nf-synchapi-resetevent) , указав дескриптор события, полученный с помощью функции **CreateEvent**. Затем внутри цикла, который проверяет, \_ установлен ли бит мхдр Done в элементе **DwFlags** структуры [**Мидихдр**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) , используйте функцию [WaitForSingleObject](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject) , указав маркер события и значение времени ожидания бесконечности в качестве параметров.

Обратный вызов события задается любым значением, которое может вызвать обратный вызов функции.

Поскольку обратные вызовы событий не получают конкретных закрытых, готовых или открытых уведомлений, приложению может потребоваться проверить состояние процесса, ожидающего выполнения после наступления события. При возвращении объекта **WaitForSingleObject** может завершиться ряд задач.

 

 