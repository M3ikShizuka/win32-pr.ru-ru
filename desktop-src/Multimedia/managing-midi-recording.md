---
title: Управление записью MIDI
description: Управление записью MIDI
ms.assetid: 48b2d815-72cf-4c96-8d93-247d2426b8f2
keywords:
- Цифровой интерфейс MIDI, запись
- MIDI (цифровой интерфейс музыкального инструмента), запись
- запись аудио MIDI, управление
- Запись MIDI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0edfb81976e1f5333798c9705640e7676281968a
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104487549"
---
# <a name="managing-midi-recording"></a>Управление записью MIDI

После открытия устройства MIDI можно начать запись данных MIDI. Windows предоставляет следующие функции для управления записью MIDI.



| Значение                                      | Значение                                                                                           |
|--------------------------------------------|---------------------------------------------------------------------------------------------------|
| [**мидиинаддбуффер**](/windows/win32/api/mmeapi/nf-mmeapi-midiinaddbuffer) | Отправляет буфер драйверу устройства, чтобы его можно было заполнить записанными системой данными MIDI. |
| [**мидиинресет**](/windows/win32/api/mmeapi/nf-mmeapi-midiinreset)         | Останавливает запись MIDI и помечает все ожидающие буфер как выполненные.                                       |
| [**мидиинстарт**](/windows/win32/api/mmeapi/nf-mmeapi-midiinstart)         | Запускает запись MIDI и сбрасывает отметку времени в ноль.                                          |
| [**мидиинстоп**](/windows/win32/api/mmeapi/nf-mmeapi-midiinstop)           | Останавливает запись MIDI.                                                                             |



 

Для отправки буферов в драйвер устройства для записи исключающих сообщений используйте [**мидиинаддбуффер**](/windows/win32/api/mmeapi/nf-mmeapi-midiinaddbuffer). Приложение получает уведомления, так как буферы заполнены регистрируемыми системой данными. Дополнительные сведения о методах уведомления см. в разделе [Управление блоками данных MIDI](managing-midi-data-blocks.md).

Функция [**мидиинстарт**](/windows/win32/api/mmeapi/nf-mmeapi-midiinstart) начинает процесс записи. При записи исключающих системных сообщений перед началом записи отправьте по крайней мере один буфер в драйвер. Чтобы прерывать запись, используйте [**мидиинстоп**](/windows/win32/api/mmeapi/nf-mmeapi-midiinstop). Перед закрытием устройства с помощью функции [**мидиинклосе**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) пометьте все ожидающие блоки данных как выполненные путем вызова [**мидиинресет**](/windows/win32/api/mmeapi/nf-mmeapi-midiinreset).

Приложения, для которых требуются данные с отметкой времени, используют функцию обратного вызова для получения данных MIDI. Если ваши требования к времени не ограничиваются, можно использовать обратный вызов окна или потока. Однако нельзя использовать обратный вызов события для получения данных MIDI.

Для записи безсистемных сообщений с приложениями, которые не используют буферы потоков, необходимо предоставить драйверу устройства буферы. Эти буферы указываются с помощью структуры [**мидихдр**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) .

## <a name="related-topics"></a>См. также

<dl> <dt>

[Запись звука MIDI](recording-midi-audio.md)
</dt> </dl>

 

 