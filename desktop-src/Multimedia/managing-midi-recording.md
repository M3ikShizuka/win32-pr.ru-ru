---
title: Управление записью MIDI
description: Управление записью MIDI
ms.assetid: 48b2d815-72cf-4c96-8d93-247d2426b8f2
keywords:
- Цифровой интерфейс MIDI, запись
- MIDI (цифровой интерфейс музыкального инструмента), запись
- запись аудио MIDI, управление
- Запись MIDI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 29bf4ac85ad0cc9735a08bab3ee07d744eecb0d75308ee323ec93c1c69b1a9e3
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118139065"
---
# <a name="managing-midi-recording"></a>Управление записью MIDI

После открытия устройства MIDI можно начать запись данных MIDI. Windows предоставляет следующие функции для управления записью MIDI.



| Значение                                      | Значение                                                                                           |
|--------------------------------------------|---------------------------------------------------------------------------------------------------|
| [**мидиинаддбуффер**](/windows/win32/api/mmeapi/nf-mmeapi-midiinaddbuffer) | Отправляет буфер драйверу устройства, чтобы его можно было заполнить записанными системой данными MIDI. |
| [**мидиинресет**](/windows/win32/api/mmeapi/nf-mmeapi-midiinreset)         | Останавливает запись MIDI и помечает все ожидающие буфер как выполненные.                                       |
| [**мидиинстарт**](/windows/win32/api/mmeapi/nf-mmeapi-midiinstart)         | Запускает запись MIDI и сбрасывает отметку времени в ноль.                                          |
| [**мидиинстоп**](/windows/win32/api/mmeapi/nf-mmeapi-midiinstop)           | Останавливает запись MIDI.                                                                             |



 

Для отправки буферов в драйвер устройства для записи исключающих сообщений используйте [**мидиинаддбуффер**](/windows/win32/api/mmeapi/nf-mmeapi-midiinaddbuffer). Приложение получает уведомления, так как буферы заполнены регистрируемыми системой данными. Дополнительные сведения о методах уведомления см. в разделе [Управление блоками данных MIDI](managing-midi-data-blocks.md).

Функция [**мидиинстарт**](/windows/win32/api/mmeapi/nf-mmeapi-midiinstart) начинает процесс записи. При записи исключающих системных сообщений перед началом записи отправьте по крайней мере один буфер в драйвер. Чтобы прерывать запись, используйте [**мидиинстоп**](/windows/win32/api/mmeapi/nf-mmeapi-midiinstop). Перед закрытием устройства с помощью функции [**мидиинклосе**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) пометьте все ожидающие блоки данных как выполненные путем вызова [**мидиинресет**](/windows/win32/api/mmeapi/nf-mmeapi-midiinreset).

Приложения, для которых требуются данные с отметкой времени, используют функцию обратного вызова для получения данных MIDI. Если ваши требования к времени не ограничиваются, можно использовать обратный вызов окна или потока. Однако нельзя использовать обратный вызов события для получения данных MIDI.

Для записи безсистемных сообщений с приложениями, которые не используют буферы потоков, необходимо предоставить драйверу устройства буферы. Эти буферы указываются с помощью структуры [**мидихдр**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) .

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Запись звука MIDI](recording-midi-audio.md)
</dt> </dl>

 

 