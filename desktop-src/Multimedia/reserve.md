---
title: зарезервировать команду
description: Команда Reserve выделяет непрерывное место на диске для рабочей области экземпляра устройства. Устройство Digital-Video распознает эту команду.
ms.assetid: ac4fc75e-82d0-4817-a5cf-a77996bc69e2
keywords:
- резервирование команды мультимедиа Windows
topic_type:
- apiref
api_name:
- reserve
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 7f71889af552b9040777394047a0facfc6c81366
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "103988218"
---
# <a name="reserve-command"></a>зарезервировать команду

Команда Reserve выделяет непрерывное место на диске для рабочей области экземпляра устройства. Устройство Digital-Video распознает эту команду.

Чтобы отправить эту команду, вызовите функцию [**mciSendString**](/previous-versions//dd757161(v=vs.85)) с заданным параметром *лпсзкомманд* , как показано ниже.

``` syntax
_stprintf_s(
  lpszCommand, 
  TEXT("reserve %s %s %s"), 
  lpszDeviceID, 
  lpszReserve, 
  lpszFlags
); 
```

## <a name="parameters"></a>Параметры

<dl> <dt>

<span id="lpszDeviceID"></span><span id="lpszdeviceid"></span><span id="LPSZDEVICEID"></span>*лпсздевицеид*
</dt> <dd>

Идентификатор устройства MCI. Этот идентификатор или псевдоним назначается при открытии устройства.

</dd> <dt>

<span id="lpszReserve"></span><span id="lpszreserve"></span><span id="LPSZRESERVE"></span>*лпсзресерве*
</dt> <dd>

Один или несколько следующих флагов.



| Значение           | Значение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|-----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| по *пути*       | Указывает диск и путь к каталогу (но не имя) временного файла, используемого для хранения записанных данных. Имя этого файла указывается устройством. Временный файл удаляется при закрытии устройства. Если этот флаг опущен, устройство указывает расположение места на диске.                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| *Длительность* размера | Указывает приблизительный объем дискового пространства, резервируемого в рабочей области. Значение *Duration* указывается в текущем формате времени. Устройство основывает оценку необходимого места на диске в следующих параметрах: запрошенное время, формат файла, алгоритм сжатия видео и звука и значения качества сжатия. Если параметр [сетвидео](setvideo.md) "Record" имеет значение "OFF", то пространство резервируется только для аудио. Если параметр [сетаудио](setaudio.md) "Record" имеет значение "OFF", то пространство резервируется только для видео. Если оба варианта имеют значение OFF или если параметр *Duration* равен нулю, то пространство не резервируется и освобождается все существующие зарезервированные пространства. Если этот флаг опущен, устройство будет использовать значение по умолчанию, определенное устройством. |



 

</dd> <dt>

<span id="lpszFlags"></span><span id="lpszflags"></span><span id="LPSZFLAGS"></span>*лпсзфлагс*
</dt> <dd>

Может принимать значение "Wait", "notify", "Test" или их сочетание. Дополнительные сведения об этих флагах см. [в разделе Флаги ожидания, уведомления и проверки](the-wait-notify-and-test-flags.md).

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Возвращает нуль в случае успеха или ошибку в противном случае.

## <a name="remarks"></a>Комментарии

При необходимости в последующих командах [записи](record.md) или [сохранения](save.md) используется пространство, зарезервированное этой командой. Если Рабочая область содержит несохраненные данные, данные теряются. Некоторые устройства не нуждаются в резервировании и игнорируют их. Если место на диске не резервируется перед записью, команда Record выполняет неявное резервирование с флагами по умолчанию для конкретных устройств. Используйте явную команду резервирования, если требуется лучше контролировать задержку выделения места на диске, контролировать объем выделяемого пространства и контролировать место выделения места на диске. Приложение может изменить объем и расположение ранее зарезервированного места на диске с помощью последующих команд резервирования. Все выделенные и по-прежнему неиспользуемые места на диске не освобождаются до тех пор, пока не будут сохранены все записанные данные или пока не закроется экземпляр устройства.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/> |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>       |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[MCI](mci.md)
</dt> <dt>

[Строки команд MCI](mci-command-strings.md)
</dt> <dt>

[record](record.md)
</dt> <dt>

[сохранить](save.md)
</dt> <dt>

[сетаудио](setaudio.md)
</dt> <dt>

[сетвидео](setvideo.md)
</dt> </dl>

 

