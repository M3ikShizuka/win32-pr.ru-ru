---
title: Функции и сообщения, устанавливаемые драйвером
description: Функции и сообщения, устанавливаемые драйвером
ms.assetid: f487705a-ae8e-4ea8-bfd5-9b0f6087ddbb
keywords:
- устанавливаемые драйверы, функции
- устанавливаемые драйверы, сообщения
- устанавливаемые драйверы, функция Опендривер
- Функция Опендривер
- устанавливаемые драйверы, пользовательские сообщения
- сообщения драйвера
- пользовательские сообщения драйверов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c66e6ebaac73bf8eb779119750cb390481152c3f
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "103987470"
---
# <a name="installable-driver-functions-and-messages"></a>Функции и сообщения, устанавливаемые драйвером

Можно открыть устанавливаемый драйвер из приложения с помощью функции [**опендривер**](/windows/win32/api/mmiscapi/nf-mmiscapi-opendriver) . Эта функция создает экземпляр драйвера, загружает драйвер в память, если другой экземпляр не существует, и возвращает маркер нового экземпляра. При открытии устанавливаемого драйвера необходимо указать либо полный путь к драйверу, либо имена раздела реестра и значения, связанные с драйвером.

После открытия драйвера можно направить его для выполнения задач с помощью функции [**сенддривермессаже**](/windows/win32/api/mmiscapi/nf-mmiscapi-senddrivermessage) , которая отправляет драйверу сообщения драйвера. Например, можно настроить драйвер для показа диалогового окна конфигурации, отправив сообщение [**\_ Настройка DRV**](drv-configure.md) . Перед отправкой этого сообщения необходимо определить, есть ли у драйвера диалоговое окно конфигурации, отправив сообщение [**DRV \_ куериконфигуре**](drv-queryconfigure.md) и проверив наличие ненулевого возвращаемого значения. Многие драйверы предоставляют набор настраиваемых сообщений, которые можно отправить для направления операций драйвера.

Если вам нужен специальный доступ к устанавливаемому драйверу, например к его ресурсам, можно получить обработчик модуля драйвера с помощью функции [**жетдривермодулехандле**](/windows/win32/api/mmiscapi/nf-mmiscapi-getdrivermodulehandle) .

Если устанавливаемый драйвер больше не нужен, его можно закрыть с помощью функции [**клоседривер**](/windows/win32/api/mmiscapi/nf-mmiscapi-closedriver) .

Можно использовать функции и сообщения устанавливаемого драйвера, чтобы открыть любой устанавливаемый драйвер и управлять им. Однако для открытия и управления устройствами мультимедиа рекомендуется сначала использовать стандартные службы (например, [**вавеаутопен**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen), [**вавеаутмессаже**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutmessage)и [**вавеаутклосе**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutclose) для устройств вывода аудио), если они существуют. Если стандартные службы не существуют для драйвера мультимедиа, откройте драйвер и управляйте им с помощью функций и сообщений, устанавливаемых драйвером.

> [!Note]  
> Функции [**сенддривермессаже**](/windows/win32/api/mmiscapi/nf-mmiscapi-senddrivermessage) и [**жетдривермодулехандле**](/windows/win32/api/mmiscapi/nf-mmiscapi-getdrivermodulehandle) являются предпочтительными функциями, которые используются для отправки сообщений драйверу и для получения маркера к экземпляру модуля. Однако для обеспечения совместимости с предыдущими версиями операционной системы Windows включена старая функция [**дрвжетмодулехандле**](/windows/win32/api/mmiscapi/nf-mmiscapi-drvgetmodulehandle) .

 

 

 