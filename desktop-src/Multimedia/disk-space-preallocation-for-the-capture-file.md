---
title: Предварительное выделение дискового пространства для файла записи
description: Предварительное выделение дискового пространства для файла записи
ms.assetid: 7a11b769-65b9-4eaa-bc42-5d1d744bf181
keywords:
- Сообщение WM_CAP_FILE_ALLOCATE
- макрос Капфилеаллок
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 687a14fa0f3a01a65ad2cb90062fcd4e237eb3e94ef99460d77883bd26df9213
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119678767"
---
# <a name="disk-space-preallocation-for-the-capture-file"></a>Предварительное выделение дискового пространства для файла записи

Предварительное выделение дискового пространства для файла записи создает файл указанного размера на диске перед началом операции записи. Предварительное выделение файла записи сокращает объем обработки, необходимый для выполнения записи, и приводит к уменьшению количества удаленных кадров. Вы можете предварительно выделить файл записи с помощью сообщения [**о \_ \_ \_ выделении файла**](wm-cap-file-allocate.md) (или макроса [**Капфилеаллок**](/windows/desktop/api/Vfw/nf-vfw-capfilealloc) ) с закреплениями WM.

Как правило, приложение должно предварительно выделить достаточно места на диске, чтобы вместить самый большой из ожидаемых файлов записи. Предварительное выделение дискового пространства не ограничивает размер захваченного файла. Размер файла автоматически увеличивается, если захваченные данные выходят за пределы выделенного пространства. Последующие операции записи в файл записи повторно используют части места на диске, выделенные для файла, сохраняя размер и фрагментацию файла.

Можно также повысить производительность записи, дефрагментацию файла записи. Для дефрагментации файла используйте программу дефрагментации, например дефрагментацию диска. Если вы используете дефрагментированный файл записи и затем увеличите его, следует дефрагментировать увеличенный файл. Увеличение дефрагментированного файла записи может фрагментировать развернутую часть файла и снизить производительность операции записи.

Вы также можете повысить производительность, используя несжатый диск для записи видео. Сжатие данных во время записи может ограничить пропускную способность записи на диск.

Приложение может зарезервировать постоянный файл записи, чтобы исключить время, необходимое для предварительного выделения и дефрагментации файла при каждом запуске. Поскольку файл записи может потребовать значительного места на диске, а предварительное выделение файла записи удаляет все данные из существующего файла записи, приложение должно позволить пользователю решить, является ли файл постоянным или временным.

 

 




