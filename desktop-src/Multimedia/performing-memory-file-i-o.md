---
title: Выполнение файлового ввода-вывода в памяти
description: Выполнение файлового ввода-вывода в памяти
ms.assetid: c0a5c8a0-978f-47d9-8ef0-ad391b9d1e63
keywords:
- файловый ввод-вывод в формате мультимедиа, память
- файловый ввод-вывод, память
- входные и выходные данные (ввод-вывод), память
- Ввод-вывод (входные и выходные данные), память
- Ввод-вывод в память
- Функция Ммиупен
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 90a2b1e2e47ffccc21b2684dcb6bd285b7e55470776fb57eb382a969091a19e8
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119805894"
---
# <a name="performing-memory-file-io"></a>Выполнение файлового ввода-вывода в памяти

Службы файлового ввода-вывода позволяют обрабатывать блок памяти как файл. Это может быть полезно, если в памяти уже имеется образ файла. Файлы памяти позволяют сократить количество особых условий в коде, поскольку для операций ввода-вывода файлы памяти можно рассматривать как файлы на диске. Также можно использовать файлы памяти с буфером обмена.

Как и в случае с буферами ввода-вывода, файлы памяти могут использовать память, выделенную приложением или диспетчером файлового ввода-вывода. Кроме того, файлы памяти могут быть расширяемыми или нерасширяемыми. Когда файловый диспетчер ввода-вывода достигает конца расширяемого файла памяти, он разворачивает файл памяти по заранее определенному инкременту.

Чтобы открыть файл памяти, используйте функцию [**ммиупен**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmioopen) с параметром *сзфиленаме* , для которого установлено **значение NULL** , и \_ флаг MMIO ReadWrite, установленный в параметре *двопенфлагс* . Задайте параметр *лпммиоинфо* , чтобы он указывал на структуру [**ммиоинфо**](/previous-versions//dd757322(v=vs.85)) , которая была настроена следующим образом:

1.  Установите для элемента **Пиопрок** **значение NULL**.
2.  Установите для элемента **фкЦиопрок** значение FOURCC \_ MEM.
3.  Установите элемент **пчбуффер** , чтобы он указывал на блок памяти. Чтобы запросить, что диспетчер файлового ввода-вывода выделяет блок памяти, установите  для Пчбуффер **значение NULL**.
4.  Задайте для элемента **кчбуффер** начальный размер блока памяти.
5.  Задайте для элемента **адвинфо** минимальный размер расширения блока памяти. Для нерасширяемого файла памяти задайте для **Адвинфо** **значение NULL**.
6.  Задайте для всех остальных элементов нулевое значение.

Не существует ограничений на выделение памяти для использования в качестве нерасширяемого файла памяти.

 

 