---
title: Завершение записи ключей
description: Завершение записи ключей
ms.assetid: 932ed4ee-0928-41f7-a242-8b7435313647
keywords:
- Сообщение WM_CAP_GET_SEQUENCE_SETUP
- макрос Капкаптурежетсетуп
- Структура КАПТУРЕПАРМС
- Сообщение WM_CAP_SET_SEQUENCE_SETUP
- макрос Капкаптуресетсетуп
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a91d6ee7d07ed36c11cce7e888c9a9710f403cf9
ms.sourcegitcommit: 9eebab0ead09cecdbc24f5f84d56c8b6a7c22736
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2021
ms.locfileid: "124372315"
---
# <a name="keys-ending-capture"></a>Завершение записи ключей

Вы можете разрешить пользователю прервать сеанс записи, нажав клавишу или сочетание клавиш, или нажав правую или левую кнопку мыши. Если пользователь прерывает сеанс записи в режиме реального времени, содержимое файла записи удаляется. Если пользователь прерывает сеанс записи кадров, выполняется сохранение содержимого файла записи вплоть до точки прерывания записи.

Вы можете получить параметры для прерывания сеанса записи с помощью сообщения о [**\_ \_ \_ \_ настройке установки последовательностей WM Cap**](wm-cap-get-sequence-setup.md) (или макроса [**капкаптурежетсетуп**](/windows/desktop/api/Vfw/nf-vfw-capcapturegetsetup) ). Текущее нажатие клавиш сохраняется в элементе **вкэйаборт** структуры [**каптурепармс**](/windows/win32/api/vfw/ns-vfw-captureparms) . текущие параметры мыши хранятся в членах **фабортлефтмаусе** и **фабортригхтмаусе** . Можно задать новое сочетание клавиш или сочетаний клавиш, указав сочетание keyCode или KeyCode (как в сочетаниях клавиш CTRL или SHIFT) в качестве значения **вкэйаборт** или установите левую или правую кнопку мыши в качестве ключа прерывания, указав элемент **фабортлефтмаусе** или **фабортригхтмаусе** . После установки этих членов отправьте обновленную структуру **каптурепармс** в окно Capture с помощью сообщения [**\_ установки закрепления WM \_ Set \_ Sequence \_**](wm-cap-set-sequence-setup.md) (или макроса [**капкаптуресетсетуп**](/windows/desktop/api/Vfw/nf-vfw-capcapturesetsetup) ). Значение по умолчанию **вкэйаборт** — VK \_ Escape. Перед указанием нажатия клавиши, которая может прервать сеанс записи, необходимо вызвать функцию [RegisterHotKey](/windows/win32/api/winuser/nf-winuser-registerhotkey) . Значения **фабортлефтмаусе** и **фабортригхтмаусе** по умолчанию имеют **значение true**.

 

 