---
title: Разделы реестра WCS
description: WCS использует разделы реестра для сигнализации о возникновении определенных событий цветового профиля. Приложения должны запрашивать эти разделы реестра для обновленного состояния системного профиля цвета.
ms.assetid: e728efa0-e547-45b9-af85-1312766d2fe7
keywords:
- Цветовая система Windows (WCS), разделы реестра
- WCS (цветовая система Windows), разделы реестра
- Управление цветом изображений, разделы реестра
- Управление цветом, разделы реестра
- цвета, разделы реестра
- Справочник по WCS, разделы реестра
- Справочник по параметру WCS, разделам реестра
- Цветовая система Windows (WCS), реестр
- WCS (цветовая система Windows), реестр
- Управление цветом изображений, реестр
- Управление цветом, реестр
- цвета, реестр
- Справочник по WCS, реестр
- Справочник по WCS, реестру
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 95a1c0072d9a00fe0cff4a4dbe57af839f65731b
ms.sourcegitcommit: 3f366316c02c411c4c5e14620a699f6f30608634
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/04/2021
ms.locfileid: "105719864"
---
# <a name="wcs-registry-keys"></a>Разделы реестра WCS

WCS использует разделы реестра для сигнализации о возникновении определенных событий цветового профиля. Приложения должны запрашивать эти разделы реестра для обновленного состояния системного профиля цвета.

## <a name="active-color-profile-changed"></a>Активный цветовой профиль изменен

Приложениям может потребоваться реагирование на события изменения цветового профиля для устройства мониторинга. Это гарантирует, что у них всегда будет точная информация о цвете для целевого объекта, даже если пользователь или другое приложение изменило активный профиль для устройства.

### <a name="desktop-applications"></a>Классические приложения

Классические приложения должны прослушивать изменения в реестре, чтобы определить, когда изменились связи цветового профиля с помощью [**регнотифичанжекэйвалуе**](/windows/win32/api/winreg/nf-winreg-regnotifychangekeyvalue). Приложение должно регистрировать как для каждого пользователя, так и для изменения взаимосвязей профилей на уровне системы.

[**Регнотифичанжекэйвалуе**](/windows/win32/api/winreg/nf-winreg-regnotifychangekeyvalue) следует инициализировать с помощью hKey, предоставленного функцией [**RegOpenKeyEx**](/windows/win32/api/winreg/nf-winreg-regopenkeyexa). Параметр **RegOpenKeyEx** должен быть инициализирован с помощью следующих расположений в дереве реестра:



|                                  |                                                                                                                                                    |
|----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| Связи профилей отдельных пользователей    | **HKEY \_ текущее \_ ПОЛЬЗОВАТЕЛЬское программное обеспечение \\ Microsoft \\ Windows NT \\ CurrentVersion \\ ICM \\ профилеассоЦиатионс \\ Отображение \\ {4d36e96e-E325-11CE-BFC1-08002BE10318}** |
| Сопоставления профилей на уровне системы | **\_ \_ \\ Класс управления CurrentControlSet системы hKey локального компьютера \\ \\ \\ \\ {4d36e96e-E325-11CE-BFC1-08002BE10318}**                                        |



 

Когда приложение уведомляется об изменении раздела реестра, сначала необходимо запросить, используются ли ассоциации для каждого пользователя или для всей системы, вызвав [**вксжетусеперусерпрофилес**](/windows/win32/api/icm/nf-icm-wcsgetdefaultrenderingintent). Затем следует вызвать [**вксжетдефаултколорпрофиле**](/windows/win32/api/icm/nf-icm-wcsgetdefaultcolorprofile) с правильным значением [**\_ \_ \_ области управления профилями WCS**](/windows/win32/api/icm/ne-icm-wcs_profile_management_scope) , чтобы получить новый активный цветовой профиль для монитора. Обратите внимание, что не все изменения разделов реестра соответствуют фактическому изменению текущего активного цветового профиля. приложение должен проверяет, действительно ли изменился профиль, возвращенный **вксжетдефаултколорпрофиле** .

### <a name="universal-windows-uwp-apps"></a>Приложения универсальной платформы Windows (UWP)

Универсальные приложения для Windows не имеют доступа к указанным выше разделам реестра. Вместо этого они должны зарегистрировать обработчик для события [**DisplayInformation. колорпрофилечанжед**](/uwp/api/Windows.Graphics.Display.DisplayInformation) . Это событие вызывается при каждом изменении активного цветового профиля монитора, на котором выполняется приложение. Колорпрофилечанжед учитывает, используются ли сопоставления профилей на уровне пользователя или системы. Эти сведения являются абстрактными от приложений UWP.

При ответе на событие Колорпрофилечанжед приложение должно запрашивать текущий активный профиль с помощью [**DisplayInformation. жетколорпрофилеасинк**](/uwp/api/Windows.Graphics.Display.DisplayInformation).

 

 