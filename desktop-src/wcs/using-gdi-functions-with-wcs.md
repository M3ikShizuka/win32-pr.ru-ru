---
title: Использование функций GDI в WCS
description: В интерфейсе графических устройств (GDI) есть различные функции, которые используют данные цвета или работают с ними.
ms.assetid: a19ec8b9-11c9-4fde-a99a-7f4a112b49e7
keywords:
- Цветовая система Windows (WCS), интерфейс графических устройств (GDI)
- WCS (цветовая система Windows), интерфейс графических устройств (GDI)
- Управление цветом изображений, интерфейс графических устройств (GDI)
- Управление цветом, интерфейс графических устройств (GDI)
- цвета, интерфейс графических устройств (GDI)
- интерфейс графических устройств (GDI)
- GDI (интерфейс графических устройств)
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2fad8445623efb8854e81e7e1569beab9ed4169b
ms.sourcegitcommit: 099ecdda1e83618b844387405da0db0ebda93a65
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2021
ms.locfileid: "111443655"
---
# <a name="using-gdi-functions-with-wcs"></a><span data-ttu-id="82aee-110">Использование функций GDI в WCS</span><span class="sxs-lookup"><span data-stu-id="82aee-110">Using GDI Functions With WCS</span></span>

<span data-ttu-id="82aee-111">В интерфейсе графических устройств (GDI) есть различные функции, которые используют данные цвета или работают с ними.</span><span class="sxs-lookup"><span data-stu-id="82aee-111">There are various functions in the graphics device interface (GDI) that use or operate on color data.</span></span> <span data-ttu-id="82aee-112">Некоторые из них включены для использования с WCS, а другие — нет.</span><span class="sxs-lookup"><span data-stu-id="82aee-112">Some are enabled for use with WCS and some are not.</span></span> <span data-ttu-id="82aee-113">Следующие функции GDI относятся к ICM:</span><span class="sxs-lookup"><span data-stu-id="82aee-113">The following GDI functions are relevant to ICM:</span></span>

-   [<span data-ttu-id="82aee-114">Функции контекста устройства с WCS</span><span class="sxs-lookup"><span data-stu-id="82aee-114">Device Context Functions with WCS</span></span>](#device-context-functions-with-wcs)
-   [<span data-ttu-id="82aee-115">Функции пера и кисти с WCS</span><span class="sxs-lookup"><span data-stu-id="82aee-115">Pen And Brush Functions with WCS</span></span>](#pen-and-brush-functions-with-wcs)
-   [<span data-ttu-id="82aee-116">Функции вывода текста с помощью WCS</span><span class="sxs-lookup"><span data-stu-id="82aee-116">Text Output Functions with WCS</span></span>](#text-output-functions-with-wcs)
-   [<span data-ttu-id="82aee-117">Функции точечного рисунка с WCS</span><span class="sxs-lookup"><span data-stu-id="82aee-117">Bitmap Functions with WCS</span></span>](#bitmap-functions-with-wcs)

## <a name="device-context-functions-with-wcs"></a><span data-ttu-id="82aee-118">Функции контекста устройства с WCS</span><span class="sxs-lookup"><span data-stu-id="82aee-118">Device Context Functions with WCS</span></span>



|    <span data-ttu-id="82aee-119">Функция</span><span class="sxs-lookup"><span data-stu-id="82aee-119">Function</span></span>                |   <span data-ttu-id="82aee-120">Описание</span><span class="sxs-lookup"><span data-stu-id="82aee-120">Description</span></span>                                                                                                                                                                                                                              |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="82aee-121">креатекомпатибледк</span><span class="sxs-lookup"><span data-stu-id="82aee-121">CreateCompatibleDC</span></span> | <span data-ttu-id="82aee-122">Если контекст устройства (DC), переданный этой функции через параметр hdc, включен для ICM, то контроллер домена, создаваемый функцией, также поддерживает ICM.</span><span class="sxs-lookup"><span data-stu-id="82aee-122">If the device context (DC) that is passed to this function through its hdc parameter is enabled for ICM, then the DC the function creates is also ICM-enabled.</span></span> <span data-ttu-id="82aee-123">Исходные и целевые цветовые пространства указываются в контроллере домена.</span><span class="sxs-lookup"><span data-stu-id="82aee-123">The source and destination color spaces are specified in the DC.</span></span> |
| <span data-ttu-id="82aee-124">креатедк</span><span class="sxs-lookup"><span data-stu-id="82aee-124">CreateDC</span></span>           | <span data-ttu-id="82aee-125">ICM можно включить, задав для элемента Дмикммесод структуры DEVMODE, на которую указывает параметр Пинитдата, соответствующее значение.</span><span class="sxs-lookup"><span data-stu-id="82aee-125">ICM can be enabled by setting the dmICMMethod member of the DEVMODE structure pointed to by the pInitData parameter to the appropriate value.</span></span> <span data-ttu-id="82aee-126">Дополнительные сведения см. в документации по Platform SDK в структуре DEVMODE.</span><span class="sxs-lookup"><span data-stu-id="82aee-126">For details, see the documentation in the Platform SDK on the DEVMODE structure.</span></span>  |
| <span data-ttu-id="82aee-127">ресетдк</span><span class="sxs-lookup"><span data-stu-id="82aee-127">ResetDC</span></span>            | <span data-ttu-id="82aee-128">Цветовой профиль контекста устройства, заданного параметром hdc, будет сброшен на основе сведений в структуре DEVMODE, заданной параметром Лпинитдата.</span><span class="sxs-lookup"><span data-stu-id="82aee-128">The color profile of the device context specified by the hdc parameter will be reset based on the information in the DEVMODE structure specified by the lpInitData parameter.</span></span>                                                   |



 

## <a name="pen-and-brush-functions-with-wcs"></a><span data-ttu-id="82aee-129">Функции пера и кисти с WCS</span><span class="sxs-lookup"><span data-stu-id="82aee-129">Pen And Brush Functions with WCS</span></span>



|    <span data-ttu-id="82aee-130">Функция</span><span class="sxs-lookup"><span data-stu-id="82aee-130">Function</span></span>                |   <span data-ttu-id="82aee-131">Описание</span><span class="sxs-lookup"><span data-stu-id="82aee-131">Description</span></span>                                                                                                                                                                                                                              |
|-----------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="82aee-132">Функции кисти</span><span class="sxs-lookup"><span data-stu-id="82aee-132">Brush Functions</span></span> | <span data-ttu-id="82aee-133">Управление цветом не выполняется при создании кисти.</span><span class="sxs-lookup"><span data-stu-id="82aee-133">No color management is done at brush creation.</span></span> <span data-ttu-id="82aee-134">Однако Управление цветом будет выполняться при выборе кисти в контроллере домена с поддержкой ICM.</span><span class="sxs-lookup"><span data-stu-id="82aee-134">However, color management will be performed when the brush is selected into an ICM-enabled DC.</span></span> |
| <span data-ttu-id="82aee-135">креатепен</span><span class="sxs-lookup"><span data-stu-id="82aee-135">CreatePen</span></span>       | <span data-ttu-id="82aee-136">Управление цветом не выполняется при создании пера.</span><span class="sxs-lookup"><span data-stu-id="82aee-136">No color management is done at pen creation.</span></span> <span data-ttu-id="82aee-137">Однако Управление цветом будет выполняться при выборе кисти в контроллере домена с поддержкой ICM.</span><span class="sxs-lookup"><span data-stu-id="82aee-137">However, color management will be performed when the brush is selected into an ICM-enabled DC.</span></span>   |
| <span data-ttu-id="82aee-138">ексткреатепен</span><span class="sxs-lookup"><span data-stu-id="82aee-138">ExtCreatePen</span></span>    | <span data-ttu-id="82aee-139">Управление цветом не выполняется при создании пера.</span><span class="sxs-lookup"><span data-stu-id="82aee-139">No color management is done at pen creation.</span></span> <span data-ttu-id="82aee-140">Однако Управление цветом будет выполняться при выборе кисти в контроллере домена с поддержкой ICM.</span><span class="sxs-lookup"><span data-stu-id="82aee-140">However, color management will be performed when the brush is selected into an ICM-enabled DC.</span></span>   |
| <span data-ttu-id="82aee-141">SelectObject</span><span class="sxs-lookup"><span data-stu-id="82aee-141">SelectObject</span></span>    | <span data-ttu-id="82aee-142">Если выбранный объект является кистью или пером, выполняется управление цветом.</span><span class="sxs-lookup"><span data-stu-id="82aee-142">If the object being selected is a brush or a pen, color management is performed.</span></span>                                                              |
| <span data-ttu-id="82aee-143">сетдкбрушколор</span><span class="sxs-lookup"><span data-stu-id="82aee-143">SetDCBrushColor</span></span> | <span data-ttu-id="82aee-144">Управление цветом выполняется, если включен WCS.</span><span class="sxs-lookup"><span data-stu-id="82aee-144">Color management is performed if WCS is enabled.</span></span>                                                                                              |
| <span data-ttu-id="82aee-145">сетдкпенколор</span><span class="sxs-lookup"><span data-stu-id="82aee-145">SetDCPenColor</span></span>   | <span data-ttu-id="82aee-146">Управление цветом выполняется, если включен WCS.</span><span class="sxs-lookup"><span data-stu-id="82aee-146">Color management is performed if WCS is enabled.</span></span>                                                                                              |



 

## <a name="text-output-functions-with-wcs"></a><span data-ttu-id="82aee-147">Функции вывода текста с помощью WCS</span><span class="sxs-lookup"><span data-stu-id="82aee-147">Text Output Functions with WCS</span></span>



|    <span data-ttu-id="82aee-148">Функция</span><span class="sxs-lookup"><span data-stu-id="82aee-148">Function</span></span>                |   <span data-ttu-id="82aee-149">Описание</span><span class="sxs-lookup"><span data-stu-id="82aee-149">Description</span></span>                                                                                                                                                                                                                              |
|--------------|--------------------------------------------------|
| <span data-ttu-id="82aee-150">сетбкколор</span><span class="sxs-lookup"><span data-stu-id="82aee-150">SetBkColor</span></span>   | <span data-ttu-id="82aee-151">Управление цветом выполняется, если включен WCS.</span><span class="sxs-lookup"><span data-stu-id="82aee-151">Color management is performed if WCS is enabled.</span></span> |
| <span data-ttu-id="82aee-152">сеттекстколор</span><span class="sxs-lookup"><span data-stu-id="82aee-152">SetTextColor</span></span> | <span data-ttu-id="82aee-153">Управление цветом выполняется, если включен WCS.</span><span class="sxs-lookup"><span data-stu-id="82aee-153">Color management is performed if WCS is enabled.</span></span> |



 

## <a name="bitmap-functions-with-wcs"></a><span data-ttu-id="82aee-154">Функции точечного рисунка с WCS</span><span class="sxs-lookup"><span data-stu-id="82aee-154">Bitmap Functions with WCS</span></span>



|    <span data-ttu-id="82aee-155">Функция</span><span class="sxs-lookup"><span data-stu-id="82aee-155">Function</span></span>                |   <span data-ttu-id="82aee-156">Описание</span><span class="sxs-lookup"><span data-stu-id="82aee-156">Description</span></span>                                                                                                                                                                                                                              |
|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="82aee-157">BitBlt</span><span class="sxs-lookup"><span data-stu-id="82aee-157">BitBlt</span></span>            | <span data-ttu-id="82aee-158">При возникновении блитс управление цветом не выполняется.</span><span class="sxs-lookup"><span data-stu-id="82aee-158">No color management is performed when blits occur.</span></span>                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="82aee-159">креатедибитмап</span><span class="sxs-lookup"><span data-stu-id="82aee-159">CreateDIBitmap</span></span>    | <span data-ttu-id="82aee-160">Параметр Фуусаже указывает, что элемент Бмиколорс структуры БИТМАПИНФО, на который указывает параметр лпбми, не содержит сведений о цвете.</span><span class="sxs-lookup"><span data-stu-id="82aee-160">The fuUsage parameter specifies that the bmiColors member of the BITMAPINFO structure pointed at by the lpbmi parameter does or does not contain color information.</span></span> <span data-ttu-id="82aee-161">Если это не так, для этого точечного рисунка не выполняется управление цветом.</span><span class="sxs-lookup"><span data-stu-id="82aee-161">If it does not, no color management is performed for this bitmap.</span></span> <span data-ttu-id="82aee-162">Для включения управления цветом точечный рисунок должен использовать структуру БИТМАПИНФО версии 4 или 5.</span><span class="sxs-lookup"><span data-stu-id="82aee-162">The bitmap must use version 4 or version 5 of the BITMAPINFO structure for color management to be enabled.</span></span> <span data-ttu-id="82aee-163">После создания растрового изображения содержимое полученного точечного рисунка не соответствует цвету.</span><span class="sxs-lookup"><span data-stu-id="82aee-163">The contents of the resulting bitmap are not color matched after the bitmap has been created.</span></span> |
| <span data-ttu-id="82aee-164">креатедибсектион</span><span class="sxs-lookup"><span data-stu-id="82aee-164">CreateDIBSection</span></span>  | <span data-ttu-id="82aee-165">Если структура БИТМАПИНФО, передаваемая через параметр пбми, отличается от версии 4 или версии 5, управление цветом не выполняется.</span><span class="sxs-lookup"><span data-stu-id="82aee-165">If the BITMAPINFO structure passed through the pbmi parameter is not version 4 or version 5, no color management is done.</span></span> <span data-ttu-id="82aee-166">Если он имеет версию 4 или 5, управление цветом включено, а указанное цветовое пространство связано с точечным рисунком.</span><span class="sxs-lookup"><span data-stu-id="82aee-166">If it is version 4 or 5, color management is enabled, and the specified color space is associated with the bitmap.</span></span>                                                                                                                                                                                                   |
| <span data-ttu-id="82aee-167">маскблт</span><span class="sxs-lookup"><span data-stu-id="82aee-167">MaskBlt</span></span>           | <span data-ttu-id="82aee-168">При возникновении блитс управление цветом не выполняется.</span><span class="sxs-lookup"><span data-stu-id="82aee-168">No color management is performed when blits occur.</span></span>                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="82aee-169">SelectObject</span><span class="sxs-lookup"><span data-stu-id="82aee-169">SelectObject</span></span>      | <span data-ttu-id="82aee-170">Если объект является точечным рисунком, созданным с помощью Креатедибсектион, выполняется управление цветом.</span><span class="sxs-lookup"><span data-stu-id="82aee-170">If the object is a bitmap created with CreateDIBSection, color management is performed.</span></span> <span data-ttu-id="82aee-171">Цветовое пространство точечного рисунка используется в качестве цветового пространства назначения.</span><span class="sxs-lookup"><span data-stu-id="82aee-171">The bitmap's color space is used as the destination color space.</span></span>                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="82aee-172">сетдибитс</span><span class="sxs-lookup"><span data-stu-id="82aee-172">SetDIBits</span></span>         | <span data-ttu-id="82aee-173">Выполняется управление цветом.</span><span class="sxs-lookup"><span data-stu-id="82aee-173">Color management is performed.</span></span> <span data-ttu-id="82aee-174">Если указанная структура БИТМАПИНФО не имеет версию 4 или 5, цветовой профиль текущего контроллера домена используется в качестве исходного профиля цветового пространства.</span><span class="sxs-lookup"><span data-stu-id="82aee-174">If the specified BITMAPINFO structure is not version 4 or version 5, the color profile of the current DC is used as the source color space profile.</span></span> <span data-ttu-id="82aee-175">Если он отсутствует, используется пространство sRGB.</span><span class="sxs-lookup"><span data-stu-id="82aee-175">If it does not have one, the sRGB space is used.</span></span> <span data-ttu-id="82aee-176">Если указанная структура БИТМАПИНФО имеет версию 4 или 5, профиль цветового пространства, указанный в заголовке Bitmap, используется в качестве исходного профиля цветового пространства.</span><span class="sxs-lookup"><span data-stu-id="82aee-176">If the specified BITMAPINFO structure is version 4 or version 5, the color space profile specified in the bitmap header is used as the source color space profile.</span></span>                                         |
| <span data-ttu-id="82aee-177">сетдибитстодевице</span><span class="sxs-lookup"><span data-stu-id="82aee-177">SetDIBitsToDevice</span></span> | <span data-ttu-id="82aee-178">Выполняется управление цветом.</span><span class="sxs-lookup"><span data-stu-id="82aee-178">Color management is performed.</span></span> <span data-ttu-id="82aee-179">Если указанная структура БИТМАПИНФО не имеет версию 4 или 5, цветовой профиль текущего контекста устройства используется в качестве исходного профиля цветового пространства.</span><span class="sxs-lookup"><span data-stu-id="82aee-179">If the specified BITMAPINFO structure is not version 4 or version 5, the color profile of the current device context is used as the source color space profile.</span></span> <span data-ttu-id="82aee-180">Если у него нет такого пространства, используется цветовое пространство sRGB.</span><span class="sxs-lookup"><span data-stu-id="82aee-180">If it doesn't have one, the sRGB color space is used.</span></span> <span data-ttu-id="82aee-181">Если указанная структура БИТМАПИНФО имеет версию 4 или 5, профиль цветового пространства, связанный с точечным рисунком, используется в качестве исходного цветового пространства.</span><span class="sxs-lookup"><span data-stu-id="82aee-181">If the specified BITMAPINFO structure is version 4 or version 5, the color space profile associated with the bitmap is used as the source color space.</span></span>                                    |
| <span data-ttu-id="82aee-182">сетдибколортабле</span><span class="sxs-lookup"><span data-stu-id="82aee-182">SetDIBColorTable</span></span>  | <span data-ttu-id="82aee-183">Управление цветом не выполняется.</span><span class="sxs-lookup"><span data-stu-id="82aee-183">No color management is performed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="82aee-184">стретчблт</span><span class="sxs-lookup"><span data-stu-id="82aee-184">StretchBlt</span></span>        | <span data-ttu-id="82aee-185">При возникновении блитс управление цветом не выполняется.</span><span class="sxs-lookup"><span data-stu-id="82aee-185">No color management is performed when blits occur.</span></span>                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="82aee-186">стретчдибитс</span><span class="sxs-lookup"><span data-stu-id="82aee-186">StretchDIBits</span></span>     | <span data-ttu-id="82aee-187">Выполняется управление цветом.</span><span class="sxs-lookup"><span data-stu-id="82aee-187">Color management is performed.</span></span> <span data-ttu-id="82aee-188">Если указанная структура БИТМАПИНФО не имеет версию 4 или 5, цветовой профиль текущего контроллера домена используется в качестве исходного профиля цветового пространства.</span><span class="sxs-lookup"><span data-stu-id="82aee-188">If the specified BITMAPINFO structure is not version 4 or version 5, the color profile of the current DC is used as the source color space profile.</span></span> <span data-ttu-id="82aee-189">Если он отсутствует, используется пространство sRGB.</span><span class="sxs-lookup"><span data-stu-id="82aee-189">If it does not have one, the sRGB space is used.</span></span> <span data-ttu-id="82aee-190">Если указанная структура БИТМАПИНФО имеет версию 4 или 5, профиль цветового пространства, указанный в заголовке Bitmap, используется в качестве исходного профиля цветового пространства.</span><span class="sxs-lookup"><span data-stu-id="82aee-190">If the specified BITMAPINFO structure is version 4 or version 5, the color space profile specified in the bitmap header is used as the source color space profile.</span></span>                                         |



 

 

 




