---
description: Неправильно настроенный брандмауэр может привести к сбою приложений WSD.
ms.assetid: eba61235-29b4-463a-b7c5-d34d3b39b095
title: Проверка параметров адаптера и брандмауэра
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 490909c9f3acdc3025e72350118f303bfdae73d2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104344875"
---
# <a name="inspecting-adapter-and-firewall-settings"></a>Проверка параметров адаптера и брандмауэра

Неправильно настроенный брандмауэр может привести к сбою приложений WSD. В этом разделе приведены некоторые процедуры устранения неполадок, которые можно использовать, когда клиенты и узлы WSD не могут видеть друг друга в сети. Перед использованием любых других процедур устранения неполадок приложений необходимо проверить параметры брандмауэра.

**Проверка параметров адаптера и брандмауэра**

1.  Убедитесь, что исключение **обнаружения сети** включено.
2.  Убедитесь, что приложение не блокирует правила брандмауэра, зависящие от приложения.
3.  Явно включите порты, используемые для обнаружения и обмена метаданными.
4.  Отключите брандмауэр и повторно протестируйте приложение.
    > [!Note]  
    > После завершения этого шага необходимо снова включить брандмауэр.

     

## <a name="verifying-that-the-network-discovery-exception-is-enabled"></a>Проверка того, что исключение обнаружения сети включено

Если выполняются какие WS-Discovery приложения, необходимо разрешить исключение брандмауэра **сетевого обнаружения** .

**Включение исключения брандмауэра сетевого обнаружения**

1.  Нажмите кнопку **Пуск**, выберите пункт **выполнить** и введите **firewall.cpl**. Откроется окно приложения **панели управления Брандмауэр Windows** .
2.  Выберите **Разрешить программу через брандмауэр Windows**.
3.  На вкладке **исключения** установите флажок **Обнаружение сети** .
4.  Нажмите кнопку **ОК** , чтобы закрыть приложение брандмауэра.

Повторно протестируйте программу после внесения этого изменения в брандмауэр. Если программа теперь успешно работает, причина проблемы определена, и дальнейшие действия по устранению неполадок не требуются. В противном случае переходите к следующему шагу.

## <a name="checking-for-application-specific-firewall-rules"></a>Проверка правил брандмауэра, зависящих от приложения

Расширенная настройка брандмауэра Windows может выполняться в оснастке Microsoft Management Control (MMC) с именем " **Брандмауэр Windows в области повышенной безопасности**". Эту оснастку можно использовать для устранения возможных проблем с брандмауэром.

Для создания правил брандмауэра, применяемых к приложениям WSD, разработчики могут использовать [Брандмауэр Windows в составе](/previous-versions/windows/desktop/ics/windows-firewall-with-advanced-security-reference) API-интерфейсов повышенной безопасности. В частности, метод [**Add**](/previous-versions/windows/desktop/api/netfw/nf-netfw-inetfwrules-add) интерфейса [**инетфврулес**](/previous-versions/windows/desktop/api/netfw/nn-netfw-inetfwrules) можно использовать для добавления нового правила брандмауэра. Если правила брандмауэра созданы неправильно, клиенты и узлы могут не видеть друг друга в сети.

**Проверка правил брандмауэра, зависящих от приложения**

1.  Нажмите кнопку **Пуск**, выберите пункт **выполнить** и введите **WF. msc**.
2.  Найдите правила для конкретного приложения, которые могут блокировать трафик. Дополнительные сведения см. в разделе [Брандмауэр Windows в расширенной безопасности — средства диагностики и устранения неполадок](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc722062(v=ws.10)?ocid=fwlink).
3.  Удалите правила для конкретных приложений.

Если правила для конкретного приложения не найдены, переходите к следующему шагу. Если правило для конкретного приложения было найдено и удалено, повторно протестируйте программу после внесения изменений в брандмауэр. Если программа теперь успешно работает, причина проблемы определена, и дальнейшие действия по устранению неполадок не требуются. В противном случае переходите к следующему шагу.

## <a name="enabling-the-ports-used-for-discovery-and-metadata-exchange"></a>Включение портов, используемых для обнаружения и обмена метаданными

WS-Discovery использует UDP-порт 3702 для обмена сообщениями. Кроме того, для обмена метаданными иногда используются TCP-порты 5357 и 5358. Эти порты можно явно открыть в брандмауэре, выполнив процедуры, описанные в разделе [Открытие порта в брандмауэре Windows](https://windowshelp.microsoft.com/Windows/Help/4da18300-9044-47b6-9038-595c78db81ab1033.mspx).

Повторно протестируйте программу после внесения этого изменения в брандмауэр. Если программа теперь успешно работает, причина проблемы определена, и дальнейшие действия по устранению неполадок не требуются. В противном случае переходите к следующему шагу.

## <a name="disabling-the-firewall"></a>Отключение брандмауэра

Брандмауэр Windows можно отключить, чтобы помочь в устранении возможных проблем. Другие применимые брандмауэры (например, брандмауэр на маршрутизаторе) также можно отключить в целях устранения неполадок. Сведения о включении и отключении брандмауэра Windows см. [в разделе Включение или отключение брандмауэра](https://windowshelp.microsoft.com/Windows/Help/bfe523a9-7eec-4d3f-add1-2f68b9cfa1c01033.mspx)Windows.

Повторно протестируйте приложение после отключения всех применимых брандмауэров. Если программа теперь работает успешно, брандмауэр блокирует трафик. Существует несколько возможных причин блокировки трафика.

-   Трафик блокируется исключениями, специфичными для приложения. Проверьте правила брандмауэра, зависящие от приложения, как описано выше.
-   Устройство заняло слишком много времени для ответа на UDP-запросы. Брандмауэр Windows может блокировать UDP-ответы, которые возвращают более 4 секунд после отправки первоначального запроса. Продолжайте устранение неполадок, выполнив процедуры, описанные в разделе [Использование универсального узла и клиента для UDP WS-Discovery](using-a-generic-host-and-client-for-udp-ws-discovery.md) , чтобы узнать, не возникает ли проблема с узлом, который реагирует менее чем на 4 секунды.

Если после отключения брандмауэра приложение по-прежнему не работает, брандмауэр не вызывает сбой приложения. Повторно включите брандмауэры и продолжайте устранение неполадок, выполнив процедуры, описанные в статье [Использование универсального узла и клиента для протокола UDP WS-Discovery](using-a-generic-host-and-client-for-udp-ws-discovery.md).

После устранения неполадок брандмауэры всегда должны быть включены снова.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Процедуры диагностики WSDAPI](wsdapi-diagnostic-procedures.md)
</dt> <dt>

[начало работы с разрешениями WSDAPI](getting-started-with-wsdapi-troubleshooting.md)
</dt> </dl>

 

 
