---
description: Неправильно настроенный брандмауэр может привести к сбою приложений WSD.
ms.assetid: eba61235-29b4-463a-b7c5-d34d3b39b095
title: проверка Параметры адаптера и брандмауэра
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 62ea14051ac65dbd0b749fa00566afc9ed82e5571f6027dafa003e12013888b7
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119130786"
---
# <a name="inspecting-adapter-and-firewall-settings"></a>проверка Параметры адаптера и брандмауэра

Неправильно настроенный брандмауэр может привести к сбою приложений WSD. В этом разделе приведены некоторые процедуры устранения неполадок, которые можно использовать, когда клиенты и узлы WSD не могут видеть друг друга в сети. Перед использованием любых других процедур устранения неполадок приложений необходимо проверить параметры брандмауэра.

**Проверка параметров адаптера и брандмауэра**

1.  Убедитесь, что исключение **обнаружения сети** включено.
2.  Убедитесь, что приложение не блокирует правила брандмауэра, зависящие от приложения.
3.  Явно включите порты, используемые для обнаружения и обмена метаданными.
4.  Отключите брандмауэр и повторно протестируйте приложение.
    > [!Note]  
    > После завершения этого шага необходимо снова включить брандмауэр.

     

## <a name="verifying-that-the-network-discovery-exception-is-enabled"></a>Проверка того, что исключение обнаружения сети включено

Если выполняются какие WS-Discovery приложения, необходимо разрешить исключение брандмауэра **сетевого обнаружения** .

**Включение исключения брандмауэра сетевого обнаружения**

1.  Нажмите кнопку **Пуск**, выберите пункт **выполнить** и введите **firewall.cpl**. откроется **панель управления брандмауэра Windows** .
2.  выберите **разрешить программу через Windows брандмауэр**.
3.  На вкладке **исключения** установите флажок **Обнаружение сети** .
4.  Нажмите кнопку **ОК** , чтобы закрыть приложение брандмауэра.

Повторно протестируйте программу после внесения этого изменения в брандмауэр. Если программа теперь успешно работает, причина проблемы определена, и дальнейшие действия по устранению неполадок не требуются. В противном случае переходите к следующему шагу.

## <a name="checking-for-application-specific-firewall-rules"></a>Проверка правил брандмауэра, зависящих от приложения

расширенная настройка брандмауэра Windows может быть выполнена в оснастке управления Microsoft Management Control (MMC) с именем **Windows брандмауэр с повышенной безопасностью**. Эту оснастку можно использовать для устранения возможных проблем с брандмауэром.

разработчики могут использовать [Windows брандмауэр с расширенными](/previous-versions/windows/desktop/ics/windows-firewall-with-advanced-security-reference) api-интерфейсами безопасности для создания правил брандмауэра, которые применяются к их приложениям WSD. В частности, метод [**Add**](/previous-versions/windows/desktop/api/netfw/nf-netfw-inetfwrules-add) интерфейса [**инетфврулес**](/previous-versions/windows/desktop/api/netfw/nn-netfw-inetfwrules) можно использовать для добавления нового правила брандмауэра. Если правила брандмауэра созданы неправильно, клиенты и узлы могут не видеть друг друга в сети.

**Проверка правил брандмауэра, зависящих от приложения**

1.  Нажмите кнопку **Пуск**, выберите пункт **выполнить** и введите **WF. msc**.
2.  Найдите правила для конкретного приложения, которые могут блокировать трафик. дополнительные сведения см. в разделе [Windows Firewall and Advanced Security-Diagnostics and устранение неполадок](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc722062(v=ws.10)?ocid=fwlink).
3.  Удалите правила для конкретных приложений.

Если правила для конкретного приложения не найдены, переходите к следующему шагу. Если правило для конкретного приложения было найдено и удалено, повторно протестируйте программу после внесения изменений в брандмауэр. Если программа теперь успешно работает, причина проблемы определена, и дальнейшие действия по устранению неполадок не требуются. В противном случае переходите к следующему шагу.

## <a name="enabling-the-ports-used-for-discovery-and-metadata-exchange"></a>Включение портов, используемых для обнаружения и обмена метаданными

WS-Discovery использует UDP-порт 3702 для обмена сообщениями. Кроме того, для обмена метаданными иногда используются TCP-порты 5357 и 5358. эти порты можно явно открыть в брандмауэре, выполнив процедуры, описанные в разделе [открытие порта в Windows брандмауэре](https://windowshelp.microsoft.com/Windows/Help/4da18300-9044-47b6-9038-595c78db81ab1033.mspx).

Повторно протестируйте программу после внесения этого изменения в брандмауэр. Если программа теперь успешно работает, причина проблемы определена, и дальнейшие действия по устранению неполадок не требуются. В противном случае переходите к следующему шагу.

## <a name="disabling-the-firewall"></a>Отключение брандмауэра

брандмауэр Windows можно отключить, чтобы помочь устранить возможные проблемы. Другие применимые брандмауэры (например, брандмауэр на маршрутизаторе) также можно отключить в целях устранения неполадок. сведения о включении и отключении брандмауэра Windows см. [в разделе включение и отключение Windows брандмауэра](https://windowshelp.microsoft.com/Windows/Help/bfe523a9-7eec-4d3f-add1-2f68b9cfa1c01033.mspx).

Повторно протестируйте приложение после отключения всех применимых брандмауэров. Если программа теперь работает успешно, брандмауэр блокирует трафик. Существует несколько возможных причин блокировки трафика.

-   Трафик блокируется исключениями, специфичными для приложения. Проверьте правила брандмауэра, зависящие от приложения, как описано выше.
-   Устройство заняло слишком много времени для ответа на UDP-запросы. Windows брандмауэр может блокировать UDP-ответы, которые возвращают более 4 секунд после отправки первоначального запроса. Продолжайте устранение неполадок, выполнив процедуры, описанные в разделе [Использование универсального узла и клиента для UDP WS-Discovery](using-a-generic-host-and-client-for-udp-ws-discovery.md) , чтобы узнать, не возникает ли проблема с узлом, который реагирует менее чем на 4 секунды.

Если после отключения брандмауэра приложение по-прежнему не работает, брандмауэр не вызывает сбой приложения. Повторно включите брандмауэры и продолжайте устранение неполадок, выполнив процедуры, описанные в статье [Использование универсального узла и клиента для протокола UDP WS-Discovery](using-a-generic-host-and-client-for-udp-ws-discovery.md).

После устранения неполадок брандмауэры всегда должны быть включены снова.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Процедуры диагностики WSDAPI](wsdapi-diagnostic-procedures.md)
</dt> <dt>

[начало работы с разрешениями WSDAPI](getting-started-with-wsdapi-troubleshooting.md)
</dt> </dl>

 

 
