---
description: Если клиент и узел не могут видеть друг друга в сети, то для пользовательского узла и клиента можно заменить универсальный узел и клиент, чтобы помочь устранить проблему.
ms.assetid: e82ce911-b2a7-4a57-a2f0-9aca6b74478f
title: Использование универсального узла и клиента для UDP-WS-Discovery
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ae6af77529116e21848e22812e04322273e08f1f0cf4d107787b4039b2442b19
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118991494"
---
# <a name="using-a-generic-host-and-client-for-udp-ws-discovery"></a>Использование универсального узла и клиента для UDP-WS-Discovery

Если клиент и узел не могут видеть друг друга в сети, то для пользовательского узла и клиента можно заменить универсальный узел и клиент, чтобы помочь устранить проблему. Если адрес устройства не отображается в выходных данных клиента отладки WSD, то, вероятно, причиной сбоя является сетевая среда. Дополнительные сведения об универсальном узле и клиенте см. в разделе [средства отладки](debugging-tools.md).

Если узел или клиент является приложением, запущенным на компьютере, универсальный узел или клиент должны быть запущены в том же контексте безопасности, что и фактический узел или клиент. Например, если фактический узел или клиент работает от имени администратора, то универсальный узел или клиент должен работать от имени администратора. Кроме того, если узел или клиент является автономным устройством, он должен быть полностью заменен ПК, на котором работает универсальный узел или клиент.

**Использование универсального узла и клиента для устранения неполадок при использовании протокола UDP WS-Discovery**

1.  Откройте окно командной строки.
2.  Выполните следующую команду: **всддебуг \_host.exe/Mode Metadata/Start**

    > [!Note]  
    > может появиться диалоговое окно **Безопасность Windows предупреждения** . Если это так, нажмите кнопку **разблокировать** , чтобы разрешить запуск узла отладки WSD.

     

    Эта команда создает выходные данные, аналогичные приведенным ниже. Запишите идентификатор устройства.

    ``` syntax
    WSDAPI Debug Host
    Copyright (C) Microsoft Corporation 2007.  All rights reserved.
    Device ID is urn:uuid:37f86d35-e6ac-4241-964f-1d9ae46fb366
    Host metadata>
    ```

3.  Выполните следующую команду: **всддебуг \_client.exe/Mode Metadata/Хелло/ресолве** *<id>* . Замените *<id>* идентификатором устройства, указанным на шаге 2.
    > [!Note]  
    > может появиться диалоговое окно **Безопасность Windows предупреждения** . Если это так, нажмите кнопку **разблокировать** , чтобы разрешить запуск клиента отладки WSD.

     

Клиент отладки WSD создает выходные данные, аналогичные приведенным ниже.

``` syntax
WSDAPI Debug Client
Copyright (C) Microsoft Corporation 2007.  All rights reserved.
Client ID is urn:uuid:0f571af7-6b0e-4daf-8054-f2233ac27910
Hello mode is disabled
Client metadata>
*****************************************************************************
Add at 02/28/07 15:16:51
+ EPR:
  + Address:                 urn:uuid:37f86d35-e6ac-4241-964f-1d9ae46fb366
+ Types:
    (wsdp) https://schemas.xmlsoap.org/ws/2006/02/devprof:Device
+ XAddrs:
  https://[::1]:5357/37f86d35-e6ac-4241-964f-1d9ae46fb366
+ Metadata version:          2
+ Instance ID:               1
+ Probe/Resolve tag:         WSDAPI debug_client
+ Remote transport address:  [::1]:3702
+ Local transport address:   ::1
+ Local interface GUID:      42133cd4-6a70-11db-bbc9-806e6f6e6963
Client metadata>
```

Клиент отладки WSD может создавать большой объем выходных данных в сети с множеством устройств DPWS. Выходные данные можно перенаправить в файл для упрощения анализа. Введите **log tee** *<filename>* в командной строке клиента отладки WSD, чтобы перенаправить вывод в файл. Перенаправление выходных данных можно остановить, введя **log tee остановиться** в командной строке клиента отладки WSD.

Запишите адрес ссылки на конечную точку (EPR). Этот адрес EPR должен соответствовать ИДЕНТИФИКАТОРу устройства, указанному на шаге 2 выше. В этом случае сбой приложения, скорее всего, не связан с операционной системой или сетевой средой. Замените универсальный узел и клиент пользовательским узлом и клиентом и продолжайте устранение неполадок, выполнив процедуры, описанные в статье [Использование клиента отладки WSD для проверки многоадресного трафика](using-wsddebug-client-to-verify-multicast-traffic.md).

Если идентификатор устройства не совпадает с адресом EPR, вероятно, сбой приложения связан с операционной системой или сетевой средой. Сбой может быть вызван одной или несколькими из следующих причин:

-   Приложение выполняется в неправильном контексте безопасности. Убедитесь, что приложение использует правильные учетные данные, а клиент и узел имеют достаточные разрешения для доступа к сети.
-   Неправильная конфигурация брандмауэра. следуйте инструкциям в разделе [проверка параметров брандмауэра и Параметры брандмауэра](inspecting-adapter-and-firewall-settings.md) , чтобы убедиться в правильности настроек Windows брандмауэре и отсутствии других правил удаления пакетов. Клиент и узел также можно скопировать на компьютер "поддерживалась" (один с установкой операционной системы по умолчанию, которая никогда не присоединяется к домену), чтобы попытаться воспроизвести сбой.
-   Политика IPSec блокирует приложение. Скопируйте клиент и узел на компьютер, не подчиняются политикам IPSec, и попробуйте воспроизвести сбой.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Процедуры диагностики WSDAPI](wsdapi-diagnostic-procedures.md)
</dt> <dt>

[начало работы с разрешениями WSDAPI](getting-started-with-wsdapi-troubleshooting.md)
</dt> </dl>

 

 



