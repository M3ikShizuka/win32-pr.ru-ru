---
description: В этом разделе описывается, как WSDAPI реализует функциональность елективе в спецификации Devices for Web Services (DPWS). Он также описывает, какие функции DPWS пропущены в реализации WSDAPI.
ms.assetid: 54d51e56-8022-4696-b488-4b3a226224d8
title: Соответствие спецификации DPWS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ce59ba29e8e36fd5030732c0b61a2dfd164d9c887bdd9881a775c8b1ce6ec353
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119130835"
---
# <a name="dpws-specification-compliance"></a>Соответствие спецификации DPWS

В этом разделе описывается, как WSDAPI реализует функциональность елективе в спецификации [Devices for Web Services](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS). Он также описывает, какие функции DPWS пропущены в реализации WSDAPI.

Спецификация DPWS обеспечивает единообразный способ обмена сообщениями с устройствами. Он также добавляет определенные ограничения и рекомендации, которые упрощают процесс поддержки веб-служб на внедренном оборудовании.

Спецификация DPWS описывает функциональность елективе с помощью терминов, которые могут быть в данной рекомендации или ограничены. Пропущенные функциональные возможности могут быть реализованы в спецификации DPWS, которая не была реализована в WSDAPI, или в функции, реализуемой WSDAPI в методе, который указан в спецификации DPWS.

Этот раздел соответствует макету раздела DPWS. В каждом разделе описывается, как определенные ограничения, требования и функции елективе обрабатываются реализацией WSDAPI. Этот раздел лучше читать в сочетании со спецификацией DPWS.

## <a name="dpws-30-messaging"></a>Обмен сообщениями DPWS 3,0

### <a name="dpws-31-uri-formats"></a>Форматы URI DPWS 3,1

Ограничения R0025 и R0027 ограничивают URI МАКСИМАЛЬным \_ \_ октетом размера URI. Протокол WSDAPI принудительно применяет указанные ниже ограничения.

### <a name="dpws-32-udp-messaging"></a>Обмен сообщениями UDP DPWS 3,2

Рекомендация R0029 предлагает не отправлять UDP-пакеты, превышающие максимальный размер блока передачи (MTU) для UDP. WSDAPI не реализует эту рекомендацию и позволит реализациям отправлять и получать сообщения обнаружения, превышающие MTU.

### <a name="dpws-33-http-messaging"></a>Обмен сообщениями HTTP DPWS 3,3

R0001 требует, чтобы службы поддерживали блочную пересылку. WSDAPI принимает фрагментированные данные в сообщениях запроса и будет отсылать фрагментированные данные в сообщениях запроса.

R0012 и R0013 описывают необходимые части привязки HTTP SOAP. Для R0012 протокол WSDAPI реализует HTTP-привязку SOAP, но не начинает чтение HTTP-ответа до тех пор, пока WSDAPI не завершит отправку HTTP-запроса. WSDAPI реализует требуемый шаблон обмена сообщениями в R0013, реализует необязательный узел SOAP в R0014 и не реализует дополнительный компонент веб-метода в R0015. WSDAPI также поддерживает требования в R0030 и R0017.

### <a name="dpws-34-soap-envelope"></a>Конверт SOAP DPWS 3,4

WSDAPI поддерживает R0034 и по умолчанию применяет R0003 и R0026. В частности, в соответствии с R0003 и R0026, если WSDAPI получает конверт SOAP, размер которого превышает максимально допустимый \_ \_ по сравнению с HTTP, он отклоняется и соединение закрывается.

### <a name="dpws-35-ws-addressing"></a>DPWS 3,5 WS-Addressing

R0004 отражает рекомендуемое использование API устройства в WSDAPI и поддерживается API клиента в WSDAPI. Поскольку это рекомендация, WSDAPI позволяет клиентам и устройствам использовать URI, отличные от `urn:uuid` URI для конечных точек устройств, чтобы обеспечить максимальную совместимость. Так как API устройства в WSDAPI не сохраняет состояние между инициализациями, для обеспечения надлежащей поддержки R0005 и R0006 разработчики приложений используют API устройства в WSDAPI. Клиентский API в WSDAPI предполагает, что удостоверения устройств являются уникальными и постоянными, и функциональные возможности, основанные на API клиента в WSDAPI (например, PnP-X), потребовались бы для правильного распознавания устройства при перезагрузке устройства.

R0007 рекомендует использовать ссылочные свойства в ссылках на конечные точки. WSDAPI по-прежнему распознает и принимает конечные точки со свойствами ссылок, и разработчики могут использовать их, но по умолчанию WSDAPI не будет заполнять их в создаваемых конечных точках. Аналогично, когда WSDAPI создает конечные точки службы с помощью R0042, он будет использовать транспортный адрес HTTP или HTTPS, но не требует, чтобы устройства использовали транспортные адреса HTTP или HTTPS в своих конечных точках службы. Поведение клиента при попытке взаимодействия со службой, которая не использует протоколы HTTP или HTTPS, не определена.

В случае сбоя R0031 ограничивает конечную точку ответа и описывает ошибку для отправки, если ошибка не является анонимной. WSDAPI заставляет конечную точку ответа использовать правильное значение при отправке сообщений и правильно выполнить ошибку, если WSDAPI получает сообщение запроса с неверной конечной точкой ответа. R0041 предоставляет реализации возможность удалить ошибку, если конечная точка ответа недопустима. Вместо удаления ошибки WSDAPI отправляет ошибку обратно в канал запроса, адресованную анонимной конечной точке, в качестве наиболее эффективного способа взаимодействия с клиентом.

Наконец, существуют два ограничения для заголовков SOAP, R0019 и R0040, которые оба протокола WSDAPI соответствуют и применяют к полученным сообщениям.

### <a name="dpws-36-attachments"></a>Вложения DPWS 3,6

WSDAPI поддерживает вложения и соответствует R0022. WSDAPI также соответствует R0037. При отправке вложений WSDAPI всегда устанавливает кодировку передачи содержимого "двоичный" для всех частей MIME. Однако WSDAPI не применяет R0036. Поведение WSDAPI при получении части MIME с кодировкой для обмена содержимым, не установленной в binary, не определена.

DPWS также определяет предложения упорядочения частей MIME. Для R0038 протокол WSDAPI будет применять упорядочение части и отклоняет сообщение MIME, если конверт SOAP не является первой частью MIME. Для R0039 WSDAPI всегда будет отсылать конверт SOAP как первую часть MIME.

## <a name="dpws-40-discovery"></a>Обнаружение DPWS 4,0

R1013 и R1001 отличают обнаружение устройств и обнаружение служб. WSDAPI соответствует R1013. Реализация размещения соответствует R1001, но WSDAPI не применяет эту рекомендацию к клиенту.

DPWS также предоставляет рекомендации по типам и правилам сопоставления областей. WSDAPI поддерживает все правила сопоставления области, определенные в [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) , кроме LDAP. WSDAPI также предоставляет расширяемую модель для определения правил сопоставления пользовательской области, что обеспечивает согласованность с R1019. API размещения также всегда будет предоставлять `wsdp:Device` Тип обнаружения для каждого R1020, но клиентский API не требует его наличия. Другие приложения, созданные на базе WSDAPI, такие как PnP-X, имеют жесткое требование для `wsdp:Device` типа, присутствующего в процессе обнаружения.

Чтобы упростить обнаружение и привязку, WSDAPI поддерживает R1009 и R1016. Для каждого R1018 WSDAPI игнорирует многоадресный UDP, не отправленный анонимному адресу. R1015, R1021 и R1022 определяют привязку HTTP для сообщения пробы, которое в WSDAPI поддерживает, как описано.

## <a name="dpws-50-description"></a>Описание DPWS 5,0

WSDAPI принудительно применяет R2044 на клиенте. На стороне размещения WSDAPI будет предоставлять `wsx:Metadata` элемент только в теле конверта SOAP. R2045 позволяет устройствам поддерживать подмножество функций [WS-передач](https://specs.xmlsoap.org/ws/2004/09/transfer/WS-Transfer.pdf) . API размещения всегда будет создавать `wsa:ActionNotSupported` ошибку.

### <a name="dpws-51-characteristics"></a>Характеристики DPWS 5,1

DPWS описывает основные характеристики устройства. В дополнение к ограничениям, описанным в этом разделе, ограничения длины определяются для конкретных строк и URI. WSDAPI обеспечивает ограничение длины в этом DPWS разделе 5,1 перед отправкой сообщения или после синтаксического анализа его содержимого.

DPWS также описывает необходимые разделы метаданных и циклическую версию метаданных. Реализация клиента обеспечивает принудительное присутствие метаданных Сисмодел и Сисдевице. Реализация размещения также правильно управляет версией метаданных и всегда предоставляет эти разделы, соответствующие R2038, R2012, R2001, R2039, R2014 и R2002.

### <a name="dpws-52-hosting"></a>Размещение DPWS 5,2

В этом разделе описывается иерархия служб и метаданных отношений. WSDAPI не обеспечивает уникальность ServiceId, как описано в этом разделе на стороне клиента или устройства.

WSDAPI соответствует R2040, и реализация размещения может отправить ответ метаданных без раздела связи, если нет размещенных служб. Реализация клиента правильно принимает ответ на метаданные.

R2029 позволяет использовать несколько секций связи в ответе на метаданные, которые WSDAPI будет правильно принимать. R2030 и R2042 описывают Управление версией метаданных, которая правильно реализована в API размещения.

### <a name="dpws-53-wsdl"></a>DPWS 5,3 WSDL

Если служба предоставляет данные языка описания веб-служб (WSDL), клиентские реализации могут получить определение службы и манипулировать службой на лету. Это используется клиентами с поздним связыванием. Реализация клиента WSDAPI будет принимать язык WSDL, предоставленный службой, но клиент не проверяет его, и клиент не предоставляет модель программирования с поздним связыванием. Реализацию размещения можно использовать для предоставления WSDL, но для этого узла не требуется, так как метаданные уровня обслуживания не управляются самим узлом.

### <a name="dpws-54-ws-policy"></a>DPWS 5,4 WS-Policy

DPWS описывает утверждения политики, которые будут использоваться для устройств. Поскольку WSDAPI не предоставляет и не интерпретирует WSDL, он не может распознать и применить политику, внедренную в данные WSDL.

## <a name="dpws-60-eventing"></a>DPWS 6,0. события

### <a name="dpws-61-subscription"></a>Подписка DPWS 6,1

Для DPWS требуется поддержка доставки push. WSDAPI реализует доставку Push на стороне службы, что обеспечивает соответствие требованиям R3009 и R3010 и принимает только режим доставки push на стороне клиента. R3017 и R3018 нуждаются в конкретных сбоях службы, если они не распознают `NotifyTo` адреса или `EndTo` . WSDAPI не проверяет эти адреса заранее и не создает эти ошибки. Однако в реализации клиента эти ошибки будут распознаны правильно. Аналогичным образом, R3019 является необязательным, а WSDAPI не реализует эту рекомендацию, но реализация клиента правильно распознает `SubscriptionEnd` сообщение и сообщит приложению о сбое доставки.

### <a name="dpws-611-filtering"></a>Фильтрация 6.1.1 DPWS

WSDAPI соответствует R3008 и реализует `Action` фильтр. В соответствии с R3011 и R3012 WSDAPI не будет создавать ошибки в указанных условиях. WSDAPI также реализует сбой, описанный в R3020, если он не распознает действия, на которые он запрашивает фильтрацию.

### <a name="dpws-62-subscription-duration-and-renewal"></a>Длительность и продление срока действия подписки DPWS 6,2

WSDAPI соответствует R3005, R3006 и R3016. WSDAPI всегда будет использовать `xs:duration` , но будет принимать `xs:dateTime` , если он предоставлен, и поэтому не будет выдавать необязательную ошибку в R3013. WSDAPI поддерживает `GetStatus` и не будет выдавать `wsa:ActionNotSupported` ошибку для каждого R3015. WSDAPI принимает `wsa:ActionNotSupported` ошибку, если служба отвечает на `GetStatus` запрос.

## <a name="dpws-70-security"></a>Безопасность DPWS 7,0

DPWS описывает рекомендуемую модель безопасности для устройств. WSDAPI не реализует эти рекомендации, как описано выше, и не обеспечивает соблюдение ограничений, описанных в этом разделе.

## <a name="dpws-appendix-i"></a>Приложение DPWS I

DPWS изменяет глобальные константы из других спецификаций в соответствии с устройствами. WSDAPI использует константы из этого раздела и переопределяет константы по умолчанию в реализации [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) с этими константами. Приложения, использующие WSDAPI для WS-Discovery, будут привязаны к константам, определенным в DPWS, а не к константам, определенным в [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf).

 

 



