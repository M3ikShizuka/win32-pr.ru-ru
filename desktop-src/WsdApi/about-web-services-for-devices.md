---
description: API веб-службы на устройствах (WSDAPI) — это реализация профиля устройств для веб-служб (DPWS) для Windows Vista и Windows Server 2008.
ms.assetid: 8eaeacb3-43db-4a57-8548-e5b81213269c
title: О веб-службах на устройствах
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3c7facef3bfed004a834e151db0c58c83a1576e515ed89fa0d690813bc4c18bd
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118552524"
---
# <a name="about-web-services-on-devices"></a>О веб-службах на устройствах

API веб-службы на устройствах (WSDAPI) — это реализация [профиля устройств для веб-служб](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) для Windows Vista и Windows Server 2008. DPWS ограничивает спецификации веб-служб, чтобы клиенты могли легко обнаруживать устройства. После обнаружения устройства клиент может получить описание служб, размещенных на этом устройстве, и использовать эти службы.

## <a name="devices-and-services"></a>Устройства и службы

*Устройства* — это компоненты (обычно оборудование), подключенные к сети. К примерам относятся принтеры, веб-камеры и видеосистемы.

Устройства могут содержать ноль или более *служб*. Например, видеоустройство может включать службы, поддерживающие включение и отключение питания, Управление воспроизведением, извлечение носителей и потоковую передачу видео. Элемент управления воспроизведением может поддерживать такие действия, как воспроизведение, пауза, перемотка назад и быстрая переадресация.

## <a name="discovering-and-manipulating-a-device"></a>Обнаружение устройства и управление им

WSDAPI расширяет локальную модель самонастраивающийся, позволяя клиенту обнаруживать и получать доступ к удаленному устройству и связанным с ним службам по сети. Он поддерживает обнаружение, односторонний и двусторонний контроль обмена сообщениями, а также события.

![Схема, показывающая, как WSDAPI позволяет клиенту обнаруживать и получать доступ к удаленному устройству.](images/overview01.png)

Устройства DPWS объявляют свое присутствие и предоставляют службы (если они есть), используя уникальный адрес и стандартизированный набор сообщений XML. Клиенты DPWS могут использовать процесс обнаружения для поиска устройства, перечисления его служб и подключения к этим службам для выполнения определенных действий.

Клиент WSDAPI сначала запрашивает у устройства полные описания его служб, включая типы служб (например, тип службы принтера или тип службы сканера). Затем клиент управляет устройством, вызывая команды, определенные типом службы (например, путем вызова **креатепринтжоб** на устройстве с типом службы принтера). При необходимости клиент также может отслеживать изменения состояния в каждой службе, подписавшись на события, происходящие во время выполнения команды.

![Схема, показывающая, как клиент WSDAPI запрашивает и взаимодействует с устройством.](images/netdevice01.png)

дополнительные сведения о шаблонах обмена сообщениями с устройствами см. в статье [шаблоны сообщений обнаружения и метаданных Exchange](discovery-and-metadata-exchange-message-patterns.md).

## <a name="logical-and-physical-addressing"></a>Логическая и физическая адресация

Логическая адресация используется для уникальной идентификации устройств независимо от их физических адресов. WS-Discovery предоставляет механизм для разрешения логических адресов в физические адреса, позволяющий выполнять обмен сообщениями между клиентом и устройством. Например, это подключенное к сети хранилище (NAS). Если у вас есть ноутбук и NAS, ваш портативный компьютер должен иметь возможность распознать, что это одно и то же устройство, независимо от физического адреса (IP-адреса), который NAS получает при перемещении между подсетями. Для этого устройство должно иметь удостоверение, которое не зависит от получаемого им IP-адреса. так как традиционные механизмы, такие как DNS, недоступны в обычном сценарии роуминга, WS-Addressing и WS-Discovery обеспечивают логическую адресацию и разрешение в виде произвольной альтернативы.

При производстве устройства ему присваивается глобальный уникальный идентификатор, представленный в виде универсального кода ресурса (URI) UUID. Этот идентификатор никогда не изменится для устройства. Когда устройство включено, оно всегда объявляет свой логический адрес через сообщение WS-Discovery [Hello](hello-message.md) и принимает запросы на преобразование его в физический адрес (обычно HTTP) с помощью WS-Discovery [разрешения](resolve-message.md) или [пробных](probe-message.md) сообщений. После получения допустимого физического адреса (IP-адреса) весь обмен сообщениями происходит по этому адресу, а WS-Discovery используется только в том случае, если адрес изменяется, устройство изменяет состояние, а клиенты должны получать уведомления, или устройство переходит в автономный режим.

## <a name="building-applications"></a>Создание приложений

WSDAPI предоставляет универсальный стек DPWS SOAP для использования клиентскими и приложениями-службами. [Генератор кода для веб-служб на устройствах](web-services-for-devices-code-generator.md) (WsdCodeGen.exe) можно использовать для преобразования описания службы (WSDL) в код прокси и заглушки, которые приложения могут вызывать напрямую. Этот сформированный код автоматически преобразует вызовы функций и параметры в сообщения SOAP и поля XML, а затем вызывает в WSDAPI, чтобы выдать запросы удаленному устройству или клиенту.

Обнаружение функций можно использовать при создании приложений WSDAPI для создания и активации экземпляров функций, возвращаемых PnP. Эти экземпляры функций содержат данные, которые можно использовать для получения дополнительных сведений через API-интерфейсы PnP, если требуется не просто простое обнаружение. Дополнительные сведения см. в разделе [обнаружение функций](/previous-versions/windows/desktop/fundisc/fd-portal) и [PnP-X](/previous-versions/windows/desktop/fundisc/pnp-x).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[шаблоны сообщений обнаружения и метаданных Exchange](discovery-and-metadata-exchange-message-patterns.md)
</dt> <dt>

[Соответствие спецификации WSDAPI](wsdapi-specification-compliance.md)
</dt> <dt>

[Общие сведения о интерфейсах WSDAPI](overview-of-the-wsdapi-interfaces.md)
</dt> </dl>

 

 
