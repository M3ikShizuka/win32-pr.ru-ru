---
description: Чтобы определить размер страницы на текущем компьютере, используйте функцию Жетсистеминфо.
ms.assetid: 953ddfc4-6126-41fb-81a3-0ce1f0fb223f
title: Работа со страницами
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2e47e8a352b13c12b38acca1a93f12886d83d24c4d43faa213a88cf5855b18c5
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119067664"
---
# <a name="working-with-pages"></a>Работа со страницами

Чтобы определить размер страницы на текущем компьютере, используйте функцию [**жетсистеминфо**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsysteminfo) .

Функции [**VirtualQuery**](/windows/win32/api/memoryapi/nf-memoryapi-virtualquery) и [**виртуалкуерекс**](/windows/win32/api/memoryapi/nf-memoryapi-virtualqueryex) возвращают сведения о регионе последовательных страниц, начиная с указанного адреса в адресном пространстве процесса. **VirtualQuery** возвращает сведения о памяти в вызывающем процессе. **Виртуалкуерекс** возвращает сведения о памяти в указанном процессе и используется для поддержки отладчиков, которым требуются сведения о отлаживаемом процессе. Область страниц ограничена указанным адресом, округленным вниз до ближайшей границы страницы. Он распространяется на все последующие страницы со следующими общими атрибутами:

-   Все страницы имеют одно и то же значение: зафиксированный, зарезервированный или бесплатный.
-   Если начальная страница не свободна, все страницы в регионе являются частью того же начального выделения страниц, которые были зарезервированы вызовом [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc).
-   Защита доступа ко всем страницам одинакова (т. е. **\_ только чтение** страниц **, \_ Чтение с страницы** или **\_ недоступность страницы**).

Функция [**виртуаллокк**](/windows/win32/api/memoryapi/nf-memoryapi-virtuallock) позволяет процессу блокировать одну или несколько страниц выделенной памяти в физическую память (ОЗУ), предотвращая Переключение страниц в файл подкачки. Его можно использовать для обеспечения доступности важных данных без доступа к диску. Блокировка страниц в память опасно, так как она позволяет системе управлять памятью. Чрезмерное использование **виртуаллокк** может снизить производительность системы, вызывая переход исполняемого кода в файл подкачки. Функция [**виртуалунлокк**](/windows/win32/api/memoryapi/nf-memoryapi-virtualunlock) разблокирует память, Заблокированную **виртуаллокк**.

Функция [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) позволяет процессу изменять защиту доступа всех зафиксированных страниц в адресном пространстве процесса. Например, процесс может выделять страницы, доступные для чтения и записи, для хранения конфиденциальных данных, а затем может изменить доступ только на чтение или без доступа для защиты от случайной перезаписи. **VirtualProtect** обычно используется со страницами, выделенными [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), но она также работает со страницами, зафиксированными любыми другими функциями выделения. Однако **VirtualProtect** изменяет защиту целых страниц, и указатели, возвращаемые другими функциями, не обязательно согласовываются на границах страниц. Функция [**виртуалпротектекс**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotectex) похожа на **VirtualProtect**, за исключением того, что она изменяет защиту памяти в указанном процессе. Изменение защиты полезно для отладчиков при доступе к памяти отлаживаемого процесса.

 

 
