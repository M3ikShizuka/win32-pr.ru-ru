---
description: в каждом основном выпуске Windows добавлены шрифты для поддержки международных языков и сценариев.
ms.assetid: 77b8c200-2682-4651-855a-602f768edc9b
title: Перечисление международных шрифтов и выбор
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a4b28e2dca3937f3513a930f157a364d466f761ed54a53d09c3e2b8b1c89bb30
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119146887"
---
# <a name="international-font-enumeration-and-selection"></a>Перечисление международных шрифтов и выбор

в каждом основном выпуске Windows добавлены шрифты для поддержки международных языков и сценариев. для шрифтов, которые были добавлены в каждой версии Windows с Windows 2000, а также поддерживаемые сценарии, регионы и языки, необходимо ссылаться на [поддержку скриптов и шрифтов в Windows](https://msdn.microsoft.com/globalization/mt791278) .

## <a name="enumfontfamiliesex"></a>EnumFontFamiliesEx

Чтобы перечислить международные шрифты в приложении, можно использовать функцию [**EnumFontFamiliesEx**](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesexa) . **EnumFontFamiliesEx** позволяет перечислять шрифты на основе имени гарнитуры и набора символов, передавая указатель на структуру [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) , содержащую имя гарнитуры и сведения о кодировке. Чтобы вызвать **EnumFontFamiliesEx**, можно указать либо имя гарнитуры, либо набор символов, либо можно запросить все доступные. Если задать для гарнитуры имя **LOGFONT** , **будет перечисляться** все имена гарнитур. Установка для поля CharSet **\_ кодировки по умолчанию** перечисляет все наборов символов.

Обратите внимание, что наборов символов — это устаревшее понятие, соответствующее наборам символов до Юникода. В настоящее время механизм перечисления шрифтов, поддерживающих произвольные скрипты или диапазоны символов в Юникоде, отсутствует. Структура [**невтекстметрицекс**](/windows/win32/api/wingdi/ns-wingdi-newtextmetricexa) , передаваемая [**енумфонтфамекспрок**](/previous-versions//dd162618(v=vs.85)) , включает в себя структуру [**фонтсигнатуре**](/windows/win32/api/wingdi/ns-wingdi-fontsignature) , которая включает более подробные объявления, предоставляемые разработчиком шрифтов, в соответствии с кодовыми страницами и диапазонами Юникода, поддерживаемыми шрифтом. Чтобы более точно определить, какие диапазоны символов поддерживает данный шрифт, выберите шрифт в контексте устройства и вызовите [**жетфонтуникодеранжес**](/windows/win32/api/wingdi/nf-wingdi-getfontunicoderanges). Обратите внимание, что этот API не поддерживает дополнительные плоскости в Юникоде.

## <a name="choosefont"></a>ChooseFont

Функцию [**ChooseFont**](/previous-versions/windows/desktop/legacy/ms646914(v=vs.85)) можно использовать для вывода общего диалогового окна, позволяющего пользователю выбирать международные шрифты на основе charset. Можно указать один из трех флагов для определения на основе charset, какие шрифты отображаются в диалоговом окне ChooseFont: **CF \_ скриптсонли**, **CF \_ селектскрипт** или **CF \_ носкриптсел**.

Флаг **CF \_ СКРИПТСОНЛИ** указывает API на вывод списка шрифтов для всех наборов символов, не являющихся символами или OEM.

Если требуется отображать только шрифты, охватывающие определенный набор символов, необходимо указать флаг **CF \_ селектскрипт**. Перед вызовом [**ChooseFont**](/previous-versions/windows/desktop/legacy/ms646914(v=vs.85))инициализируйте поле *лфчарсет* структуры [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) . Если вы хотите указать только charset, установите для других полей структуры **LOGFONT** **значение NULL**. Чтобы **ChooseFont** просматривает структуру **LOGFONT** , необходимо также указать флаг **CF \_ иниттологфонтструкт** .

Наконец, как и любое другое поле в диалоговом окне Шрифт, можно выбрать вывод списка пустых сценариев. Эта возможность полезна, если пользователь выделил несколько различных шрифтов, охватывающих несколько наборов символов. В этом случае необходимо вызвать [**ChooseFont**](/previous-versions/windows/desktop/legacy/ms646914(v=vs.85)) с флагом **CF \_ носкриптсел** .

начиная с версии Windows 7, [**ChooseFont**](/previous-versions/windows/desktop/legacy/ms646914(v=vs.85)) реализует поддержку скрытия шрифтов из списков выбора шрифтов. **ChooseFont** будет отображать только указанные шрифты и отфильтровывать скрытые шрифты при отображении шрифтов в списке. добавляется дополнительный флаг (**CF \_ инактивефонтс**) в элементе flags структуры [**ChooseFont**](/previous-versions/windows/desktop/legacy/ms646914(v=vs.85)) , позволяющий отображать все установленные шрифты в списке шрифтов, то же, что и **ChooseFont** , перед Windows 7. сведения о различиях в поведении Windows 7 для функции **ChooseFont** см. в разделе [**ChooseFont () общепринятое диалоговое окно Win32**](../win7appqual/choosefont-win32-common-dialog.md) в [Windows 7 приложения Quality Cookbook](../win7appqual/windows-7-application-quality-cookbook.md). ознакомьтесь с функциями **ChooseFont** и структурой **ChooseFont** , чтобы получить сведения о различиях в работе конечных пользователей в Windows 7.

Обратите внимание, что наборов символов — это устаревшее понятие, соответствующее наборам символов до Юникода. В настоящее время не существует механизма фильтрации шрифтов на основе скриптов Юникода или диапазонов символов.

## <a name="font-controls-in-windows-scenic-ribbon"></a>элементы управления шрифтами на ленте Windows Scenic

в Windows 7 появилась лента Windows Scenic, которая включает набор элементов управления, предназначенных для выбора шрифта. эти элементы управления шрифтами поддерживают новое поведение при скрытии шрифта Windows 7. Эти элементы управления шрифтом можно использовать для отображения только показанных шрифтов и предоставления пользователю возможности выбора шрифта.

> [!Note]  
> поддержка скрытия шрифтов недоступна, если лента Windows Scenic запущена на любой платформе до Windows 7.

 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**EnumFontFamiliesEx**](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesexa)
</dt> <dt>

[**ChooseFont**](/previous-versions/windows/desktop/legacy/ms646914(v=vs.85))
</dt> <dt>

[**Структура CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta)
</dt> <dt>

[**элементы управления шрифтами на ленте Windows Scenic**](../windowsribbon/windowsribbon-element-fontcontrol.md)
</dt> <dt>

[**ChooseFont () общее диалоговое окно Win32**](../win7appqual/choosefont-win32-common-dialog.md)
</dt> </dl>

 

 
