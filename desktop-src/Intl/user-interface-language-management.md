---
description: MUI позволяет приложениям управлять языками пользовательского интерфейса двумя способами.
ms.assetid: ae8ab98f-dc3b-414d-85c9-6bf204c2f776
title: Управление языком пользовательского интерфейса
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 852fe20d3edb9795c2c2a9d3ec45c1e8ffe053ef
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104424053"
---
# <a name="user-interface-language-management"></a>Управление языком пользовательского интерфейса

MUI позволяет приложениям управлять языками пользовательского интерфейса двумя способами. Приложение может использовать простой подход к управлению языком по умолчанию для языковых параметров операционной системы. Кроме того, приложение может поддерживать собственные языки, из которых пользователь может выбрать. API многоязыкового интерфейса пользователя также позволяет приложению осуществлять прямой доступ к языкам и спискам языков, поддерживаемым операционной системой и обслуживаемым загрузчиком ресурсов. Оставшаяся часть этого раздела определяет языки, поддерживаемые системой, и механизм переключения языка.

## <a name="languages-maintained-by-the-operating-system"></a>Языки, поддерживаемые операционной системой

### <a name="system-default-ui-languageinstall-language"></a>Язык интерфейса по умолчанию для системы или язык установки

Системный язык пользовательского интерфейса по умолчанию — это язык локализованной версии, используемой для настройки Windows. Все меню, диалоговые окна, сообщения об ошибках и файлы справки представлены на этом языке, за исключением случаев, когда пользователь выбирает другой язык.

В Windows Vista и более поздних версиях язык пользовательского интерфейса по умолчанию системы называется «языком установки» и играет более ограниченную роль. В большинстве случаев он заменяется предпочитаемыми в системе языками пользовательского интерфейса. Однако в определенных контекстах полезно иметь один язык установки, который всегда полностью поддерживается.

Функция MUI недоступна для установки языка пользовательского интерфейса по умолчанию системы. Чтобы получить этот язык, приложение может вызвать [**жетсистемдефаултуилангуаже**](/windows/desktop/api/Winnls/nf-winnls-getsystemdefaultuilanguage).

### <a name="system-ui-language"></a>Язык пользовательского интерфейса системы

Операционная система определяет язык ПОЛЬЗОВАТЕЛЬСКОГО интерфейса системы как язык пользовательского интерфейса, который может быть задан администратором на вкладке **Дополнительно** в области язык и региональные стандарты панели управления. Операционная система использует этот язык, если текущий пользователь не выполнил какие-либо параметры языка или если активная учетная запись не зарегистрирована. Язык можно изменить, только если на компьютере установлен более чем один язык пользовательского интерфейса.

> [!Note]  
> Чтобы увидеть воздействие изменения языка, необходимо перезагрузить операционную систему для всех пользователей и служб.

 

Функция MUI недоступна для установки языка пользовательского интерфейса системы. Чтобы получить это значение, приложение, предназначенное для Windows Vista и более поздних версий, может вызвать [**жетсистемпреферредуилангуажес**](/windows/desktop/api/Winnls/nf-winnls-getsystempreferreduilanguages) и получить первый язык в списке Предпочитаемые языки интерфейса в системе. Приложения, предназначенные для операционных систем, предшествующих Windows Vista, не могут использовать [**жетсистемпреферредуилангуажес**](/windows/desktop/api/Winnls/nf-winnls-getsystempreferreduilanguages) и должны основываться на предположении, что язык пользовательского интерфейса системы всегда совпадает с языком системного интерфейса по умолчанию.

### <a name="user-ui-language"></a>Язык пользовательского интерфейса

Язык пользовательского интерфейса определяет язык пользовательского интерфейса, используемый для меню, диалоговых окон, файлов справки и т. д. Его можно задать с помощью текущего пользователя на вкладке **язык** в разделе региональные и языковые параметры панели управления. Этот язык можно изменить, только если на компьютере установлен более чем один язык пользовательского интерфейса. Обратите внимание, что пользователь должен выйти из системы и снова войти в систему, чтобы увидеть результат. Например, многонациональной корпорации требуется развернуть Windows во всех своих дочерних подразделениях. Компания создает задание глобальной установки, которое устанавливает английскую языковую версию Windows на всех клиентах независимо от расположения. В то же время он устанавливает отдельные языковые модули в зависимости от подразделения, членом которого является компьютер. Когда пользователь впервые входит в систему до новой установленной операционной системы, Windows отображается как локализованная версия.

В Windows Vista и более поздних версиях язык пользовательского интерфейса пользователя является первым языком в списке предпочитаемых языков интерфейса пользователя. Обратите внимание, что можно использовать резервные языки, если определенные ресурсы недоступны на этом языке.

В операционных системах, предшествующих Windows Vista, язык пользовательского интерфейса обычно совпадает с языком системного интерфейса по умолчанию. Однако для многоязыкового интерфейса пользователя Windows два языка могут отличаться.

Чтобы получить пользовательский язык пользовательского интерфейса, приложение может вызвать [**жетусердефаултуилангуаже**](/windows/desktop/api/Winnls/nf-winnls-getuserdefaultuilanguage) или [**жетусерпреферредуилангуажес**](/windows/desktop/api/Winnls/nf-winnls-getuserpreferreduilanguages). Приложение не может изменить язык пользовательского интерфейса, так как для его установки не существует функции.

## <a name="language-lists-maintained-by-the-operating-system"></a>Списки языков, поддерживаемые операционной системой

### <a name="system-preferred-ui-languages-list"></a>Список предпочитаемых в системе языков интерфейса

Загрузчик ресурсов поддерживает список предпочитаемых языков интерфейса пользователя. В этот список включены языки, предпочитаемые операционной системой для собственных ресурсов, таких как меню и диалоговые окна, сообщения, INF-файлы и файлы справки. Список состоит из системного языка интерфейса по умолчанию и языка пользовательского интерфейса системы и их резервных версий. Приложение может получить предпочтительные для системы языки пользовательского интерфейса, вызвав [**жетсистемпреферредуилангуажес**](/windows/desktop/api/Winnls/nf-winnls-getsystempreferreduilanguages).

### <a name="user-preferred-ui-languages-list"></a>Список предпочитаемых языков интерфейса пользователя

Загрузчик ресурсов использует предпочитаемый пользователем список языков интерфейса пользователя, который включает языки, предпочитаемые пользователем. Загрузчик ресурсов использует ресурсы, соответствующие языкам, из этого списка, если это возможно, для конкретного потока приложения. Эти языки имеют приоритет над любыми системными настройками. Чтобы получить предпочитаемый пользователем язык пользовательского интерфейса, приложение может вызвать [**жетусерпреферредуилангуажес**](/windows/desktop/api/Winnls/nf-winnls-getuserpreferreduilanguages).

### <a name="process-preferred-ui-languages-list"></a>Список предпочтительных языков интерфейса пользователя

В Windows Vista и более поздних версиях загрузчик ресурсов сохраняет список предпочитаемых языков интерфейса для процессов, состоящий из до пяти допустимых языков, заданных выполняемым процессом для приложения MUI. Эти языки можно задать в приложении с помощью вызова [**сетпроцесспреферредуилангуажес**](/windows/desktop/api/Winnls/nf-winnls-setprocesspreferreduilanguages). Приложение может получить языки, вызвав [**жетпроцесспреферредуилангуажес**](/windows/desktop/api/Winnls/nf-winnls-getprocesspreferreduilanguages).

### <a name="thread-preferred-ui-languages-list"></a>Список предпочтительных языков интерфейса для потока

В Windows Vista и более поздних версиях загрузчик ресурсов использует предпочтительный для потока язык интерфейса пользователя, который состоит из до пяти допустимых языков, заданных потоком в работающем процессе для приложения MUI. Эти языки используются для настройки языков пользовательского интерфейса приложения и делают их отличными от языка операционной системы. Список предпочтительных языков интерфейса для потоков основан на предпочитаемых пользователем языках пользовательского интерфейса, предпочитаемых языках ПОЛЬЗОВАТЕЛЬСКОГО интерфейса системы и языке пользовательского интерфейса по умолчанию.

Чтобы задать предпочтительные языки пользовательского интерфейса для потока, приложение должно вызвать [**сетсреадпреферредуилангуажес**](/windows/desktop/api/Winnls/nf-winnls-setthreadpreferreduilanguages). Для получения этих языков приложение вызывает [**жетсреадпреферредуилангуажес**](/windows/desktop/api/Winnls/nf-winnls-getthreadpreferreduilanguages).

## <a name="neutral-language-representation"></a>Представление нейтрального языка

Нейтральный язык представлен только на языке, без региона или языкового стандарта. Например, нейтральное представление языка «Английский (Канада)» (en-CA) представляется как «EN». Несмотря на то, что нейтральный язык не связан с аспектами региона или языкового стандарта, его можно связать с набором ресурсов. Как правило, ресурс нейтрального языка основан на использовании в наиболее распространенном регионе для языка.

Предположим, что приложение MUI локализуется немецкие языковые ресурсы для немецкого языка (Швейцария), представленного в виде de-CH и немецкого (Австрии), представленного как de-AT, при этом создается полный набор ресурсов для немецкого (Германия), представленных в виде de-DE. Необходимо принимать решения для этого приложения, учитывая все файлы ресурсов. Если приложение дублирует ресурсы de-DE как ресурсы нейтрального языка, оно должно предоставить резервный язык для загрузчика ресурсов. Если загрузчик не находит определенный файл ресурсов, зависящий от конкретного языка, для de-CH или для отмены, он возвращается к независимым от языка ресурсам de. Скорее всего, эти ресурсы более подходят, чем ресурсы для совершенно другого языка, например английский (США), которые являются единственными возможными резервными запасами.

Другой пример: приложение может не локализовать все для Белиз. Однако поддержка предпочитаемого языка на английском языке (Белиз), представленного в виде EN-BZ, позволяет приложению возвращаться к ресурсам "en".

## <a name="language-fallback-in-the-resource-loader"></a>Откат языка в загрузчике ресурсов

В Windows Vista и более поздних версиях параметры языка пользовательского интерфейса располагаются в предварительно упорядоченном списке языков, используемом загрузчиком ресурсов. Чтобы сформировать список, операционная система объединяет несколько языков в порядке, указанном ниже.

-   Предпочтительные языки пользовательского интерфейса потока, состоящие из языка пользовательского интерфейса потока и его нейтральной формы. Примеры: fr-FR для французского языка (Франция) и его нейтральная форма "fr" и ES-ES для испанского языка (Испания) и его нейтральная форма "ES".
-   Предпочтительно обрабатывать предпочитаемые языки пользовательского интерфейса, состоящие из языка пользовательского интерфейса процесса и его нейтральной формы. Например, de-DE для немецкого языка (Германия) и его нейтральной формы «de».
-   Язык пользовательского интерфейса пользователя и его нейтральная форма. Примером является ja-JP для японского языка (Япония) и его нейтральной формы "ja".
-   Язык пользовательского интерфейса системы и его нейтральная форма. В качестве примера он относится к итальянскому (Италия) и его нейтральной форме "IT".
    > [!Note]  
    > Этот язык включен в список резервов только в том случае, если не задан язык пользовательского интерфейса пользователя.

     

-   Системный язык пользовательского интерфейса по умолчанию и его нейтральная форма. Например, ES-ES для испанского языка (Испания) и его нейтральная форма ES.

Ниже приведен список Объединенных резервных списков. Обратите внимание, что дублирование языков, например es-ES и ES, устраняется. Поскольку в примере задается язык пользовательского интерфейса ja-JP, язык пользовательского интерфейса системы не отображается в объединенном списке резервных данных.

fr-FR, fr, ES-ES, ES, de-DE, de, ja-JP, JA

При загрузке ресурсов для приложения MUI загрузчик ресурсов пытается выбрать один из файлов, соответствующих списку предпочтительных языков интерфейса потока для текущего выполняемого потока приложения. Если загрузчику ресурсов не удается найти прямое соответствие между выбранным языком и первым ресурсом, зависящим от конкретного языка, в объединенном списке резерва, он проверяет последующие языки в списке, пока не найдет приемлемое резервное.

Если загрузчик ресурсов не находит нужных файлов, он должен использовать "гарантированно хороший" резервный язык. Для технологии ресурсов MUI загрузчик ресурсов определяет резервный язык на основе предоставленных данных конфигурации ресурсов. Дополнительные сведения см. в разделе [Управление ресурсами MUI](mui-resource-management.md).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Сведения о многоязычном пользовательском интерфейсе](about-multilingual-user-interface.md)
</dt> <dt>

[Языковые стандарты и языки](locales-and-languages.md)
</dt> <dt>

[Терминология NLS](nls-terminology.md)
</dt> </dl>

 

 



