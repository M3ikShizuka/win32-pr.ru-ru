---
description: большинство строковых операций может использовать одну и ту же логику для юникода и для Windows кодовых страниц.
ms.assetid: 5364ec09-68e1-444c-9493-ca9426ac9c34
title: Типы данных Windows для работы со строками
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2a2bef3dc98b7b8649b6cb0fc5bd9450c6f22c8b2bb6e3345790dab0dd24587f
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119146817"
---
# <a name="windows-data-types-for-strings"></a>Типы данных Windows для работы со строками

большинство строковых операций может использовать одну и ту же логику для [юникода](unicode.md) и для [Windows кодовых страниц](code-pages.md). единственное отличие состоит в том, что базовая единица операции — 16-разрядный символ (также известный как широкий символ) для юникода и 8-разрядный символ для Windows кодовых страниц. файлы заголовков Windows предоставляют несколько определений типов, которые позволяют легко создавать источники, компилируемые для юникода или для Windows кодовых страниц.

Windows поддерживает три набора символьных и строковых типов данных: набор определений универсальных типов, которые могут быть скомпилированы для кодовых страниц юникода или Windows, а также два набора определенных определений типов. один набор определений определенных типов предназначен для использования в юникоде, а другой — для использования с Windows кодовыми страницами.

Приложение, использующее универсальные типы данных, может быть скомпилировано для Юникода просто путем определения "UNICODE" перед инструкциями **\# include** для файлов заголовков или во время компиляции. новые Windows приложения должны использовать юникод, чтобы избежать несоответствий между различными кодовыми страницами и упростить локализацию. Они должны быть написаны с универсальными типами данных и должны определять "UNICODE" для компиляции этих типов в типы Юникода. в некоторых местах, где приложение должно работать с 8-разрядными символьными данными, оно может явно использовать типы для Windows кодовых страниц.

возможность компилировать универсальные типы в типы для Windows кодовых страниц существует главным образом для поддержки устаревших приложений. для компиляции Windows кодовых страниц приложение просто опускает определение юникода.

в следующем примере показан метод, используемый в файлах заголовков Windows для определения трех наборов типов данных. Сведения о реализации см. в файле заголовка WinNT. h.


```C++
// Generic types

#ifdef UNICODE
    typedef wchar_t TCHAR;
#else
    typedef unsigned char TCHAR;
#endif

typedef TCHAR *LPTSTR, *LPTCH;

// 8-bit character specific

typedef unsigned char CHAR;
typedef CHAR *LPSTR, *LPCH;

// Unicode specific (wide characters)

typedef unsigned wchar_t WCHAR;
typedef WCHAR *LPWSTR, *LPWCH;
```



буква "T" в определении типа, например TCHAR или LPTSTR, обозначает универсальный тип, который может быть скомпилирован либо для Windows кодовых страниц, либо для юникода. Буква "W" в определении типа, например WCHAR или LPWSTR, обозначает тип Юникода. поскольку Windows кодовые страницы имеют более старую форму, они имеют простые определения типов, такие как CHAR и LPSTR. полное описание типов данных в Windows см. в разделе [типы данных Windows](../winprog/windows-data-types.md).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Юникод в Windows API](unicode-in-the-windows-api.md)
</dt> </dl>

 

 
