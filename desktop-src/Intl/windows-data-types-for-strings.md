---
description: Большинство строковых операций может использовать одну и ту же логику для Юникода и для кодовых страниц Windows.
ms.assetid: 5364ec09-68e1-444c-9493-ca9426ac9c34
title: Типы данных Windows для работы со строками
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9e24be1024736ce324e040e58f6ac45636a11d4d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104081614"
---
# <a name="windows-data-types-for-strings"></a>Типы данных Windows для работы со строками

Большинство строковых операций может использовать одну и ту же логику для [Юникода](unicode.md) и для [кодовых страниц Windows](code-pages.md). Единственное отличие состоит в том, что базовая единица операции — 16-разрядный символ (также известный как широкий символ) для Юникода и 8-разрядный символ для кодовых страниц Windows. Файлы заголовков Windows предоставляют несколько определений типов, которые упрощают создание источников, которые можно скомпилировать для Юникода или для кодовых страниц Windows.

Windows поддерживает три набора символьных и строковых типов данных: набор определений универсальных типов, которые могут быть скомпилированы для кодовых страниц в Юникоде или Windows, и два набора определений определенных типов. Один набор определений определенных типов предназначен для использования в Юникоде, а другой — для использования с кодовыми страницами Windows.

Приложение, использующее универсальные типы данных, может быть скомпилировано для Юникода просто путем определения "UNICODE" перед инструкциями **\# include** для файлов заголовков или во время компиляции. Новые приложения Windows должны использовать Юникод, чтобы избежать несоответствий между различными кодовыми страницами и упростить локализацию. Они должны быть написаны с универсальными типами данных и должны определять "UNICODE" для компиляции этих типов в типы Юникода. В некоторых местах, где приложение должно работать с 8-разрядными символьными данными, оно может явно использовать типы для кодовых страниц Windows.

Возможность компилировать универсальные типы в типы для кодовых страниц Windows в основном существует для поддержки устаревших приложений. Для компиляции кодовых страниц Windows приложение просто опускает определение Юникода.

В следующем примере показан метод, используемый в файлах заголовков Windows для определения трех наборов типов данных. Сведения о реализации см. в файле заголовка WinNT. h.


```C++
// Generic types

#ifdef UNICODE
    typedef wchar_t TCHAR;
#else
    typedef unsigned char TCHAR;
#endif

typedef TCHAR *LPTSTR, *LPTCH;

// 8-bit character specific

typedef unsigned char CHAR;
typedef CHAR *LPSTR, *LPCH;

// Unicode specific (wide characters)

typedef unsigned wchar_t WCHAR;
typedef WCHAR *LPWSTR, *LPWCH;
```



Буква "T" в определении типа, например TCHAR или LPTSTR, обозначает универсальный тип, который может быть скомпилирован для кодовых страниц Windows или Юникода. Буква "W" в определении типа, например WCHAR или LPWSTR, обозначает тип Юникода. Поскольку кодовые страницы Windows имеют более старую форму, они имеют простые определения типов, такие как CHAR и LPSTR. Полное описание типов данных в Windows см. в разделе [типы данных Windows](../winprog/windows-data-types.md).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Юникод в Windows API](unicode-in-the-windows-api.md)
</dt> </dl>

 

 
