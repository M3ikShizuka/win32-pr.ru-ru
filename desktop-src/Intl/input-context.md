---
description: '&\# 0034; контекст ввода&\# 0034; является внутренней структурой, поддерживаемой модулем IMM.'
ms.assetid: 2b639e30-5368-45bb-943d-db1ab6b62582
title: Контекст ввода
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2927d3f573704aadb1ef72bdb26a35d37d90c1f90ab58d3a947ee84f8f38f7c4
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118145903"
---
# <a name="input-context"></a>Контекст ввода

"Контекст ввода" — это внутренняя структура, поддерживаемая модулем IMM. Он содержит сведения о состоянии редактора IME и используется окнами IME. По умолчанию операционная система создает и назначает входной контекст каждому потоку. В потоке этот контекст ввода по умолчанию является общим ресурсом и связан с каждым вновь созданным окном.

Чтобы получить или задать сведения в IME, приложение, поддерживающее IME, должно сначала получить маркер для входного контекста, связанного с указанным окном. Приложение получает этот обработчик с помощью функции [**иммжетконтекст**](/windows/desktop/api/Imm/nf-imm-immgetcontext) . Он может использовать полученный маркер при последующих вызовах функций IMM для получения и установки значений IME, таких как стиль окна композиции, стиль композиции и расположение окна состояния. После того как приложение завершит работу с контекстом, оно должно освободить контекст с помощью функции [**иммрелеасеконтекст**](/windows/desktop/api/Imm/nf-imm-immreleasecontext) .

Поскольку входной контекст по умолчанию является общим ресурсом, любые изменения, вносимые приложением, применяются ко всем окнам в потоке. Однако приложение может переопределить это поведение по умолчанию, создав собственный контекст ввода и связав его с одним или несколькими окнами потока. Изменения, внесенные в контекст ввода конкретного приложения, применяются только к окнам, связанным с контекстом.

Приложение может создать контекст ввода с помощью функции [**иммкреатеконтекст**](/windows/desktop/api/Imm/nf-imm-immcreatecontext) . Чтобы назначить контекст окну, приложение вызывает функцию [**иммассоЦиатеконтекст**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) . Эта функция возвращает маркер ранее связанного входного контекста. Если приложение еще не сопоставлено входному контексту с окном, возвращаемый обработчик предназначен для входного контекста по умолчанию. Как правило, приложение сохраняет этот обработчик, а затем повторно связывает его с окном, когда пользовательский контекст больше не нужен.

После того как контекст ввода связан с окном, операционная система автоматически выбирает этот контекст при активации окна и получает фокус ввода. Стиль и другие сведения во входном контексте влияют на последующий ввод с клавиатуры для этого окна, определяя, как работает редактор IME.

Приложение должно уничтожить любой настроенный контекст ввода до завершения его работы. Во первых, приложение удаляет контекст ввода из любой связи, сделанной с Windows в потоке, с помощью функции [**иммассоЦиатеконтекст**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) . Затем вызывается функция [**иммдестройконтекст**](/windows/desktop/api/Imm/nf-imm-immdestroycontext) .

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[О диспетчере методов ввода](about-input-method-manager.md)
</dt> </dl>

 

 



