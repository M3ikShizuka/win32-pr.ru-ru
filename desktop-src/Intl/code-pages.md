---
description: Большинство приложений, написанных сегодня, обрабатывали символьные данные в основном как Юникод, используя кодировку UTF-16.
ms.assetid: 866f09f4-629e-4097-a974-fbda9389d077
title: Кодовые страницы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ad589183bbb64a2feb65079a2322dd148598c6c3542320ec2ce851b9de61cfa8
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119754964"
---
# <a name="code-pages"></a>Кодовые страницы

Большинство приложений, написанных сегодня, обрабатывали символьные данные в основном как [Юникод](unicode.md), используя кодировку UTF-16. Однако многие устаревшие приложения по прежнему используют наборы символов, основанные на кодовых страницах. Даже новым приложениям иногда приходится работать с кодовыми страницами, часто по одной из следующих причин:

-   Для взаимодействия с устаревшими приложениями.
-   Для взаимодействия со старыми серверами электронной почты и новостей, которые могут не всегда поддерживать Юникод.
-   для взаимодействия с консолью Windows.

> [!Note]  
> новые Windows приложения должны использовать [юникод](unicode.md) , чтобы избежать несоответствий между различными кодовыми страницами и простотой локализации.

 

Каждая кодовая страница представлена идентификатором кодовой страницы, например 1252, и обрабатывается функциями API, поддерживающими Юникод и кодировка символов. Список поддерживаемых идентификаторов кодовых страниц см. в разделе [идентификаторы кодовых страниц](code-page-identifiers.md). В справочнике по кодовым страницам в [центре разработчиков Microsoft Go Global](https://msdn.microsoft.com/goglobal) содержатся полные описания многих кодовых страниц.

Windows кодовые страницы, обычно называемые «кодовыми страницами ANSI», — кодовые страницы, для которых значения, отличные от ASCII (значения больше 127), представляют международные символы. эти кодовые страницы используются изначально в Windows Me, а также доступны в Windows NT и более поздних версиях.

> [!Note]  
> первоначально Windows кодовая страница 1252, кодовая страница, обычно используемая для английского и других европейских языков, основана на черновике Американский национальный институт стандартов (ANSI) (ANSI). этот черновик в конечном итоге стал стандартом iso 8859-1, но Windows кодовая страница 1252 была реализована до того, как стандарт стал окончательным и не совпадает с ISO 8859-1.

 

многие функции API Windows имеют версии "A" (ANSI) и "W" (широкие возможности юникода). версия "A" обрабатывает текст на основе кодовых страниц Windows, а версия "W" обрабатывает текст в юникоде. см. [Windows типы данных для строк](windows-data-types-for-strings.md) и [соглашений для прототипов функций](conventions-for-function-prototypes.md).

Windows кодовые страницы также иногда называются «активными кодовыми страницами» или «системными активными кодовыми страницами». Windows операционная система всегда имеет одну активную в настоящий момент Windows кодовую страницу. Все [версии функций API в ANSI](conventions-for-function-prototypes.md) используют текущую активную кодовую страницу.

Кодовые страницы изготовителя оборудования (OEM) — это кодовые страницы, для которых значения, отличные от ASCII, представляют символы рисования строк и пунктуации. Эти кодовые страницы изначально использовались для MS-DOS и по-прежнему используются для консольных приложений. Они также используются для нерасширенных имен файлов в файловых системах FAT12, FAT16 и FAT32, как описано в разделе [наборы символов, используемые в именах файлов](character-sets-used-in-file-names.md). Обычно кодовая страница OEM для английского языка — кодовая страница 437.

для Windows кодовых страниц и кодовых страниц OEM значения кода 0x00 до 0x7f соответствуют 7-разрядной кодировке ASCII. Значения кода 0x00 до 0x19 и 0x7F всегда представляют стандартизированные управляющие символы, а 0x20 – 0x7E — стандартизированные отображаемые символы. Символы, представленные оставшимися кодами, от 0x80 до 0xFF, зависят от наборов символов. Каждый набор символов содержит различные специальные символы, обычно настроенные для языка или группы языков. Windows кодовая страница 1252 и OEM кодовая страница 437 обычно используются в США.

в дополнение к Windows и кодовым страницам OEM приложения могут использовать немашинные кодовые страницы. Примерами являются кодовые страницы EBCDIC и Macintosh.

Две кодировки Юникода (UTF-7 и UTF-8) реализуются как кодовые страницы. Как и в случае с другими кодовыми страницами, каждая страница известна числовым идентификатором и может обрабатываться множеством одинаковых функций API Юникода и кодировки символов.

Кодовые страницы могут быть страницами [однобайтовой](single-byte-character-sets.md) кодировки (SBCS) [или двухбайтовой кодировкой](double-byte-character-sets.md) (DBCS). На страницах SBCS каждый байт кодирует один символ напрямую, чтобы можно было представить ровно 256 различных символов (включая управляющие символы, буквы, цифры, знаки препинания, символы и т. д.). Кодовые страницы DBCS используются для таких языков, как японский и китайский. В такой кодовой странице некоторые символы имеют две байтовые кодировки с определенными байтами (всегда значения больше 127), служащие "старшими байтами". Вместо кодирования символов в своих собственных значениях старшие байты могут быть сопоставлены с символом только в сочетании с "младшим байтом".

Для некоторых устаревших протоколов требуется использовать однобайтовые и ДВУХБАЙТОВЫЕ кодовые страницы. Каждая кодовая страница SBCS и DBCS поддерживает разные символы, но ни одна кодовая страница не поддерживает полный набор символов, предоставляемых в Юникоде. Каждая кодовая страница SBCS/DBCS поддерживает разные подмножества, которые кодируются по-разному.

> [!Note]  
> Данные, преобразованные из одной однобайтовой или ДВУХБАЙТОВОЙ кодовой страницы в другую, могут быть повреждены, так как одно и то же значение данных на разных кодовых страницах может кодировать другой символ. Данные, преобразованные из Юникода в SBCS или DBCS, подвергаются потери данных, так как данная кодовая страница может не представлять каждый символ, используемый в определенных данных в Юникоде.

 

В дополнение к кодовым страницам SBCS и DBCS в приложениях доступны кодовые страницы набора многобайтовых наборов символов 52936, 54936, 51949 и 5022x, которые используют такой же подход, как и для DBCS. Однако многобайтовая кодовая страница набора символов выходит за пределы двухбайтовых кодировок некоторых символов. UTF-7 и UTF-8 используют аналогичный подход для кодирования Юникода, основанный на 7-и 8-разрядных байтах соответственно. Дополнительные сведения см. в статье [Юникод](unicode.md).

Несколько функций Юникода и наборов символов позволяют приложениям работать с кодовыми страницами. Приложение может использовать функции [**жеткпинфо**](/windows/desktop/api/Winnls/nf-winnls-getcpinfo) и [**жеткпинфоекс**](/windows/desktop/api/Winnls/nf-winnls-getcpinfoexa) для получения сведений о кодовой странице. Эти сведения включают символ по умолчанию, используемый, когда символ в преобразованной строке не имеет соответствующей записи в кодовой странице.

приложение может использовать функции [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) и [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) для преобразования между строками на основе кодовых страниц Windows и строк юникода. Хотя их имена ссылаются на "многобайтовый", эти функции хорошо подходят для однобайтовых кодовых страниц, DBCS и многобайтовых наборов символов.

> [!Note]  
> [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) может потерять некоторые данные, если переданная кодовая страница не может представлять все символы в строке Юникода.

 

приложение может выполнять преобразование между Windows кодовыми страницами и кодовыми страницами OEM с помощью стандартных функций библиотеки времени выполнения C. Однако использование этих функций представляет риск потери данных, поскольку символы, которые могут быть представлены каждой кодовой страницей, не совпадают.

Приложения также могут вызывать функцию [**жетакп**](/windows/desktop/api/Winnls/nf-winnls-getacp) . эта функция получает идентификатор кодовой страницы текущей Windows (ANSI).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Кодировки](character-sets.md)
</dt> </dl>

 

 



