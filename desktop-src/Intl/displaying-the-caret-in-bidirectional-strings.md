---
description: В однонаправленном тексте позиции курсора не имеют неоднозначности, так как ведущий ребр символа находится в том же месте, что и конечный крайний отступ предыдущего символа.
ms.assetid: 3bebb329-3dd7-4b2e-8ff3-878aaf337a2c
title: Отображение курсора в двунаправленных строках
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c76cce95362aa69564fd245ccad1da4a967dddc4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105651120"
---
# <a name="displaying-the-caret-in-bidirectional-strings"></a>Отображение курсора в двунаправленных строках

В однонаправленном тексте позиции курсора не имеют неоднозначности, так как ведущий ребр символа находится в том же месте, что и конечный крайний отступ предыдущего символа. Однако в двунаправленном тексте курсор между запусками противоположного направления является неоднозначным. Например, в абзаце "хеллосалаам" слева направо последняя буква "Привет" непосредственно предшествует первой букве "Эс Салам". Наилучшее расположение курсора зависит от того, считается ли он подходящей операцией "o" из "Hello" или перед "s" из "Эс Салам".

Uniscribe использует соглашения о позиционировании курсоров, приведенные в следующей таблице.



| Ситуация       | Визуальное размещение курсора                       |
|-----------------|----------------------------------------------|
| Ввод с клавиатуры          | Конечный конец последнего введенного символа.       |
| Вставки         | Конечный конец последнего вставленного символа.      |
| Курсор позаботится | Конечный крайний конец последнего переданного символа. |
| Снятие курсора с учета  | Начальная граница последнего переданного символа.  |
| Домашняя страница            | Передний края строки.                        |
| Конец             | Конечная граница строки.                       |



 

Курсор можно разместите, как показано в следующем примере:


```C++
if (fAdvancing) {
    ScriptCPtoX(
        iCharPos - 1, TRUE, 
        cChars, cGlyphs, &wLogClust, &sva, &iAdvance, &sa, &iCaretX
        );
} else {
    ScriptCPtoX(
        iCharPos, FALSE, 
        cChars, cGlyphs, &wLogClust, &sva, &iAdvance, &sa, &iCaretX
        );
}
```



Позиционирование курсора может быть проще, как показано ниже, при условии, что значение *фадванЦинг* ограничено значением **true** или **false**:


```C++
ScriptCPtoX(
    iCharPos - fAdvancing, fAdvancing, 
    cChars, cGlyphs, &wLogClust, &sva, &iAdvance, &sa, &iCaretX
    );
```



[**Скрипткптокс**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox) обрабатывает позиции вне диапазона логически. Он возвращает передний конец выполнения для *ичарпос* <0, а завершающую сторону выполнения для *ичарпос* >= length. Дополнительные сведения см. в разделе [Управление размещением курсора и проверкой попадания](managing-caret-placement-and-hit-testing.md) .

## <a name="related-topics"></a>См. также

<dl> <dt>

[Использование Uniscribe](using-uniscribe.md)
</dt> </dl>

 

 



