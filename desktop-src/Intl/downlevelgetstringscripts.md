---
description: Предоставляет список скриптов, используемых в указанной строке Юникода.
ms.assetid: 3ad23613-8d0c-432a-b352-637c373a0980
title: Функция Довнлевелжетстрингскриптс (Идндл. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- DownlevelGetStringScripts
api_type:
- DllExport
api_location:
- Idndl.dll
ms.openlocfilehash: bc5a9fdaf3beb9e1c401943f923fa48bd9d4b44c
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127274696"
---
# <a name="downlevelgetstringscripts-function"></a>Функция Довнлевелжетстрингскриптс

Предоставляет список скриптов, используемых в указанной строке Юникода.

> [!Note]  
> эта функция используется только приложениями, работающими в операционных системах, предшествующих Windows Vista. Для его использования требуется загружаемый пакет. приложения, которые работают только в Windows Vista и более поздних версиях, должны вызывать [**жетстрингскриптс**](/windows/desktop/api/Winnls/nf-winnls-getstringscripts).

 

## <a name="syntax"></a>Синтаксис


```C++
int DownlevelGetStringScripts(
  _In_  DWORD   dwFlags,
  _In_  LPCWSTR lpString,
  _In_  int     cchString,
  _Out_ LPWSTR  lpScripts,
  _In_  int     cchScripts
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*dwFlags* \[ окне\]
</dt> <dd>

Флаги, указывающие параметры для получения скрипта.



| Значение                                                                                                                                                                                                  | Значение                                                                                                                                                                                                                                                           |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="GSS_ALLOW_INHERITED_COMMON"></span><span id="gss_allow_inherited_common"></span><dl> <dt>**GSS \_ допускает \_ унаследованные \_ Общие**</dt> </dl> | Получение сведений о скрипте "Каии" (УНАСЛЕДОВАНном) и "Зиии" (COMMON). Это значение не влияет на обработку неназначенных символов. Эти символы во входной строке всегда приводят к тому, что "ZZZZ" (неназначенный скрипт) будет отображаться в строке скрипта.<br/> |



 

> [!Note]  
> По умолчанию эта функция игнорирует все наследуемые или общие символы во входной строке Юникода. Если GSS \_ допускает \_ наследование унаследованных \_ типов, то ни "Каии", ни "зиии" не будут отображаться в строке скрипта, даже если входная строка содержит такие символы. Если \_ параметр GSS допускает \_ наследование наследуемых \_ типов, и если входная строка содержит унаследованные и (или) общие символы, в строке скрипта появятся "Каии" и/или "зиии". См. раздел «Примечания».

 

</dd> <dt>

*лпстринг* \[ окне\]
</dt> <dd>

Указатель на строку в Юникоде для анализа.

</dd> <dt>

*кчстринг* \[ окне\]
</dt> <dd>

Размер (в символах) строки Юникода, указанной параметром *лпстринг*. Приложение задает для этого параметра значение-1, если строка завершается нулем. Если приложение устанавливает для этого параметра значение 0, функция получает строку в Юникоде null (L " \\ 0") в *лпскриптс* и возвращает значение 1.

</dd> <dt>

*лпскриптс* \[ заполняет\]
</dt> <dd>

Указатель на буфер, в котором эта функция получает строку, завершающуюся нулем, представляющую список скриптов, с использованием 4-символьной нотации, используемой в [стандарте ISO 15924](https://www.unicode.org/iso15924/iso15924-codes.html). Имя каждого сценария состоит из четырех латинских символов, а имена извлекаются в алфавитном порядке. За каждым именем, включая Последнее, следует точка с запятой.

Кроме того, этот параметр может содержать **значение NULL** , если *кчскриптс* имеет значение 0. В этом случае функция возвращает необходимый размер буфера скрипта.

</dd> <dt>

*кчскриптс* \[ окне\]
</dt> <dd>

Размер в символах для буфера скрипта, указанного параметром *лпскриптс*.

Кроме того, приложение может установить этот параметр в значение 0. В этом случае функция получает **значение NULL** в *лпскриптс* и возвращает необходимый размер буфера скрипта.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Возвращает число символов, полученных в выходном буфере, включая завершающий нуль-символ, если для параметра *кчскриптс* задано ненулевое значение. Функция возвращает 1, чтобы указать, что ни один скрипт не найден, например, если входная строка содержит только общие или УНАСЛЕДОВАНные символы, а GSS \_ разрешает \_ унаследованные \_ Общие, не задано. Учитывая, что каждый найденный скрипт добавляет пять символов (четыре символа + разделитель), простая математическая операция предоставляет количество сценариев ( \_ код возврата 1)/5.

Если функция завершается удачно и значение *кчскриптс* равно 0, то возвращаемое значение имеет необходимый размер (в символах, включая завершающий нуль-символ) для буфера скрипта. Счетчик скриптов описан выше.

Функция возвращает 0, если она не выполнена. Чтобы получить расширенные сведения об ошибке, приложение может вызвать [**GetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror), которая может возвращать один из следующих кодов ошибок:

-   Ошибка \_ баддб. Функция не может получить доступ к данным. Такая ситуация обычно не возникает, и обычно указывает на неправильную установку, на диск или на проблему.
-   Ошибка \_ : недостаточный \_ Размер буфера. Указанный размер буфера не достаточен или имеет неправильное значение **null**.
-   Ошибка \_ : недопустимые \_ флаги. Указаны недопустимые значения флагов.
-   Ошибка \_ : недопустимый \_ параметр. Любое из значений параметров было недопустимым.

## <a name="remarks"></a>Remarks

Эта функция полезна как часть стратегии по устранению проблем безопасности, связанных с [международными доменными именами (IDNs)](handling-internationalized-domain-names--idns.md).

Определение скрипта основано на значениях скриптов, опубликованных консорциумом Unicode в <https://www.unicode.org/Public/4.1.0/ucd/Scripts.txt> , за исключением того, что неназначенные символы имеют значение «ZZZZ» (не назначено) вместо «зиии» (Common).

Ниже приведены некоторые примеры поведения этой функции.



Входная строка

*dwFlags*

*лпскриптс*

Scripts

Microsoft.com

0

ЛАТН;

Латиница

Microsoft.com

GSS \_ допускает \_ унаследованные \_ Общие

ЛАТН; Зиии;

Латиница + общие

$ {ROWSPAN2} $Ni Ñо $ {Remove} $  

004E 0069 0241 006F

$ {ROWSPAN2} $GSS \_ Разрешить \_ унаследованные \_ Общие $ {Remove} $  

$ {ROWSPAN2} $Latn; $ {Remove} $  

$ {ROWSPAN2} $Latin $ {Remove} $  

Использует Латинская СТРОЧная БУКВа N с ТИЛЬДой

$ {ROWSPAN2} $Ni Ñо $ {Remove} $  

004E 0069 006E 0303 006F

$ {ROWSPAN2} $GSS \_ Разрешить \_ унаследованные \_ Общие $ {Remove} $  

$ {ROWSPAN2} $Latn; Каии; $ {Remove} $  

$ {ROWSPAN2} $Latin + унаследовано $ {Remove} $  

Использует сочетание ТИЛЬДы

$ {ROWSPAN2} $Sp ООФ $ {Remove} $  

0053 0070 043e 043e 0066

$ {ROWSPAN2} $0 $ {REMOVE} $  

$ {ROWSPAN2} $Latn; Цирл; $ {Remove} $  

$ {ROWSPAN2} $Latin + кириллица $ {Remove} $  

Используется КИРИЛЛическая СТРОЧная БУКВа O



U + F000

0

ZZZZ

"Не присвоено"



U + F000

GSS \_ допускает \_ унаследованные \_ Общие

ZZZZ

"Не присвоено"



 

Требуемый заголовочный файл и библиотека DLL являются частью скачивания веб- [API для Межязыкового доменного имени Майкрософт (IDN)](https://www.microsoft.com/downloads/details.aspx?FamilyID=AD6158D7-DDBA-416A-9109-07607425A815&displaylang=en%0A) , доступного в [центре загрузки MSDN](https://www.microsoft.com/?ref=go).

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows \[Только классические приложения XP\]<br/>                                                                                                                 |
| Минимальная версия сервера<br/> | Windows Только для \[ настольных приложений сервера 2003\]<br/>                                                                                                        |
| Распространяемые компоненты<br/>          | api для межязыкового доменного имени майкрософт (IDN) в Windows XP (SP2 или более поздней версии), Windows Server 2003 (с пакетом обновления 1 (SP1) или более поздней версии) или Windows Vista<br/> |
| Заголовок<br/>                   | <dl> <dt>Идндл. h</dt> </dl>                                                                          |
| DLL<br/>                      | <dl> <dt>Idndl.dll</dt> </dl>                                                                        |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Поддержка национальных языков](national-language-support.md)
</dt> <dt>

[Функции поддержки национальных языков](national-language-support-functions.md)
</dt> <dt>

[Обработка международных доменных имен (IDNs)](handling-internationalized-domain-names--idns.md)
</dt> <dt>

[**довнлевелжетлокалескриптс**](downlevelgetlocalescripts.md)
</dt> <dt>

[**довнлевелверифискриптс**](downlevelverifyscripts.md)
</dt> <dt>

[**жетстрингскриптс**](/windows/desktop/api/Winnls/nf-winnls-getstringscripts)
</dt> </dl>

 

 
