---
description: В этом разделе описываются две служебные программы, используемые для создания приложений MUI.
ms.assetid: 8ba94001-fc46-41e0-a071-0dc500a20753
title: Служебные программы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2d9bb8a8608c97b700beebb53ce95fdf4b85c4d5
ms.sourcegitcommit: 9b5faa61c38b2d0c432b7f2dbee8c127b0e28a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2021
ms.locfileid: "122481510"
---
# <a name="resource-utilities"></a>Служебные программы

В этом разделе описываются две служебные программы, используемые для создания приложений MUI. хотя муиркт — это средство для многоязыкового интерфейса пользователя, mui также использует стандартную служебную программу компилятора Windows RC. Инструкции по использованию этих служебных программ приведены в разделе [Локализация ресурсов и создание приложения](localizing-resources-and-building-the-application.md).

## <a name="muirct-utility"></a>Служебная программа МУИРКТ

МУИРКТ (Muirct.exe) — это служебная программа командной строки для разделения стандартного исполняемого файла в LN-файл и зависящие от языка файлы ресурсов. Каждый из результирующих файлов содержит данные конфигурации ресурсов для сопоставления файлов. муиркт входит в Microsoft Windows SDK для Windows Vista.

> [!Note]  
> начиная с Windows Vista загрузчик ресурсов Win32 обновляется для загрузки ресурсов из файлов, зависящих от языка, а также из LN-файлов.

 

### <a name="muirct-usages"></a>Использование МУИРКТ

1.  Разделите двоичные файлы на основной двоичный файл и MUI, основываясь на \_ файле конфигурации RC.

    `Muirct -q rc_config [-c checksum_file [-b LangID]] [-x LangID] [-g LangId]     [-f] [-m] [-v level] source_file [output_LN_file] [output_MUI_file]`

2.  Извлеките контрольную сумму из файла контрольной суммы \_ и вставьте ее в выходной \_ файл.

    `Muirct -c checksum_file [-b LangID] -e output_file`

3.  Рассчитайте контрольную сумму на основе файла контрольной суммы \_ и вставьте ее в выходной \_ файл.

    `Muirct  -c checksum_file [-b LangID] -q rc_config  -z output_file`

4.  Дамп содержимого данных конфигурации ресурсов из входного \_ файла.

    `Muirct -d input_file`

### <a name="muirct-syntax"></a>Синтаксис МУИРКТ

МУИРКТ может осуществлять направление от параметров командной строки и (или) из файла конфигурации ресурса, указанного с помощью параметра-q.


```C++
muirct [-h|-?] [ -c checksum_file] [-b langid]  ]
     [-g langid] [-q resource configuration file<RCF>] [-v level] [-x langid]
     [-e output_file]  [-z output_file] [-f] [-d MUI'ized file] [-m file_version]

source_filename [language_neutral_filename] [mui_filename]
```



**Параметры и аргументы**




| | | -h |-? | Отображает экран справки. | | -c | Задает входное checksum_file, из которого необходимо извлечь или вычислить контрольную сумму ресурса. Checksum_file должен быть двоичным файлом Win32, содержащим локализуемые ресурсы. Если checksum_file содержит ресурсы для нескольких языков, необходимо использовать параметр-b, чтобы указать, какие из них следует использовать в противном случае, МУИРКТ завершается ошибкой. <br /> | | -b | Указывает язык, используемый, когда checksum_file, заданный с помощью-c, содержит ресурсы на нескольких языках. Этот параметр можно использовать только совместно с параметром-c. Идентификатор языка может быть в десятичном или шестнадцатеричном формате. МУИРКТ завершается ошибкой, если checksum_file содержит ресурсы на нескольких языках, а параметр-b не указан, или если язык, указанный параметром-b, не найден в checksum_file. <br /> | | -g | Указывает идентификатор языка, который будет включаться в качестве конечного языка в разделе данных конфигурации ресурсов в LN файле. Если загрузчику ресурсов не удается загрузить запрошенный MUI-файл из предпочтительных языков пользовательского интерфейса потока, в качестве последней попытки используется конечный язык. Значение LangID может быть указано в десятичном или шестнадцатеричном формате. Например, Английский (США) может быть указан в параметре-g 0x409 или-g 1033. <br /> | | -q | Указывает, что source_file необходимо разбить на output_LN_file и output_MUI_file в соответствии с разметкой файла rc_config. Файл rc_config — это файл в формате XML, указывающий, какие ресурсы будут извлечены в MUI-файл и которые будут оставлены в LN-файле. Rc_config может указывать распределение типов ресурсов и отдельных именованных элементов между output_LN_file и output_MUI_file. Source_file должен быть двоичным файлом Win32, который содержит ресурсы на одном языке, иначе МУИРКТ завершается ошибкой. МУИРКТ не разделяет файл, если он является независимым от языка, который указывается в файле только со значением идентификатора языка 0. Output_LN_file и output_mui_file — это имена нейтрального к языку и MUI-файла, в который разбивается source_file. Эти имена файлов являются необязательными. Если они не указаны, МУИРКТ добавляет расширения. LN и. MUI для source_file. Как правило, перед развертыванием файла следует удалить расширение «. ln». МУИРКТ связывает output_LN_file и output_MUI_file, вычисляя контрольную сумму на основе имени source_file и версии файла и вставляет результат в раздел конфигурации ресурсов каждого выходного файла. При использовании в сочетании с параметром-c параметр-q имеет приоритет. Если файл rc_config, указанный с параметром-q, содержит контрольную сумму МУИРКТ игнорирует параметр-c и вставляет значение контрольной суммы из значения, rc_config файл в файлы LN и MUI. Если значение контрольной суммы не найдено в rc_config, МУИРКТ вычисляет контрольную сумму ресурса в зависимости от поведения параметра-c. <br /> | | -v | Указывает уровень вербосенесс для ведения журнала. Укажите 1, чтобы напечатать все основные сообщения об ошибках и результаты операций. Укажите значение 2, чтобы также включить сведения о ресурсах (тип, имя, идентификатор языка), включенные в MUI-файл и LN File. Значение по умолчанию —-v 1 <br /> | | -x | Указывает идентификатор языка, с помощью которого МУИРКТ помечает все типы ресурсов, добавленные в раздел Resource файла MUI. Значение LangID может быть указано в десятичном или шестнадцатеричном формате. Например, Английский (США) можно указать с помощью-x 0x409 или-x 1033. <br /> | | -e | Извлекает контрольную сумму ресурса, содержащуюся в checksum_file, предоставленном с параметром-c, и вставляет ее в указанный output_file. Если указан параметр-e, МУИРКТ игнорирует все переключатели, кроме параметра-c. В этом случае checksum_file должен быть двоичным файлом Win32, содержащим раздел данных конфигурации ресурсов со значением контрольной суммы. Output_file должен быть существующим файлом LN или MUI. <br /> | | -z | Вычисляет и вставляет данные контрольной суммы ресурсов в указанный выходной файл. МУИРКТ базовые вычисления контрольной суммы для входных данных, входящих в параметр-c, и необязательного параметра-b. Если указать выходной файл для параметра-z, который не существует, МУИРКТ завершается с ошибкой.<br /> Пример. вычисляет контрольную сумму на основе локализуемых ресурсов в Notepad.exe и вставляет контрольную сумму в выходной файл Notepad2.exe.<br /><code>muirct -c notepad.exe -q myprog.rcconfig -z notepad2.exe</code><br /> | | -f | Позволяет создать файл MUI с ресурсом версии, который является единственным локализуемое ресурсом. По умолчанию МУИРКТ не разрешает это.<br /> | | -d | Находит и отображает данные конфигурации внедренных ресурсов в исходном файле. При указании этого параметра МУИРКТ игнорирует все остальные параметры командной строки.<br /> | | -m | Указывает номер версии, используемый при вычислении контрольной суммы для связывания output_LN_file и output_MUI_file. <br /> | | source_filename | Имя локализованного двоичного файла исходного кода. подстановочные знаки использовать нельзя. Этот файл может содержать только ресурсы на одном языке. Если в файле есть ресурсы на нескольких языках, МУИРКТ завершается ошибкой, если не используется параметр-b. Если файл содержит ресурсы с идентификаторами языка, имеющими только значение 0, МУИРКТ не разделяет файл, поскольку идентификатор языка 0 указывает на нейтральный язык.<br /> Для параметра-d source_filename — это либо LN-файл, либо файл ресурсов, зависящий от языка, для которого МУИРКТ отображает данные конфигурации ресурсов. <br /> | | language_neutral_filename | Используемых. Имя LN файла. Если не указать имя этого файла, МУИРКТ добавляет второе расширение ". LN" к имени исходного файла для использования в качестве имени файла, не зависящего от языка. Как правило, перед развертыванием файла следует удалить расширение «. ln».<blockquote>[!Note]<br />LN File не должен содержать строк или меню. Их следует удалить вручную.</blockquote><br /> | | mui_filename | Используемых. Имя файла ресурсов, зависящего от языка. Если имя не указано, МУИРКТ добавляет второе расширение MUI к имени исходного файла, которое будет использоваться в качестве имени файла. Как правило, МУИРКТ создает файл ресурсов, зависящий от языка. Однако он не создает файл ресурсов, если выполняется одно из следующих условий.<br /><ul><li>В исходном двоичном файле нет локализуемых ресурсов.</li><li>Единственный язык ресурсов, найденный в исходном двоичном файле, — это нейтральный язык.</li><li>Исходный двоичный файл содержит ресурсы для более чем одного языка, не считая нейтральный язык. Если двоичный файл содержит ресурсы для двух языков, и один из них является нейтральным языком, программа считает, что файл является одноязычным, и создает файл ресурсов, зависящий от языка, если есть локализуемые ресурсы.</li></ul> | 




 

### <a name="muirct-language-output"></a>Выходные данные языка МУИРКТ

МУИРКТ выбирает значение атрибута «Ултиматефаллбакклангуаже» для вставки в данные конфигурации ресурса «LN File» в соответствии со следующим порядком, от наивысшего приоритета к наименьшему:

1.  Атрибут "Ултиматефаллбакклангуаже" в исходном файле конфигурации ресурса, если он передан в качестве входных данных.
2.  Язык, указанный с помощью параметра-g.
3.  Язык входного файла.

МУИРКТ выбирает значение атрибута "Language" для вставки в данные конфигурации ресурсов MUI в соответствии со следующим порядком:

1.  атрибут Language в файле конфигурации исходного ресурса, если он передается в качестве входных данных.
2.  Язык, заданный параметром-x (принудительный язык).
3.  Язык входного файла.

### <a name="muirct-checksum-handling"></a>Обработка контрольной суммы МУИРКТ

Как правило, операционная система вычисляет контрольную сумму для ресурсов конкретного языка в файле, если не указать контрольную сумму через файл конфигурации ресурса. Если контрольная сумма одинакова для LN-файла и всех связанных с ними файлов ресурсов, а атрибут Language в конфигурации ресурсов в версии LN и зависит от языка, загрузчик ресурсов может успешно загрузить ресурсы.

МУИРКТ поддерживает несколько методов размещения соответствующих контрольных сумм в данных конфигурации ресурсов:

1.  Создайте исполняемый файл для каждого языка, содержащего как код, так и ресурсы. После этого используйте МУИРКТ, чтобы разделить каждый из этих файлов в LN-файл и файл ресурсов, зависящий от языка. МУИРКТ выполняется несколько раз, один раз для создания файла ресурсов для каждого языка. Сборку можно выполнить следующими способами.
    1.  Используйте параметр-q, чтобы указать значение контрольной суммы в файле конфигурации ресурса. МУИРКТ помещает это значение во все вырабатываемые файлы и зависящие от языка файлы ресурсов. Для выбора этого значения необходимо принять стратегию, как описано далее в этом разделе.
    2.  Используйте параметр-c (и, при необходимости, параметр-b), чтобы выбрать один язык с ресурсами, из которых МУИРКТ извлекает контрольную сумму.
    3.  Используйте параметр-z, чтобы выбрать один язык с ресурсами, из которых МУИРКТ всегда извлекает контрольную сумму. Примените эту контрольную сумму после сборки файлов с помощью других методов.
2.  Создайте исполняемый файл, содержащий как код, так и ресурсы для одного языка. После этого используйте МУИРКТ, чтобы разделить ресурсы между LN-файлом и файлом ресурсов, зависящим от языка. Наконец, используйте средство двоичной локализации для изменения результирующего файла ресурсов для каждого языка.

Наиболее распространенным соглашением для обработки контрольных сумм является базовая контрольная сумма ресурсов на английском (США). Вы можете принять другое соглашение, если оно соответствует каждому LN-файлу. Например, вполне допустимо, чтобы корпоративная Разработка программного обеспечения основывала контрольные суммы в программном обеспечении, основанном на французском (Франции) ресурсах, а не на английском (США) ресурсе, если все приложения имеют ресурсы для французского языка (Франция), на которых должны основываться контрольные суммы. Также можно использовать файл конфигурации ресурсов для присвоения контрольной суммы произвольного шестнадцатеричного значения до 16 шестнадцатеричных цифр. Последняя стратегия исключает эффективное использование ключей-z,-c и-b для МУИРКТ. Для создания значений контрольной суммы требуется внедрение метода с помощью [**GuidGen**](/previous-versions/windows/embedded/ms924300(v=msdn.10)) или какого-либо другого средства. Эта стратегия также требует настройки политики для определения необходимости изменения значения при добавлении новых локализуемых ресурсов.

Чтобы применить контрольную сумму "Английский (США)" ко всем файлам, можно использовать любой из описанных выше методов обработки контрольных сумм. Например, можно создать файл файла ресурсов LN и для конкретного языка для английского языка (США), а затем использовать параметр МУИРКТ-d для получения итоговой контрольной суммы. Эту контрольную сумму можно скопировать в файл конфигурации ресурса и использовать параметр-q с МУИРКТ, чтобы применить контрольную сумму ко всем остальным файлам.

### <a name="use-of-a-resource-configuration-file-with-muirct"></a>Использование файла конфигурации ресурсов с МУИРКТ

При использовании МУИРКТ можно указать данные конфигурации ресурсов. Независимо от того, предоставиле ли вы явно файл конфигурации ресурсов, все файлы ресурсов, относящиеся к конкретному языку, имеют данные конфигурации ресурсов, как и любой LN-файл со связанным файлом ресурсов. Пример:

-   Если вы используете параметр-q для указания файла конфигурации ресурса, но в исходном файле входных данных нет локализуемых ресурсов, файл ресурсов для конкретного языка не создается, а результирующий LN-файл не содержит данные конфигурации ресурсов. Кроме того, если входной файл источника содержит многоязычные ресурсы, МУИРКТ не будет разделять файл.

> [!Note]  
> В настоящее время поведение МУИРКТ не согласуется, если элемент Неутралресаурцес файла конфигурации ресурса не содержит элементов resourceType, а элемент localizedResources содержит строки и меню, например. В этом случае МУИРКТ разделяет ресурсы следующим образом:
>
> -   Все ресурсы в исходном двоичном файле (включая строки и меню) и ресурсы многоязыкового интерфейса пользователя помещаются в LN-файл.
> -   Строки, меню и ресурсы многоязыкового интерфейса пользователя помещаются в соответствующий файл ресурсов, зависящий от языка.

 

### <a name="examples-for-using-muirct"></a>Примеры использования МУИРКТ

**Примеры стандартного использования**


```C++
muirct -q mui.MMF bar.exe barnew.exe barnew.exe.mui

muirct -d myprog.exe.mui
```



**Пример вывода выходных файлов с помощью параметра-d**

Ниже приведен пример выходных данных конфигурации ресурсов из LN-файла, Shell32.dll с помощью параметра-d с МУИРКТ:


```C++
Signature          -    fecdfecd
Length             -    148
RC Config Version  -    10000
FileType           -    11
SystemAttributes   -    100
UltimateFallback location    -  external
Service Checksum   -    14f44a8d86bef14af26d9a885964c935
Checksum           -    f5b3b7ab330439d6fcc07582c3afb613
MainNameTypes      -    AVI FTR ORDERSTREAM TYPELIB UIFILE XML MUI
MainIDTypes        -    1 2 3 12 14 16 24
MuiNameTypes       -    MUI
MuiIDTypes         -    2 3 4 5 6 9 14 16
UltimateFallbackLanguage   -   en-US
```



**Пример вывода файла ресурсов Language-Specific с помощью параметра-d**

Ниже приведен пример выходных данных конфигурации ресурсов из файла MUI Shell32.dll. MUI с помощью параметра-d для МУИРКТ:


```C++
Signature          -    fecdfecd
Length             -     c8
RC Config Version  -    10000
FileType           -    12
SystemAttributes   -    100
Service Checksum   -    14f44a8d86bef14af26d9a885964c935
Checksum           -    f5b3b7ab330439d6fcc07582c3afb613
MainNameTypes      -    MUI
MainIDTypes        -    2 3 4 5 6 9 14 16
Language           -    en-US
```



## <a name="rc-compiler-utility"></a>Служебная программа компилятора RC

Компилятор RC (Rc.exe) — это служебная программа командной строки для компиляции файла скрипта определения ресурса (расширение RC) в файлы ресурсов (расширение RES). компилятор RC включен в Windows SDK. В этом документе объясняется только использование компилятора RC с возможностями загрузчика ресурсов, связанными с MUI. Полные сведения о компиляторе см. в разделе [о файлах ресурсов](../menurc/about-resource-files.md).

Компилятор RC позволяет выполнять сборку из одного набора источников, LN-файла и отдельного файла ресурсов, зависящего от языка. Как и для МУИРКТ, файлы связаны с данными конфигурации ресурсов.

### <a name="rc-compiler-syntax-as-used-for-mui-resources"></a>Синтаксис компилятора RC, используемый для ресурсов MUI

Параметры компилятора RC подробно определяются при использовании версии- [кандидата](../menurc/using-rc-the-rc-command-line-.md). В этом разделе определяются только параметры, используемые для создания ресурсов MUI. Помните, что каждый параметр не учитывает регистр. Типы ресурсов считаются нейтральными к языку, если не указано иное.


```C++
rc [-h|-?] -fm mui_res_name [-q rc_config_file_name] [-g langid] [-g1 ] [-g2 version]
```



**Параметры и аргументы**




| | | -h |-? | Отображает экран справки. | | -FM | Использует указанный файл ресурсов для зависящих от языка ресурсов. Обычно компилятор ресурсов создает файл ресурсов, зависящий от языка. Однако файл не создается, если выполняется одно из следующих условий.<br /><ul><li>В RC-файле нет локализуемых ресурсов.</li><li>Единственный язык ресурсов, найденный в RC-файле, — это нейтральный язык.</li><li>RC-файл содержит ресурсы для более чем одного языка, не считая нейтральный язык. Если RC-файл содержит ресурсы для двух языков, а один из них является нейтральным языком, компилятор считает, что файл является одноязычным. При наличии локализуемых ресурсов компилятор создает файл ресурсов, зависящий от языка.</li></ul> | | -q | Использует указанный файл конфигурации ресурсов для получения типов ресурсов для размещения в файле ресурсов для конкретного языка и в LN-файле. Дополнительные сведения см. <a href="preparing-a-resource-configuration-file.md">в разделе Подготовка файла конфигурации ресурса</a>. В качестве альтернативы этому параметру можно использовать параметры-j и-k, но рекомендуется использовать файл конфигурации ресурсов. <br /> С помощью параметра-q с файлом конфигурации ресурсов можно реализовать разбиение на элементы и предоставить атрибуты, которые будут иметь конфигурацию двоичных ресурсов в LN и файле ресурсов, зависящем от языка. Это разбиение невозможно с помощью ключей-j и-k.<blockquote>[!Note]<br />Процесс разбиения компилятора RC не работает должным образом, если ресурсы и сведения о версии хранятся в разных файлах конфигурации ресурсов. В этом случае компилятор RC не разделяет сведения о версии. Поэтому во время связывания файла ресурсов, относящегося к конкретному языку, возникает ошибка компоновщика, так как у файла нет ресурсов версии.</blockquote><br /><br /> | | -g | Указывает конечный идентификатор <a href="language-identifiers.md">базового языка</a> в шестнадцатеричном формате.<br /> | | -G1 | Создает RES-файл MUI, даже если ресурсом версии является единственное локализуемое содержимое. По умолчанию компилятор RC не создает RES-файл, если версия является единственным локализуемое ресурсом.<br /> | | -G2 | Указывает настраиваемый номер версии, используемый при вычислении контрольной суммы.<br /> | | mui_res_name | Файл ресурсов для ресурсов, зависящих от языка.<br /> | | rc_config_file_name | Файл конфигурации ресурсов.<br /> | | LangID | Идентификатор языка.<br /> | | Версия | Пользовательский номер версии в формате, например "6.2.0.0".<br /> | 




 

### <a name="example-for-using-rc-compiler-to-build-mui-resources"></a>Пример использования компилятора RC для создания ресурсов многоязыкового интерфейса пользователя

Чтобы продемонстрировать операцию компилятора RC с ресурсами многоязыкового интерфейса пользователя, давайте рассмотрим следующую командную строку для файла ресурсов MyFile. rc:


```C++
rc -fm myfile_res.res -q myfile.rcconfig myfile.rc
```



Эта командная строка заставляет компилятор RC выполнить следующие действия:

-   Создайте файл ресурсов для конкретного языка MyFile \_ Res. Res и файл ресурсов, не зависящий от языка, который по умолчанию имеет значение MyFile. res на основе имени RC-файла.
-   Добавьте 2 (Item 5 6 7 8 9 10 11 12), 4, 5, 6, 9, 11, 16, 23, 240, 1024 \_ типы ресурсов My Type в файл Res, зависящий от языка, если они находятся в RC-файле.
-   Добавьте тип ресурса 16, а также другие типы ресурсов, описанные в файле ресурсов, в файл с нейтральным языком. Res и в RES-файл, зависящий от языка. Обратите внимание, что в этом примере тип ресурса 16 добавляется в двух местах.
-   Выберите значение атрибута «Ултиматефаллбакклангуаже», чтобы вставить данные конфигурации ресурса «LN file» на основе следующих критериев, упорядоченных от наивысшего приоритета к наименьшему:
    -   Атрибут "Ултиматефаллбакклангуаже" в файле конфигурации ресурса, если он передан в качестве входных данных.
    -   Значение атрибута language для вставки в данные конфигурации ресурсов на основе порядка языков компилятора RC (нейтральный к определенному языку язык файла ресурсов). Рекомендации включают в себя язык в RC-файле, значение языка параметра-GL и идентификатор 0x0409 для английского языка (США).

## <a name="remarks"></a>Комментарии

Если включить в элемент Неутралресаурцес любой тип ресурса ICON (3), DIALOG (5), STRING (6) или VERSION (16), необходимо дублировать эту запись в элементе localizedResources в файле конфигурации ресурса.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[многоязычный пользовательский интерфейс IsReference](multilingual-user-interface-reference.md)
</dt> <dt>

[Управление ресурсами MUI](mui-resource-management.md)
</dt> <dt>

[Локализация ресурсов и сборка приложения](localizing-resources-and-building-the-application.md)
</dt> </dl>

 

 
