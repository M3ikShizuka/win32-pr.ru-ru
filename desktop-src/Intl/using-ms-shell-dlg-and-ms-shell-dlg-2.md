---
description: Использование MS Shell Dlg и MS Shell Dlg 2
ms.assetid: ac3b57a6-5b92-4366-ad71-c501cec60997
title: Использование MS Shell Dlg и MS Shell Dlg 2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9ad43f972e776151551fa312ce2bd8ed6d19be58
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105684604"
---
# <a name="using-ms-shell-dlg-and-ms-shell-dlg-2"></a>Использование MS Shell Dlg и MS Shell Dlg 2

Windows доступна в локализованных выпусках для многих языков. Однако на английском языке можно также использовать для запуска приложений, написанных на языках, отличных от английского. Это справедливо даже в том случае, если скрипт, используемый для этих языков, отличается, как и при написании приложений на греческом или японском языке. Для этих приложений требуется пользовательский интерфейс с диалоговыми окнами, значками и служебными программами, предоставляющими информацию на языке приложения, который может отличаться от языка, используемого в текущем пользовательском интерфейсе Windows.

Проблема выбора шрифта для пользовательского интерфейса очевидна. Например, шрифт оболочки, также известный как система или шрифт по умолчанию для английского языка (США), Windows 98 — MS Sans Serif, а шрифт оболочки для греческого (Греция) Windows 98 — это греческий язык MS Sans Serif. Для японского (Япония) Windows 98 шрифт оболочки — MS UI Gothic. Эти наборы символов не могут быть напрямую сопоставлены друг с другом. Замена MS Sans Serif на MS Sans Serif греческая, если языковой стандарт установлен в греческий (Греция), не позволяет существующим приложениям работать надлежащим образом или отображать греческие символы в системных меню, диалоговых окнах и элементах управления редактирования.

Windows решает эту проблему с помощью логических шрифтов MS Shell Dlg и MS Shell Dlg 2, чтобы разрешить выбор соответствующего шрифта для вывода сценария. В этом разделе рассматриваются некоторые вопросы программирования по использованию логических шрифтов для реализации диалоговых окон, меню и таких способов, как для гибких пользовательских интерфейсов, которые хорошо отображаются во всех поддерживаемых операционных системах Windows и на всех языках. Дополнительные сведения см. в разделе [Создание и выбор шрифта](../gdi/font-creation-and-selection.md). См. также [многоязыковой интерфейс пользователя](multilingual-user-interface.md) для обсуждения использования технологии многоязыкового пользовательского интерфейса (MUI) при создании пользовательских интерфейсов для многоязычных приложений.

## <a name="about-the-logical-fonts"></a>О логических шрифтах

Логические шрифты MS Shell Dlg и MS Shell Dlg 2 по сути представляют собой имена, используемые для сопоставления, чтобы обеспечить поддержку национальных настроек и языков и региональных параметров, содержащих символы, не входящие в кодовую страницу 1252, кодировку Windows для США и Западной Европы. MS Shell Dlg сопоставляется со шрифтом оболочки по умолчанию, связанным с текущим языком и региональными параметрами, и поддерживает классический вид рабочего стола Windows. Имя лица MS Shell Dlg 2 было введено в Windows 2000 для поддержки вида, появившегося в Windows 2000.

Например, если приложение использует MS Shell Dlg или MS Shell Dlg 2 для диалоговых окон, группа локализации, создающая для приложения языки для греческого языка, может сосредоточиться на преобразовании текста. Они не должны беспокоиться о таких проблемах, как различие между MS Sans Serif и MS Sans Serif греческого языка.

> [!Note]  
> Шрифты, создаваемые MS Shell Dlg и MS Shell Dlg 2, отличаются в разных версиях Windows. Поэтому следует убедиться, что элементы пользовательского интерфейса хорошо отображаются на всех платформах.

 

## <a name="handle-hard-coded-font-names"></a>Обработайте Hard-Coded имена шрифтов

Использование Юникода позволяет приложениям работать с тысячами различных символов, но большинство шрифтов не охватывает весь набор символов Юникода. Приложения не должны жестко кодировать названия шрифтов. Одна из причин заключается в том, что жестко закодировать имя шрифта, которое отображает символы для одного языка, а не символы для другого языка, приведет к неправильному отображению локализованного текста на втором языке. Другая причина, по которой не нужно жестко кодировать шрифты, заключается в том, что нужный шрифт может не загружаться в операционной системе, отображающей текст приложения.

Лучший способ считать имена шрифтов — рассматривать их как локализуемые ресурсы. Использование логического шрифта решает проблему запуска интерфейса с помощью любого языка в Windows NT или Windows 2000 для любого языка. Задание имени шрифта в качестве локализуемого ресурса позволяет вашему локализаторам изменять шрифт для локализованного пользовательского интерфейса.

## <a name="handle-hard-coded-font-sizes"></a>Маркеры Hard-Coded размеров шрифтов

Некоторые сценарии являются сложными и занимают правильное отображение большого количества пикселей. Например, большинство символов английского языка отображаются в сетке 5x7, но для японских символов требуется четкое отображение по крайней мере 16-разрядной таблицы. В то время как в китайском случае требуется сетка 24x24, для тайского языка требуется 8 пикселей, а для высоты — по крайней мере 22 пикселя. Легко понять, что некоторые символы могут быть неудобочитаемыми при небольшом размере шрифта.

Пользовательский интерфейс приложения должен рассматривать размеры шрифтов как локализуемые ресурсы. Использование логического шрифта решает проблему запуска интерфейса с помощью любого языка в Windows NT или Windows 2000 для любого языка. Установка размера шрифта в качестве локализуемого ресурса позволяет вашему локализаторам изменять шрифт для локализованного пользовательского интерфейса.

## <a name="map-the-logical-fonts"></a>Сопоставьте логические шрифты

Каждый из логических шрифтов сопоставляется с записью в реестре с соответствующим шрифтом оболочки для текущего активного языкового стандарта. При использовании одного из логических шрифтов Windows переключается на шрифт для выбранного в данный момент языкового стандарта во время выполнения. Эта операция позволяет правильно отобразить Английский (США) пользовательский интерфейс Windows, а также символы, не находящуюся в кодовой странице 1252. Поэтому в настоящее время разрешается выполнение локализованных приложений в английской (США) версии Windows без изменения.

Каждый компьютер Windows сопоставляет MS Shell Dlg и MS Shell Dlg 2 с соответствующим физическим шрифтом на основе определенного языка для программ, не поддерживающих Юникод, описанных в [терминологии NLS](nls-terminology.md). Фактические сопоставления хранятся в разделе реестра HKEY \_ локальный \_ компьютер \\ программное обеспечение \\ Microsoft \\ Windows NT \\ Текущая версия \\ фонтсубститутес.

### <a name="font-mapping-on-windows-me9895"></a>Сопоставление шрифтов в Windows Me/98/95

MS Shell Dlg обычно соответствует версии MS Sans Serif, зависящей от кодовой страницы.

### <a name="font-mapping-on-windows-nt-40"></a>Сопоставление шрифтов в Windows NT 4,0

MS Shell Dlg сопоставляется с засечками MS Sans Serif для западных и центральных европейских, греческих, турецких, Балтийская и языков с использованием кириллицы Script; MS UI Gothic для японского; Гулим для корейского языка; SimSun для упрощенного китайского языка; Пминглу для традиционного китайского языка; 123.

### <a name="font-mapping-on-windows-2000-windows-xp-windows-server-2003-windows-vista-and-windows-7"></a>Сопоставление шрифтов в Windows 2000, Windows XP, Windows Server 2003, Windows Vista и Windows 7

Оба логических шрифта сопоставляются с шрифтами TrueType на основе Юникода. В MS Shell Dlg используется Microsoft Sans Serif (отличный от MS Sans Serif), если язык установки не является японским. Если язык установлен на японском языке, MS Shell Dlg сопоставляется с MS UI Gothic.

В системах Windows XP MUI MS Shell Dlg сопоставляется с MS UI Gothic, только если язык системы и язык пользовательского интерфейса установлены в японский. В противном случае MS Shell Dlg сопоставляется с Microsoft Sans Serif.

В Windows Vista и Windows 7 MS Shell Dlg сопоставляется с MS UI Gothic, если для языка пользовательского интерфейса по умолчанию компьютера задано значение "Японский" (независимо от языка установки). MS Shell Dlg сопоставляется с Microsoft Sans Serif, если в качестве языка пользовательского интерфейса по умолчанию выбран язык, отличный от японского.

В MS Shell Dlg 2 просто используется шрифт Tahoma независимо от языка. Основным преимуществом Tahoma по сравнению с Microsoft Sans Serif является то, что Tahoma имеет собственный полужирный шрифт. Его основной недостаток заключается в том, что старые операционные системы могут не устанавливаться и могут заменять менее привлекательным шрифтом.

Символы, не реализованные в Tahoma или Microsoft Sans Serif, могут быть реализованы в других шрифтах Windows, которые используются для вывода текста в пользовательских интерфейсах. В зависимости от того, какие элементы управления или интерфейсы API используются для отображения текста, система может использовать различные механизмы, такие как [связывание шрифтов](https://msdn.microsoft.com/globalization/mt662331) , для автоматического выбора таких шрифтов для отображения этих символов.

Приложения могут явно использовать либо Microsoft Sans Serif, либо Tahoma, и сохранять уровень косвенного обращения, вовлеченного в использование MS Shell Dlg или MS Shell Dlg 2. Из-за того, что при связывании шрифтов указание Microsoft Sans Serif или Tahoma предоставляет соответствующие глифы для всех языков.

## <a name="use-ms-shell-dlg-for-a-non-english-application-on-windows-me9895"></a>Использовать MS Shell Dlg для приложения, отличного от английского, в Windows Me/98/95

В Windows Me/98/95 MS Shell Dlg не предназначен для использования со статическим приложением пользовательского интерфейса, отличным от английского, которое выполняется, когда пользователь выбрал языковой стандарт с другой базовой кодировкой Windows. В этом случае язык пользовательского интерфейса приложения может не поддерживаться шрифтом, который подставляется для MS Shell Dlg.

Например, если пользователь использует немецкую версию Windows и хочет установить приложение на греческом языке не в Юникоде, пользователь пытается изменить языковой стандарт на греческий (Греция). Это действие сбрасывает MS Shell Dlg до греческого шрифта, но этот шрифт не содержит все глифы, необходимые для просмотра на немецком языке. Таким образом, любые символы, отличные от ASCII, в пользовательском интерфейсе на немецком языке будут отображаться неправильно. Для поддержки этого сценария приложение должно установить для MS Shell Dlg шрифт, который содержит как западноевропейские, так и греческие глифы.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Перечисление международных шрифтов и выбор](using-international-fonts-and-text.md)
</dt> <dt>

[Многоязыковой интерфейс пользователя](multilingual-user-interface.md)
</dt> </dl>

 

 
