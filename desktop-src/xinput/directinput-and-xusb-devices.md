---
title: Устройства Директинпут и КСУСБ
description: Драйвер для класса общего контроллера Xbox (КСУСБ) в Windows реализует интерфейс режима ядра для библиотеки DLL КСИНПУТ.
ms.assetid: 8bf47b07-a1b6-7721-2136-3853e72c71ad
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5b2b6d2857502c0e0209d94fb6d933618c180fd2
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104339068"
---
# <a name="directinput-and-xusb-devices"></a>Устройства Директинпут и КСУСБ

Драйвер для класса общего контроллера Xbox (КСУСБ) в Windows реализует интерфейс режима ядра для библиотеки DLL КСИНПУТ. Чтобы обеспечить хорошую работу для устаревших наименований, использующих API [директинпут](/previous-versions/windows/desktop/ee416842(v=vs.85)) с устройством общего контроллера, драйвер также экспортирует интерфейс класса устройство HID (HID), который забирается директинпут. Мы выбрали сопоставление КСУСБ с HID на основе типичного поведения в наборе игровых приложений для исходной версии КСИНПУТ, и мы обновили сопоставление для новых подтипов. В этом разделе описывается сопоставление.

## <a name="human-interface-device-hid"></a>Устройство HID

HID Standard — это стандарт от Комитета универсальной последовательной шины (USB), первоначально предложенный корпорацией Майкрософт для обобщенных протоколов для устройств ввода. Она состоит из языка описания байтового кода и может выражать игровые планшеты, мыши, джойстики, регулировки и руль, а также многоуровневые контроллеры. Поскольку этот стандарт является обобщенным, у вас могут возникнуть трудности при написании программного обеспечения, использующего входные данные с произвольных устройств. Таким образом, для [директинпут](/previous-versions/windows/desktop/ee416842(v=vs.85)) API, ориентированного на игры, мы разработали определенное подсопоставление типов, чтобы обеспечить поддержку аппаратных устройств с помощью своих драйверов.

- [Определение класса USB-устройства для HID v 1.11](https://www.usb.org/document-library/device-class-definition-hid-111)

> [!Important]
> Вы также можете получить доступ к устройствам ввода HID через [API равинпут](../inputdev/about-raw-input.md) и обрабатывать входные отчеты с помощью [интерфейса API HID](/windows-hardware/drivers/hid/introduction-to-hid-concepts) нижнего уровня, но обратная связь не будет работать, как в случае с [директинпут](/previous-versions/windows/desktop/ee416842(v=vs.85)).

## <a name="mappings"></a>Сопоставления

Драйвер КСУСБ реализует интерфейс класса КСУСБ и интерфейс класса HID для устройств с целью поддержки использования как КСИНПУТ, так и [директинпут](/previous-versions/windows/desktop/ee416842(v=vs.85)) . Это сопоставление основано на сведениях о подтипа КСУСБ. Драйвер реализует четыре отдельные группы сопоставлений.

| Подтип КСУСБ                                      | Сопоставление                     |
|---------------------------------------------------|-----------------------------|
| \_ \_ Игровой планшет ксинпут девсубтипе (подтип 1)           | Геймпад                     |
| КСИНПУТ \_ девсубтипе \_ Wheel (подтип 2)             | Wheel                       |
| КСИНПУТ \_ девсубтипе \_ аркадные \_ (подтип 3)     | Аркадные клейких и Аркадныеных планшетов     |
| КСИНПУТ \_ девсубтипе \_ рейс \_ (подтип 4)     | Полетом                |
| КСИНПУТ \_ девсубтипе \_ Dance \_ Pad (подтип 5)        | По умолчанию для любого нового подтипа |
| КСИНПУТ \_ девсубтипе \_ гитаре (подтип 6)            | Гитаре                      |
| КСИНПУТ \_ девсубтипе \_ гитаре \_ alternate (подтип 7) |                             |
| \_ \_ Комплект барабана ксинпут девсубтипе \_ (подтип 8)         |                             |
| КСИНПУТ \_ девсубтипе \_ гитаре \_ НЧ (подтип 11)     |                             |
| КСИНПУТ \_ девсубтипе \_ аркадные \_ Pad (подтип 19)      |                             |

> [!Note]  
> Следующие сопоставления HID являются статическими. Это означает, что даже если отчет о возможностях устройства указывает на то, что определенная кнопка или ось не поддерживается, сопоставление будет по-прежнему включать в себя, но всегда будет сообщать о состоянии или значении центра.

## <a name="gamepad"></a>Геймпад

Это сопоставление по умолчанию, которое разработано на стандартном планшете основного контроллера Xbox и предоставляется как тип использования HID на *игровом планшете* .

| Control                      | Имя использования HID | Страница "использование" | Идентификатор использования   |
|------------------------------|----------------|------------|------------|
| Наклейка слева                   | X, Y           | 0x01       | 0x30, 0x31 |
| Правая записка                  | RX, дые         | 0x01       | 0x33, 0x34 |
| Левый триггер + правый триггер | Z\*            | 0x01       | 0x32       |
| D-раскладка вверх, вниз, влево, вправо  | Переключатель Hat     | 0x01       | 0x39       |
| Объект                            | Кнопка 1       | 0x09       | 0x01       |
| B                            | Кнопка 2       | 0x09       | 0x02       |
| X                            | Кнопка 3       | 0x09       | 0x03       |
| Да                            | Кнопка 4       | 0x09       | 0x04       |
| ФУНТОВ (левый амортизатор)             | Кнопка 5       | 0x09       | 0x05       |
| RB (правый амортизатор)            | Кнопка 6       | 0x09       | 0x06       |
| НАЗАД                         | Кнопка 7       | 0x09       | 0x07       |
| START                        | Кнопка 8       | 0x09       | 0x08       |
| ЛСБ (левая кнопка клюшки)      | Кнопка 9       | 0x09       | 0x09       |
| РСБ (правая кнопка)     | Кнопка 10      | 0x09       | 0x0A       |

> [!Note]  
> ( \* ): Это сочетание заключается в том, что Z поддерживает поведение центров, ожидаемое большинством заголовков для вращения; это означает, что невозможно просмотреть все возможные значения сочетания триггеров с помощью [ДИРЕКТИНПУТ](/previous-versions/windows/desktop/ee416842(v=vs.85)) и HID.

## <a name="arcade-stickarcade-pad"></a>Аркадные клейких и Аркадныеных планшетов

Это сопоставление, разработанное вокруг контроллера Аркадные, и предоставляется в качестве типа использования HID на *игровом планшете* . Аркадныеная панель очень похожа на Аркадные, но в более низком конструктивном коэффициенте. Эти конструкции заменяют аналоговый левый триггер и правый триггер с цифровыми кнопками, которые сообщают минимальное и максимальное значения оси.

| Control                     | Имя использования HID | Страница "использование" | Идентификатор использования |
|-----------------------------|----------------|------------|----------|
| D-раскладка вверх, вниз, влево, вправо | Переключатель Hat     | 0x01       | 0x39     |
| Объект                           | Кнопка 1       | 0x09       | 0x01     |
| B                           | Кнопка 2       | 0x09       | 0x02     |
| X                           | Кнопка 3       | 0x09       | 0x03     |
| Да                           | Кнопка 4       | 0x09       | 0x04     |
| ФУНТОВ (левый амортизатор)            | Кнопка 5       | 0x09       | 0x05     |
| RB (правый амортизатор)           | Кнопка 6       | 0x09       | 0x06     |
| НАЗАД                        | Кнопка 7       | 0x09       | 0x07     |
| START                       | Кнопка 8       | 0x09       | 0x08     |
| Левый триггер                | Кнопка 9       | 0x09       | 0x09     |
| Правый триггер               | Кнопка 10      | 0x09       | 0x0A     |

Эти устройства могут не поддерживать дополнительные элементы управления, но они не предоставляются с помощью сопоставления HID: левая, правая, ЛСБ (левая кнопка клюшки) и РСБ (правая кнопка).

## <a name="wheel"></a>Wheel

Это сопоставление разработано на основе колесика приставки Xbox и предоставляется как тип использования HID на *игровом планшете* .

| Control                                                        | Имя использования HID | Страница "использование" | Идентификатор использования |
|----------------------------------------------------------------|----------------|------------|----------|
| Колесо (слева закрепление X)                                           | X              | 0x01       | 0x30     |
| Педали ускорителя (правый триггер) + педали тормоза (левый триггер) | Z\*            | 0x01       | 0x32     |
| D-раскладка вверх, вниз, влево, вправо                                    | Переключатель Hat     | 0x01       | 0x39     |
| Объект                                                              | Кнопка 1       | 0x09       | 0x01     |
| B                                                              | Кнопка 2       | 0x09       | 0x02     |
| X                                                              | Кнопка 3       | 0x09       | 0x03     |
| Да                                                              | Кнопка 4       | 0x09       | 0x04     |
| ФУНТОВ (левый амортизатор)                                               | Кнопка 5       | 0x09       | 0x05     |
| RB (правый амортизатор)                                              | Кнопка 6       | 0x09       | 0x06     |
| ЛСБ (левая кнопка клюшки)                                        | Кнопка 7       | 0x09       | 0x07     |
| РСБ (правая кнопка)                                       | Кнопка 8       | 0x09       | 0x08     |
| НАЗАД                                                           | Кнопка 9       | 0x09       | 0x09     |
| START                                                          | Кнопка 10      | 0x09       | 0x0A     |

> [!Note]  
> ( \* ): Это сочетание заключается в том, что Z поддерживает поведение центров, ожидаемое большинством заголовков элементов управления для тормоза и ускорителя; это означает, что невозможно увидеть все возможные значения комбинации педалей через [директинпут](/previous-versions/windows/desktop/ee416842(v=vs.85)).

## <a name="flight-stick"></a>Полетом

Это сопоставление разработано на основе рейса Xbox и предоставляется в виде типа *использования HID.*

| Control                     | Имя использования | Страница "использование" | Идентификатор использования   |
|-----------------------------|------------|------------|------------|
| Рукоятка самолета (слева)   | X, Y       | 0x01       | 0x30, 0x31 |
| Переключатель вида (справа)       | RX, дые     | 0x01       | 0x33, 0x34 |
| Регулирование (правый триггер)    | Z          | 0x01       | 0x32       |
| Руль (левый триггер)       | Rz         | 0x01       | 0x35       |
| D-раскладка вверх, вниз, влево, вправо | Переключатель Hat | 0x01       | 0x39       |
| Первичный оружия (A)          | Кнопка 1   | 0x09       | 0x01       |
| Вторичный оружия (B)        | Кнопка 2   | 0x09       | 0x02       |
| X                           | Кнопка 3   | 0x09       | 0x03       |
| Да                           | Кнопка 4   | 0x09       | 0x04       |
| ФУНТОВ (левый амортизатор)            | Кнопка 5   | 0x09       | 0x05       |
| RB (правый амортизатор)           | Кнопка 6   | 0x09       | 0x06       |
| НАЗАД                        | Кнопка 7   | 0x09       | 0x07       |
| START                       | Кнопка 8   | 0x09       | 0x08       |
| ЛСБ (левая кнопка клюшки)     | Кнопка 9   | 0x09       | 0x09       |
| РСБ (правая кнопка)    | Кнопка 10  | 0x09       | 0x0A       |

> [!Note]  
> Это основано на окончательной полетом. Так как это отличается от определений раннего рейса, многие устройства имеют переключатель режима, поддерживающий старую и новую модели. Это сопоставление предполагает новую модель.