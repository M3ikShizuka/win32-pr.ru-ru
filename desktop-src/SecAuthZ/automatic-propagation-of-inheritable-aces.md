---
description: Функции Сетнамедсекуритинфо и Сетсекуритинфо поддерживают автоматическое распространение наследуемых записей контроля доступа (ACE).
ms.assetid: 0aa49b9b-13e3-4ef9-921d-ea47a013e5a1
title: Автоматическое распространение наследуемых ACE
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8fab03c73a1c926468e46a0d0492e512dab42af6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104273096"
---
# <a name="automatic-propagation-of-inheritable-aces"></a>Автоматическое распространение наследуемых ACE

Функции [**сетнамедсекуритинфо**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) и [**сетсекуритинфо**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) поддерживают автоматическое распространение наследуемых [*записей контроля доступа*](/windows/desktop/SecGloss/a-gly) (ACE). Например, при использовании этих функций для добавления наследуемого ACE в каталог в файловой системе NTFS система применяет ACE в соответствии с [*списками управления доступом*](/windows/desktop/SecGloss/a-gly) (ACL) всех существующих подкаталогов или файлов.

Непосредственно примененные ACE имеют приоритет над наследуемыми элементами управления доступом. Система реализует этот приоритет, помещая непосредственно примененные ACE прямо из наследуемых ACE в [*избирательный список управления доступом*](/windows/desktop/SecGloss/d-gly) (DACL). При вызове функций [**сетнамедсекуритинфо**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) и [**сетсекуритинфо**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) для задания сведений о безопасности объекта система накладывает текущую модель наследования на списки ACL всех объектов в иерархии под целевым объектом. Для объектов, которые были преобразованы в текущую модель наследования, в \_ \_ \_ \_ \_ \_ поле Control [*дескриптора безопасности*](/windows/desktop/SecGloss/s-gly) объекта задаются автоматические унаследованные биты набора DACL (SE) и разрешения SE SACL.

При создании нового дескриптора безопасности, отражающего текущую модель наследования, не изменяется семантика дескриптора безопасности. Таким образом, разрешение и отклонение Ace никогда не перемещается по отношению друг к другу. Если требуется такое перемещение (например, для размещения всех неунаследованных ACE в начале списка ACL), список ACL помечается как защищенный, чтобы предотвратить семантическое изменение.

При распространении наследуемых ACE на дочерние объекты система использует следующие правила:

-   Если дочерний объект без DACL наследует ACE, то результатом является дочерний объект с DACL, который содержит только унаследованный элемент ACE.
-   Если дочерний объект с пустым списком DACL наследует запись ACE, то результатом будет дочерний объект с DACL, который содержит только унаследованный элемент ACE.
-   При удалении наследуемого элемента ACE из родительского объекта автоматическое наследование удаляет все копии ACE, унаследованные дочерними объектами.
-   Если автоматическое наследование приводит к удалению всех записей ACE из списка DACL дочернего объекта, дочерний объект имеет пустой DACL, а не DACL.

Эти правила могут привести к непредвиденному результату преобразования объекта без DACL в объект с пустым списком DACL. Объект без DACL обеспечивает полный доступ, но объект с пустым списком DACL не предоставляет доступа. В качестве примера того, как эти правила могут создать пустой список DACL, предположим, что вы добавили наследуемый ACE в корневой объект дерева объектов. Автоматическое наследование распространяет наследуемый ACE на все объекты в дереве. Дочерние объекты, запущенные без DACL, теперь имеют список DACL с унаследованным элементом управления доступом. При удалении наследуемого ACE из корневого объекта система автоматически распространяет изменения в дочерние объекты. Дочерние объекты, запущенные без DACL (разрешение полного доступа), теперь имеют пустой список DACL (без доступа).

Чтобы наследуемые ACE не влияли на дочерний объект без DACL, установите \_ \_ флаг защищенного списка DACL SE в дескрипторе безопасности объекта.

Сведения о том, как правильно создать список DACL, см. [в разделе Создание списка DACL](/windows/desktop/SecBP/creating-a-dacl).

 

 
