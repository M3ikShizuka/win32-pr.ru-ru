---
description: Windows поддерживает набор функций, которые создают список управления доступом (acl) или изменяют записи контроля доступа (ace) в существующем списке управления доступом.
ms.assetid: 71301aab-1040-4f61-855f-2b891c8b6077
title: Создание или изменение списка управления доступом
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 120b445d37f8c4b82c2b0b2a775a06d68faa46ab5752cc25e913d43676e9a72e
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117782169"
---
# <a name="creating-or-modifying-an-acl"></a>Создание или изменение списка управления доступом

Windows поддерживает набор функций, которые создают [*список управления доступом*](/windows/desktop/SecGloss/a-gly) (acl) или изменяют [*записи контроля доступа*](/windows/desktop/SecGloss/a-gly) (ace) в существующем списке управления доступом.

Функция [**сетентриесинакл**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) создает новый список ACL. **Сетентриесинакл** может указать совершенно новый набор записей ACE для ACL или выполнить слияние одного или нескольких новых записей ACE с элементами управления доступом существующего списка ACL. Функция **сетентриесинакл** использует массив [**явных структур \_ доступа**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) для указания сведений для новых записей ACE. Каждая **явная структура \_ доступа** содержит сведения, описывающие один элемент управления доступом. Эти сведения включают права доступа, Тип ACE, флаги, управляющие наследованием ACE, и структуру [**доверенного лица**](/windows/desktop/api/AccCtrl/ns-accctrl-trustee_a) , определяющую доверенное лицо.

**Добавление нового элемента управления доступом в существующий список управления доступом**

1.  Используйте функцию [**жетсекуритинфо**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) или [**жетнамедсекуритинфо**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) , чтобы получить существующий список DACL или список SACL из [*дескриптора безопасности*](/windows/desktop/SecGloss/s-gly)объекта.
2.  Для каждого нового элемента управления доступом вызовите функцию [**буилдексплиЦитакцессвиснаме**](/windows/desktop/api/Aclapi/nf-aclapi-buildexplicitaccesswithnamea) для заполнения [**явной структуры \_ доступа**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) сведениями, описывающими элемент управления доступом.
3.  Вызовите [**сетентриесинакл**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla), указав существующий список ACL и массив [**явных структур \_ доступа**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) для новых записей ACE. Функция **сетентриесинакл** выделяет и инициализирует список управления доступом и его записи ACE.
4.  Вызовите функцию [**сетсекуритинфо**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) или [**сетнамедсекуритинфо**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) , чтобы присоединить новый список ACL к дескриптору безопасности объекта.

Если вызывающий объект указывает существующий список ACL, [**сетентриесинакл**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) объединяет новые данные ACE с существующими элементами ACE в списке управления доступом. Рассмотрим случай, например, если существующий список ACL предоставляет доступ к указанному доверенному лицу, а [**явная структура \_ доступа**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) запрещает доступ к тому же доверенному лицу. В этом случае **сетентриесинакл** добавляет новый ACE запрещения доступа для доверенного лица и удаляет или изменяет существующий ACE, разрешенный доступом к доверенному лицу.

Пример кода, который объединяет новый элемент управления доступом в существующий список управления доступом, см. [в разделе изменение списков управления доступом для объекта в C++](modifying-the-acls-of-an-object-in-c--.md).

 

 
