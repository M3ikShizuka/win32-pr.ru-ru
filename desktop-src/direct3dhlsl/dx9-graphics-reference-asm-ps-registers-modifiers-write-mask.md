---
title: Маска записи целевого регистра
description: Маска записи определяет, какие компоненты регистра назначения записываются после завершения инструкции.
ms.assetid: 376a28c8-8a88-4807-a8ab-f59448d965e8
ms.topic: article
ms.date: 05/31/2018
topic_type:
- kbArticle
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: 80f649770b84174dbb716967e9d941034c3966f5
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986845"
---
# <a name="destination-register-write-mask"></a>Маска записи целевого регистра

Маска записи определяет, какие компоненты регистра назначения записываются после завершения инструкции. Выходная маска записи разрешается, пока компоненты находятся в порядке. RGBA или. ксизв. То есть,. роль и. КСВ являются допустимыми масками. Регистры текстур имеют один набор правил и регистры, не связанные с текстурой, имеют еще один набор правил.

## <a name="syntax"></a>Синтаксис



| DST. вритемаск |
|---------------|



 

где

-   DST — это регистр назначения.
-   вритемаск — это последовательность масок из любого набора: (x, y, z, w) или (красный, зеленый, синий, альфа).

## <a name="remarks"></a>Примечания

Доступны следующие целевые маски записи.



| Версии шейдеров пикселей | 1\_1 | 1\_2 | 1 \_ 3 | 1\_4 | 2 \_ 0 | 2 \_ x | 2 \_ SW | 3 \_ 0 | 3 \_ SW |
|-----------------------|------|------|------|------|------|------|-------|------|-------|
| . ксизв (по умолчанию)       | x    | x    | x    | x    | x    | x    | x     | x    | x     |
| . XYZ                  | x    | x    | x    | x    | x    | x    | x     | x    | x     |
| . w                    | x    | x    | x    | x    | x    | x    | x     | x    | x     |
| Произвольная маска        |      |      |      | x    | x    | x    | x     | x    | x     |



 

Произвольная маска позволяет комбинировать любой набор каналов для создания маски. Каналы должны быть указаны в порядке r, g, b, a, например, Register. роль, который обновляет красный, синий и альфа-каналы назначения. Произвольная маска доступна в версии 1 \_ 4 или более поздней.

Если Целевая маска записи не указана, то целевой маской записи по умолчанию является вариант RGBA. Иными словами, обновляются все каналы в регистре назначения.

Для версий \_ с 1 0 по 1 \_ 3 арифметическая инструкция [DP3-PS](dp3---ps.md) DP3 может использовать только маски записи с. RGB или RGBA.

Маски записи для регистров назначения поддерживаются только для арифметических операций. Их нельзя использовать в инструкциях адресации текстур, за исключением инструкций версии 1 \_ 4, [текскрд-PS](texcrd---ps.md) и [текслд-PS \_ 2 \_ 0 и выше](texld---ps-2-0.md).

По умолчанию записываются все четыре цветовых канала.


```
// All four color channels can be written by explicitly listing them.
mul r0.rgba, t0, v0

// Or, the default mask can be used to write all four channels.
mul r0, t0, v0
```



Маска записи альфа-канала также называется скалярной маской записи, так как она использует скалярный конвейер.


```
add r0.a, t1, v1
```



Таким образом, эта инструкция фактически помещает сумму альфа-компонента T1 и альфа-компонента v1 в R0. a.

Маска записи цвета используется для управления записью в цветовые каналы.


```
// The color write mask is also referred to as the vector write mask, 
//   because it uses the vector pipeline.
mul r0.rgb, t0, v0
```



Для версии 1 \_ 4 маски записи назначения можно использовать в любом сочетании, если маски упорядочены на языке r, g, b и a.


```
// This example updates the red, blue, and alpha channels.
mov r0.rba, r1
```



Инструкция для совместной выдачи позволяет одновременно выдавать две потенциально разные инструкции. Это достигается путем выполнения инструкций в альфа-канале и конвейере RGB.


```
  mul r0.rgb, t0, v0
+ add r1.a,   t1, c1
```



Преимущество связывания инструкций таким способом заключается в том, что она позволяет выполнять различные операции в векторном и скалярном конвейере параллельно.

Эти регистры выходных данных шейдера вершин ограничены следующими масками записи:



| Тип регистра | Обязательная маска записи                                              |
|---------------|------------------------------------------------------------------|
| офог          | для этого скалярного регистра не разрешена явная маска записи        |
| Решает          | для этого скалярного регистра не разрешена явная маска записи        |
| oPos          | . ксизв (используется по умолчанию)                                      |
| Наблюдения\#          | Объединенная маска:. x \| . XY \| . XYZ \| . ксизв (по умолчанию) |



 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Модификаторы регистра для шейдера пикселей](dx9-graphics-reference-asm-ps-registers-modifiers.md)
</dt> </dl>

 

 




