---
title: Хранение переменных и типов для использования шейдерами
description: Объект компоновки класса — это пространство имен для переменных и типов, которые могут совместно использоваться несколькими шейдерами.
ms.assetid: 8b61677b-a466-4646-b0b2-19097669f8c3
ms.topic: article
ms.date: 05/31/2018
topic_type:
- kbArticle
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: d40526274ea52d68b0a02dbefd02c116ded77d64e8b343a48abef2735446d971
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119853174"
---
# <a name="storing-variables-and-types-for-shaders-to-share"></a>Хранение переменных и типов для использования шейдерами

Объект компоновки класса — это пространство имен для переменных и типов, которые могут совместно использоваться несколькими шейдерами. При передаче объекта компоновки класса в вызове для создания шейдера среда выполнения собирает список переменных и типов, которые могут реализовывать каждый интерфейс в шейдере, и сохраняет имена этих переменных и типов в объекте компоновки класса.

Поэтому при вызове метода [**ID3D11ClassLinkage:: жетклассинстанце**](/windows/desktop/api/d3d11/nf-d3d11-id3d11classlinkage-getclassinstance) для создания экземпляров класса из объекта компоновки класса среда выполнения может получить переменную или тип, соответствующий имени, которое предоставляется в каждом шейдере (если это имя является допустимым для данного шейдера) и было создано с данным объектом компоновки класса.

Например, предположим, что имеется класс **Light** , реализующий интерфейс **цвета** , и этот класс используется в шейдере вершин и шейдере пикселей. При создании шейдера (например, путем вызова [**ID3D11Device:: креатепикселшадер**](/windows/desktop/api/d3d11/nf-d3d11-id3d11device-createpixelshader)) среда выполнения определяет, что тип класса **Light** доступен как в шейдере вершин, так и в Pixel Shader и добавляет тип класса **Light** в объект компоновки класса. Затем можно создать экземпляр **Light** в нужном расположении, привязать ресурсы для обоих шейдеров и передать этот экземпляр в массив экземпляров класса при задании шейдера для устройства (например, путем вызова [**ссылку ID3D11DeviceContext::P ссетшадер**](/windows/desktop/api/d3d11/nf-d3d11-id3d11devicecontext-pssetshader)). Затем среда выполнения выполняет следующую последовательность действий:

1.  Проверяет, был ли создан экземпляр с тем же объектом компоновки класса.
2.  Проверяет, что тип класса **Light** доступно в шейдерах вершин и пикселей.
3.  Выбирает правильные таблицы функций, которые могут различаться для шейдеров вершин и пикселей.
4.  Отправляет вниз смещения, предоставляемые экземпляром.

Объект компоновки класса в конечном итоге представляет собой репозиторий типа и имен переменных. Максимальное число имен, доступных для каждого элемента (типа и переменной), — 64 КБ. Чем длиннее имена типа и переменной, тем выше потребность в хранилище для метаданных интерфейса, хранящихся на шейдере. Это обусловлено тем, что среда выполнения должна хранить сопоставление для этих имен для каждого шейдера.

## <a name="related-topics"></a>Связанные разделы

[Динамическая компоновка](overviews-direct3d-11-hlsl-dynamic-linking.md)


## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Динамическая компоновка](overviews-direct3d-11-hlsl-dynamic-linking.md)
</dt> </dl>

 

 