---
title: Модель шейдера HLSL 6,0
description: Описывает встроенные функции для операций Wave, добавленные в модель шейдера HLSL 6,0.
ms.assetid: BF968CD3-AC67-48DB-B93F-EF54B680106F
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c7e55661e3f91125597c8c7842a1be16129cefe0
ms.sourcegitcommit: b6fe9acffad983c14864b8fe0296f6025cb1f961
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2021
ms.locfileid: "107995471"
---
# <a name="hlsl-shader-model-60"></a>Модель шейдера HLSL 6,0

Описывает встроенные функции для операций Wave, добавленные в модель шейдера HLSL 6,0.

- [Модель шейдера 6,0](#shader-model-60)
- [Терминология](#terminology)
- [Встроенные функции языка заливки](#shading-language-intrinsics)
    - [WAV, запрос](#wave-query)
    - [Звуковой голосование](#wave-vote)
    - [Звуковая трансляция](#wave-broadcast)
    - [Уменьшение волны](#wave-reduction)
    - [Проверка и префикс волны](#wave-scan-and-prefix)
    - [Операции случайного перемещения](#quad-wide-shuffle-operations)
- [Возможности оборудования](#hardware-capability)
- [Связанные темы](#related-topics)

## <a name="shader-model-60"></a>Модель шейдера 6,0

Для более ранних моделей шейдера программирование HLSL предоставляет только один поток выполнения. Предоставляются новые операции на уровне звука, начиная с модели 6,0, чтобы явно использовать преимущества параллелизма текущих графических процессоров. Многие потоки могут выполняться в локкстеп одновременно на одном ядре. Например, встроенные функции модели 6,0 позволяют отключать конструкции барьера, если область синхронизации находится в пределах ширины обработчика SIMD или какой-либо другой набор потоков, которые могут быть атомарными относительно друг друга.

Возможны следующие варианты использования: сжатие потока, сокращение, блокировка блока, битонной преобразования Фурье или быстрая сортировка (ФФТ), группирования, дедупликация потоков и аналогичные сценарии.

Большинство встроенных функций отображаются в шейдерах пикселей и в шейдерах вычислений, хотя существуют некоторые исключения (отмеченные для каждой функции). Функции были добавлены в требования для уровня функций DirectX 12,0 в разделе API уровня 12.

*<type>* Параметр и возвращаемое значение для этих функций подразумевают тип выражения, Поддерживаемые типы — из следующего списка, которые *также* имеются в целевой модели шейдеров для вашего приложения:

- половина, half2, half3, half4
- float, float2, float3, float4
- Double, double2, double3, double4
- int, int2, корпус, INT4
- uint, uint2, uint3, uint4
- Short, short2, short3, short4
- ushort, ushort2, ushort3, ushort4
- UInt64 \_ t, UInt64 \_ T2, UInt64 \_ T3, UInt64 \_ T4

Некоторые операции (например, битовые операторы) поддерживают только целочисленные типы.

## <a name="terminology"></a>Терминология

| **Термин** | **Определение** |
|-|-|
| Lane | Один поток выполнения. Модели шейдеров до версии 6,0 предоставляют только один из них на уровне языка, благодаря чему расширение параллельной обработки SIMD полностью достигает реализации. |
| Wave | Набор дорожек (потоков), которые выполняются одновременно в процессоре. Явные барьеры не требуются, чтобы гарантировать их параллельное выполнение. Аналогичные понятия включают «искривление» и «файл Wavefront». |
| Неактивная полоса | Полоса, которая не выполняется, например из-за потока управления или недостаточная работа для заполнения минимального размера волны. |
| Активная дорожка | Полоса, для которой выполняется выполнение. В шейдерах пикселей это может быть любой вспомогательный точечный желоб. |
| Четырехъядерный | Набор из четырех смежных дорожек, соответствующих пикселям, расположенным в квадрате 2x2. Они используются для оценки градиентов путем дифференцирования по осям x или y. Волна может состоять из нескольких четырех. Все пикселы в активном массиве Quad выполняются (и могут быть "активными желобами"), но те, которые не создают видимые результаты, называются "вспомогательными желобами". |
| Вспомогательная полоса | Полоса, которая выполняется исключительно в целях градиентов в построителейх текстур пикселей. Выходные данные такой полосы будут отброшены, поэтому она не будет отображена на поверхность назначения. |

## <a name="shading-language-intrinsics"></a>Встроенные функции языка заливки

Все операции этой модели шейдера были добавлены в диапазон встроенных функций.

### <a name="wave-query"></a>WAV, запрос

Встроенные функции для запроса одной волны.

| **Intrinsic** | **Описание** | **Построитель текстуры** | **Вычисление шейдера** |
|-|-|-|-|
| [**вавежетланекаунт**](wavegetlanecount.md) | Возвращает число желобов в текущей волны. | \* | \* |
| [**вавежетланеиндекс**](wavegetlaneindex.md) | Возвращает индекс текущей полосы в пределах текущей волны. | \* | \* |
| [**вавеисфирстлане**](waveisfirstlane.md) | Возвращает значение true только для активной полосы в текущей волны с наименьшим индексом | \* | \* |

### <a name="wave-vote"></a>Звуковой голосование

Этот набор встроенных функций сравнивает значения в потоках, активных в текущий момент с текущей волной.

| **Intrinsic** | **Описание** | **Построитель текстуры** | **Вычисление шейдера** |
|-|-|-|-|
| [**вавеактивеанитруе**](waveanytrue.md) | Возвращает значение true, если выражение истинно в любой активной полосе в текущей волной. | \* | \* |
| [**вавеактивеаллтруе**](wavealltrue.md) | Возвращает значение true, если выражение имеет значение true во всех активных желобах в текущем Wave. | \* | \* |
| [**вавеактивебаллот**](waveballot.md) | Возвращает битовую маску 64-разрядного целого числа без знака для вычисления логического выражения для всех активных желобов в указанной волне. | \* | \* |

### <a name="wave-broadcast"></a>Звуковая трансляция

Эти встроенные функции позволяют всем активным дорожкам в текущей волной получить значение из указанной полосы, эффективно транслировать его. Значение, возвращаемое из недопустимой полосы, не определено.

| **Intrinsic** | **Описание** | **Построитель текстуры** | **Вычисление шейдера** |
|-|-|-|-|
| [**вавереадланеат**](wavereadlaneat.md) | Возвращает значение выражения для заданного индекса полосы в заданной волны. | \* | \* |
| [**вавереадланефирст**](wavereadfirstlane.md) | Возвращает значение выражения для активной полосы текущего волна с наименьшим индексом. | \* | \* |

### <a name="wave-reduction"></a>Уменьшение волны

Эти встроенные функции вычисляют указанную операцию во всех активных желобах в волне и передают окончательный результат во все активные дорожки. Поэтому окончательный результат будет гарантированно одинаковым в волне.

| **Intrinsic** | **Описание** | **Построитель текстуры** | **Вычисление шейдера** |
|-|-|-|-|
| [**вавеактивеаллекуал**](waveactiveallequal.md) | Возвращает значение true, если выражение одинаково для каждой активной полосы в текущем звуковом поле (и, таким образом, единообразно в нем). | \* | \* |
| [**вавеактивебитанд**](waveallbitand.md) | Возвращает побитовое и для всех значений выражения для всех активных желобов в текущей волновой области и реплицирует результат во все желобы в волне. | \* | \* |
| [**вавеактивебитор**](waveallbitor.md) | Возвращает побитовое или для всех значений выражения по всем активным желобам в текущей волновой области и реплицирует результат во все желобы в волне. | \* | \* |
| [**вавеактивебитксор**](waveallbitxor.md) | Возвращает побитовое исключающее или для всех значений выражения во всех активных желобах в текущей волновой области и реплицирует результат во все желобы в волне. | \* | \* |
| [**вавеактивекаунтбитс**](waveactivecountbits.md) | Подсчитывает количество логических переменных, которые имеют значение true во всех активных желобах в текущей волновой области, и реплицирует результат во все желобы в волне. | \* | \* |
| [**вавеактивемакс**](waveallmax.md) | Вычисление максимального значения выражения для всех активных желобов в текущей волновой области и репликация результатов во все желобы в волне. | \* | \* |
| [**вавеактивемин**](waveallmin.md) | Вычисление минимального значения выражения для всех активных желобов в текущей волновой области и репликация результата во все желобы в волне. | \* | \* |
| [**вавеактивепродукт**](waveallproduct.md) | Умножает значения выражения на все активные желобы в текущей волне и реплицирует результат во все желобы в волне. | \* | \* |
| [**вавеактивесум**](waveallsum.md) | Суммирует значение выражения по всем активным желобам в текущей волновой волны и реплицирует его во все желобы в текущей волне и реплицирует результат во все желобы в волне. | \* | \* |

### <a name="wave-scan-and-prefix"></a>Проверка и префикс волны

Эти встроенные функции применяют операцию к каждой полосе и оставляют частичный результат вычислений в соответствующей полосе.

| **Intrinsic** | **Описание** | **Построитель текстуры** | **Вычисление шейдера** |
|-|-|-|-|
| [**вавепрефикскаунтбитс**](waveprefixcountbytes.md) | Возвращает сумму всех заданных переменных типа Boolean, для которых задано значение true для всех активных дорожек с индексами, меньшими, чем текущая полоса. | \* | \* |
| [**вавепрефикссум**](waveprefixsum.md) | Возвращает сумму всех значений в активном желобе с меньшими индексами по сравнению с этим значением. | \* | \* |
| [**вавепрефикспродукт**](waveprefixproduct.md) | Возвращает произведение всех значений в желобах до того, как оно заданной волны. | \* | \* |

### <a name="quad-wide-shuffle-operations"></a>Операции случайного перемещения

Эти встроенные функции выполняют операции переключения по значениям в волне, известном, что в нем содержатся четыре построителей текстуры, как определено здесь. Индексы пикселов в четырех массивах определяются в строке просмотра или в порядке чтения, где приводятся координаты в четырех источниках:

+---------> X 

| [0] [1] 

| [2] [3] 

v 

Да 


Эти подпрограммы работают либо в шейдере вычислений, либо в шейдерах пикселей. В выходящих шейдерах вычислений они работают в четырех массивах, определенных как равномерно разделенные группы из 4 в SIMD Wave. В шейдерах пикселей они должны использоваться в волнах, захваченных Вавекуадланес, в противном случае результаты не будут определены.

| **Intrinsic** | **Описание** | **Построитель текстуры** | **Вычисление шейдера** |
|-|-|-|-|
| [**куадреадланеат**](quadreadlaneat.md) | Возвращает указанное исходное значение, считанное из полосы текущего числа Quad, идентифицируемой Куадланеид \[ 0.. 3 \] , которая должна быть единообразной по отношению к четырем. | \* | |
| [**куадреадакроссдиагонал**](quadreadacrossdiagonal.md) | Возвращает заданное локальное значение, которое считывается с диагонального противоположного полосы в данном Quad. | \* | |
| [**куадреадакросскс**](quadswapx.md) | Возвращает указанное исходное значение, считанное из другой полосы в данном Quad по оси X. | \* | |
| [**куадреадакросси**](quadswapy.md) | Возвращает указанное исходное значение, считанное из другой полосы в данном Quad по оси Y. | \* | |

## <a name="hardware-capability"></a>Возможности оборудования

Чтобы убедиться, что функции волнового действия доступны на любом конкретном оборудовании, вызовите [**ID3D12Device:: чеккфеатуресуппорт**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-checkfeaturesupport), указывая описание и использование [**\_ функции D3D12 \_ Data \_ D3D12 \_ OPTIONS1**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_d3d12_options1) Structure.

## <a name="related-topics"></a>Связанные темы

* [Руководство по программированию для HLSL](dx-graphics-hlsl-pguide.md)
* [Встроенные функции Shader модели 6](shader-model-6-0.md)
