---
title: тексбем-PS
description: Примените фиктивное преобразование «среда выпуклости». Это достигается путем изменения данных адреса текстуры в регистре назначения с использованием данных адреса пертурбатион (du, DV) и матрицы среды 2D-выпуклости.
ms.assetid: 8e773f4a-c7a2-4caf-973f-8f50dccc9c04
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- apiref
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: f026819b268836fd7d4c1d550033ceefdf0bbbf9
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104984008"
---
# <a name="texbem---ps"></a>тексбем-PS

Примените фиктивное преобразование «среда выпуклости». Это достигается путем изменения данных адреса текстуры в регистре назначения с использованием данных адреса пертурбатион (du, DV) и матрицы среды 2D-выпуклости.

## <a name="syntax"></a>Синтаксис



| тексбем DST, src |
|-----------------|



 

где

-   DST — это регистр назначения.
-   src является исходным регистром.

## <a name="remarks"></a>Примечания



| Версии шейдеров пикселей | 1\_1 | 1\_2 | 1 \_ 3 | 1\_4 | 2 \_ 0 | 2 \_ x | 2 \_ SW | 3 \_ 0 | 3 \_ SW |
|-----------------------|------|------|------|------|------|------|-------|------|-------|
| тексбем                | x    | x    | x    |      |      |      |       |      |       |



 

Красный и зеленый цветовые данные в регистре src интерпретируется как данные пертурбатион (du, DV).

Эта инструкция преобразует красные и зеленые компоненты в исходном регистре с помощью матрицы сопоставления среды 2D-выпуклости. Результат добавляется в набор координат текстуры, соответствующий номеру регистра назначения, и используется для выборки текущей стадии текстуры.

Эта операция всегда интерпретирует du и DV как количество со знаком. Для версий 1 \_ 0 и 1 \_ 1 в входном аргументе не разрешается использовать модификатор input для [масштабирования со знаком "Source Register](dx9-graphics-reference-asm-ps-registers-modifiers-signed-scale.md) " ( \_ bx2).

Эта инструкция формирует определенные результаты, когда текстуры ввода содержат подписанные данные формата. Данные в смешанном формате работают только в том случае, если первые два канала содержат подписанные данные. Дополнительные сведения о форматах поверхностей см. в разделе [D3DFORMAT](/windows/desktop/direct3d9/d3dformat).

Это можно использовать для различных методов, основанных на адресах пертурбатион, включая имитацию сопоставления среды на пиксель и рассеянное освещение (отображение выпуклости).

При использовании этой инструкции регистры текстур должны следовать следующей последовательности.


```
// The texture assigned to stage t(n) contains the (du,dv) data
// The texture assigned to stage t(m) is sampled
tex     t(n)                    
texbem  t(m),  t(n)      where m > n
```



Ниже показаны вычисления, выполненные в инструкции.


```
// 1. New values for texture addresses (u',v') are calculated
// 2. Sample the texture using (u',v')
```



u "= TextureCoordinates (этап m)<sub>u</sub> + D3DTSS \_ BUMPENVMAT00 (этап m) \* t (n)<sub>R</sub> + D3DTSS \_ BUMPENVMAT10 (этап m) \* t (n)<sub>G</sub> v ' = TextureCoordinates (этап m)<sub>v</sub> + D3DTSS \_ BUMPENVMAT01 (этап m) \* t (n)<sub>R</sub> + D3DTSS \_ BUMPENVMAT11 (этап m) t ( \* n)<sub>G</sub> t (m)<sub>RGBA</sub> = текстуресампле (этап m)

использование (u ", v") в качестве координат

Данные регистрации, считанные инструкцией тексбем-PS или [тексбемл-PS](texbeml---ps.md) , не могут быть считаны позже, за исключением других тексбем-PS или тексбемл-PS.


```
// This example demonstrates the validation error caused by t0 being reread:
ps_1_1
tex t0
texbem t1, t0
add r0, t1, t0

(Instruction Error) (Statement 4) Register data that has been read by 
texbem or texbeml instruction cannot be read by other instructions
```



## <a name="examples"></a>Примеры

Ниже приведен пример шейдера с идентифицированными картами текстур и идентифицированными стадиями текстуры.


```
ps_1_1
tex t0              ; Define t0 to get a 2-tuple DuDv
texbem t1, t0       ; Compute (u',v')
                    ; Sample t1 using (u',v')
mov r0, t1          ; Output result
```



для тексбем требуются следующие текстуры на следующих стадиях текстуры.

-   Этапу 0 назначается схема выпуклости с данными (du, DV) пертурбатион.
-   Этап 1 использует текстурную карту с данными цвета.
-   Эта инструкция задает данные матрицы на стадии текстуры, которая является выборкой.
-   Это отличается от функций конвейера с фиксированной функцией, где данные пертурбатион и матрицы занимают одну и ту же стадию текстуры.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Инструкции шейдера пикселей](dx9-graphics-reference-asm-ps-instructions.md)
</dt> </dl>

 

 