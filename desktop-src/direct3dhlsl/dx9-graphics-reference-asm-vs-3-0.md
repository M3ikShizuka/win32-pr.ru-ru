---
title: vs_3_0
description: Сведения о vs_3_0, программируемом шейдере вершин, который состоит из набора инструкций, которые работают с данными вершин.
ms.assetid: 0f40f946-3525-4203-bfe2-1cd941d8e2ec
ms.topic: article
ms.date: 05/31/2018
topic_type:
- kbArticle
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: fd10f6d726118679f395f01714233c7096fd5189
ms.sourcegitcommit: 9b5faa61c38b2d0c432b7f2dbee8c127b0e28a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2021
ms.locfileid: "122476420"
---
# <a name="vs_3_0"></a>VS \_ 3 \_ 0

Программируемый шейдер вершин состоит из набора инструкций, которые работают с данными вершин. Регистрирует перенос данных в ALU и из него. Можно применить дополнительный элемент управления для изменения инструкции, результатов или данных, которые будут записаны.

Версия шейдера вершин VS \_ 3 \_ 0 расширяет набор функций, поддерживаемый VS \_ 2 \_ x. Каждая из функций в VS \_ 2 \_ X, для которой требуется установить ограничение, доступна в VS \_ 3 \_ 0 без обязательного ограничения.

-   [Инструкции. VS \_ 3 \_ 0](dx9-graphics-reference-asm-vs-instructions-vs-3-0.md) содержит список доступных инструкций.
-   [Регистры-VS \_ 3 \_ 0](dx9-graphics-reference-asm-vs-registers-vs-3-0.md) содержит список различных типов регистров, используемых вершиной шейдера ALU.
-   [Модификаторы регистра вершинного шейдера](dx9-graphics-reference-asm-vs-registers-modifiers.md) используются для изменения способа работы инструкции.
-   [Модификаторы исходного регистра вершинного шейдера](dx9-graphics-reference-asm-vs-registers-modifiers-source.md) изменяют данные исходной регистрации перед выполнением инструкции.
-   [Исходный регистр группирующие](dx9-graphics-reference-asm-vs-registers-modifiers-source-swizzling.md) обеспечивает дополнительный контроль над тем, какие компоненты регистрации считываются, копируются или записываются.
-   [Маскирование регистров назначения](dx9-graphics-reference-asm-vs-registers-modifiers-masking.md) определяет, какие компоненты записываются в реестре назначения.

## <a name="new-features"></a>Новые возможности

В следующих разделах перечислены новые функции версии шейдера вершин и \_ 3 \_ 0.

### <a name="indexing-registers"></a>Регистры индексации

В более ранних моделях шейдеров можно было индексировать только банк регистров констант. В этой модели можно индексировать следующие банки регистров, используя регистр счетчиков циклов (aL):

-   Входной регистр (v \# )
-   Выходной регистр (o \# )

### <a name="vertex-textures"></a>Текстуры вершин

Эта модель шейдера поддерживает поиск текстур в шейдере вершин с помощью текслдл. Ядро вершин имеет четыре этапа образца текстуры (отличающиеся от образца карт смещения и выборки текстур в подсистеме пикселей), которые можно использовать, чтобы выбрать текстуры на этих этапах. См. сведения о [текстурах вершин в VS \_ 3 \_ 0 (DirectX HLSL)](/windows/desktop/direct3d9/vertex-textures-in-vs-3-0).

### <a name="vertex-stream-frequency"></a>Частота потока вершин

Эта функция позволяет инициализировать подмножество входных регистров со скоростью, отличной от одной для каждой вершины. См. раздел [Рисование неиндексированной геометрии](/windows/desktop/direct3d9/efficiently-drawing-multiple-instances-of-geometry).

### <a name="shader-output"></a>Выходные данные шейдера

Как и в VS \_ 2 \_ 0, выходные данные шейдера могут зависеть от статического управления потоком. Будьте внимательны при динамической ветвлении, так как это может привести к тому, что выходные данные шейдера будут зависеть от каждой вершины. Это приведет к непредсказуемым результатам на другом оборудовании.

### <a name="dynamic-flow-control"></a>Динамическое управление потоком

Поддерживаются все инструкции динамического управления потоком. Максимально допустимое значение глубины вложения — 24. (дополнительные сведения см. в разделе [Flow ограничения вложенности элемента управления](dx9-graphics-reference-asm-vs-instructions-flow-control.md) .)

### <a name="temporary-registers"></a>Временные регистры

Поддерживается всего 32 временных регистров (r \# ).

### <a name="static-flow-control"></a>статический элемент управления Flow

Максимальная глубина вложенности для представителя [цикла](loop---vs.md)-VS / [-VS](rep---vs.md) равна 4. Максимальная глубина вложенности для [Call-VS](call---vs.md) / [каллнз bool-](callnz-bool---vs.md)VS / [каллнз пред-VS](callnz-pred---vs.md) равно 4. [Если для bool-VS](if-bool---vs.md), максимально допустимое значение глубины вложения равно 24. (дополнительные сведения см. в разделе [Flow ограничения вложенности элемента управления](dx9-graphics-reference-asm-vs-instructions-flow-control.md) .)

### <a name="predication"></a>Предикация

Инструкция затенения поддерживается. Для задания регистра предикатов используйте [сетп \_ comp-VS](setp-comp---vs.md) .

### <a name="instruction-count"></a>Число инструкций

Каждый шейдер вершин может находиться в любом месте от 512 до количества слотов в MaxVertexShader30InstructionSlots в [**D3DCAPS9**](/windows/desktop/api/d3d9caps/ns-d3d9caps-d3dcaps9). Количество выполняемых инструкций может быть намного выше из-за поддержки цикла или представителя; Однако это ограничивается Максвшадеринструктионсексекутед в D3DCAPS9, который должен быть не менее 0xFFFF.

### <a name="device-caps"></a>Ограничения устройств

Если шейдер вершин 3 \_ 0 поддерживается, в оборудовании поддерживаются следующие ограничения (как минимум):




| Колпачок | Функция | 
|-----|------------|
| Заглушки шейдеров | <ul><li>Динамикфловконтролдепс — 24</li><li>Нумтемпс — 32</li><li>Статикфловконтролдепс — 4</li><li>Затенения поддерживается.</li></ul> | 
| Гуардбандлефт, Гуардбандтоп, Гуардбандригхт, Гуардбандботтом | 8 КБ | 
| вертексшадерверсион | 3_0 | 
| максвертексшадерконст | 256 | 
| MaxVertexShader30InstructionSlots | 512 | 
| Поддержка тумана | D3DPRASTERCAPS_FOGVERTEX | 
| вертекстекстурефилтеркапс | <ul><li><a href="/windows/desktop/direct3d9/d3dptfiltercaps">D3DPTFILTERCAPS_MINFPOINT</a></li><li><a href="/windows/desktop/direct3d9/d3dptfiltercaps">D3DPTFILTERCAPS_MAGFPOINT</a></li></ul> | 
| <a href="/windows/desktop/direct3d9/d3ddevcaps2">D3DDEVCAPS2_VERTEXELEMENTSCANSHARESTREAMOFFSET</a> | Элементы вершины в объявлении вершины могут совместно использовать одно и то же смещение потока. | 
| Форматы вершин | <ul><li>D3DDECLTYPE_UBYTE4</li><li>D3DDECLTYPE_UBYTE4N</li><li>D3DDECLTYPE_SHORT2N</li><li>D3DDECLTYPE_SHORT4N</li><li>D3DDECLTYPE_FLOAT16_2</li><li>D3DDECLTYPE_FLOAT16_4</li></ul> | 




 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Шейдеры вершин](dx9-graphics-reference-asm-vs.md)
</dt> </dl>

 

 
