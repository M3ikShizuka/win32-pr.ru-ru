---
title: Синхронизация (SM5-ASM)
description: Синхронизация группы потоков или барьер памяти.
ms.assetid: DCA637FE-8F5C-41D0-8B5E-F913463BA387
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: c5c64532669fc94d7d2109c39e501af0825e56434f66b79e20e1641c787a1a58
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119852864"
---
# <a name="sync-sm5---asm"></a>Синхронизация (SM5-ASM)

Синхронизация группы потоков или барьер памяти.



| \[ \_ углобал синхронизации \|\_уграуп \] \[ \_ g \] \[ \_ t\] |
|-------------------------------------------|



 

## <a name="remarks"></a>Remarks

**Sync** содержит параметры \_ углобал, \_ уграуп, \_ g и \_ t.

В шейдере пикселей допускается только **\_ углобал синхронизации** .

В шейдере COMPUTE \_ необходимо указать (углобал или \_ уграуп \* ) и/или \_ g. \_t является необязательным дополнением.

### <a name="_uglobal"></a>\_углобал

Глобальная \# граница памяти u (UAV).

Все предыдущие \# операции чтения и записи в памяти, выполняемые этим потоком в порядке программ, становятся видимыми для всех потоков во всем GPU до последующего \# обращения к памяти u в этом потоке. Вся часть графического процессора в определении заменяется областью "менее чем глобальная" в одном случае, как описано ниже.

Это относится ко всей UAV памяти, привязанной к текущему этапу шейдера.

\_углобал доступен в шейдере вычислений и шейдере пикселей.

Для всех привязанных UAV, которые не были объявлены шейдером как глобально согласованными, \_ граница углобал u \# Memory имеет видимость только в текущей группе потоков шейдера вычислений для этого UAV, как если бы это \_ уграуп, а не \_ углобал. Эта проблема относится только к выпуску COMPUTE Shader, так как шейдер пикселей должен объявлять все Уавс как глобально согласованные.

### <a name="_ugroup"></a>\_уграуп

Ограждение области группы потоков u \# (UAV).

Все предыдущие \# операции чтения или записи в памяти, выполняемые этим потоком в порядке программ, становятся видимыми для всех потоков в группе потоков до последующего \# обращения к памяти u в этом потоке.

Это относится ко всей UAV памяти, привязанной к текущему этапу шейдера.

\_уграуп доступен только в шейдере COMPUTE.

\_Значение, если уграуп предоставляется для некоторых реализаций. Преимуществом указания \_ уграуп вместо \_ углобал является то, что операция **синхронизации** может быть выполнена быстрее.

Другие реализации не отличают \_ уграуп от \_ углобал, поэтому обе операции эквивалентны и ведут себя как \_ углобал. Приложения могут указать их намерение, запрашивая наиболее узкую область **синхронизации** .

Даже если конкретная UAV объявлена как глобально согласованная, \_ операция **синхронизации** уграуп будет работать более эффективно на этом UAV, если глобальное препятствие не требуется.

### <a name="_g"></a>\_модуле

\#граница g (общая память группы потоков).

Все предыдущие операции \# чтения или записи в памяти для этого потока в порядке программы становятся видимыми для всех потоков в группе потоков до последующего \# доступа к памяти в этом потоке.

Это относится ко всей общей памяти группы текущего потока \# .

\_g доступен только в шейдере COMPUTE.

### <a name="_t"></a>\_t

Синхронизация группы потоков. Все потоки в одной группе потоков (которые могут совместно использовать общий набор общих пространств реестра) будут выполняться до того места, где они достигают этой инструкции до того, как любой поток сможет продолжить работу.

\_t не может размещаться в динамическом элементе управления потоком (ветви, которые могут изменяться в группе потоков), но могут присутствовать в едином потоке управления, где все потоки в группе выбирают один и тот же путь.

\_t доступен только в шейдере COMPUTE.

Ниже приведен список вариантов «Sync» вычислений COMPUTE Shader.

-   Синхронизация \_ g
-   \_уграуп синхронизации\*
-   \_углобал синхронизации
-   Синхронизация \_ g \_ t
-   \_уграуп синхронизации \_ t\*
-   \_углобал синхронизации \_ t
-   Синхронизация \_ уграуп \_ g\*
-   Синхронизация \_ углобал \_ g
-   Синхронизация \_ уграуп \_ g \_ t\*
-   Синхронизация \_ углобал \_ g \_ t

\*У вариантов с \_ уграуп может не быть цели КОМПИЛЯТОРА HLSL, в предыдущем обсуждении в \_ разделе уграуп выше.

Список вариантов синхронизации пиксельного шейдера включает \_ только углобал синхронизации.

Границы памяти предотвращают Переупорядочение инструкций по компиляторам или оборудованию в ограждении.

Несколько операций чтения из одного адреса с помощью вызова шейдера, которые не разделены барьерами памяти или записи в адрес, можно свернуть вместе. Это относится и к операциям записи. Доступ, разделенный барьером, не может быть объединен или перемещен в пределах барьера.

Границы памяти не являются обязательными для атомарных операций с определенным адресом различными потоками для правильной работы. Ограждения необходимы, когда операции Atomic и/или Load/Store должны быть синхронизированы друг с другом, так как они появляются в отдельных потоках с точки зрения других потоков.

В построителе пиксельных шейдеров инструкции по [удалению](discard--sm4---asm-.md) подразумевают \_ углобал границу синхронизации. в этом случае нельзя изменить порядок этих инструкций в случае **отмены**. Синхронизация \_ углобал в вспомогательных точках (которые выполняются только для поддержки производных) или отклоненных пикселов может и не влиять. Не разрешается использовать вспомогательные или Отклоненные Пиксели для записи в Уавс, если в случае отмены записи выдаются после удаления. Возвращаемые значения из Уавс не могут участвовать в производных вычислениях. Поэтому независимо от того, \_ учитывается ли синхронизация u для вспомогательных точек или когда она выдается после удаления, затеи.

\_инструкция CS 4 \_ 0 и CS \_ 4 \_ 1 поддерживают эту инструкцию.

Эта инструкция применяется к следующим этапам шейдера:



| Вершина | Поверхности | Домен | Геометрия | Пиксель | Вычисления |
|--------|------|--------|----------|-------|---------|
|        |      |        |          | X     | X       |



 

Так как Уавс доступны на всех стадиях шейдера для Direct3D 11,1, вариант **Sync \_ углобал** этой инструкции применяется ко всем этапам шейдера для среды выполнения Direct3D 11,1, которая доступна начиная с Windows 8.



| Вершина | Поверхности | Домен | Геометрия | Пиксель | Вычисления |
|--------|------|--------|----------|-------|---------|
| X      | X    | X      | X        | X     | X       |



 

## <a name="minimum-shader-model"></a>Минимальная модель шейдера

Эта инструкция поддерживается в следующих моделях шейдеров:



| Модель шейдера                                              | Поддерживается |
|-----------------------------------------------------------|-----------|
| [Модель шейдера 5](d3d11-graphics-reference-sm5.md)        | Да       |
| [Модель шейдера 4,1](dx-graphics-hlsl-sm4.md)              | Нет        |
| [Модель шейдера 4](dx-graphics-hlsl-sm4.md)                | Нет        |
| [Модель шейдера 3 (DirectX HLSL)](dx-graphics-hlsl-sm3.md) | Нет        |
| [Модель шейдера 2 (DirectX HLSL)](dx-graphics-hlsl-sm2.md) | Нет        |
| [Модель шейдера 1 (DirectX HLSL)](dx-graphics-hlsl-sm1.md) | Нет        |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Сборка Shader Model 5 (DirectX HLSL)](shader-model-5-assembly--directx-hlsl-.md)
</dt> </dl>

 

 




