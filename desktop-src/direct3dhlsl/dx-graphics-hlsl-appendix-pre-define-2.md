---
title: '\#Директива define (макрос)'
description: Директива препроцессора, которая создает макрос, подобный функции.
ms.assetid: 73c19cf8-fbc5-444b-a51f-dc9f881f397b
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- apiref
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: a8de5a47fc92c02e9f565c80f600359e8e5b32f9
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/23/2019
ms.locfileid: "104997006"
---
# <a name="define-directive-macro"></a>\#Директива define (макрос)

Директива препроцессора, которая создает макрос, подобный функции.



| \#определение *идентификатора*( *argument0*,..., *аргументн-1* ) *Строка токена* |
|--------------------------------------------------------------------------|



 

## <a name="parameters"></a>Параметры



| Элемент                                                                                                                                                                                                                                                          | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="identifier"></span><span id="IDENTIFIER"></span>*Идентификатор*<br/>                                                                                                                                                                             | Идентификатор макроса. <br/> Второе [ \# Определение](dx-graphics-hlsl-appendix-pre-define.md) для макроса с идентификатором, который уже существует в текущем контексте, вызывает ошибку, если вторая последовательность токенов не совпадает с первой. <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="___________argument0___...___argumentN-1_________"></span><span id="___________argument0___...___argumentn-1_________"></span><span id="___________ARGUMENT0___...___ARGUMENTN-1_________"></span> ( *argument0*,..., *аргументн-1* ) <br/> | Список аргументов макроса. Список аргументов с разделителями-запятыми, может иметь любую длину и должен быть заключен в круглые скобки. Каждое имя аргумента в списке должно быть уникальным. Ни один пробел не может разделять параметр *идентификатора* и открывающую круглую скобку. <br/> Использование сцепления строк поместите обратную косую черту ( \) непосредственно перед символом новой строки, чтобы разделить длинные директивы на несколько исходных строк. <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="token-string__optional________"></span><span id="TOKEN-STRING__OPTIONAL________"></span>*строка* \[ токена используемых\] <br/>                                                                                                                     | Значение макроса. Этот параметр состоит из ряда токенов, таких как ключевые слова, константы или полные инструкции. Один или несколько пробельных символов должны отделять этот параметр от параметра *идентификатора* . Этот пробел не считается частью подставляемого текста и не является пробелом после последнего маркера текста. Используйте круглые скобки, чтобы убедиться, что сложные аргументы правильно интерпретированы. <br/> Если значение параметра *идентификатора* встречается в параметре *строки токена* (даже в результате другого расширения макроса), оно не разворачивается. <br/> Если вы исключите этот параметр, все экземпляры параметра *идентификатора* удаляются из исходного файла. Идентификатор остается определенным и может быть проверен с помощью директив [ \# If](dx-graphics-hlsl-appendix-pre-ifdef.md), \# ifdef и \# ifndef. <br/> |



 

## <a name="remarks"></a>Примечания

Все экземпляры параметра *идентификатора* , происходящие после директивы [ \# define](dx-graphics-hlsl-appendix-pre-define.md) в исходном файле, составляют вызов макроса, а идентификатор будет заменен версией параметра *строки токена* , которая содержит фактические аргументы, заменяющие формальные параметры. Число параметров в вызове должно соответствовать числу параметров в определении макроса. Идентификатор заменяется только в том случае, если он формирует токен. Например, идентификатор не заменяется, если он присутствует в комментарии, в строке или в составе более длинного идентификатора.

Директива [ \# undef](dx-graphics-hlsl-appendix-pre-undef.md) указывает препроцессору на необходимость запоминать определение идентификатора; дополнительные сведения см. в разделе \# директива undef (DirectX HLSL).

Определение констант с помощью параметра компилятора/D действует так же, как и директива [ \# define](dx-graphics-hlsl-appendix-pre-define.md) в начале файла. С параметром/D можно определить до 30 макросов.

Фактические аргументы в вызове макроса сопоставляются с соответствующими формальными аргументами в определении макроса. Каждый формальный аргумент в строке токена заменяется соответствующим фактическим аргументом, если только аргумент не предшествует \# оператору строковый (), преобразования ( \# @) или Token-вставляя ( \# \# ), или за ним следует \# \# оператор. Перед заменой директивой формального параметра все макросы в фактическом аргументе разворачиваются.

Маркер, вставленный в компилятор HLSL, немного отличается от токена, вставленного в компиляторе C, в том, что вставленные маркеры должны быть действительными самими маркерами. Например, рассмотрим следующее определение макроса:


```
#define MERGE(a, b) a##b
MERGE(float, 4x4) test;
```



В компиляторе C происходит следующее:


```
float4x4 test
```



Однако в компиляторе HLSL это приводит к следующим результатам:


```
float4 x4 test
```



Это поведение можно обойти, используя следующее определение макроса.


```
MERGE(MERGE(float, 4), x4) test;
```



## <a name="examples"></a>Примеры

В следующем примере для определения линий курсора используется макрос.


```
#define CURSOR(top, bottom) (((top) << 8) | (bottom))
```



В следующем примере определяется макрос, который получает целое число псевдослучайное в указанном диапазоне.


```
#define getrandom(min, max) \
((rand()%(int)(((max) + 1)-(min)))+ (min))
```



## <a name="related-topics"></a>См. также

<dl> <dt>

[Директивы препроцессора (DirectX HLSL)](dx-graphics-hlsl-appendix-preprocessor.md)
</dt> <dt>

[\#определить перегрузки](dx-graphics-hlsl-appendix-pre-define.md)
</dt> <dt>

[\#Директива undef (DirectX HLSL)](dx-graphics-hlsl-appendix-pre-undef.md)
</dt> </dl>

 

 





