---
title: Индексирование нескольких выходных потоков
description: В Shader Model 5 шейдер Geometry может поддерживать до четырех отдельных потоков. Это означает, что один шейдер может выводить данные между одним и четырьмя выходными потоками в зависимости от числа объявленных потоков.
ms.assetid: 2ddde992-6746-4033-9190-bde7d7b14add
ms.topic: article
ms.date: 05/31/2018
topic_type:
- kbArticle
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: f8564917be9565e862043e370840f8ac7280f174
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104067447"
---
# <a name="how-to-index-multiple-output-streams"></a>Как индексировать несколько выходных потоков

В Shader Model 5 шейдер Geometry может поддерживать до четырех отдельных потоков. Это означает, что один шейдер может выводить данные между одним и четырьмя выходными потоками в зависимости от числа объявленных потоков.

Индексирование нескольких выходных потоков

1.  Определите поток данных, используя тип шаблона потока.

    ```
        inout PointStream<OutVertex1> myStream1, 
    ```

    

2.  Определите второй поток данных, используя тип шаблона потока.

    ```
        inout PointStream<OutVertex2> myStream2 )
    ```

    

3.  Вывод данных в потоки (или оба) с помощью встроенных функций объекта потокового вывода (например, Append или Рестартстрип).

    ```
    void MyGS( 
        InVertex verts[2], 
        inout PointStream<OutVertex1> myStream1, 
        inout PointStream<OutVertex2> myStream2 )
    {
        OutVertex1 myVert1 = TransformVertex1( verts[0] );
        OutVertex2 myVert2 = TransformVertex2( verts[1] );
        myStream1.Append( myVert1 );
        myStream2.Append( myVert2 );
    }
    ```

    

При использовании одного выходного потока можно создавать ленты треугольников, полосковые линии или списки точек. При хранении полос треугольника и линии в буфере потокового выхода они развертываются в соответствии со списками треугольников и строк соответственно. Можно также растрировать один поток, не отправляйте его в буфер памяти.

При использовании нескольких выходных потоков все потоки должны содержать точки, а в средство программной прорисовки можно отправить до одного выходного потока. Чаще всего приложение не будет выполнять растрирование потока.

После потоковой передачи данных в буфер можно использовать эти данные для отображения любого примитивного типа, а не только типа-примитива, который использовался для заполнения буфера.

Общее число выходных данных шейдера Geometry ограничено до 1024 скаляров. Если существует несколько потоков, число скаляров вычисляется из самого большого типа потока, умноженного на максимальное число вершин.



<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Отличия модели шейдеров 4 от модели шейдеров 5:<br/> Модель шейдера 4:<br/>
<ul>
<li>Максимальное число скаляров для выходного потока — 64.</li>
<li>Маска регистра для каждого компонента должна соответствовать диапазону индекса.</li>
</ul>
Модель шейдера 5:<br/>
<ul>
<li>Максимальное число скаляров для выходного потока — 128.</li>
<li>Маску регистра для каждого компонента не нужно сопоставлять по диапазону индекса.</li>
<li>Динамическое индексирование выходов должно быть допустимым во всех потоках.</li>
<li>Режимам интерполяции не требуется сопоставлять для потоков.</li>
</ul></td>
</tr>
</tbody>
</table>



 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Функции шейдера Geometry](overviews-direct3d-11-hlsl-gs-features.md)
</dt> </dl>

 

 





