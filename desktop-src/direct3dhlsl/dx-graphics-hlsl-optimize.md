---
title: Оптимизация шейдеров HLSL
description: В этом разделе описываются стратегии общего назначения, которые можно использовать для оптимизации шейдеров. Эти стратегии можно применять к шейдерам, написанным на любом языке, на любой платформе.
ms.assetid: 014b9cb3-a489-48d7-8174-b97de168bf3a
keywords:
- язык шейдера высокого уровня
- HLSL, производительность
ms.topic: article
ms.date: 05/31/2018
topic_type:
- kbArticle
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: 06d3bb806e98e489020aa1755ef2a6c952459d86
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104068362"
---
# <a name="optimizing-hlsl-shaders"></a>Оптимизация шейдеров HLSL

В этом разделе описываются стратегии общего назначения, которые можно использовать для оптимизации шейдеров. Эти стратегии можно применять к шейдерам, написанным на любом языке, на любой платформе.

-   [Узнайте, где выполнять вычисления шейдера](#know-where-to-perform-shader-calculations)
-   [Пропустить ненужные инструкции](#skip-unnecessary-instructions)
-   [Переменные Pack и Интерполантс](#pack-variables-and-interpolants)
-   [Уменьшение сложности шейдера](#reduce-shader-complexity)
-   [См. также](#related-topics)
-   [См. также](#related-topics)

## <a name="know-where-to-perform-shader-calculations"></a>Узнайте, где выполнять вычисления шейдера

Шейдеры вершин выполняют операции, которые включают выборку вершин и выполнение преобразования матрицы в данные вершин. Как правило, шейдеры вершин выполняются один раз для каждой вершины.

Шейдеры пикселей выполняют операции, которые включают выборку данных текстуры и выполнение вычислений освещения. Как правило, шейдеры пикселей выполняются один раз на пиксель для определенного фрагмента геометрии.

Обычно в пикселях нумеруются вершины в сцене, поэтому шейдеры пикселей выполняются чаще, чем шейдеры вершин.

При проектировании алгоритмов шейдера необходимо учитывать следующее.

-   По возможности выполняйте вычисления в шейдере вершин. Вычисление, выполняемое на шейдере пикселей, гораздо дороже, чем вычисление, выполняемое на шейдере вершин.
-   Используйте вычисления для каждой вершины, чтобы повысить производительность в таких ситуациях, как сжатые сети. Для плотных сеток вычисления по вершинам могут формировать результаты, визуально не отличающиеся от результатов, полученных при вычислениях на основе точек.

## <a name="skip-unnecessary-instructions"></a>Пропустить ненужные инструкции

В HLSL Динамическое ветвление позволяет ограничить количество выполняемых инструкций. Таким образом, Динамическое ветвление помогает ускорить выполнение шейдера. Если геометрия или Пиксели не отображаются, используйте динамическое ветвление для выхода из шейдера или для ограничения инструкций. Например, если пиксел не горит, то нет никакой точки в исполнении алгоритма освещения.

В следующей таблице перечислены случаи, когда можно проверить условия в шейдере и использовать динамическое ветвление для пропуска ненужных инструкций. Таблица не является исчерпывающей. Вместо этого он предназначен для предоставления идей по оптимизации кода.



| Проверяемое условие                                    | Ответ в шейдере       |
|-------------------------------------------------------|------------------------------|
| Проверка альфа-канала определяет, что пиксель не будет отображаться. | Пропустите оставшуюся часть шейдера. |
| Пиксель или геометрия полностью фогжед.                | Пропустите оставшуюся часть шейдера. |
| Вес обложки равен нулю.                                | Пропустите кости.                  |
| Ослабление яркости равно нулю.                            | Пропустить освещение.               |
| Неположительный Ламбертиан термин.                         | Пропустить освещение.               |



 

## <a name="pack-variables-and-interpolants"></a>Переменные Pack и Интерполантс

Учитывать пространство, необходимое для данных шейдера. Упаковать как можно больше информации в переменную или интерполант. Иногда сведения из двух переменных можно упаковывать в область памяти одной переменной.

## <a name="reduce-shader-complexity"></a>Уменьшение сложности шейдера

Старайтесь не усложнять шейдеры. Как правило, шейдеры с меньшим количеством инструкций выполняются быстрее, чем шейдеры с дополнительными инструкциями. Также проще выполнять отладку и оптимизацию небольших, менее сложных шейдеров.

## <a name="related-topics"></a>См. также

[Руководство по программированию для HLSL](dx-graphics-hlsl-pguide.md)


## <a name="related-topics"></a>См. также

<dl> <dt>

[Руководство по программированию для HLSL](dx-graphics-hlsl-pguide.md)
</dt> </dl>

 

 




