---
title: Регистры ps_1_1__ps_1_2__ps_1_3__ps_1_4
description: Построители текстур пикселей зависят от регистров для получения данных вершин, вывода пиксельных данных для хранения временных результатов во время вычислений и для обнаружения этапов выборки текстуры.
ms.assetid: ca25a030-b4da-4893-b9f3-e3bb12f18d83
keywords:
- Регистры — ps_1_1 для ps_1_4
ms.topic: article
ms.date: 05/31/2018
topic_type:
- kbArticle
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: 291f78b8bf74a20dfecf4a74ed65173a895bcc1b
ms.sourcegitcommit: b6fe9acffad983c14864b8fe0296f6025cb1f961
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2021
ms.locfileid: "107998641"
---
# <a name="ps_1_1__ps_1_2__ps_1_3__ps_1_4-registers"></a>реестр PS 1 1 PS 1 2 PS 1 3 PS 1 \_ \_ \_ \_ \_ \_ \_ \_ \_ \_ \_ \_ \_ \_ 4 регистры

Построители текстур пикселей зависят от регистров для получения данных вершин, вывода пиксельных данных для хранения временных результатов во время вычислений и для обнаружения этапов выборки текстуры. Существует несколько типов регистров, каждый из которых имеет уникальную функциональность. В этом разделе содержатся справочные сведения о входных и выходных регистрах, реализованных построителем пиксельных шейдеров версии 1 \_ X.

Регистры содержат данные для использования шейдером пикселей. Регистры полностью описаны в следующих разделах.

-   Типы регистров описывает четыре типа доступных регистров и их назначение.
-   Ограничение числа портов чтения сведения об ограничениях использования нескольких регистров в одной инструкции.
-   Чтение только чтение запись описывает, какие регистры можно использовать для чтения, записи или для того и другого.
-   Диапазон сведения о диапазоне данных компонента.

## <a name="register-types"></a>Типы регистров



|      |                    | Версии |      |      |              |
|------|--------------------|----------|------|------|--------------|
| Имя | Тип               | 1\_1     | 1\_2 | 1 \_ 3 | 1\_4         |
| c\#  | Регистр констант  | 8        | 8    | 8    | 8            |
| Cерверный\#  | Временный регистр | 2        | 2    | 2    | 6            |
| t\#  | Регистр текстуры   | 4        | 4    | 4    | 6            |
| v\#  | Регистр цвета     | 2        | 2    | 2    | 2 на этапе 2 |



 

-   Постоянные регистры содержат постоянные данные. Данные могут быть загружены в регистр констант с помощью [**сетпикселшадерконстантф**](/windows/desktop/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setpixelshaderconstantf) или могут быть определены с помощью [DEF-PS](def---ps.md). Регистры констант не могут использоваться в инструкциях по адресам текстур. Единственным исключением является инструкция [texm3x3spec-PS](texm3x3spec---ps.md) , использующая регистр констант для предоставления вектора с глазным лучом.
-   Временные регистры используются для хранения промежуточных результатов. R0 дополнительно выступает в качестве выходных данных шейдера пикселей. Значение в R0 в конце шейдера — это цвет пикселя шейдера.

    Проверка шейдера завершится ошибкой [**креатепикселшадер**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9-createpixelshader) для любого шейдера, пытающегося прочитать данные из временного регистра, который не был записан в предыдущей инструкции. [**D3DXAssembleShader**](/windows/desktop/direct3d9/d3dxassembleshader) будет работать аналогично, если проверка включена (не используйте D3DXSHADER \_ скипвалидатион).

-   Регистры текстур

    Для построителя текстуры версии 1 \_ 1 в 1 \_ 3 регистры текстур содержат данные текстуры или координаты текстуры. При выборе текстуры данные текстуры загружаются в регистр текстуры. Выборка текстур использует координаты текстуры для поиска или выборки значений цвета в заданных координатах (u, v, w, q), принимая во внимание атрибуты состояния стадии текстуры. Данные координат текстуры интерполируются на основе данных координат текстурной текстуры и связаны с определенной стадией текстуры. Существует связь «один к одному» по умолчанию между номером этапа текстуры и порядком объявления координат текстуры. По умолчанию первый набор координат текстуры, определенный в формате вершины, связан с стадией текстуры 0.

    Для этих версий шейдеров текстуры регистры текстур ведут себя так же, как и временные регистры при использовании арифметическими инструкциями.

    Для построителя текстуры версии 1 \_ 4 регистры текстур (t \# ) содержат данные координаты текстуры только для чтения. Это означает, что набор координат текстуры и номер стадии текстуры независимы друг от друга. Номер этапа текстуры (из которого будет выборке текстуры) определяется номером целевой регистрации (R0 to R5). Для инструкции текслд набор координат текстуры определяется исходным регистром (T0 – T5), поэтому набор координат текстуры можно сопоставить с любой стадией текстуры. Кроме того, исходный регистр (указание координат текстуры) для текслд также может быть временным регистром (r \# ). в этом случае содержимое временного регистра используется в качестве координат текстуры.

-   Цветовые регистры содержат значения цвета для каждого пикселя. Значения получаются в виде итерации рассеянных и отражающих цветов в данных вершин. Для шейдеров Pixel Shader версии 1 \_ 4 регистры цветов доступны только на втором этапе.

    Если для режима затенения задано значение D3DSHADE \_ Flat, то итерация обоих цветов вершин (диффузная и зеркальная) отключена. Независимо от режима затенения, если включен пиксельный туман, туман по-прежнему будет выполнять итерацию по конвейеру. Помните, что туман применяется позже в конвейере, чем PixelShader.

    Часто загружается регистр v0 с данными рассеянного цвета вершин. Также часто загружается регистр v1 с данными отраженного цвета вершин.

    Значения входных данных цвета записываются в диапазон от 0 до 1, так как это допустимый входной диапазон для цветовых регистров в шейдере пикселей.

    Шейдеры пикселей имеют доступ только для чтения к цветным регистрам. Содержимое этих регистров — это итерационные значения, но итерация может выполняться с более низкой точностью, чем координаты текстуры.

## <a name="read-port-limit"></a>Ограничение числа портов чтения

Ограничение количества портов чтения определяет количество различных регистров каждого типа регистров, которые могут использоваться в качестве исходного регистра в одной инструкции.



|      |                    | Версии |      |      |              |
|------|--------------------|----------|------|------|--------------|
| Имя | Тип               | 1\_1     | 1\_2 | 1 \_ 3 | 1\_4         |
| c\#  | Регистр констант  | 2        | 2    | 2    | 2            |
| Cерверный\#  | Временный регистр | 2        | 2    | 2    | 3            |
| t\#  | Регистр текстуры   | 2        | 3    | 3    | 1            |
| v\#  | Регистр цвета     | 2        | 2    | 2    | 2 на этапе 2 |



 

Например, для регистров цвета почти всех версий задано ограничение на число портов чтения, равное двум. Это означает, что одна инструкция может использовать не более двух различных цветовых регистров (v0 и v1 для экземпляра) в качестве исходных регистров. В этом примере показано использование двух регистров цвета в одной инструкции:


```
mad r0, v1, c2, v0
```



## <a name="read-only-readwrite"></a>Только для чтения, чтение и запись

Типы регистров идентифицируются в соответствии с возможностями только для чтения (RO) или для чтения и записи (RW) в следующей таблице. Регистры только для чтения могут использоваться только в качестве исходных регистров в инструкции; они никогда не могут использоваться в качестве регистра назначения.



|      |                    | Версии |      |      |                    |
|------|--------------------|----------|------|------|--------------------|
| Имя | Тип               | 1\_1     | 1\_2 | 1 \_ 3 | 1\_4               |
| c\#  | Регистр констант  | RO       | RO   | RO   | RO                 |
| Cерверный\#  | Временный регистр | RW       | RW   | RW   | RW                 |
| t\#  | Регистр текстуры   | RW       | RW   | RW   | См. следующее примечание |
| v\#  | Регистр цвета     | RO       | RO   | RO   | RO                 |



 

Регистры, поддерживающие пропускную способностью, можно использовать для хранения промежуточных результатов. Сюда входят временные регистры и регистры текстур для некоторых версий шейдера.

> [!Note]  
>
> -   Для построителя текстуры версии 1 \_ 4 регистры текстур являются ro для инструкций по адресации текстур, а регистры текстур не могут ни считывать, ни записывать в арифметические инструкции. Кроме того, так как регистры текстур становятся регистрами координат текстуры, доступ с помощью RO не является регрессией предыдущих функций.

 

## <a name="range"></a>Диапазон

Диапазон — это максимальное и минимальное значение данных реестра. Диапазоны зависят от типа регистра. Диапазоны для некоторых регистров можно запросить с прописных букв устройства с помощью [**жетдевицекапс**](/windows/desktop/api/d3d9/nf-d3d9-idirect3d9-getdevicecaps).



| Имя | Type               | Диапазон                                               | Версии     |
|------|--------------------|-----------------------------------------------------|--------------|
| c\#  | Регистр констант  | от-1 до + 1                                            | Все версии |
| Cерверный\#  | Временный регистр | \- PixelShader1xMaxValue + PixelShader1xMaxValue | Все версии |
| t\#  | Регистр текстуры   | \- Макстекстуререпеат + Макстекстуререпеат           | Все версии |
| v\#  | Регистр цвета     | от 0 до 1                                              | Все версии |



 

Ранний построитель текстуры оборудование представляет данные в регистрах с использованием числа с фиксированной запятой. Это ограничивает точность до приблизительно восьми бит для дробной части числа. Помните об этом при проектировании шейдера.

Для построителя текстуры версии 1 \_ 1 в 1 \_ 3 макстекстуререпеат должно быть как минимум одним. Для 1 \_ 4 макстекстуререпеат должно быть не менее восьми.

Дополнительные сведения о PixelShader1xMaxValue см. в разделе [**D3DCAPS9**](/windows/desktop/api/d3d9caps/ns-d3d9caps-d3dcaps9) .

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Регистры](dx9-graphics-reference-asm-ps-registers.md)
</dt> </dl>

 

 
