---
title: Регистры — hs_5_0
description: 'Шейдер поверхности состоит из трех отдельных этапов: этапа контрольной точки, фазы разветвления и фазы присоединения. Каждый этап имеет собственные наборы входных и выходных регистров.'
ms.assetid: 82F689EF-D3F4-40B5-9A2C-1F97F4CE6501
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1aca1377c7ca6b56434c361ba06b01cf659319f6
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2021
ms.locfileid: "104351895"
---
# <a name="registers---hs_5_0"></a>Регистры-HS \_ 5 \_ 0

Шейдер поверхности состоит из трех отдельных этапов: этапа контрольной точки, фазы разветвления и фазы соединения. Каждый этап имеет собственные наборы входных и выходных регистров.

## <a name="control-point-phase"></a>Этап контрольной точки

\_этап контрольной \_ точки HS — это \_ программа шейдера, которая имеет следующую модель регистрации.

### <a name="input-registers"></a>Входные регистры



| Тип регистра                                     | Count                 | Чтение-запись | Измерение | Индексация по r\# | Значения по умолчанию | Требуется ДКЛ |
|---------------------------------------------------|-----------------------|-----|-----------|------------------|----------|--------------|
| 32-разрядная временная (r \# )                                 | 4096 (r \# + x \# \[ n \] )    | Чтение-запись | 4         | нет               | None     | Да          |
| 32-битовый индексируемый массив Temp (x \# \[ n \] )            | 4096 (r \# + x \# \[ n \] )    | Чтение-запись | 4         | Да              | Нет     | Да          |
| 32-разрядный вход ( \[ v \] \[ элемент вершины \] )             | 32 (элемент) \* 32 (по вертикали) | R   | 4         | Да              | Нет     | Да          |
| 32-разрядный UINT input Ваутпутконтролпоинтид (23.7)     | 1                     | R   | 1         | Нет               | None     | Да          |
| 32-разрядный UINT input Примитивеид (Вприм)             | 1                     | R   | 1         | Нет               | Недоступно      | Да          |
| Элемент во входном ресурсе (t \# )                | 128                   | R   | 128       | Да              | Нет     | Да          |
| Образцы \#                                     | 16                    | R   | 1         | Да              | Нет     | Да          |
| Справочник по Константбуффер ( \# \[ индекс CB \] )          | 15                    | R   | 4         | Да              | Нет     | Да          |
| Немедленная ссылка на Константбуффер (индекс блока ICB \[ \] ) | 1                     | R   | 4         | Да (содержимое)   | Нет     | Да          |



 

### <a name="output-registers"></a>Выходные регистры



| Тип регистра                           | Count | Чтение-запись | Измерение | Индексация по r\# | Значения по умолчанию | Требуется ДКЛ |
|-----------------------------------------|-------|-----|-----------|------------------|----------|--------------|
| 32-разрядный выходной элемент данных вершины (o \# ) | 32    | W   | 4         | Да              | Нет     | Да          |



 

Каждый выходной регистр этапа контрольного шейдера поверхности имеет до 4 вектора, для которого можно объявить до 32 регистров. Кроме того, существует от 1 до 32 контрольных точек вывода, что позволяет масштабировать требуемый объем хранилища. Мы будем ссылаться на максимально допустимое статистическое число скалярных значений во всех выходных данных этапа управления шейдером поверхности в \# качестве \_ максимального выходного значения CP \_ .

\#\_Максимальная длина выходных данных CP \_ = 3968 скаляров.

Это ограничение основано на точке проектирования для определенного оборудования 4096 \* 32-разрядного хранилища. Сумма выходных данных контрольной точки равна 3968 = 4096-128 (32 (контрольные точки) \* 4 (компоненты) \* 32 (Elements)-4 (Components) \* 32 (Elements). Вычитание резервирует 128 скаляров (одной контрольной точки) места, выделенного для поверхности шейдера 2 и 3. При выборе резервирования скаляров в 128 для констант исправлений, а не в том, чтобы сделать так, чтобы они ни были, чем все скалярные значения 4096, не отменялись точками управления выходом, это соответствует ограничениям другой конкретной архитектуры оборудования. Этап контрольной точки может объявлять 32 контрольных точек вывода, но не может быть полностью 32 элементов с 4 компонентами, так как общий объем хранилища будет слишком большим.

## <a name="fork-phase"></a>Фаза ветвления

Следующие регистры видны в \_ модели фазы разветвления HS \_ .

Входные ресурсы (t \# ), пробы \# , буферы констант (CB \# ) и буфер непосредственных констант (блок ICB) ниже представляют собой все общие состояния со всеми остальными этапами шейдера поверхности. То есть с точки зрения API или DDI, шейдер поверхности имеет один набор состояний входного ресурса для всех фаз. Это происходит из-за того, что из точки API или DDI представление шейдер поверхности является отдельным атомарным шейдером. этапы в нем представляют собой детали реализации.

### <a name="input-registers"></a>Входные регистры



| Тип регистра                                                                         | Count              | Чтение-запись | Измерение                           | Индексация по r\# | Значения по умолчанию | Требуется ДКЛ |
|---------------------------------------------------------------------------------------|--------------------|-----|-------------------------------------|------------------|----------|--------------|
| 32-разрядная временная (r \# )                                                                     | 4096 (r \# + x \# \[ n \] ) | Чтение-запись | 4                                   | нет               | None     | Да          |
| 32-битовый индексируемый массив Temp (x \# \[ n \] )                                                | 4096 (r \# + x \# \[ n \] ) | Чтение-запись | 4                                   | Да              | Нет     | Да          |
| 32-разрядные контрольные точки ввода ( \[ элемент вершины викп \] \[ \] ) (этап предварительной контрольной точки)     | 32 см. Примечание ниже  | R   | 4 (компонент) \* 32 (элемент) \* 32 (по вертикали) | Да              | Нет     | Да          |
| 32-разрядные контрольные точки вывода ( \[ элемент вершины вокп \] \[ \] \] ) (этап контрольной точки после управления) | 32 см. Примечание ниже  | R   | 4 (компонент) \* 32 (элемент) \* 32 (по вертикали) | Да              | Нет     | Да          |
| 32-разрядный UINT input Примитивеид (Вприм)                                                 | 1                  | R   | 1                                   | Нет               | Недоступно      | Да          |
| 32-разрядный UINT input Форкинстанцеид (23.8) (Вфоркинстанцеид)                              | 1                  | R   | 1                                   | Нет               | Недоступно      | Да          |
| Элемент во входном ресурсе (t \# )                                                    | 128                | R   | 128                                 | Да              | Нет     | Да          |
| Образцы \#                                                                         | 16                 | R   | 1                                   | Да              | Нет     | Да          |
| Справочник по Константбуффер ( \# \[ индекс CB \] )                                              | 15                 | R   | 4                                   | Да              | Нет     | Да          |
| Немедленная ссылка на Константбуффер (индекс блока ICB \[ \] )                                     | 1                  | R   | 4                                   | Да (содержимое)   | Нет     | Да          |



 

> [!Note]
> Объявления регистрации точки управления входными точками шейдера поверхности (викп) должны быть любыми подмножествами, а \[ также \] осью элементов для входных данных точки управления шейдером поверхности (этап предварительной контрольной точки). Аналогичным образом, объявления для вывода точек управления выходом (вокп) должны быть любым подмножеством \[ вдоль \] оси элементов в точках управления выходными данными шейдера поверхности (фаза контрольной точки после управления).
> 
> Вдоль \[ оси вершин \] Количество контрольных точек для чтения для каждого из викп и вокп должно совпадать с подмножеством счетчика точек управления входными данными шейдера поверхности, соответственно. Например, если ось вершин в регистрах вокп объявлена с n вершинами, то она делает контрольные точки этапа контрольного вывода \[ равными 0. n-1 \] доступно как входные данные только для чтения на фазе ветвления.

### <a name="output-registers"></a>Выходные регистры



| Регистрация                                        | Count               | Чтение-запись | Измерение | Индексация по r\# | Значения по умолчанию | Требуется ДКЛ |
|-------------------------------------------------|---------------------|-----|-----------|------------------|----------|--------------|
| 32-разрядный элемент данных константы исходящего исправления (o \# ) | 32 см. Примечание 1 ниже. | W   | 4         | Да              | Нет     | Да          |



 

> [!Note]  
> Выходными данными этапа ветвления и соединения шейдера поверхности является общий набор регистров 4 4 вектора. Выходные данные каждой программы разветвления или фазы соединения не могут пересекаться друг с другом. Интерпретируемые системой значения, такие как Тессфакторс, выступают из этого пространства.

## <a name="join-phase"></a>Фаза присоединения

Следующие регистры видны в \_ модели фазы соединения с HS \_ . Существует три набора входных регистров: контрольные точки этапа управления вводом (викп), точки управления выходом точки управления вокп (вокп) и константы исправлений (3 – 3). VPC — это статистические выходные данные всех программ этапа разветвления поверхности шейдера. Регистры выхода на этапе присоединения шейдера поверхности \# находятся в одном пространстве регистра, где выводятся выходные данные этапа ветвления шейдера хуллл.

Входные ресурсы (t \# ), пробы \# , буферы констант (CB \# ) и буфер непосредственных констант (блок ICB) ниже представляют собой все общие состояния со всеми остальными этапами шейдера поверхности. То есть с точки зрения API или DDI, шейдер поверхности имеет один набор состояний входного ресурса для всех фаз. Это происходит из-за того, что из точки API или DDI представление шейдер поверхности является отдельным атомарным шейдером. этапы в нем представляют собой детали реализации.

### <a name="input-registers"></a>Входные регистры



| Тип регистра                                                                       | Count               | Чтение-запись | Измерение                           | Индексация по r\# | Значения по умолчанию | Требуется ДКЛ |
|-------------------------------------------------------------------------------------|---------------------|-----|-------------------------------------|------------------|----------|--------------|
| 32-разрядная временная (r \# )                                                                   | 4096 (r \# + x \# \[ n \] )  | Чтение-запись | 4                                   | нет               | None     | Да          |
| 32-битовый индексируемый массив Temp (x \# \[ n \] )                                              | 4096 (r \# + x \# \[ n \] )  | Чтение-запись | 4                                   | Да              | Нет     | Да          |
| 32-разрядные контрольные точки ввода ( \[ элемент вершины викп \] \[ \] ) (этап предварительной контрольной точки)   | 32 см. Примечание 1 ниже. | R   | 4 (компонент) \* 32 (элемент) \* 32 (по вертикали) | Да              | Нет     | Да          |
| 32-разрядные контрольные точки вывода ( \[ элемент вершины вокп \] \[ \] ) (этап контрольной точки после управления) | 32 см. Примечание 1 ниже. | R   | 4 (компонент) \* 32 (элемент) \* 32 (по вертикали) | Да              | Нет     | Да          |
| 32-разрядный вход ( \[ элемент VPC \] ) (постоянное обновление данных)                                 | 32 см. Примечание 2 ниже | R   | 4                                   | Да              | Нет     | Да          |
| 32-разрядный UINT input Примитивеид (Вприм)                                               | 1                   | R   | 1                                   | Нет               | Недоступно      | Да          |
| 32-разрядный UINT input Жоининстанцеид (Вжоининстанцеид)                                  | 1                   | R   | 1                                   | Нет               | Недоступно      | Да          |
| Элемент во входном ресурсе (t \# )                                                  | 128                 | R   | 128                                 | Да              | Нет     | Да          |
| Образцы \#                                                                       | 16                  | R   | 1                                   | Да              | Нет     | Да          |
| Справочник по Константбуффер ( \# \[ индекс CB \] )                                            | 15                  | R   | 4                                   | Да              | Нет     | Да          |
| Немедленная ссылка на Константбуффер (индекс блока ICB \[ \] )                                   | 1                   | R   | 4                                   | Да (содержимое)   | Нет     | Да          |



 

**Примечание 1.** Объявления регистров входных данных для этапа присоединения шейдера поверхности (викп) должны быть любым подмножеством, а также \[ \] осью элементов для входных данных контрольной точки шейдера поверхности (этап предварительной контрольной точки). Аналогичным образом, объявления для вывода точек управления выходом (вокп) должны быть любым подмножеством \[ вдоль \] оси элементов в точках управления выходными данными шейдера поверхности (фаза контрольной точки после управления).

Вдоль \[ оси вершин \] Количество контрольных точек для чтения для каждого из викп и вокп должно совпадать с подмножеством счетчика точек управления входными данными шейдера поверхности, соответственно. Например, если ось вершин в регистрах вокп объявлена с n вершинами, то она делает контрольные точки этапа контрольного вывода \[ равными 0. n-1 \] доступно как входные данные только для чтения на фазе соединения.

**Примечание 2.** В дополнение к вводу контрольных точек фаза присоединения шейдера поверхности также видит в качестве входных данных константы исправления, вычисленные программами ветвления поверхности шейдера. Это показано на этапе разветвления поверхности шейдера в качестве реестра VPC \# . Регистры входных данных для фазы подключения шейдера поверхности \# используют одно и то же пространство регистра, что и регистры выходных данных фазы ветвления поверхности-шейдеров \# . Объявления \# регистров o не должны пересекаться с любым объявлением вывода программы-поверхности шейдера. \# фаза присоединения шейдера поверхности добавляется к выходным данным постоянного исправления для шейдера поверхности.

### <a name="output-registers"></a>Выходные регистры



| Тип регистра                                   | Count             | Чтение-запись | Измерение | Индексация по r\# | Значения по умолчанию | Требуется ДКЛ |
|-------------------------------------------------|-------------------|-----|-----------|------------------|----------|--------------|
| 32-разрядный элемент данных константы исходящего исправления (o \# ) | 32 см. Примечание ниже | W   | 4         | Да              | Нет     | Да          |



 

> [!Note]  
> Выходными данными этапа ветвления и соединения шейдера поверхности является общий набор регистров 4 4 вектора. Выходные данные каждой программы разветвления или фазы соединения не могут пересекаться друг с другом. Интерпретируемые системой значения, такие как Тессфакторс, выступают из этого пространства.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Модель шейдера 5](d3d11-graphics-reference-sm5.md)
</dt> </dl>

 

 




