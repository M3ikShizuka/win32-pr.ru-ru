---
title: Составной результат
description: Используйте составной результат для объединения двух или более изображений. Этот результат имеет 13 различных составных режима.
ms.assetid: 60b878e9-1bc6-40d4-ade3-4bbd5c822c55
keywords:
- составной результат
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f8cf326e5d0bfb33b3dc927ba7366eb6d2b343a1a50db462de58fac8ef648bef
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117826586"
---
# <a name="composite-effect"></a>Составной результат

Используйте составной результат для объединения двух или более изображений. Этот результат имеет 13 различных составных режима. T

Составной результат принимает 2 или более входных данных. При указании двух изображений назначение является первым входом (индексом 0), а источником является второй вход (индекс 1). Если указать более двух входных данных, образы будут составными, начиная с первого входного, второго и т. д.

Этот результат реализует все режимы с использованием блока наложения графического процессора (GPU).

Идентификатором CLSID для этого действия является CLSID \_ D2D1Composite.

-   [Пример изображения](#example-image)
-   [Свойства эффектов](#effect-properties)
-   [Типы режимов](#mode-types)
-   [Образец кода](#sample-code)
-   [Требования](#requirements)
-   [Связанные темы](#related-topics)

## <a name="example-image"></a>Пример изображения

На рисунке изображены два скругленных прямоугольника того же размера, которые перекрываются. Синим прямоугольником является источник, а красный прямоугольник — место назначения. Изображения были совмещены с источником в режиме.

![Пример изображения с двумя скругленными прямоугольниками того же размера, который пересекается с использованием источника в режиме.](images/composite-over.png)

Ниже приведен другой пример использования режима по умолчанию.



| До образа 1                                                          |
|-------------------------------------------------------------------------|
| ![Первое исходное изображение перед результатом.](images/default-before.jpg) |
| До изображения 2                                                          |
| ![Второе изображение перед результатом.](images/3-composite(2of2).png)    |
| После                                                                   |
| ![изображение после преобразования.](images/3-composite.png)               |



 


```C++
ComPtr<ID2D1Effect> compositeEffect;
m_d2dContext->CreateEffect(CLSID_D2D1Composite, &compositeEffect);

compositeEffect->SetInput(0, bitmap);
compositeEffect->SetInput(1, bitmapTwo);

m_d2dContext->BeginDraw();
m_d2dContext->DrawImage(compositeEffect.Get());
m_d2dContext->EndDraw();
```



## <a name="effect-properties"></a>Свойства эффектов



| Отображаемое имя и перечисление индекса                     | Тип и значение по умолчанию                                                          | Описание                   |
|--------------------------------------------------------|---------------------------------------------------------------------------------|-------------------------------|
| Режим<br/> D2D1 \_ составной \_ \_ режим Prop<br/> | \_Составной \_ режим D2D1<br/> \_Источник D2D1 составного \_ режима \_ \_<br/> | Режим, используемый для этого результата. |



 

## <a name="mode-types"></a>Типы режимов

В таблице здесь показаны режимы этого результата. В формулах, перечисленных в таблице, используются следующие элементы:

-   O = выходные данные
-   S = источник
-   SA = источник альфа
-   D = назначение
-   DA = альфа-канал назначения



| Перечисление                                  | Дробь                          | Размер выходного растрового изображения                                                                                      |
|----------------------------------------------|-----------------------------------|---------------------------------------------------------------------------------------------------------|
| \_Источник D2D1 составного \_ режима \_ \_          | O = S + (1 SA) \* D             | Объединение исходного и конечного точечных рисунков                                                                 |
| \_ \_ \_ Назначение для СОСТАВного режима D2D1 \_     | O = (1 DA) \* S + D             | Объединение исходного и конечного точечных рисунков                                                                 |
| \_Источник составного \_ режима D2D1 \_ \_ в            | O = DA \* S                       | Пересечение исходного и конечного точечных рисунков                                                          |
| \_Назначение составного \_ режима D2D1 \_ \_ в       | O = SA \* D                       | Пересечение исходного и конечного точечных рисунков                                                          |
| \_Источник составного \_ режима D2D1 \_ \_           | O = (1-DA) \* S                 | Регион исходного точечного рисунка                                                                             |
| \_Назначение для составного \_ режима \_ \_ D2D1      | O = (1-SA) \* D                 | Регион точечного рисунка назначения                                                                        |
| \_Источник D2D1 составного \_ режима \_ \_          | O = DA \* S + (1-SA) \* D       | Регион точечного рисунка назначения                                                                        |
| D2D1 \_ для \_ назначения составного режима \_ \_     | O = (1-DA) \* S + SA \* D       | Регион исходного точечного рисунка                                                                             |
| D2D1 \_ составной \_ режим \_ XOR                   | O = (1-DA) \* S + (1-SA) \* D | Объединение исходного и конечного точечных рисунков                                                                 |
| D2D1 \_ составной \_ режим \_ и                  | O = S + D                         | Объединение исходного и конечного точечных рисунков                                                                 |
| \_ \_ \_ Копия источника СОСТАВного режима D2D1 \_          | O = S                             | Регион исходного точечного рисунка                                                                             |
| \_ \_ \_ Копия с ОГРАНИЧЕНным \_ источником \_ D2D1 в составном режиме | O = S (только в том месте, где существует источник)  | Объединение исходного и целевого точечных рисунков. Назначение не перезаписывается, если источник не существует. |
| \_Инверсия D2D1 в составном \_ режиме \_ \_          | O = (1 D) \* S + (1 SA) \* D  | Объединение исходного и целевого точечных рисунков. Альфа-значения не меняются.                                 |



 

На рисунке ниже показан пример каждого режима с изображениями со степенью непрозрачности 1,0 или 0,5.

![Пример изображения для каждого из режимов с непрозрачностью, равным 1,0 или 0,5.](images/composite-types.png)

## <a name="sample-code"></a>Пример кода

Чтобы получить пример этого результата, скачайте [образец Direct2D составных эффектов](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/master/Official%20Windows%20Platform%20Sample/Direct2D%20composite%20effect%20modes%20sample).

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|--------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Минимальная версия сервера | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Заголовок                   | d2d1effects. h                                                                      |
| Библиотека                  | D2D1. lib, дксгуид. lib                                                               |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**ID2D1Effect**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1effect)
</dt> </dl>

 

