---
title: Эффект удаленного отраженного освещения
description: Используйте эффекты неудаленного освещения, чтобы создать изображение, которое отображается как отражающая поверхность, где источник света поступает с длинной расстояния (например, с помощью индикаторов Sun или накладных расходов).
ms.assetid: 74D71A2D-8D1D-4FDE-898A-2D2F5A8D5D31
keywords:
- удаленное отраженное освещение
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7a02bbf6e928691f88de3adc41fc3ae84cbc1e7df69b3b5998ca903a7556d29d
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119768854"
---
# <a name="distant-specular-lighting-effect"></a>Эффект удаленного отраженного освещения

Используйте эффекты неудаленного освещения, чтобы создать изображение, которое отображается как отражающая поверхность, где источник света поступает с длинной расстояния (например, с помощью индикаторов Sun или накладных расходов). Этот результат использует альфа-канал в качестве карте высоты и включает изображение с удаленным источником света.

Цвет точечного рисунка выходных данных является результатом светлого цвета, светлой и геометрической поверхности. Вывод альфа-канала для каждого пикселя с отраженным освещением является максимальным значением красного, зеленого и синего каналов для этого пикселя.

Идентификатором CLSID для этого действия является CLSID \_ D2D1DistantSpecular.

-   [Пример изображения](#example-image)
-   [Источник удаленных источников освещения](#distant-light-source)
-   [Свойства эффектов](#effect-properties)
-   [Режимы масштабирования](#scale-modes)
-   [Требования](#requirements)
-   [Связанные темы](#related-topics)

## <a name="example-image"></a>Пример изображения

В этом примере показаны входные и выходные изображения для эффектов неудаленного отражения.

![снимок экрана примера эффектов, иллюстрирующий входные и выходные изображения для неудаленного отраженного освещения. ](images/distant-spec-example.png)

Итоговый точечный рисунок вывода можно вычислить с помощью следующих уравнений.

![Вычисление выходного растрового изображения](images/distant-spec-formula1.png)

where <dl> занят? = Константа отраженного освещения.  
![символ нормали поверхности. ](images/point-spec-mathchar-n.png) = поверхность, обычная векторная единица.  
![символ вектора на середине. ](images/point-spec-mathchar-h.png) = "среднее значение" для единичного вектора между единицами измерения и вектором освещения.  
C<sub>r</sub>, c<sub>g</sub>, c<sub>b</sub> = светло-цвет в компонентах RGB.  
</dl>

## <a name="distant-light-source"></a>Источник удаленных источников освещения

На рисунке ниже показан пример направления освещения от удаленных источников освещения.

![Источник удаленных источников освещения](images/distant-spec-lightsource.png)

В результате для вычисления светлого вектора используются параметры азимус и повышения прав. ![l Vector.](images/distant-spec-mathchar-l.png) с помощью следующих формул:

![Вычисление светлого вектора](images/distant-spec-formula2.png)

где Light?, светлое<sub>y</sub>и Light<sub>z</sub> — это входные значения координаты источника.

## <a name="effect-properties"></a>Свойства эффектов



| Отображаемое имя и перечисление индекса                                                       | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| азимус<br/> D2D1 \_ дистантспекулар \_ prop \_ азимус<br/>                       | Угол направления источника освещения в плоскости XY относительно оси X в направлении таймера для счетчиков. Единицы измерения находятся в градусах и должны находиться в диапазоне от 0 до 360 градусов.<br/> Тип — FLOAT.<br/> Значение по умолчанию — 0,0 f.<br/>                                                                                                                                                                              |
| Elevation<br/> \_ \_ Повышение прав Prop дистантспекулар D2D1 \_<br/>                   | Угол направления источника освещения в плоскости из, связанный с осью Y в почасовом направлении счетчика. Единицы измерения находятся в градусах и должны находиться в диапазоне от 0 до 360 градусов. <br/> Тип — FLOAT.<br/> Значение по умолчанию — 0,0 f.<br/>                                                                                                                                                                             |
| спекуларекспонент<br/> \_ \_ \_ Отражающий показатель D2D1 дистантспекулар Prop \_<br/>   | Экспонента для отраженного термина в уравнении по методу Фонга освещения. Большее значение соответствует более отражающей поверхности. Значение является безмодульным и должно находиться в диапазоне от 1,0 до 128. Тип — FLOAT.<br/> Значение по умолчанию — 1,0 f.<br/>                                                                                                                                                                                          |
| спекуларконстант<br/> D2D1 \_ дистантспекулар \_ prop, \_ отражающая \_ константа<br/>   | Отношение отраженного отражения к входящему источнику. Значение является безмодульным и должно находиться в диапазоне от 0 до 10 000. Тип — FLOAT.<br/> Значение по умолчанию — 1,0 f.<br/>                                                                                                                                                                                                                                                             |
| сурфацескале<br/> D2D1 \_ дистантспекулар \_ , \_ \_ масштаб поверхности<br/>           | Коэффициент масштабирования по оси Z. Значение является безмодульным и должно находиться в диапазоне от 0 до 10 000. Тип — FLOAT.<br/> Значение по умолчанию — 1,0 f.<br/>                                                                                                                                                                                                                                                                                |
| Color<br/> \_Цвет D2D1 \_ дистантспекулар \_<br/>                           | Цвет входящего освещения. Это свойство предоставляется как D2D1 \_ vector \_ 3F (R, G, B) и используется для вычислений l<sub>R</sub>, l<sub>G</sub>, l<sub>B</sub>. Тип — D2D1 \_ vector \_ 3F.<br/> Значение по умолчанию — {1.0 f, 1.0 f, 1.0 f}.<br/>                                                                                                                                                                                       |
| кернелунитленгс<br/> \_ \_ \_ \_ Длина единицы ядра D2D1 дистантспекулар \_<br/> | Размер элемента в ядре Собел, используемый для создания нормали поверхности в направлении X и Y. Это свойство является D2D1 \_ вектором \_ 2f (длина единицы ядра X, длина единицы ядра Y) и определена в (аппаратно-независимые пиксели (DIP)/kernel). В результате используется интерполяция билинейной для масштабирования растрового изображения в соответствии с размером элементов ядра. Тип — D2D1 \_ vector \_ 2F.<br/> Значение по умолчанию — {1.0 f, 1.0 f}.<br/> |
| ScaleMode<br/> \_ \_ \_ Режим масштабирования D2D1 дистантспекулар \_<br/>                 | Режим интерполяции, который применяется для масштабирования изображения до соответствующей длины единицы ядра. Существует шесть режимов масштабирования, имеющих высокое качество и скорость.<br/> Тип — D2D1 \_ дистантспекулар ( \_ масштабируемый \_ режим).<br/> Значение по умолчанию — \_ D2D1 \_ дистантспекулар \_ \_ линейный режим масштабирования.<br/>                                                                                                                                 |



 

## <a name="scale-modes"></a>Режимы масштабирования



| Перечисление                                               | Описание                                                                                                                                                                                          |
|-----------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_ \_ \_ \_ Ближайший соседний D2D1 дистантспекулар режим масштабирования \_     | Выбирает ближайшую одиночную точку и использует ее. В этом режиме используется меньше времени на обработку, но выводится изображение самого низкого качества.                                                                           |
| \_ \_ \_ Линейный режим масштабирования D2D1 дистантспекулар \_                | Использует выборку с четырьмя точками и линейную интерполяцию. В этом режиме выводится изображение с более высоким качеством, чем у ближайшего соседа.                                                                                   |
| D2D1 \_ дистантспекулар \_ Scale \_ , \_ кубический режим                 | Использует 16-примерный ядро кубических для интерполяции. Этот режим использует наибольшее время обработки, но выводит изображение с более высоким качеством.                                                                        |
| D2D1 \_ дистантспекулар \_ режим масштабирования с \_ \_ несколькими \_ образцами \_ | Использует 4 линейных образца в пределах одного пикселя для удобного сглаживания. Этот режим хорошо подходит для уменьшения масштаба по небольшим объемам на изображениях с небольшими пикселями.                                              |
| D2D1 \_ дистантспекулар \_ режим масштабирования — \_ \_ анизотропная           | Использует анизотропную фильтрацию для выборки шаблона в соответствии с преобразованной формой точечного рисунка.                                                                                                     |
| \_ \_ \_ \_ \_ Высококачественное \_ кубический режим масштабирования D2D1 дистантспекулар  | Использует высококачественное ядро кубического размера для выполнения предварительно довнскале образа, если довнскалинг участвует в матрице преобразования. Затем использует режим интерполяции кубических для окончательного вывода. |



 

> [!Note]  
> Если не выбрать режим, то по умолчанию применяется \_ режим МАСШТАБИРОВАНИЯ D2D1 дистантспекулар \_ \_ \_ линейный.

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|--------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Минимальная версия сервера | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Заголовок                   | d2d1effects. h                                                                      |
| Библиотека                  | D2D1. lib, дксгуид. lib                                                               |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**ID2D1Effect**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1effect)
</dt> </dl>

 

