---
title: Общие сведения о классах Transform
description: Представляет API преобразования Microsoft Direct2D для Windows 7. Direct2D позволяет разработчикам Win32 выполнять двумерные преобразования графики.
ms.assetid: eea8177d-c19e-4972-a9a6-ad5d541b090f
keywords:
- Direct2D, общие сведения о преобразованиях
- Direct2D, системы координат
- Direct2D, целевые объекты отрисовки
- Direct2D, 2-D преобразования
- двумерные преобразования
- преобразования, о
- преобразования, целевые объекты отрисовки
- преобразования, объекты
- целевые объекты рендеринга, преобразования
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0b924c51d73e71f206fbb250f4a7dd50ca71db2a
ms.sourcegitcommit: f848119a8faa29b27585f4df53f6e50ee9666684
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/27/2021
ms.locfileid: "110549149"
---
# <a name="transforms-overview"></a><span data-ttu-id="e9c52-113">Общие сведения о классах Transform</span><span class="sxs-lookup"><span data-stu-id="e9c52-113">Transforms Overview</span></span>

<span data-ttu-id="e9c52-114">В этом разделе рассматриваются основы преобразований Direct2D и приведены примеры различных преобразований.</span><span class="sxs-lookup"><span data-stu-id="e9c52-114">This topic discusses the basics of Direct2D transforms and includes examples of various transforms.</span></span> <span data-ttu-id="e9c52-115">Он содержит следующие компоненты:</span><span class="sxs-lookup"><span data-stu-id="e9c52-115">It contains the following parts:</span></span>

-   [<span data-ttu-id="e9c52-116">Что такое преобразование Direct2D?</span><span class="sxs-lookup"><span data-stu-id="e9c52-116">What Is a Direct2D Transform?</span></span>](#what-is-a-direct2d-transform)
-   [<span data-ttu-id="e9c52-117">Direct2D координатное пространство</span><span class="sxs-lookup"><span data-stu-id="e9c52-117">The Direct2D Coordinate Space</span></span>](#the-direct2d-coordinate-space)
-   [<span data-ttu-id="e9c52-118">Создание матриц преобразования</span><span class="sxs-lookup"><span data-stu-id="e9c52-118">Creating Transformation Matrices</span></span>](#creating-transformation-matrices)
-   [<span data-ttu-id="e9c52-119">Преобразование целевых объектов отрисовки</span><span class="sxs-lookup"><span data-stu-id="e9c52-119">Rendering Target Transforms</span></span>](#rendering-target-transforms)
-   [<span data-ttu-id="e9c52-120">Преобразования кистей</span><span class="sxs-lookup"><span data-stu-id="e9c52-120">Brush Transforms</span></span>](#brush-transforms)
-   [<span data-ttu-id="e9c52-121">Преобразования геометрии</span><span class="sxs-lookup"><span data-stu-id="e9c52-121">Geometry Transforms</span></span>](#geometry-transforms)
-   [<span data-ttu-id="e9c52-122">Влияние преобразования целевого объекта прорисовки на клипы</span><span class="sxs-lookup"><span data-stu-id="e9c52-122">How a Render Target Transform Affects Clips</span></span>](#how-a-render-target-transform-affects-clips)
-   [<span data-ttu-id="e9c52-123">Сводка</span><span class="sxs-lookup"><span data-stu-id="e9c52-123">Summary</span></span>](#summary)
-   [<span data-ttu-id="e9c52-124">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="e9c52-124">Related topics</span></span>](#related-topics)

## <a name="what-is-a-direct2d-transform"></a><span data-ttu-id="e9c52-125">Что такое преобразование Direct2D?</span><span class="sxs-lookup"><span data-stu-id="e9c52-125">What Is a Direct2D Transform?</span></span>

<span data-ttu-id="e9c52-126">Преобразование определяет способ отображения точек объекта из одного пространства координат в другое или из одной позиции в другую в пределах одного пространства координат.</span><span class="sxs-lookup"><span data-stu-id="e9c52-126">A transform specifies how to map the points of an object from one coordinate space to another or from one position to another within the same coordinate space.</span></span> <span data-ttu-id="e9c52-127">Это сопоставление описывается матрицей преобразования, определенной как коллекция из трех строк с тремя столбцами значений FLOAT, как показано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="e9c52-127">This mapping is described by a transformation matrix, defined as a collection of three rows with three columns of FLOAT values as shown in the following table.</span></span>



|    &nbsp;       |       &nbsp;    |  &nbsp; |
|-----------------|-----------------|-----|
| <span data-ttu-id="e9c52-128">M11Default: 1,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-128">M11Default: 1.0</span></span> | <span data-ttu-id="e9c52-129">M12Default: 0,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-129">M12Default: 0.0</span></span> | <span data-ttu-id="e9c52-130">0,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-130">0.0</span></span> |
| <span data-ttu-id="e9c52-131">M21Default: 0,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-131">M21Default: 0.0</span></span> | <span data-ttu-id="e9c52-132">M22Default: 1,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-132">M22Default: 1.0</span></span> | <span data-ttu-id="e9c52-133">0,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-133">0.0</span></span> |
| <span data-ttu-id="e9c52-134">M31OffsetX: 0,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-134">M31OffsetX: 0.0</span></span> | <span data-ttu-id="e9c52-135">M32OffsetY: 0,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-135">M32OffsetY: 0.0</span></span> | <span data-ttu-id="e9c52-136">1.0</span><span class="sxs-lookup"><span data-stu-id="e9c52-136">1.0</span></span> |



 

<span data-ttu-id="e9c52-137">В этой матрице члены M11, M12, M21 и M22 определяют линейное преобразование, которое может масштабировать, поворачивать или наклонять объект. элементы Оффсеткс и Offset определяют перевод, применяемый после выполнения линейного преобразования.</span><span class="sxs-lookup"><span data-stu-id="e9c52-137">In this matrix, the M11, M12, M21, and M22 members define a linear transformation that can scale, rotate, or skew an object; the OffsetX and OffsetY members define the translation to be applied after the linear transformation has been made.</span></span> <span data-ttu-id="e9c52-138">Для аффинных преобразований значения в третьем столбце всегда имеют значение 0,0, 0,0 и 1,0.</span><span class="sxs-lookup"><span data-stu-id="e9c52-138">For affine transformations, the values in the third column are always 0.0, 0.0, and 1.0.</span></span>

<span data-ttu-id="e9c52-139">Так как Direct2D поддерживает только аффинных (линейные) преобразования, ее матрица преобразований определяется как матрица размером 3 на 2, в которой опущен третий столбец из предыдущей матрицы преобразования.</span><span class="sxs-lookup"><span data-stu-id="e9c52-139">Because Direct2D supports only affine (linear) transformations, its transformation matrix is defined as a 3-by-2 matrix, omitting the third column from the previous transformation matrix.</span></span> <span data-ttu-id="e9c52-140">В следующей таблице показан макет матрицы преобразования «Direct2D».</span><span class="sxs-lookup"><span data-stu-id="e9c52-140">The following table shows the layout of the Direct2D transformation matrix.</span></span>



|    &nbsp;       |       &nbsp;    | 
|-----------------|-----------------|
| <span data-ttu-id="e9c52-141">M11Default: 1,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-141">M11Default: 1.0</span></span> | <span data-ttu-id="e9c52-142">M12Default: 0,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-142">M12Default: 0.0</span></span> |
| <span data-ttu-id="e9c52-143">M21Default: 0,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-143">M21Default: 0.0</span></span> | <span data-ttu-id="e9c52-144">M22Default: 1,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-144">M22Default: 1.0</span></span> |
| <span data-ttu-id="e9c52-145">M31OffsetX: 0,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-145">M31OffsetX: 0.0</span></span> | <span data-ttu-id="e9c52-146">M32OffsetY: 0,0</span><span class="sxs-lookup"><span data-stu-id="e9c52-146">M32OffsetY: 0.0</span></span> |



 

<span data-ttu-id="e9c52-147">В Direct2D эта матрица с 3 по 2 представлена структурой [**D2D1 \_ Matrix \_ 3X2**](/windows/desktop/api/dcommon/ns-dcommon-d2d_matrix_3x2_f) .</span><span class="sxs-lookup"><span data-stu-id="e9c52-147">In Direct2D, this 3-by-2 matrix is represented by the [**D2D1\_MATRIX\_3X2**](/windows/desktop/api/dcommon/ns-dcommon-d2d_matrix_3x2_f) structure.</span></span> <span data-ttu-id="e9c52-148">Для упрощения общих операций матрицы Direct2D также предоставляет класс с именем [**Matrix3x2F**](/windows/win32/api/d2d1helper/nl-d2d1helper-matrix3x2f), который является производным от структуры **D2D1 \_ Matrix \_ 3X2** .</span><span class="sxs-lookup"><span data-stu-id="e9c52-148">To simplify common matrix operations, Direct2D also provides a class named [**Matrix3x2F**](/windows/win32/api/d2d1helper/nl-d2d1helper-matrix3x2f), which is derived from the **D2D1\_MATRIX\_3X2** structure.</span></span>

<span data-ttu-id="e9c52-149">Конструктор по умолчанию для [**Matrix3x2F**](/windows/win32/api/d2d1helper/nl-d2d1helper-matrix3x2f) оставляет объект неинициализированным.</span><span class="sxs-lookup"><span data-stu-id="e9c52-149">The default constructor for [**Matrix3x2F**](/windows/win32/api/d2d1helper/nl-d2d1helper-matrix3x2f) leaves the object uninitialized.</span></span> <span data-ttu-id="e9c52-150">Чтобы получить матрицу идентификаторов, используйте [**Matrix3x2F:: Identity**](/windows/desktop/api/d2d1helper/nf-d2d1helper-identitymatrix).</span><span class="sxs-lookup"><span data-stu-id="e9c52-150">To retrieve an identity matrix, use [**Matrix3x2F::Identity**](/windows/desktop/api/d2d1helper/nf-d2d1helper-identitymatrix).</span></span>

<span data-ttu-id="e9c52-151">При применении преобразования «идентификатор» к объекту он не изменяет расположение, форму или размер объекта.</span><span class="sxs-lookup"><span data-stu-id="e9c52-151">When an identity transform is applied to an object, it does not change the position, shape, or size of the object.</span></span> <span data-ttu-id="e9c52-152">Аналогично тому, что умножение числа на 1 не приводит к изменению числа.</span><span class="sxs-lookup"><span data-stu-id="e9c52-152">It is similar to the way that multiplying a number by 1 does not change the number.</span></span> <span data-ttu-id="e9c52-153">Иными словами, преобразование «идентификатор» оставляет координаты только точек и не смещает точки до новой позиции.</span><span class="sxs-lookup"><span data-stu-id="e9c52-153">In other words, the identity transform leaves the coordinates of points alone and does not shift the points to a new position.</span></span> <span data-ttu-id="e9c52-154">Любое преобразование, отличное от преобразования Identity, изменит расположение, форму и (или) размер объектов.</span><span class="sxs-lookup"><span data-stu-id="e9c52-154">Any transform other than the identity transform will modify the position, shape, and/or size of objects.</span></span>

<span data-ttu-id="e9c52-155">Преобразования — это все о координатах, и важно понимать Direct2D пространство координат для понимания использования преобразований.</span><span class="sxs-lookup"><span data-stu-id="e9c52-155">Transforms are all about coordinates, and understanding the Direct2D coordinate space is important for understanding the use of transformations.</span></span>

## <a name="the-direct2d-coordinate-space"></a><span data-ttu-id="e9c52-156">Direct2D координатное пространство</span><span class="sxs-lookup"><span data-stu-id="e9c52-156">The Direct2D Coordinate Space</span></span>

<span data-ttu-id="e9c52-157">Direct2D использует левое пространство координат; то есть положительные значения оси x увеличиваются вправо, а положительные значения оси y увеличиваются вниз.</span><span class="sxs-lookup"><span data-stu-id="e9c52-157">Direct2D uses a left-handed coordinate space; that is, positive x-axis values increase to the right and positive y-axis values increase downward.</span></span> <span data-ttu-id="e9c52-158">Все на экране располагается относительно начала координат, что является точкой пересечения осей x и y (0, 0), как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="e9c52-158">Everything on the screen is positioned relative to the origin, which is the point where the x-axis and y-axis intersect (0, 0), as shown in the following illustration.</span></span> <span data-ttu-id="e9c52-159">Целевые объекты рендеринга Direct2D используют это пространство координат.</span><span class="sxs-lookup"><span data-stu-id="e9c52-159">Direct2D render targets use this coordinate space.</span></span>

![Иллюстрация оси x и оси y для левого пространства координат](images/coordinatespace.png)

<span data-ttu-id="e9c52-161">Управляя значениями в матрице преобразования, можно поворачивать, масштабировать, отклонять и перемещать (перевод) объект.</span><span class="sxs-lookup"><span data-stu-id="e9c52-161">By manipulating values in a transformation matrix, you can rotate, scale, skew, and move (translate) an object.</span></span> <span data-ttu-id="e9c52-162">Например, если для Оффсеткс задано значение 100, а для параметра offset — 200, то объект перемещается вправо на 100 пикселей и вниз 200 пикселей.</span><span class="sxs-lookup"><span data-stu-id="e9c52-162">For example, if you set OffsetX to 100 and OffsetY to 200, you move the object to the right 100 pixels and down 200 pixels.</span></span>

<span data-ttu-id="e9c52-163">Чтобы увидеть результат перемещения объекта, необходимо применить преобразование «Преобразование» для визуализации целевых объектов, кистей или геометрических элементов.</span><span class="sxs-lookup"><span data-stu-id="e9c52-163">To show the effect of the object move, you need to apply the translation transformation to render targets, brushes, or geometries.</span></span> <span data-ttu-id="e9c52-164">Применение преобразования к объектам отрисовки влияет на весь экран, а применение преобразования к кисти или геометрии влияет только на эту конкретную кисть или геометрию.</span><span class="sxs-lookup"><span data-stu-id="e9c52-164">Applying a transform to render targets affects the entire screen, while applying a transform to a brush or a geometry only affects that specific brush or geometry.</span></span> <span data-ttu-id="e9c52-165">Чтобы создать матрицу преобразования, используйте класс [**Matrix3x2F**](/windows/desktop/api/d2d1helper/nl-d2d1helper-matrix3x2f) .</span><span class="sxs-lookup"><span data-stu-id="e9c52-165">To create a transformation matrix, use the [**Matrix3x2F**](/windows/desktop/api/d2d1helper/nl-d2d1helper-matrix3x2f) class.</span></span>

## <a name="creating-transformation-matrices"></a><span data-ttu-id="e9c52-166">Создание матриц преобразования</span><span class="sxs-lookup"><span data-stu-id="e9c52-166">Creating Transformation Matrices</span></span>

<span data-ttu-id="e9c52-167">Для создания преобразований «вращение», «масштабирование», «наклон» и «преобразование» класс [**Matrix3x2F**](/windows/desktop/api/d2d1helper/nl-d2d1helper-matrix3x2f) предоставляет статические методы, показанные в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="e9c52-167">For creating rotation, scale, skew, and translation transformations, the [**Matrix3x2F**](/windows/desktop/api/d2d1helper/nl-d2d1helper-matrix3x2f) class provides the static methods shown in the following table.</span></span> <span data-ttu-id="e9c52-168">В этом примере столбец таблицы содержит ссылки на разделы с инструкциями, демонстрирующими использование каждого метода преобразования.</span><span class="sxs-lookup"><span data-stu-id="e9c52-168">The Example column of the table contains links to the how-to topics that demonstrate how to use each transformation method.</span></span>



| <span data-ttu-id="e9c52-169">Метод</span><span class="sxs-lookup"><span data-stu-id="e9c52-169">Method</span></span>                                                                   | <span data-ttu-id="e9c52-170">Описание</span><span class="sxs-lookup"><span data-stu-id="e9c52-170">Description</span></span>                                                                                                     | <span data-ttu-id="e9c52-171">Пример</span><span class="sxs-lookup"><span data-stu-id="e9c52-171">Example</span></span>                                            | <span data-ttu-id="e9c52-172">Иллюстрация</span><span class="sxs-lookup"><span data-stu-id="e9c52-172">Illustration</span></span>                                                                                                                            |
|--------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------|----------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="e9c52-173">**matrix3x2f:: вращение**</span><span class="sxs-lookup"><span data-stu-id="e9c52-173">**matrix3x2f::rotate**</span></span>](/windows/win32/api/d2d1helper/nf-d2d1helper-matrix3x2f-rotation)                          | <span data-ttu-id="e9c52-174">создает преобразование поворота с заданным углом и Центральной точкой.</span><span class="sxs-lookup"><span data-stu-id="e9c52-174">creates a rotation transformation that has the specified angle and center point.</span></span>                                | [<span data-ttu-id="e9c52-175">Поворот объекта</span><span class="sxs-lookup"><span data-stu-id="e9c52-175">how to rotate an object</span></span>](how-to-rotate.md)       | ![Иллюстрация квадрата, повернутого на 45 градусов по часовой стрелке относительно центра исходного квадрата](images/rotate-ovw.png)                 |
| <span data-ttu-id="e9c52-177">[**matrix3x2f:: Scale**](/windows/win32/api/d2d1helper/nf-d2d1helper-matrix3x2f-scale(d2d1_size_f_d2d1_point_2f))</span><span class="sxs-lookup"><span data-stu-id="e9c52-177">[**matrix3x2f::scale**](/windows/win32/api/d2d1helper/nf-d2d1helper-matrix3x2f-scale(d2d1_size_f_d2d1_point_2f))</span></span> | <span data-ttu-id="e9c52-178">создает преобразование шкалы с указанными коэффициентами масштабирования и Центральной точкой.</span><span class="sxs-lookup"><span data-stu-id="e9c52-178">creates a scale transformation that has the specified scale factors and center point.</span></span>                           | [<span data-ttu-id="e9c52-179">Масштабирование объекта</span><span class="sxs-lookup"><span data-stu-id="e9c52-179">how to scale an object</span></span>](how-to-scale.md)         | ![Иллюстрация квадрата с масштабированием 130%](images/scale-ovw.png)                                                                           |
| [<span data-ttu-id="e9c52-181">**matrix3x2f:: асимметрия**</span><span class="sxs-lookup"><span data-stu-id="e9c52-181">**matrix3x2f::skew**</span></span>](/windows/win32/api/d2d1helper/nf-d2d1helper-matrix3x2f-skew)                              | <span data-ttu-id="e9c52-182">создает преобразование «наклон» с заданными значениями осей x и y и центральной точки.</span><span class="sxs-lookup"><span data-stu-id="e9c52-182">creates a skew transformation that has the specified x-axis and y-axis values and center point.</span></span>                 | [<span data-ttu-id="e9c52-183">как наклон объекта</span><span class="sxs-lookup"><span data-stu-id="e9c52-183">how to skew an object</span></span>](how-to-skew.md)           | ![Иллюстрация квадратно наклоненного 30 градусов против часовой стрелки от оси y](images/skew-ovw.png)                                     |
| <span data-ttu-id="e9c52-185">[**matrix3x2f:: Translation**](/windows/win32/api/d2d1helper/nf-d2d1helper-matrix3x2f-translation(d2d1_size_f))</span><span class="sxs-lookup"><span data-stu-id="e9c52-185">[**matrix3x2f::translation**](/windows/win32/api/d2d1helper/nf-d2d1helper-matrix3x2f-translation(d2d1_size_f))</span></span>                | <span data-ttu-id="e9c52-186">создает преобразование «Преобразование» и задает смещения в направлении оси x и оси y.</span><span class="sxs-lookup"><span data-stu-id="e9c52-186">creates a translation transformation and specifies the displacements in the direction of the x-axis and y-axis.</span></span> | [<span data-ttu-id="e9c52-187">преобразование объекта</span><span class="sxs-lookup"><span data-stu-id="e9c52-187">how to translate an object</span></span>](how-to-translate.md) | ![Иллюстрация квадрата, перемещенного на 20 единиц вдоль положительной оси x и 10 единиц вдоль положительной оси y](images/translation-ovw.png) |



 

## <a name="rendering-target-transforms"></a><span data-ttu-id="e9c52-189">Преобразование целевых объектов отрисовки</span><span class="sxs-lookup"><span data-stu-id="e9c52-189">Rendering Target Transforms</span></span>

<span data-ttu-id="e9c52-190">Целевой объект отрисовки — это ресурс, который наследует от интерфейса [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) .</span><span class="sxs-lookup"><span data-stu-id="e9c52-190">A render target is a resource that inherits from the [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) interface.</span></span> <span data-ttu-id="e9c52-191">Он создает ресурсы для рисования и выполнения фактических операций рисования.</span><span class="sxs-lookup"><span data-stu-id="e9c52-191">It creates resources for drawing and performs actual drawing operations.</span></span> <span data-ttu-id="e9c52-192">Он также предоставляет методы для преобразования пространства координат.</span><span class="sxs-lookup"><span data-stu-id="e9c52-192">It also provides methods for transforming the coordinate space.</span></span> <span data-ttu-id="e9c52-193">Можно вызвать метод [**ID2D1RenderTarget:: сеттрансформ**](id2d1rendertarget-settransform.md) , чтобы применить указанное преобразование к целевому объекту прорисовки.</span><span class="sxs-lookup"><span data-stu-id="e9c52-193">You can call the [**ID2D1RenderTarget::SetTransform**](id2d1rendertarget-settransform.md) method to apply the specified transform to the render target.</span></span> <span data-ttu-id="e9c52-194">Все последующие операции рисования происходят в преобразованном пространстве.</span><span class="sxs-lookup"><span data-stu-id="e9c52-194">All subsequent drawing operations occur in the transformed space.</span></span>

<span data-ttu-id="e9c52-195">Для отображения содержимого используйте методы рисования целевого объекта рендеринга.</span><span class="sxs-lookup"><span data-stu-id="e9c52-195">To render content, use the render target's drawing methods.</span></span> <span data-ttu-id="e9c52-196">Перед началом рисования вызовите метод [**бегиндрав**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-begindraw) .</span><span class="sxs-lookup"><span data-stu-id="e9c52-196">Before you begin drawing, call the [**BeginDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-begindraw) method.</span></span> <span data-ttu-id="e9c52-197">Чтобы завершить отрисовку содержимого, вызовите метод [**EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw) .</span><span class="sxs-lookup"><span data-stu-id="e9c52-197">To finish rendering content, call the [**EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw) method.</span></span> <span data-ttu-id="e9c52-198">Пример см. в разделе [применение нескольких преобразований к объекту](how-to-apply-multiple-transforms.md).</span><span class="sxs-lookup"><span data-stu-id="e9c52-198">For an example, see [How to Apply Multiple Transforms to an Object](how-to-apply-multiple-transforms.md).</span></span>

## <a name="brush-transforms"></a><span data-ttu-id="e9c52-199">Преобразования кистей</span><span class="sxs-lookup"><span data-stu-id="e9c52-199">Brush Transforms</span></span>

<span data-ttu-id="e9c52-200">Можно настроить преобразование на кисти, вызвав [**сеттрансформ**](/windows/win32/api/d2d1/nf-d2d1-id2d1brush-settransform(constd2d1_matrix_3x2_f_)).</span><span class="sxs-lookup"><span data-stu-id="e9c52-200">You can adjust the transform on the brush by calling [**SetTransform**](/windows/win32/api/d2d1/nf-d2d1-id2d1brush-settransform(constd2d1_matrix_3x2_f_)).</span></span> <span data-ttu-id="e9c52-201">Для этого преобразования можно представить себе кисть как большую часть бумаги и различные примитивы отрисовки (текст, геометрия, прямоугольник и т. д.) в качестве наборов элементов.</span><span class="sxs-lookup"><span data-stu-id="e9c52-201">For this transform, you can think of the brush as a large piece of paper and of the different rendering primitives (text, geometry, rectangle and so on) as stencils.</span></span> <span data-ttu-id="e9c52-202">При настройке преобразования кисти это так же, как при перемещении большой части бумаги под трафаретом без изменения позиции самого набора элементов.</span><span class="sxs-lookup"><span data-stu-id="e9c52-202">When you adjust the brush transform, it is as if you were sliding the large piece of paper underneath the stencil, without changing the position of the stencil itself.</span></span> <span data-ttu-id="e9c52-203">Этот метод можно использовать для плавного исчезновения текста с желтого на черный в трехмерном пространстве.</span><span class="sxs-lookup"><span data-stu-id="e9c52-203">You can use this technique to make the text fade from yellow to black away into 3D space.</span></span>

<span data-ttu-id="e9c52-204">Когда преобразование «кисть» является преобразованием «идентификация», кисти отображаются в том же пространстве координат, что и целевой объект рендеринга, в котором они рисуются.</span><span class="sxs-lookup"><span data-stu-id="e9c52-204">When the brush transform is the identity transform, brushes appear in the same coordinate space as the render target in which they are drawn.</span></span> <span data-ttu-id="e9c52-205">Преобразование «кисть» позволяет вызывающему объекту изменить способ, которым координаты кисти сопоставляются с этим пространством.</span><span class="sxs-lookup"><span data-stu-id="e9c52-205">The brush transform enables a caller to alter how brush coordinates map to this space.</span></span>

<span data-ttu-id="e9c52-206">Пространство кисти указано по-разному в Direct2D, чем в Windows Presentation Foundation (WPF).</span><span class="sxs-lookup"><span data-stu-id="e9c52-206">The brush space is specified differently in Direct2D than in Windows Presentation Foundation (WPF).</span></span> <span data-ttu-id="e9c52-207">В Direct2D пространство кисти не связано с рисуемым объектом, а является текущей системой координат целевого объекта отрисовки, которая преобразуется с помощью преобразования кисти, если таковое имеется.</span><span class="sxs-lookup"><span data-stu-id="e9c52-207">In Direct2D, the brush space is not relative to the object being drawn, but rather is the current coordinate system of the render target, transformed by the brush transform, if there is one.</span></span> <span data-ttu-id="e9c52-208">Чтобы кисть заполнила объект как выполненный в WPF, необходимо перевести источник пространства кисти в левый верхний угол ограничивающего прямоугольника объекта, а затем масштабировать пространство кисти таким образом, чтобы базовый элемент мозаики заполнил ограничивающий прямоугольник объекта.</span><span class="sxs-lookup"><span data-stu-id="e9c52-208">To have the brush fill an object as was done in WPF, you must translate the brush space origin to the top-left corner of the object's bounding box, and then scale the brush space so that the base tile fills the bounding box of the object.</span></span>

<span data-ttu-id="e9c52-209">Дополнительные сведения о преобразованиях кистей см. в разделе [Общие сведения о Direct2D Brush](direct2d-brushes-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e9c52-209">For more information about brush transforms, see [Direct2D Brushes Overview](direct2d-brushes-overview.md).</span></span>

## <a name="geometry-transforms"></a><span data-ttu-id="e9c52-210">Преобразования геометрии</span><span class="sxs-lookup"><span data-stu-id="e9c52-210">Geometry Transforms</span></span>

<span data-ttu-id="e9c52-211">При масштабировании, перемещении, преобразовании или отклонении геометрических объектов можно напрямую применить преобразование к определенной геометрии, а не к преобразованию целевого объекта прорисовки, которое повлияет на весь экран.</span><span class="sxs-lookup"><span data-stu-id="e9c52-211">When you scale, move, translate, or skew geometries, you can directly apply a transform to a specific geometry, not to a render target transform that would affect the entire screen.</span></span> <span data-ttu-id="e9c52-212">Преобразование целевого объекта прорисовки обычно влияет на штрих и заливку геометрии.</span><span class="sxs-lookup"><span data-stu-id="e9c52-212">A render target transform generally affects the stroke and fill of a geometry.</span></span> <span data-ttu-id="e9c52-213">В отличие от этого, геометрическое преобразование влияет только на заливку геометрии, так как преобразование применяется к геометрии перед обводкой.</span><span class="sxs-lookup"><span data-stu-id="e9c52-213">By contrast, a geometry transform only affects the fill of a geometry, because the transform is applied to a geometry before it is stroked.</span></span>

> [!Note]  
> <span data-ttu-id="e9c52-214">Начиная с Windows 8, преобразование «мир» не влияет на штрих, если для параметра тип обводки задано значение D2D1 обводки [**\_ \_ \_ \_ фиксированная**](/windows/desktop/api/D2d1_1/ne-d2d1_1-d2d1_stroke_transform_type) или [**D2D1 \_ обводки « \_ \_ тип преобразования \_**](/windows/desktop/api/D2d1_1/ne-d2d1_1-d2d1_stroke_transform_type)».</span><span class="sxs-lookup"><span data-stu-id="e9c52-214">Starting with Windows 8, the world transform doesn't affect the stroke if you set the stroke type to [**D2D1\_STROKE\_TRANSFORM\_TYPE\_FIXED**](/windows/desktop/api/D2d1_1/ne-d2d1_1-d2d1_stroke_transform_type) or [**D2D1\_STROKE\_TRANSFORM\_TYPE\_HAIRLINE**](/windows/desktop/api/D2d1_1/ne-d2d1_1-d2d1_stroke_transform_type).</span></span>

 

<span data-ttu-id="e9c52-215">Можно настроить преобразование для геометрии, вызвав [**ID2D1Factory:: креатетрансформеджеометри**](/previous-versions/windows/desktop/legacy/dd371304(v=vs.85)) , чтобы создать объект [**ID2D1TransformedGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1transformedgeometry) .</span><span class="sxs-lookup"><span data-stu-id="e9c52-215">You can adjust the transform on a geometry by calling [**ID2D1Factory::CreateTransformedGeometry**](/previous-versions/windows/desktop/legacy/dd371304(v=vs.85)) to create an [**ID2D1TransformedGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1transformedgeometry) object.</span></span> <span data-ttu-id="e9c52-216">Дополнительные сведения о преобразованиях геометрии см. в разделе [Общие сведения о геометрических Direct2Dях](direct2d-geometries-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e9c52-216">For more information about geometry transforms, see [Direct2D Geometries Overview](direct2d-geometries-overview.md).</span></span>

## <a name="how-a-render-target-transform-affects-clips"></a><span data-ttu-id="e9c52-217">Влияние преобразования целевого объекта прорисовки на клипы</span><span class="sxs-lookup"><span data-stu-id="e9c52-217">How a Render Target Transform Affects Clips</span></span>

<span data-ttu-id="e9c52-218">Преобразование в целевом объекте прорисовки влияет на то, как вычисляются ограничивающие прямоугольники для вырезок, выданных по осям.</span><span class="sxs-lookup"><span data-stu-id="e9c52-218">The transform on a render target affects how the bounding box of an axis-aligned clip is computed.</span></span> <span data-ttu-id="e9c52-219">При вызове [**пушаксисалигнедклип**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-pushaxisalignedclip(constd2d1_rect_f__d2d1_antialias_mode)) параметр *клипрект* преобразуется в соответствии с текущим мировым преобразованием, заданным для целевого объекта отрисовки.</span><span class="sxs-lookup"><span data-stu-id="e9c52-219">When the [**PushAxisAlignedClip**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-pushaxisalignedclip(constd2d1_rect_f__d2d1_antialias_mode)) is called, the *clipRect* parameter is transformed by the current world transform that is set on the render target.</span></span> <span data-ttu-id="e9c52-220">После применения преобразования к *клипрект* вычисление ограничивающего прямоугольника для *клипрект* вычисляются по осям.</span><span class="sxs-lookup"><span data-stu-id="e9c52-220">After the transform is applied to the *clipRect*, the axis-aligned bounding box for the *clipRect* is computed.</span></span> <span data-ttu-id="e9c52-221">Для повышения эффективности содержимое обрезается по этому ограничивающему прямоугольнику по оси, а не к первоначально переданному *клипрект* .</span><span class="sxs-lookup"><span data-stu-id="e9c52-221">For efficiency, the contents are clipped to this axis-aligned bounding box and not to the original *clipRect* that is passed in.</span></span> <span data-ttu-id="e9c52-222">На следующих диаграммах показано, как преобразование «вращение» применяется к цели рендеринга, результирующему *клипрект* и вычисляемому ограничивающему прямоугольнику с масштабированием по осям.</span><span class="sxs-lookup"><span data-stu-id="e9c52-222">The following diagrams show how a rotation transform is applied to the render target, the resulting *clipRect*, and a calculated axis-aligned bounding box.</span></span>

1.  <span data-ttu-id="e9c52-223">Предположим, что прямоугольник на следующем рисунке является целевым объектом отрисовки, который выводится в пикселях экрана.</span><span class="sxs-lookup"><span data-stu-id="e9c52-223">Assume that the rectangle in the following illustration is a render target that is aligned to the screen pixels.</span></span>

    ![Иллюстрация прямоугольника (цель прорисовки)](images/pushaxisalignedclip-step1-rendertarget.png)

2.  <span data-ttu-id="e9c52-225">Примените преобразование вращения к целевому объекту прорисовки.</span><span class="sxs-lookup"><span data-stu-id="e9c52-225">Apply a rotation transform to the render target.</span></span> <span data-ttu-id="e9c52-226">На следующем рисунке черный прямоугольник представляет исходный целевой объект отрисовки, а Красный пунктирный прямоугольник представляет преобразованный целевой объект рендеринга.</span><span class="sxs-lookup"><span data-stu-id="e9c52-226">In the following illustration, the black rectangle represents the original render target and the red dashed rectangle represents the transformed render target.</span></span>

    ![Иллюстрация исходного прямоугольника и повернутого прямоугольника (преобразованного целевого объекта рендеринга)](images/pushaxisalignedclip-step2-transformed.png)

3.  <span data-ttu-id="e9c52-228">После вызова [**пушаксисалигнедклип**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-pushaxisalignedclip(constd2d1_rect_f__d2d1_antialias_mode)) к *клипрект* применяется преобразование поворота.</span><span class="sxs-lookup"><span data-stu-id="e9c52-228">After [**PushAxisAlignedClip**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-pushaxisalignedclip(constd2d1_rect_f__d2d1_antialias_mode)) is called, the rotation transform is applied to the *clipRect*.</span></span> <span data-ttu-id="e9c52-229">На следующем рисунке синий прямоугольник представляет преобразованный *клипрект*.</span><span class="sxs-lookup"><span data-stu-id="e9c52-229">In the following illustration, the blue rectangle represents the transformed *clipRect*.</span></span>

    ![Иллюстрация меньшего синего прямоугольника (клипрект) внутри повернутого прямоугольника (преобразованный целевой объект рендеринга)](images/pushaxisalignedclip-step3-cliprecttransformed.png)

4.  <span data-ttu-id="e9c52-231">Вычисляется ограничивающий прямоугольник, ориентированный по осям.</span><span class="sxs-lookup"><span data-stu-id="e9c52-231">The axis-aligned bounding box is calculated.</span></span> <span data-ttu-id="e9c52-232">На приведенном ниже рисунке зеленый пунктирный прямоугольник представляет ограничивающее поле.</span><span class="sxs-lookup"><span data-stu-id="e9c52-232">In the following illustration, the green dashed rectangle represents the bounding box.</span></span> <span data-ttu-id="e9c52-233">Все содержимое обрезается по этому ограничивающему прямоугольнику, ориентированному на оси.</span><span class="sxs-lookup"><span data-stu-id="e9c52-233">All contents are clipped to this axis-aligned bounding box.</span></span>

    ![Иллюстрация зеленой ограничивающей рамки на маленьком синем прямоугольнике (клипрект)](images/pushaxisalignedclip-step4-boundingbox.png)

## <a name="summary"></a><span data-ttu-id="e9c52-235">Итоги</span><span class="sxs-lookup"><span data-stu-id="e9c52-235">Summary</span></span>

<span data-ttu-id="e9c52-236">Direct2D упрощает преобразование двумерных объектов с упрощенными пространствами координат и связанными классами.</span><span class="sxs-lookup"><span data-stu-id="e9c52-236">Direct2D makes it easy to transform two-dimensional objects with simplified coordinate spaces and related classes.</span></span> <span data-ttu-id="e9c52-237">Используя различные типы преобразований, можно переводить, поворачивать, отклонять и масштабировать объекты для достижения множества впечатляющих визуальных эффектов.</span><span class="sxs-lookup"><span data-stu-id="e9c52-237">By using various types of transforms, you can translate, rotate, skew, and scale your objects to achieve many impressive visual effects.</span></span>

## <a name="related-topics"></a><span data-ttu-id="e9c52-238">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="e9c52-238">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e9c52-239">Справочник по Direct2D</span><span class="sxs-lookup"><span data-stu-id="e9c52-239">Direct2D Reference</span></span>](reference.md)
</dt> </dl>

 

 