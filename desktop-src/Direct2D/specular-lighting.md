---
title: Эффект пятна отраженного освещения
description: Используйте рельефное освещение, чтобы создать изображение, которое отображается как отражающая поверхность, в которой источник света ограничен направленным конусом света.
ms.assetid: B6E24036-1548-4B9E-A8FE-8B87D4DBF97A
keywords:
- освещение в плашечных светах
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b9edc4c75eaa17369ba0d0d9f1838d8857053def9aaab3dacceb8bf761b9c04c
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120000409"
---
# <a name="spot-specular-lighting-effect"></a>Эффект пятна отраженного освещения

Используйте рельефное освещение, чтобы создать изображение, которое отображается как отражающая поверхность, в которой источник света ограничен направленным конусом света. Этот результат использует альфа-канал как карту высоты и включает изображение с источником точечного света.

Цвет точечного рисунка выходных данных — это результат светлого цвета, светлой координаты, направления конуса и геометрии поверхности в соответствии с отраженной частью модели освещения по методу Фонга. Вывод альфа-канала для каждого пикселя с отраженным освещением является максимальным значением красного, зеленого и синего каналов для этого пикселя.

Идентификатором CLSID для этого действия является CLSID \_ D2D1SpotSpecular.

-   [Пример изображения](#example-image)
-   [Источник источника освещения](#spot-light-source)
-   [Свойства эффектов](#effect-properties)
-   [Режимы масштабирования](#scale-modes)
-   [Требования](#requirements)
-   [Связанные темы](#related-topics)

## <a name="example-image"></a>Пример изображения

В этом примере показаны входные и выходные изображения для эффектов освещения плашечного отражения.

![снимок экрана примера действия.](images/spot-spec-example.png)

Отраженный свет относится к светлому, который отражается в определенном направлении.

![Схема векторов, используемых для каклуате вывода отраженного освещения для точечного рисунка.](images/point-spec-reflected1.png)

Этот результат вычисляет итоговые значения в пикселах, используя следующие формулы:

![выводится пиксельные уравнения.](images/spot-formula1.png)

where

![определения переменных.](images/spot-formula2.png)

## <a name="spot-light-source"></a>Источник источника освещения

Источник «плашка» порождает освещение в определенном направлении и не создает освещение за пределами конуса.

Источник «плашка» рассчитывает светло-вектор L, а «половина» вектора «H» точно так же, как и [отраженный](point-specular.md) результат.

Этот результат вычисляет светло-цвет L<sub>r</sub>, l<sub>g</sub>, l<sub>b</sub>в качестве функции расположения источника освещения, как показано в уравнениях здесь:

![Формула для источника "источник освещения"](images/spot-formula3.png)

Вектор ![значок светлого вектора.](images/spot-mathchar-l.png) определяется этими уравнениями:

![уравнение: Vector](images/spot-formula4.png)

Вектор ![символ вектора t](images/spot-mathchar-t.png) определяется этими уравнениями:

![уравнение: вектор 2](images/spot-formula5.png)

## <a name="effect-properties"></a>Свойства эффектов



| Отображаемое имя и перечисление индекса                                                        | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| лигхтпоситион<br/> D2D1 \_ спотспекулар \_ prop, \_ светлое \_ расположение<br/>             | Светлое расположение источника освещения точки. Свойство является D2D1 \_ вектором \_ 3F, определенным как (x, y, z). Единицы измерения находятся в аппаратно-независимых пикселях (DIP) и не ограничены. Тип — D2D1 \_ vector \_ 3F.<br/> Значение по умолчанию — {0.0 f, 0,0 f, 0,0 f}.<br/>                                                                                                                                                                                                              |
| поинтсат<br/> D2D1 \_ спотспекулар " \_ prop \_ points \_ at"<br/>                       | Где направлено освещение. Свойство предоставляется как D2D1 \_ vector \_ 3F с (x, y, z). Единицы измерения находятся в DIP, а значения не ограничены. Тип — D2D1 \_ vector \_ 3F.<br/> Значение по умолчанию — {0.0 f, 0,0 f, 0,0 f}.<br/>                                                                                                                                                                                                                                     |
| Фокус<br/> \_Фокус D2D1 спотспекулар \_ prop \_<br/>                               | Фокус на плашечном свете. Это свойство не имеет единицы и определено между 0 и 200. Тип — FLOAT.<br/> Значение по умолчанию — 1,0 f.<br/>                                                                                                                                                                                                                                                                                                                          |
| лимитингконеангле<br/> \_ \_ \_ \_ Ограничивающий \_ \_ угол D2D1ного отражения цвета<br/> | Угол конуса, который будет ограничивать область, в которой проецируется освещение. Освещение не проецируется за пределы конуса. Ограничивающий угол конуса является углом между направленной лампочкой осью (осью между свойствами *лигхтпоситион* и *поинтсат* ) и плашечным конусом. Это свойство определено в градусах и должно находиться в диапазоне от 0 до 90 градусов. Тип — FLOAT.<br/> Значение по умолчанию — 90.0 f.<br/>                                                               |
| спекуларекспонент<br/> \_ \_ \_ Отражающий показатель D2D1 спотспекулар Prop \_<br/>       | Экспонента для отраженного термина в уравнении по методу Фонга освещения. Большее значение соответствует более отражающей поверхности. Это значение не имеет единицы и должно находиться в диапазоне от 1,0 до 128. Тип — FLOAT.<br/> Значение по умолчанию — 1,0 f.<br/>                                                                                                                                                                                                                               |
| спекуларконстант<br/> D2D1 \_ спотспекулар \_ prop, \_ отражающая \_ константа<br/>       | Отношение отраженного отражения к входящему источнику. Значение является безмодульным и должно находиться в диапазоне от 0 до 10 000. Тип — FLOAT.<br/> Значение по умолчанию — 1,0 f.<br/>                                                                                                                                                                                                                                                                                                   |
| сурфацескале<br/> D2D1 \_ спотспекулар \_ , \_ \_ масштаб поверхности<br/>               | Коэффициент масштабирования в Z-направлении для создания карт высоты. Значение является безмодульным и должно находиться в диапазоне от 0 до 10 000. Тип — FLOAT.<br/> Значение по умолчанию — 1,0 f.<br/>                                                                                                                                                                                                                                                                                          |
| Color<br/> \_Цвет D2D1 \_ спотспекулар \_<br/>                               | Цвет входящего освещения. Это свойство представлено в виде вектора 3 (R, G, B) и используется для вычислений L<sub>R</sub>, l<sub>G</sub>, l<sub>B</sub>. Тип — D2D1 \_ vector \_ 3F.<br/> Значение по умолчанию — {1.0 f, 1.0 f, 1.0 f}.<br/>                                                                                                                                                                                                                                     |
| кернелунитленгс<br/> \_ \_ \_ \_ Длина единицы ядра D2D1 спотспекулар \_<br/>     | Размер элемента в ядре Собел, используемый для создания нормали поверхности в направлении X и Y. Это свойство сопоставляется со значениями DX и dy в градиенте Собел. Это свойство является D2D1 \_ вектором \_ 2f (длина единицы ядра X, длина единицы ядра Y) и определена в (DIP/единица ядра). В результате используется интерполяция билинейной для масштабирования растрового изображения в соответствии с размером элементов ядра. Тип — D2D1 \_ vector \_ 2F.<br/> Значение по умолчанию — {1.0 f, 1.0 f}.<br/> |
| ScaleMode<br/> \_ \_ \_ Режим масштабирования D2D1 спотспекулар \_<br/>                     | Режим интерполяции, который применяется для масштабирования изображения до соответствующей длины единицы ядра. Существует шесть режимов масштабирования, имеющих высокое качество и скорость. Дополнительные сведения см. в разделе [режимы масштабирования](#scale-modes) . <br/> Тип — D2D1 \_ спотспекулар ( \_ масштабируемый \_ режим).<br/> Значение по умолчанию — \_ D2D1 \_ спотспекулар \_ \_ линейный режим масштабирования.<br/>                                                                                                                             |



 

## <a name="scale-modes"></a>Режимы масштабирования



| Перечисление                                            | Описание                                                                                                                                                                                          |
|--------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_ \_ \_ \_ Ближайший соседний D2D1 спотспекулар режим масштабирования \_     | Выбирает ближайшую одиночную точку и использует ее. В этом режиме используется меньше времени на обработку, но выводится изображение самого низкого качества.                                                                           |
| \_ \_ \_ Линейный режим масштабирования D2D1 спотспекулар \_                | Использует выборку с четырьмя точками и линейную интерполяцию. В этом режиме выводится изображение с более высоким качеством, чем у ближайшего соседа.                                                                                   |
| D2D1 \_ спотспекулар \_ Scale \_ , \_ кубический режим                 | Использует 16-примерный ядро кубических для интерполяции. Этот режим использует наибольшее время обработки, но выводит изображение с более высоким качеством.                                                                        |
| D2D1 \_ спотспекулар \_ режим масштабирования с \_ \_ несколькими \_ образцами \_ | Использует 4 линейных образца в пределах одного пикселя для удобного сглаживания. Этот режим хорошо подходит для уменьшения масштаба по небольшим объемам на изображениях с небольшими пикселями.                                              |
| D2D1 \_ спотспекулар \_ режим масштабирования — \_ \_ анизотропная           | Использует анизотропную фильтрацию для выборки шаблона в соответствии с преобразованной формой точечного рисунка.                                                                                                     |
| \_ \_ \_ \_ \_ Высококачественное \_ кубический режим масштабирования D2D1 спотспекулар  | Использует высококачественное ядро кубического размера для выполнения предварительно довнскале образа, если довнскалинг участвует в матрице преобразования. Затем использует режим интерполяции кубических для окончательного вывода. |



 

> [!Note]  
> Если не выбрать режим, то по умолчанию применяется \_ режим МАСШТАБИРОВАНИЯ D2D1 спотспекулар \_ \_ \_ линейный.

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|--------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Минимальная версия сервера | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Заголовок                   | d2d1effects. h                                                                      |
| Библиотека                  | D2D1. lib, дксгуид. lib                                                               |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**ID2D1Effect**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1effect)
</dt> </dl>

 

