---
title: Direct2D политики обработки ошибок
description: В этом разделе описываются политики обработки ошибок Direct2D. В него входят следующие разделы.
ms.assetid: b5fa327a-a315-46fa-aa78-8a5733faae01
keywords:
- Direct2D, обработка ошибок
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8fc930e7ee9e5b73b5f676103f45ffe25e4d4e61
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103987794"
---
# <a name="direct2d-error-handling-policies"></a>Direct2D политики обработки ошибок

В этом разделе описываются политики обработки ошибок Direct2D. В него входят следующие разделы.

-   [Использование HRESULT](#use-of-hresult)
-   [Возвращаемое значение пакетных функций](#return-value-of-batched-functions)
-   [Недопустимые входные данные](#invalid-input)
    -   [Указатель вывода](#output-pointer)
    -   [Обязательный параметр](#required-parameter)
-   [NaN и плохо упорядоченные входные ПРЯМОУГОЛЬНИКи](#nan-and-poorly-ordered-input-rects)
    -   [NaN в качестве входных данных](#nan-as-input)
    -   [Плохо упорядоченные входные ПРЯМОУГОЛЬНИКи](#poorly-ordered-input-rects)

## <a name="use-of-hresult"></a>Использование HRESULT

Если функция не пакетирована и может иметь сбой во время выполнения, она должна возвращать **HRESULT** , чтобы указать на ошибку. Сбой во время выполнения — это любая ошибка, которую невозможно избежать во время разработки, например нехваткой памяти.

## <a name="return-value-of-batched-functions"></a>Возвращаемое значение пакетных функций

Пакетные функции в Direct2D — это функции, которые обрабатываются как единое целое при вызове [**EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw) или [**Close**](/windows/win32/api/d2d1/nf-d2d1-id2d1simplifiedgeometrysink-close) . Они являются командами рисования между [**бегиндрав**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-begindraw) и **EndDraw** или командами в [**жеометрисинк**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink). Для этих функций в момент завершения пакета выводятся ошибки. Ошибка возвращается после **EndDraw** для команд рисования и после **закрытия** для **жеометрисинк**.

Рендертаржетс прерывать прорисовку, если задано состояние ошибки, но приложение может вызвать [**flush**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-flush) для сброса состояния ошибки и возобновления рисования.

Функции **Get** и **Set** не имеют возвращаемого значения. Однако если функция **набора** содержит недопустимые входные данные, отладочный слой создает сообщение. В этом случае состояние ошибки не задано и функция **Set** не выполняет никаких действий.

## <a name="invalid-input"></a>Недопустимые входные данные

Direct2D разыменование указателей вывода и обязательных параметров, которые приводят к нарушениям прав доступа, если указатели являются недопустимыми или **равны NULL**.

### <a name="output-pointer"></a>Указатель вывода

Direct2D разыменование выходного указателя и присваивает его **значению NULL** сразу после ввода функции. Это вызывает нарушение прав доступа, если вызывающий объект передает значение **null** в качестве указателя на возвращаемое значение. Эта политика также применяется к массивам указателей. Для других выходных параметров, таких как структура, разыменование происходит позже, а также приводит к нарушению прав доступа. Однако существуют некоторые методы с необязательными выходными указателями (т. е. [**EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw), [**flush**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-flush)), которые не вызывают нарушение прав доступа.

### <a name="required-parameter"></a>Обязательный параметр

Если **значение NULL** передается любой функции, для которой требуется допустимое значение, функция разыменование неверного указателя на ранних этапах, что приводит к нарушению прав доступа. Для необязательных входных параметров значение **null** является допустимым значением, что приводит к некоторым разумным значениям по умолчанию.

## <a name="nan-and-poorly-ordered-input-rects"></a>NaN и плохо упорядоченные входные ПРЯМОУГОЛЬНИКи

В Direct2D значение NaN считается допустимым входным и плохо упорядоченным входным ПРЯМОУГОЛЬНИКом.

### <a name="nan-as-input"></a>NaN в качестве входных данных

NaN считается допустимым входом, хотя обычно он приводит к примитиву, содержащему нерисовку NaN. API Direct2D не предоставляет явную фильтрацию NaN для проверки входных данных.

### <a name="poorly-ordered-input-rects"></a>Плохо упорядоченные входные ПРЯМОУГОЛЬНИКи

Плохо упорядоченные входные ПРЯМОУГОЛЬНИКи сортируются так, чтобы они правильно указали верхние, левые и нижние углы. Для выходных данных пустые прямоугольники выглядят следующим образом: {Infinity, Infinity, Флоатмакс, Флоатмакс}.

 

 