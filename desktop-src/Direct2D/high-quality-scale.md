---
title: Эффект масштабирования
description: 'Используйте этот результат для увеличения или уменьшения масштаба изображения. Этот результат включает шесть режимов масштабирования: ближайший соседний, линейный, кубический, многопримерный линейный, анизотропный и высококачественный кубический.'
ms.assetid: 99DFA8DB-384B-4F64-90A2-0D3D7E1ACF27
keywords:
- масштабный результат
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d3a28e71dfb552a35bf138c245a82937bd600e61acd8b4a82b42cbc8d9d66a65
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118003669"
---
# <a name="scale-effect"></a>Эффект масштабирования

Используйте этот результат для увеличения или уменьшения масштаба изображения. Этот результат включает шесть режимов масштабирования: ближайший соседний, линейный, кубический, многопримерный линейный, анизотропный и высококачественный кубический уровень.

Идентификатором CLSID для этого действия является CLSID \_ D2D1Scale.

-   [Пример изображения](#example-image)
-   [Свойства эффектов](#effect-properties)
    -   [Режимы границ](#border-modes)
-   [Режимы интерполяции](#interpolation-modes)
-   [Битовая карта вывода](#output-bitmap)
-   [Требования](#requirements)
-   [Связанные темы](#related-topics)

## <a name="example-image"></a>Пример изображения

В этом примере показано масштабирование эффектов масштабирования в два раза больше входных данных и обрезки до исходного размера.



| До                                                     |
|------------------------------------------------------------|
| ![изображение перед результатом.](images/default-before.jpg) |
| После                                                      |
| ![изображение после преобразования.](images/22-scale.png)     |



 


```C++
ComPtr<ID2D1Effect> scaleEffect;
m_d2dContext->CreateEffect(CLSID_D2D1Scale, &scaleEffect);

scaleEffect->SetInput(0, bitmap);

scaleEffect->SetValue(D2D1_SCALE_PROP_CENTER_POINT, D2D1::Vector2F(256.0f, 192.0f));
scaleEffect->SetValue(D2D1_SCALE_PROP_SCALE, D2D1::Vector2F(2.0f, 2.0f));

m_d2dContext->BeginDraw();
m_d2dContext->DrawImage(scaleEffect.Get());
m_d2dContext->EndDraw();
```



## <a name="effect-properties"></a>Свойства эффектов



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Отображаемое имя и перечисление индекса</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Масштабирование<br/> D2D1_SCALE_PROP_SCALE<br/></td>
<td>Величина масштаба в направлении X и Y как отношение размера выходных данных к размеру входных данных. Это свойство имеет D2D1_VECTOR_2Fdefined как: (Scale X, Y). Значения масштаба FLOAT, без единицы и должны быть положительными или равными 0.<br/> Тип — D2D1_VECTOR_2F.<br/> Значение по умолчанию — {1.0 f, 1.0 f}.<br/></td>
</tr>
<tr class="even">
<td>CenterPoint (Центральная точка)<br/> D2D1_SCALE_PROP_CENTER_POINT<br/></td>
<td>Центральная точка масштабирования изображения. Это свойство является D2D1_VECTOR_2F, определенным как: (точка X, точка Y). Единицы измерения — DIP.<br/> Используйте свойство центральной точки для масштабирования вокруг точки, отличной от верхнего левого угла.<br/> Тип — D2D1_VECTOR_2F.<br/> Значение по умолчанию — {0.0 f, 0,0 f}.<br/></td>
</tr>
<tr class="odd">
<td>бордермоде<br/> D2D1_SCALE_PROP_BORDER_MODE<br/></td>
<td>Режим, используемый для вычисления границы изображения: Soft или Hard. Дополнительные сведения см. в разделе <a href="#border-modes">режимы границ</a> . <br/> Тип — D2D1_BORDER_MODE.<br/> Значение по умолчанию — D2D1_BORDER_MODE_SOFT.<br/></td>
</tr>
<tr class="even">
<td>Четкость<br/> D2D1_SCALE_PROP_SHARPNESS<br/></td>
<td>В режиме интерполяции высокого качества кубический уровень резкости фильтра масштабирования в виде числа с плавающей запятой в диапазоне от 0 до 1. Значения являются безмодульными. Резкость можно использовать для настройки качества изображения при уменьшении масштаба изображения.<br/> Коэффициент резкости влияет на форму ядра. Чем выше коэффициент резкости, тем меньше ядро.<br/>
<blockquote>
[!Note]<br />
Это свойство влияет только на режим интерполяции высокого качества.
</blockquote>
<br/> Тип — FLOAT.<br/> Значение по умолчанию — 0,0 f.<br/></td>
</tr>
<tr class="odd">
<td>интерполатионмоде<br/> D2D1_SCALE_PROP_INTERPOLATION_MODE<br/></td>
<td>Режим интерполяции, который применяется для масштабирования изображения. Существует 6 режимов масштабирования, которые имеют высокое качество и скорость. Дополнительные сведения см. в разделе <a href="#interpolation-modes">режимы интерполяции</a> . <br/> Тип — D2D1_SCALE_INTERPOLATION_MODE.<br/> Значение по умолчанию — D2D1_SCALE_INTERPOLATION_MODE_LINEAR.<br/></td>
</tr>
</tbody>
</table>



 

### <a name="border-modes"></a>Режимы границ



| Имя                     | Описание                                                                                                                                                                                                                                                              |
|--------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_ \_ Мягкий режим границы \_ D2D1 | При применении ядра свертки к входному изображению применяются прозрачные черные пиксели для выборки за пределами входных данных. При этом создается мягкая сторона для изображения, а в процессе разворачивается точечный рисунок с размером ядра.<br/> |
| Жесткое D2D1 в \_ \_ режиме границы \_ | Этот результат расширяет входной образ с помощью преобразования границы зеркального типа для выборок за пределами входных данных. Размер выходного растрового изображения равен размеру входного точечного рисунка.<br/>                                                                       |



 

\`

## <a name="interpolation-modes"></a>Режимы интерполяции



| Перечисление                                             | Описание                                                                                                                                                                                          |
|---------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| D2D1 \_ \_ Режим интерполяции масштабирования, \_ \_ ближайший \_ сосед     | Выбирает ближайшую одиночную точку и использует ее. В этом режиме используется меньше времени на обработку, но выводится изображение самого низкого качества.                                                                           |
| \_ \_ Линейный режим интерполяции D2D1 Scale \_ \_                | Использует выборку с четырьмя точками и линейную интерполяцию. Этот режим использует больше времени на обработку, чем ближайший соседний режим, но выводит изображение более высокого качества.                                           |
| D2D1 \_ \_ Режим интерполяции масштабирования, \_ \_ кубический                 | Использует 16-примерный ядро кубических для интерполяции. Этот режим использует наибольшее время обработки, но выводит изображение с более высоким качеством.                                                                        |
| D2D1 \_ \_ Режим интерполяции \_ с \_ несколькими \_ образцами \_ | Использует 4 линейных образца в пределах одного пикселя для удобного сглаживания. Этот режим хорошо подходит для уменьшения масштаба по небольшим объемам на изображениях с небольшими пикселями.                                              |
| D2D1 \_ \_ Режим интерполяции масштабирования — \_ \_ анизотропная           | Использует анизотропную фильтрацию для выборки шаблона в соответствии с преобразованной формой точечного рисунка.                                                                                                     |
| D2D1 \_ \_ Режим интерполяции \_ с \_ высоким \_ качеством в \_ кубических масштабах  | Использует высококачественное ядро кубического размера для выполнения предварительно довнскале образа, если довнскалинг участвует в матрице преобразования. Затем использует режим интерполяции кубических для окончательного вывода. |



 

> [!Note]  
> Если не выбрать режим, по умолчанию применяется \_ \_ Режим интерполяции D2D1 Scale \_ \_ линейный.

 

> [!Note]  
> В режиме анизотропного масштабирования создается MIP-карты при масштабировании, однако если для свойства **кэширования** задано значение true для эффектов, вводимых в результате этого эффекта, MIP-карты не будет создаваться каждый раз для достаточного размера изображений.

 

## <a name="output-bitmap"></a>Битовая карта вывода

Расположение и размер выходного растрового изображения зависит от указанного коэффициента масштабирования и центральной точки.

Вы можете вычислить размер выходного растрового изображения с помощью этого уравнения:<dl> Битмапсизе? (ПКС) = масштабировать? \* Размер исходного растрового изображения? (DIP) \* (Усердпи/96)  
Битмапсизе<sub>y</sub>(пиксели) =<sub>масштаб</sub> \* исходного точечного<sub></sub> рисунка y (DIP) \* (усердпи/96)  
</dl>

Результат округляет доли пикселов до ближайшего целого пикселя.

Расположение точечного рисунка равно (0, 0) или значению свойства центральной точки.

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|--------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Минимальная версия сервера | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Header                   | d2d1effects. h                                                                      |
| Библиотека                  | D2D1. lib, дксгуид. lib                                                               |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**ID2D1Effect**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1effect)
</dt> </dl>

 

