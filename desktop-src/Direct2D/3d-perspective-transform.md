---
title: Эффект трехмерного преобразования перспективы
description: Используйте эффект преобразование Трехмерная перспектива для поворота изображения в 3 измерения, как при просмотре с расстояния.
ms.assetid: 0E1A940E-2DCA-4772-BB68-7E5EF5CEF833
keywords:
- трехмерный эффект преобразования перспективы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4ed2b1c5131319dd711d2c7802a0bfabceaaa32e
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "103892778"
---
# <a name="3d-perspective-transform-effect"></a>Эффект трехмерного преобразования перспективы

Используйте эффект преобразование Трехмерная перспектива для поворота изображения в 3 измерения, как при просмотре с расстояния.

Преобразование «Трехмерная перспектива» является более удобным, чем эффект трехмерного преобразования, но предоставляет только подмножество функциональных возможностей. Можно вычислить полную матрицу трехмерного преобразования и применить к изображению более произвольную матрицу преобразования, используя эффект [трехмерного преобразования](3d-transform.md) .

Идентификатором CLSID для этого действия является CLSID \_ D2D13DPerspectiveTransform.

-   [Пример изображения](#example-image)
-   [Свойства эффектов](#effect-properties)
-   [Режимы интерполяции](#interpolation-modes)
-   [Режимы границ](#border-modes)
-   [Битовая карта вывода](#output-bitmap)
-   [Требования](#requirements)
-   [См. также](#related-topics)

## <a name="example-image"></a>Пример изображения



| До                                                               |
|----------------------------------------------------------------------|
| ![изображение перед результатом.](images/default-before.jpg)           |
| После                                                                |
| ![изображение после этого действия.](images/23-3dperspectivetransform.png) |



 


```C++
ComPtr<ID2D1Effect> perspectiveTransformEffect;
m_d2dContext->CreateEffect(CLSID_D2D13DPerspectiveTransform, &perspectiveTransformEffect);

perspectiveTransformEffect->SetInput(0, bitmap);

perspectiveTransformEffect->SetValue(D2D1_3DPERSPECTIVETRANSFORM_PROP_PERSPECTIVE_ORIGIN, D2D1::Vector3F(0.0f, 192.0f, 0.0f));
perspectiveTransformEffect->SetValue(D2D1_3DPERSPECTIVETRANSFORM_PROP_ROTATION, D2D1::Vector3F(0.0f, 30.0f, 0.0f));

m_d2dContext->BeginDraw();
m_d2dContext->DrawImage(perspectiveTransformEffect.Get());
m_d2dContext->EndDraw();
```



## <a name="effect-properties"></a>Свойства эффектов



| Отображаемое имя и перечисление индекса                                                              | Описание                                                                                                                                                                                                                                                                                        |
|-------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| интерполатионмоде<br/> \_ \_ \_ Режим интерполяции D2D1 3DPERSPECTIVETRANSFORM Prop \_<br/> | Режим интерполяции, используемый в изображении в результате применения. Существует 5 режимов масштабирования, имеющих высокое качество и скорость.<br/> Тип — D2D1 \_ 3DPERSPECTIVETRANSFORM \_ Режим интерполяции \_ .<br/> Значение по умолчанию — D2D1 \_ 3DPERSPECTIVETRANSFORM \_ Режим интерполяции — \_ \_ линейный.<br/>              |
| бордермоде<br/> \_Режим границы D2D1 3DPERSPECTIVETRANSFORM " \_ prop" \_ \_<br/>               | Режим, используемый для вычисления границы изображения: Soft или Hard. Дополнительные сведения см. в разделе [режимы границ](https://www.bing.com/search?q=Border+modes) .<br/> Тип — D2D1 \_ границы \_ .<br/> Значение по умолчанию — D2D1 в \_ \_ режиме границы \_ .<br/>                                                              |
| Глубина<br/> \_Глубина D2D1 \_ 3DPERSPECTIVETRANSFORM \_<br/>                           | Расстояние от *перспективеоригин* до плоскости проекции. Значение, указанное в параметре DIP и, должно быть больше 0.<br/> Тип — FLOAT.<br/> Значение по умолчанию — 1000.0 f.<br/>                                                                                               |
| перспективеоригин<br/> \_ \_ \_ Источник перспективы D2D1 3DPERSPECTIVETRANSFORM \_ prop<br/> | Позиция X и Y средства просмотра в трехмерной сцене. Это свойство является D2D1 \_ вектором \_ 2F, определенным как: (точка X, точка Y). Единицы измерения — DIP.<br/> Значение Z задается с помощью свойства *Depth* .<br/> Тип — D2D1 \_ vector \_ 2F.<br/> Значение по умолчанию — {0.0 f, 0,0 f}.<br/> |
| локалоффсет<br/> \_ \_ \_ Локальное смещение D2D1 3DPERSPECTIVETRANSFORM Prop \_<br/>             | Преобразование, выполняемое этим действием перед поворотом плоскости проекции. Это свойство является D2D1 \_ вектором \_ 3F, определенным как: (X, Y, Z). Единицы измерения — DIP.<br/> Тип — D2D1 \_ vector \_ 3F.<br/> Значение по умолчанию — {0.0 f, 0,0 f, 0,0 f}.<br/>                                        |
| глобалоффсет<br/> \_ \_ \_ Глобальное смещение D2D1 3DPERSPECTIVETRANSFORM \_<br/>           | Перевод, который выполняет действие после поворота плоскости проекции. Это свойство является D2D1 \_ вектором \_ 3F, определенным как: (X, Y, Z). Единицы измерения — DIP.<br/> Тип — D2D1 \_ vector \_ 3F.<br/> Значение по умолчанию — {0.0 f, 0,0 f, 0,0 f}.<br/>                                         |
| ротатионоригин<br/> \_ \_ \_ Начало вращения D2D1 3DPERSPECTIVETRANSFORM \_ prop<br/>       | Центральная точка вращения, выполняемой действием. Это свойство является D2D1 \_ вектором \_ 3F, определенным как: (X, Y, Z). Единицы измерения — DIP.<br/> Тип — D2D1 \_ vector \_ 3F.<br/> Значение по умолчанию — {0.0 f, 0,0 f, 0,0 f}.<br/>                                                            |
| Поворот<br/> D2D1 \_ 3DPERSPECTIVETRANSFORM \_ prop \_<br/>                     | Угол поворота для каждой оси. Это свойство является D2D1 \_ вектором \_ 3F, определенным как: (X, Y, Z). Единицы измерения — в градусах.<br/> Тип — D2D1 \_ vector \_ 3F.<br/> Значение по умолчанию — {0.0 f, 0,0 f, 0,0 f}.<br/>                                                                         |



 

## <a name="interpolation-modes"></a>Режимы интерполяции



| Перечисление                                                              | Описание                                                                                                                                                |
|--------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_ \_ \_ \_ Ближайший сосед в режиме интерполяции D2D1 3DPERSPECTIVETRANSFORM \_     | Выбирает ближайшую одиночную точку и использует ее. В этом режиме используется меньше времени на обработку, но выводится изображение самого низкого качества.                                 |
| \_ \_ Линейный режим интерполяции D2D1 3DPERSPECTIVETRANSFORM \_ \_                | Использует выборку с четырьмя точками и линейную интерполяцию. Этот режим использует больше времени на обработку, чем ближайший соседний режим, но выводит изображение более высокого качества. |
| D2D1 \_ 3DPERSPECTIVETRANSFORM \_ Режим интерполяции ( \_ \_ кубический)                 | Использует 16-примерный ядро кубических для интерполяции. Этот режим использует наибольшее время обработки, но выводит изображение с более высоким качеством.                              |
| D2D1 \_ 3DPERSPECTIVETRANSFORM \_ Режим интерполяции — \_ \_ \_ многопримерная \_ линейная | Использует 4 линейных образца в пределах одного пикселя для удобного сглаживания. Этот режим хорошо подходит для уменьшения масштаба по небольшим объемам на изображениях с небольшими пикселями.    |
| D2D1 \_ 3DPERSPECTIVETRANSFORM \_ Режим интерполяции — \_ \_ анизотропная           | Использует анизотропную фильтрацию для выборки шаблона в соответствии с преобразованной формой точечного рисунка.                                                           |



 

> [!Note]  
> Если не выбрать режим, то по умолчанию будет применяться \_ \_ линейный режим интерполяции D2D1 3DPERSPECTIVETRANSFORM \_ \_ .

 

> [!Note]  
> В режиме анизотропного масштабирования создается MIP-карты при масштабировании, однако если для свойства **кэширования** задано значение true для эффектов, вводимых в результате этого эффекта, MIP-карты не будет создаваться каждый раз для достаточного размера изображений.

 

## <a name="border-modes"></a>Режимы границ



| Имя                     | Описание                                                                                                      |
|--------------------------|------------------------------------------------------------------------------------------------------------------|
| \_ \_ Мягкий режим границы \_ D2D1 | При интерполяции изображение получает прозрачные черные пиксели, что приводит к мягкому пограничным границе.<br/> |
| Жесткое D2D1 в \_ \_ режиме границы \_ | В результате выходные данные заменяются на размер входного изображения. <br/>                                         |



 

## <a name="output-bitmap"></a>Битовая карта вывода

Размер выходного растрового изображения зависит от матрицы преобразования, применяемой к изображению.

Этот результат выполняет операцию преобразования, а затем применяет ограничивающий прямоугольник вокруг результата. Битовая карта выходных данных — это размер ограничивающего прямоугольника.

## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента | Windows 8 и обновление платформы для \[ классических приложений Windows 7 \| приложения для Магазина Windows\] |
| Минимальная версия сервера | Windows 8 и обновление платформы для \[ классических приложений Windows 7 \| приложения для Магазина Windows\] |
| Header                   | d2d1effects. h                                                                      |
| Библиотека                  | D2D1. lib, дксгуид. lib                                                               |



 

## <a name="related-topics"></a>См. также

<dl> <dt>

[**ID2D1Effect**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1effect)
</dt> </dl>

 

