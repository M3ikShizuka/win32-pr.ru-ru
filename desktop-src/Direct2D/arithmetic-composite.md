---
title: Арифметический составной эффекты
description: Используйте арифметический составной результат для объединения двух изображений с взвешенной суммой пикселей из входных изображений.
ms.assetid: 6EC8CD61-5B51-4A8E-8A61-B291ABB5C5E0
keywords:
- Арифметический составной эффекты
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e45976d577299bda7dfcef9bf20eff4980cc67ac105cb14fa793065d7ce1857f
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119641972"
---
# <a name="arithmetic-composite-effect"></a>Арифметический составной эффекты

Используйте арифметический составной результат для объединения двух изображений с взвешенной суммой пикселей из входных изображений.

Идентификатором CLSID для этого действия является CLSID \_ D2D1ArithmeticComposite.

-   [Формула](#formula)
-   [Пример изображения](#example-image)
-   [Свойства эффектов](#effect-properties)
-   [Битовая карта вывода](#output-bitmap)
-   [Требования](#requirements)
-   [Связанные темы](#related-topics)

## <a name="formula"></a>Формула

Формула здесь используется для вычисления этого результата.

Выходное<sub>RGBA</sub> = \* исходное<sub></sub> \* место назначения<sub></sub> RGBA, целевые RGBA + C2 \* исходное<sub>RGBA</sub> + \* C4<sub></sub>

Где C1, C2, C3 и C4 — это коэффициенты, которые вы задаете.

Коэффициенты сопоставляются со значениями в D2D1 \_ векторной \_ 4F (x, y, z, w):

-   x = C1
-   y = C2
-   z = C3
-   w = C4

## <a name="example-image"></a>Пример изображения

Простой пример — добавить исходный и целевой Пиксели. В этом примере два прямоугольника с закругленными углами совмещены вместе. Исходный прямоугольник является синим, а назначение — красным.

Изображение здесь является выходным результатом арифметического составного воздействия с коэффициентами уравнения, установленными в значения.

-   C1 = 0
-   C2 = 1
-   C3 = 1
-   C4 = 0

![Пример изображения с двумя скругленными прямоугольниками такого же размера, которые перекрываются с помощью арифметического составного действия.](images/arithmetic-50-percent.png)

В результате добавляются значения пикселей для источника и назначения. Регионы, в которых прямоугольники не пересекаются со значениями RGBA, равны 0. Когда прямоугольники перекрываются, цвет является пурпурным, так как значения R и B равны максимуму.

Вот еще один пример изображения с кодом.



| До образа 1                                                             |
|----------------------------------------------------------------------------|
| ![Первое исходное изображение перед результатом.](images/default-before.jpg)    |
| До изображения 2                                                             |
| ![Второе изображение перед результатом.](images/4-arthimetic-composite2.jpg) |
| После                                                                      |
| ![изображение после преобразования.](images/4-arithmeticcomposite.png)        |



 


```C++
ComPtr<ID2D1Effect> arithmeticCompositeEffect;
m_d2dContext->CreateEffect(CLSID_D2D1ArithmeticComposite, &arithmeticCompositeEffect);

arithmeticCompositeEffect->SetInput(0, bitmap);
arithmeticCompositeEffect->SetInput(1, bitmapTwo);
arithmeticCompositeEffect->SetValue(D2D1_ARITHMETICCOMPOSITE_PROP_COEFFICIENTS, D2D1::Vector4F(0.0f, 0.5f, 0.5f, 0.0f));

m_d2dContext->BeginDraw();
m_d2dContext->DrawImage(arithmeticCompositeEffect.Get());
m_d2dContext->EndDraw();
```



## <a name="effect-properties"></a>Свойства эффектов



| Отображаемое имя и перечисление индекса                                               | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|----------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Коэффициенты<br/> \_ \_ Коэффициенты Prop арисметиккомпосите D2D1 \_<br/> | Коэффициенты для формулы, используемой для совмещения двух входных изображений. Коэффициенты — бесмодульный и неограниченный. Тип — D2D1 \_ vector \_ 4F.<br/> Значение по умолчанию — {1.0 f, 0,0 f, 0,0 f, 0,0 f}.<br/>                                                                                                                                                                                                                                 |
| клампаутпут<br/> \_ \_ \_ Выходные данные среза D2D1 арисметиккомпосите \_<br/> | В результате значения цвета заменяются значениями от 0 до 1, прежде чем результат передаст значения следующему результату в графе. <br/> Если присвоить этому параметру значение TRUE, то действие будет выполнять фиксацию значений. Если присвоить этому параметру значение FALSE, то эффект не будет выполнять фиксацию цветовых значений, но другие эффекты и поверхность вывода могут попытаться отразить значения, если они не имеют достаточно высокой точности.<br/> Тип — BOOL.<br/> Значение по умолчанию — FALSE.<br/> |



 

## <a name="output-bitmap"></a>Битовая карта вывода

Выходное растровое изображение зависит от значений коэффициента. Это возможные размеры выходного растрового изображения.

-   Если C1 является единственным ненулевым коэффициентом, то размер выходных данных является пересечением прямоугольников ввода.
-   Если значение C2 является единственным ненулевым коэффициентом, то размер выходных данных равен размеру исходного прямоугольника.
-   Если значение C3 является единственным ненулевым коэффициентом, то размер выходных данных равен размеру прямоугольника назначения.
-   Если все коэффициенты равны нулю, то размер выходных данных будет пустым прямоугольником.
-   Для всех остальных значений коэффициента выходным размером является объединение прямоугольников ввода.

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|--------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Минимальная версия сервера | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Заголовок                   | d2d1effects. h                                                                      |
| Библиотека                  | D2D1. lib, дксгуид. lib                                                               |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**ID2D1Effect**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1effect)
</dt> </dl>

 

