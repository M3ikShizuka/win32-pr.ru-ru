---
title: Эффект точечного отраженного освещения
description: Используйте эффекты освещения «точка-отражение», чтобы создать изображение, которое отображается как отражающая поверхность.
ms.assetid: 89E22FD0-BB7F-465F-A79C-056CA9F14F5D
keywords:
- результат освещения точки отражения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 355c573888604af8dfac443f4f53554a8a780071
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127162651"
---
# <a name="point-specular-lighting-effect"></a>Эффект точечного отраженного освещения

Используйте эффекты освещения «точка-отражение», чтобы создать изображение, которое отображается как отражающая поверхность. Этот результат использует альфа-канал изображения в качестве карту высоты и позиции источника света, который вы указываете, и вычисляет отражение и освещение в соответствии с отраженной частью модели освещения по методу Фонга.

Цвет точечного рисунка выходных данных является результатом светлого цвета, светлой и геометрической поверхности. Вывод альфа-канала для каждого пикселя с отраженным освещением является максимальным значением красного, зеленого и синего каналов для этого пикселя.

Идентификатором CLSID для этого действия является CLSID \_ D2D1PointSpecular.

-   [Пример изображения](#example-image)
-   [Источник освещения точки](#point-light-source)
-   [Таблица высоты и вектор нормали](#height-map-and-normal-vector)
-   [Константа и экспонента отраженного освещения](#specular-lighting-constant-and-exponent)
-   [Свойства эффектов](#effect-properties)
-   [Масштабирование режимов](#scales-modes)
-   [Requirements](#requirements)
-   [Связанные темы](#related-topics)

## <a name="example-image"></a>Пример изображения

В этом примере показаны входные и выходные изображения для эффектов освещения «точка-отражение».

![Пример снимка экрана, на котором показаны входные и выходные изображения для эффектов отраженного освещения точки.](images/point-spec-example.png)

Отраженный свет означает свет, который отражается в определенном направлении в соответствии с моделью освещения по методу Фонга.

![Схема векторов, используемых для каклуате вывода отраженного освещения для точечного рисунка.](images/point-spec-reflected1.png)

Этот результат вычисляет итоговые значения из пикселя вывода с помощью уравнений здесь:

![уравнения для вычисления конечных значений пикселей. ](images/point-spec-formula-output.png)

где<dl> занят? = Константа отраженного освещения.  
![Стандартный символ вектора единицы измерения поверхности. ](images/point-spec-mathchar-n.png) = поверхность, обычная векторная единица, которая является функцией x и y. Для вычислений см. [карту высоты и нормальный вектор](#height-map-and-normal-vector) .  
![символ посередине вектора единиц измерения. ](images/point-spec-mathchar-h.png) = "среднее значение" для единичного вектора между единицами измерения и вектором освещения. Вычисления см. в разделе [источник освещения Point](#point-light-source) .  
L<sub>r</sub>, l<sub>g</sub>, l<sub>b</sub> = светло-цвет в компонентах RGB.  
</dl>

Константа отраженного освещения устанавливается как свойство *спекуларконстант* , а светло-цвет — как свойство *Color* .

## <a name="point-light-source"></a>Источник освещения точки

Источник «точка освещения» порождает освещение во всех направлениях, как показано на рисунке.

![светло-точечный источник, порожденный лампочкой во всех направлениях.](images/point-spec-light.png)

Расположение источника освещения задается с помощью свойства *лигхтпоситион* . Этот результат вычисляет облегченный вектор L для источника точки освещения с помощью уравнений здесь:

![уравнение светлого вектора.](images/point-spec-formula3.png)

где Light?, светлое<sub>y</sub>и Light<sub>z</sub> — это входное расположение источника данных. Этот результат вычисляет посередине Векторный ![ символ в середине.](images/point-spec-mathchar-h.png) как определено в модели освещения по методу Фонга, здесь используется уравнение. Модель освещения предполагает, что вектор глаз, ![ символ вектора глаз ](images/point-spec-mathchar-e.png) , находится в положении (0, 0, 1).

![уравнение вектора на середине.](images/point-spec-formula4.png)

И L, и H нормализованы до векторов с единицей длины.

## <a name="height-map-and-normal-vector"></a>Таблица высоты и вектор нормали

Этот результат создает карту высоты для входного изображения на основе его альфа-канала.

Компонент Height (Z) вычисляется с помощью уравнения:

![Уравнение для вычисления высоты (z) поверхности.](images/point-spec-formula6.png)

Этот результат вычисляет нормальную поверхность, ![Стандартный символ вектора.](images/point-spec-mathchar-n.png)для входного точечного рисунка с помощью градиента Собел.

## <a name="specular-lighting-constant-and-exponent"></a>Константа и экспонента отраженного освещения

Отраженный свет представляет свет, который отражается на карте высоты изображения. Вы указываете свойство *спекуларекспонент* , которое определяет объем отраженного отражения из точечного рисунка.

Большие Экспоненты представляют объекты шиниер и отражают освещение в более специализированной форме.

Свойство *Спекуларконстант* K? Определяет объем отраженного освещения как отношение входящего освещения.

## <a name="effect-properties"></a>Свойства эффектов



| Отображаемое имя и перечисление индекса                                                     | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|----------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| лигхтпоситион<br/> D2D1 \_ поинтспекулар \_ prop, \_ светлое \_ расположение<br/>         | Светлое расположение источника освещения точки. Свойство является D2D1 \_ вектором \_ 3F, определенным как (x, y, z). Единицы измерения находятся в аппаратно-независимых пикселях (DIP), а значения не привязаны к устройствам и без них. Тип — D2D1 \_ vector \_ 3F.<br/> Значение по умолчанию — {0.0 f, 0,0 f, 0,0 f}.<br/>                                                                                                                                                                                      |
| спекуларекспонент<br/> \_ \_ \_ Отражающий показатель D2D1 поинтспекулар Prop \_<br/>   | Экспонента для отраженного термина в уравнении по методу Фонга освещения. Большее значение соответствует более отражающей поверхности. Это значение не имеет единицы и должно находиться в диапазоне от 1,0 до 128. Тип — FLOAT.<br/> Значение по умолчанию — 1,0 f.<br/>                                                                                                                                                                                                                               |
| спекуларконстант<br/> D2D1 \_ поинтспекулар \_ prop, \_ отражающая \_ константа<br/>   | Отношение отраженного отражения к входящему источнику. Значение является безмодульным и должно находиться в диапазоне от 0 до 10 000. Тип — FLOAT.<br/> Значение по умолчанию — 1,0 f.<br/>                                                                                                                                                                                                                                                                                                   |
| сурфацескале<br/> D2D1 \_ поинтспекулар \_ , \_ \_ масштаб поверхности<br/>           | Коэффициент масштабирования в Z-направлении для создания карт высоты. Значение является безмодульным и должно находиться в диапазоне от 0 до 10 000. Тип — FLOAT.<br/> Значение по умолчанию — 1,0 f.<br/>                                                                                                                                                                                                                                                                                          |
| Color<br/> \_Цвет D2D1 \_ поинтспекулар \_<br/>                           | Цвет входящего освещения. Это свойство предоставляется как D2D1 \_ vector \_ 3F (R, G, B) и используется для вычислений l<sub>R</sub>, l<sub>G</sub>, l<sub>B</sub>. Тип — D2D1 \_ vector \_ 3F.<br/> Значение по умолчанию — {1.0 f, 1.0 f, 1.0 f}.<br/>                                                                                                                                                                                                                             |
| кернелунитленгс<br/> \_ \_ \_ \_ Длина единицы ядра D2D1 поинтспекулар \_<br/> | Размер элемента в ядре Собел, используемый для создания нормали поверхности в направлениях X и Y. Это свойство сопоставляется со значениями DX и dy в градиенте Собел. Это свойство является D2D1 \_ вектором \_ 2f (длина единицы ядра X, длина единицы ядра Y) и определена в (DIP/единица ядра). В результате используется интерполяция билинейной для масштабирования растрового изображения в соответствии с размером элементов ядра. Тип — D2D1 \_ vector \_ 2F.<br/> Значение по умолчанию — {1.0 f, 1.0 f}.<br/> |
| ScaleMode<br/> \_ \_ \_ Режим масштабирования D2D1 поинтспекулар \_<br/>                 | Режим интерполяции, который применяется для масштабирования изображения до соответствующей длины единицы ядра. Существует шесть режимов масштабирования, имеющих высокое качество и скорость. Дополнительные сведения см. в разделе [режимы масштабирования](#scales-modes) . <br/> Тип — D2D1 \_ поинтспекулар ( \_ масштабируемый \_ режим).<br/> Значение по умолчанию — \_ D2D1 \_ поинтспекулар \_ \_ линейный режим масштабирования.<br/>                                                                                                                          |



 

## <a name="scales-modes"></a>Масштабирование режимов



| Перечисление                                             | Описание                                                                                                                                                                                          |
|---------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_ \_ \_ \_ Ближайший соседний D2D1 поинтспекулар режим масштабирования \_     | Выбирает ближайшую одиночную точку и использует ее. В этом режиме используется меньше времени на обработку, но выводится изображение самого низкого качества.                                                                           |
| \_ \_ \_ Линейный режим масштабирования D2D1 поинтспекулар \_                | Использует выборку с четырьмя точками и линейную интерполяцию. В этом режиме выводится изображение с более высоким качеством, чем у ближайшего соседа.                                                                                   |
| D2D1 \_ поинтспекулар \_ Scale \_ , \_ кубический режим                 | Использует 16-примерный ядро кубических для интерполяции. Этот режим использует наибольшее время обработки, но выводит изображение с более высоким качеством.                                                                        |
| D2D1 \_ поинтспекулар \_ режим масштабирования с \_ \_ несколькими \_ образцами \_ | Использует 4 линейных образца в пределах одного пикселя для удобного сглаживания. Этот режим хорошо подходит для уменьшения масштаба по небольшим объемам на изображениях с небольшими пикселями.                                              |
| D2D1 \_ поинтспекулар \_ режим масштабирования — \_ \_ анизотропная           | Использует анизотропную фильтрацию для выборки шаблона в соответствии с преобразованной формой точечного рисунка.                                                                                                     |
| \_ \_ \_ \_ \_ Высококачественное \_ кубический режим масштабирования D2D1 поинтспекулар  | Использует высококачественное ядро кубического размера для выполнения предварительно довнскале образа, если довнскалинг участвует в матрице преобразования. Затем использует режим интерполяции кубических для окончательного вывода. |



 

> [!Note]  
> Если не выбрать режим, то по умолчанию применяется \_ режим МАСШТАБИРОВАНИЯ D2D1 поинтспекулар \_ \_ \_ линейный.

## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Минимальная версия сервера | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Заголовок                   | d2d1effects. h                                                                      |
| Библиотека                  | D2D1. lib, дксгуид. lib                                                               |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**ID2D1Effect**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1effect)
</dt> </dl>

 

