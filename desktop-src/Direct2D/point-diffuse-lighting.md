---
title: Эффект точечного рассеяния освещения
description: Используйте эффекты освещения «точка-диффузия», чтобы создать изображение, которое кажется неотражающим поверхностью с тонкой разбросам во всех направлениях. Этот результат использует альфа-канал как карту высоты и включает изображение с источником точечного света.
ms.assetid: C98A4962-B9EB-4095-9AC4-F1C32C574892
keywords:
- эффекты освещения точечного света
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de97edfa6c2166d5c29649aabfe97761440f8f18
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "104071899"
---
# <a name="point-diffuse-lighting-effect"></a>Эффект точечного рассеяния освещения

Используйте эффекты освещения «точка-диффузия», чтобы создать изображение, которое кажется неотражающим поверхностью с тонкой разбросам во всех направлениях. Этот результат использует альфа-канал как карту высоты и включает изображение с источником точечного света.

Цвет точечного рисунка выходных данных является результатом светлого цвета, светлой и геометрической поверхности. Выходные данные альфа-канала для каждого пикселя с рассеянным освещением всегда 1,0.

Идентификатором CLSID для этого действия является CLSID \_ D2D1PointDiffuse. Чтобы использовать этот результат, добавьте дксгуид. lib в зависимости компоновщика.

-   [Пример изображения](#example-image)
-   [Свойства эффектов](#effect-properties)
-   [Режимы масштабирования](#scale-modes)
-   [Требования](#requirements)
-   [См. также](#related-topics)

## <a name="example-image"></a>Пример изображения

В этом примере показаны входные и выходные изображения для эффектов освещения «точка-диффузия».

![снимок экрана примера эффектов, показывающий входные и выходные изображения для эффекты освещения «диффузия».](images/point-diffuse-example.png)

Рассеянное освещение относится к источнику света, отраженному в нескольких направлениях, как показано здесь.

![рассеянный свет освещения разбит на все направления.](images/point-diffuse-lighting.png)

Этот результат вычисляет итоговые значения в пикселах, используя следующие уравнения:

![Вычисление выходных битовых карт.](images/point-diffuse-formula1.png)

Где:<dl> k<sub>d</sub> = диффузная константа освещения. Задается пользователем.  
![символ вектора нормали поверхности.](images/point-spec-mathchar-n.png) = Surface, Стандартный вектор единицы, функция x и y.  
![символ вектора единиц измерения.](images/distant-spec-mathchar-l.png) = элементный вектор, указывающий от поверхности к светлому.  
L<sub>r</sub>, l<sub>g</sub>, l<sub>b</sub> = светло-цвет в компонентах RGB.  
</dl>

## <a name="effect-properties"></a>Свойства эффектов



| Отображаемое имя и перечисление индекса                                                    | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|---------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| лигхтпоситион<br/> D2D1 \_ поинтдиффусе \_ prop, \_ светлое \_ расположение<br/>         | Светлое расположение источника освещения точки. Свойство является D2D1 \_ вектором \_ 3F, определенным как (x, y, z). Единицы измерения находятся в аппаратно-независимых пикселях (DIP) и не ограничены. <br/> Тип — D2D1 \_ vector \_ 3F.<br/> Значение по умолчанию — {0.0 f, 0,0 f, 0,0 f}.<br/>                                                                                                                                                                                                              |
| диффусеконстант<br/> D2D1 \_ поинтдиффусе \_ prop, \_ \_ константа диффузии<br/>     | Отношение рассеянного отражения к объему входящего света. Это свойство должно находиться в диапазоне от 0 до 10 000 и не поддается единице. <br/> Тип — FLOAT.<br/> Значение по умолчанию — 1,0 f.<br/>                                                                                                                                                                                                                                                                                          |
| сурфацескале<br/> D2D1 \_ поинтдиффусе \_ , \_ \_ масштаб поверхности<br/>           | Коэффициент масштабирования по оси Z. Шкала поверхности не имеет единицы и должна находиться в диапазоне от 0 до 10 000.<br/> Тип — FLOAT.<br/> Значение по умолчанию — 1,0 f.<br/>                                                                                                                                                                                                                                                                                                               |
| Цвет<br/> \_Цвет D2D1 \_ поинтдиффусе \_<br/>                           | Цвет входящего освещения. Это свойство представлено в виде вектора 3 (R, G, B) и используется для вычислений L<sub>R</sub>, l<sub>G</sub>, l<sub>B</sub>. <br/> Тип — D2D1 \_ vector \_ 3F.<br/> Значение по умолчанию — {1.0 f, 1.0 f, 1.0 f}.<br/>                                                                                                                                                                                                                                     |
| кернелунитленгс<br/> \_ \_ \_ \_ Длина единицы ядра D2D1 поинтдиффусе \_<br/> | Размер элемента в ядре Собел, используемый для создания нормали поверхности в направлении X и Y. Это свойство сопоставляется со значениями DX и dy в градиенте Собел. Это свойство является D2D1 \_ вектором \_ 2f (длина единицы ядра X, длина единицы ядра Y) и определена в (DIP/единица ядра). В результате используется интерполяция билинейной для масштабирования растрового изображения в соответствии с размером элементов ядра. <br/> Тип — D2D1 \_ vector \_ 2F.<br/> Значение по умолчанию — {1.0 f, 1.0 f}.<br/> |
| ScaleMode<br/> \_ \_ \_ Режим масштабирования D2D1 поинтдиффусе \_<br/>                 | Режим интерполяции, который применяется для масштабирования изображения до соответствующей длины единицы ядра. Существует шесть режимов масштабирования, имеющих высокое качество и скорость. Дополнительные сведения см. в разделе [режимы масштабирования](#scale-modes) . <br/> Тип — D2D1 \_ поинтдиффусе ( \_ масштабируемый \_ режим).<br/> Значение по умолчанию — \_ D2D1 \_ поинтдиффусе \_ \_ линейный режим масштабирования.<br/>                                                                                                                                         |



 

## <a name="scale-modes"></a>Режимы масштабирования



| Перечисление                                            | Описание                                                                                                                                                                                          |
|--------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_ \_ \_ \_ Ближайший соседний D2D1 поинтдиффусе режим масштабирования \_     | Выбирает ближайшую одиночную точку и использует ее. В этом режиме используется меньше времени на обработку, но выводится изображение самого низкого качества.                                                                           |
| \_ \_ \_ Линейный режим масштабирования D2D1 поинтдиффусе \_                | Использует выборку с четырьмя точками и линейную интерполяцию. В этом режиме выводится изображение с более высоким качеством, чем у ближайшего соседа.                                                                                   |
| D2D1 \_ поинтдиффусе \_ Scale \_ , \_ кубический режим                 | Использует 16-примерный ядро кубических для интерполяции. Этот режим использует наибольшее время обработки, но выводит изображение с более высоким качеством.                                                                        |
| D2D1 \_ поинтдиффусе \_ режим масштабирования с \_ \_ несколькими \_ образцами \_ | Использует 4 линейных образца в пределах одного пикселя для удобного сглаживания. Этот режим хорошо подходит для уменьшения масштаба по небольшим объемам на изображениях с небольшими пикселями.                                              |
| D2D1 \_ поинтдиффусе \_ режим масштабирования — \_ \_ анизотропная           | Использует анизотропную фильтрацию для выборки шаблона в соответствии с преобразованной формой точечного рисунка.                                                                                                     |
| \_ \_ \_ \_ \_ Высококачественное \_ кубический режим масштабирования D2D1 поинтдиффусе  | Использует высококачественное ядро кубического размера для выполнения предварительно довнскале образа, если довнскалинг участвует в матрице преобразования. Затем использует режим интерполяции кубических для окончательного вывода. |



 

> [!Note]  
> Если не выбрать режим, то по умолчанию применяется \_ режим МАСШТАБИРОВАНИЯ D2D1 поинтдиффусе \_ \_ \_ линейный.

## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента | Windows 8 и обновление платформы для \[ классических приложений Windows 7 \| приложения для Магазина Windows\] |
| Минимальная версия сервера | Windows 8 и обновление платформы для \[ классических приложений Windows 7 \| приложения для Магазина Windows\] |
| Header                   | d2d1effects. h                                                                      |
| Библиотека                  | D2D1. lib, дксгуид. lib                                                               |



 

## <a name="related-topics"></a>См. также

<dl> <dt>

[**ID2D1Effect**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1effect)
</dt> </dl>

 

