---
title: Результат Atlas
description: Этот результат можно использовать для вывода части изображения, но не хранить его вне части для использования в последующих операциях.
ms.assetid: D35E32CB-4DF7-408F-A717-1E421DDC8763
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 71b0d55e7751ef73d8f6bdff65a6ae5d5933695600a1003b9c4a010231628019
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119929060"
---
# <a name="atlas-effect"></a>Результат Atlas

Этот результат можно использовать для вывода части изображения, но не хранить его вне части для использования в последующих операциях.

Идентификатором CLSID для этого действия является CLSID \_ D2D1Atlas.

Результат Atlas удобен, если требуется загрузить крупное изображение, состоящие из нескольких небольших изображений, таких как различные кадры спрайта.

Чтобы создать выходные данные, сделайте следующее:

1.  Обрезает входные данные в заданное свойство *инпутрект* .
2.  Преобразует происхождение результата в (0, 0).

> [!Note]  
> Свойство *инпутпаддингрект* должно быть больше только только в том случае, если Пиксели между двумя прямоугольниками являются прозрачными черными для входных данных. Это может привести к более оптимальному выполнению графа Direct2D.

 

Ниже приведен пример этого результата. Это изображение является небольшим и простым для наглядности.

![входной образ.](images/atlas.png)

Предыдущее изображение — это входные данные для действия. Здесь код создает результат Atlas, устанавливает входные данные, устанавливает прямоугольник ввода, а затем рисует выходные данные.


```C++
ComPtr<ID2D1Effect> atlasEffect;

// Create the Atlas Effect.
DX::ThrowIfFailed(m_d2dContext->CreateEffect(CLSID_D2D1Atlas, &atlasEffect));

// Set the input.
atlasEffect->SetInputEffect(0, inputImage.Get());

// The images here are 150 x 150 pixels.
float size = 150.0f;

// Compensate for the padding between images.
float padding = 10.0f;

// The input rectangle.  150 x 150 pixels with 10 pixel padding
D2D1_Vector_4F inputRect = D2D1::Vector4F(size + (padding * 2), padding, size, size);

DX::ThrowIfFailed(atlasEffect->SetValue(D2D1_ATLAS_PROP_INPUT_RECT, inputRect));

// Draw the image
m_d2dContext->DrawImage(atlasEffect.Get());
```



Предыдущий код выбирает прямоугольник вокруг второго треугольника. Заполнение вокруг него игнорируется. Это полученное изображение.

![изображение вывода.](images/atlas2.png)

> [!Note]  
> Это ситуация, когда вы можете указать *инпутпаддингрект* , так как заполнение является прозрачным черным. Прямоугольник будет иметь вид `D2D1::Vector4F(size + (padding * 2), 0, size + padding, size + padding);` .

 

## <a name="effect-properties"></a>Свойства эффектов



| Отображаемое имя и перечисление индекса                                             | Описание                                                                                                                                                                  |
|--------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| инпутрект<br/> \_ \_ \_ Входной прямоугольник D2D1 Atlas \_ prop<br/>                 | Часть изображения, передаваемая следующему результату.<br/> Тип — D2D1 \_ vector \_ 4F.<br/> Значение по умолчанию — (-ФЛТ \_ Max,-ФЛТ \_ Max, ФЛТ \_ Max, ФЛТ \_ max). <br/> |
| инпутпаддингрект<br/> D2D1 \_ Atlas \_ для \_ \_ заполнения входного \_ прямоугольника<br/> | Максимальный размер образца для выходного прямоугольника.<br/> Тип — D2D1 \_ vector \_ 4F.<br/> Значение по умолчанию — (-ФЛТ \_ Max,-ФЛТ \_ Max, ФЛТ \_ Max, ФЛТ \_ max).<br/>   |



 

## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Минимальная версия сервера | Windows 8 и обновление платформы для Windows 7 \[ классических приложений \| Windows приложения магазина\] |
| Заголовок                   | d2d1effects. h                                                                      |
| Библиотека                  | D2D1. lib, дксгуид. lib                                                               |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**ID2D1Effect**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1effect)
</dt> </dl>

 

