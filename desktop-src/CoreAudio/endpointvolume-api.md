---
description: API Ендпоинтволуме
ms.assetid: 1fe1cd57-a0a4-4e08-ab52-3b6e66d14e79
title: API Ендпоинтволуме
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 081b827045250336aa499e386a8dafedb6ae068b
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103807564"
---
# <a name="endpointvolume-api"></a>API Ендпоинтволуме

API Ендпоинтволуме позволяет специализированным клиентам управлять уровнями громкости [конечных точек аудио](audio-endpoint-devices.md)и отслеживать их. Клиент получает ссылки на интерфейсы в API Ендпоинтволуме, получая интерфейс [**иммдевице**](/windows/desktop/api/Mmdeviceapi/nn-mmdeviceapi-immdevice) устройства конечной точки аудио и вызывая метод [**Иммдевице:: Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) .

Файл заголовка Ендпоинтволуме. h определяет интерфейсы в API Ендпоинтволуме.

Звуковые приложения, использующие [API ммдевице](mmdevice-api.md) и [васапи](wasapi.md) , обычно используют интерфейс [**исимплеаудиоволуме**](/windows/desktop/api/Audioclient/nn-audioclient-isimpleaudiovolume) для управления уровнями громкости на основе каждого сеанса. Только два типа звуковых приложений нуждаются в использовании API Ендпоинтволуме. Эти типы приложений:

-   Приложения, управляющие основными уровнями громкости конечных точек аудио, аналогичны программе Windows Volume Control, Sndvol.exe.
-   Профессиональные приложения аудио ("Pro Audio"), требующие монопольного доступа к устройствам конечных точек аудио.

Неправильное использование API Ендпоинтволуме может повлиять на политику Windows Audio и нарушить параметры системного тома пользователя.

Если устройство конечной точки звука реализует аппаратный том и выключает элементы управления, API Ендпоинтволуме использует эти элементы управления для управления томом устройства. В противном случае API Ендпоинтволуме реализует элементы управления в программном обеспечении прозрачно для клиента.

Если на устройстве есть аппаратный том и отключены элементы управления, изменения, внесенные в том устройства и отключения параметров через API Ендпоинтволуме, влияют на уровень громкости в общем и монопольном режимах. Если на устройстве отсутствует аппаратный том и отключены элементы управления, изменения, внесенные в программный том и отключения элементов управления через API Ендпоинтволуме, влияют на уровень громкости в общем режиме, но не в монопольном режиме. В монопольном режиме клиент и устройство обмениваются данными напрямую, минуя элементы управления программного обеспечения.

Для приложений, которые должны управлять томом оборудования и отключить элементы управления, API Ендпоинтволуме предлагает два потенциальных преимущества по сравнению с [API девицетопологи](devicetopology-api.md).

Во-первых, ряд устройств аудио адаптеров не имеет аппаратных средств управления громкостью. Если на устройстве отсутствует аппаратный регулятор громкости, интерфейс [**иаудиоендпоинтволуме**](/windows/desktop/api/Endpointvolume/nn-endpointvolume-iaudioendpointvolume) в API ендпоинтволуме автоматически реализует программный регулятор громкости для потока на этом устройстве или с него. Для клиента API Ендпоинтволуме результат аналогичен тому, реализован ли на устройстве или в программном обеспечении с помощью интерфейса API Ендпоинтволуме.

Во-вторых, даже если устройство адаптера реализует аппаратные регуляторы громкости, приложение, использующее API Девицетопологи для реализации алгоритма обхода топологии, может не найти искомый элемент управления. Как правило, такое приложение предназначено для обхода топологии оборудования определенного устройства или набора связанных устройств. Приложение подвергается сбою, если оно пытается пройти по топологии устройства, которое не было специально разработано для или не тестировалось с помощью.

Только специализированные приложения, которым требуется доступ к аппаратным функциям, отличным от тома, и отключения элементов управления должны использовать API Девицетопологи. Для приложений, которым требуется управлять только уровнем громкости потока с монопольным доступом, интерфейс API Ендпоинтволуме проще использовать и надежно работает с более широким спектром устройств звукового оборудования.

Примеры кода, в которых используются интерфейсы в API Ендпоинтволуме, см. в следующих разделах:

-   [Элементы управления томами конечных точек](endpoint-volume-controls.md)
-   [Пиковые показатели](peak-meters.md)

Пример, в котором используется API Ендпоинтволуме, см. в разделе [ендпоинтволуме](endpointvolume.md) в Windows SDK.

API Ендпоинтволуме реализует следующие интерфейсы.



| Интерфейс                                                | Описание                                                                             |
|----------------------------------------------------------|-----------------------------------------------------------------------------------------|
| [**иаудиоендпоинтволуме**](/windows/desktop/api/Endpointvolume/nn-endpointvolume-iaudioendpointvolume)     | Представляет элементы управления громкостью в звуковом потоке на устройстве конечной точки аудио. |
| [**иаудиометеринформатион**](/windows/desktop/api/Endpointvolume/nn-endpointvolume-iaudiometerinformation) | Представляет пиковый счетчик звукового потока, на устройство конечной точки аудио.        |



 

Кроме того, клиенты API Ендпоинтволуме, требующие уведомления тома и смены звука на устройствах конечных точек, должны реализовать следующий интерфейс.



| Интерфейс                                                            | Описание                                                                                       |
|----------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| [**иаудиоендпоинтволумекаллбакк**](/windows/desktop/api/Endpointvolume/nn-endpointvolume-iaudioendpointvolumecallback) | Предоставляет уведомления при изменении уровня громкости или выключения звука устройства конечной точки. |



 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Регуляторы громкости](volume-controls.md)
</dt> <dt>

[**Интерфейс Иммдевице**](/windows/desktop/api/Mmdeviceapi/nn-mmdeviceapi-immdevice)
</dt> <dt>

[**Иммдевице:: Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate)
</dt> <dt>

[**исимплеаудиоволуме**](/windows/desktop/api/Audioclient/nn-audioclient-isimpleaudiovolume)
</dt> <dt>

[**Справочник по программированию**](programming-reference.md)
</dt> </dl>

 

 



