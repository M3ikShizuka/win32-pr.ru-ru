---
description: В этом примере приложения демонстрируется потоковая затухание путем реализации проигрывателя мультимедиа, который показывает поведение по умолчанию, предоставляемое системой, выводит события дуккинг и реализует настраиваемую обработку при получении событий дуккинг.
ms.assetid: 667c8751-1d17-4b59-8ced-ed5f0c333ae9
title: дуккингмедиаплайер
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f86952f1aa7b81c9a7dc711f0c4f36fc8531bd63
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "105656727"
---
# <a name="duckingmediaplayer"></a>дуккингмедиаплайер

В этом примере приложения демонстрируется потоковая затухание путем реализации проигрывателя мультимедиа, который показывает поведение по умолчанию, предоставляемое системой, выводит события дуккинг и реализует настраиваемую обработку при получении событий дуккинг. Этот пример необходимо использовать в сочетании с [дуккингкаптуресампле](duckingcapturesample.md). Дополнительные сведения о дуккинг или ослаблении потока см. в разделе [Дуккинг по умолчанию](stream-attenuation.md).

В этом разделе содержатся следующие подразделы.

-   [Описание](#description)
-   [Требования](#requirements)
-   [Загрузка образца](#downloading-the-sample)
-   [Создание примера](#building-the-sample)
-   [Запуск примера](#running-the-sample)
-   [См. также](#related-topics)

## <a name="description"></a>Описание

В этом образце демонстрируются следующие возможности.

-   DirectShow для воспроизведения файла мультимедиа.
-   [Васапи](wasapi.md) для управления потоками и обработки событий дуккинг.

## <a name="requirements"></a>Требования



| Продукт                                                        | Version   |
|----------------------------------------------------------------|-----------|
| [Windows SDK](https://msdn.microsoft.com/windowsvista/bb980924.aspx) | Windows 7 |
| Visual Studio                                                  | 2008      |



 

## <a name="downloading-the-sample"></a>Загрузка образца

Этот образец доступен в следующих расположениях.



| Расположение    | Путь или URL-адрес                                                                                            |
|-------------|-----------------------------------------------------------------------------------------------------|
| Пакет Windows SDK | \\Program Files \\ Microsoft SDK \\ Windows \\ v \\ 7.0 Samples \\ мультимедиа \\ Audio \\ дуккингмедиаплайер \\ ... |



 

## <a name="building-the-sample"></a>Построение образца

Чтобы создать пример Дуккингмедиаплайер, выполните следующие действия.

1.  Откройте Дуккингмедиаплайер. sln в Visual Studio 2008.
2.  В окне выберите конфигурацию решения для **отладки** или **выпуска** , выберите меню **Сборка** в строке меню и выберите параметр **Сборка** . Если не открыть Visual Studio из командной оболочки для пакета SDK, Visual Studio не сможет получить доступ к среде сборки пакета SDK. В этом случае выборка не будет построена, если вы явно не настроили переменную среды Мссдк, которая используется в файле проекта Дуккингмедиаплайер. vcproj.

## <a name="running-the-sample"></a>Запуск примера

Если приложение успешно построено, создается исполняемый файл DuckingMediaPlayer.exe. Чтобы запустить его, выберите команду **начать отладку** или **запустить без отладки** из меню **Отладка** или введите `DuckingMediaPlayer` в командном окне.

Чтобы просмотреть демонстрацию дуккинг, необходимо одновременно выполнить Дуккингмедиаплайер и Дуккингкаптуресампле. Дуккингкаптуресампле открывает поток связи и сигнализирует системе создать событие дуккинг. Дуккингмедиаплайер уведомляется от системы при возникновении события дуккинг, и проигрыватель мультимедиа выполняет запрошенное пользователем действие.

Чтобы отключить поведение дуккинг, выполните следующие действия.

1.  В окне Дуккингкаптуресампле выберите **использовать устройство ввода по умолчанию** и нажмите кнопку **запустить** , чтобы запустить сеанс записи с коммуникационного устройства.
2.  На Дуккингмедиаплайер выберите файл мультимедиа для воспроизведения и укажите параметр дуккинг в качестве **отказаться от дуккинг**.

Обратите внимание, что файл мультимедиа воспроизводится без прерывания. События, создаваемые системой при открытии коммуникационного потока, игнорируются.

Чтобы продемонстрировать поведение дуккинг по умолчанию, предоставляемое системой, выполните следующие действия.

1.  Выберите параметр **звуки** на панели управления. На вкладке **связи** установите флажок **уменьшить громкость других звуков на 80%**.
2.  В окне Дуккингкаптуресампле выберите **использовать устройство ввода по умолчанию** и нажмите кнопку **запустить** , чтобы запустить сеанс записи с коммуникационного устройства.
3.  На Дуккингмедиаплайер выберите файл мультимедиа для воспроизведения без выбора параметров дуккинг.
4.  В окне Дуккингкаптуресампле нажмите кнопку " **прерывать** ", чтобы прерывать поток связи.

Обратите внимание, что когда Дуккингкаптуресампле открывает поток связи, файл мультимедиа, воспроизводимый Дуккингмедиаплайер, воспроизводится без прерывания, но уровень громкости уменьшается. Когда сеанс связи остановлен, том сбрасывается до исходного. Это поведение дуккинг по умолчанию, реализуемое системой.

Чтобы просмотреть настроенное поведение дуккинг, реализованное проигрывателем мультимедиа, выполните следующие действия.

1.  В окне Дуккингкаптуресампле выберите **использовать устройство ввода по умолчанию** и нажмите кнопку **запустить** , чтобы запустить сеанс записи с коммуникационного устройства.
2.  На Дуккингмедиаплайер выберите файл мультимедиа для воспроизведения и укажите параметр дуккинг в качестве **паузы в утка**.
3.  В окне Дуккингкаптуресампле нажмите кнопку " **прерывать** ", чтобы прерывать поток связи.

Обратите внимание, что когда Дуккингкаптуресампле открывает поток связи, файл мультимедиа, воспроизводимый Дуккингмедиаплайер, приостанавливается. Воспроизведение возобновляется после остановки сеанса связи. Это поведение при ослаблении в потоке — это поведение дуккинг, реализованное проигрывателем мультимедиа.

Дуккингмедиаплайер также демонстрирует, как интегрировать регулятор громкости для каждого приложения с помощью микшера тома.

Дополнительные сведения о функции затухания потока см. в разделе [Дуккинг по умолчанию](stream-attenuation.md).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Примеры пакетов SDK, использующих основные API аудио](sdk-samples-that-use-the-core-audio-apis.md)
</dt> </dl>

 

 



