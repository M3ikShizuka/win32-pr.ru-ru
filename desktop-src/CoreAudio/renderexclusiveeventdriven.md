---
description: Этот пример приложения, демонстрирующий буферизацию, управляемую событиями, использует основные API аудио для отображения звуковых данных на устройстве вывода, указанном пользователем.
ms.assetid: 3a2e3fa6-2d6a-4ab0-a531-d1c968458e96
title: рендерексклусививентдривен
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 75553496219d0a4ddaf6685089de802e034f94cb
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127164836"
---
# <a name="renderexclusiveeventdriven"></a>рендерексклусививентдривен

Этот пример приложения использует основные API аудио для отображения звуковых данных на устройстве вывода, указанном пользователем. В этом примере демонстрируется буферизация, управляемая событиями, для клиента отрисовки в монопольном режиме. Для потока с монопольным режимом клиент использует буфер конечной точки с звуковым устройством.

В этом разделе содержатся следующие подразделы.

-   [Описание](#description)
-   [Requirements](#requirements)
-   [Загрузка образца](#downloading-the-sample)
-   [Создание примера](#building-the-sample)
-   [Запуск примера](#running-the-sample)
-   [Связанные темы](#related-topics)

## <a name="description"></a>Описание

В этом образце демонстрируются следующие возможности.

-   [API ммдевице](mmdevice-api.md) для перечисления мультимедийных устройств и выбора.
-   ВАСАПИ для операций управления потоком.

## <a name="requirements"></a>Требования



| Продукт                                                        | Version   |
|----------------------------------------------------------------|-----------|
| [Windows SDK](https://msdn.microsoft.com/windowsvista/bb980924.aspx) | Windows 7 |
| Visual Studio                                                  | 2008      |



 

## <a name="downloading-the-sample"></a>Загрузка образца

Этот образец доступен в следующих расположениях.



| Расположение    | Путь или URL-адрес                                                                                                    |
|-------------|-------------------------------------------------------------------------------------------------------------|
| Пакет Windows SDK | \\Program files \\ Microsoft sdks \\ Windows \\ v 7.0 \\ samples \\ мультимедиа \\ Audio \\ рендерексклусививентдривен \\ ... |



 

## <a name="building-the-sample"></a>Построение образца

Чтобы создать пример Рендерексклусививентдривен, выполните следующие действия.

1.  откройте командную оболочку для Windows SDK и перейдите в каталог примеров рендерексклусививентдривен.
2.  выполните команду `start WASAPIRenderExclusiveEventDriven.sln` в каталоге рендерексклусививентдривен, чтобы открыть проект васапирендерексклусививентдривен в окне Visual Studio.
3.  В окне выберите конфигурацию решения для **отладки** или **выпуска** , выберите меню **Сборка** в строке меню и выберите параметр **Сборка** . если не открыть Visual Studio из интерпретатора команд для пакета sdk, Visual Studio не будет иметь доступа к среде сборки пакета sdk. В этом случае выборка не будет построена, если вы явно не настроили переменную среды Мссдк, которая используется в файле проекта Васапирендерексклусививентдривен. vcproj.

## <a name="running-the-sample"></a>Запуск примера

При успешном создании демонстрационного приложения создается исполняемый файл WASAPIRenderExclusiveEventDriven.exe. Чтобы запустить его, введите `WASAPIRenderExclusiveEventDriven` в командном окне, а затем обязательные или необязательные аргументы. В следующем примере показано, как запустить пример, указав длительность воспроизведения на устройстве мультимедиа по умолчанию.

`WASAPIRenderExclusiveEventDriven.exe -d 20 -multimedia`

В следующей таблице показаны аргументы.

| Аргумент        | Описание                                                |
|-----------------|------------------------------------------------------------|
| -?              | Отображает справку.                                                |
| -H              | Отображает справку.                                                |
| -f              | Синус частоты волны в Гц.                                 |
| -l              | Задержка визуализации звука в миллисекундах.                      |
| -d              | Синус длительности WAV в секундах.                             |
| -M              | Отключает использование MMCSS.                                 |
| -Console        | Использовать консольное устройство по умолчанию.                            |
| -связь | Используйте устройство связи по умолчанию.                      |
| — мультимедиа     | Используйте устройство мультимедиа по умолчанию.                         |
| — Конечная точка       | Используйте идентификатор конечной точки, указанный в значении переключателя. |



 

Если приложение запускается без аргументов, оно перечисляет доступные устройства и предлагает пользователю выбрать устройство для сеанса подготовки к просмотру. После того как пользователь назначит устройство, оно выводит синус в 440 Гц в течение 10 секунд. Эти значения можно изменить, указав значения параметра-f и-d.

В примере Рендерексклусививентдривен демонстрируется буферизация, управляемая событиями. В этом примере показано, как:

-   Создайте экземпляр аудио клиента, настройте его для работы в монопольном режиме и включите управляемую событиями буферизацию, установив флаг **аудклнт \_ стреамфлагс \_ вложенный EventCallback** в вызове [**иаудиоклиент:: Initialize**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-initialize).
-   Свяжите клиент с образцами, готовыми к просмотру, предоставив обработчик событий системе, вызвав метод [**иаудиоклиент:: сетевенсандле**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-seteventhandle) .
-   Создайте поток отрисовки для обработки образцов из обработчика аудио.
-   Правильно выровняйте буферы на границе 128 байт перед их отправкой на устройство. Это делается путем настройки периодичности подсистемы.
-   Проверьте формат Mix конечной точки устройства, чтобы определить, можно ли отобразить образцы. Если устройство не поддерживает формат Mix, данные преобразуются в PCM.
-   Обрабатывайте переключение потоков.

После начала сеанса подготовки к просмотру и запуска потока обработчик звука передает указанный обработчик событий в уведомление клиента каждый раз, когда буфер будет готов к обработке клиентом. Звуковые данные также могут обрабатываться в цикле, управляемом таймером. Этот режим показан в примере [рендерексклусиветимердривен](renderexclusivetimerdriven.md) .

Дополнительные сведения о визуализации потока см. в разделе [Визуализация потока](rendering-a-stream.md).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Примеры пакетов SDK, использующих основные API аудио](sdk-samples-that-use-the-core-audio-apis.md)
</dt> </dl>

 

 



