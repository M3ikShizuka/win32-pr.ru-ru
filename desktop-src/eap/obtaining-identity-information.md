---
title: Получение сведений об удостоверении
description: Поставщик, реализующий протокол проверки подлинности, может также предоставить интерфейс функции, который получает начальную идентификационную информацию для пользователя, запрашивающего проверку подлинности.
ms.assetid: 773c9fdb-c810-4cea-afed-df6484a9c9c9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bb9519da9d66937fd25245fe78f12ef34c3c0ad8
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104069845"
---
# <a name="obtaining-identity-information"></a>Получение сведений об удостоверении

Поставщик, реализующий протокол проверки подлинности, может также предоставить интерфейс функции, который получает начальную идентификационную информацию для пользователя, запрашивающего проверку подлинности.

Поставщик должен реализовать следующие функции.

-   [**расеапжетидентити**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity)
-   [**расеапфримемори**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory)

Эти функции могут быть реализованы в той же библиотеке DLL, что и протокол проверки подлинности, или в отдельной библиотеке DLL. Кроме того, Библиотека DLL, реализующая функции идентификации, может поддерживать более одного протокола проверки подлинности. Путь к библиотеке DLL для этих функций хранится в значении реестра [RAS \_ EAP \_ valueName \_ Identity](authentication-protocol-registry-values.md) в разделе ключа для протокола проверки подлинности. Дополнительные сведения о создании этого значения реестра см. в разделе [Установка EAP](eap-installation.md).

Функция [**расеапжетидентити**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) обычно отображает пользовательский интерфейс для получения сведений об удостоверении для пользователя. Однако если параметр *dwFlags* содержит флаг RAS \_ EAP, не \_ \_ являющийся \_ интерактивным, **расеапжетидентити** не должен отображать пользовательский интерфейс.

Если [**расеапжетидентити**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) отображает пользовательский интерфейс, Пользовательский интерфейс должен поддерживать [**\_ Командные сообщения WM**](../menurc/wm-command.md) , где значение [**ловорд**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85))(*wParam*) равно идканцел.

Служба проверки подлинности вызывает [**расеапжетидентити**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) , если значение параметра [RAS \_ EAP \_ valueName \_ Invoke \_ намедлг](authentication-protocol-registry-values.md) , которое находится в реестре для этого EAP, установлено в 0. Если параметр \_ RAS \_ EAP \_ Invoke \_ намедлг отсутствует или имеется и имеет значение 1, служба проверки подлинности отображает диалоговое окно стандартное системное имя пользователя.

В дополнение к службе RAS- \_ \_ valueName EAP \_ Invoke \_ намедлг, поставщик EAP может создать связанное значение, а в реестре — [службу RAS \_ EAP \_ \_ Invoke \_ пвддлг](authentication-protocol-registry-values.md). Если это значение имеется и имеет значение 0, то служба не будет отображать стандартный системный пароль. Это значение полезно при реализации биометрического метода, такого как сканирование отпечатков пальцев для проверки подлинности пользователя. Если значения для RAS \_ EAP \_ valueName \_ Invoke \_ намедлг и RAS \_ EAP \_ valueName \_ Invoke \_ пвддлг равны нулю, Пользовательский интерфейс идентификации можно использовать для получения сведений об удостоверении и биометрической метрике. Тем не менее, если только RAS \_ \_ \_ \_ -значение проверки значения EAP Invoke пвддлг равен нулю, служба проверки подлинности не будет вызывать [**расеапжетидентити**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity). В этом случае для получения биометрической информации можно использовать [интерактивный пользовательский интерфейс](interactive-user-interface.md) .

Дополнительные сведения об этих значениях реестра см. в разделе [значения реестра протокола проверки подлинности](authentication-protocol-registry-values.md).

Сведения, полученные с помощью [**расеапжетидентити**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) , передаются в протокол проверки подлинности во время вызова [**расеапбегин**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)). На эти сведения указывает члены **псзидентити** и **Пусердата** структуры [**\_ \_ ввода PPP EAP**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) . Чтобы сохранить эти сведения в реестре на клиентском компьютере, протокол проверки подлинности должен вернуть сведения в параметре *пеапаутпут* объекта [**расеапмакемессаже**](/previous-versions/windows/desktop/legacy/aa363532(v=vs.85)).

После вызова [**расеапбегин**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85))служба проверки подлинности вызывает [**расеапфримемори**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory) , чтобы освободить память, занятую этими данными. Поэтому протокол проверки подлинности должен скопировать информацию в буфер закрытой памяти во время вызова **расеапбегин**.

 

 