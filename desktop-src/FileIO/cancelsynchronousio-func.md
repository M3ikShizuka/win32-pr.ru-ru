---
description: Помечает ожидающие операции синхронного ввода-вывода, выданные указанным потоком как отмененные.
ms.assetid: f362c8b2-2193-443e-bb69-78f8b4147117
title: Функция Канцелсинчронаусио (Иоапи. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CancelSynchronousIo
api_type:
- DllExport
api_location:
- Kernel32.dll
- API-MS-Win-Core-io-l1-1-1.dll
- KernelBase.dll
- MinKernelBase.dll
- api-ms-win-downlevel-kernel32-l1-1-0.dll
ms.openlocfilehash: 3e0c1596603ef7c0d13362c2608cc59b88d366fa
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104546698"
---
# <a name="cancelsynchronousio-function"></a>Функция Канцелсинчронаусио

Помечает ожидающие операции синхронного ввода-вывода, выданные указанным потоком как отмененные.

## <a name="syntax"></a>Синтаксис


```C++
BOOL WINAPI CancelSynchronousIo(
  _In_ HANDLE hThread
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*хсреад* \[ окне\]
</dt> <dd>

Обработчик потока.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Если функция выполняется успешно, возвращается ненулевое значение.

Если функция завершается ошибкой, возвращается значение 0 (ноль). Чтобы получить расширенные сведения об ошибке, вызовите функцию [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) .

Если эта функция не может найти запрос на отмену, возвращаемое значение равно 0 (нулю), а [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) возвращает **ошибку \_ не \_ удалось**.

## <a name="remarks"></a>Комментарии

Вызывающий объект должен иметь право на [ \_ Завершение доступа потока](/windows/desktop/ProcThread/thread-security-and-access-rights) .

Если для указанного потока выполняются какие-либо ожидающие выполнения операции ввода/вывода, функция **канцелсинчронаусио** помечает их для отмены. Большинство типов операций могут быть отменены немедленно. другие операции могут продолжать выполнение до того, как они будут фактически отменены, а вызывающий будет уведомлен. Функция **канцелсинчронаусио** не ждет завершения всех отмененных операций. Дополнительные сведения см. в разделе [рекомендации по завершению ввода-вывода и отмене](https://www.microsoft.com/whdc/driver/kernel/iocancel.mspx)работы.

Операция, для которой выполняется отмена, завершена с одним из трех состояний; чтобы определить состояние завершения, необходимо проверить состояние завершения. Три состояния:

-   **Операция выполнена нормально.** Это может произойти, даже если операция была отменена, так как запрос отмены мог быть не отправлен вовремя, чтобы отменить операцию.
-   **Операция была отменена.** Функция [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) возвращает **сообщение об ошибке " \_ операция была \_ прервана**".
-   **Операция завершилась с другой ошибкой.** Функция [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) возвращает соответствующий код ошибки.

В Windows 8 и Windows Server 2012 эта функция поддерживается следующими технологиями.



| Технология                                           | Поддерживается      |
|------------------------------------------------------|----------------|
| Протокол SMB 3,0<br/>   | Да<br/> |
| Прозрачная отработка отказа SMB 3,0 (ОТРАБОТКА отказа)<br/>        | Да<br/> |
| SMB 3,0 с масштабируемыми файловыми ресурсами (SO)<br/>   | Да<br/> |
| Общий том кластераная файловая система (CsvFS)<br/> | Да<br/> |
| Восстанавливаемая файловая система (ReFS)<br/>              | Да<br/> |



 

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Только для \[ классических приложений Windows Vista\]<br/>                                                                                                                                                                                                                          |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2008\]<br/>                                                                                                                                                                                                                    |
| Header<br/>                   | <dl> <dt>Иоапи. h (включение Windows. h); </dt> <dt>Винбасе. h в Windows server 2008 R2, Windows 7, Windows server 2008 и Windows Vista (включая Windows. h)</dt> </dl> |
| Библиотека<br/>                  | <dl> <dt>Kernel32.lib</dt> </dl>                                                                                                                                                                                 |
| DLL<br/>                      | <dl> <dt>Kernel32.dll</dt> </dl>                                                                                                                                                                                 |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**канцелио**](cancelio.md)
</dt> <dt>

[**канцелиоекс**](cancelioex-func.md)
</dt> <dt>

[Функции управления файлами](file-management-functions.md)
</dt> <dt>

[Синхронный и асинхронный ввод-вывод](synchronous-and-asynchronous-i-o.md)
</dt> </dl>

 

