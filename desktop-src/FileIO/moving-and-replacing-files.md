---
description: Рекомендации по перемещению и замене файлов с помощью функций Копифиликс, CreateFile, Реплацефиле и Мовефиликс.
ms.assetid: 4872af0d-42e8-4576-9aa9-4b8671375f2e
title: Перемещение и замена файлов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35c78085865006d1dfbbe322239c4704d215d038897b81d1f139d66d06f65bbc
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119696014"
---
# <a name="moving-and-replacing-files"></a>Перемещение и замена файлов

Прежде чем можно будет выполнить операцию копирования, исходный файл должен быть закрыт или открыт только для чтения. Ни один поток не может иметь исходный файл, Открытый для записи. Чтобы скопировать существующий файл в новый, используйте функцию [**CopyFile**](/windows/desktop/api/WinBase/nf-winbase-copyfile) или [**копифиликс**](/windows/desktop/api/WinBase/nf-winbase-copyfileexa) . Приложения могут указать, завершается ли ошибка **CopyFile** и **копифиликс** , если конечный файл уже существует. Если конечный файл существует и открыт, он должен быть открыт с соответствующими разрешениями на общий доступ. Дополнительные сведения см. в разделе [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea).

Функция [**копифиликс**](/windows/desktop/api/WinBase/nf-winbase-copyfileexa) также позволяет приложению указать адрес функции обратного вызова (см. [**копипрогрессраутине**](/windows/desktop/api/WinBase/nc-winbase-lpprogress_routine)), который вызывается каждый раз при копировании другой части файла. Приложение может использовать эти сведения для отображения индикатора, показывающего общее количество байтов, скопированных в процентах от общего размера файла.

Функция [**реплацефиле**](/windows/desktop/api/WinBase/nf-winbase-replacefilea) заменяет один файл другим файлом с возможностью создания резервной копии исходного файла. Функция сохраняет атрибуты исходного файла, например время создания, списки ACL и атрибут шифрования.

Файл также должен быть закрыт, прежде чем приложение сможет его переместить. Функции [**MoveFile**](/windows/desktop/api/WinBase/nf-winbase-movefile) и [**мовефиликс**](/windows/desktop/api/WinBase/nf-winbase-movefileexa) копируют существующий файл в новое расположение и удаляют оригинал.

Функция [**мовефиликс**](/windows/desktop/api/WinBase/nf-winbase-movefileexa) также позволяет приложению указать способ перемещения файла. Функция может заменить существующий файл, переместить файл по томам и отложить перемещение файла до перезапуска операционной системы.

 

 



