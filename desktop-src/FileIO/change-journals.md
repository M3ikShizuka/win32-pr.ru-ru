---
description: При внесении каких-либо изменений в файл или каталог в томе журнал изменений USN для этого тома обновляется с описанием изменения и имени файла или каталога.
ms.assetid: 9a158c2b-da8e-4ca9-b3c1-2185cf41eb7d
title: Журналы изменений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fb5052ec87830a822270071a6ee00f1c3f7cffdd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103912872"
---
# <a name="change-journals"></a>Журналы изменений

Приложение для автоматического резервного копирования — это один из примеров программы, которая должна проверять состояние тома для выполнения задачи. Методом подбора, который проверяет наличие изменений в каталогах или файлах, является сканирование всего тома. Однако это неприемлемый подход, так как это может привести к снижению производительности системы. Другой способ — зарегистрировать уведомление каталога в приложении (путем вызова функций [**финдфирстчанженотификатион**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstchangenotificationa) или [**реаддиректоричанжесв**](/windows/desktop/api/WinBase/nf-winbase-readdirectorychangesw) ) для каталогов, для которых создается резервная копия. Это более эффективно, чем первый метод, но требует, чтобы приложение выполнялось в любое время. Кроме того, если необходимо выполнить резервное копирование большого количества каталогов и файлов, то объем обработки и нагрузки на память для такого приложения также может привести к снижению производительности операционной системы.

Чтобы избежать этих недостатков, файловая система NTFS хранит журнал изменений с порядковым номером обновления (USN). При внесении каких-либо изменений в файл или каталог в томе журнал изменений USN для этого тома обновляется с описанием изменения и имени файла или каталога.

Журналы изменений также необходимы для восстановления индексирования файловой системы, например после сбоя компьютера или тома. Возможность восстановления индексирования означает, что файловая система может избежать длительного процесса повторного индексирования всего тома в таких случаях.

В следующих разделах рассматриваются журналы изменений.

## <a name="in-this-section"></a>В этом разделе



| Раздел                                                                                                                             | Описание                                                                                                                                                                                                                                          |
|-----------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [Записи журнала изменений](change-journal-records.md)<br/>                                                                   | По мере добавления, удаления и изменения файлов, каталогов и других объектов файловой системы NTFS файловая система NTFS вводит в потоки записи журнала изменений, по одному для каждого тома на компьютере.<br/>                                           |
| [Использование идентификатора журнала изменений](using-the-change-journal-identifier.md)<br/>                                         | Файловая система NTFS связывает неподписанный 64-разрядный идентификатор с каждым журналом изменений.<br/>                                                                                                                                                   |
| [Создание, изменение и удаление журнала изменений](creating-modifying-and-deleting-a-change-journal.md)<br/>             | Администраторы могут создавать, удалять и повторно создавать журналы изменений.<br/>                                                                                                                                                                         |
| [Получение маркера тома для операций журнала изменений](obtaining-a-volume-handle-for-change-journal-operations.md)<br/> | Чтобы получить маркер для тома, который будет использоваться с операциями с журналом изменений (USN), вызовите функцию [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) с параметром *лпфиленаме* , для которого задана строка следующего вида: \\ \\ . \\ *X*.<br/> |
| [Операции с журналом изменений](change-journal-operations.md)<br/>                                                             | Управляющие коды и структуры для использования с журналом изменений USN в файловой системе NTFS.<br/>                                                                                                                                |



 

 

 




