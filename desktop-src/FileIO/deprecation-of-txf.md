---
description: В этом разделе обсуждаются альтернативы использованию транзакционного API NTFS (TxF) в общих сценариях использования.
ms.assetid: 9ee26e7e-990e-4cd3-8180-f0fcaac2b752
title: Альтернативы использованию транзакционной NTFS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4ab924c5ee4204180b891b3aad13a5809fa07671ad0e18d6ddc9ce353122ac80
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119765974"
---
# <a name="alternatives-to-using-transactional-ntfs"></a>Альтернативы использованию транзакционной NTFS

-   [Аннотация](#abstract)
-   [Введение](#introduction)
-   [Альтернативы для TxF по сценарию](#alternatives-to-txf-by-scenario)
-   [Приложения обновляют один файл с данными, подобными документу](#applications-updating-a-single-file-with-document-like-data)
-   [Приложения, выполняющие обновление нескольких файлов и (или) в кусте реестра](#applications-performing-updates-to-multiple-files-andor-to-the-registry-hive)
-   [Приложения, управляющие набором структурированных данных](#applications-managing-a-set-of-structured-data)
-   [приложения с транзакциями, включающими файлы на локальном томе NTFS и таблицах во внешней базе данных SQL](#applications-with-transactions-involving-files-on-a-local-ntfs-volume-and-tables-in-an-external-sql-database)
-   [Закрывается рекомендуемое действие &](/windows)

## <a name="abstract"></a>Аннотация

Корпорация Майкрософт настоятельно рекомендует разработчикам исследовать использование обсуждаемых альтернатив (или в некоторых случаях исследовать другие альтернативы) вместо внедрения платформы API, которая может быть недоступна в будущих версиях Windows.

## <a name="introduction"></a>Введение

система TxF появилась в Windows Vista в качестве средства для появления атомарных файловых транзакций для Windows. он позволяет разработчикам Windows иметь транзакционную атомарность для файловых операций в транзакциях с одним файлом, в транзакциях, включающих несколько файлов, и в транзакциях, охватывающих несколько источников, таких как реестр (через TxR) и базы данных (например, SQL). несмотря на то, что TxF является мощным набором интерфейсов api, в этой платформе API было чрезвычайно ограниченный интерес разработчика, так как Windows Vista в первую очередь из-за сложности и различных нюансов, которые разработчики должны учитывать как часть разработки приложений. в результате корпорация майкрософт рассматривает нерекомендуемые api TxF в будущей версии Windows, чтобы сконцентрировать усилия на разработке и обслуживании на других функциях и интерфейсах api, которые имеют больше возможностей для большей части клиентов. В следующем разделе приводятся примеры альтернативных методов для достижения аналогичных результатов, так как TxF может быть в нескольких типах сценариев приложений.

## <a name="alternatives-to-txf-by-scenario"></a>Альтернативы для TxF по сценарию

С учетом описанных выше ограничений разработчики должны исследовать альтернативы для TxF, чтобы охватить сценарии приложений, которые не соответствуют TxF. Здесь описаны некоторые из предлагаемых альтернативных вариантов использования TxF для разработчиков. Обратите внимание, что этот список не является ни исчерпывающим, ни полным.

## <a name="applications-updating-a-single-file-with-document-like-data"></a>Приложения обновляют один файл с данными, подобными документу

Многие приложения, работающие с данными, сходными с документами, обычно загружают весь документ в память, работают с ним, а затем записывают его обратно, чтобы сохранить изменения. Требуемая Атомарность здесь заключается в том, что изменения либо полностью применены, либо вообще не применяются, так как непротиворечивое состояние приведет к повреждению файла. Обычным подходом является запись документа в новый файл, а затем замена исходного файла на новый. Один из способов сделать это с помощью API [**реплацефиле**](/windows/desktop/api/WinBase/nf-winbase-replacefilea) .

## <a name="applications-performing-updates-to-multiple-files-andor-to-the-registry-hive"></a>Приложения, выполняющие обновление нескольких файлов и (или) в кусте реестра

Существует множество приложений, которым необходимо выполнить атомарное обновление набора файлов и реестра. чаще всего этот сценарий достигается с помощью приложения установщика, такого как установщик Windows. дополнительные сведения о установщик Windows см. в разделе [установщик Windows](/windows/desktop/Msi/windows-installer-portal).

## <a name="applications-managing-a-set-of-structured-data"></a>Приложения, управляющие набором структурированных данных

Многие приложения управляют некоторым набором собственных структур данных различных типов как средства хранения данных. Значительная сложность этих приложений — это процесс поддержания целостности внутренних указателей и ссылок в случае сбоя во время операции обновления. Создание механизма для этого, по крайней мере, является «жесткой проблемой», поэтому большинство приложений полагаются на истинный сервер базы данных для управления набором данных.

Ниже приведены два предложения по управлению структурированными данными.

-   корпорация майкрософт предоставляет в Windows папку "входящие" компонента расширения служба хранилища Engine (ESE), чтобы позволить приложениям выполнять операции обновления и получения данных транзакций. дополнительные сведения о расширенном обработчике служба хранилища (ESE) см. в разделе <https://msdn.microsoft.com/library/gg269259.aspx> .
-   Для приложений, которым требуется более мощный, надежный и масштабируемый поставщик баз данных, рекомендуется использовать функцию FILESTREAM, доступную в Microsoft SQL Server. дополнительные сведения о SQL filestreams см. в разделе <https://technet.microsoft.com/library/bb933993.aspx> .

## <a name="applications-with-transactions-involving-files-on-a-local-ntfs-volume-and-tables-in-an-external-sql-database"></a>приложения с транзакциями, включающими файлы на локальном томе NTFS и таблицах во внешней базе данных SQL

Существуют классы приложений, которые либо имеют большие объемы набора данных, либо должны иметь атомарность транзакций в операции, включающей внешнюю базу данных и локальное хранилище. в этом сценарии настоятельно рекомендуется, чтобы разработчики рассматривали использование SQL filestreams для выполнения транзакционных файловых операций. дополнительные сведения о SQL filestreams см. в разделе <https://technet.microsoft.com/library/bb933993.aspx> .

## <a name="closing--recommended-action"></a>Закрывается рекомендуемое действие &

TxF — это сложный и набор интерфейсов API, которые обычно не используются сторонними приложениями. благодаря возможности, что эти api могут быть недоступны в будущих версиях Windows и что есть более простые варианты для реализации многих сценариев, для которых была разработана система txf, корпорация майкрософт настоятельно рекомендует разработчикам исследовать эти альтернативные средства вместо создания зависимости от TxF в своих приложениях.

 

 
