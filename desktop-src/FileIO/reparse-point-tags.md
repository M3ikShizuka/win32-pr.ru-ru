---
description: Каждая точка повторного анализа имеет тег идентификатора, чтобы можно было эффективно различать различные типы точек повторного анализа без необходимости анализировать определяемые пользователем данные в точке повторного анализа.
ms.assetid: d02a2f50-d374-4149-bc04-49b7db052f62
title: Теги точек повторного анализа
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a53b65034347e2a2c07afcd6c1f03e31f73cef7e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105664047"
---
# <a name="reparse-point-tags"></a>Теги точек повторного анализа

Каждая точка повторного анализа имеет тег идентификатора, чтобы можно было эффективно различать различные типы точек повторного анализа без необходимости анализировать определяемые пользователем данные в точке повторного анализа. Система использует набор предопределенных тегов и диапазон тегов, зарезервированных для Microsoft. При использовании любого из зарезервированных тегов при задании точки повторного анализа операция завершается ошибкой. Теги, не входящие в эти диапазоны, не зарезервированы и доступны для приложения.

При установке точки повторного анализа необходимо пометить данные, которые будут помещены в точку повторного анализа. После установки точки повторного анализа новая операция Set завершается ошибкой, если тег для новых данных не соответствует тегу для существующих данных. Если теги совпадают, операция Set перезаписывает существующую точку повторного анализа.

Чтобы получить тег точки повторной обработки, используйте функцию [**FindFirstFile**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstfilea) . Если элемент **двфилеаттрибутес** включает атрибут **\_ \_ \_ точки повторного анализа атрибута файла** , то элемент **dwReserved0** указывает точку повторного анализа.

## <a name="tag-contents"></a>Содержимое тега

Теги повторного анализа хранятся в виде значений **типа DWORD** . Биты определяют определенные атрибуты, как показано на следующей схеме.

``` syntax
   3 3 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1
   1 0 9 8 7 6 5 4 3 2 1 0 9 8 7 6 5 4 3 2 1 0 9 8 7 6 5 4 3 2 1 0
  +-+-+-+-+-----------------------+-------------------------------+
  |M|R|N|R|     Reserved bits     |      Reparse tag value        |
  +-+-+-+-+-----------------------+-------------------------------+
```

Младшие 16 бит определяют тип точки повторного анализа. Старшие 16 бит зарезервированы 12 бит для будущего использования и 4 бита, которые обозначают определенные атрибуты тегов и данные, представленные точкой повторного анализа. Эти биты описаны в следующей таблице.



| bit | Описание                                                                                                  |
|-----|--------------------------------------------------------------------------------------------------------------|
| M   | Microsoft bit. Если этот бит задан, владельцем тега будет тег Майкрософт. Все остальные теги должны использовать ноль для этого бита. |
| R   | Процессу для всех тегов, отличных от Microsoft, значение должно быть равно нулю.                                                           |
| Нет   | Имя суррогатного бита. Если этот бит задан, файл или каталог представляет другую именованную сущность в системе. |



 

Существуют следующие макросы, помогающие в тестировании тегов:

-   [**исрепарсетагмикрософт**](/windows/desktop/api/Winnt/nf-winnt-isreparsetagmicrosoft)
-   [**исрепарсетагнамесуррогате**](/windows/desktop/api/Winnt/nf-winnt-isreparsetagnamesurrogate)

Каждый макрос возвращает ненулевое значение, если установлен соответствующий бит.

Ниже приведены предварительно определенные значения тегов повторного анализа Microsoft. они определены в WinNT. h:

-   **IO_REPARSE_TAG_AF_UNIX**
-   **IO_REPARSE_TAG_APPEXECLINK**
-   **IO_REPARSE_TAG_CLOUD**
-   **IO_REPARSE_TAG_CLOUD_1**
-   **IO_REPARSE_TAG_CLOUD_2**
-   **IO_REPARSE_TAG_CLOUD_3**
-   **IO_REPARSE_TAG_CLOUD_4**
-   **IO_REPARSE_TAG_CLOUD_5**
-   **IO_REPARSE_TAG_CLOUD_6**
-   **IO_REPARSE_TAG_CLOUD_7**
-   **IO_REPARSE_TAG_CLOUD_8**
-   **IO_REPARSE_TAG_CLOUD_9**
-   **IO_REPARSE_TAG_CLOUD_A**
-   **IO_REPARSE_TAG_CLOUD_B**
-   **IO_REPARSE_TAG_CLOUD_C**
-   **IO_REPARSE_TAG_CLOUD_D**
-   **IO_REPARSE_TAG_CLOUD_E**
-   **IO_REPARSE_TAG_CLOUD_F**
-   **IO_REPARSE_TAG_CLOUD_MASK**
-   **IO_REPARSE_TAG_CSV**
-   **IO_REPARSE_TAG_DEDUP**
-   **IO_REPARSE_TAG_DFS**
-   **IO_REPARSE_TAG_DFSR**
-   **IO_REPARSE_TAG_FILE_PLACEHOLDER**
-   **IO_REPARSE_TAG_GLOBAL_REPARSE**
-   **IO_REPARSE_TAG_HSM**
-   **IO_REPARSE_TAG_HSM2**
-   **IO_REPARSE_TAG_MOUNT_POINT**
-   **IO_REPARSE_TAG_NFS**
-   **IO_REPARSE_TAG_ONEDRIVE**
-   **IO_REPARSE_TAG_PROJFS**
-   **IO_REPARSE_TAG_PROJFS_TOMBSTONE**
-   **IO_REPARSE_TAG_SIS**
-   **IO_REPARSE_TAG_STORAGE_SYNC**
-   **IO_REPARSE_TAG_SYMLINK**
-   **IO_REPARSE_TAG_UNHANDLED**
-   **IO_REPARSE_TAG_WCI**
-   **IO_REPARSE_TAG_WCI_1**
-   **IO_REPARSE_TAG_WCI_LINK**
-   **IO_REPARSE_TAG_WCI_LINK_1**
-   **IO_REPARSE_TAG_WCI_TOMBSTONE**
-   **IO_REPARSE_TAG_WIM**
-   **IO_REPARSE_TAG_WOF**

Чтобы обеспечить уникальность тегов, корпорация Майкрософт предоставляет механизм распространения новых тегов. Дополнительные сведения см. в разделе [устанавливаемая файловая система (IFS)](https://www.microsoft.com/whdc/devtools/ifskit/reparse.mspx).

 

 



