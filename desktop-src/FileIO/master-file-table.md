---
description: Все сведения о файле, включая его размер, дату и время, разрешения и содержимое данных, хранятся либо в записях главной файловой таблицы (MFT), либо в пространстве, расположенном за пределами MFT, которое описывается записями MFT.
ms.assetid: e0933846-278e-4bc8-8982-c5819c252dad
title: Главная таблица файлов (локальные файловые системы)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 260740c03e7b7e4ebe9c7e8ec90035431f6be649
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105664422"
---
# <a name="master-file-table-local-file-systems"></a>Главная таблица файлов (локальные файловые системы)

Файловая система NTFS содержит файл с именем *главной таблицы файлов* или MFT. Существует по крайней мере одна запись в MFT для каждого файла на томе файловой системы NTFS, включая саму основную таблицу. Все сведения о файле, включая его размер, штамп времени и дату, разрешения и содержимое данных, хранятся либо в записях MFT, либо в пространстве, расположенном за пределами MFT, которое описывается записями MFT.

По мере добавления файлов в том файловой системы NTFS в MFT добавляются дополнительные записи, а размер MFT увеличивается. При удалении файлов с тома файловой системы NTFS их записи MFT помечаются как свободные и могут использоваться повторно. Однако место на диске, выделенное для этих записей, не перераспределяется, и размер MFT не уменьшается.

Файловая система NTFS резервирует пространство для MFT, чтобы размер MFT оставался непрерывным по мере роста. Пространство, зарезервированное файловой системой NTFS для MFT в каждом томе, называется зоной MFT. Пространство для файлов и каталогов также выделяется из этого пространства, но только после выделения всего пространства тома за пределами зоны MFT.

В зависимости от среднего размера файла и других переменных можно выделить зарезервированную зону MFT или незарезервированное пространство на диске, так как диск заполняется емкостью. Тома с небольшим количеством относительно больших файлов будут выделять незарезервированное пространство первыми, а тома с большим количеством относительно маленьких файлов сначала распределяются по зоне MFT. В любом случае фрагментация MFT начинает выполняться, когда один регион или другая выделяется полностью. Если незарезервированное пространство полностью выделено, пространство для файлов и каталогов пользователя будет выделено из зоны MFT. Если зона MFT полностью выделена, пространство для новых записей MFT будет выделено из незарезервированного пространства.

Саму таблицу MFT можно дефрагментировать. Чтобы снизить вероятность того, что зона MFT будет полностью выделена до завершения процесса дефрагментации, перед дефрагментацией тома оставьте как можно больше пространства в начале зоны MFT. Если зона MFT будет полностью распределена до завершения дефрагментации, то в ней должно быть нераспределенное пространство вне зоны MFT.

Зона MFT по умолчанию вычисляется и зарезервирована системой при подключении тома и основывается на размере тома. Вы можете увеличить зону MFT, используя запись реестра, описанную в [статье 174619 базы знаний Майкрософт](https://support.microsoft.com/kb/174619), но нельзя сделать зону MFT по умолчанию меньше вычисляемой. Увеличение зоны MFT не снижает объем места на диске, который пользователи могут использовать для файлов данных.

Чтобы определить текущий размер MFT, проанализируйте диск файловой системы NTFS с помощью дефрагментации диска, а затем нажмите кнопку **Просмотреть отчет** . Отобразится статистика диска, включая текущий размер MFT и число фрагментов. Размер MFT можно также получить с помощью кода управления [**фсктл \_ получения \_ \_ тома \_ NTFS**](/windows/win32/api/winioctl/ni-winioctl-fsctl_get_ntfs_volume_data) .

 

 
