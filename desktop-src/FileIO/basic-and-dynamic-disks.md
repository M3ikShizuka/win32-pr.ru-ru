---
description: Описывает два типа дискового пространства и обсуждает стили разделов.
ms.assetid: 5d511654-92e0-4236-80e7-bb2417403186
title: Базовые и динамические диски
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd3b52767983c7707f619b83c93e987b51879fdd
ms.sourcegitcommit: 3d9dce1bd6c84e2b51759e940aa95aa9b459cd20
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "103999992"
---
# <a name="basic-and-dynamic-disks"></a>Базовые и динамические диски

Перед секционированием диска или получением сведений о разметке раздела диска необходимо сначала разобраться в функциях и ограничениях типов базовых и динамических дисковых хранилищ.

В этом разделе термин " *том* " используется для обозначения понятия раздела диска, отформатированного с помощью допустимой файловой системы, наиболее часто используемой файловой системой NTFS, которая используется операционной системой Windows для хранения файлов. Том имеет имя пути Win32, может быть перечислено функциями [**финдфирстволуме**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstvolumew) и [**финднекстволуме**](/windows/desktop/api/FileAPI/nf-fileapi-findnextvolumew) , и обычно ему назначена буква диска, например C:. Дополнительные сведения о томах и файловых системах см. в разделе [файловые системы](file-systems.md).

В этом разделе:

-   [Базовые диски](#basic-disks)
-   [Динамические диски](#dynamic-disks)
-   [Стили разделов](#partition-styles)
    -   [основная загрузочная запись (MBR).](#master-boot-record)
    -   [таблица разделов GUID.](#guid-partition-table)
-   [Определение типа диска](#detecting-the-type-of-disk)
-   [См. также](#related-topics)

Существует два типа дисков, ссылающихся на типы хранилищ в этом контексте: *базовые диски* и *динамические диски*. Обратите внимание, что описываемые здесь типы хранилищ не совпадают с физическими дисками или стилями разделов, которые связаны, но являются отдельными концепциями. Например, ссылка на базовый диск не подразумевает определенный стиль раздела — необходимо также указать стиль раздела, используемый для диска в обсуждении. Упрощенное описание того, как базовый тип дискового накопителя связан с физическим жестким диском, см. в разделе [дисковые устройства и разделы](disk-devices-and-partitions.md).

## <a name="basic-disks"></a>Базовые диски

*Основные диски* — это типы хранилищ, наиболее часто используемые в Windows. Термин *базовый диск* относится к диску, содержащему разделы, такие как основные разделы и логические диски, которые, в свою очередь, обычно форматируются с помощью файловой системы и становятся томом для хранилища файлов. Базовые диски предоставляют простое решение для хранения данных, которое может соответствовать удобному массиву сценариев изменения требований к хранилищу. Базовые диски также поддерживают кластеризованные диски, институты гибких и аппаратных инженеров (IEEE) 1394 и съемные носители с универсальной последовательной шиной (USB). Для обеспечения обратной совместимости базовые диски обычно используют тот же стиль разделов основной загрузочной записи (MBR), что и диски, используемые операционной системой Microsoft MS-DOS, и все версии Windows, но также **могут поддерживать разделы таблицы разделов GPT в** системах, поддерживающих эту возможность. Дополнительные сведения о стилях разделов MBR и GPT см. в разделе [стили разделов](#partition-styles) .

Пространство в существующих основных разделах и на логических дисках можно увеличить за счет соседнего непрерывного нераспределенного пространства на том же диске. Для расширения базовый том должен быть отформатирован с использованием файловой системы NTFS. Расширить логический диск можно с помощью непрерывного свободного пространства в содержащем его расширенном разделе. Если расширить логический диск с использованием большего пространства, чем доступно в расширенном разделе, последний увеличивается, чтобы вместить логический диск, если за расширенным разделом следует непрерывное нераспределенное пространство. Дополнительные сведения см. в статье [как работают основные диски и тома](/previous-versions/windows/it-pro/windows-server-2003/cc739412(v=ws.10)).

Следующие операции могут выполняться только на базовых дисках:

-   Создание и удаление основных и дополнительных разделов.
-   Создание и удаление логических дисков в расширенном разделе.
-   Отформатируйте раздел и пометьте его как активный.

## <a name="dynamic-disks"></a>Динамические диски

> [!NOTE]
> Для всех случаев использования, за исключением зеркальных томов загрузки (с использованием зеркального тома для размещения операционной системы), динамические диски являются устаревшими. Для данных, требующих устойчивости к сбою диска, используйте дисковые пространства — отказоустойчивое решение для виртуализации хранилища. Дополнительные сведения см. в разделе [Общие сведения о дисковых пространствах](/windows-server/storage/storage-spaces/overview).

*Динамические диски* предоставляют функции, которые не являются базовыми дисками, например возможность создания томов, охватывающих несколько дисков (составные и чередующиеся тома), а также возможность создания отказоустойчивых томов (томов с зеркальным отображением и тома RAID 5). Как и базовые диски, динамические диски могут использовать стили разделов MBR или GPT в системах, поддерживающих оба. Все тома на динамических дисках называются динамическими томами. Динамические диски обеспечивают большую гибкость в управлении томами, так как они используют базу данных для мониторинга сведений о динамических томах на диске и о других динамических дисках компьютера. Так как каждый динамический диск в компьютере хранит реплику базы данных динамического диска, например, поврежденная база данных динамического диска может восстановить один динамический диск с помощью базы данных на другом динамическом диске. Расположение базы данных определяется стилем раздела диска. В MBR-разделах база данных хранится за последние 1 мегабайт (МБ) диска. В разделах GPT база данных содержится в зарезервированной (скрытой) секции размером 1 МБ.

Динамические диски — это отдельные формы управления томами, которые позволяют томам иметь несмежные экстенты на одном или нескольких физических дисках. Динамические диски и тома зависят от диспетчера логических дисков (LDM) и службы виртуальных дисков (VDS) и связанных с ними функций. Эти функции позволяют выполнять такие задачи, как преобразование базовых дисков в динамические диски и создание отказоустойчивых томов. Чтобы обеспечить использование динамических дисков, поддержка томов с несколькими разделами была удалена с базовых дисков и теперь поддерживается исключительно на динамических дисках.

Следующие операции могут выполняться только на динамических дисках:

-   Создание и удаление простых, составных, чередующихся, зеркальных и RAID-5 томов.
-   Расширение простого или составного тома.
-   Удалите зеркало из зеркального тома или разбейте зеркальный том на два тома.
-   Исправьте тома с зеркальным отображением или RAID-5.
-   Повторно активируйте отсутствующий или отключенный диск.

Еще одно различие между базовыми и динамическими дисками заключается в том, что динамические тома диска могут состоять из набора несмежных экстентов на одном или нескольких физических дисках. В отличие от этого, том на базовом диске состоит из одного набора непрерывных экстентов на одном диске. Из-за расположения и размера дискового пространства, необходимого для базы данных LDM, Windows не может преобразовать базовый диск в динамический, если на диске не должно быть не менее 1 МБ неиспользуемого пространства.

Независимо от того, использует ли динамические диски в системе стиль разделов MBR или GPT, можно создать до 2 000 динамических томов в системе, хотя рекомендуемое число динамических томов — 32 или меньше. Дополнительные сведения и другие рекомендации по использованию динамических дисков и томов см. в разделе [динамические диски и тома](/previous-versions/windows/it-pro/windows-server-2003/cc757696(v=ws.10)).

Дополнительные возможности и сценарии использования динамических дисков см. в разделе [что такое динамические диски и тома?](/previous-versions/windows/it-pro/windows-server-2003/cc737048(v=ws.10)).

Ниже перечислены операции, общие для базовых и динамических дисков.

-   Поддержка стилей разделов MBR и GPT.
-   Проверьте свойства диска, такие как емкость, доступное свободное пространство и текущее состояние.
-   Просмотр свойств секции, таких как смещение, длина, тип, и, если секция может использоваться в качестве системного тома при загрузке.
-   Просмотр свойств тома, таких как размер, назначение буквы диска, метка, тип, имя пути Win32, тип секции и файловая система.
-   Установите назначения букв дисков для томов или разделов диска, а также для устройств чтения компакт-дисков.
-   Преобразование базового диска в динамический диск или динамического диска на базовый диск.

Если не указано иное, Windows изначально разделяет диск как базовый диск по умолчанию. Необходимо явным образом преобразовать базовый диск в динамический. Тем не менее существуют рекомендации относительно места на диске, которые необходимо учитывать перед тем, как вы попытаетесь сделать это. Дополнительные сведения см. в статье [Преобразование в базовые и динамические диски в Windows XP Professional](https://support.microsoft.com/kb/309044).

## <a name="partition-styles"></a>Стили разделов

*Стили секций*, иногда называемые *схемами секционирования*, являются термином, указывающим на конкретную базовую структуру структуры диска и то, как на самом деле упорядочивается секционирование, каковы возможности, а также ограничения. Для загрузки Windows в реализации BIOS на компьютерах с архитектурой x86 и x64 требуется базовый диск, который должен содержать по крайней мере один раздел основной загрузочной записи (MBR), помеченный как активный, где содержатся сведения о операционной системе Windows (но не обязательно об установке всей операционной системы), а также о том, где хранятся сведения о секциях на диске. Эти сведения помещаются в отдельные места, и эти два расположения могут размещаться в отдельных разделах или в одном разделе. Все остальные физические диски могут быть настроены в качестве различных сочетаний двух доступных стилей разделов, описанных в следующих разделах. Дополнительные сведения о других типах систем см. в разделе о [стилях разделов](/previous-versions/windows/it-pro/windows-server-2003/cc738081(v=ws.10))TechNet.

Динамические диски следуют слегка отличающимся сценариям использования, как описано выше, и способ применения этих двух стилей разделов. Так как динамические диски обычно не используются для хранения системных загрузочных томов, в этом обсуждении упрощено исключение сценариев особых случаев. Дополнительные сведения о структурах блоков данных разделов, а также о базовых и динамических сценариях использования диска, связанных со стилями разделов, см. в статье [как работают базовые диски и тома](/previous-versions/windows/it-pro/windows-server-2003/cc739412(v=ws.10)) и [как работают динамические диски и тома](/previous-versions/windows/it-pro/windows-server-2003/cc758035(v=ws.10)).

### <a name="master-boot-record"></a>основная загрузочная запись (MBR).

Все компьютеры на базе x86 и x64, работающие под управлением Windows, могут использовать стиль разделов, известный как *Основная загрузочная запись* (MBR). Стиль раздела MBR содержит таблицу разделов, в которой содержатся сведения о том, где находятся секции на диске. Поскольку MBR является единственным стилем разделов, доступным на компьютерах на базе процессоров x86 до выхода Windows Server 2003 с пакетом обновления 1 (SP1), нет необходимости выбирать этот стиль. Он используется автоматически.

На базовом диске можно создать до четырех разделов, используя схему разделов MBR: четыре основных раздела, три первичных и один расширенные. Расширенный раздел может содержать один или несколько логических дисков. На следующем рисунке показан пример макета для трех основных разделов и один дополнительный раздел на базовом диске с использованием MBR. В расширенном разделе содержится четыре дополнительных логических диска. Расширенный раздел может находиться в конце диска или не располагаться в нем, но для логических дисков с 1 по n всегда используется одно непрерывное пространство.

![три основных раздела и один дополнительный раздел на базовом диске с использованием MBR](images/basic-mbr.png)

Каждая секция (первичная или расширенная) может быть отформатирована как том Windows с корреляцией "один к одному". Иными словами, одна секция не может содержать более одного тома. В этом примере для хранения файлов в Windows доступно семь томов. Неформатированный раздел недоступен для хранилища файлов в Windows.

Структура MBR динамического диска очень похожа на структуру основного диска MBR, за исключением того, что допускается только один основной раздел (называемый разделом LDM), расширенное секционирование не разрешается, и в конце диска для базы данных LDM имеется скрытая секция. Дополнительные сведения о LDM см. в разделе [динамические диски](#basic-and-dynamic-disks) .

### <a name="guid-partition-table"></a>таблица разделов GUID.

В системах под Windows Server 2003 с пакетом обновления 1 (SP1) и более поздних версий в дополнение к стилю раздела MBR можно использовать стиль разделов, известный как таблица разделов (**GUID**) для глобального уникального идентификатора (GPT). Базовый диск, использующий стиль разделов GPT, может иметь до 128 основных разделов, в то время как динамические диски будут иметь один раздел LDM с разделением MBR. Поскольку базовые диски, использующие секционирование GPT, не ограничивают вас четырьмя секциями, создавать расширенные разделы или логические диски не требуется.

Стиль раздела GPT также имеет следующие свойства.

-   Допускает разделы размером более 2 терабайт.
-   Добавлена надежность репликации и циклической проверки избыточности (CRC) таблицы Partition.
-   Поддержка дополнительных **идентификаторов GUID** типа раздела, определенных производителями оборудования (OEM), независимыми поставщиками программного обеспечения и другими операционными системами.

Схема секционирования GPT для базового диска показана на следующем рисунке.

![макет GPT](images/basic-gpt.png)

Защитная область MBR существует в разметке разделов GPT для обеспечения обратной совместимости с служебными программами управления дисками, работающими с MBR. Заголовок GPT определяет диапазон адресов логических блоков, которые можно использовать в записях секций. Заголовок GPT также определяет расположение на диске, его **GUID** и контрольную сумму 32-битной циклической проверки избыточности (CRC32), которая используется для проверки целостности заголовка GPT. Каждая запись раздела **GUID** начинается с GUID типа секции. **Идентификатор GUID** типа секции 16 байт, АНАЛОГИЧный идентификатору системы в таблице разделов диска MBR, определяет тип данных, содержащихся в секции, и определяет способ использования раздела, например, если это базовый диск или динамический диск. Обратите внимание, что каждая запись раздела **GUID** имеет резервную копию.

Структура динамических дисковых разделов **GPT** похожа на этот базовый пример диска, но, как уже упоминалось ранее, у него есть только одна запись раздела LDM, а не 1-n основных разделов, как разрешено на базовых дисках. Кроме того, существует скрытая Секция базы данных LDM с соответствующей записью раздела **GUID** . Дополнительные сведения о LDM см. в разделе [динамические диски](#basic-and-dynamic-disks) .

## <a name="detecting-the-type-of-disk"></a>Определение типа диска

Нет специальных функций для программного обнаружения типа диска, на котором находится определенный файл или каталог. Существует косвенный метод.

* Передайте путь к файлу или каталогу [**жетволумепаснаме**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumepathnamew) для получения точки подключения.
* Передайте точку подключения в [**жетволуменамефорволумемаунтпоинт**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumenameforvolumemountpointw) , чтобы получить имя тома.
* Удалите обратную косую черту в конце имени тома.
* Передайте имя тома без обратной косой черты в [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) для открытия тома.
* Чтобы получить номера дисков, используйте параметр [**ioctl \_ Volume \_ Получение \_ \_ дисковых \_ областей тома**](/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_volume_get_volume_disk_extents) с помощью маркера тома.
* Используйте номера дисков для создания путей к дискам, например " \\ \\ ? \\ Фисикалдриве *X*".
* Передайте каждый дисковый путь в [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) , чтобы открыть диск.
* Чтобы получить список секций, используйте [**ioctl \_ Disk \_ получить \_ \_ структуру диска \_ ex**](/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_drive_layout_ex) .
* Проверьте **PartitionType** для каждой записи в списке секций.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Об управлении томами](about-volume-management.md)
</dt> <dt>

[Технический справочник по основным дискам и томам](/previous-versions/windows/it-pro/windows-server-2003/cc784732(v=ws.10))
</dt> <dt>

[Технический справочник по динамическим дискам и томам](/previous-versions/windows/it-pro/windows-server-2003/cc785638(v=ws.10))
</dt> <dt>

[Базовое хранилище и динамическое хранилище в Windows XP]( https://support.microsoft.com/kb/314343/)
</dt> </dl>

 

 
