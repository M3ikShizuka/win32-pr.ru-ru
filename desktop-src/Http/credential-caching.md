---
title: Кэширование учетных данных
description: Кэширование учетных данных
ms.assetid: 6e411333-56fa-455b-a90a-f2b54f3c9545
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 34a139d0cd90495de87f42de08687fd3157acaf6
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986665"
---
# <a name="credential-caching"></a>Кэширование учетных данных

## <a name="credential-caching-on-ntlm-ka-connections"></a>Кэширование учетных данных для подключений NTLM ка

API сервера HTTP кэширует учетные данные только для подключений Keep-Alive (ка) для проверки подлинности NTLM. По умолчанию API сервера HTTP кэширует учетные данные, полученные в первом запросе, отправленном по соединению ка. Клиент может отправить последующие запросы на подключения типа "Ка" без заголовка авторизации и получить проверку подлинности на основе ранее установленного контекста. В этом случае API сервера HTTP отправляет маркер на основе кэшированных учетных данных в приложение. Учетные данные для запроса, отправленного прокси-сервером, не кэшируются. Приложение отключает кэширование учетных данных NTLM, устанавливая флаг **дисаблентлмкредентиалкачинг** в структуре [**\_ \_ \_ сведений о проверке подлинности HTTP-сервера**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) , которая предоставляется в вызовах хттпсетсерверсессионпроперти или хттпсетурлграуппроперти. Если кэширование учетных данных отключено, API сервера HTTP отклоняет кэшированные учетные данные и выполняет проверку подлинности для каждого запроса.

## <a name="ntlm-credential-caching-for-specific-urls"></a>Кэширование учетных данных NTLM для конкретных URL-адресов

Приложение определяет, кэшируются ли учетные данные запроса, возвращаемые API-сервером HTTP, путем проверки параметра flags в \_ \_ структуре сведений о проверке подлинности HTTP-запроса \_ . Этот параметр указывает \_ \_ токен флага проверки подлинности HTTP-запроса \_ \_ \_ для \_ кэшированного \_ cred, когда возвращенный токен NTLM был получен из кэша. Кэширование учетных данных указывается в группе URL-адресов для всех URL-адресов в группе. Кэширование учетных данных для каждого URL-адреса не поддерживается, однако приложения могут определить, следует ли принимать или отклонять кэшированные учетные данные по URL-адресу, проверяя \_ \_ маркер флага http-запроса проверки подлинности \_ \_ \_ для \_ кэшированного \_ флага в \_ \_ структуре сведений о проверке подлинности HTTP-запроса \_ . Приложение отклоняет кэшированные учетные данные, отправляя клиенту запрос проверки подлинности 401. Затем клиент повторно отправляет запрос с заголовками авторизации, активируя новое подтверждение проверки подлинности с помощью API сервера HTTP.

## <a name="basic-authentication"></a>Обычная проверка подлинности

Если в запрос включен заголовок обычной проверки подлинности, API сервера HTTP анализирует заголовок, чтобы получить имя пользователя и пароль. Затем имя пользователя проанализируется в частях пользователя и домена. API сервера HTTP кэширует маркер доступа, полученный для обычной проверки подлинности, на основе имени пользователя и ключа домена. При получении нового запроса API сервера HTTP Извлекает маркер доступа на основе имени пользователя и домена. Затем пароль в запросе проверяется по кэшированному паролю. Кэшированный маркер доступа удаляется по достижении ограничения срока жизни (TTL).

 

 




