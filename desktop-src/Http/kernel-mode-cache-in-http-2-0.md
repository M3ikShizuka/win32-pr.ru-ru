---
title: Кэш режима ядра
description: Кэш режима ядра
ms.assetid: f9a46ff4-779b-4b3a-b8f5-1ae10a3c0a61
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 83c409b00da03c0550899f5d26c4e6a0fa215118
ms.sourcegitcommit: 95685061d5b0333bbf9e6ebd208dde8190f97005
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2021
ms.locfileid: "108090892"
---
# <a name="kernel-mode-cache"></a>Кэш режима ядра

API-интерфейс версии 2,0 сервера HTTP позволяет приложениям кэшировать ответы со статическим содержимым в режиме ядра. Повышение производительности достигается, когда запросы обслуживаются из кэша ядра без перехода в пользовательский режим.

API сервера HTTP применяет соответствующие конфигурации свойств ко всем запросам, которые обрабатываются из кэша ядра, включая ответы на журналы. Однако запросы, требующие проверки подлинности, не будут обслуживаться из кэша.

API сервера HTTP ограничивает кэш в режиме ядра запросами, которые отвечают следующим условиям:

-   Команда запроса получает значение GET, и получается весь запрос.
-   Запрос не должен содержать тело сущности.
-   Протокол HTTP имеет версию 1,0 или более позднюю.
-   Заголовок "перевод: f" отсутствует.
-   Требуются заголовки, отличные от "предположительно: 100-Continue".
-   Заголовок авторизации отсутствует.
-   Заголовки Range и If-Range отсутствуют.

В дополнение к ограничениям на запрос ответ также должен соответствовать следующим условиям.

-   По умолчанию размер ответа ограничен 256 КБ. Чтобы изменить размер кэшированного ответа, задайте для параметра реестра **уримаксурибитес** необходимое число байтов.

    ```
    HKEY_LOCAL_MACHINE
       System
          CurrentControlSet
             Services
                HTTP
                   Parameters
                      UriMaxUriBytes
    ```

-   Весь ответ должен быть предоставлен в одном вызове [**хттпсендхттпреспонсе**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse).
-   Заголовок даты в ответе не должен быть подавлен.
-   Если заголовок Last-Modified имеется, значение заголовка должно иметь правильный синтаксис. Значение времени в этом заголовке используется для проверки управления кэшем.
-   В кэше режима ядра осталось достаточно места для хранения ответа.

По умолчанию кэш ответов режима ядра включен. Если какое либо условие для указанного выше запроса или ответа не выполнено, ответ будет отправлен, но не будет кэшироваться. В API сервера HTTP версии 2,0 [**хттпсендхттпреспонсе**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) включает необязательный параметр *пкачеполици* для передачи структуры [**\_ \_ политики кэша HTTP**](/windows/desktop/api/Http/ns-http-http_cache_policy) . Приложения используют структуру политики кэша для настройки кэша.

 

 




