---
title: Обработка регистраций
description: API-интерфейсы сервера HTTP используют базу данных маршрутизации для применения проверок доступа во время регистрации.
ms.assetid: d72aa213-b8e8-4fe9-b98c-41114d2cea56
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 74454d888cccf083e27fc9067c8a5485e286b4f55df4c5c18f2b2e490dc9db39
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118393847"
---
# <a name="processing-registrations"></a>Обработка регистраций

API-интерфейсы сервера HTTP используют базу данных маршрутизации для применения проверок доступа во время регистрации. Регистрация для [UrlPrefix](urlprefix-strings.md) должна пройти ряд проверок доступа, чтобы убедиться, что пользователь, регистрирующий для пространства имен, имеет права доступа. Используйте функцию [**хттпаддурл**](/windows/desktop/api/Http/nf-http-httpaddurl) для добавления новой регистрации.

**Добавление новой регистрации с помощью Хттпаддурл**

1.  Если номер порта в UrlPrefix содержит резервирования или регистрации для схемы, отличной от схемы в UrlPrefix, регистрация завершается ошибкой. Протоколы HTTP и HTTPS не поддерживаются в одном и том же порте.
2.  Регистрация будет вставлена в соответствующий контейнер для регистрации. Контейнеры основаны на типе узла URL-адреса, как описано в разделе [Маршрутизация входящих запросов](routing-incoming-requests.md) . Следующие шаги относятся к конкретному сегменту.
3.  Если повторяющаяся регистрационная запись существует, возвращает код ошибки.
4.  Выберите записи резервирования с компонентами схемы, узла и порта, равными параметрам UrlPrefix. В этом случае нахождение записи с наибольшим совпадением **relativeUri** . Если запись существует, проверьте разрешения на основе списка управления доступом, связанного с этой записью, и возвратите значение Success. Если запись не существует, возвращает код ошибки, которая \_ уже \_ существует.

В следующих примерах демонстрируется процесс установки регистрации в базе данных маршрутизации. В базе данных маршрутизации существуют резервирования 1 и 2.

-   Резервирование 1 `https://+:80/vroot/subdir/` . для пользователей а и в. Это резервирование помещается в контейнер "+".
-   Резервирование 2 — `https://adatum.com:80/vroot/` для пользователя б. Это резервирование помещается в контейнер "явный узел".
-   Регистрация: `https://+:80/vroot/subdir/` пользователь б завершается сбоем из-за резервирования 1.
-   Регистрация: `https://adatum.com:80/vroot/subdir/` пользователь б будет выполнен из-за резервирования 2.
-   Регистрация. `https://adatum.com:80/vroot/subdir/` пользователь в завершается сбоем из-за более явного резервирования 2. Строгое резервирование с подстановочными знаками не имеет смысла в контексте явного резервирования или регистрации.
-   Регистрация. `https://+:80/vroot/subdir/` пользователь A проходит успешную попытку из-за резервирования 1.
-   Регистрация: `https://adatum.com:80/vroot/anotherdir/` пользователь б будет выполнен из-за резервирования 2.

Проверка доступа для регистрации не включает проверки привилегий делегирования. Нет проверок доступа на основе резервирований (см. [**хттпремовеурл**](/windows/desktop/api/Http/nf-http-httpremoveurl)). Единственным требованием для удаления регистрации является то, что в вызывающем процессе должна быть создана регистрация.

 

 




