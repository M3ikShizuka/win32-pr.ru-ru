---
title: Режим ядра SSL
description: Режим ядра SSL
ms.assetid: ada82704-cb7d-4e98-8c87-76c7bfbd098b
keywords:
- Режим ядра SSL
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fdfbc66e72f4e3e79c53207cbe9f4b77d3887b36
ms.sourcegitcommit: 9b5faa61c38b2d0c432b7f2dbee8c127b0e28a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2021
ms.locfileid: "122475500"
---
# <a name="kernel-mode-ssl"></a>Режим ядра SSL

режим ядра SSL появился в Windows Server 2003 с пакетом обновления 1 (SP1) с ограниченной поддержкой. для компьютеров, работающих на Windows Server 2003 с пакетом обновления 1 (SP1), необходимо установить раздел реестра, чтобы включить SSL ядра. для компьютеров, работающих на Windows Server 2008 и Windows Vista, предоставляется полная поддержка режима ядра SSL.

В следующих разделах описывается поддержка SSL в режиме ядра:

-   режим ядра SSL в Windows Server 2003 с пакетом обновления 1 (SP1)
-   режим ядра SSL в Windows Server 2008 и Windows Vista

## <a name="kernel-modes-ssl-in-windows-server-2003-with-sp1"></a>режим ядра SSL в Windows Server 2003 с пакетом обновления 1 (SP1)

в Windows server 2003 с пакетом обновления 1 (SP1) API HTTP-сервера предоставляет возможность запуска безопасности ssl в режиме ядра (по умолчанию используется ssl в пользовательском режиме). Режим ядра повышает производительность SSL за счет перемещения операций шифрования и расшифровки в ядро, уменьшая число переходов между режимом ядра и пользовательским режимом.

Следующие функции не поддерживаются при запуске SSL в режиме ядра:

-   Client certificates
-   Шифры RC2
-   Протокол PCT 1,0
-   Изменение конфигурации сертификата сервера требует перезапуска службы HTTP
-   Поддержка множественного шифрования и разгрузки

## <a name="configuring-kernel-mode-ssl"></a>Настройка режима ядра SSL

Режим ядра SSL управляется параметром реестра **енаблекернелссл** и включается путем установки значения 1. Включение режима ядра SSL отключит пользовательский режим SSL и требует перезапуска службы HTTP для вступления в силу. Раздел реестра **енаблекернелссл** находится по адресу:

**HKey \_ \_** Параметры HTTP для локальной \\ **системы** \\ **CurrentControlSet** \\ **Services** \\  \\  \\ **енаблекернелссл**

## <a name="kernel-mode-ssl-in-windows-server-2008-and-windows-vista"></a>режим ядра SSL в Windows Server 2008 и Windows Vista

для компьютеров, работающих на Windows server 2008 и Windows Vista, API сервера HTTP включает расширенные функции SSL.

Поддерживаются следующие новые возможности:

-   Полная поддержка сертификата клиента в режиме ядра SSL
-   Режим ядра SSL для всех HTTP-транзакций SSL
-   Поддержка множественного шифрования и разгрузки
-   Протокол PCT 1,0
-   Шифры RC2
-   Повышенная производительность в пользовательском режиме SSL

## <a name="configuration"></a>Конфигурация

Режим ядра SSL можно настроить с помощью двух значений реестра в разделе параметров HTTP, расположенном по адресу:

```
HKEY_LOCAL_MACHINE
   System
      CurrentControlSet
         Services
            HTTP
               Parameters
                  EnableSslCloseNotify
                  DisableSslCertChainCacheOnlyUrlRetrieval
```

Пользователь должен иметь права администратора или локальной системы, чтобы изменить значения реестра, а также просмотреть или изменить файлы журнала и папку, в которой они находятся.

Сведения о конфигурации в значениях реестра считываются при запуске драйвера API сервера HTTP. В результате, если параметры изменены, драйвер должен быть остановлен и перезапущен для считывания новых значений. Это можно сделать с помощью следующих команд консоли:

**NET останавливает HTTP**

**NET start http**

В следующей таблице перечислены значения конфигурации реестра.




| Значение реестра | Описание | 
|----------------|-------------|
| енаблекернелссл | <strong>Windows Server 2008 и Windows Vista:</strong> Это значение реестра устарело.<br /> | 
| енаблесслклосенотифи | Значение <strong>типа DWORD</strong> , равное <strong>true</strong> , чтобы включить функцию Close-notify, или <strong>false</strong> , чтобы отключить требование Close-notify. По умолчанию Close — notify отключен.<br /> Если параметр Close-notify включен, клиентское приложение должно отправить сообщение Close (уведомление) перед закрытием TCP-подключений. API-интерфейс сервера HTTP также отправляет запрос Close — notify перед закрытием соединения.<br /> Если функция Close-notify включена и клиент отправляет сообщение Close-notify, то API HTTP-сервера будет повторно использовать сеанс SSL при последующих подключениях к клиенту. Если клиент не отправляет сообщение Close-notify, API сервера HTTP не будет повторно использовать тот же сеанс SSL для будущих соединений. Таким образом, для нового подключения активируется полное подтверждение SSL, что снижает производительность. <br /><blockquote>[!Note]<br />Включение функции Close — notify помогает устранить атаки усечения для HTTPS-запросов и ответов.</blockquote><br /><br /> Если функция Close-notify отключена, API сервера HTTP повторно использует сеанс SSL для будущих подключений.<br /> | 
| дисаблесслцертчаинкачеонлюрлретриевал | Значение <strong>типа DWORD</strong> , равное <strong>true</strong> , чтобы разрешить API HTTP-сервера получать промежуточные сертификаты из Интернета или локального хранилища или <strong>false</strong> для получения промежуточных сертификатов только из локального хранилища. Значение реестра по умолчанию — <strong>false</strong>.<br /> По умолчанию API сервера HTTP создает цепочку сертификатов клиента, получая промежуточные сертификаты из промежуточного хранилища центра сертификации под учетной записью локального компьютера. Установка этого значения равным <strong>true</strong> позволяет API-интерфейсу сервера HTTP получать промежуточные сертификаты не только из локального хранилища, но и из промежуточного центра сертификации в Интернете.<br /> | 




 

 

 





