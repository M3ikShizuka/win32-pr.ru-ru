---
title: Именованная очередь запросов
description: Именованная очередь запросов
ms.assetid: d0686a9b-fc3d-4b69-b083-d04b35ce5b50
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0d2174044f23f30470f3285e3c8fcf9bd2dbd474b10c306df7f2fbb215b992eb
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120078352"
---
# <a name="named-request-queue"></a>Именованная очередь запросов

API-интерфейс версии 2,0 сервера HTTP с именем "очередь запросов" позволяет использовать несколько приложений, работающих в рамках отдельных процессов и учетных записей пользователей, доступ к очереди запросов. Очередь запросов открывается по имени и защищена с помощью списков управления доступом (ACL), чтобы гарантировать, что приложения не смогут получить доступ к другим данным. Один процесс создает очередь запросов и предоставляет другим процессам разрешение на использование очереди запросов. Поэтому другие процессы на компьютере обращаются к очереди запросов с минимальными привилегиями, необходимыми для запросов на обслуживание. Повреждение службы HTTP может повредиться из-за уязвимостей в коде стороннего разработчика, если приложения выполняются с минимальными привилегиями.

Именованная очередь запросов создается с помощью функции [**хттпкреатерекуесткуеуе**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) . При создании очереди запросов приложение указывает список ACL в параметре *псекуритяттрибуте* . Список управления доступом, который может быть установлен только при создании очереди запросов, позволяет рабочим процессам открывать очередь запросов, получать запросы и отправлять ответы. По умолчанию процессы не могут открывать очередь запросов, если только им не было предоставлено разрешение в списке управления доступом. Для создания очереди запросов приложениям не требуются права администратора.

Для открытия очереди запросов необходимо создать очередь запросов с именем, указанным в параметре *pName* параметра [**хттпкреатерекуесткуеуе**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) , чтобы другие процессы открыли очередь запроса. Если *pName* имеет **значение NULL**, создается неименованная очередь запросов, и другие процессы не могут его открыть.

## <a name="creator-and-controller-processes"></a>Процессы создателя и контроллера

После создания очереди запросов приложение может открыть его как процесс контроллера или процесс создания. Контроллер и создатель процессов выполняют роль администраторов для очереди запросов, но контроллер не выполняет операции ввода-вывода на нем. Приложение указывает, что это процесс контроллера, когда очередь запросов создается путем указания **\_ \_ \_ \_ \_ контроллера флага http Create Request** в параметре *flags* параметра [**хттпкреатерекуесткуеуе**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue). Если флаг **\_ \_ \_ \_ \_ контроллера флага http-запроса на создание очереди** не установлен, приложение является процессом создателя.

В следующем списке содержатся задачи, выполняемые процессом контроллера и процессом создателя:

-   Создайте очередь запросов и укажите имя.
-   Настройте очередь запросов с помощью функции [**хттпсетрекуесткуеуепроперти**](/windows/desktop/api/Http/nf-http-httpsetrequestqueueproperty) .
-   Запросите параметры конфигурации очереди запросов с помощью функции [**хттпкуерирекуесткуеуепроперти**](/windows/desktop/api/Http/nf-http-httpqueryrequestqueueproperty) .
-   Создайте группы URL-адресов и связывает их с очередью запросов.
-   Задайте список управления доступом, указывающий рабочие процессы, которым разрешено принимать операции ввода-вывода в очереди запросов.
-   Вызовите [**хттпваитфордемандстарт**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) , чтобы отложить создание экземпляра рабочих процессов до тех пор, пока первый запрос не поступит в очередь запросов.

В дополнение к этим задачам процесс создания также может выполнять операции ввода-вывода в очереди запросов.

## <a name="worker-processes"></a>Рабочие процессы

Рабочий процесс может открыть существующую очередь запросов, только если им предоставлен доступ к ней в списке ACL. Рабочие процессы, работающие с минимальными привилегиями, могут открыть очередь запросов и выполнить операции ввода-вывода. Приложения открывают существующую очередь запросов, вызывая [**хттпкреатерекуесткуеуе**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) с **\_ \_ флагом HTTP Create Request \_ очереди, \_ \_ открытым \_** в параметре *flags* , и именем очереди запросов в параметре *pName* .

Рабочий процесс выполняет следующие функции:

-   Получение запросов и отправка ответов в очередь запросов.
-   Открытие существующей очереди запросов по имени. Невозможно использовать для настройки очереди запросов обработчик запросов, возвращаемый в рабочий процесс.
-   Запросите параметры конфигурации очереди запросов.

На следующей диаграмме показана модель рабочего процесса для очередей запросов. Очередь запросов может иметь несколько рабочих процессов, обрабатывающих операции ввода-вывода, и один процесс создателя, который настраивает очередь запросов.

![модель рабочего процесса для очередей запросов](images/namedrequestqueue.png)

 

 




