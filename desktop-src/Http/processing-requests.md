---
title: Обработка запросов
description: Обработка запросов включает в себя четыре шага.
ms.assetid: fb170d73-c26d-4bec-abed-b614b7dad322
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1ea69ca4e431a4ff1841f08913b33bcb7dd57128f327aaeeac158fb62ea7a7b6
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117996257"
---
# <a name="processing-requests"></a>Обработка запросов

Обработка запросов включает в себя четыре шага:

-   Получение запроса
-   Обработка запроса
-   Отправка ответа
-   Отмена запросов, которые не могут быть обработаны

![Схема, на которой показан цикл обработки запросов.](images/processloop.png)

## <a name="receiving-a-request"></a>Получение запроса

API сервера HTTP предоставляет структуру запросов для хранения проанализированного входящего запроса. Эта структура выделяется приложением и инициализируется при получении входящего запроса. Приложение вызывает функцию [**хттпрецеивехттпрекуест**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) для получения запроса. Если буфер запроса слишком мал для получения запроса, приложение может увеличить размер буфера и вызвать **хттпрецеивехттпрекуест** еще раз, чтобы получить весь запрос.

Если запрос содержит данные тела сущности для получения, приложения вызывают [**хттпрецеиверекуестентитибоди**](/windows/desktop/api/Http/nf-http-httpreceiverequestentitybody) с идентификатором запроса, возвращенным в параметре *прекуестбуффер* во время вызова [**хттпрецеивехттпрекуест**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest).

## <a name="handling-the-request"></a>Обработка запроса

Приложение выполняет обработку запроса в зависимости от конкретного приложения и формирует ответ. API сервера HTTP не накладывает время ожидания для этого процесса.

## <a name="sending-the-response"></a>Отправка ответа

Когда приложение завершает обработку запроса и составления ответ, он вызывает функцию [**хттпсендхттпреспонсе**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) для отправки ответа. Если ответ содержит данные тела сущности для отправки, приложение также вызывает [хттпсендреспонсинтитибоди](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody).

## <a name="canceling-requests"></a>Отмена запросов

После того как приложение получило идентификатор запроса от его вызова к [**хттпрецеивехттпрекуест**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest), он может в любое время отменить запрос, вызвав [хттпканцелхттпрекуест](/windows/desktop/api/Http/nf-http-httpcancelhttprequest).

 

 




