---
title: Обработка запросов
description: Обработка запросов включает в себя четыре шага.
ms.assetid: fb170d73-c26d-4bec-abed-b614b7dad322
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e820d425e44daab9d687d1d43b756b833582a092
ms.sourcegitcommit: af9983bab40fe0b042f177ce7ca79f2eb0f9d0e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "103913964"
---
# <a name="processing-requests"></a>Обработка запросов

Обработка запросов включает в себя четыре шага:

-   Получение запроса
-   Обработка запроса
-   Отправка ответа
-   Отмена запросов, которые не могут быть обработаны

![Схема, на которой показан цикл обработки запросов.](images/processloop.png)

## <a name="receiving-a-request"></a>Получение запроса

API сервера HTTP предоставляет структуру запросов для хранения проанализированного входящего запроса. Эта структура выделяется приложением и инициализируется при получении входящего запроса. Приложение вызывает функцию [**хттпрецеивехттпрекуест**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) для получения запроса. Если буфер запроса слишком мал для получения запроса, приложение может увеличить размер буфера и вызвать **хттпрецеивехттпрекуест** еще раз, чтобы получить весь запрос.

Если запрос содержит данные тела сущности для получения, приложения вызывают [**хттпрецеиверекуестентитибоди**](/windows/desktop/api/Http/nf-http-httpreceiverequestentitybody) с идентификатором запроса, возвращенным в параметре *прекуестбуффер* во время вызова [**хттпрецеивехттпрекуест**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest).

## <a name="handling-the-request"></a>Обработка запроса

Приложение выполняет обработку запроса в зависимости от конкретного приложения и формирует ответ. API сервера HTTP не накладывает время ожидания для этого процесса.

## <a name="sending-the-response"></a>Отправка ответа

Когда приложение завершает обработку запроса и составления ответ, он вызывает функцию [**хттпсендхттпреспонсе**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) для отправки ответа. Если ответ содержит данные тела сущности для отправки, приложение также вызывает [хттпсендреспонсинтитибоди](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody).

## <a name="canceling-requests"></a>Отмена запросов

После того как приложение получило идентификатор запроса от его вызова к [**хттпрецеивехттпрекуест**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest), он может в любое время отменить запрос, вызвав [хттпканцелхттпрекуест](/windows/desktop/api/Http/nf-http-httpcancelhttprequest).

 

 




