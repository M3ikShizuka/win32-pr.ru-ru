---
title: Управление версиями (API сервера HTTP)
description: API-интерфейс версии 2,0 сервера HTTP применяет Управление версиями с областью действия объекта для определения версии API.
ms.assetid: 2c2d7501-85e0-44ec-aa42-01372b29266e
keywords:
- Управление версиями в API версии 2,0 сервера HTTP
- API-интерфейс версии 2,0 сервера HTTP, управление версиями
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5221ff7a93bb24e7e0b8a1b9f7c2399012cdbe95
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "104134918"
---
# <a name="versioning-http-server-api"></a>Управление версиями (API сервера HTTP)

API-интерфейс версии 2,0 сервера HTTP делает устаревшими очереди запросов версии 1,0 и сопоставления URL-адресов с очередью запросов. Управление версиями на уровне объектов позволяет приложениям предоставлять сведения о версии для конкретного приложения. Приложения могут автоматически вызывать правильную версию структур для операционной системы, в которой она запущена.

## <a name="request-queues"></a>Запросы очередей

Начиная с версии 2,0 API сервера HTTP, очереди запросов создаются с помощью [**хттпкреатерекуесткуеуе**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) , что делает устаревшую функцию версии 1,0 [**хттпкреатехттфандле**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle) . Группы URL-адресов вводятся в версии 2,0 с помощью функции [**хттпкреатеурлграуп**](/windows/desktop/api/Http/nf-http-httpcreateurlgroup) . URL-адреса добавляются в группу с помощью [**хттпаддурлтаурлграуп**](/windows/desktop/api/Http/nf-http-httpaddurltourlgroup) , что делает устаревшую функцию версии 1,0 [**хттпаддурл**](/windows/desktop/api/Http/nf-http-httpaddurl) . Группы URL-адресов версии 2,0 не должны использоваться с очередями запросов версии 1,0.

Начиная с версии 2,0, следующие функции версии 1,0 устарели и не могут использоваться с очередями запросов версии 2,0:

-   [**хттпкреатехттфандле**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle)
-   [**хттпаддурл**](/windows/desktop/api/Http/nf-http-httpaddurl)
-   [**хттпремовеурл**](/windows/desktop/api/Http/nf-http-httpremoveurl)

Дополнительные сведения о настройке групп URL-адресов см. в разделе [Настройка группы URL-адресов](configuring-the-url-group.md) . Дополнительные сведения о очередях запросов версии 2,0 см. в разделе " [Именованная очередь запросов](named-request-queue.md) ".

## <a name="object-scoped-versioning"></a>Управление версиями Object-Scoped

В версии 1,0 приложение предоставляет версию API HTTP-сервера в вызове [**хттпинитиализе**](/windows/desktop/api/Http/nf-http-httpinitialize). Сведения о версии принимаются только от первого приложения, которое вызвало **хттпинитиализе** , и применяется ко всем приложениям API HTTP-сервера в одном процессе. Начиная с API версии 2,0, сведения о глобальной версии, предоставляемые в вызове **хттпинитиализе** , не используются. Для приложений версии 2,0 версия API сервера HTTP передается в параметре version при создании очереди запросов или сеанса сервера с помощью [**хттпкреатерекуесткуеуе**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) или [**хттпкреатесерверсессион**](/windows/desktop/api/Http/nf-http-httpcreateserversession). При создании очереди запросов с версией 1,0 [**хттпкреатехттфандле**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle)она автоматически помечается как версия 1,0. Приложения версии 1,0 и 2,0 могут выполняться в одном процессе.

Структуры [**HTTP- \_ запросов**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) и [**HTTP- \_ ответов**](http-response.md) обновляются для включения сведений о проверке подлинности в API-интерфейс версии 2,0 сервера HTTP. [**Протокол HTTP \_ ЗАПРОСЫ \_ v1**](/windows/desktop/api/Http/ns-http-http_request_v1) и [**HTTP \_ \_ версии 2**](/windows/desktop/api/Http/ns-http-http_request_v2) относятся к версии API, используемой приложением. Однако приложения не должны использовать эти структуры непосредственно в своем коде. Вместо этого они должны использовать **HTTP- \_ запрос** для получения правильной версии в зависимости от версии очереди запросов, в которой был получен запрос. Кроме того, имейте в виду, что размер структуры **HTTP- \_ запроса** зависит от версии операционной системы, в которой компилируется код.

 

 
