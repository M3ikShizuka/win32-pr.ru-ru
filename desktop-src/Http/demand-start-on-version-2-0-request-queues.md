---
title: Запуск запроса в очереди запросов версии 2,0
description: Запуск запроса в очереди запросов версии 2,0
ms.assetid: 84a744b7-1b0e-4fa7-8015-4840251aa856
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f7ec5f0d2d973cfb7d4d0a3f23a5d1f6b6c6055dd9aff19521ed9ff100879c43
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120050794"
---
# <a name="demand-start-on-version-20-request-queues"></a>Запуск запроса в очереди запросов версии 2,0

Функция Demand Start в очередях запросов API версии 2,0 сервера HTTP позволяет приложению контроллера отложить создание экземпляра рабочего процесса до тех пор, пока первый запрос не поступит в очередь запросов. Таким же приложениям можно избежать использования ресурсов, пока они не потребуются. Дополнительные сведения о приложении контроллера см. в разделе " [Именованная очередь запросов](named-request-queue.md) ".

## <a name="asynchronous-demand-start"></a>Запуск асинхронного запроса

Приложение контроллера вызывает [**хттпваитфордемандстарт**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) с маркером в очередь запросов для инициации уведомления о запуске спроса. Для асинхронного завершения приложение предоставляет структуру OVERLAPPED в параметре *поверлаппед* . Когда **хттпваитфордемандстарт** вызывается асинхронно, приложение контроллера получает уведомления, когда первый запрос поступает в очередь запросов. После завершения уведомления о запуске запроса приложение контроллера может зарегистрироваться для получения другого уведомления о начале спроса в очереди запросов.

API HTTP-сервера не позволяет использовать более одного уведомления о запуске для очереди запросов. Однако по завершении уведомления о запуске необработанного спроса приложение вызывает [**хттпваитфордемандстарт**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) еще раз, чтобы запустить несколько рабочих процессов в очереди запросов. HTTP не применяет ограничения на количество уведомлений о запуске спроса или на число рабочих процессов, работающих в очереди запросов. Однако приложения контроллера могут принудительно применить количество рабочих процессов, разрешенных в очереди запросов.

API HTTP-сервера поддерживает отмену асинхронных вызовов [**хттпваитфордемандстарт**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) . Приложения могут использовать [**канцелиоекс**](/windows/desktop/FileIO/cancelioex-func) с перекрывающейся структурой, предоставляемой в *поверлаппед*, для отмены ожидающего вызова **хттпваитфордемандстарт** .

## <a name="synchronous-demand-start"></a>Запуск синхронного запроса

Запуск синхронного запроса не рекомендуется, так как приложение блокируется до поступления запроса в очередь запросов.

 

 
