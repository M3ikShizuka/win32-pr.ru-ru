---
title: Проверка подлинности с несколькими известными заголовками
description: Структура HTTP с \_ несколькими \_ известными \_ заголовками позволяет серверным приложениям передавать клиенту несколько проблем проверки подлинности.
ms.assetid: d517fd61-9547-4e1c-b0fd-1eb3d0098db2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fbb8fd2071626d8a12f046ac0c3b6c50fcffc794462d5109a89a974f441879bb
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118950933"
---
# <a name="authentication-with-multiple-known-headers"></a>Проверка подлинности с несколькими известными заголовками

Структура [**HTTP с \_ несколькими \_ известными \_ заголовками**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) позволяет серверным приложениям передавать клиенту несколько проблем проверки подлинности. Приложения могут выключать клиент с помощью одной схемы проверки подлинности, предоставляя тип перечисления **хттфеадерввваусентикате** в элементе **кновнхеадерс** структуры [**\_ \_ заголовков HTTP-ответа**](/windows/desktop/api/Http/ns-http-http_response_headers) , содержащейся в [**HTTP- \_ ответе**](http-response.md). Однако при проблемах с несколькими схемами проверки подлинности для сервера приложение использует структуру [**HTTP с \_ несколькими \_ известными \_ заголовками**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) для предоставления типов проверки подлинности.

Если флаг **\_ \_ \_ сохранения флага \_ \_ для HTTP-ответа** установлен, HTTP отправляет заголовки проверки подлинности в указанном порядке. Если этот флаг отсутствует, HTTP упорядочивает схемы проверки подлинности от самого надежного к слабому, как показано ниже.

1.  Согласование
2.  NTLM
3.  Digest (дайджест)
4.  Basic

Если схема проверки подлинности не является ни одной из этих схем, в приложении необходимо указать флаг **\_ \_ \_ сохранения флага \_ \_ для HTTP-ответа** .

Элемент **кновнхеадер** с [**\_ несколькими \_ известными \_ заголовками HTTP**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) указывает на массив [**известных структур \_ \_ заголовков HTTP**](/windows/desktop/api/Http/ns-http-http_known_header) . Элемент **праввалуе** в структуре **\_ известных \_ заголовков HTTP** должен указывать на строку, указывающую имя схемы. HTTP анализирует строку для определения схемы и выполняет одно из следующих действий.

-   Если строка содержит неизвестный тип проверки подлинности или если тип проверки подлинности не включен в группе конфигурации (либо в группе URL-адресов, либо в сеансе сервера), связанном с запросом, API сервера HTTP добавляет строку в **праввалуе** в заголовок WWW-Authenticate. Например, если в приложении указана неподдерживаемая схема проверки подлинности, а **праввалуе** содержит строку "кустомаусстринг", в заголовок проверки подлинности добавляется следующий текст:

    WWW-Authenticate: Кустомауссчемекрлф

    Если в приложении не включена обычная проверка подлинности и **праввалуе** содержит строку "Basic realm =" басикреалм "", заголовок проверки подлинности содержит следующий текст:

    WWW-Authenticate: обычная область = "Басикреалм"

-   Если строка содержит известный тип проверки подлинности и имеется в группе конфигурации (либо в группе URL-адресов, либо в сеансе сервера), связанном с запросом, то API сервера HTTP создает заголовок WWW-Authenticate. Например, если строка, указанная в **праввалуе** , имеет значение Digest, а в сеансе сервера включена функция дайджеста, API-интерфейс сервера HTTP добавляет следующий текст в заголовок Authentication:

    WWW-Authenticate: дайджест realm = " testrealm@host.com "

Если схема в **праввалуе** члене [**\_ известного \_ заголовка HTTP**](/windows/desktop/api/Http/ns-http-http_known_header) является Negotiate или NTLM, то достаточно имени схемы проверки подлинности. Если указана базовая схема, имя области добавляется к имени схемы; приложению не нужно указывать имя области в **праввалуе**. Если указанная схема является дайджестом, HTTP вызывает [**AcceptSecurityContext**](../SecAuthN/acceptsecuritycontext--general.md) для создания запроса, который добавляется к имени схемы. Параметры для базовой схемы (области) и дайджеста (доменного имени) получаются из соответствующих сведений о проверке подлинности группы конфигурации.

Когда приложение отправляет клиенту несколько проблем проверки подлинности в неизвестных заголовках запроса, API сервера HTTP отправляет их клиенту без вмешательства пользователя. Однако это использование не рекомендуется.

 

 




