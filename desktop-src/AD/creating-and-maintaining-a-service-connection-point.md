---
title: Создание и обслуживание точки подключения службы
description: При публикации с помощью точки подключения службы следует помнить, что она должна содержать текущие данные об экземпляре службы.
ms.assetid: 2350cb65-3439-4a5f-adc5-b71476793247
ms.tgt_platform: multiple
keywords:
- Создание и обслуживание точки подключения службы AD
- точка подключения службы AD, создание и обслуживание
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cc6c4ad02b92fa6567fc3b709e45f2f64ce66318
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "104069793"
---
# <a name="creating-and-maintaining-a-service-connection-point"></a>Создание и обслуживание точки подключения службы

При публикации с помощью точки подключения службы следует помнить, что она должна содержать текущие данные об экземпляре службы. В противном случае клиенты, которые привязываются к SCP, получают устаревшие данные. Установщик службы, который создает SCP, задает начальные значения для атрибутов запрашивая. Затем при запуске экземпляра службы он должен наыскать точку подключения службы и при необходимости обновить значения атрибутов. Таким образом, клиенты гарантированно используют самые актуальные данные.

После создания точки подключения службы установщик служб выполняет два дополнительных действия, которые позволяют службе обновить SCP.

-   Установите ACE в дескрипторе безопасности объекта SCP, чтобы служба изменила атрибуты SCP во время выполнения. Дополнительные сведения и пример кода см. в разделе [Включение учетной записи службы для доступа к свойствам SCP](enabling-service-account-to-access-scp-properties.md).
-   Кэширование **OBJECTGUID** SCP в реестре на главном компьютере службы. Служба получает кэшированный идентификатор GUID для привязки к точке подключения службы, чтобы проверить и обновить ее атрибуты.

Установщик службы кэширует **OBJECTGUID** SCP, а не DN. **ObjectGUID** никогда не изменяется, независимо от того, перемещена или переименована точка подключения службы. DN может измениться, если администратор переместит или переименовывает точку подключения службы. Например, если точка подключения службы создается как дочерний объект компьютера, различающееся имя SCP изменится, если компьютер переименовывается или перемещается в другой домен или подразделение.

Когда установщик службы создает SCP, он должен прочитать **objectGUID** созданного объекта и кэшировать его в реестре главного компьютера службы. Используйте метод [**iAds:: Get \_ GUID**](/windows/desktop/ADSI/iads-property-methods) , чтобы получить значение **objectGUID** в строковом формате, подходящем для привязки. Кэшировать строку GUID как значение в следующем разделе реестра.

```
HKEY_LOCAL_MACHINE
   vendor name
      product name
```

Где "имя поставщика" и "название продукта" обозначают поставщика и продукт.

При запуске служба получает кэшированную строку GUID из реестра и использует ее для привязки к точке подключения службы. Служба считывает важные атрибуты SCP и сравнивает их с текущими значениями. Если значения SCP устарели, служба обновляет их. Значения, которые может потребоваться службе для обновления, включают **Ключевые слова**, **сервицебиндингинформатион**, **serviceDNSName** и **сервицеднснаметипе**.

## <a name="examples"></a>Примеры

-   [Примеры сценариев](script-samples-for-managing-service-connection-points.md)
-   [Примеры кода (C/C++)](code-samples-for-managing-service-connection-points.md)

 

 