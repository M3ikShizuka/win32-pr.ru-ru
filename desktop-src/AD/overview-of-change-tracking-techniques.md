---
title: Общие сведения о методах Отслеживание изменений
description: Существует несколько способов, которым механизмы отслеживания изменений могут различаться в области отслеживания изменений. приложение может отслеживать изменения в одном атрибуте одного объекта, на все объекты в домене и т. д.
ms.assetid: 7359e851-61b7-420d-beb0-f7f33f79b007
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 036a16362a7f27da47fc086d8758b28619f34d1475c7bb911050deb20c86f08d
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119025512"
---
# <a name="overview-of-change-tracking-techniques"></a>Общие сведения о методах Отслеживание изменений

Существует несколько способов, которые могут различаться механизмами отслеживания изменений:

-   Область отслеживания изменений. приложение может отслеживать изменения в одном атрибуте одного объекта, на все объекты в домене и т. д. Если механизм соответствует требованиям приложения, приложение получает минимум ненужных данных и, таким способом, повышает производительность.
-   Временные шкалы. приложение уведомляется о каждом изменении по мере его появлении или может получать уведомления о выходе изменений в течение нескольких минут или часов.

    Обработка менее своевременных данных может быть более эффективной, так как некоторые изменения могут быть свернуты в одну. Например, если атрибут изменяется три раза в течение одного часа, то приложение, которое получает уведомления об изменениях, накопленных в течение часа, будет уведомлено об изменении только одного атрибута, а не на трех.

    При обдумывании временной шкалы учитывайте последствия задержки репликации. Обновление, которое происходит на одном контроллере домена, мгновенно не реплицируется на другой контроллер домена. Необходимость использования временной шкалы отслеживания изменений гораздо выше, чем ожидаемая задержка репликации, часто не дает приложению никаких реальных преимуществ.

-   Опрос и уведомление. при опросе приложение периодически отправляет запрос на контроллер домена на получение данных отслеживания изменений. С уведомлением контроллер домена отправляет изменения в приложение только после внесения изменений.

    Накладные расходы на опрос очевидны: приложение может запрашивать данные отслеживания изменений, когда ничего не произошло. Издержки на уведомления являются более незаметными. Сервер должен поддерживать данные о запросах уведомлений и обращаться к этим данным, чтобы решить, следует ли отсылать уведомление. Это может увеличить затраты на обычные запросы на обновление.

-   Представление базы знаний приложения: постоянный и временный: каждый механизм отслеживания изменений должен включать в себя некоторый метод для сервера, на котором хранятся данные, чтобы понять состояние приложения, так что идея «Change» четко определена. Например, состояние базы знаний может быть выражено как "Обновлено с учетом всех изменений, произошедших в контроллере домена до времени t". Механизм, основанный на таком способе представления сведений о состоянии приложения, предоставит приложению эффективный способ получения изменений, произошедших позднее заданного времени.

    Если выражение базы знаний приложения может быть сохранено, то есть хранимой для восстановления, как и в файле или базе данных, перезапуск приложения занимает меньше ресурсов, чем в случае невозможности. В приведенном выше примере выражение базы знаний приложения может быть сохранено путем записи контроллера домена d и времени t. Некоторые механизмы уведомлений об изменениях не позволяют сохранять эти данные. При запуске приложения сервер и приложение должны синхронизироваться с каким бы то ни было другим механизмом. Это занимает много ресурсов, если задействовано несколько объектов и может содержать сложное программирование.

Используйте следующие методы для мониторинга изменений в домен Active Directory Services:

-   Используйте элемент управления уведомление об изменении, чтобы инициировать постоянный асинхронный поиск изменений, соответствующих указанному фильтру. Дополнительные сведения см. [в разделе уведомления об изменениях в домен Active Directory Services](change-notifications-in-active-directory-domain-services.md).
-   Используйте поиск по синхронизации каталогов (DirSync) для получения изменений, произошедших с момента предыдущего поиска DirSync. Дополнительные сведения см. [в разделе опрос изменений с помощью элемента управления DirSync](polling-for-changes-using-the-dirsync-control.md).
-   Используйте атрибут USNChanged для поиска объектов, которые были изменены с момента предыдущего поиска. Дополнительные сведения см. в разделе [опрос изменений с помощью USNChanged](polling-for-changes-using-usnchanged.md).

Элемент управления уведомлениями об изменениях предназначен для приложений и служб, которым требуется разумное уведомление о редких изменениях. Примером может быть служба или программа, которая хранит данные конфигурации на Active Directory сервере и должна своевременно получать уведомления при возникновении изменений. Имейте в виду, что существуют ограничения элемента управления уведомления.

-   Запрос уведомлений зависит от задержки репликации и от того, где произошло изменение. Вы можете быстро получать уведомления при репликации изменений в отслеживаемую реплику, но в некоторых других репликах это изменение могло быть создано ранее.
-   Элемент управления может отслеживать только один объект или непосредственные дочерние элементы контейнера. Приложения, которые должны отслеживать несколько контейнеров или несвязанных объектов, могут регистрировать до пяти запросов на уведомления.
-   Если слишком много клиентов ожидают изменения, которые происходят часто, это влияет на производительность сервера. Как правило, приложения должны ограничивать использование этого элемента управления для повышения производительности сервера. Если вам не нужно знать об изменениях немедленно, лучше выполнить периодический опрос изменений вместо уведомления об изменениях.

Методы поиска DirSync и USNChanged предназначены для приложений, которые поддерживают согласованность данных на Active Directory сервере и соответствующие данные в каком другом хранилище. Эти методы используются приложениями, которые периодически опрашиваются на предмет изменений. Метод DirSync основан на серверном элементе управления LDAP, который можно использовать с помощью интерфейсов API ADSI или LDAP. Недостаток элемента управления DirSync заключается в том, что он может использоваться только учетной записью с высоким уровнем привилегий, например администратором домена. Ниже приведен список ограничений элемента управления DirSync.

-   Элемент управления DirSync может использоваться только учетной записью с высоким уровнем привилегий, например администратором домена.
-   Элемент управления DirSync может отслеживать только весь контекст именования. Нельзя ограничить область поиска DirSync, чтобы отслеживать только определенное поддерево, контейнер или объект в контексте именования.

Метод USNChanged не имеет этих ограничений, хотя он более сложен в использовании, чем DirSync.

 

 




