---
title: Контексты безопасности и службы домен Active Directory
description: Когда приложение привязывается к контроллеру домен Active Directory (DC), оно делает это в контексте безопасности субъекта безопасности, который может быть пользователем или сущностью, например компьютером или системной службой.
ms.assetid: 7ad0acbe-f81b-46d6-be87-3526b0bfbd1b
ms.tgt_platform: multiple
keywords:
- Active Directory Active Directory, контексты безопасности
- контексты безопасности Active Directory
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c337cb05f8158dbb90f231652c42fb10a486aef4
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "104069746"
---
# <a name="security-contexts-and-active-directory-domain-services"></a>Контексты безопасности и службы домен Active Directory

Когда приложение привязывается к контроллеру домен Active Directory (DC), оно делает это в контексте безопасности субъекта безопасности, который может быть пользователем или сущностью, например компьютером или системной службой. Контекст безопасности — это учетная запись пользователя, используемая системой для обеспечения безопасности, когда поток пытается получить доступ к защищаемому объекту. Эти данные включают идентификатор безопасности пользователя (SID), членство в группах и привилегии.

Пользователь устанавливает контекст безопасности, представляя учетные данные для проверки подлинности. Если учетные данные проходят проверку подлинности, система создает маркер доступа, который определяет членство в группах и привилегии, связанные с учетной записью пользователя. Система проверяет маркер доступа при попытке доступа к объекту каталога. Он сравнивает данные в маркере доступа с учетными записями и группами, которым предоставлен или запрещен доступ дескриптором безопасности объекта.

Используйте следующие методы для управления контекстом безопасности, с которым выполняется привязка к Active Directory контроллеру домена:

-   Выполните привязку с помощью параметра **\_ безопасной \_ проверки подлинности ADS** с помощью функции [**ADsOpenObject**](/windows/desktop/api/adshlp/nf-adshlp-adsopenobject) или метода [**иадсопендсобжект:: опендсобжект**](/windows/desktop/api/iads/nf-iads-iadsopendsobject-opendsobject) и явно укажите имя пользователя и пароль. Система проверяет подлинность этих учетных данных и создает маркер доступа, который используется для проверки доступа на время этой привязки. Дополнительные сведения см. в разделе [Authenticate to the Speech API](authentication.md) (Аутентификация в API речи).
-   Привяжите с помощью параметра **\_ безопасной \_ проверки подлинности ADS** , но без указания учетных данных. Если вы не олицетворять пользователя, система использует основной контекст безопасности приложения, то есть контекст безопасности пользователя, запустившего приложение. В случае системной службы это контекст безопасности учетной записи службы или учетной записи LocalSystem.
-   Выполните олицетворение пользователя, а затем привяжите его к **\_ безопасной \_ проверке подлинности**, но без указания учетных данных. В этом случае система использует контекст безопасности клиента, который является олицетворенным. Дополнительные сведения см. в разделе [олицетворение клиента](/windows/desktop/SecAuthZ/client-impersonation).
-   Выполните привязку с помощью [**ADsOpenObject**](/windows/desktop/api/adshlp/nf-adshlp-adsopenobject) или [**Иадсопендсобжект:: опендсобжект**](/windows/desktop/api/iads/nf-iads-iadsopendsobject-opendsobject) с параметром **ADS \_ без \_ проверки подлинности** . Этот метод выполняет привязку без проверки подлинности и в качестве контекста безопасности получает "все". Этот параметр поддерживается только поставщиком LDAP.

Если возможно, выполните привязку без указания учетных данных. То есть используйте контекст безопасности вошедшего в систему пользователя или олицетворенного клиента. Это позволяет избежать кэширования учетных данных. Если необходимо использовать альтернативные учетные данные пользователя, запросите учетные данные, привяжите их к ним, но не кэшировать их. Чтобы использовать один и тот же контекст безопасности в нескольких операциях привязки, можно указать имя пользователя и пароль для первой операции привязки, а затем указать только имя пользователя для выполнения последующих привязок. Дополнительные сведения об использовании этого метода см. в разделе [Проверка подлинности](authentication.md).

Некоторые контексты безопасности являются более мощными, чем другие. Например, учетная запись LocalSystem на контроллере домена имеет полный доступ к службам домен Active Directory, тогда как обычный пользователь имеет ограниченный доступ к некоторым объектам в каталоге. В общем случае приложение не должно работать в мощном контексте безопасности, например LocalSystem, если для выполнения операций достаточно более мощный контекст безопасности. Это означает, что вам может потребоваться разделить приложение на отдельные компоненты, каждый из которых выполняется в контексте безопасности, соответствующем выполняемым операциям. Например, настройку приложения можно разделить следующим образом:

-   Выполнение изменений схемы и расширений в контексте пользователя, который является членом группы "Администраторы схемы".
-   Изменения контейнера конфигурации выполняются в контексте пользователя, который является членом группы администраторов предприятия.
-   Выполняйте изменения контейнера домена в контексте пользователя, который является членом группы "Администраторы домена".

 

 