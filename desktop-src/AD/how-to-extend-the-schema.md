---
title: Расширение схемы
description: Если существующие классы и (или) атрибуты не соответствуют типу данных, которые необходимо сохранить, может потребоваться расширение схемы.
ms.assetid: 9a80ce29-8ff0-4324-8a2f-afd6c5d2272e
ms.tgt_platform: multiple
keywords:
- Схема AD, расширение
- Active Directory, использование, схема
- Active Directory, использование, схема, расширение схемы, расширение
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 437b23229182e6ec6f94b500feb764b4bbcf06e7
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "103789522"
---
# <a name="how-to-extend-the-schema"></a>Расширение схемы

Если существующие классы и (или) атрибуты не соответствуют типу данных, которые необходимо сохранить, может потребоваться расширение схемы. Дополнительные сведения о принятии решения о том, когда следует расширять схему, см. [в разделе Расширение схемы](extending-the-schema.md). Когда вы решили, что расширение схемы является обязательным, используйте следующую процедуру для расширения схемы.

## <a name="verify-active-directory-functionality-before-you-apply-any-schema-extensions"></a>Проверка функциональности Active Directory перед применением любых расширений схемы

Перед обновлением схемы убедитесь, Active Directory функциональные возможности, чтобы обеспечить продолжение расширения схемы без ошибок. Как минимум убедитесь, что все контроллеры домена для леса подключены к сети и выполняют входящую репликацию.

**Проверка функциональности Active Directory перед применением расширения схемы**

1.  Войдите на рабочую станцию администратора, на которой Repadmin.exe установлен инструмент поддержки Windows.
    > [!Note]  
    > Средства поддержки находятся на установочном носителе операционной системы в \\ папке средства поддержки.

     

2.  Откройте командную строку, а затем измените каталоги на папку, в которой установлены средства поддержки Windows.
3.  В командной строке введите следующую команду и нажмите клавишу ВВОД:

    ``` syntax
    repadmin /replsum /bysrc /bydest /sort:delta
    ```

    Все контроллеры домена должны показывать 0 в столбце "сбой", а самые крупные разности (которые указывают число изменений, внесенных в базу данных Active Directory с момента последней успешной репликации), должны быть меньше или приблизительно равны частоте репликации связи сайтов, используемой контроллером домена для репликации. Периодичность репликации по умолчанию составляет 180 минут.

    Дополнительные сведения о дополнительных действиях, которые можно предпринять для проверки Active Directory функциональности перед применением расширения схемы, см. [в статье 325379 базы знаний Майкрософт](https://support.microsoft.com/kb/325379/en-us).

**Расширение схемы**

1.  Определите метод расширения. После тщательного создания изменений схемы необходимо решить, какой метод следует использовать для расширения схемы. Можно использовать один из следующих методов:
    -   Вручную, используя файлы импорта. См. документацию [с помощью средства Ldifde](/previous-versions/office/developer/exchange-server-2003/ms870068(v=exchg.65)).
        > [!Note]  
        > Не используйте LDIFDE для импорта файлов Windows SCH \* . ldf. Эти файлы необходимы для расширения схемы Active Directory, чтобы установить контроллеры домена под управлением более новой версии Windows Server, чем версия, запущенная на текущем хозяине схемы. Если необходимо расширить схему для установки нового контроллера домена, используйте Adprep.exe.

         

    -   Программно, с помощью программы установки. Дополнительные сведения см. в разделе [программное расширение](programmatic-extension.md) .
2.  Включение изменений схемы. Дополнительные сведения см. в разделе [Предварительные требования для установки расширения схемы](prerequisites-for-installing-a-schema-extension.md) и [включения изменений схемы в хозяине схемы](enabling-schema-changes-at-the-schema-master.md).
3.  Получите идентификатор объекта (OID) для новых атрибутов и (или) классов, как описано в разделе [Получение идентификатора объекта](obtaining-an-object-identifier.md).
4.  Создайте новые атрибуты и классы.
5.  При необходимости используйте описатели вывода для интеграции новых атрибутов и классов с пользовательским интерфейсом.
6.  Обновите кэш схемы, как описано в разделе [Обновление кэша схемы](updating-the-schema-cache.md).
7.  Проверьте расширение схемы с помощью LDP.exe.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Получение идентификатора объекта](obtaining-an-object-identifier.md)
</dt> <dt>

[Новые средства командной строки для Active Directory в Windows Server 2003](https://support.microsoft.com/kb/298882)
</dt> <dt>

[Использование средства LDIFDE](/previous-versions/office/developer/exchange-server-2003/ms870068(v=exchg.65))
</dt> <dt>

[Расширение схемы Active Directory](/previous-versions/ms806972(v=msdn.10))
</dt> <dt>

[Ограничения на расширение схемы](restrictions-on-schema-extension.md)
</dt> </dl>

 

 