---
title: Модель репликации программиста в службах домен Active Directory Services
description: Ниже приведено описание модели репликации для служб домен Active Directory.
ms.assetid: 45baf7ff-9474-4f86-81c8-03336901fec2
ms.tgt_platform: multiple
keywords:
- Модель программиста Active Directory репликации AD
- Модель репликации программиста в службах домен Active Directory Services
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9ada20bc07411528eaea4b7ff8c773c50ae8b6ec
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104067281"
---
# <a name="a-programmers-model-of-replication-in-active-directory-domain-services"></a>Модель репликации программиста в службах домен Active Directory Services

Ниже приведено описание модели репликации для служб домен Active Directory.

Все обновления контроллера домен Active Directory (DC) выполняются с помощью запросов LDAP, которые создают, изменяют или удаляют один объект для каждого запроса. Один запрос может устанавливать или изменять несколько атрибутов объекта.

Запрос на обновление обрабатывается как атомарная транзакция на некотором контроллере домена. Происходит либо все обновление, либо ни одно из них. Если инициатор запроса получает успешный ответ на запрос на обновление, весь запрос успешно выполнен (фиксируется). Это называется «исходной записью». Несколько LDAP-запросов нельзя сгруппировать в одну более крупную транзакцию.

В исходной записи контроллер домена рассчитывает «отметку» для каждого нового или измененного значения атрибута и прикрепляет эту отметку к значению, поэтому при репликации значения отметка также реплицируется. Новая метка является уникальной, и в случае обновления новая отметка больше, чем метка старого значения на этом контроллере домена.

Иногда контроллер домена выбирает набор объектов, которые были изменены с момента последнего выполнения репликации контроллером домена. Затем для каждого объекта он отправляет одно сообщение всем другим контроллерам домена, содержащим все текущие значения атрибутов, измененных с момента последнего выполнения репликации объекта. Сообщения репликации являются надежными и доставляются по порядку, но для их доставки может потребоваться больше времени.

Когда один контроллер домена получает сообщение репликации от другого контроллера домена, он обрабатывает его следующим образом: для каждого измененного атрибута, если метка значения в сообщении репликации больше, чем метка на текущем значении, контроллер домена применяет обновление. в противном случае контроллер домена отклоняет обновление. Каждое сообщение репликации применяется как атомарная транзакция, как и исходная запись.

Это модель репликации служб домен Active Directory Services. К ключевым свойствам этой модели относятся:

-   Исходная запись в один объект является атомарной.
-   При репликации изменений отправляются либо все изменения, внесенные в исходной записи, либо ни одно из них.
-   Реплицированная запись в один объект является атомарной, но конфликты разрешаются атрибутом по атрибуту.

Модель не гарантирует порядок репликации изменений, внесенных в различные объекты. Не создавайте приложения, которые предполагают, что изменения реплицируются в исходном порядке записи. Модель не гарантирует, что если атрибут объекта изменяется дважды, будут реплицированы оба значения. Репликация отправляет только текущее значение во время репликации.

Модель отличается от реальности несколькими способами, которые влияют только на производительность. Например, сервер Active Directory отправляет сообщения репликации, содержащие изменения, в несколько объектов, но обрабатывает содержимое такого сообщения, как если бы оно было набором сообщений одного объекта. Сервер Active Directory не выполняет репликацию "точка-точка", как описано в модели, а выполняет более сложную и эффективную транзитную репликацию, которая функционально эквивалентна модели.

 

 




