---
title: Как работает индексирование кортежей
description: Индексы кортежей используются для оптимизации поиска, которые содержат 0 или более строк срединного-Search и 0 или 1 конечные строки для поиска. Они также могут использоваться для оптимизации поиска исходной строки поиска, если для этого атрибута не доступен обычный индекс.
ms.assetid: 0f7b3f64-70cd-4581-a9ab-bb882eabef8c
ms.tgt_platform: multiple
keywords:
- Индексация кортежей
- Поиск Active Directory Active Directory, оптимизация
- Active Directory, Active Directory оптимизации поиска
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5b9d15bad8de15e4f559123d2d3cb3b6b9ec6446328e6ed4c4c52cf18355d634
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118188037"
---
# <a name="how-tuple-indexing-works"></a>Как работает индексирование кортежей

Индексы кортежей используются для оптимизации поиска, которые содержат 0 или более [строк срединного-Search](search-string-types.md) и 0 или 1 конечные строки для поиска. Они также могут использоваться для оптимизации поиска исходной строки поиска, если для этого атрибута не доступен обычный индекс.

Можно включить индексирование кортежей для атрибута, установив бит 5, который соответствует значению 32 в атрибуте [**searchFlags**](/windows/desktop/ADSchema/a-searchflags) . Этот атрибут задается в объекте схемы, который представляет атрибут, которому требуется индекс кортежа. Снижение производительности при включении индексирования кортежей заключается в том, что любое строковое значение, заданное для этого атрибута, будет развернуто в большое количество фрагментов в индексе кортежа. При расширении атрибута он потребляет больше места на диске в файле дерева сведений о каталоге, а также более медленно обновляется.

Индексы кортежей предназначены для ускорения поиска в форме `*string*` . Ускорение может быть значительным, поскольку такая форма поиска не может быть оптимизирована каким-либо другим способом, а в неоптимизированной форме она заставляет сервер Active Directory проанализировать каждый объект в области поиска, чтобы выполнить запрос. Таким образом, базовый поиск будет искать только один объект, при этом непосредственный дочерний Поиск будет искать только дочерний объект объекта (который может использовать меньше ресурсов или больше ресурсов в зависимости от размера контейнера), и поиск поддерева будет проходить по всему поддереву базового объекта, которое обычно требует большого количества ресурсов и будет очень медленным из-за размера поддерева.

Индексы кортежей работают путем разбиения строки на *кортежи*. Например, строка "Active Directory" будет разбиваться на следующие кортежи:

-   ` "Active Dir"`
-   ` "ctive Dire"`
-   ` "tive Direc"`
-   ` "ive Direct"`
-   ` "ve Directo"`
-   ` "e Director"`
-   ` " Directory"`
-   ` "Directory"`
-   ` "irectory"`
-   ` "rectory"`
-   ` "ectory"`
-   ` "ctory"`
-   ` "tory"`
-   ` "ory"`

> [!Note]  
> Каталог будет останавливаться на 32767 символов при расширении строки для индексирования кортежей.

 

Индекс кортежа будет содержать запись для каждого из этих кортежей. Таким образом, если пользователь выполняет поиск `*cto*` , Active Directory сервер будет искать все совпадения для "CTO" в индексе и, в данном случае, найти указатель обратно к записи с атрибутом (с индексом кортежа) со значением "Directory".

Если строка поиска срединного ( `*cto*` в предыдущем примере) является достаточной, поиск будет выполняться достаточно эффективно, поскольку это значительно сокращает количество объектов, которые сервер Active Directory должен проверить для выполнения запроса.

 

 