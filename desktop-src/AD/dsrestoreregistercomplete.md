---
title: Функция Дсресторерегистеркомплете (Нтдсбкли. h)
description: Вызывается для разблокировки сервера Active Directory после завершения операции восстановления.
ms.assetid: 781cd2ec-d2e2-4f3a-903d-feda4b871de5
ms.tgt_platform: multiple
keywords:
- Active Directory функции Дсресторерегистеркомплете
topic_type:
- apiref
api_name:
- DsRestoreRegisterComplete
api_location:
- Ntdsbcli.dll
api_type:
- DllExport
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 6b335f67ed4d392d189553f66655797e03121cbdee6ce19dffbd9803199f6c72
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118429932"
---
# <a name="dsrestoreregistercomplete-function"></a>Функция Дсресторерегистеркомплете

\[Эта функция доступна для использования в операционных системах, указанных в разделе требования. В последующих версиях он может быть изменен или недоступен. Вместо этого используйте [Служба теневого копирования томов (VSS)](../vss/volume-shadow-copy-service-overview.md) .\]

Функция **дсресторерегистеркомплете** вызывается для разблокировки сервера Active Directory после завершения операции восстановления. Эта функция является аналогом функции [**дсресторерегистер**](dsrestoreregister.md) .

## <a name="syntax"></a>Синтаксис


```C++
HRESULT DsRestoreRegisterComplete(
  _In_ HBC     hbc,
  _In_ HRESULT hrRestoreState
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*ХБК* \[ окне\]
</dt> <dd>

Содержит описатель контекста восстановления, полученный с помощью функции [**дсресторепрепаре**](dsrestoreprepare.md) .

</dd> <dt>

*хрресторестате* \[ окне\]
</dt> <dd>

Содержит конечное состояние операции восстановления. Этот параметр должен содержать **S \_ ОК** , если операция восстановления прошла успешно, или код ошибки в противном случае.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Возвращает **значение \_ ОК** , если функция выполнена успешно, или код ошибки Win32 или RPC в противном случае. В следующем списке перечислены возможные коды ошибок.

<dl> <dt>

**Ошибка \_ отказа в доступе \_**
</dt> <dd>

Вызывающий объект не имеет необходимых прав доступа для вызова этой функции. Функцию [**дссетаусидентити**](dssetauthidentity.md) можно использовать для задания учетных данных, используемых для функций резервного копирования и восстановления.

</dd> </dl>

## <a name="remarks"></a>Remarks

Перед перезагрузкой контроллера домена вызовите эту функцию, чтобы указать состояние операции восстановления. Если состояние не прошло успешно, Служба каталогов не запустится, пока не будет восстановлена допустимая база данных. Эта функция завершает операцию восстановления и позволяет запускать службы домен Active Directory.

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|-------------------------------------|-----------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Ни одна версия не поддерживается<br/>                                                               |
| Минимальная версия сервера<br/> | Ни одна версия не поддерживается<br/>                                                               |
| Окончание поддержки клиента<br/>    | Ни одна версия не поддерживается<br/>                                                               |
| Поддержка конца сервера<br/>    | Ни одна версия не поддерживается<br/>                                                               |
| Заголовок<br/>                   | <dl> <dt>Нтдсбкли. h</dt> </dl>   |
| Библиотека<br/>                  | <dl> <dt>Нтдсбкли. lib</dt> </dl> |
| DLL<br/>                      | <dl> <dt>Ntdsbcli.dll</dt> </dl> |



## <a name="see-also"></a>См. также

<dl> <dt>

[**дсресторерегистер**](dsrestoreregister.md)
</dt> <dt>

[**дсресторепрепаре**](dsrestoreprepare.md)
</dt> <dt>

[**дссетаусидентити**](dssetauthidentity.md)
</dt> <dt>

[Восстановление сервера Active Directory](restoring-an-active-directory-server.md)
</dt> <dt>

[Функции резервного копирования каталога](directory-backup-functions.md)
</dt> </dl>

 

