---
title: Форматы имен для уникальных имен участников-служб
description: Имя субъекта-службы должно быть уникальным в лесу, в котором он зарегистрирован.
ms.assetid: dd3f9f7c-b64c-4bd8-924f-a8880ee3b71e
ms.tgt_platform: multiple
keywords:
- Форматы имен для уникальных имен SPN AD
- Имя субъекта-службы AD, форматы имен для
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8b041f88bc025c604ec5f0ad9a6bf5ba7f4cdabc
ms.sourcegitcommit: 9b5faa61c38b2d0c432b7f2dbee8c127b0e28a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2021
ms.locfileid: "122472340"
---
# <a name="name-formats-for-unique-spns"></a>Форматы имен для уникальных имен участников-служб

Имя субъекта-службы должно быть уникальным в лесу, в котором он зарегистрирован. Если оно не является уникальным, проверка подлинности завершится ошибкой. Синтаксис имени участника-службы состоит из четырех элементов: два обязательных элемента и два дополнительных элемента, которые можно использовать при необходимости для создания уникального имени, как указано в следующей таблице.


```C++
<service class>/<host>:<port>/<service name>
```






| Элемент | Описание | 
|---------|-------------|
| "<service class>" | Строка, определяющая общий класс службы; Например, "SqlServer". Существуют хорошо известные имена классов служб, например www, для веб-службы или LDAP для службы каталогов. Как правило, это может быть любая строка, уникальная для класса службы. Имейте в виду, что в синтаксисе имени участника-службы для разделения элементов используется косая черта (/), поэтому этот символ не может присутствовать в имени класса службы. | 
| "<host>" | Имя компьютера, на котором запущена служба. Это может быть полное DNS-имя или имя NetBIOS. Обратите внимание, что не гарантируется уникальность имен NetBIOS в пределах леса, поэтому имя участника-службы, которое содержит имя NetBIOS, может быть и неуникальным. | 
| "<port>" | Дополнительный номер порта для различения нескольких экземпляров одного класса службы на одном хост-компьютере. Пропустите этот компонент, если служба использует порт по умолчанию для своего класса службы. | 
| "<service name>" | Необязательное имя, используемое в именах SPN реплицируемой службы для обнаружения данных или служб, предоставляемых службой, или домена, обслуживаемого службой. Этот компонент может иметь один из следующих форматов:<ul><li>Различающееся имя или objectGUID объекта в домен Active Directory Services, например точка подключения службы (SCP).</li><li>DNS-имя домена для службы, предоставляющей указанную службу для домена в целом.</li><li>DNS-имя записи SRV или MX.</li></ul> | 




 

Компоненты, представленные в SPN службы, зависят от способа идентификации и репликации службы. Существует два основных сценария: службы на основе узла и реплицируемые службы.

## <a name="host-based-services"></a>Службы на основе узла

Для службы, размещенной на узле, &lt; компонент "имя службы &gt; " опускается, так как служба уникально идентифицируется классом службы и именем главного компьютера, на котором установлена служба.


```C++
<service class>/<host>
```



Только класс службы достаточно для того, чтобы узнать клиентам, какие функции предоставляет служба. Экземпляры класса службы можно установить на многих компьютерах, и каждый экземпляр предоставляет службы, которые определяются с его главным компьютером. Примерами служб на основе узла являются FTP и Telnet. Имена участников-служб экземпляра службы на основе узла могут включать номер порта, если служба использует порт, отличный от используемого по умолчанию, или на узле имеется несколько экземпляров службы.


```C++
<service class>/<host>:<port>
```



## <a name="replicable-services"></a>Реплицируемые службы

Для реплицируемой службы может существовать один или несколько экземпляров службы (реплик), и клиенты не отличают реплику, к которой они подключаются, так как каждая из них предоставляет одну и ту же службу. Имена участников-служб для каждой реплики имеют одинаковые &lt; компоненты "класс службы &gt; " и " &lt; имя службы" &gt; , где " &lt; имя службы &gt; " определяет более конкретную функциональность, предоставляемую службой. Только компонент " &lt; узел &gt; " и необязательные "порты" могут &lt; &gt; отличаться от имен участников-служб и имен участников-служб.


```C++
<service class>/<host>:<port>/<service name>
```



Примером реплицируемой службы будет экземпляр службы базы данных, который предоставляет доступ к указанной базе данных. В этом случае " &lt; класс службы &gt; " определяет приложение базы данных, а " &lt; имя службы &gt; " определяет конкретную базу данных. " &lt; имя службы &gt; " может быть различающимся именем точки подключения службы (SCP), содержащей данные подключения для базы данных.


```C++
MyDBService/host1.example.com/CN=hrdb,OU=mktg,DC=example,DC=com
MyDBService/host2.example.com/CN=hrdb,OU=mktg,DC=example,DC=com
MyDBService/host3.example.com/CN=hrdb,OU=mktg,DC=example,DC=com
```



Если клиенты будут использовать NetBIOS-имя для создания SPN службы, Каждая реплика также должна зарегистрировать имя субъекта-службы, которое содержит NetBIOS.


```C++
MyDBService/host1/CN=hrdb,OU=mktg,DC=example,DC=com
MyDBService/host2/CN=hrdb,OU=mktg,DC=example,DC=com
MyDBService/host3/CN=hrdb,OU=mktg,DC=example,DC=com
```



Еще один пример реплицируемой службы — это служба, которая предоставляет службы для всего домена. В этом случае &lt; компонент Service Name &gt; — это DNS-имя обслуживаемого домена. В качестве примера такого типа службы реплицируемых служб используется Kerberos KDC.

Имейте в виду, что при изменении DNS-имени компьютера система обновляет &lt; &gt; элемент Host для всех зарегистрированных имен SPN для этого узла в лесу.

 

 




