---
title: Точки подключения службы для реплицированных, основанных на узлах служб и баз данных
description: При публикации службы с помощью точки подключения службы (SCP) рассмотрите, как клиенты будут искать точку подключения службы.
ms.assetid: 944e8ecd-f8ea-4506-992c-bbbfc82d11f3
ms.tgt_platform: multiple
keywords:
- Точки подключения службы для реплицированных, размещенных на узлах служб и службы баз данных AD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8a7658cc60704dbfc37009272e5f14f997d213ea993054fa22c1c5e0c307794b
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119024902"
---
# <a name="service-connection-points-for-replicated-host-based-and-database-services"></a>Точки подключения службы для реплицированных, основанных на узлах служб и баз данных

При публикации службы с помощью точки подключения службы (SCP) рассмотрите, как клиенты будут искать точку подключения службы. Если существует несколько экземпляров службы, подумайте, как клиенты будут отличать службу с помощью требуемых функций аналогичных служб с разными функциями. Если вы публикуете реплицированную службу, подумайте, как клиент будет выбирать реплику. В этом разделе обсуждаются эти проблемы для различных типов служб.

## <a name="replicable-services"></a>Реплицируемые службы

Для реплицируемой службы может существовать один или несколько экземпляров (реплик) службы, а клиенты не волнует, к какой реплике они подключаются, так как каждая из них предоставляет одну и ту же службу. Домен Active Directory служб — примеры реплицированных служб: все контроллеры домена для данного домена содержат идентичные данные, в зависимости от задержки репликации и предоставления идентичных служб.

Реплицируемые службы могут хранить запрашивая и другие объекты, зависящие от конкретной службы, для нескольких реплик в одном контейнере. Приложение установки для первой реплики может создать контейнер в качестве дочернего для системного контейнера локального домена. Дополнительные сведения см. [в разделе Публикация в контейнере системы домена](publishing-in-a-domain-system-container.md). Убедитесь, что дескриптор безопасности для контейнера позволяет программам установки последующих реплик создавать свои объекты в одном контейнере. Предоставьте разрешения на установку администратору, чтобы указать пользователей или группы, которые могут создавать или изменять объекты в контейнере.

Одной из стратегий для реплицируемой службы является создание SCP для каждой реплики. Когда клиент запрашивает идентификатор GUID продукта службы или другое определение ключевого слова, он находит объекты SCP для всех реплик и выбирает одну из них случайным образом или с помощью какого-либо алгоритма балансировки нагрузки. Например, администратор может указать приоритет и данные балансировки нагрузки для каждой реплики аналогично полям приоритет и вес записи SRV DNS. Приложение установки службы может хранить эти данные в атрибуте **СЕРВИЦЕБИНДИНГИНФОРМАТИОН** SCP каждой реплики. Клиенты получают данные из каждой точки подключения службы и используют их для выбора реплики.

Другой стратегией является создание одной точки подключения службы для всех реплик и установка для атрибута **SERVICEDNSNAME** SCP имени DNS-записи SRV. Затем приложение установки для каждой реплики регистрирует запись SRV с таким именем. Когда клиент идентифицирует одиночную SCP службы, клиент получает имя записи SRV и использует функцию [**днскуери**](/windows/desktop/api/windns/nf-windns-dnsquery_a) для получения массива записей SRV для реплик. Каждая запись SRV содержит имя главного компьютера и дополнительные данные, которые клиент может использовать для выбора реплики.

## <a name="database-services"></a>Службы баз данных

Различные экземпляры службы базы данных могут содержать совершенно разные данные, даже если они относятся к одному типу службы, обычно именуемому классом службы. Для публикации этого типа службы атрибут **ключевых слов** SCP может обозначать как класс службы, так и конкретную базу данных. Клиент общего назначения, который знает только идентификатор GUID класса службы, может запрашивать все базы данных, опубликованные этим классом службы, а затем предоставлять пользовательский интерфейс, позволяющий пользователю выбрать один из них. Для клиента, разработанного специально для целевой базы данных, идентификатор GUID базы данных можно жестко закодировать в код клиента.

## <a name="host-based-services"></a>Службы на основе узла

Службы на основе узлов являются службами, тесно связанными с одним ведущим компьютером. Экземпляры класса службы можно установить на многих компьютерах, и каждый экземпляр предоставляет службы, которые определяются с его главным компьютером.

Каждый экземпляр службы на основе узла должен создать собственную SCP в объекте Computer своего узла. Клиенты, использующие идентификатор GUID продукта для поиска точки подключения службы на основе узла, обычно находят много экземпляров класса службы в пределах леса предприятия. Затем клиенты могут использовать атрибут **serviceDNSName** объекта запрашивая, чтобы найти SCP для экземпляра службы на нужном главном компьютере.

 

 