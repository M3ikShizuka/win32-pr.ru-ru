---
title: Отключение существующих классов и атрибутов
description: Добавления схемы являются постоянными.
ms.assetid: 13ffd2f5-cf1d-4cde-a3d5-74cb5a44b6fc
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 74863d0d3c72f383259cfe262f4b7aa6fa27774a
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103773250"
---
# <a name="disabling-existing-classes-and-attributes"></a>Отключение существующих классов и атрибутов

Добавления схемы являются постоянными. Нельзя удалять объекты **attributeSchema** и **classSchema** . В распределенной системе трудно гарантировать отсутствие экземпляров данного класса или атрибута. Удаление определения класса или атрибута повреждает существующие экземпляры этого класса или атрибута.

Можно отключить существующий класс или атрибут, пометив его как "уничтоженный". Это не влияет на существующие экземпляры класса или атрибута таким образом, что отмечено, но не позволяет создавать новые экземпляры.

При отключении классов и атрибутов схемы применяются следующие ограничения.

-   Нельзя отключить класс или атрибут категории 1.
-   Нельзя отключить атрибут, который является членом класса, который также не отключен. Это связано с тем, что для класса (не отключен) может потребоваться атрибут, и отключение атрибута предотвращает создание новых экземпляров класса.

Чтобы **отключить атрибут, задайте атрибуту** **attributeSchema** объекта его значение **true**. При отключении атрибута нельзя создать новые экземпляры атрибута. Чтобы повторно включить атрибут, установите для атрибута **уничтожение** **значение false**.

Чтобы отключить класс, присвойте атрибуту **classSchema** **объекта его значение** **true**. Если класс отключен, новые экземпляры класса создаваться не могут. Чтобы повторно включить класс, установите для атрибута **уничтожение** значение **false**.

Установка объектов схемы как уничтоженных может быть полезна в рабочих средах. Если тестовая версия расширения схемы больше не требуется, пометьте ее как нефункционирующую. Его можно восстановить, удалив атрибут « **уничтожение** » или установив для атрибута значение **false**. Это также защищает от непреднамеренного удаления объекта схемы, присвоив ему значение уничтоженное, так как операция может быть легко отменена.

Имейте в виду, что Active Directory сервер не очищает существующие экземпляры атрибута или класса при уничтожении объекта схемы. Если удалить свойство « **уничтожение** », все экземпляры станут допустимыми и нормальными объектами.

В следующем списке приведены другие последствия пометки объекта **attributeSchema** или **classSchema** как уничтоженного:

-   Добавление или изменение экземпляра завершается ошибкой.
-   Коды ошибок ведут себя так, как если бы Уничтоженный класс никогда не существовал.
-   Функции поиска и удаления ведут себя так, как если бы объекты схемы не стали уничтоженными.
-   Разрешить удаление всего атрибута из объекта.

Следующий список включает дополнительные параметры в рабочей среде для снижения влияния уничтоженных расширений схемы:

-   Удалите все значения атрибутов **майхаве** из уничтоженного класса.
-   Уменьшите размер всех значений атрибутов **муссаве** из уничтоженного класса.
-   Удаление уничтоженного атрибута из глобального каталога.
-   Удаляет Уничтоженный атрибут из любого индекса.

Другие варианты удаления ненужных изменений схемы в рабочей среде — разработчики могут использовать частный контроллер домена для тестирования. В этом случае можно:

-   Чтобы понизить роль контроллера домена, выполните сброс Active Directory Server с помощью Dcpromo.exe. После завершения понижения роли снова используйте Dcpromo.exe, чтобы повысить уровень сервера до контроллера домена. Затем разработчик может использовать сценарии LDIF для перезагрузки всех требуемых классов, атрибутов и экземпляров объектов.
-   Используйте Ntbackup.exe, чтобы выполнить резервное копирование состояния системы в доступном разделе диска. Для восстановления выполните перезагрузку в режим восстановления службы каталогов.

Для операционных систем Windows Server 2003 при установке класса или атрибута в значение уничтожение можно сразу же повторно использовать значения **LdapDisplayName**, **schemaIdGuid**, **OID** и **mapiID** для уничтоженного элемента схемы при создании нового класса или атрибута для его замены. Уничтоженная версия класса или атрибута сохраняется в контейнере схемы, но она скрыта в оснастке MMC. Чтобы повторно активировать старый элемент схемы **, задайте для** свойства **IsFalse значение false**.

В следующем примере кода LDIF показано, как изменить атрибут « **уничтожение** » и изменить RDN так, чтобы он не запутать новый класс, который вы создаете для его замены.

``` syntax
 dn: CN=MyClass,CN=Schema,CN=Configuration,DC=X
   changetype: modify
   replace: isDefunct
   isDefunct: TRUE
   -

   dn: CN=MyClass,CN=Schema,CN=Configuration,DC=X
   changetype: modrdn
   newrdn: cn=MyClassOld
   deleteoldrdn: 1

   dn:
   changetype: modify
   add: schemaUpdateNow
   schemaUpdateNow: 1
   -
```

Используйте следующую команду, чтобы выполнить пример кода LDIF в лесу для компьютера, работающего под управлением операционных систем Windows Server 2003.

**ldifde/i/f RDN. ldf/c "DC = X" "DC = MyDomain, DC = com"**

(Где "DC = X" является константой)

 

 




