---
description: Использование интерфейсов API родительского контроля
ms.assetid: 3d0bb750-0882-4b95-a595-38611f161ca9
title: Использование интерфейсов API родительского контроля
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f4ed69815bc04e00a3cae07f16530f8ea837f24a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105719501"
---
# <a name="using-parental-controls-apis"></a>Использование интерфейсов API родительского контроля

## <a name="api-selection"></a>Выбор API

Как отмечалось в разделе "Обзор", в разработке предполагается использование до трех интерфейсов API:

-   Основные параметры доступ: API-интерфейс с минимальным соответствием для родительского контроля (API соответствия), определенный в Впкапи. h, для простого доступа к подмножеству ключей родительского контроля.
-   Полная настройка доступа для записи и чтения. Использование небольшого подмножества API COM WMI для полного доступа требуется только в том случае, если поставщику программного обеспечения необходимо изменить параметры. Основной причиной использования API является добавление ссылки на расширяемость пользовательского интерфейса, замену фильтра веб-содержимого или дополнений к спискам исключений для приложения HTTP или фильтрации URL-адресов на уровне компьютера. Поскольку использование пространства имен "родительский контроль WMI" предоставляет необработанный доступ к базовому хранилищу параметров, независимые поставщики программного обеспечения должны соблюдать осторожность при интерпретации состояния отдельных параметров, которые могут фактически иметь зависимости от других параметров. Поэтому рекомендуется использовать API соответствия для чтения состояния для всех значений, предоставляемых этим API.
-   Ведение журнала. системный API трассировки и отчетов Windows Vista (также называемый ETW) для публикации событий действий в журналах родительского контроля в сочетании с дескрипторами событий и перечислениями массивов, определенными в Впцевент. h.

Все API-интерфейсы вызываемы как обычные пользователи. Для ведения журнала любой пользователь может вести журнал событий. Вызов для получения или изменения параметров другого пользователя завершится ошибкой, если вызывающий объект не имеет прав администратора. Иными словами, обычный пользователь может получить доступ только к его собственным параметрам и только для чтения.

Параметры и использование API для ведения журнала обсуждаются далее в следующих разделах:

-   [Использование API параметров родительского контроля](using-parental-controls-settings-apis.md)
-   [Использование API ведения журнала для родительского контроля](using-logging-apis-for-parental-controls.md)

## <a name="development-environment"></a>Среда разработки

Для разработки для родительских элементов управления требуется доступ к трем файлам заголовков: WPC. h, Впкапи. h и Впцевент. h. WPC. h — это сборщик, который включает в себя параметры общедоступного API соответствия и заголовков событий, поэтому в коде приложения достаточно включить WPC. h.

Разрешения на чтение и запись для API WMI указываются в файле Впкспров. mof. Этот файл устанавливается в подкаталог WBEM в каталоге Windows System32.

Пакет средств разработки программного обеспечения Microsoft Windows (SDK) содержит образец кода, который позволяет получить пример кода, приведенный здесь, и предоставляет простые средства, управляемые командной строкой для изучения API или интеграции.

 

 



