---
description: Использование интерфейсов API родительского контроля
ms.assetid: 3d0bb750-0882-4b95-a595-38611f161ca9
title: Использование интерфейсов API родительского контроля
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 463f21bbf04663e047f8122d131f900999f77e328ff1497989147427c61ec313
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120112774"
---
# <a name="using-parental-controls-apis"></a>Использование интерфейсов API родительского контроля

## <a name="api-selection"></a>Выбор API

Как отмечалось в разделе "Обзор", в разработке предполагается использование до трех интерфейсов API:

-   Основные параметры доступ: API-интерфейс с минимальным соответствием для родительского контроля (API соответствия), определенный в Впкапи. h, для простого доступа к подмножеству ключей родительского контроля.
-   Полная настройка доступа для записи и чтения. Использование небольшого подмножества API COM WMI для полного доступа требуется только в том случае, если поставщику программного обеспечения необходимо изменить параметры. Основной причиной использования API является добавление ссылки на расширяемость пользовательского интерфейса, замену фильтра веб-содержимого или дополнений к спискам исключений для приложения HTTP или фильтрации URL-адресов на уровне компьютера. Поскольку использование пространства имен "родительский контроль WMI" предоставляет необработанный доступ к базовому хранилищу параметров, независимые поставщики программного обеспечения должны соблюдать осторожность при интерпретации состояния отдельных параметров, которые могут фактически иметь зависимости от других параметров. Поэтому рекомендуется использовать API соответствия для чтения состояния для всех значений, предоставляемых этим API.
-   ведение журнала. в сочетании с дескрипторами событий и перечислениями массивов, определенными в впцевент. h, системный API трассировки событий и отчетов Windows Vista (также называемый ETW) для публикации событий действий в журналах родительского контроля.

Все API-интерфейсы вызываемы как обычные пользователи. Для ведения журнала любой пользователь может вести журнал событий. Вызов для получения или изменения параметров другого пользователя завершится ошибкой, если вызывающий объект не имеет прав администратора. Иными словами, обычный пользователь может получить доступ только к его собственным параметрам и только для чтения.

Параметры и ведение журнала использования API обсуждаются далее в следующих разделах:

-   [использование родительского контроля Параметры api](using-parental-controls-settings-apis.md)
-   [Использование API ведения журнала для родительского контроля](using-logging-apis-for-parental-controls.md)

## <a name="development-environment"></a>Среда разработки

Для разработки для родительских элементов управления требуется доступ к трем файлам заголовков: WPC. h, Впкапи. h и Впцевент. h. WPC. h — это сборщик, который включает в себя параметры общедоступного API соответствия и заголовков событий, поэтому в коде приложения достаточно включить WPC. h.

Разрешения на чтение и запись для API WMI указываются в файле Впкспров. mof. этот файл устанавливается во вложенный каталог WBEM в каталоге Windows System32.

пакет средств разработки программного обеспечения Microsoft Windows Software Development Kit (SDK) содержит пример кода, который позволяет получить пример кода, приведенный здесь, и предоставляет простые средства, управляемые командной строкой для изучения API или интеграции.

 

 



