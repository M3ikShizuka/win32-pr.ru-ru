---
title: Функция Сискреатерестореструктуре (Сисбкуп. h)
description: Создает структуру восстановления SIS на основе указанной информации.
ms.assetid: acdd4258-813d-42af-a2e1-e59a1426f86c
keywords:
- Резервное копирование функции Сискреатерестореструктуре
topic_type:
- apiref
api_name:
- SisCreateRestoreStructure
api_location:
- Sisbkup.dll
api_type:
- DllExport
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 4b83ebcdd609b00fdec19666a6915926692a2048
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "103891658"
---
# <a name="siscreaterestorestructure-function"></a>Функция Сискреатерестореструктуре

Функция **сискреатерестореструктуре** создает структуру восстановления SIS на основе указанной информации.

## <a name="syntax"></a>Синтаксис


```C++
BOOL SisCreateRestoreStructure(
  _In_  PWCHAR volumeRoot,
  _Out_ PVOID  *sisRestoreStructure,
  _Out_ PWCHAR *commonStoreRootPathname,
  _Out_ PULONG countOfCommonStoreFilesToRestore,
  _Out_ PWCHAR **commonStoreFilesToRestore
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*волумерут* \[ окне\]
</dt> <dd>

Имя файла корня тома без обратной косой черты тома, для которого будет выполняться резервное копирование. Например, укажите "C:", а не "C:" \\ . Том не может быть системным или загрузочным томом.

</dd> <dt>

*сисрестореструктуре* \[ заполняет\]
</dt> <dd>

Возвращенная структура восстановления SIS. Эта структура должна рассматриваться как непрозрачная вызывающим объектом.

</dd> <dt>

*коммонсторерутпаснаме* \[ заполняет\]
</dt> <dd>

Полное имя пути к общему хранилищу указанного тома. Например, "c: \\ Общее хранилище SIS".

</dd> <dt>

*каунтофкоммонсторефилесторесторе* \[ заполняет\]
</dt> <dd>

Число файлов, перечисленных в параметре *коммонсторефилесторесторе* .

</dd> <dt>

*коммонсторефилесторесторе* \[ заполняет\]
</dt> <dd>

Указатель на массив имен файлов, указывающий список внутренних файлов, используемых SIS для управления указанным томом. Эти файлы следует восстанавливать одновременно и так же, как и файлы общего хранилища, запрашиваемые [**сисксфилестобаккупфорлинк**](siscsfilestobackupforlink.md).

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Эта функция возвращает **значение true** , если она завершается успешно, и **false** в противном случае. Вызовите [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) , чтобы получить дополнительные сведения о причине сбоя вызова.

## <a name="remarks"></a>Комментарии

Эта функция устанавливает среду восстановления на указанном томе таким образом, как [**сискреатебаккупструктуре**](siscreatebackupstructure.md) устанавливает среду резервного копирования на указанном томе.

Обратите внимание, что эта функция не обязательно определяет файл или файлы Common-Store, соответствующие набору ссылок SIS на носителе резервной копии, если на диске все еще существуют общие файлы хранилища или файлов. Содержимое потока данных файла общего хранилища никогда не изменяется после его создания, поэтому если файл уже существует на диске, его не нужно восстанавливать.

Имена файлов общего хранилища глобально уникальны, чтобы обеспечить целостность операции восстановления, даже если она не выполняется на том же томе с поддержкой SIS, к которому осуществлялся доступ при операции резервного копирования.

После завершения операции восстановления следует освободить память, используемую массивом строк *коммонсторефилесторесторе* , вызвав [**сисфриаллокатедмемори**](sisfreeallocatedmemory.md).

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|----------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Только для \[ классических приложений Windows XP\]<br/>                                            |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2003\]<br/>                                   |
| Header<br/>                   | <dl> <dt>Сисбкуп. h</dt> </dl>   |
| Библиотека<br/>                  | <dl> <dt>Сисбкуп. lib</dt> </dl> |
| DLL<br/>                      | <dl> <dt>Sisbkup.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**сискреатебаккупструктуре**](siscreatebackupstructure.md)
</dt> <dt>

[**сисксфилестобаккупфорлинк**](siscsfilestobackupforlink.md)
</dt> <dt>

[**сисфриаллокатедмемори**](sisfreeallocatedmemory.md)
</dt> <dt>

[**сисфрибаккупструктуре**](sisfreebackupstructure.md)
</dt> </dl>

 

