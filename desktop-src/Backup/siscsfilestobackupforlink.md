---
title: Функция Сисксфилестобаккупфорлинк (Сисбкуп. h)
description: Возвращает сведения, описывающие файлы общего хранилища, на которые указывает ссылка SIS.
ms.assetid: 0580c34e-195a-4a2c-893f-bc339dcc88d7
keywords:
- Резервное копирование функции Сисксфилестобаккупфорлинк
topic_type:
- apiref
api_name:
- SisCSFilesToBackupForLink
api_location:
- Sisbkup.dll
api_type:
- DllExport
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 27d4f52728d662f43efed85d662874bd4b008947
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "105654455"
---
# <a name="siscsfilestobackupforlink-function"></a>Функция Сисксфилестобаккупфорлинк

Функция **сисксфилестобаккупфорлинк** возвращает сведения, описывающие файлы общего хранилища, на которые указывает ссылка SIS.

## <a name="syntax"></a>Синтаксис


```C++
BOOL SisCSFilesToBackupForLink(
  _In_  PVOID  sisBackupStructure,
  _In_  PVOID  reparseData,
  _In_  ULONG  reparseDataSize,
  _Out_ PVOID  thisFileContext,
  _Out_ PVOID  *matchingFileContext,
  _Out_ PULONG countOfCommonStoreFilesToBackUp,
  _Out_ PWCHAR **commonStoreFilesToBackUp
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*сисбаккупструктуре* \[ окне\]
</dt> <dd>

Указатель на структуру резервного копирования SIS, возвращенную из [**сискреатебаккупструктуре**](siscreatebackupstructure.md).

</dd> <dt>

*репарседата* \[ окне\]
</dt> <dd>

Указатель на содержимое точки повторного анализа SIS. Эта точка повторного анализа содержит данные, описывающие ссылку на SIS. Чтобы получить данные точки повторного анализа для файла, используйте управляющий код [**" \_ Получение \_ \_ точки**](/windows/desktop/api/winioctl/ni-winioctl-fsctl_get_reparse_point) повторного анализа фсктл".

</dd> <dt>

*репарседатасизе* \[ окне\]
</dt> <dd>

Размер содержимого точки повторной обработки SIS, на которую указывает *репарседата*, в байтах.

</dd> <dt>

*сисфилеконтекст* \[ заполняет\]
</dt> <dd>

Указатель на строку контекста, предоставленную приложением резервного копирования, вызывающим эту функцию. Содержимое этой строки содержимого полностью определяется этим приложением резервного копирования и не интерпретируется API резервного копирования SIS. Этот параметр является необязательным. Если не используется, присвойте этому параметру значение **null**. Значение этого параметра не будет обработано в этом случае.

</dd> <dt>

*матчингфилеконтекст* \[ заполняет\]
</dt> <dd>

Удвоение — косвенный указатель на строку контекста ссылки SIS, идентифицируемую сведениями, передаваемыми в первых четырех параметрах этой функции. Этот параметр является необязательным. Если строка контекста не указана в качестве значения параметра *сисфилеконтекст* , установите для этого параметра значение **null**. Значение этого параметра не будет обработано в этом случае.

</dd> <dt>

*каунтофкоммонсторефилестобаккуп* \[ заполняет\]
</dt> <dd>

Число файлов, перечисленных в параметре *коммонсторефилестобаккуп* .

</dd> <dt>

*коммонсторефилестобаккуп* \[ заполняет\]
</dt> <dd>

Указатель на массив имен файлов. Эти файлы следует архивировать одновременно и так же, как и файлы общего хранилища, запрашиваемые [**сискреатебаккупструктуре**](siscreatebackupstructure.md).

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Эта функция возвращает **значение true** , если она завершается успешно, и **false** в противном случае. Вызовите [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) , чтобы получить дополнительные сведения о причине сбоя вызова.

## <a name="remarks"></a>Комментарии

Приложение резервного копирования должно вызывать эту функцию только один раз для каждого файла ссылки SIS, для которого создается резервная копия.

Приложение резервного копирования может обнаруживать точку повторной обработки SIS по тегу, \_ ТЕГУ повторного анализа ввода-вывода \_ \_ . Этот тег определен в Winnt. h.

Если точка повторного анализа, определяемая значением параметра *репарседата* , описывает первый экземпляр файла для резервного копирования, эта функция возвращает **null** в качестве значения параметра *матчингфилеконтекст* и инициализирует значение массива строк *коммонсторефилестобаккуп* с именами файлов или файлов общего хранилища, для которых создается резервная копия. В противном случае эта функция задаст значение параметра *матчингфилеконтекст* строке контекста, соответствующей первому экземпляру указанного файла, и присвойте параметру *каунтофкоммонсторефилестобаккуп* значение 0. Если существует несколько файлов общего хранилища, соответствующих указанной ссылке, значение параметра *сисфилеконтекст* будет строкой контекста, соответствующей первому файлу Common-Store, возвращенному в массиве, то есть коммонсторефилестобаккуп \[ 0 \] .

Текущая версия этой функции будет возвращать не более одного файла общего хранилища, но в будущих версиях может существовать одна ссылка на несколько файлов общего хранилища, например по одному для каждого потока в файле, чтобы приложение резервного копирования поддерживало несколько файлов при каждом вызове этой функции. В любом случае каждый файл общего хранилища будет возвращаться не чаще одного раза для каждого этапа резервного копирования.

Приложение резервного копирования должно выполнять резервное копирование или восстановление файлов или файлов общего хранилища, определенных по имени файла или именам файлов, возвращаемым в параметре *коммонсторефилестобаккуп* . Независимо от того, существует ли соответствующий файл общего хранилища, приложение резервного копирования должно создать резервную копию файла канала SIS, так как он существует на диске, например, как точка повторного анализа и разреженный файл, и, скорее всего, не заполнены диапазонами. Приложение резервного копирования может немедленно выполнить резервное копирование или восстановление файлов или файлов общего хранилища, отложить их резервное копирование или при необходимости смешивать их вместе.

После завершения операции резервного копирования следует освободить память, используемую массивом строк *коммонсторефилестобаккуп* , вызвав [**сисфриаллокатедмемори**](sisfreeallocatedmemory.md).

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|----------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Только для \[ классических приложений Windows XP\]<br/>                                            |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2003\]<br/>                                   |
| Header<br/>                   | <dl> <dt>Сисбкуп. h</dt> </dl>   |
| Библиотека<br/>                  | <dl> <dt>Сисбкуп. lib</dt> </dl> |
| DLL<br/>                      | <dl> <dt>Sisbkup.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**сисфриаллокатедмемори**](sisfreeallocatedmemory.md)
</dt> <dt>

[**сискреатебаккупструктуре**](siscreatebackupstructure.md)
</dt> </dl>

 

