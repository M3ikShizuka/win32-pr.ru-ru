---
title: Функция Сисресторедлинк (Сисбкуп. h)
description: Возвращает имена файлов или файлов общего хранилища, на которые указывает указанная восстановленная ссылка SIS.
ms.assetid: 4eefd975-6055-44c0-93ab-900638948f3e
keywords:
- Резервное копирование функции Сисресторедлинк
topic_type:
- apiref
api_name:
- SisRestoredLink
api_location:
- Sisbkup.dll
api_type:
- DllExport
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: fd539d1ad6c203441b2bcd469a7d8f2fe8bdfc7c
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "103988382"
---
# <a name="sisrestoredlink-function"></a>Функция Сисресторедлинк

Функция **сисресторедлинк** возвращает имена файлов или файлов общего хранилища, на которые указывает указанная восстановленная ссылка SIS.

## <a name="syntax"></a>Синтаксис


```C++
BOOL SisRestoredLink(
  _In_  PVOID  sisRestoreStructure,
  _In_  PWCHAR restoredFileName,
  _In_  PVOID  reparseData,
  _In_  ULONG  reparseDataSize,
  _Out_ PULONG countOfCommonStoreFilesToRestore,
  _Out_ PWCHAR **commonStoreFilesToRestore
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*сисрестореструктуре* \[ окне\]
</dt> <dd>

Указатель на структуру восстановления SIS, возвращенную из [**сискреатерестореструктуре**](siscreaterestorestructure.md).

</dd> <dt>

*ресторедфиленаме* \[ окне\]
</dt> <dd>

Полное имя восстановленного файла канала SIS.

</dd> <dt>

*репарседата* \[ окне\]
</dt> <dd>

Указатель на содержимое точки повторного анализа SIS. Эта точка повторного анализа содержит данные, описывающие восстановленную ссылку на SIS. Чтобы получить данные точки повторного анализа для файла, используйте управляющий код [**" \_ Получение \_ \_ точки**](/windows/desktop/api/winioctl/ni-winioctl-fsctl_get_reparse_point) повторного анализа фсктл".

</dd> <dt>

*репарседатасизе* \[ окне\]
</dt> <dd>

Размер содержимого точки повторной обработки SIS, на которую указывает *репарседата*, в байтах.

</dd> <dt>

*каунтофкоммонсторефилесторесторе* \[ заполняет\]
</dt> <dd>

Число файлов, перечисленных в параметре *коммонсторефилесторесторе* .

</dd> <dt>

*коммонсторефилесторесторе* \[ заполняет\]
</dt> <dd>

Указатель на массив имен файлов общего хранилища. Эти файлы следует восстанавливать одновременно и так же, как и файлы общего хранилища, запрашиваемые [**сисксфилестобаккупфорлинк**](siscsfilestobackupforlink.md).

Если значение параметра *каунтофкоммонсторефилесторесторе* не равно 0, то значение параметра *коммонсторефилесторесторе* будет содержать имена файлов общего хранилища, которые будут восстановлены в результате восстановления связи SIS. Если значение равно 0, то либо файлы общего хранилища были возвращены один раз, либо они уже имеются в томе.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Эта функция возвращает **значение true** , если она завершается успешно, и **false** в противном случае. Вызовите [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) , чтобы получить дополнительные сведения о причине сбоя вызова.

## <a name="remarks"></a>Комментарии

Эту функцию следует вызывать для каждого восстановленного канала SIS.

Эта функция будет возвращать каждый файл Common-Store не чаще для каждой операции восстановления. Любая попытка восстановить дополнительные каналы SIS, которые видят один и тот же файл общего хранилища, не приведет к возвращению имени файла общего хранилища.

Эта функция не возвращает файл общего хранилища, который также не был возвращен при вызове [**сисксфилестобаккупфорлинк**](siscsfilestobackupforlink.md) во время операции резервного копирования, предполагая, что данные повторной обработки SIS, хранящиеся на носителе, не повреждены.

При восстановлении канала SIS операция восстановления должна создать только соответствующий разреженный файл, инициализировать все выделенные диапазоны, а затем записать данные повторной обработки SIS в том виде, в котором они были считаны во время операции резервного копирования. Крайне важно, чтобы операция восстановления создания разреженных файлов с нераспределенными диапазонами, а не разреженными файлами (или неэкономными файлами), инициализированными нулями.

Обратите внимание, что эта функция не обязательно определяет файл или файлы общего хранилища, соответствующие набору ссылок SIS на носителе резервной копии, если на диске остались файлы общих или файлов общего хранилища. Содержимое потока данных файла общего хранилища никогда не изменяется после его создания, поэтому, если файл уже существует на диске, его не нужно восстанавливать.

Имена файлов общего хранилища глобально уникальны, чтобы обеспечить целостность операции восстановления, даже если она не выполняется на том же томе с поддержкой SIS, к которому осуществлялся доступ при операции резервного копирования.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|----------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Только для \[ классических приложений Windows XP\]<br/>                                            |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2003\]<br/>                                   |
| Header<br/>                   | <dl> <dt>Сисбкуп. h</dt> </dl>   |
| Библиотека<br/>                  | <dl> <dt>Сисбкуп. lib</dt> </dl> |
| DLL<br/>                      | <dl> <dt>Sisbkup.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**сискреатерестореструктуре**](siscreaterestorestructure.md)
</dt> <dt>

[**сисксфилестобаккупфорлинк**](siscsfilestobackupforlink.md)
</dt> </dl>

 

