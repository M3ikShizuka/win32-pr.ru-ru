---
description: Прикладной программный интерфейс (API) пула потоков использует проект на основе объектов.
ms.assetid: c8656469-a273-4838-aa1a-86140b0cd0a2
title: API пула потоков
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 38e2c9446c6a0432d0fc71e4d888448e73aca3e3282ed03e332f2347390cc72f
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117792972"
---
# <a name="thread-pool-api"></a>API пула потоков

Прикладной программный интерфейс (API) пула потоков использует проект на основе объектов. Каждый из следующих объектов представлен структурой данных пользовательского режима:

-   Объект пула — это набор рабочих потоков, которые можно использовать для выполнения работы. Каждый процесс может создать несколько изолированных пулов с различными характеристиками по мере необходимости. Для каждого процесса также существует пул по умолчанию.
-   Группа очистки связана с набором объектов, создающих обратные вызовы. Существуют функции ожидания и освобождения всех объектов, являющихся членами каждой группы очистки. Это освобождает приложение от отслеживания всех созданных объектов.
-   Рабочий объект назначается пулу и, при необходимости, группе очистки. Он может быть опубликован, что приводит к тому, что рабочий поток из пула выполняет свой обратный вызов. Рабочий объект может иметь несколько необработанных записей. Каждый из них создает обратный вызов. Не удается выполнить операцию POST из-за нехватки ресурсов.
-   Объект Timer управляет планированием обратных вызовов. Каждый раз при истечении срока действия таймера его обратный вызов публикуется в своем рабочем пуле. Не удается настроить таймер из-за нехватки ресурсов.
-   Объект Wait заставляет поток ожидания ожидать ожидающего обработки. После завершения ожидания или истечения времени ожидания поток ожидания отправляет обратный вызов объектов Wait в рабочий пул ожидания. Не удалось установить ожидание из-за нехватки ресурсов.
-   Объект ввода-вывода связывает файловый обработчик с портом завершения ввода-вывода для пула потоков. По завершении асинхронной операции ввода-вывода рабочий поток берет состояние операции и вызывает обратный вызов объекта ввода-вывода.

В следующей таблице описаны возможности интерфейсов API исходного и текущего пула потоков.



| Компонент              | Исходный API                                                                                                                                                                                                                                                                                                                   | Текущий API                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Синхронизация                | [**RegisterWaitForSingleObject**](/windows/win32/api/winbase/nf-winbase-registerwaitforsingleobject)<br/> [**UnregisterWaitEx**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-unregisterwaitex)<br/>                                                                                                                                                                                        | [**клосесреадпулваит**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolwait)<br/> [**креатесреадпулваит**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolwait)<br/> [**SetThreadpoolWait**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpoolwait)<br/> [**ваитфорсреадпулваиткаллбаккс**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpoolwaitcallbacks)<br/>                                                                                                                                                                                                                                                                                                                   |
| Work                 | [**QueueUserWorkItem**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-queueuserworkitem)<br/>                                                                                                                                                                                                                                                                      | [**клосесреадпулворк**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolwork)<br/> [**креатесреадпулворк**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolwork)<br/> [**SubmitThreadpoolWork**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-submitthreadpoolwork)<br/> [**TrySubmitThreadpoolCallback**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-trysubmitthreadpoolcallback)<br/> [**WaitForThreadpoolWorkCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpoolworkcallbacks)<br/>                                                                                                                                                                                                                               |
| Таймер                | [**CreateTimerQueue**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-createtimerqueue)<br/> [**CreateTimerQueueTimer**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-createtimerqueuetimer)<br/> [**чанжетимеркуеуетимер**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-changetimerqueuetimer)<br/> [**DeleteTimerQueueTimer**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-deletetimerqueuetimer)<br/> [**делететимеркуеуикс**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-deletetimerqueueex)<br/> | [**клосесреадпултимер**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpooltimer)<br/> [**креатесреадпултимер**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpooltimer)<br/> [**иссреадпултимерсет**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-isthreadpooltimerset)<br/> [**SetThreadpoolTimer**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpooltimer)<br/> [**ваитфорсреадпултимеркаллбаккс**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpooltimercallbacks)<br/>                                                                                                                                                                                                                                           |
| Ввод-вывод                  | [**BindIoCompletionCallback**](/windows/desktop/api/WinBase/nf-winbase-bindiocompletioncallback)<br/>                                                                                                                                                                                                                                                        | [**канцелсреадпулио**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-cancelthreadpoolio)<br/> [**клосесреадпулио**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolio)<br/> [**креатесреадпулио**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolio)<br/> [**стартсреадпулио**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-startthreadpoolio)<br/> [**ваитфорсреадпулиокаллбаккс**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpooliocallbacks)<br/>                                                                                                                                                                                                                                                                   |
| Группа очистки       |                                                                                                                                                                                                                                                                                                                                | [**клосесреадпулклеанупграуп**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolcleanupgroup)<br/> [**CloseThreadpoolCleanupGroupMembers**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolcleanupgroupmembers)<br/> [**креатесреадпулклеанупграуп**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolcleanupgroup)<br/>                                                                                                                                                                                                                                                                                                                                     |
| пул                 |                                                                                                                                                                                                                                                                                                                                | [**клосесреадпул**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpool)<br/> [**креатесреадпул**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpool)<br/> [**SetThreadpoolThreadMaximum**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpoolthreadmaximum)<br/> [**SetThreadpoolThreadMinimum**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpoolthreadminimum)<br/>                                                                                                                                                                                                                                                                                                                         |
| Среда ответного вызова |                                                                                                                                                                                                                                                                                                                                | [**дестройсреадпуленвиронмент**](/windows/desktop/api/WinBase/nf-winbase-destroythreadpoolenvironment)<br/> [**инитиализесреадпуленвиронмент**](/windows/desktop/api/WinBase/nf-winbase-initializethreadpoolenvironment)<br/> [**сетсреадпулкаллбаккклеанупграуп**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackcleanupgroup)<br/> [**сетсреадпулкаллбакклибрари**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbacklibrary)<br/> [**сетсреадпулкаллбаккпул**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackpool)<br/> [**сетсреадпулкаллбаккприорити**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackpriority)<br/> [**SetThreadpoolCallbackRunsLong**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackrunslong)<br/> |
| Обратный вызов             |                                                                                                                                                                                                                                                                                                                                | [**CallbackMayRunLong**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-callbackmayrunlong)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Очистка обратного вызова    |                                                                                                                                                                                                                                                                                                                                | [**DisassociateCurrentThreadFromCallback**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-disassociatecurrentthreadfromcallback)<br/> [**фрилибраривхенкаллбаккретурнс**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-freelibrarywhencallbackreturns)<br/> [**леавекритикалсектионвхенкаллбаккретурнс**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-leavecriticalsectionwhencallbackreturns)<br/> [**релеасемутексвхенкаллбаккретурнс**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-releasemutexwhencallbackreturns)<br/> [**релеасесемафоревхенкаллбаккретурнс**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-releasesemaphorewhencallbackreturns)<br/> [**сетевентвхенкаллбаккретурнс**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-seteventwhencallbackreturns)<br/>                                 |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Пулы потоков](thread-pools.md)
</dt> <dt>

[Использование функций пула потоков](using-the-thread-pool-functions.md)
</dt> </dl>

 

 
