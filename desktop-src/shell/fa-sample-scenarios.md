---
description: В следующем примере гипотетическая компания разработки программного обеспечения под названием Litware, Inc.
ms.assetid: e4392907-a84f-40ea-aa88-2ad0510bca3c
title: Пример сопоставления файлов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 23b92922bb907c4dd90b3e2bdc3d16c8e8b52e6a
ms.sourcegitcommit: b0d03febac36ff77cba034615b94ea103311398d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/19/2021
ms.locfileid: "107715792"
---
# <a name="file-association-example"></a>Пример сопоставления файлов

В следующем примере гипотетическая компания разработки программного обеспечения под названием Litware, Inc. создает новый звуковой проигрыватель с именем Литвареплайер. Litware хочет разработать сопоставление файлов между Литвареплайер и его первичным типом файлов, который использует недавно разработанный звуковой формат, позволяющий хранить весь аудио компакт-диск менее чем на 10 килобайтах памяти без потери качества.

> [!IMPORTANT]
> Этот раздел не относится к Windows 10. Способ изменения связей файлов по умолчанию в Windows 10. Дополнительные сведения см. в разделе об **изменениях в статье обработка приложений по умолчанию** в [этой записи](https://blogs.windows.com/windows-insider/2015/05/20/announcing-windows-10-insider-preview-build-10122-for-pcs/)в Windows 10.

 

## <a name="designing-a-new-file-association"></a>Проектирование нового сопоставления файлов

Компания должна выполнить следующие действия.

1.  **Определите, следует ли обрабатывать новый тип файлов как открытый или частный.** Этот новый тип файла является типом носителя. Так как пользователи обмениваются файлами мультимедиа на различных платформах и могут иметь другие приложения, которым необходимо считывать формат Литвареплайер, наиболее подходящим является [общедоступный](fa-file-types.md) тип файлов.
2.  **Определите, был ли уже определен этот тип файла.** Проверьте базу данных MIME (IANA), а также другие общедоступные базы данных типа файлов в Интернете, чтобы определить, что сравниваемый тип файлов не определен. Так как это новый формат файла, необходимо определить новый тип файлов.
3.  **Определите расширение имени файла для нового типа файлов.** Разработчики выбирают объект `.opa-ltw-audio` , который включает в себя аббревиатуру поставщика, и подсказку о том, что содержит файл. Исследование определяет, что расширение не используется другими пользователями. В соответствии с текущими рекомендациями короткое расширение не определено.
4.  **Определите тип MIME для типа файла и зарегистрируйте его с помощью IANA.** Litware определяет новый тип MIME как *Audio/литвареплайер. 1* и подготавливает приложение типа MIME, следуя рекомендациям, изложенным в документе RFC (запросы на комментарии) 2045, 2046, 2047 и 2048. Затем они отправляют приложение в IANA, который добавляет новый тип файлов в базу данных зарегистрированных типов MIME.
5.  **Определите, существует ли идентификатор ProgID для типа файла.** Так как это новый тип файла, для него не существует [ProgID](fa-progids.md) . Litware задает создание нового идентификатора ProgID для Литвареплайер. Они решают использовать понятное имя "Литвареплайер Audio Player" (которое хранится в виде ресурса в файле LitwarePlayer.exe) и разрабатывает значок по умолчанию для файлов, связанных с Литвареплайер (также хранимых в LitwarePlayer.exe). Так как Литвареплайер — это новое приложение, это идентификатор ProgID версии 1.
6.  **Зарегистрируйте идентификатор ProgID.** При установке Литвареплайер программа установки создает в реестре следующую запись [ProgID](fa-progids.md) .

    ```
    HKEY_CLASSES_ROOT
       Litware.LitwarePlayer.1
          (Default) = LitwarePlayer Audio Player
          FriendlyTypeName = @LitwarePlayer, -120
          CurVer
             (Default) = Litware.LitwarePlayer.1
          DefaultIcon
             (Default) = LitwarePlayer, -142
          shell
             play
                command
                   (Default) = "%ProgramFiles%\LitwarePlayer\LitwarePlayer.exe" "%1"
    ```

    В командном ключе %1 передается в качестве пути к файлу для воспроизведения.

7.  **Зарегистрируйте расширение имени файла для типа файла.** При установке Литвареплайер программа установки создает в реестре следующие записи для пользовательского расширения типа файла.

    ```
    HKEY_CLASSES_ROOT
       .opa-vwi-audio
          (Default) = Litware.LitwarePlayer.1
          PerceivedType = Audio
          Content Type = audio/LitwarePlayer
    ```

> [!Note]  
> При каждом создании или изменении сопоставления файлов уведомите систему о том, что изменение было выполнено путем вызова [**шчанженотифи**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shchangenotify), указав \_ событие ассокчанжед шкне. Если это не сделано, оболочка может не распознать изменения, внесенные до перезагрузки системы.

 

## <a name="additional-resources"></a>Дополнительные ресурсы

-   [Общие сведения о сопоставлении файлов](fa-intro.md)
-   [Как зарегистрировать Интернет браузер или почтовый клиент в меню "Пуск" Windows](start-menu-reg.md)
-   [Регистрация приложения в схеме URI](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa767914(v=vs.85))

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Рекомендации по сопоставлению файлов](fa-best-practices.md)
</dt> <dt>

[Рекомендации по управлению приложениями по умолчанию в Windows Vista и более поздних версиях](vista-managing-defaults.md)
</dt> <dt>

[Программы по умолчанию](default-programs.md)
</dt> <dt>

[Настройка доступа к программе и параметров по умолчанию для компьютера (SPAD)](cpl-setprogramaccess.md)
</dt> </dl>

 

 
