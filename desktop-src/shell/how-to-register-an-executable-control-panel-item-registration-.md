---
description: Для элементов панели управления, которые реализуются как .exe файлы, Специальные операции экспорта или обработки сообщений не требуются. Любой файл .exe можно зарегистрировать в качестве объекта команды, который будет отображаться с точкой входа в папке панели управления.
title: Регистрация исполняемых элементов панели управления
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b81e52e18bd2cd1c48d5d260b08844784a5286dd2cd4d9d5ec782a86f624fc42
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120009434"
---
# <a name="how-to-register-executable-control-panel-items"></a>Регистрация исполняемых элементов панели управления

Для элементов панели управления, которые реализуются как .exe файлы, Специальные операции экспорта или обработки сообщений не требуются. Любой файл .exe можно зарегистрировать в качестве объекта команды, который будет отображаться с точкой входа в папке панели управления.

Пример используется для демонстрации требований к регистрации. в примере показано, как зарегистрировать элемент панели управления с именем **My Параметры** в качестве объекта команды, чтобы он появился в окне панели управления. окно " **мое Параметры** " также отображается при `MyApp.exe /settings` выполнении команды.

## <a name="instructions"></a>Инструкции

### <a name="step-1"></a>Шаг 1.

Создайте идентификатор GUID для элемента панели управления. Идентификатор GUID однозначно определяет элемент панели управления. В этом примере `{0052D9FC-6764-4D29-A66F-2F3BD9E2BB40}` — это идентификатор GUID элемента панели управления.

### <a name="step-2"></a>Шаг 2.

Используя идентификатор GUID в качестве имени, добавьте подраздел в реестр следующим образом.

```
HKEY_LOCAL_MACHINE
   SOFTWARE
      Microsoft
         Windows
            CurrentVersion
               Explorer
                  ControlPanel
                     NameSpace
                        {0052D9FC-6764-4D29-A66F-2F3BD9E2BB40}
                           (Default) = My Settings
```

Данные для записи по умолчанию — это просто \_ имя REG SZ элемента панели управления. Запись по умолчанию может оказаться полезной для поиска идентификатора GUID, но это необязательно.

### <a name="step-3"></a>Шаг 3.

Используя идентификатор GUID в качестве имени, добавьте подраздел и его записи в реестр, как показано ниже.

```
HKEY_CLASSES_ROOT
   CLSID
      {0052D9FC-6764-4D29-A66F-2F3BD9E2BB40}
         (Default) = My Settings
         LocalizedString = @%ProgramFiles%\MyCorp\MyApp.exe,-9
         InfoTip = @%ProgramFiles%\MyCorp\MyApp.exe,-5
         System.ApplicationName = MyCorporation.MySettings
         System.ControlPanel.Category = 1,8
         System.Software.TasksFileUrl = %ProgramFiles%\MyCorp\MyApp\MyTaskLinks.xml
```

-   **Default**. REG \_ SZ. Отображаемое имя для элемента панели управления.
-   **Локализедстринг**. Необязательный элемент. REG \_ SZ или REG \_ expand \_ SZ. Имя модуля и идентификатор таблицы строк локализованного имени элемента панели управления. формат — это знак "at" (@), за которым следует имя .exe или .dll, содержащее таблицу строк многоязычный пользовательский интерфейс (MUI). Переменные среды можно использовать в качестве замены части пути. В пути и имени файла следует запятая (,) и дефис (-), за которым следует идентификатор в таблице строк.

    Если у модуля нет таблицы строк, то эта запись может просто быть отображаемой строкой имени. При использовании только строки отображаемого имени, а не таблицы строк, имя не изменяется на текущий язык интерфейса.

-   **Подсказка**. REG \_ SZ или REG \_ expand \_ SZ. Описание элемента панели управления. Эта информация отображается во всплывающей подсказке, которая отображается при наведении указателя мыши на значок элемента. Синтаксис такой же, как и для Локализедстринг, включая возможность простого предоставления строки, а не ссылки на таблицу строк.
-   **System. ApplicationName**. REG \_ SZ. Каноническое имя элемента. Команда формы `control.exe /name System.ApplicationName` открывает элемент, например `control.exe /name MyCorporation.MySettings` . Дополнительные сведения об использовании Control.exe см. в разделе [исполнение элементов панели управления](executing-control-panel-items.md) .
-   **System. контролпанел. Category**. REG \_ SZ. Значение, объявляющее категории панели управления, в которых отображается элемент. Несколько категорий разделяются запятыми. в приведенном выше примере запись указывает, что элемент " **мой Параметры** " должен отображаться в категориях "внешний вид", " **персонализация** " и " **программы** ". См. раздел [Назначение категорий панели управления](assigning-control-panel-categories.md) для возможных значений категорий.
-   **System. Software. тасксфилеурл**. REG \_ SZ или REG \_ expand \_ SZ. Путь к XML-файлу, который определяет [связи задач](creating-searchable-task-links.md). Это может быть прямой путь к файлу, как показано в примере, или внедренный ресурс, указанный в качестве имени модуля, и идентификатор ресурса, например "% ProgramFiles% \\ MyCorp \\ MyApp \\MyApp.exe,-31".

### <a name="step-4"></a>Шаг 4.

В том же подразделе GUID добавьте следующий подраздел в реестр, чтобы указать путь к файлу, содержащему значок, и идентификатор ресурса изображения в этом файле.

```
HKEY_CLASSES_ROOT
   CLSID
      {0052D9FC-6764-4D29-A66F-2F3BD9E2BB40}
         DefaultIcon
            (Default) = %ProgramFiles%\MyCorp\MyApp.exe,-2
```

Обратите внимание, что хотя синтаксис похож на упомянутые выше записи Локализедстринг и подсказки, в качестве префикса в записи REG SZ или REG Expand не используется символ "@" \_ \_ \_ , указывающий путь.

### <a name="step-5"></a>Шаг 5.

Добавьте следующие сведения в реестр для предоставления команды, вызываемой системой при открытии пользователем панели управления.

```
HKEY_CLASSES_ROOT
   CLSID
      {0052D9FC-6764-4D29-A66F-2F3BD9E2BB40}
         Shell
            Open
               Command
                  (Default) = [REG_EXPAND_SZ] %ProgramFiles%\MyCorp\MyApp.exe /Settings
```

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Регистрация элементов панели управления](registering-control-panel-items.md)
</dt> <dt>

[Регистрация элементов панели управления DLL](how-to-register-dll-control-panel-item-registration-.md)
</dt> </dl>

 

 



