---
description: В этом разделе приведены ссылки на записи, которые можно использовать в файле autorun. INF. Запись состоит из ключа и значения.
ms.assetid: 5b8fd559-b1be-4552-a7be-19ad107855af
title: Записи autorun. INF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 56d93244f177d107bddc720fab1d0c774fd94735
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104262921"
---
# <a name="autoruninf-entries"></a>Записи autorun. INF

В этом разделе приведены ссылки на записи, которые можно использовать в файле autorun. INF. Запись состоит из ключа и значения.

-   [\[Ключи автозапуска \]](#autorun-keys)
    -   [action](#parameters)
    -   [CustomEvent](#customevent)
    -   [значок](#parameters)
    -   [label](#parameters)
    -   [open](#parameters)
    -   [усеаутоплай](#parameters)
    -   [вызов](#shellexecute)
    -   [консоль](#autoruninf-entries)
    -   [\\команда оболочки](#shellverb)
-   [\[\]Ключи содержимого](#content-keys)
-   [\[\]Ключи ексклусивеконтентпасс](#exclusivecontentpaths-keys)
-   [\[\]Ключи игнореконтентпасс](#ignorecontentpaths-keys)
-   [\[\]Ключи девицеинсталл](#deviceinstall-keys)
    -   [DriverPath](#driverpath)

## <a name="autorun-keys"></a>\[Ключи автозапуска \]

-   [action](#parameters)
-   [CustomEvent](#customevent)
-   [значок](#parameters)
-   [label](#parameters)
-   [open](#parameters)
-   [усеаутоплай](#parameters)
-   [вызов](#shellexecute)
-   [консоль](#autoruninf-entries)
-   [\\команда оболочки](#shellverb)

### <a name="action"></a>action

Запись **действия** указывает текст, используемый в диалоговом окне автозапуска для обработчика, представляющего программу, указанную в записи [Open](#parameters) или [ShellExecute](#shellexecute) в файле autorun. INF. Значение может быть выражено как текст или как ресурс, хранящийся в двоичном файле.


```
action=ActionText
```




```
action=@[filepath\]filename,-resourceID
```



### <a name="parameters"></a>Параметры

-   *актионтекст*

    Текст, который используется в диалоговом окне автозапуска для обработчика, представляющего программу, указанную в записи [Open](#parameters) или [ShellExecute](#shellexecute) в файле autorun. INF.

-   *равно*

    Строка, содержащая полный путь к каталогу, содержащему двоичный файл, содержащий строку. Если путь не указан, файл должен находиться в корневом каталоге диска.

-   *filename*

    Строка, содержащая имя двоичного файла.

-   *Идентификатора*

    Идентификатор строки в двоичном файле.

### <a name="remarks"></a>Примечания

Ключ **действия** используется только в Windows XP с пакетом обновления 2 (SP2) или более поздней версии. Поддерживается только для дисков типа " \_ съемный диск" и " \_ ФИКСИРОВАНный диск". В случае \_ съемного диска требуется ключ **действия** . Команда **действия** в файле autorun. INF звукового компакт-диска или фильма DVD пропускается, и эти носители продолжают работать как в Windows XP с пакетом обновления 1 (SP1) и более ранних версиях.

Строка, отображаемая в диалоговом окне автозапуска, создается путем объединения текста, указанного в записи **действия** , с жестко заданным именем поставщика, предоставленным оболочкой. Рядом с ним отображается [значок](#parameters) . Эта запись всегда отображается как первый параметр в диалоговом окне Автозапуск и выбран по умолчанию. Если пользователь принимает параметр, запускается приложение, указанное в записи [Open](#parameters) или [ShellExecute](#shellexecute) файла autorun. INF. Параметр **всегда выполнять выбранное действие** недоступен в этой ситуации.

Сочетание клавиш [действия](#parameters) и [значка](#parameters) определяет представление приложения, видимое для конечного пользователя в диалоговом окне автозапуска. Они должны составляться таким образом, чтобы пользователи могли легко их определять. Они должны указывать приложение для выполнения, компанию, создавшую его, и все связанные фирменные символики.

Для обеспечения обратной совместимости запись **действия** является необязательной для устройств типа \_ фиксированное устройство. Для этого типа в диалоговом окне автозапуска используется запись по умолчанию, если в файле autorun. INF отсутствует запись **действия** .

Запись **действия** является обязательной для устройств типа " \_ съемный диск", до тех пор пока не будет добавлена поддержка autorun. INF. Если запись **действия** отсутствует, диалоговое окно автозапуска отображается, но не имеет параметра для запуска дополнительного содержимого.

### <a name="customevent"></a>CustomEvent

Запись **CustomEvent** указывает событие пользовательского содержимого автозапуска.


```
CustomEvent=CustomEventName
```



### <a name="parameters"></a>Параметры

-   *CustomEventName*

    Текстовая строка, содержащая имя события автозапуска содержимого. Имя должно содержать не более 100 алфавитно-цифровых символов.

### <a name="remarks"></a>Примечания

В файл autorun. INF тома можно включить имя пользовательского события. Когда программа автозапуска запрашивает у пользователя приложение для использования с томом, оно отображает только те приложения, которые зарегистрированы для указанного имени пользовательского события. Сведения о том, как зарегистрировать приложение в качестве обработчика для события пользовательского содержимого автозапуска, см. в разделе [Автоматический запуск с помощью](/previous-versions/windows/apps/hh452731(v=win.10)) автозапуска или [Регистрация обработчика событий](how-to-register-an-event-handler.md).

В следующем примере задается значение «Миконтентонарривал» в качестве нового события автоматического содержимого.


```
CustomEvent=MyContentOnArrival
```



### <a name="icon"></a>icon

Запись **Icon** указывает значок, представляющий диск с поддержкой автозапуска в пользовательском интерфейсе Windows.


```
icon=iconfilename[,index]
```



### <a name="parameters"></a>Параметры

-   *иконфиленаме*

    Имя файла ICO, BMP, exe или DLL, содержащего сведения о значке. Если файл содержит более одного значка, необходимо также указать Отсчитываемый от нуля индекс значка.

### <a name="remarks"></a>Примечания

Значок вместе с меткой представляет диск с поддержкой автозапуска в пользовательском интерфейсе Windows. Например, в проводнике Windows диск представляется этим значком вместо стандартного значка диска. Файл значка должен находиться в том же каталоге, что и файл, заданный командой [Open](#parameters) .

В следующем примере задается второй значок в файле MyProg.exe.


```
icon=MyProg.exe,1
```



### <a name="label"></a>метка

В записи **метки** указывается текстовая метка, представляющая диск с поддержкой автозапуска в пользовательском интерфейсе Windows.


```
label=LabelText
```



### <a name="parameters"></a>Параметры

-   *LabelText*

    Текстовая строка, содержащая метку. Оно может содержать пробелы и не должно быть длиннее 32 символов.

> [!Note]  
> Можно указать значение в параметре **LabelText** , который превышает 32 символов и не получает сообщения об ошибке. Однако система отображает только первые 32 символов. Все символы после 32-го усекаются и не отображаются. Например, если **LabelText** имеет следующий вид: метка = "Этот компакт-диск предназначен для конечного музыкального компакт-диска". появится следующее: "Этот компакт-диск рассчитан на UL".

 

### <a name="remarks"></a>Примечания

Метка вместе со значком представляет диск с поддержкой автозапуска в пользовательском интерфейсе Windows.

В следующем примере в качестве метки диска задается значение "моя метка диска".


```
label=My Drive Label
```



### <a name="open"></a>open

**Открытая** запись указывает путь и имя файла приложения, которое запускается при вставке диска в дисковод.


```
open=[exepath\]exefile [param1 [param2] ...] 
```



### <a name="parameters"></a>Параметры

-   *exefile*

    Полный путь к исполняемому файлу, запускаемому при вставке компакт-диска. Если указано только имя файла, оно должно находиться в корневом каталоге диска. Чтобы определить расположение файла в подкаталоге, необходимо указать путь. Можно также включить один или несколько параметров командной строки для передачи в запускаемое приложение.

### <a name="useautoplay"></a>усеаутоплай

В Windows XP запись **усеаутоплай** указывает, что вместо автозапуска следует использовать автозапуск.

В Windows Vista и более поздних версиях эта запись приводит к подавлению каких-либо действий, заданных для автозапуска (с помощью записей **Open** или **ShellExecute** ), из диалогового окна автозапуска. Эта запись не влияет на версии Windows, предшествующие Windows XP.

В Windows 8 и более поздних версиях при указании значения 0 автозапуск для этого устройства будет отключен.

### <a name="parameters"></a>Параметры

Чтобы использовать этот параметр, добавьте запись для **усеаутоплай** в файл autorun. INF и установите запись равную 1. Другие значения не поддерживаются в версиях Windows, предшествующих Windows 8.

В Windows 8 и более поздних версиях укажите значение 0, чтобы отключить автозапуск для этого устройства.


```
UseAutoPlay=1
```



### <a name="remarks"></a>Примечания

В настоящее время **усеаутоплай** применимо только в Windows XP или более поздних версиях и только на том диске, на котором [**Жетдриветипе**](/windows/win32/api/fileapi/nf-fileapi-getdrivetypea) определяет тип **устройства \_ CDROM**.

При использовании **усеаутоплай** любое действие, заданное записями **Open** или **ShellExecute** в файле autorun. INF, не учитывается в Windows XP и пропускается из диалогового окна автозапуска в Windows Vista.

Автозапуск обычно используется для автоматического запуска или загрузки объекта, содержащегося на вставленном носителе, в то время как автозапуск представляет собой диалоговое окно, содержащее список соответствующих действий, которые могут быть предприняты, и позволяет пользователю выбрать нужное действие. Дополнительные сведения о разнице между автозапуском и автозапуском см. в статьях [Создание приложения для чтения компакт-дисков с поддержкой автозапуска](autoplay.md) и [использование и настройка автозапуска](autoplay2k-using.md)соответственно.

### <a name="usage-example"></a>Пример использования

Компакт-диск содержит три файла: autorun. INF, Readme.txt и Music. WMA. В зависимости от используемой версии Windows и параметров, указанных в файле autorun. INF, компакт-диск может обрабатываться при вставке (при условии, что для диска, на который вставлен компакт-диск, включена функция автозапуска или автозапуска).

Во-первых, рассмотрим файл autorun. inf со следующим содержимым, указывая, что **усеаутоплай = 1** не указан:


```
[AutoRun]
shellexecute="Readme.txt"
```



Действие, выполняемое оболочкой при вставке этого компакт-диска, зависит от используемой версии Windows:

-   В Windows XP и более ранних версиях этот компакт-диск обрабатывается при вставке. В этом случае запись **ShellExecute** считывается, и оболочка вызывает обработчик файлов, связанный с TXT-файлами. Обычно это открывается Readme.txt в блокноте.
-   В Windows Vista присутствие файла autorun. INF с записью **ShellExecute** приводит к тому, что носитель будет опознан как тип автозапуска "программное обеспечение и игры". В этом случае пользователю предлагается диалоговое окно автозапуска, которое включает действие, заданное записью **ShellExecute** (в диалоговом окне как "Load Readme.txt"), а также действия по умолчанию, связанные с носителями типа "программное обеспечение и игры".

Чтобы указать, что автозапуск следует использовать вместо автозапуска в Windows XP, и что действие, заданное записью AutoRun ShellExecute, должно быть подавлено в диалоговом окне автозапуска в Windows Vista, вставьте **усеаутоплай** в файл autorun. INF следующим образом:


```
[AutoRun]
shellexecute="Readme.txt"
UseAutoPlay=1
```



Опять же, действие, выполняемое оболочкой при вставке компакт-диска, зависит от используемой версии Windows.

-   В версиях Windows, предшествующих Windows XP, по-прежнему используется автозапуск и выполняется действие, указанное в **ShellExecute** , как описано выше. (Обратите внимание, что только Автозапуск доступен в версиях Windows, предшествующих Windows XP.)
-   В Windows XP запись **усеаутоплай** приводит к тому, что вместо автозапуска используется автозапуск. В этом случае Автозапуск определяет, что носитель содержит аудио-файл Windows Media (WMA), и распределяет содержимое по категориям "музыкальные файлы". Пользователю предоставляется диалоговое окно автозапуска, содержащее зарегистрированные обработчики для типа автозапуска "музыкальные файлы". запись ShellExecute AutoRun игнорируется.

### <a name="shellexecute"></a>вызов

[Версия 5,0.](versions.md) Запись **ShellExecute** Указывает приложение или файл данных, которые функция autorun будет использовать для вызова [**ShellExecuteEx**](/windows/desktop/api/Shellapi/nf-shellapi-shellexecuteexa).


```
shellexecute=[filepath\]filename[param1, [param2]...] 
```



### <a name="parameters"></a>Параметры

-   *равно*

    Строка, содержащая полный путь к каталогу, содержащему данные или исполняемый файл. Если путь не указан, файл должен находиться в корневом каталоге диска.

-   *filename*

    Строка, содержащая имя файла. Если это исполняемый файл, он запускается. Если это файл данных, то он должен быть членом [типа файла](fa-file-types.md). [**ShellExecuteEx**](/windows/desktop/api/Shellapi/nf-shellapi-shellexecuteexa) запускает команду по умолчанию, связанную с типом файла.

-   *парамкс*

    Содержит любые дополнительные параметры, которые должны быть переданы в [**ShellExecuteEx**](/windows/desktop/api/Shellapi/nf-shellapi-shellexecuteexa).

### <a name="remarks"></a>Примечания

Эта запись аналогична [открытой](#parameters), но позволяет использовать сведения о [сопоставлении файлов](fa-intro.md) для запуска приложения.

### <a name="shell"></a>оболочка

Запись **Shell** указывает команду по умолчанию для контекстного меню диска.


```
shell=verb
```



### <a name="parameters"></a>Параметры

-   *Команда*

    Команда, соответствующая команде меню. Команда и связанная с ней команда меню должны быть определены в файле autorun. INF с записью [ \\ команды оболочки](#shellverb) .

### <a name="remarks"></a>Примечания

Когда пользователь щелкает правой кнопкой мыши значок диска, появляется контекстное меню. При наличии файла autorun. inf из него берется команда контекстного меню по умолчанию. Эта команда также выполняется, когда пользователь дважды щелкает значок диска.

Чтобы указать команду контекстного меню по умолчанию, сначала определите ее глагол, командную строку и текст меню с помощью [ \\ команды оболочки](#shellverb). Затем используйте оболочку, чтобы сделать ее командой контекстного меню по умолчанию. В противном случае текст пункта меню по умолчанию будет "Автозапуск", который запускает приложение, указанное в [открытом](#parameters) элементе.

### <a name="shellverb"></a>\\команда оболочки

Запись **\\ команды оболочки** добавляет пользовательскую команду в контекстное меню диска.


```
shell\verb\command=Filename.exe 
shell\verb=MenuText
```



### <a name="parameters"></a>Параметры

-   *Команда*

    Команда меню. *_\\ Командная запись команды_* **оболочки \\**_связывает команду с_ исполняемым файлом. Глаголы не должны содержать пробелы. По умолчанию *команда* — это текст, отображаемый в контекстном меню.

-   *Filename.exe*

    Путь и имя файла приложения, которое выполняет действие.

-   *менутекст*

    Этот параметр задает текст, отображаемый в контекстном меню. Если он не указан, *команда* отображается. *Менутекст* может быть в смешанном регистре и может содержать пробелы. Для пункта меню можно задать сочетание клавиш, поместив амперсанд (&) перед буквой.

### <a name="remarks"></a>Примечания

Когда пользователь щелкает правой кнопкой мыши значок диска, появляется контекстное меню. Добавление **записей \\ команд оболочки** в файл autorun. INF позволяет добавлять команды в это контекстное меню.

Эта запись состоит из двух частей, которые должны находиться в разных строках. Первая часть —*_\\ команда_* **оболочки \\**. Оно должно указываться обязательно. Он связывает строку, называемую *глаголом*, с приложением, которое запускается при выполнении команды. Вторая часть — это запись _команды_ **оболочки \\**. Этот параметр необязателен. Его можно включить, чтобы указать текст, отображаемый в контекстном меню.

Чтобы указать команду контекстного меню по умолчанию, определите команду с помощью **\\ команды оболочки** и сделайте ее командой по умолчанию с записью [оболочки](#autoruninf-entries) .

Следующий пример фрагмента кода autorun. INF связывает *команду с командой со* строкой "Notepad ABC \\readme.txt". Текст меню — «Read Me», а «m» определен как клавиша быстрого доступа к элементу. Когда пользователь выбирает эту команду, \\ открывается файл abcreadme.txt на диске с блокнотом Microsoft Notepad.


```
shell\readit\command=notepad abc\readme.txt 
shell\readit=Read &Me
```



## <a name="content-keys"></a>\[\]Ключи содержимого

Существует три ключа типа файла: **мусикфилес**, **пиктурефилес** и **видеофилес**.

Если одно из этих значений имеет значение true с учетом значения 1, y, Yes, t или true, Пользовательский интерфейс автозапуска отображает обработчики, связанные с этим типом содержимого, независимо от того, существует ли на носителе содержимое этого типа.

Если одно из этих значений имеет значение false с учетом значения 0, n, No, f или false, то пользовательский интерфейс автозапуска не отображает обработчики, связанные с этим типом содержимого, даже если на носителе обнаружено содержимое этого типа.

Использование этого раздела предназначено для того, чтобы позволить авторам содержимого передавать данные для автоматического запуска. Например, компакт-диск можно классифицировать как содержащий только музыкальное содержимое, даже если у него есть изображения и видеоролики, и в противном случае они будут отображаться как смешанное содержимое.

Раздел **\[ содержимого \]** поддерживается только в Windows Vista и более поздних версиях.


```
[Content]
MusicFiles=Y
PictureFiles=0
VideoFiles=false
```



## <a name="exclusivecontentpaths-keys"></a>\[\]Ключи ексклусивеконтентпасс

Папки, перечисленные в этом разделе, ограничивают автозапуск для поиска содержимого только в тех папках и вложенных папках. Они могут быть заданы с предшествующей обратной косой чертой () или без нее \\ . В любом случае они берутся в виде абсолютных путей из корневого каталога носителя. В случае с папками, в именах которых есть пробелы, не заключайте их в кавычки, так как кавычки берутся буквально как часть пути.

Использование этого раздела предназначено для того, чтобы авторы содержимого могли сообщать о намерениях к автозапуску и сокращать время проверки, ограничивая проверку на определенные значительные участки носителя.

Ниже приведены все допустимые пути.


```
[ExclusiveContentPaths]
\music
\music\more music
music2
```



Раздел **\[ ексклусивеконтентпасс \]** поддерживается только в Windows Vista и более поздних версиях.

## <a name="ignorecontentpaths-keys"></a>\[\]Ключи игнореконтентпасс

Папки, перечисленные в этом разделе, и их вложенные папки игнорируются автозапуском при поиске содержимого на носителе. Они могут быть заданы с предшествующей обратной косой чертой () или без нее \\ . В любом случае они берутся в виде абсолютных путей из корневого каталога носителя. В случае с папками, в именах которых есть пробелы, не заключайте их в кавычки, так как кавычки берутся буквально как часть пути.

Пути в этом разделе имеют приоритет над путями в разделе **\[ ексклусивеконтентпасс \]** . Если путь, указанный в **\[ игнореконтентпасс \]** , является вложенной папкой пути, заданной в **\[ ексклусивеконтентпасс \]**, он по-прежнему игнорируется.

Использование этого раздела предназначено для того, чтобы авторы содержимого могли сообщать о намерениях к автозапуску и сокращать время проверки, ограничивая проверку на определенные значительные участки носителя.

Ниже приведены все допустимые пути.


```
[IgnoreContentPaths]
\music
\music\more music
music2
```



Раздел **\[ игнореконтентпасс \]** поддерживается только в Windows Vista и более поздних версиях.

## <a name="deviceinstall-keys"></a>\[\]Ключи девицеинсталл

### <a name="driverpath"></a>DriverPath

Запись **DriverPath** указывает каталог для рекурсивного поиска файлов драйверов. Эта команда используется во время установки драйвера и не является частью операции автозапуска. Раздел **\[ девицеинсталл \]** поддерживается только в Windows XP.


```
[DeviceInstall]
DriverPath=directorypath
```



### <a name="parameters"></a>Параметры

-   *DirectoryPath*

    Путь к каталогу, в котором Windows ищет файлы драйверов вместе со всеми его подкаталогами.

### <a name="remarks"></a>Примечания

Не используйте буквы дисков в *DirectoryPath* , так как они меняются с одного компьютера на другой.

Для поиска в нескольких каталогах добавьте запись **DriverPath** для каждого каталога, как в этом примере.


```
[DeviceInstall]
DriverPath=drivers\video 
DriverPath=drivers\audio
```



Если в разделе **\[ девицеинсталл \]** нет записи **DriverPath** или в записи **DriverPath** не задано значение, этот диск пропускается во время поиска файлов драйверов.

 

 
