---
description: Создание приложения с поддержкой автозапуска — это простая процедура. В этом разделе используется компакт-диск в качестве примера (он был первым носителем для реализации этой технологии), но на сегодняшний день существует множество различных типов носителей, которые могут использовать его.
title: Создание приложения AutoRun-Enabled
ms.topic: article
ms.date: 05/31/2018
ms.assetid: 0d01f4a2-64c4-4b31-9fc9-361da6825ab8
api_name: ''
api_type: ''
api_location: ''
topic_type:
- kbArticle
ms.openlocfilehash: 24a944b011c926d1638e5d0bcb0d35fc348e5783
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104143978"
---
# <a name="creating-an-autorun-enabled-application"></a>Создание приложения AutoRun-Enabled

Создание приложения с поддержкой автозапуска — это простая процедура. В этом разделе используется компакт-диск в качестве примера (он был первым носителем для реализации этой технологии), но на сегодняшний день существует множество различных типов носителей, которые могут использовать его.

Чтобы включить функцию автозапуска в приложении, просто включите два необходимых файла:

-   Файл autorun. INF
-   Запускаемое приложение

Когда пользователь вставляет диск в дисковод компакт-дисков на компьютере, совместимом с автозагрузками, система немедленно проверяет наличие у диска файловой системы с персональным компьютером. Если это так, система выполняет поиск файла с именем [Autorun. INF](#creating-an-autoruninf-file). В этом файле указывается приложение установки, которое будет запущено вместе с множеством необязательных параметров. Обычно запускаемое приложение устанавливает, удаляет, настраивает и, возможно, запускает приложение.

-   [Создание файла autorun. INF](#creating-an-autoruninf-file)
-   [\[Раздел девицеинсталл \]](#the-deviceinstall-section)
-   [См. также](#related-topics)

## <a name="creating-an-autoruninf-file"></a>Создание файла autorun. INF

Autorun. INF — это текстовый файл, расположенный в корневом каталоге компакт-диска, который содержит приложение. Его основная функция заключается в том, чтобы предоставить системе имя и расположение программы запуска приложения, которая будет запускаться при вставке диска.

> [!Note]  
> Файлы Autorun. inf не поддерживаются в Windows XP для дисков, которые возвращают диск, \_ съемный из [**жетдриветипе**](/windows/win32/api/fileapi/nf-fileapi-getdrivetypea).

 

Файл autorun. INF также может содержать дополнительные сведения, включая:

-   Имя файла, содержащего значок, который будет представлять устройство чтения компакт-дисков приложения. Этот значок будет отображаться проводником Windows вместо стандартного значка диска.
-   Дополнительные команды для контекстного меню, которые отображаются, когда пользователь щелкает правой кнопкой мыши значок компакт-диска. Можно также указать команду по умолчанию, которая выполняется при двойном щелчке значка пользователем.

Файлы Autorun. INF похожи на ini-файлы. Они состоят из одного или нескольких разделов, каждый из которых направляется по имени, заключенному в квадратные скобки. Каждый раздел содержит ряд команд, которые будут запускаться оболочкой при вставке диска. Существуют два раздела, которые в настоящее время определены для файлов autorun. INF.

-   Раздел **\[ автозапуска \]** содержит команды автозапуска по умолчанию. Все файлы Autorun. inf должны содержать раздел **\[ Autorun \]** .
-   Необязательный раздел **\[ Autorun \] . Alpha** можно включить для систем, работающих на компьютерах с RISC-процессорами. При вставке диска в дисковод компакт-дисков в системе с RISC-процессором оболочка будет выполнять команды в этом разделе, а не в разделе **\[ автозапуска \]** .

> [!Note]  
> Сначала оболочка проверяет раздел для конкретной архитектуры. Если он не найден, то он использует информацию из раздела **\[ Autorun \]** . После того как оболочка обнаружит раздел, он пропускает все остальные, поэтому каждый раздел должен быть самодостаточным.

 

Каждый раздел содержит ряд команд, которые определяют, как выполняется операция автозапуска. Доступно пять команд.



| Команда                         | Описание                                                                            |
|---------------------------------|----------------------------------------------------------------------------------------|
| [дефаултикон](autorun-cmds.md) | Задает значок по умолчанию для приложения.                                        |
| [значок](autorun-cmds.md)        | Указывает путь и имя файла для конкретного значка устройства чтения компакт-дисков. |
| [open](autorun-cmds.md)        | Указывает путь и имя файла запускаемого приложения.                           |
| [усеауторун](autorun-cmds.md)  | Указывает, что при поддержке следует использовать функции автозапуска v2.                       |
| [консоль](autorun-cmds.md)       | Определяет команду по умолчанию в контекстном меню компакт-диска.                             |
| [\_команда оболочки](autorun-cmds.md) | Добавляет команды в контекстное меню компакт-диска.                                           |



 

Ниже приведен пример простого файла autorun. INF. Он указывает Filename.exe в качестве запускаемого приложения. Второй значок в Filename.exe будет представлять дисковод компакт-дисков вместо стандартного значка диска.


```
[autorun] 
open=Filename.exe 
icon=Filename.exe,1
```



В этом примере файла autorun. INF выполняются различные запускаемые приложения в зависимости от типа компьютера.


```
[autorun] 
open=Filename_x86.exe 
icon=IconFile.ico 

[autorun.alpha] 
open=Filename_RISC.exe 
icon=IconFile.ico
```



## <a name="the-deviceinstall-section"></a>\[Раздел девицеинсталл \]

Вы можете использовать раздел **\[ девицеинсталл \]** на любом съемном носителе. Он поддерживается только в Windows XP. **DriverPath** используется для указания пути к каталогу, в котором Windows XP ищет файлы драйверов, что позволяет не допустить продолжительного поиска по всему содержимому.

Используйте раздел **\[ девицеинсталл \]** с установкой драйвера, чтобы указать каталоги, в которых Windows XP должна выполнять поиск файлов драйверов на носителе. В Windows XP по умолчанию не выполняется поиск по всему носителю, поэтому требуется **\[ девицеинсталл \]** для указания расположения поиска. Ниже приведен единственный съемный носитель, который полностью ищется в Windows XP без раздела **\[ девицеинсталл \]** в файле autorun. INF.

-   Обнаружены гибкие диски на дисках A или B.
-   КОМПАКТ-диск или DVD-диск меньше размера 1 гигабайта (ГБ).

Все остальные носители должны содержать раздел **\[ Девицеинсталл \]** для Windows XP, чтобы обнаружить драйверы, хранящиеся на этом носителе.

> [!Note]  
> Как и в разделе **\[ Autorun \]** , раздел **\[ девицеинсталл \]** может быть зависящим от архитектуры.

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Как реализовать запускаемые приложения автозапуска](how-to-implement-autorun-startup-applications.md)
</dt> <dt>

[Создание приложения для установки устройства](/windows-hardware/drivers/install/writing-a-device-installation-application)
</dt> </dl>

 

 
