---
description: Указывает, соответствует ли сетевой адрес указанному типу и формату.
title: Сообщение NCM_GETADDRESS (Шеллапи. h)
ms.topic: reference
ms.date: 05/31/2018
ms.assetid: 733CD62D-614C-4ac2-986D-CCFCFF4B1B4D
api_name:
- NCM_GETADDRESS
api_type:
- HeaderDef
api_location:
- Shellapi.h
topic_type:
- APIRef
- kbSyntax
ms.openlocfilehash: 27f5beec56a0125d26cc359f40b5033eda1f035f2dec7666725264ec6fd59ba7
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117677972"
---
# <a name="ncm_getaddress-message"></a>\_Сообщение НКМ

Указывает, соответствует ли сетевой адрес указанному типу и формату.


```C++
NCM_GETADDRESS

    wParam = (WPARAM) (PNC_ADDRESS) pv;

    lParam = 0;            

            
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*wParam* 
</dt> <dd>Должен равняться нулю.</dd> <dt>

*ПС* \[ в, out\]
</dt> <dd>Указатель на структуру <a href="/windows/win32/api/shellapi/ns-shellapi-nc_address">NC_ADDRESS</a> для получения сведений об сетевом адресе в проанализированной форме, если в элементе управления, указанном с помощью *HWND* , проверяются формат адреса и тип. Вызывающее приложение отвечает за выделение памяти для этой структуры.</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Возвращает одно из следующих значений типа **HRESULT**.



| Код возврата                                                                                                | Описание                                                                                          |
|------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|
| <dl> <dt>**E \_ INVALIDARG**</dt> </dl>               | Вызывающему приложению не удалось выделить структуру [**\_ адресов NC**](/windows/win32/api/shellapi/ns-shellapi-nc_address) .<br/> |
| <dl> <dt>**Ошибка \_ недостаточного \_ буфера**</dt> </dl> | Выходной буфер слишком мал для хранения проанализированного сетевого адреса.<br/>                           |
| <dl> <dt>**Ошибка \_ недопустимого \_ параметра**</dt> </dl>   | Строка сетевого адреса не указана ни одного типа.<br/>                                  |
| <dl> <dt>**Ошибка при \_ успешном выполнении**</dt> </dl>              | Операция выполнена успешно.<br/>                                                             |
| <dl> <dt>**S \_ false**</dt> </dl>                    | Отсутствует адрес в элементе управления сетевыми адресами для проверки.<br/>                           |



 

## <a name="remarks"></a>Remarks

Используйте сообщение **НКМ- \_ Address** для проверки сетевого адреса в элементе управления "сетевой адрес" по предустановленной маске типа сетевого адреса. Чтобы создать экземпляр, используйте класс **мсктлс \_ нетаддресс** , определенный в шеллапи. h. Вызовите [**инитнетворкаддрессконтрол**](/windows/desktop/api/Shellapi/nf-shellapi-initnetworkaddresscontrol) во время выполнения перед отправкой этого сообщения. Будет инициализирована библиотека общих элементов управления, содержащая элемент управления "сетевой адрес".

Это сообщение получает строку сетевого адреса из элемента управления сетевыми адресами, анализирует строку и проверяет, соответствует ли строка маске типа сетевого адреса. Если строка соответствует маске, сообщение возвращает значение S \_ OK и возвращает строку из проанализированной формы в вызывающее приложение (включая номер порта, длину префикса и другие сведения об адресе), используя структуру [**\_ адресов NC**](/windows/win32/api/shellapi/ns-shellapi-nc_address) , на которую указывает *ПС*. Это сообщение возвращает E \_ INVALIDARG, если вызывающему приложению не удается выделить структуру, на которую указывает *ПС*.

Анализируются представления IP-адресов версий 4 и 6 (v4/V6) для служб и сетей, а также именованные адреса Интернета и службы с использованием DNS-формата. Если строка сетевого адреса представляет имя узла (DNS) или службу, то значение, возвращаемое членом **PrefixLength** в [**\_ адресе NC**](/windows/win32/api/shellapi/ns-shellapi-nc_address) , равно нулю.

Задайте маску типа сетевого адреса с помощью сообщения [**НКМ \_ сеталловтипе**](ncm-setallowtype.md) перед отправкой макроса **НКМ \_** .

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|---------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows \[Только классические приложения Vista\]<br/>                                        |
| Минимальная версия сервера<br/> | Windows Только для \[ настольных приложений сервера 2008\]<br/>                                  |
| Заголовок<br/>                   | <dl> <dt>Шеллапи. h</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**НКМ \_ жеталловтипе**](ncm-getallowtype.md)
</dt> <dt>

[**Нетаддр \_**](/windows/desktop/api/Shellapi/nf-shellapi-netaddr_getaddress)
</dt> </dl>

 

 




