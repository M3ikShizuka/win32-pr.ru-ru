---
description: Система известных папок предоставляет способ взаимодействия с определенными папками с высоким уровнем профилирования, присутствующими по умолчанию в Windows.
ms.assetid: 8b6163b5-e152-47c2-99f1-43e80cf0713e
title: Работа с известными папками в приложениях
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0981d354e49f569dda229fab32308d8f4a79ff99
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104496758"
---
# <a name="working-with-known-folders-in-applications"></a>Работа с известными папками в приложениях

Система известных папок предоставляет способ взаимодействия с определенными папками с высоким уровнем профилирования, присутствующими по умолчанию в Windows. Он также позволяет приложениям, установленным и зарегистрированным в папке с известными папками, выполнять те же действия с папками. В этом разделе обсуждаются возможные взаимодействия, предоставляемые API-интерфейсам известных папок.

-   [Интерфейсы известных папок](#known-folder-interfaces)
-   [Перенаправление](#redirection)
-   [См. также](#related-topics)

> [!IMPORTANT]
> Чтобы перенаправить документы, изображения или папки рабочего стола в OneDrive, используйте вместо метода перенаправления, описанного в этой статье, функцию перемещения в OneDrive. Дополнительные сведения см. [в статье перенаправление и перемещение известных папок Windows в OneDrive](/onedrive/redirect-known-folders).  

## <a name="known-folder-interfaces"></a>Интерфейсы известных папок

Существует два известных интерфейса папок: [**икновнфолдер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) и [**икновнфолдерманажер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfoldermanager).

[**Икновнфолдерманажер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfoldermanager) предоставляет многие из наиболее общих функций в отношении этих папок. Его методы позволяют:

-   Получение [**икновнфолдер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) на основе [**кновнфолдерид**](knownfolderid.md)этой папки, ее канонического имени, пути, выраженного в виде строки, или ее пути, выраженного как IDList.
-   Преобразуйте код CSID в его эквивалент [**кновнфолдерид**](knownfolderid.md) или преобразуйте **кновнфолдерид** в его устаревший эквивалент CSid.
-   Регистрация или Отмена регистрации известной папки в системе.
-   Получение всех значений [**кновнфолдерид**](knownfolderid.md) , зарегистрированных в этой системе.
-   Перенаправлять известную папку в новое расположение.

[**Икновнфолдер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) предоставляет метод, позволяющий папке перенаправлять себя путем предоставления нового пути. Другие методы получают сведения о конкретной известной папке, включая:

-   Категория папки: виртуальная, фиксированная, Общая или для каждого пользователя.
-   Тип папки, например сжатый, документы, рисунки или пользовательские файлы.
-   [**Кновнфолдерид**](knownfolderid.md) папки.
-   Полный путь к папке в виде IDList или строки. Также его относительный путь к родительской папке.
-   Каноническое имя папки.
-   Подсказка, отображаемая для папки.
-   Значок, отображаемый для папки.
-   Описание папки, в которой объясняются ее назначение и использование.
-   Возможность перенаправления папки.

[**Икновнфолдер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) также предоставляет метод для получения [**интерфейса IShellItem**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishellitem) на основе папки. Это позволяет привязать папку к обработчику, сравнить две папки и получить атрибуты папки, отображаемое имя и родительскую папку.

## <a name="redirection"></a>Перенаправление

Перенаправление папок является важной функцией известной системы папок. Все известные папки категории [ **Общая** КФ \_ Категория \_ Common * * * *](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-kf_category) или [ **для каждого пользователя** КФ \_ категории \_](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-kf_category) данных "* * * *" являются перенаправляемыми. Не удается перенаправить папку категории [ **Virtual** КФ \_ Категория Virtual \_ * *](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-kf_category) * или фиксированная [  \_ Категория КФ \_](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-kf_category). * * * *.

Папки могут перенаправляться либо в другое расположение на том же компьютере, либо в расположение в сети. В случае перенаправления сети папку можно кэшировать локально с помощью кэширования на стороне клиента, чтобы обеспечить автономный доступ. Однако даже если локальный кэш существует, доступ к перенаправленной папке должен осуществляться через сеть.

Перенаправление папок не является новым для Windows Vista. Например, в Windows XP некоторые папки, идентифицированные с помощью системы CSID, можно перенаправить через вызов [**шсетфолдерпас**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shsetfolderpatha) или путем изменения записи CSid в реестре. В Windows Vista и более поздних версиях перенаправление необходимо выполнить с помощью [**икновнфолдер:: сетпас**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-iknownfolder-setpath) или [**шсеткновнфолдерпас**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shsetknownfolderpath).

Чтобы определить, можно ли перенаправить папку, вызовите метод [**икновнфолдер:: жетредиректионкапабилитиес**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-iknownfolder-getredirectioncapabilities). Если папка не может быть перенаправлена, этот вызов может дать пояснение.

Если папка перенаправляется в сетевую папку, методы [**икновнфолдер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) по-прежнему могут быть успешно вызваны.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Пример: известные папки](/previous-versions/windows/desktop/legacy/dd940364(v=vs.85))
</dt> </dl>

 

 
