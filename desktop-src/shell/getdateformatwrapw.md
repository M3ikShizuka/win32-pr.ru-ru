---
description: Форматирует дату в виде строки даты для указанного языкового стандарта.
ms.assetid: e45f6d1c-2890-44f6-8406-022c99c59e02
title: Функция Жетдатеформатврапв
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- GetDateFormatWrapW
api_type:
- DllExport
api_location:
- Shlwapi.dll
ms.openlocfilehash: c9c369584fd15a27d5e684452b2277104b5b1da4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104264427"
---
# <a name="getdateformatwrapw-function"></a>Функция Жетдатеформатврапв

\[**Жетдатеформатврапв** доступен для использования в Windows XP. Он будет недоступен в последующих версиях. На своем месте следует использовать [**жетдатеформатв**](/windows/win32/api/datetimeapi/nf-datetimeapi-getdateformata) .\]

Форматирует дату в виде строки даты для указанного языкового стандарта. Функция форматирует либо указанную дату, либо локальную системную дату.

> [!Note]  
> **Жетдатеформатврапв** — это оболочка для функции **жетдатеформатв** . Дополнительные сведения об использовании см. на странице [**жетдатеформат**](/windows/win32/api/datetimeapi/nf-datetimeapi-getdateformata) .

 

## <a name="syntax"></a>Синтаксис


```C++
int GetDateFormatWrapW(
  _In_        LCID       Locale,
  _In_        DWORD      dwFlags,
  _In_  const SYSTEMTIME *lpDate,
  _In_        LPCWSTR    pwzFormat,
  _Out_       LPWSTR     pwzDateStr,
  _In_        int        cchDate
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*Языковой стандарт* \[ окне\]
</dt> <dd>

Тип: **LCID**

Языковой стандарт, в котором строка даты должна быть отформатирована. Если *пвзформат* имеет **значение NULL**, функция форматирует строку в соответствии с форматом даты для этого языкового стандарта. Если *пвзформат* не равно **null**, функция использует языковой стандарт только для информации, которая не указана в формате строки рисунка (например, названия дня и месяца языкового стандарта).

Этот параметр может быть идентификатором локали, созданным в макросе [**макелЦид**](/windows/win32/api/winnt/nf-winnt-makelcid) , или одним из следующих предопределенных значений.

<dt>

<span id="LOCALE_SYSTEM_DEFAULT"></span><span id="locale_system_default"></span>

<span id="LOCALE_SYSTEM_DEFAULT"></span><span id="locale_system_default"></span>**система языкового стандарта \_ \_ по умолчанию**


</dt> <dd>

Национальная настройка системы по умолчанию.

</dd> <dt>

<span id="LOCALE_USER_DEFAULT"></span><span id="locale_user_default"></span>

<span id="LOCALE_USER_DEFAULT"></span><span id="locale_user_default"></span>**\_Пользовательская Национальная настройка \_ по умолчанию**


</dt> <dd>

Языковой стандарт пользователя по умолчанию.

</dd> </dl> </dd> <dt>

*dwFlags* \[ окне\]
</dt> <dd>

Тип: **DWORD**

Задает различные параметры функции. Если *пвзформат* не **равно NULL**, этот параметр должен быть равен нулю. Если *пвзформат* имеет **значение NULL**, можно указать сочетание следующих значений. Если не указать дату \_ еармонс, Date \_ ШОРТДАТЕ или Date \_ Лонгдате, а *пвзформат* имеет **значение NULL**, то \_ в качестве значения по умолчанию используется дата шортдате.

<dt>

<span id="LOCALE_NOUSEROVERRIDE"></span><span id="locale_nouseroverride"></span>

<span id="LOCALE_NOUSEROVERRIDE"></span><span id="locale_nouseroverride"></span>**наусероверриде ЛОКАЛи \_**


</dt> <dd>

Если задано значение, функция форматирует строку, используя системный формат даты по умолчанию для указанного языкового стандарта. Если значение не задано, функция форматирует строку с использованием любых пользовательских переопределений в формате даты по умолчанию для языкового стандарта.

</dd> <dt>

<span id="LOCALE_USE_CP_ACP"></span><span id="locale_use_cp_acp"></span>

<span id="LOCALE_USE_CP_ACP"></span><span id="locale_use_cp_acp"></span>**Использование языкового стандарта \_ \_ CP \_ ACP**


</dt> <dd>

Использует системную кодовую страницу ANSI для перевода строк вместо кодовой страницы языкового стандарта.

</dd> <dt>

<span id="DATE_SHORTDATE"></span><span id="date_shortdate"></span>

<span id="DATE_SHORTDATE"></span><span id="date_shortdate"></span>**Дата \_ шортдате**


</dt> <dd>

Использует краткий формат даты. Это значение нельзя использовать с DATE \_ лонгдате или Date \_ еармонс.

</dd> <dt>

<span id="DATE_LONGDATE"></span><span id="date_longdate"></span>

<span id="DATE_LONGDATE"></span><span id="date_longdate"></span>**Дата \_ лонгдате**


</dt> <dd>

Использует длинный формат даты. Это значение нельзя использовать с DATE \_ шортдате или Date \_ еармонс.

</dd> <dt>

<span id="DATE_YEARMONTH"></span><span id="date_yearmonth"></span>

<span id="DATE_YEARMONTH"></span><span id="date_yearmonth"></span>**Дата \_ еармонс**


</dt> <dd>

Использует формат "год/месяц". Это значение нельзя использовать с DATE \_ шортдате или Date \_ лонгдате.

</dd> <dt>

<span id="DATE_USE_ALT_CALENDAR"></span><span id="date_use_alt_calendar"></span>

<span id="DATE_USE_ALT_CALENDAR"></span><span id="date_use_alt_calendar"></span>**использовать в качестве даты \_ \_ альтернативный \_ Календарь**


</dt> <dd>

Использует альтернативный календарь, если он существует, для форматирования строки даты. Если этот флаг установлен, функция использует формат по умолчанию для этого альтернативного календаря вместо использования каких-либо пользовательских переопределений. Пользовательские переопределения будут использоваться только в том случае, если для указанного альтернативного календаря формат по умолчанию отсутствует.

</dd> <dt>

<span id="DATE_LTRREADING"></span><span id="date_ltrreading"></span>

<span id="DATE_LTRREADING"></span><span id="date_ltrreading"></span>**Дата \_ лтрреадинг**


</dt> <dd>

Добавляет метки для макета чтения слева направо. Это значение нельзя использовать с параметром DATE \_ RTLREADING.

</dd> <dt>

<span id="DATE_RTLREADING"></span><span id="date_rtlreading"></span>

<span id="DATE_RTLREADING"></span><span id="date_rtlreading"></span>**Дата \_ RTLREADING**


</dt> <dd>

Добавляет метки для макета чтения справа налево. Это значение нельзя использовать с параметром DATE \_ лтрреадинг.

</dd> </dl> </dd> <dt>

*лпдате* \[ окне\]
</dt> <dd>

Тип: **const [**SYSTEMTIME**](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) \** _

Указатель на структуру [_ *SYSTEMTIME* *](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) , содержащую сведения о датах для форматирования. Если этот указатель равен **null**, функция использует текущую локальную системную дату.

</dd> <dt>

*пвзформат* \[ окне\]
</dt> <dd>

Тип: **лпквстр**

Указатель на формат изображения, используемый для формирования строки даты. Если *пвзформат* имеет **значение NULL**, функция использует формат даты указанного языкового стандарта. Дополнительные сведения см. в разделе [**жетдатеформат**](/windows/win32/api/datetimeapi/nf-datetimeapi-getdateformata) .

</dd> <dt>

*пвздатестр* \[ заполняет\]
</dt> <dd>

Тип: **LPWSTR**

Указатель на буфер, который получает отформатированную строку даты.

</dd> <dt>

*кчдате* \[ окне\]
</dt> <dd>

Тип: **int**

Задает размер буфера *пвздатестр* в символах. Если *кчдате* равен нулю, функция возвращает количество символов, необходимых для хранения форматированной строки даты, а буфер, на который указывает *пвздатестр* , не используется.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Тип: **int**

Если функция выполнена, возвращаемое значение — это число символов, записанных в буфер, на который указывает *пвздатестр*. Если параметр *кчдате* равен нулю, то возвращаемое значение представляет собой количество символов, необходимых для хранения форматированной строки даты. Счетчик включает завершающий нуль символ.

Если функция выполняется неудачно, возвращается нулевое значение. Дополнительные сведения об ошибке можно получить, вызвав [**GetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror). **GetLastError** может возвращать один из следующих кодов ошибок.

<dl> <dt>

**Ошибка \_ недостаточного \_ буфера**
</dt> <dt>

**Ошибка \_ недопустимых \_ флагов**
</dt> <dt>

**Ошибка \_ недопустимого \_ параметра**
</dt> </dl>

## <a name="remarks"></a>Примечания

**Жетдатеформатврапв** предоставляет возможность использования строк Юникода в операционных системах, предшествующих Windows XP. Предпочтительным методом является использование [**жетдатеформатв**](/windows/win32/api/datetimeapi/nf-datetimeapi-getdateformata) в сочетании с уровнем Майкрософт для Юникода (мслу).

**Жетдатеформатврапв** должен вызываться напрямую из Shlwapi.dll с использованием порядкового номера 311.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|---------------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional, только для \[ классических приложений Windows XP\]<br/>                                        |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2003\]<br/>                                                          |
| DLL<br/>                      | <dl> <dt>Shlwapi.dll (версия 5,0 или более поздняя)</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**жетдатеформат**](/windows/win32/api/datetimeapi/nf-datetimeapi-getdateformata)
</dt> </dl>

 

 
