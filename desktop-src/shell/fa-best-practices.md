---
description: Ниже приведены рекомендуемые рекомендации, которые следует использовать при работе с сопоставлениями файлов.
title: Рекомендации по сопоставлению файлов
ms.topic: article
ms.date: 05/31/2018
ms.assetid: d4d0edf9-3475-4164-b0fa-15006e05e242
api_name: ''
api_type: ''
api_location: ''
topic_type:
- kbArticle
ms.openlocfilehash: 8cfa57faea9423af31e494c37d97af2b61d690095fb669a6a9b47109f6e97e70
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119094219"
---
# <a name="best-practices-for-file-associations"></a>Рекомендации по сопоставлению файлов

Ниже приведены рекомендуемые рекомендации, которые следует использовать при работе с сопоставлениями файлов.

-   [Не копировать сопоставлений файлов из реестра](#do-not-copy-file-associations-from-the-registry)
-   [Старайтесь не Hard-Coding пути в реестр, когда это возможно](#avoid-hard-coding-paths-into-the-registry-where-possible)
-   [Всегда переносить развернутые строки в кавычки](#always-wrap-expanding-strings-in-quotation-marks)
-   [Не путать автозапуск и Автозагрузка с сопоставлениями файлов](#do-not-confuse-autoplayautorun-with-file-associations)
-   [Не путайте базу данных MIME Internet Explorer с сопоставлениями файлов](#do-not-confuse-the-internet-explorer-mime-database-with-file-associations)
-   [Использование правильно сформированных и версий ProgID](#use-properly-formed-and-versioned-progids)
-   [Не использовать короткие расширения имен файлов](#do-not-use-short-file-name-extensions)
-   [Регистрация новых типов файлов в базе данных MIME IANA](#register-new-file-types-in-the-iana-mime-database)
-   [регистрация с помощью веб-службы Windows для сопоставления файлов](#sign-up-with-the-windows-web-service-for-file-associations)
-   [Связанные темы](#related-topics)

## <a name="do-not-copy-file-associations-from-the-registry"></a>Не копировать сопоставлений файлов из реестра

Рекомендуется не копировать существующие сопоставления файлов из реестра. Это часто приводит к распространению сопоставлений плохо сформированных файлов. Вместо этого следует выполнить действия, описанные в [примере сценария сопоставления файлов](fa-sample-scenarios.md).

## <a name="avoid-hard-coding-paths-into-the-registry-where-possible"></a>Старайтесь не Hard-Coding пути в реестр, когда это возможно

Так же, как жестко запрограммированные пути к программам могут вызвать проблемы, при работе с жестко написанием путей в реестре могут возникнуть проблемы. Вместо этого следует использовать строки расширения реестра (REG \_ expand \_ SZ), чтобы обеспечить независимость от пути там, где это применимо. Например, вместо использования этого метода:

```
HKEY_CLASSES_ROOT
   MyVendor.MyProgram.1
      DefaultIcon
         (Default) = C:\WINNT\hta.exe,1
```

Этот метод следует использовать:

```
HKEY_CLASSES_ROOT
   MyVendor.MyProgram.1
      DefaultIcon
         (Default) = "%SYSTEMROOT%\hta.exe,1"
```

## <a name="always-wrap-expanding-strings-in-quotation-marks"></a>Всегда переносить развернутые строки в кавычки

При развертывании строки могут содержать пробелы. Поскольку пробелы часто обрабатываются как разделители аргументов, они вызывают проблемы при определенных обстоятельствах. Например, команда для вызова MyProgram может храниться в реестре следующим образом:

`%SYSTEMROOT%\MyProgram %1 %2`

MyProgram ждет, что %1 является полным путем к имени файла, а %2 — параметром, указывающим на какое-либо действие. Если эта команда выполняется с аргументами **C: \\ Program Files \\ Мои документы \\document.txt** и **/принт** и предполагается наличие корневого каталога C: \\ WinNT, он расширяется до:

`C:\WINNT\MyProgram C:\Program Files\My Documents\document.txt /print`

В этом случае MyProgram интерпретирует, что первый аргумент имеет значение C: \\ Program, а второй аргумент — файлы \\ My, что не является предполагаемым поведением. Эти аргументы правильно интерпретируемы, независимо от того, содержат ли они пробелы, если развернутые строки заключены в кавычки следующим образом:

`"%SYSTEMROOT%\MyProgram" "%1" "%2"`

## <a name="do-not-confuse-autoplayautorun-with-file-associations"></a>Не путать автозапуск и Автозагрузка с сопоставлениями файлов

В некоторых случаях сопоставления файлов аналогичны средствам автозапуска и автозапуска. Однако автозапуск и Автозагрузка предлагают отдельные и разные средства, предоставляемые связями файлов. Дополнительные сведения см. [в статье Создание приложения для чтения компакт-дисков с поддержкой автозапуска](autoplay.md).

## <a name="do-not-confuse-the-internet-explorer-mime-database-with-file-associations"></a>Не путайте базу данных MIME Internet Explorer с сопоставлениями файлов

сопоставления файлов аналогичны Windows базе данных mime в Internet Explorer. в этих типах файлов могут содержаться определения типов mime (и должны). Однако база данных MIME Internet Explorer является отдельной и отличается от сопоставлений файлов.

## <a name="use-properly-formed-and-versioned-progids"></a>Использование правильно сформированных и версий ProgID

Всегда используйте [версии ProgID](fa-progids.md), даже если существует только одна версия ProgID. С помощью версий ProgID можно избежать конфликтов ProgID и перезаписи. Они также позволяют использовать различные версии приложения для совместного существования.

## <a name="do-not-use-short-file-name-extensions"></a>Не использовать короткие расширения имен файлов

Длинные расширения имен файлов предлагают следующие преимущества:

-   Ограниченная длина коротких расширений делает их подверженными *конфликтам расширений.* Конфликты расширений возникают, когда одно и то же расширение используется для классификации нескольких типов файлов. Использование длинных расширений значительно снижает вероятность конфликта.
-   Короткие имена файлов, скорее всего, несколько понятны. Длинные расширения, как правило, являются более осмысленными, так как дополнительные сведения можно внедрять в расширение.

Дополнительные сведения см. в разделе [расширения имен файлов](fa-file-extensions.md).

## <a name="register-new-file-types-in-the-iana-mime-database"></a>Регистрация новых типов файлов в базе данных MIME IANA

Центр назначенных номеров Интернета (IANA) хранит общедоступную базу данных зарегистрированных типов MIME. При определении нового типа общедоступного файла рекомендуется также определить тип MIME для типа файла и зарегистрировать этот тип в IANA. Нет затрат на регистрацию.

## <a name="sign-up-with-the-windows-web-service-for-file-associations"></a>регистрация с помощью веб-службы Windows для сопоставления файлов

разработчики приложений могут зарегистрироваться в Windows веб-службе, которую пользователи используют для поиска приложений, которые могут работать с файлами конкретных типов. процесс регистрации в веб-службе подробно описан в [Windows процессе сопоставления файлов в системе](https://support.microsoft.com/kb/929149).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Пример сценария сопоставления файлов](fa-sample-scenarios.md)
</dt> <dt>

[рекомендации по управлению приложениями по умолчанию в Windows Vista и более поздних версий](vista-managing-defaults.md)
</dt> <dt>

[Программы по умолчанию](default-programs.md)
</dt> <dt>

[Настройка доступа к программе и параметров по умолчанию для компьютера (SPAD)](cpl-setprogramaccess.md)
</dt> </dl>

 

 



