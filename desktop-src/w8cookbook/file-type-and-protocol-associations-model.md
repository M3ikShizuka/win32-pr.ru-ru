---
title: Тип файла и модель сопоставлений URI
description: Тип файла и модель сопоставлений URI
ms.assetid: 4DE7DD08-088A-4E09-B1C7-AE9033EA533D
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aabcdb40bd38aeee24ee0e5d86f11651633a7eead1748810e8c1c6a846827690
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119028862"
---
# <a name="file-type-and-uri-associations-model"></a>Тип файла и модель сопоставлений URI

## <a name="platforms"></a>Платформы

 **клиенты** — Windows 8  
**серверы** — Windows Server 2012  



## <a name="description"></a>Описание

Тип файла и модель взаимосвязей URI изменились в Windows 8. Приложения больше не могут быть заданы программными средствами в качестве обработчика по умолчанию для типа файла или URI. Вместо этого пользователь всегда управляет тем, какой обработчик по умолчанию предназначен для типа файла или схемы URI.

## <a name="manifestation"></a>Проявление

Способ представления этого изменения зависит от способа разработки приложения, например:

-   Многие приложения проверяют, являются ли они стандартными по умолчанию при каждом запуске, и, если они нет, пользователь запрашивает у пользователя разрешение по умолчанию. Однако, поскольку приложения больше не могут выполнять запрос, чтобы определить, какое приложение является обработчиком по умолчанию для типа файлов или схемы URI, ни одна из этих операций не работает.
-   Во многих приложениях имеется диалоговое окно или меню, встроенное в, или в установщик, указывающий типы файлов, для которых приложение должно использоваться по умолчанию. Однако, поскольку приложения больше не могут быть заданы программным способом в качестве обработчика по умолчанию для типа файлов или схемы URI, это больше не работает.

## <a name="mitigation"></a>Меры по снижению риска

Существует несколько вещей, которые могут сделать пользователи для удовлетворения этих изменений:

-   Пользователям предлагается контекстно выбрать приложение по умолчанию для работы с типами файлов, схемами URI или обоими, если они не указаны.
-   Пользователям предлагается изменить свой обработчик по умолчанию после установки новых приложений, которые могут работать с типом файлов или схемой URI.
-   Панель управления программы по умолчанию позволяет пользователям задавать значения по умолчанию для приложения или для типа файла, схемы URI или и того, и другого. приложения могут ссылаться на панель управления
-   значения по умолчанию можно изменить в обозревателе Windows

## <a name="solution"></a>Решение

В результате этих изменений предоставляется следующее руководство по API:

-   Функции некоторых вызовов методов в API [иаппликатионассоЦиатионрегистратион](/windows/win32/api/shobjidl_core/nn-shobjidl_core-iapplicationassociationregistration) были изменены и больше не должны использоваться.

    -   **Не** вызывайте [куеряпписдефаулт](/windows/win32/api/shobjidl_core/nf-shobjidl_core-iapplicationassociationregistration-queryappisdefault) / [куеряпписдефаулталл](/windows/win32/api/shobjidl_core/nf-shobjidl_core-iapplicationassociationregistration-queryappisdefaultall) , чтобы определить, является ли приложение значением по умолчанию
    -   **Не** вызывайте [куерикуррентдефаулт](/windows/win32/api/shobjidl_core/nf-shobjidl_core-iapplicationassociationregistration-querycurrentdefault) , чтобы определить, какое приложение (если таковое имеется) является текущим значением по умолчанию
    -   **Не** вызывайте [сетапписдефаулт](/windows/win32/api/shobjidl_core/nf-shobjidl_core-iapplicationassociationregistration-setappasdefault) / [сетапписдефаулталл](/windows/win32/api/shobjidl_core/nf-shobjidl_core-iapplicationassociationregistration-setappasdefaultall) , чтобы задать приложение по умолчанию

-   Ниже приведены рекомендации по пересылке:

    -   **Не** запрашивать сведения о том, какое приложение является обработчиком по умолчанию для типов файлов или схем URI

    -   **Не** пытайтесь отслеживать изменения в обработчике по умолчанию для типов файлов или схем URI.

    -   **Не** пытайтесь задать приложение в качестве обработчика по умолчанию для типов файлов или схем URI.

    -   **Не** пытайтесь управлять параметрами по умолчанию для типов файлов или схем URI из приложения.

    -   **Интегрируйтесь** с панелью управления [Настройка программ по умолчанию](../shell/default-programs.md) , если хотите разрешить пользователям приложения доступ к пользовательскому интерфейсу управления по умолчанию (пользовательский интерфейс управления в приложении больше не поддерживается).

        -   Вызов [иаппликатионассоЦиатионрегистратионуи:: лаунчадванцедассоЦиатионуи](/windows/win32/api/shobjidl/nf-shobjidl-iapplicationassociationregistrationui-launchadvancedassociationui) позволяет пользователю получить доступ к странице панели управления "[Установка программ по умолчанию](../shell/default-programs.md)" для указанного приложения

## <a name="tests"></a>Тесты

-   Проверка проверки правильности регистрации приложений в панели управления "Настройка программ по умолчанию"
-   Проверка правильности регистрации приложений для отображения в списке Опенвис для типов файлов, схем URI или и того и другого, которые регистрируются для работы
-   Проверьте, появились ли новые уведомления о приложениях после установки приложения и пользователь вызывает тип файла, схему URI или и то, и другое, что приложение зарегистрировалось для работы.

## <a name="resources"></a>Ресурсы

-   [рекомендации по типу файлов и сопоставлению URI в Windows 8 классических приложениях](/previous-versions/windows/desktop/legacy/cc144156(v=vs.85))
-   [Сопоставление типов файлов и автовоспроизведение создание конференций презентация](https://channel9.msdn.com/events/BUILD/BUILD2011/PLAT-282T)

 

 