---
title: Ограничения графической оболочки сервера
description: Серверные приложения должны быть способны работать без графической оболочки сервера.
ms.assetid: 8F531497-B64D-4E79-AD7A-790EFDC6ADFE
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ae2a3002fc2395faba3e07d90a2322c770fe3ee9
ms.sourcegitcommit: 099ecdda1e83618b844387405da0db0ebda93a65
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2021
ms.locfileid: "111443225"
---
# <a name="server-apps-must-be-able-to-run-without-the-server-graphical-shell"></a>Серверные приложения должны быть способны работать без графической оболочки сервера.

## <a name="platform"></a>Платформа

**Серверы** — Windows Server 2012 

## <a name="description"></a>Описание

Серверная графическая оболочка, компонент, включающий проводник Windows и Internet Explorer, устанавливается по умолчанию на сервере Windows Server 2012 с установленным графическим интерфейсом. Компонент графической оболочки сервера можно удалить, чтобы снизить потенциальную нагрузку на обслуживание и производительность, ограничивая число перезагрузок, которые может повлечь сервер, и тем самым разрешив запуск средств управления на локальном сервере.

После того как администратор отменяет установку графической оболочки сервера, сервер находится в конфигурации минимального интерфейса сервера:

![Конфигурация интерфейса графической оболочки сервера](images/minimalserverinterface.png)

Администраторы могут выбрать запуск в минимальной конфигурации интерфейса сервера (которая включает набор локальных средств управления) по умолчанию, а не на сервере с конфигурацией графического интерфейса пользователя. Это позволяет осуществлять локальный мониторинг и управление, одновременно уменьшая использование ресурсов и частоту обслуживания.

После этого администраторы могут переустановить графическую оболочку сервера, если они нуждаются в функциональных возможностях. (Администраторы также могут начать с установки Server Core и "создать" до конфигурации с минимальным интерфейсом сервера, используя функции функций по запросу.)

Серверные приложения должны быть способны работать в минимальной конфигурации серверного интерфейса, чтобы воспользоваться преимуществами сокращенного использования ресурсов и обслуживания. Эта возможность может быть достигнута путем предоставления администратору возможности не устанавливать части приложения, которым требуется графическая оболочка сервера, или путем обнаружения наличия графической оболочки сервера и отключения некоторых аспектов приложения.

Минимальный интерфейс сервера имеет уменьшенный объем ресурсов и обслуживания, поскольку многие API-интерфейсы и двоичные файлы, которые включены в графическую оболочку сервера, недоступны в этой конфигурации. Там, где это уместно, серверные приложения также должны разрешать удаленное администрирование (предпочтительно с помощью удаленного взаимодействия Windows PowerShell) из другой установки Windows Server или клиента Windows. Это позволяет лучше централизованно администрировать один или несколько компьютеров в минимальной конфигурации серверного интерфейса или на компьютерах в более низких конфигурациях, таких как Server Core.

## <a name="manifestation"></a>Проявление

Если приложению требуется какой-либо из API или двоичных файлов, недоступных в минимальной конфигурации серверного интерфейса, он может неправильно отображаться на экране и/или быть непригодным для использования.

## <a name="mitigation"></a>Меры по снижению риска

Разработчики серверных приложений должны определить те части приложений, которым требуется любой из удаленных API или двоичных файлов, и включить сведения для администратора сервера, определяющие части приложения, которые не будут правильно работать при использовании минимального интерфейса сервера. Если эти части приложения могут быть установлены по желанию или не являются обязательными для функциональности продукта, приложение можно установить и запустить в минимальной конфигурации интерфейса сервера.

Если приложение не может использоваться вообще без серверной графической оболочки, это ограничение следует задокументировать, и администратор сервера должен дать указание установить графическую оболочку сервера. (При добавлении в установку Server Core это может потребовать добавления функций с помощью функций по запросу.) Кроме того, приложение должно проверять загрузку, чтобы все необходимые файлы были доступны, так как графическая оболочка сервера может быть удалена в любое время до или после установки приложения.

## <a name="solution"></a>Решение

Зависят от наименьшего возможного набора зависимостей и разделения приложений, чтобы основные функции приложения могли работать без необходимости установки более высокой плотности компонентов пользовательского интерфейса. Разрабатывайте приложения, не требующие удаленных API или двоичных файлов, и используйте функции, содержащиеся в минимальном интерфейсе сервера или Server Core. Это снизит требования к обслуживанию, повышая производительность и степень удовлетворенности пользователей.

При наличии частей приложения, которые могут добавить значительные функции, если доступна графическая оболочка сервера, разработчики приложений могут:

-   Разрешить этим дополнительным компонентам использовать серверную графическую оболочку для установки при необходимости, чтобы их можно было опустить при установке в минимальной конфигурации интерфейса сервера.
-   Определение наличия графической оболочки сервера и адаптация поведения приложения

Разработчики приложений также должны обеспечивать удаленное управление серверными приложениями, если это возможно и уместно.

## <a name="detecting-minimal-server-interface-and-server-core"></a>Обнаружение минимального интерфейса сервера и Server Core

Windows Server установит соответствующее значение реестра для каждого установленного уровня сервера. Вы можете запросить существование этих ключей, чтобы определить, установлены и включены Серверная графическая оболочка или функции серверного интерфейса.

HKEY \_ локальный \_ компьютер \\ программное обеспечение \\ Microsoft \\ Windows NT \\ CurrentVersion \\ Server \\ серверлевелс:



|   &nbsp;         | Основные серверные компоненты | Минимальный интерфейс сервера | Графическая оболочка сервера |
|------------------|-------------|--------------------------|------------------------|
| ServerCore = 1     | X           | X                        | X                      |
| Server-Гуимгмт = 1 |             | X                        | X                      |
| Сервергуишелл = 1 |             |                          | X                      |



 

"X" в приведенной выше таблице означает, что при установке соответствующего компонента будет указан раздел реестра.

Обратите внимание, что эти уровни сервера являются аддитивными; Если установлена графическая оболочка сервера, то это минимальный серверный интерфейс и ядро сервера. В этом случае будут присутствовать оба раздела реестра.

## <a name="tests"></a>Тесты

Проверьте код приложения на наличие требований, использующих любой из удаленных API и двоичных файлов. После удаления всех экземпляров из двоичных файлов "основное приложение" протестируйте приложение в среде, которая не включает в себя графическую оболочку сервера. Такие средства, как монитор процессов, могут помочь в этом.

Если вы не можете полностью прекратить использование этих API и двоичных файлов, убедитесь, что приложение аварийно завершает работу при запуске на минимальном интерфейсе сервера или Server Core.

## <a name="resources"></a>Ресурсы

-   [Существующие документы Server Core на MSDN](/previous-versions/windows/desktop/legacy/ms723891(v=vs.85))

 

 