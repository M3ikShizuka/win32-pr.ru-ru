---
title: Проверка версии Windows
description: версия ос была увеличена с учетом выпуска ос Windows 10.
ms.assetid: 55BB7B44-1AFD-456D-9380-38B4D26E5EF6
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 710f59313f05dac95e5953c6013108987dc9bf8ad84d7eb7d8bca67a5391996b
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120007884"
---
# <a name="windows-version-check"></a>Проверка версии Windows

версия ос была увеличена с учетом выпуска ос Windows 10. это означает, что внутренний номер версии для Windows 10 также был изменен на 10,0. Как и раньше, мы хотим сделать все возможное для обеспечения совместимости с приложениями и устройствами после изменения номера версии ОС. Для большинства категорий приложений (без зависимостей ядра) изменение не оказывает негативного воздействия на функциональность приложения, и существующие приложения будут по-прежнему работать на Windows 10.

## <a name="manifestations"></a>Проявлениями

Проявление этого изменения будет зависеть от конкретного приложения. Это означает, что любое приложение, выполняющее непосредственную проверку версии ОС, в ответ на запрос будет получать ответ с указанием более высокого номера версии, что может привести к возникновению одной или нескольких ситуаций, описанных ниже:

-   Установщик приложения не сможет установить приложение, и оно может не запуститься.
-   Приложения могут работать нестабильно или со сбоями.
-   Приложения могут создавать сообщения об ошибках, но продолжать работать в штатном режиме.

Некоторые приложения выполняют проверку номера версии ОС и просто передают пользователям предупреждение. Но есть приложения, работа которых очень сильно зависит от результатов проверки номера версии ОС (в драйверах или в режиме ядра для предотвращения обнаружения номера версии). В этих случаях при обнаружении несовместимой версии приложение запустить не удастся. Поэтому вместо проверки версии мы рекомендуем использовать один из следующих подходов.

-   Если приложение зависит от конкретной функции API, убедитесь, что вы используете правильную версию API.
-   Номер версии НТДДИ (интерфейс драйвера устройства NT) увеличится только при изменении целевой функциональности в API. Убедитесь, что вы обнаружите изменение с помощью Аписет или другого доступного API, созданного специализированной группой, и не используйте версию в качестве прокси-сервера для некоторой функции или исправления. Если есть критические изменения и правильная проверка невозможна, можно достоверно утверждать об обнаружении ошибки.
-   Убедитесь, что приложение не выполняет проверку версии нечетными способами, например с помощью реестра, версий файлов, смещений, режима ядра, драйверов или других средств. Если приложению абсолютно нужно проверить версию, используйте API-интерфейсы для функций, которые должны возвращать основной, дополнительный номера и номер сборки.
-   Если вы используете API-интерфейс или другие вспомогательные функции версии, например [верифиверсионинфо](/windows/desktop/api/winbase/nf-winbase-verifyversioninfoa), помните, что поведение этого API изменилось, начиная с Windows 8.1. Дополнительные сведения см. в [документации по API](../SysInfo/version-helper-apis.md) .
-   если вы владеете такими приложениями, как защита от вредоносных программ или брандмауэр, вы должны работать с обычными каналами обратной связи и с помощью программы предварительной оценки Windows.

## <a name="declaring-windows-10-compatibility-with-an-app-manifest"></a>объявление Windows 10 совместимости с манифестом приложения

если приложение совместимо с Windows 10, оно может объявить этот факт в [манифесте приложения (исполняемом файле)](/windows/compatibility/application-executable-manifest) для исполняемого файла приложения. это говорит системе, что ваше приложение распознает номер версии 10,0, Windows 10 (так что API-интерфейс версии не возвращает более раннюю версию), а также позволяет системе отключать другие поведения совместимости, применяемые к приложениям, не объявляющие совместимость Windows 10.

чтобы объявить совместимость Windows 10 в манифесте приложения, необходимо добавить [раздел **&lt; совместимости &gt;**](../SbsCs/application-manifests.md#compatibility) манифеста, если он еще не существует, а затем добавить элементы **&lt; суппортедос &gt;** для Windows 10 и все остальные Windows версии, которые вы хотите объявить в приложении.

в следующем примере показан файл манифеста приложения для приложения, поддерживающего все версии Windows из Windows Vista в Windows 10:

```XML
<!-- example.exe.manifest -->
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1" xmlns:asmv3="urn:schemas-microsoft-com:asm.v3">
    <assemblyIdentity
        type="win32"
        name="Contoso.ExampleApplication.ExampleBinary"
        version="1.2.3.4"
        processorArchitecture="x86"
    />
    <description>Contoso Example Application</description>
    <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
        <application>
            <!-- Windows 10 -->
            <supportedOS Id="{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}"/> <!-- * ADD THIS LINE * -->
            <!-- Windows 8.1 -->
            <supportedOS Id="{1f676c76-80e1-4239-95bb-83d0f6d0da78}"/>
            <!-- Windows 8 -->
            <supportedOS Id="{4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}"/>
            <!-- Windows 7 -->
            <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>
            <!-- Windows Vista -->
            <supportedOS Id="{e2011457-1546-43c5-a5fe-008deee3d3f0}"/> 
        </application>
    </compatibility>
</assembly>
```

В приведенной выше строке `* ADD THIS LINE *` показано, как точно выбрать для приложения Windows 10.

объявление поддержки для Windows 10 в манифесте приложения не будет оказывать никакого влияния при запуске приложения в предыдущих операционных системах.

## <a name="resources"></a>Ресурсы

-   [совместимость приложений набор средств загрузить: скачайте Windows ADK для Windows 10](https://download.microsoft.com/download/9/A/E/9AE69DD5-BA93-44E0-864E-180F5E700AB4/adk/adksetup.exe)
-   [Известные исправления совместимости, режимы совместимости и сообщения AppHelp](/previous-versions/windows/it-pro/windows-7/cc765984(v=ws.10))
-   [API вспомогательных функций версий](../sysinfo/version-helper-apis.md)