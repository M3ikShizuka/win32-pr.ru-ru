---
title: Режим высокой контрастности
description: Режим высокой контрастности
ms.assetid: 817F2BBD-3744-4D34-927F-EBF9F7894CC0
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1a288447dda8d3a76278ad695459d2c15598b328
ms.sourcegitcommit: 61a4c522182aa1cacbf5669683d9570a3bf043b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2021
ms.locfileid: "122883900"
---
# <a name="high-contrast-mode"></a>Режим высокой контрастности

## <a name="platforms"></a>Платформы

 **клиенты** — Windows 8  
**серверы** — Windows Server 2012  



## <a name="description"></a>Описание

в предыдущих операционных системах Windows режим высокой контрастности был ограничен темами, запущенными в классической теме, которые не были визуально оформлены. в Windows 8 и Windows Server 2012 классический режим был удален и заменен на темы с высокой контрастностью с визуальным стилем. Одним из основных преимуществ этого изменения является удаление отдельного пути кода для приложений, выполняющихся в классическом режиме.

Разработчикам по-прежнему необходимо обучиться, как режим высокой контрастности может повлиять на свое приложение, и как разработать приложение, которое действительно не зависит от стиля. Это важно, поскольку хотя неправильное использование или допущение цветов темы может привести к правильной работе приложений в визуальном стиле, таком как Aero, те же приложения реагируют в неправильном режиме при высокой контрастности. Например, в Aero текст всегда черный, а цвет выделения — светло-синий. Однако в черно-белой палитре цвет выделения черный. если предполагается наличие черного текста, как в случае с несколькими встроенными приложениями до Windows 8 и использование системы по умолчанию для выделения, пользователь увидит черный текст на черном фоне. В этих ситуациях необходимо понять, как правильно использовать темы и метрики системы, чтобы приложение правильно выглядело в разных стилях.

## <a name="manifestations"></a>Проявлениями

-   они не включены в клиентской области приложений, которые не содержат &lt; тег Windows 8 суппортедос &gt; в манифесте приложения. Поэтому приложения должны визуализировать клиентскую область, используя путь кода, необходимый для подготовки к просмотру в режиме высокой контрастности классической темы.
-   Они не включены как в неклиентской, так и в клиентской области приложений в темах с высокой контрастностью. она также не включена в приложениях, которые не содержат &lt; тег Windows 8 суппортедос &gt; в манифесте приложения и рисуются в неклиентской области окна с помощью API двнискомпоситионенаблед (). Все приложение готовится к просмотру в режиме высокой контрастности классической темы.
-   приложения, которые добавляют поддержку Windows 8 в манифесте, но не используют визуальные стили для отрисовки, то есть они жестко обрабатывают цвета или изображения в своих приложениях, могут неправильно отображаться в темах с высокой контрастностью. Чтение текста может оказаться трудным для чтения, или изображения могут не отображаться, как в режиме высокой контрастности.

## <a name="mitigation"></a>Меры по снижению риска

Цвета текста в темах с высокой контрастностью были созданы в соответствии с рекомендациями Майкрософт по специальным возможностям. Мы поддерживаем коэффициент 14:1 с высокой контрастностью между передним и задним планом. Если цвета, включенные по умолчанию, не подходят конкретному конечному пользователю, их можно легко настроить с помощью параметров панели управления для "цвет окна" в этих темах с высокой контрастностью.

Эти компоненты пользовательского интерфейса настраиваются в темах с высокой контрастностью:

-   Цвет фона окна
-   Цвет текста
-   Цвет гиперссылок
-   Отключенный текст
-   Цвет переднего плана выбранного текста и фона
-   Заголовок активного окна и цвета фона
-   Заголовок неактивного окна и цвета фона
-   Цвет переднего плана и фона кнопки

## <a name="solution"></a>Решение

Если в приложениях в темах с высокой контрастностью встречается непредвиденное поведение, одно из следующих решений может помочь:

-   **Манифест приложения для Windows 8:**

    в приложениях, которые не содержат &lt; тег Windows 8 суппортедос &gt; в манифесте приложения, клиентские области будут отображаться без темы. Все приложения, содержащиеся в списке, должны содержать эту запись в манифесте приложения. Добавьте значение GUID 4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38 для Windows 8.

-   **Использование стилей оформления с пользовательскими интерфейсами, рисуемыми владельцем:**

    Элементы управления, рисуемые владельцем, должны следовать инструкциям на [сайте MSDN](/windows/desktop/Controls/using-visual-styles) для правильного отображения элементов управления и состояний, включая текст. Разработчики не должны полагаться на цвет текста или фона, указанный в контексте устройства, чтобы использовать методы, отличные от Укссеме, для подготовки к просмотру. Если нет части темы для рассматриваемого элемента управления, используйте Жетсемесисколор с [соответствующей метрикой](/windows/desktop/api/winuser/nf-winuser-getsyscolor) и выведите текст с помощью стандартных методов GDI. Если ни один из вызовов Укссеме не подходит, используйте метод Жетсисколор для получения соответствующей метрики.

-   **Выбор цвета текста:**

    Не используйте жестко закодированный цвет текста, даже если предполагается, что он будет выглядеть хорошо во всех распространенных сценариях. Темы доставки создаются так, чтобы поддерживать высокую видимость со связанными метриками. Например, цвет \_ хигхлигхттекст предназначен для использования с выделением цветом в \_ качестве фона и цветовой \_ WINDOWTEXT, предназначенный для использования в \_ качестве фона для окна цвета. При наличии исключений для этих ассоциаций следует работать с ними в частях темы и определениях состояний, а не в коде. При проектировании пользовательских интерфейсов с высокой контрастностью крайне важно, чтобы пользовательский интерфейс не заменялся в применяемой в настоящее время теме с высокой контрастностью, так как пользователи с высокой контрастностью могут настраивать свои цвета.

-   **Реагирование на \_ событие WM семечанже:**

    Если приложение кэширует цвета, полученные из темы, или применяет цвета нестандартным образом, добавьте обработчик сообщений для WM \_ семечанже, который повторно вычисляет значения сохраненного цвета и перерисовывает пользовательский интерфейс.

-   **Создание приложения ВВА с высокой контрастностью:**

    Веб-приложения не имеют доступа к интерфейсам API Укссеме, но по-прежнему должны быть записаны с текущими системными метриками в качестве базиса для пользовательского интерфейса. Существует несколько ресурсов для разработчиков ВВА, которые могут использовать для обеспечения высококонтрастного приложения, совместимого с высокой степенью совместимости:

    -   [Спецификация цвета W3C CSS](https://www.w3.org/TR/css3-color/) указывает синтаксис для использования системных метрик вместо конкретных цветов.
    -   Добавлена поддержка запросов мультимедиа с высокой контрастностью к Internet Explorer 10
    -   ВВАС может использовать метод Иакцессибилитикапабилитиес:: Get \_ HighContrast () для проверки состояния высокой контрастности

    Windows приложения магазина не имеют много проблем с частями темы, присутствующими в классических Windows приложениях, но все равно необходимо обеспечить соответствие требованиям высокой контрастности. По умолчанию Internet Explorer игнорирует определенные определяемые пользователем стили и заменяет их соответствующими значениями с высокой контрастностью. Например, свойства CSS для фонового изображения, фона и цвета игнорируются.

    Если вы не хотите, чтобы Internet Explorer проигнорировал заданные свойства и вы уверены, что пользовательский интерфейс совместим с высокой контрастностью, можно задать новое свойство M3 CSS — MS-High-контрастное: Off в родительском элементе.

-   **создание приложения для хранения Windows с высокой контрастностью:**

    Windows Приложение магазина должно использовать класс [SystemColors](/dotnet/api/system.windows.systemcolors) для определения правильного цвета элемента пользовательского интерфейса, учитывая, что некоторые цвета метрик системы предназначены для использования в сочетании, например SystemColors. Виндовколор и SystemColors. виндовтекстколор. Это упрощает работу с высокой контрастностью.

-   **Правильное определение высокой контрастности в предыдущих версиях Windows:**

    приложения, работающие в предыдущих версиях Windows, не имеют доступа к новым темам с высокой контрастностью, даже если манифест определяет совместимость с версией Windows. Таким образом, может потребоваться вставить дополнительные пути кода для обработки отрисовки в классической среде, используемой в предыдущих версиях Windows. Наличие высокой контрастности в этом случае следует проверить с помощью вызова функции [системпараметерсинфо](/windows/desktop/api/winuser/nf-winuser-systemparametersinfoa) с \_ флагом SPI жесигхконтраст. Это единственный поддерживаемый способ проверки наличия высокой контрастности.

## <a name="tests"></a>Тесты

при тестировании приложения убедитесь, что оно правильно отображается во всех темах, предоставляемых Windows 8: Aero, Basic, высокая контрастность 1, высокая контрастность 2, высокая контрастность черным цветом и высокая контрастность белым. Убедитесь, что текст четко виден и легко читается в темах с высокой контрастностью.

## <a name="resources"></a>Ресурсы

-   [Классы, части и состояния в стиле Aero](../controls/aero-style-classes-parts-and-states.md) (новые основные темы и темы с высокой контрастностью также используют эти состояния)
-   [Части и состояния, общие для всех визуальных стилей](../controls/parts-and-states.md)
-   [Использование стилей оформления с пользовательскими и Owner-Drawn элементами управления](../controls/using-visual-styles.md)
-   [Функция Жетсисколор](/windows/win32/api/winuser/nf-winuser-getsyscolor)
-   [Модуль цветопередачи W3C CSS, уровень 3](https://www.w3.org/TR/css3-color/)
-   [Класс SystemColors](/dotnet/api/system.windows.systemcolors?view=netcore-3.1)
-   [Функция Системпараметерсинфо](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa)
-   [Специальные возможности корпорации Майкрософт](https://www.microsoft.com/enable/)

 

 
