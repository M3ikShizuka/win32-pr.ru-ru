---
title: диспетчер окон рабочего стола всегда включено
description: диспетчер окон рабочего стола всегда включено
ms.assetid: 36E2DD1B-E480-47A9-850B-3057119641C0
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f855635615dee734b9a719d4e51d3ead663d144e
ms.sourcegitcommit: ea4baf9953a78d2d6bd530b680601e39f3884541
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/01/2020
ms.locfileid: "104339417"
---
# <a name="desktop-window-manager-is-always-on"></a>диспетчер окон рабочего стола всегда включено

## <a name="platforms"></a>Платформы

**Клиенты** — Windows 8  
**Серверы** — Windows Server 2012  


## <a name="description"></a>Описание

В Windows 8 диспетчер окон рабочего стола (DWM) всегда включен и не может быть отключен конечными пользователями и приложениями. Как и в Windows 7, DWM используется для создания рабочего стола. В дополнение к опыту, включенному в Windows 7, теперь компонент DWM Desktop композиция обеспечивает композицию рабочего стола для всех тем, поддержку Стереоскопик 3D, а также управление, разделение и защиту приложений Магазина Windows.

**Композиция рабочего стола для всех тем**

В Windows Vista и Windows 7 Композиция рабочего стола включена только с помощью темы AERO Glass. Следовательно, пользователи классических и высококонтрастных тем Windows не могут использовать возможности, предоставляемые композицией рабочего стола, такие как перелистывание Windows, автоматическое масштабирование для масштабирования с высоким разрешением (DPI), предварительный просмотр эскизов и полноэкранная экранная лупа. Кроме того, в этих более ранних версиях Windows разработчикам приложений необходимо писать и поддерживать несколько ветвей кода — один там, где включена композиция настольных систем, а другой — с отключенной компоновкой рабочего стола.

В Windows 8 для всех тем включена Композиция рабочего стола. Пользователи классических и высококонтрастных тем Windows могут использовать возможности, включенные в составе рабочего стола, такие как эргономичное перелистывание Windows, автоматическое масштабирование для масштабирования с высоким разрешением (DPI), предварительный просмотр эскизов и полноэкранная экранная лупа. Кроме того, разработчикам не нужно писать и поддерживать несколько путей кода, что упрощает разработку.

**Поддержка стереоскопик 3D**

Визуализация рабочего стола DWM поддерживает отрисовку и представление содержимого стереоскопик трехмерного приложения в оконном и полноэкранном режиме.

**Управление, разделение и защита работы с приложениями Магазина Windows**

При компоновке рабочего стола DWM обеспечивает разделение и защиту окон настольных приложений из новых окон приложений Магазина Windows путем управления и отделения окон классических приложений от окон приложений Магазина Windows. Так как композиция настольных систем отвечает за управление всеми окнами приложений, отключение композиции рабочего стола может привести к непредвиденному поведению. Кроме того, вы несете ответственность за составление нового меню "Пуск", а также дополнительных анимаций окон, которые формируют основные индивидуальные сведения о новой операционной системе Windows.

## <a name="controlling-desktop-composition"></a>Управление композицией рабочего стола

В Windows Vista и Windows 7 Композиция рабочего стола отключена в ряде сценариев. В Windows 8 Рабочий стол DWM является основным компонентом операционной системы и не может быть отключен. За некоторыми исключениями, композиция рабочего стола всегда включена; он запускается перед входом пользователя и остается активным в течение сеанса. В этом разделе описывается, как Windows 8 обрабатывает сценарии в Windows 7, когда композиция рабочего стола отключена.

**SKU сервера и определенные номера SKU клиентов**

В Windows 8 для всех номеров SKU сервера и клиента включена Композиция рабочего стола. Это гарантирует, что администраторы сервера и пользователи смогут воспользоваться преимуществами функций, включенных в композицию рабочего стола.

**Фундаментальные требования к компоновке рабочего стола**

Windows 8 обеспечивает выполнение требований к графическому адаптеру и глубине цвета системы с помощью поддержки драйвера WDDM и глубины системного цвета.

**Поддержка драйвера WDDM**

Если в системе нет драйвера графики, совместимого с WDDM, в Windows 8 в качестве адаптера по умолчанию используется видеоадаптер Microsoft Basic. Так как DWM всегда выполняется на адаптере по умолчанию, он выбирает видеоадаптер Microsoft Basic для создания настольных систем, когда драйвер графики, соответствующий WDDM, недоступен (независимо от того, установлен или отключен) в системе.

Базовый видеоадаптер (Майкрософт) — это программное средство для прорисовки, использующее процессор, а не GPU для выполнения всех рисунков. Обратите внимание, что производительность композиции рабочего стола на базовом видеоадаптере Майкрософт (особенно анимация) может быть не столь гладкой, как при выполнении композиции рабочего стола на GPU.

**Глубина цвета системы**

Компоновка рабочего стола не может быть выполнена, если для параметра Глубина цвета не задано значение 32 бит на пиксель. В Windows 7 глубина цвета системы может быть изменена в следующих сценариях:

-   Для изменения системного цвета конечный пользователь использует панель управления Windows (экран) или третью панель управления.
-   Конечный пользователь запускает приложение, которое изменяет глубину цвета системы с помощью общедоступного API.

В отличие от Windows 7, Windows 8 не поддерживает глубину цвета, отличную от 32 бит на пиксель. Пользователь больше не может изменять глубину цвета системы с помощью панели управления.

Кроме того, разработчики приложений не могут использовать интерфейсы API для изменения глубины цвета системы. Windows 8 обнаружит приложения, которые пытаются изменить глубину цвета системы на менее 32 бит на пиксель, и уведомить пользователя о том, что для запуска приложений необходимо применить оболочку совместимости приложения. После подтверждения от пользователя применяется оболочка совместимости приложений, и оболочка режима виртуализации применяет режим низкого цвета к приложению, при этом система работает в 32 битах на пиксель.

**WinSAT**

В Windows 8 компоновка рабочего стола не зависит от оценок WinSAT. Более того, WinSAT больше не включает оценку DWM.

**Совместимость приложений и действие пользователя**

В Windows 8:

-   Все параметры отключения композиции рабочего стола, существующие в Windows 7, удаляются
-   Композиция рабочего стола отвечает за составление всех тем
-   Приложения не могут использовать Двменаблекомпоситион для отключения композиции рабочего стола. Чтобы обеспечить обратную совместимость, вызов этого API вернет значение Success; Однако компоновка рабочего стола не отключена
-   Оболочка совместимости "Отключить композицию рабочего стола" удалена
-   Параметр "Отключить композицию рабочего стола" на вкладке "совместимость" диалогового окна свойств приложения удаляется

**Приложение использует драйвер зеркального отображения для удаленного взаимодействия**

В Windows 8:

-   Не поддерживает зеркальные драйверы для сценариев удаленного взаимодействия. Хотя большая часть существующих приложений, использующих зеркальные драйверы, должна продолжать работать из-за изменения инфраструктуры, необходимого для поддержки существующих зеркальных драйверов в Windows 8 с помощью DWM, некоторые функции или приложения, использующие зеркальные драйверы, могут не работать.
-   Поддерживает API дублирования рабочего стола для разработчиков приложений, использующих зеркальные драйверы для сценариев удаленного взаимодействия.
-   Не поддерживает существующие зеркальные драйверы специальных возможностей
-   Существующие зеркальные драйверы должны быть обновлены, чтобы обеспечить их совместимость с Windows 8.

**Подключение к удаленному рабочему столу**

В Windows 8 для подключения к удаленному рабочему столу всегда включено Композиция рабочего стола. Клиентский компьютер, подключающийся к удаленному компьютеру под управлением Windows 8, всегда будет иметь включенную композицию рабочего стола для сеанса удаленного рабочего стола независимо от версии клиента Windows. Композиция рабочего стола поддерживается для нескольких мониторов на клиентском компьютере, а также для сеанса удаленного приложения.

Кроме того, при подключении к удаленному компьютеру Windows 8 эти параметры в клиенте подключение к удаленному рабочему столу не вступают в силу:

-   Глубина цвета
-   Флажок "включить композицию"

Глубина цвета соединения всегда равна 32 бит на пиксель, а компоновка рабочего стола всегда включена.

 

 




