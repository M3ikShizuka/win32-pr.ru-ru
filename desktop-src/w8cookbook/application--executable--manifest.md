---
title: Манифест приложения (исполняемый)
description: Манифест приложения (исполняемый)
ms.assetid: F46F33A6-0B2F-4086-9C6D-4AD43C26BCD3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de6f5a1d26af4b8ac6314655013ed56275bf7d73
ms.sourcegitcommit: ea4baf9953a78d2d6bd530b680601e39f3884541
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/01/2020
ms.locfileid: "104070749"
---
# <a name="app-executable-manifest"></a>Манифест приложения (исполняемый)

## <a name="platforms"></a>Платформы

**Клиенты** — Windows 8  
**Серверы** — Windows Server 2012  


## <a name="description"></a>Описание

Раздел Compatibility (совместимость) манифеста приложения, представленный в Windows, помогает операционной системе определить версии Windows, для которых предназначено приложение. Кроме того, манифест приложения позволяет Windows предоставлять поведение, ожидаемое приложением в зависимости от версии Windows, для которой предназначено приложение.

Раздел Compatibility (совместимость) манифеста позволяет Windows предоставлять новое поведение для вновь создаваемого программного обеспечения, сохраняя совместимость с существующим программным обеспечением. Этот раздел поможет Windows обеспечить более высокую совместимость в будущих версиях Windows. Например, приложение, объявляющая поддержку только для Windows 8 в разделе "совместимость", будет продолжать появление поведения Windows 8 в будущих версиях Windows.

## <a name="manifestation"></a>Проявление

Приложения без раздела совместимости в манифесте будут иметь поведение Windows Vista по умолчанию в Windows 7 и Windows 8 и в будущих версиях Windows. Имейте в виду, что в Windows XP и Windows Vista этот раздел манифеста не влияет на них.

Эти компоненты Windows предоставляют разные режимы работы на основе раздела совместимости:

**Пул потоков по умолчанию для удаленного вызова процедур (RPC)**

-   Windows 8 и Windows 7. чтобы повысить масштабируемость и сократить число потоков, RPC переключится в пул потоков NT (пул по умолчанию). Для Windows Vista RPC использовал частный пул потоков:

    -   Для двоичных файлов, скомпилированных для Windows 7 и более поздних версий Windows, используется пул по умолчанию.
    -   Если я \_ рпкмгмтенабледедикатедсреадпул вызов до вызова API RPC, используется пул частных потоков (поведение Vista).
    -   Если \_ рпкмгмтенабледедикатедсреадпул вызывается после вызова RPC, используется пул по умолчанию, I \_ рпкмгмтенабледедикатедсреадпул возвращает ошибку 1764, а запрошенная операция не поддерживается.

-   Windows Vista (по умолчанию). для двоичных файлов, скомпилированных для Windows Vista и более ранних версий Windows, используется частный пул.

**Блокировка DirectDraw**

-   Windows 8 и Windows 7: приложения, манифесты для Windows 7 и более поздних версий операционной системы, не могут вызывать API блокировки в ДДРАВ для блокировки видеобуфера основного рабочего стола; Это приведет к ошибке, и возвращается пустой указатель для первичной реплики. Это поведение применяется, даже если диспетчер окон рабочего стола композиция не включена. Приложения с совместимостью, объявленная для Windows 7 и более поздних версий, не должны блокировать основной видеобуфер для подготовки к просмотру.
-   Windows Vista (по умолчанию): приложения могут получить блокировку основного видеобуфера, так как устаревшие приложения зависят от этого поведения; Запуск приложения выключает диспетчер окон рабочего стола.

**Бит DirectDraw — блочное перемещение (BitBlt) в основной без усечения окна**

-   Windows 8 и Windows 7: приложения, манифесты для Windows 7 и более поздних версий Windows, не могут выполнять BitBlt в видеобуфер основного рабочего стола без окна обрезки. Это приведет к ошибке, а область BitBlt не будет подготовлена к просмотру. Windows обеспечивает это поведение, даже если вы не включаете диспетчер окон рабочего столаную композицию. Приложения с совместимостью, объявленная для Windows 7 и более поздних версий, должны выполнять BitBlt в окне обрезки.
-   Windows Vista (по умолчанию): приложения должны иметь возможность выполнять BitBlt к основному окну без обрезки, поскольку устаревшие приложения зависят от этого поведения; Запуск этого приложения выключает диспетчер окон рабочего стола.

**API GetOverlappedResult**

-   Windows 8 и Windows 7: разрешает состояние гонки, когда многопоточное приложение, использующее **GetOverlappedResult** , может возвращаться без сброса события в структуре OVERLAPPED, что приводит к преждевременному возвращению следующего вызова этой функции.
-   Windows Vista (по умолчанию): обеспечивает поведение с условием гонки о том, что приложения могут иметь зависимость от. Приложения, которые должны избежать этого состязания перед поведением Windows 7, должны ожидать перекрытое событие и при получении сигнала вызвать GetOverlappedResult с Бваит = = FALSE.

**Состояние тем оболочки в режиме высокой контрастности**

-   Windows 8: возвращает реальные сведения о состоянии в режиме высокой контрастности.
-   Windows 7: возвращает их как недоступные в режиме высокой контрастности, так как DWM все еще включен.
-   Windows Vista (по умолчанию): возвращает их как недоступные в режиме высокой контрастности, так как DWM все еще включен.

**Shell iPersistFile:: Save, метод**

-   Windows 8: Кшелллинк:: Save теперь определяет, вызывается ли обработчик IPersistFile с аргументом относительного пути и завершается с ошибкой, если это так.

    [Общедоступная документация](/windows/win32/api/objidl/nf-objidl-ipersistfile-save) , описывающая это поведение, указывает, что аргумент path должен быть абсолютным путем:

-   Windows 7 и более ранние версии (по умолчанию): Кшелллинк:: Save не определяет, отправляет ли обработчик iPersistFile проверку относительного пути, и позволяет приложениям продолжать работать с абсолютными или относительными путями.

**Помощник по совместимости программ (PCA)**

-   Windows 8: приложения с разделом совместимости не получают устранения уязвимости PCA.
-   Windows 7: приложения с разделом совместимости отправляются на потенциальные проблемы совместимости для изменений в Windows 8 (описанные в этом документе).
-   Windows Vista (по умолчанию): приложения, которые не удается правильно установить или завершить работу во время выполнения при определенных обстоятельствах, получают возможность устранения уязвимости PCA. Дополнительные сведения см. в разделе Resources.

## <a name="leveraging-feature-capabilities"></a>Использование возможностей функций

Обновите манифест приложения, используя последние сведения о совместимости для поддержки операционной системы. В этом разделе описаны дополнения к манифесту.

**Пространство имен:** Compatibility. v1 (xmlns = "urn: схемы-Microsoft-COM: Compatibility. v1" >)

**Имя раздела:** Совместимость (новый раздел)

**Суппортедос:** GUID поддерживаемой операционной системы — идентификаторы GUID, которые сопоставляются с поддерживаемыми операционными системами:

-   {e2011457-1546-43c5-a5fe-008deee3d3f0}

    для **Windows Vista**: это значение по умолчанию для контекста свитчбакк.

-   {35138b9a-5d96-4fbd-8e2d-a2440225f93a}

    для **Windows 7**: приложения, которые задают это значение в манифесте приложения, получают поведение Windows 7

-   {4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}

    для **Windows 8**: приложения, которые задают это значение в манифесте приложения, получают поведение Windows 8.

Корпорация Майкрософт будет создавать и публиковать идентификаторы GUID для будущих версий Windows по мере необходимости.

XML-пример обновленного манифеста:

> [!Note]  
> Имена атрибутов и тегов в манифесте приложения чувствительны к регистру.

 


```XML
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
<compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1"> 
    <application> 
        <!--The ID below indicates app support for Windows Vista -->
        <supportedOS Id="{e2011457-1546-43c5-a5fe-008deee3d3f0}"/> 
        <!--The ID below indicates app support for Windows 7 -->
        <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>
        <!--The ID below indicates app support for Windows 8 -->
        <supportedOS Id="{4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}"/>
    </application> 
</compatibility>
</assembly>
```



Идентификаторы GUID для всех операционных систем в предыдущем примере обеспечивают поддержку нижнего уровня. Для приложений, поддерживающих несколько платформ, отдельные манифесты для каждой платформы не требуются.

## <a name="tests"></a>Тесты

В приложении можно указать несколько поддерживаемых идентификаторов операционной системы. Необходимо добавить поддерживаемый идентификатор операционной системы, если вы тестировали или намерены в процессе тестирования приложения в этой операционной системе. Windows Vista и предыдущие версии операционной системы не обращают внимания на эти записи. Начиная с Windows 7, Windows выберет наивысший идентификатор GUID в манифесте вплоть до работающей версии Windows и предоставит поддержку приложений на этом уровне. Чтобы убедиться, что приложение работает с новым разделом совместимости манифеста приложения, выполните следующие действия.

1.  Протестируйте приложение с новым разделом совместимости и Суппортедос ID = {4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}, чтобы убедиться, что приложение работает правильно, используя Последнее поведение Windows 8.
2.  Протестируйте приложение с новым разделом совместимости и Суппортедос ID = {35138b9a-5d96-4fbd-8e2d-a2440225f93a}, чтобы обеспечить правильную работу приложения с поведением Windows 7.
3.  Протестируйте приложение с новым разделом совместимости и Суппортедос ID = {e2011457-1546-43c5-a5fe-008deee3d3f0}, чтобы обеспечить правильную работу приложения с поведением Windows Vista.

## <a name="resources"></a>Ресурсы

-   [Функция Куеряктктксв](../sbscs/application-manifests.md)
-   [Манифест UAC](/previous-versions/bb756929(v=msdn.10))
-   [Манифесты приложений для приложений Windows](../sbscs/application-manifests.md)
-   [Диспетчер окон рабочего стола (DWM)](../dwm/dwm-overview.md)
-   [Обновление несовпадения контекста](https://support.microsoft.com/kb/978637)
-   [Помощник по совместимости программ](/previous-versions/bb756937(v=msdn.10))

 

 