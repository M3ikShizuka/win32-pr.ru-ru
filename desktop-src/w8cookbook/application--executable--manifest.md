---
title: Манифест приложения (исполняемый)
description: Манифест приложения (исполняемый)
ms.assetid: F46F33A6-0B2F-4086-9C6D-4AD43C26BCD3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4abd733bf1575a7f6106b0e6b2aaa068cffc56668dc595edc73ad0413c0c34e5
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119549784"
---
# <a name="app-executable-manifest"></a>Манифест приложения (исполняемый)

## <a name="platforms"></a>Платформы

**клиенты** — Windows 8  
**серверы** — Windows Server 2012  


## <a name="description"></a>Описание

раздел compatibility (совместимость) манифеста приложения, представленный в Windows, помогает операционной системе определить версии Windows, предназначенные для приложения. кроме того, манифест приложения позволяет Windows предоставлять поведение, ожидаемое приложением, в зависимости от версии Windows, для которой предназначено приложение.

раздел compatibility (совместимость) манифеста позволяет Windows предоставлять новое поведение для вновь создаваемого программного обеспечения, сохраняя совместимость с существующим программным обеспечением. этот раздел поможет Windows обеспечить более высокую совместимость в будущих версиях Windows. например, приложение, объявляющая поддержку только для Windows 8 в разделе "совместимость", будет по прежнему принимать Windows 8 поведение в будущих версиях Windows.

## <a name="manifestation"></a>Проявление

приложения без раздела совместимости в манифесте будут иметь поведение Windows Vista по умолчанию для Windows 7 и Windows 8 и будущих Windows версий. имейте в виду, что Windows XP и Windows Vista не пропускают этот раздел манифеста и не влияет на них.

эти Windows компоненты предоставляют разные режимы работы на основе раздела compatibility:

**Пул потоков по умолчанию для удаленного вызова процедур (RPC)**

-   Windows 8 и Windows 7. чтобы повысить масштабируемость и сократить число потоков, RPC переключитесь на пул потоков NT (пул по умолчанию). для Windows Vista RPC использовал частный пул потоков:

    -   для двоичных файлов, скомпилированных для Windows 7 и более поздних версий Windows, используется пул по умолчанию.
    -   Если я \_ рпкмгмтенабледедикатедсреадпул вызов до вызова API RPC, используется пул частных потоков (поведение Vista).
    -   Если \_ рпкмгмтенабледедикатедсреадпул вызывается после вызова RPC, используется пул по умолчанию, I \_ рпкмгмтенабледедикатедсреадпул возвращает ошибку 1764, а запрошенная операция не поддерживается.

-   Windows Vista (по умолчанию). для двоичных файлов, скомпилированных для Windows Vista и более ранних версий Windows, используется частный пул.

**Блокировка DirectDraw**

-   Windows 8 и Windows 7: приложения, манифесты для Windows 7 и более поздних версий операционной системы, не могут вызывать API блокировки в ддрав для блокировки видеобуфера основного рабочего стола; Это приведет к ошибке, и возвращается пустой указатель для первичной реплики. Это поведение применяется, даже если диспетчер окон рабочего стола композиция не включена. приложения с совместимостью, объявленная для Windows 7 и более поздних версий, не должны блокировать основной видеобуфер для подготовки к просмотру.
-   Windows Vista (по умолчанию): приложения могут получить блокировку основного видеобуфера, так как устаревшие приложения зависят от этого поведения; Запуск приложения выключает диспетчер окон рабочего стола.

**Бит DirectDraw — блочное перемещение (BitBlt) в основной без усечения окна**

-   Windows 8 и Windows 7: приложения, манифесты для Windows 7 и более поздних версий Windows, не могут выполнять bitblt в видеобуфер основного рабочего стола без окна обрезки. Это приведет к ошибке, а область BitBlt не будет подготовлена к просмотру. Windows обеспечивает это поведение, даже если не включено диспетчер окон рабочего стола композиция. приложения с совместимостью, объявленная для Windows 7 и более поздних версий, должны выполнять bitblt в окне обрезки.
-   Windows Vista (по умолчанию): приложения должны иметь возможность выполнять BitBlt к первичному без окна обрезки, так как устаревшие приложения зависят от этого поведения; Запуск этого приложения выключает диспетчер окон рабочего стола.

**API GetOverlappedResult**

-   Windows 8 и Windows 7: разрешает состояние гонки, когда многопоточное приложение, использующее **GetOverlappedResult** , может возвращаться без сброса события в структуре overlapped, что приводит к преждевременному возвращению следующего вызова этой функции.
-   Windows Vista (по умолчанию): обеспечивает поведение с условием гонки о том, что приложения могут иметь зависимость от. приложения, которые должны избежать этого состязания перед Windows 7, должны ждать перекрытого события и при получении сигнала вызвать GetOverlappedResult с бваит = = FALSE.

**Состояние тем оболочки в режиме высокой контрастности**

-   Windows 8: возвращает реальные сведения о состоянии в режиме высокой контрастности.
-   Windows 7. возвращает их как недоступные в режиме высокой контрастности, так как DWM все еще включен.
-   Windows Vista (по умолчанию): возвращает их как недоступные в режиме высокой контрастности, так как DWM все еще включен.

**Shell iPersistFile:: Save, метод**

-   Windows 8: кшелллинк:: Save теперь определяет, вызывается ли обработчик IPersistFile с аргументом относительного пути и завершается с ошибкой, если это так.

    [Общедоступная документация](/windows/win32/api/objidl/nf-objidl-ipersistfile-save) , описывающая это поведение, указывает, что аргумент path должен быть абсолютным путем:

-   Windows 7 и более ранних версий (по умолчанию): кшелллинк:: Save не определяет, отправляет ли обработчик iPersistFile проверку относительного пути и позволяет приложениям продолжать работу с абсолютными или относительными путями.

**Помощник по совместимости программ (PCA)**

-   Windows 8: приложения с разделом совместимости не получают устранения уязвимости PCA.
-   Windows 7. приложения с разделом совместимости отправляются на потенциальные проблемы совместимости для Windows 8 изменений (описанных в этом документе).
-   Windows Vista (по умолчанию): приложения, которые не удается правильно установить или завершить работу во время выполнения при определенных обстоятельствах, получают возможность устранения уязвимости PCA. Дополнительные сведения см. в разделе Resources.

## <a name="leveraging-feature-capabilities"></a>Использование возможностей функций

Обновите манифест приложения, используя последние сведения о совместимости для поддержки операционной системы. В этом разделе описаны дополнения к манифесту.

**Пространство имен:** Compatibility. v1 (xmlns = "urn: схемы-Microsoft-COM: Compatibility. v1" >)

**Имя раздела:** Совместимость (новый раздел)

**Суппортедос:** GUID поддерживаемой операционной системы — идентификаторы GUID, которые сопоставляются с поддерживаемыми операционными системами:

-   {e2011457-1546-43c5-a5fe-008deee3d3f0}

    для **Windows Vista**: это значение по умолчанию для контекста свитчбакк

-   {35138b9a-5d96-4fbd-8e2d-a2440225f93a}

    для **Windows 7**: приложения, которые задают это значение в манифесте приложения, получают поведение Windows 7.

-   {4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}

    для **Windows 8**: приложения, которые задают это значение в манифесте приложения, получают поведение Windows 8

корпорация майкрософт будет создавать и публиковать идентификаторы guid для будущих версий Windows по мере необходимости.

XML-пример обновленного манифеста:

> [!Note]  
> Имена атрибутов и тегов в манифесте приложения чувствительны к регистру.

 


```XML
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
<compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1"> 
    <application> 
        <!--The ID below indicates app support for Windows Vista -->
        <supportedOS Id="{e2011457-1546-43c5-a5fe-008deee3d3f0}"/> 
        <!--The ID below indicates app support for Windows 7 -->
        <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>
        <!--The ID below indicates app support for Windows 8 -->
        <supportedOS Id="{4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}"/>
    </application> 
</compatibility>
</assembly>
```



Идентификаторы GUID для всех операционных систем в предыдущем примере обеспечивают поддержку нижнего уровня. Для приложений, поддерживающих несколько платформ, отдельные манифесты для каждой платформы не требуются.

## <a name="tests"></a>Тесты

В приложении можно указать несколько поддерживаемых идентификаторов операционной системы. Необходимо добавить поддерживаемый идентификатор операционной системы, если вы тестировали или намерены в процессе тестирования приложения в этой операционной системе. Windows Операционные системы Vista и предыдущие версии не обращают внимание на эти записи. начиная с Windows 7 Windows выберет наивысший идентификатор GUID в манифесте вплоть до выполняющейся Windows версии и предоставит поддержку приложений на этом уровне. Чтобы убедиться, что приложение работает с новым разделом совместимости манифеста приложения, выполните следующие действия.

1.  протестируйте приложение с новым разделом совместимости и суппортедос ID = {4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}, чтобы убедиться, что приложение работает правильно, используя новейшее поведение Windows 8.
2.  протестируйте приложение с новым разделом совместимости и суппортедос ID = {35138b9a-5d96-4fbd-8e2d-a2440225f93a}, чтобы убедиться, что приложение работает правильно, используя поведение Windows 7.
3.  протестируйте приложение с новым разделом совместимости и суппортедос ID = {e2011457-1546-43c5-a5fe-008deee3d3f0}, чтобы убедиться, что приложение работает правильно, используя поведение Windows Vista.

## <a name="resources"></a>Ресурсы

-   [Функция Куеряктктксв](../sbscs/application-manifests.md)
-   [Манифест UAC](/previous-versions/bb756929(v=msdn.10))
-   [манифесты приложений для Windows приложений](../sbscs/application-manifests.md)
-   [Диспетчер окон рабочего стола (DWM)](../dwm/dwm-overview.md)
-   [Обновление несовпадения контекста](https://support.microsoft.com/kb/978637)
-   [Помощник по совместимости программ](/previous-versions/bb756937(v=msdn.10))

 

 