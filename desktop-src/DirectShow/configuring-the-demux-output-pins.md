---
description: Настройка закрепления выходных данных демультиплексирование
ms.assetid: c53f3fe6-5588-4faf-ba5c-6a6cf7e16f3a
title: Настройка закрепления выходных данных демультиплексирование
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b56a24af3f49f26efe4ff6afad075a3cef61fcd1
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127147854"
---
# <a name="configuring-the-demux-output-pins"></a>Настройка закрепления выходных данных демультиплексирование

Когда MPEG-2 демультиплексирование получает пакет данных, он должен определить, какой ПИН-код должен анализироваться и доставлять данные. В режиме потока программы демультиплексирование сопоставляет идентификаторы потоков с выходными контактами. В режиме транспортного потока он сопоставляет идентификаторы PID с выходными контактами. Например, в режиме транспортного потока, если PID 0x31 сопоставлен с закреплением 0, каждый пакет служб терминалов с этим номером PID направляется в выходной ПИН-код 0. Если демультиплексирование получает пакет, идентификатор потока или PID которого не сопоставлен ни с одним выходным ПИН-кодом, он просто удаляет пакет.

В режиме опроса демультиплексирование автоматически создает выходные сигналы для потоков аудио и видео в файле и сопоставляет идентификаторы потоков с контактами.

В режиме принудительной отправки выходные контакты должны быть настроены приложением или другим фильтром. Для источников цифрового телевидения, использующих архитектуру драйвера вещания (BDA), фильтр поставщика сети работает с фильтром TIF для настройки демультиплексирование. Приложению не нужно ничего делать. В других сценариях приложение должно настроить контакты вывода.

Демультиплексирование начинается без выходных закрепления. Чтобы создать выходной ПИН-код, вызовите метод [**IMpeg2Demultiplexer:: креатеаутпутпин**](/windows/desktop/api/Strmif/nf-strmif-impeg2demultiplexer-createoutputpin) в фильтре. Этот метод принимает тип мультимедиа и имя ПИН-кода и возвращает указатель **Ипин** . тип мультимедиа используется, когда пин-код подключается к другому фильтру, обычно декодеру — пример [с использованием демультиплексирование с простейшим Потоки](using-the-demux-with-elementary-streams.md). Имя ПИН-кода может быть любым, за исключением того, что дублирующиеся имена ПИН-кодов не допускаются.

Затем назначьте один или несколько идентификаторов потоков или PID новому выходному ПИН-коду. Для потоков программы запросите ПИН-код для **IMPEG2StreamIdMap** и вызовите [**IMPEG2StreamIdMap:: мапстреамид**](/windows/desktop/api/Strmif/nf-strmif-impeg2streamidmap-mapstreamid). Для транспортных потоков запросите ПИН-код для **IMPEG2PIDMap** и вызовите [**IMPEG2PIDMap:: маппид**](/previous-versions/windows/desktop/api/Bdaiface/nf-bdaiface-impeg2pidmap-mappid).

Существует несколько способов, с помощью которых демультиплексирование может анализировать пакеты служб терминалов. Для каждого выходного ПИН-кода метод анализа определяется параметром *медиасамплеконтент* для метода **маппид** .



| Значение                     | Описание                                                                                                                                                                                                                                                                                                                                                        |
|---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_простейший \_ поток мультимедиа | Фильтр доставляет ПЕССИМИСТическую полезную нагрузку. В этом режиме фильтр депаккетизес PES пакеты, поэтому нисходящий фильтр получает байтовый поток ES без заголовков PES. (Только для потоков аудио и видео.)                                                                                                                                                     |
| MEDIA \_ MPEG2 \_ psi         | Фильтр предоставляет полные разделы PSI, такие как таблицы PAT, таблицы ПЛТ, таблицы CAT и т. д.                                                                                                                                                                                                                                                               |
| \_ \_ полезные данные транспорта носителей | Фильтр извлекает полезные данные из пакетов служб терминалов и доставляет их без дальнейшего анализа. Для простейших потоков это означает, что демультиплексирование будет доставлять все ПЕССИМИСТические пакеты, включая заголовки PES.                                                                                                                                                    |
| \_пакет транспорта \_ носителя  | Фильтр доставляет пакеты TS целиком. Демультиплексирование направляет пакеты служб терминалов в соответствии с их идентификаторами процесса, но не просматривает или не обрабатывает пакеты иным образом. Пакеты с ошибками не отфильтровываются. Демультиплексирование не выполняет повторное мультиплексирование пакетов, и результирующий поток вывода не является совместимым транспортным потоком MPEG-2. Этот режим называется *сквозным* режимом. |



 

Для потоков программ демультиплексирование всегда доставляет PES.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Использование демультиплексора MPEG-2](using-the-mpeg-2-demultiplexer.md)
</dt> </dl>

 

 



