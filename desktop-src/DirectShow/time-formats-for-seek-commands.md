---
description: Форматы времени для команд Seek
ms.assetid: d9c1b860-f75f-4886-95d6-c62e9e5b69eb
title: Форматы времени для команд Seek
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de8217873a9443c2b56c60523f95a6fe599ee045
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "126891696"
---
# <a name="time-formats-for-seek-commands"></a>Форматы времени для команд Seek

Многие методы в интерфейсе **имедиасикинг** имеют параметры, которые выражают значения позиции, такие как текущая позиция или позиция окончания. По умолчанию эти параметры выражаются в единицах 100 наносекунд, также называемых временем ссылки. Любой фильтр, который может выполнять поиск, должен поддерживать поиск по времени ссылки. Некоторые фильтры могут выполнять поиск с использованием других единиц времени, таких как поиск по определенному номеру кадра, или поиск в заданном байтовом смещении в потоке. Каждый из этих единиц времени называется форматом времени и определяется глобальным уникальным идентификатором (GUID). список форматов времени, определенных DirectShow, см. в разделе [**идентификаторы guid формата времени**](time-format-guids.md). Сторонние лица могут также определять идентификаторы GUID для пользовательских форматов времени.

Чтобы определить, поддерживают ли текущие фильтры в графе фильтра определенный формат времени, вызовите метод [**имедиасикинг:: исформатсуппортед**](/windows/desktop/api/Strmif/nf-strmif-imediaseeking-isformatsupported) . Если формат поддерживается, метод возвращает значение S \_ ОК. В противном случае возвращается \_ значение false или код ошибки. Если формат поддерживается, можно переключиться на этот формат, вызвав метод [**имедиасикинг:: сеттимеформат**](/windows/desktop/api/Strmif/nf-strmif-imediaseeking-settimeformat) . Если метод **сеттимеформат** выполняется, последующие команды поиска выражаются с использованием нового формата времени.

В приведенном ниже примере проверяется, поддерживает ли граф Поиск по номеру кадра. Если это так, он ищет кадр номер 20:


```C++
hr = pSeek->IsFormatSupported(&TIME_FORMAT_FRAME);
if (hr == S_OK)
{
    hr = pSeek->SetTimeFormat(&TIME_FORMAT_FRAME);
    if (SUCCEEDED(hr))
    {
        // Seek to frame number 20.
        LONGLONG rtNow = 20;
        hr = pSeek->SetPositions(
            &rtNow, AM_SEEKING_AbsolutePositioning, 
            0, AM_SEEKING_NoPositioning);
    }
}
```



Обратите внимание, что форматы времени применяются только к командам Seek. Они не влияют на воспроизведение графа и другие действия.

 

 



