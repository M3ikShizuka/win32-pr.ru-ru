---
description: Предоставление пользовательского изменения размера видео
ms.assetid: 4009f93f-cd50-440f-b943-7e3700e0e2cb
title: Предоставление пользовательского изменения размера видео
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5247727cf16ef3c94a699db2907ff240b1d8a289
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104139723"
---
# <a name="providing-a-custom-video-resizer"></a>Предоставление пользовательского изменения размера видео

\[Этот API не поддерживается и может быть изменен или недоступен в будущем.\]

> [!Note]  
> Для этого компонента требуется DirectX 9,0 или более поздней версии.

 

Когда [службы редактирования DirectShow](directshow-editing-services.md) (DES) изменяют размер исходного фрагмента видео, поведением по умолчанию является *стретчблт*, которое выполняется быстро, но не сглажено. Поведение изменения размера можно изменить, реализовав пользовательский размер в качестве фильтра преобразования DirectShow. Фильтр должен предоставлять интерфейс [**иресизе**](iresize.md) , который позволяет des указывать размер входного и выходного видео. Дополнительные сведения о написании фильтра преобразования см. в разделе [написание фильтров преобразования](writing-transform-filters.md). В качестве отправной точки рекомендуется использовать базовый класс **ктрансформфилтер** . При реализации фильтра Обратите внимание на следующее.

-   Поддержка интерфейса **иресизе** в фильтре (не на контактах).
-   Фильтр должен принимать только форматы [**видеоинфохеадер**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader) (Format \_ видеоинфо). Отклоните другие типы форматов.
-   Формат видео из DES может быть любым несжатым типом RGB, включая 32-разрядный RGB с альфа (МЕДИАСУБТИПЕ \_ ARGB32). Фильтр может безопасно отклонять форматы с помощью **бихеигхт** < 0.
-   Перед тем как подсистема визуализации подключится к выходному закрепления фильтра, он вызывает [**иресизе::p UT \_ mediaType**](iresize-put-mediatype.md) для задания типа выходных данных. Он также может вызывать [**иресизе::p UT \_ size**](iresize-put-size.md) для настройки размера выходных данных. Он может вызывать эти два метода в любом порядке (любое количество раз) перед подключением выходного контакта.
-   После того как подсистема визуализации подключится к выходному закреплениям, она может снова вызвать метод **вернуть \_ Размер** . Фильтр изменения размера должен повторно подключить свой выходной ПИН-код с новым размером.
-   В методе [**ктрансформфилтер:: Transform**](ctransformfilter-transform.md) фильтра растяните входное видео на размер выходных данных.
-   Фильтр не должен задавать флаг небесперебойной работы в образце выходных данных или присоединять тип мультимедиа к образцу выходных данных.
-   Чтобы сохранить состояние фильтра в файле Графедит (. ГРФ), реализуйте интерфейс **IPersistStream** . (Это необязательно, но полезно для тестирования.)

Чтобы использовать фильтр изменения, фильтр должен быть зарегистрирован в системе пользователя как COM-объект. Прежде чем приложение отрисовывает видеопроект, запросите подсистему визуализации для интерфейса [**IRenderEngine2**](irenderengine2.md) и вызовите [**IRenderEngine2:: сетресизергуид**](irenderengine2-setresizerguid.md) с идентификатором CLSID фильтра изменения размера.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Подготовка проекта](rendering-a-project.md)
</dt> </dl>

 

 



