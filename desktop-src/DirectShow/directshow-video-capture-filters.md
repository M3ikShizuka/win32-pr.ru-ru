---
description: DirectShow Фильтры записи видео
ms.assetid: e4d1452d-ceac-4b5c-b9ba-ad4722ecff76
title: DirectShow Фильтры записи видео
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 238f18dd77bc40011fa9fc0dbab3192ea81a223f
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127053946"
---
# <a name="directshow-video-capture-filters"></a>DirectShow Фильтры записи видео

фильтры захвата в DirectShow имеют некоторые функции, которые отличают их от других типов фильтров. несмотря на то, что [построитель Graph захвата](capture-graph-builder.md) скрывает многие сведения, рекомендуется прочитать этот раздел, чтобы получить общее представление о DirectShow диаграммах записи.

**Закрепить категории**

Фильтр захвата часто содержит два или более выходных контакта, которые доставляют одни и те же данные, например ПИН-код предварительной версии и ПИН-код захвата. Поэтому типы мультимедиа не являются хорошим способом различения ПИН-кодов. Вместо этого эти ПИН-коды различаются их функциональностью, которая определяется с помощью идентификатора GUID, который называется *категорией закрепления*.

Сведения о том, как запрашивать ПИН-коды для их категории, см. в статье [Работа с категориями закрепления](working-with-pin-categories.md). Однако для большинства приложений вам не придется запрашивать ПИН-коды напрямую. Вместо этого различные методы [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) принимают параметры, которые задают категорию закрепления для выполнения. построитель Graph отслеживания автоматически находит правильный пин-код.

**Предварительный просмотр ПИН-кодов и ПИН-коды захвата**

Некоторые устройства видеозаписи имеют отдельные выходные сигналы для предварительного просмотра и записи. ПИН-код для предварительного просмотра используется для отображения видео на экране, а закрепление записи используется для записи видео в файл.

ПИН-код предварительной версии и ПИН-код захвата имеют следующие отличия.

-   ПИН-код для предварительного просмотра удаляет кадры по мере необходимости для поддержания пропускной способности ПИН-кода записи.
-   Каждый кадр из ПИН-кода записи отмечается временем потока во время записи кадра. ПИН-код предварительной версии не отметок времени о том, какие образцы он доставляет.

Причина, по которой в кадрах предварительной версии отсутствуют отметки времени, заключается в том, что граф фильтра создает небольшой объем задержки в потоке. Если время записи используется как время презентации, модуль подготовки отчетов рассматривает каждый пример как немного поздно. Это может привести к тому, что модуль подготовки отчетов будет удалять кадры, пока он пытается его обнаружить. Удаление меток времени гарантирует, что модуль подготовки отчетов будет отображать каждый выбор при поступлении, не удаляя кадры.

В качестве ПИН-кода для предварительной версии ПИН-кода используется \_ \_ Предварительная версия категории PIN. Категория для ПИН-кодов захвата — \_ это \_ захват категории.

**ПИН-коды порта видео**

Видеопорт — это аппаратное подключение между видеоустройством (например, аналоговым ТВ-тюнером) и видеоадаптером. Порт видео позволяет устройству передавать видеоданные непосредственно на графическую карту. Видео отображается на экране с помощью наложения оборудования. Видеопортом может быть реальный кабель, соединяющий два устройства на отдельных картах; или это может быть жестко проводное подключение на одной карте.

Преимущество видеопорта заключается в том, что видео передается непосредственно в видеопамять без каких-либо операций с ЦП. Однако видеопорты имеют некоторые недостатки:

-   Видеопорт всегда использует область наложения во время записи, независимо от того, требуется ли предварительный просмотр видео.
-   Автоматическое переключение между кадрами происходит автоматически, что затрудняет синхронизацию перелистывания с другими операциями с видео.

Если устройство записи использует порт видео, то фильтр записи будет иметь ПИН-код видеопорта вместо ПИН-кода для предварительной версии. Категория закрепления для ПИН-кодов порта — это закрепить \_ категорию \_ видеопорт.

Каждый фильтр записи имеет по крайней мере один ПИН-код захвата. Кроме того, он может иметь ПИН-код предварительной версии или ПИН-код видеопорта, но не оба. Фильтры могут иметь несколько ПИН-кодов захвата и предварительный просмотр, каждый из которых доставляет отдельный тип носителя. Таким же, один фильтр может иметь ПИН-код видеозаписи, ПИН-код для предварительного просмотра видео, ПИН-код записи и ПИН-код для предварительной версии. (Однако нет ничего эквивалентного видеопорта для звукового устройства.)

**Вышестоящий фильтр WDM**

Windows Устройствам с драйвером WDM могут потребоваться некоторые дополнительные фильтры из фильтра записи. К этим фильтрам относятся следующие:

-   [Фильтр ТВ-тюнера](tv-tuner-filter.md). Управляет настройкой аналогового ТВ-тюнера.
-   [Фильтр ТВ-звука](tv-audio-filter.md). Управляет параметрами звука для аналоговых ТВ-тюнеров.
-   [Аналоговый фильтр микшера видео](analog-video-crossbar-filter.md). Направляет видео и звуковые сигналы через устройство. Например, устройство может иметь несколько входов, например S-Video и композитное видео. Фильтр микшера позволяет приложению выбрать входные данные.

несмотря на то, что они являются отдельными фильтрами в DirectShow, они обычно представляют одно и то же аппаратное устройство. Каждый фильтр управляет разной функцией устройства. Фильтры соединены ПИН-кодом, но данные мультимедиа не перемещаются через подключения. Поэтому ПИН-коды на этих фильтрах не подключаются путем установки типа носителя. Вместо этого они используют значения GUID, называемые *средними*. Средние идентификаторы GUID однозначно определяются для заданного минидривера устройства. Например, фильтр ТВ-тюнера и фильтр записи видео для одной и той же телекарты будут поддерживать один и тот же носитель, что позволит приложению правильно построить граф.

На практике эти фильтры автоматически добавляются на диаграмму, пока вы используете **ICaptureGraphBuilder2** для создания графов записи. Более подробное обсуждение см. в разделе [фильтры драйвера класса WDM](wdm-class-driver-filters.md).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Сведения о захвате видео в DirectShow](about-video-capture-in-directshow.md)
</dt> </dl>

 

 



