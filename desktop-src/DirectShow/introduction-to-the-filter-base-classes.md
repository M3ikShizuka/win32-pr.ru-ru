---
description: Общие сведения о базовых классах фильтров
ms.assetid: db6324d7-1914-44a8-a202-dff752b61c1a
title: Общие сведения о базовых классах фильтров
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f44c104d8fe155a7c9f0edba72770a508c8ec43d
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104416384"
---
# <a name="introduction-to-the-filter-base-classes"></a>Общие сведения о базовых классах фильтров

В этой статье описывается Библиотека базовых классов DirectShow (Microsoft). Эта библиотека предназначена для разработчиков фильтров, но средства записи приложений могут найти некоторые вспомогательные классы и программы отладки, которые полезны. Тем не менее, Библиотека базовых классов не требуется для программирования DirectShow.

В следующих разделах приводится сводка наиболее важных базовых классов в библиотеке.

**Классы объектов COM**

Создание COM-объектов поддерживается следующими классами:



| Класс                              | Описание                            |
|------------------------------------|----------------------------------------|
| [**кбасеобжект**](cbaseobject.md) | Базовый класс объекта.                     |
| [**кункновн**](cunknown.md)       | Реализует интерфейс **IUnknown** . |



 

Большинство классов DirectShow являются производными от **кбасеобжект**. Этот класс предоставляет помощь при отладке, сохраняя счетчик всех активных объектов в библиотеке DLL во время выполнения. В отладочных сборках библиотека DLL утверждает, выгружается ли она, пока число объектов больше нуля. Это упрощает мониторинг утечек, вызванных проблемами подсчета ссылок.

Все базовые классы, поддерживающие COM-интерфейсы, являются производными от **кункновн**, который наследует **кбасеобжект**. Класс **кункновн** поддерживает подсчет ссылок, **QueryInterface** и агрегирование. Дополнительные сведения см. [в разделе Реализация IUnknown](how-to-implement-iunknown.md).

**Фильтрация и закрепление классов**

Следующие классы поддерживают создание фильтров и объектов-закрепления DirectShow:



| Класс                                    | Описание                                                                                                                                                     |
|------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**кбасефилтер**](cbasefilter.md)       | Базовый класс для фильтров. Реализует интерфейс [**ибасефилтер**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter) .                                                                            |
| [**кбасепин**](cbasepin.md)             | Базовый класс для ПИН-кодов. Реализует интерфейсы [**Ипин**](/windows/desktop/api/Strmif/nn-strmif-ipin) и [**икуалитиконтрол**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol) .                                             |
| [**кбасеинпутпин**](cbaseinputpin.md)   | Базовый класс для входных ПИН-кодов, использующих транспорт локальной памяти. Реализует интерфейс [**имеминпутпин**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) . Этот класс является производным от **кбасепин**. |
| [**кбасеаутпутпин**](cbaseoutputpin.md) | Базовый класс для выходных закрепления, использующих соединения **имеминпутпин** . Этот класс является производным от **кбасепин**.                                                         |



 

Следующие классы полезны для создания более специализированных типов фильтров:



| Класс                                                  | Описание                                                                                                                                                                                                                                                                                               |
|--------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**ксаурце**](csource.md)                             | Базовый класс для фильтров источника. Этот класс предназначен для создания источников push-уведомлений. Он не подходит для источников извлечения, таких как средства чтения файлов. Чтобы создать выходные сигналы для этого класса, используйте класс [**ксаурцестреам**](csourcestream.md) .                                                                   |
| [**ктрансформфилтер**](ctransformfilter.md)           | Базовый класс для фильтров преобразований. Этот класс выполняет копирование данных. ПИН-коды для этого класса: [**ктрансформинпутпин**](ctransforminputpin.md) и [**ктрансформаутпутпин**](ctransformoutputpin.md).                                                                                            |
| [**ктрансинплацефилтер**](ctransinplacefilter.md)     | Базовый класс для фильтров преобразования, которые не копируют данные. Этот класс выполняет обработку данных непосредственно на входных данных, прежде чем передавать их нисходящим. ПИН-коды для этого класса: [**ктрансинплацеинпутпин**](ctransinplaceinputpin.md) и [**ктрансинплацеаутпутпин**](ctransinplaceoutputpin.md). |
| [**квидеотрансформфилтер**](cvideotransformfilter.md) | Базовый класс для фильтров преобразования видео. Этот класс является производным от **ктрансформфилтер** и добавляет поддержку контроля качества.                                                                                                                                                                                |
| [**кбасерендерер**](cbaserenderer.md)                 | Базовый класс для фильтров модуля подготовки отчетов. Входной ПИН-код для этого класса — [**крендереринпутпин**](crendererinputpin.md).                                                                                                                                                                                          |
| [**кбасевидеорендерер**](cbasevideorenderer.md)       | Базовый класс для модулей подготовки видео. Этот класс является производным от **кбасерендерер**.                                                                                                                                                                                                                                |



 

Чтобы использовать эти классы, необходимо создать собственный класс и написать код для поддержки функций, характерных для вашего фильтра. Чем более специализированный базовый класс, тем меньше кода нужно будет писать в производном классе.

**Вспомогательные объекты**

Следующие классы реализуют вспомогательные объекты, используемые фильтрами и ПИН-коды. Большинство из этих классов можно использовать без наследования от них новых классов:



| Класс                                              | Описание                                                                                                                                                        |
|----------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**кпуллпин**](cpullpin.md)                       | Вспомогательный объект для входных закрепления фильтров анализатора. Поддерживает соединения [**иасинкреадер**](/windows/desktop/api/Strmif/nn-strmif-iasyncreader) с источниками извлечения.                                       |
| [**каутпуткуеуе**](coutputqueue.md)               | Вспомогательный объект для выходных закрепления, которые ставят образцы в очередь для доставки в рабочем потоке.                                                                                  |
| [**ксаурцесикинг**](csourceseeking.md)           | Объект справки для реализации поиска в фильтре источника с точно одним выходным ПИН-кодом. (Этот класс не предназначен для фильтров с несколькими ПИН-контактами, такими как анализаторы.) |
| [**ценумпинс**](cenumpins.md)                     | Объект Enumerator для перечисления ПИН-кодов в фильтре. Реализует интерфейс [**иенумпинс**](/windows/desktop/api/Strmif/nn-strmif-ienumpins) .                                                       |
| [**ценуммедиатипес**](cenummediatypes.md)         | Объект перечислителя для перечисления предпочтительных типов мультимедиа на ПИН-коде. Реализует интерфейс [**иенуммедиатипес**](/windows/desktop/api/Strmif/nn-strmif-ienummediatypes) .                             |
| [**кмемаллокатор**](cmemallocator.md)             | Объект распределителя памяти. Реализует интерфейс [**имемаллокатор**](/windows/desktop/api/Strmif/nn-strmif-imemallocator) .                                                                          |
| [**кмедиасампле**](cmediasample.md)               | Пример объекта мультимедиа. Реализует интерфейс [**IMediaSample2**](/windows/desktop/api/Strmif/nn-strmif-imediasample2) .                                                                              |
| [**кбасереференцеклокк**](cbasereferenceclock.md) | Базовый класс для ссылочных синхронизирующих импульсов. Реализует интерфейс [**иреференцеклокк**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclock) .                                                              |
| [**кмедиатипе**](cmediatype.md)                   | Вспомогательный объект для манипулирования структурами [**\_ \_ типов мультимедиа AM**](/windows/win32/api/strmif/ns-strmif-am_media_type) .                                                                                |



 

 

 



