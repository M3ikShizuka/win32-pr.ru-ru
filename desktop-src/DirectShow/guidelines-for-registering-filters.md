---
description: Рекомендации по регистрации фильтров
ms.assetid: 05945937-9e01-4930-ae95-1931a711b55e
title: Рекомендации по регистрации фильтров
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5ed616d90c17d232995994d8ceccfdc72d022d56
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104139251"
---
# <a name="guidelines-for-registering-filters"></a>Рекомендации по регистрации фильтров

Данные реестра фильтра определяют, как диспетчер Graph Manager работает во время [интеллектуального соединения](intelligent-connect.md). Поэтому он влияет на каждое приложение, написанное для DirectShow, а не только на те, которые будут использовать фильтр. Следует убедиться, что фильтр работает правильно, следуя этим рекомендациям.

1.  Нужны ли вам данные фильтра в реестре? Для многих пользовательских фильтров нет причин сделать фильтр видимым для модуля сопоставления фильтров или перечислителя системных устройств. Пока вы регистрируете библиотеку DLL, приложение может создать фильтр с помощью **CoCreateInstance**. В этом случае просто опустите структуру [**\_ фильтра амовиесетуп**](amoviesetup-filter.md) из шаблона фабрики. (Один недостаток заключается в том, что фильтр не будет отображаться в Графедит. Чтобы обойти это, можно создать закрытую категорию "тестирование" с помощью метода [**IFilterMapper2:: креатекатегори**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-createcategory) . Это следует делать только для отладочных сборок.)
2.  Выберите правильную категорию фильтра. Категория "фильтры DirectShow по умолчанию" предназначена для фильтров общего назначения. При необходимости Зарегистрируйте фильтр в более определенной категории. Когда [**IFilterMapper2**](/windows/desktop/api/Strmif/nn-strmif-ifiltermapper2) ищет фильтр, он пропускает любую категорию, у которой недоступность \_ \_ не \_ используется или меньше. Категории, не предназначенные для нормального воспроизведения, имеют низкий уровень.
3.  Не указывайте \_ параметр MediaType None, медиасубтипе \_ None или GUID \_ null в сведениях о [**амовиесетуп \_ MEDIATYPE**](amoviesetup-mediatype.md) для ПИН-кода. **IFilterMapper2** обрабатывает их как подстановочные знаки, что может замедлять процесс построения графа.
4.  Выберите наименьшее возможное значение. Ниже приведены некоторые рекомендации.

    | Тип фильтра                                                                                       | Рекомендуемый успешный                                                                                   |
    |------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
    | Модуль подготовки отчетов по умолчанию                                                                                     | у вас нет \_ предпочтений. Однако для стандартных типов носителей пользовательский модуль подготовки отчетов никогда не должен быть значением по умолчанию. |
    | Модуль подготовки отчетов не по умолчанию                                                                                 | \_ \_ Недоступность не \_ используется или \_ маловероятно                                                              |
    | Мультиплексирован                                                                                                  | \_ \_ не \_ использовать                                                                                 |
    | Показан                                                                                              | неуспешный \_ режим                                                                                       |
    | Спиттер, средство синтаксического анализа                                                                                      | С \_ нормальным или с низким уровнем                                                                              |
    | Фильтр специального назначения; любой фильтр, созданный непосредственно приложением                       | \_ \_ не \_ использовать                                                                                 |
    | Сбор                                                                                              | \_ \_ не \_ использовать                                                                                 |
    | "Резервный" фильтр; Например, [фильтр преобразователя цветового пространства](color-space-converter-filter.md) | \_маловероятно                                                                                     |

    

     

    Если вы указываете, что не стоит использовать фильтр \_ \_ \_ , подумайте, нужно ли регистрировать эти сведения в первую очередь. (См. элемент 1.)

5.  Не регистрируйте фильтр в категории "фильтры DirectShow", которая принимает 24-битный RGB. Фильтр повлияет на фильтр преобразователя цветового пространства.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Как зарегистрировать фильтры DirectShow](how-to-register-directshow-filters.md)
</dt> </dl>

 

 



