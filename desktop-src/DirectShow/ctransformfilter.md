---
description: Класс Ктрансформфилтер является базовым классом для реализации фильтров преобразований.
ms.assetid: 99db8252-a8db-4995-b4be-a6cf944be869
title: Класс Ктрансформфилтер (Трансфрм. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CTransformFilter
api_type:
- COM
api_location:
- Strmbase.lib
- Strmbase.dll
- Strmbasd.lib
- Strmbasd.dll
ms.openlocfilehash: d24c305b28641fcee366b4e906b87008decac014
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "105657098"
---
# <a name="ctransformfilter-class"></a>Класс Ктрансформфилтер

![Иерархия классов ктрансформфилтер](images/tfrm03.png)

`CTransformFilter`Класс является базовым классом для реализации фильтров преобразований. Этот класс предназначен для реализации фильтра преобразования с одним входным закреплением и одним выходным закреплением. Для входного и выходного ПИН-кода используются отдельные распределителя. Чтобы создать фильтр, обрабатывающий данные на месте, используйте класс [**ктрансинплацефилтер**](ctransinplacefilter.md) .

Этот фильтр использует класс [**ктрансформинпутпин**](ctransforminputpin.md) для входного ПИН-кода и класс [**ктрансформаутпутпин**](ctransformoutputpin.md) для выходного ПИН-кода. Как правило, переопределение этих классов закрепления не требуется. Большинство методов закрепления вызывают соответствующие методы `CTransformFilter` класса, поэтому при необходимости можно переопределить методы фильтрации. Фильтр создает оба ПИН-кода в методе [**ктрансформфилтер:: жетпин**](ctransformfilter-getpin.md) . Если вы переопределяете классы закрепления, необходимо переопределить **жетпин** , чтобы создать пользовательские ПИН-коды.

Чтобы использовать этот класс, сделайте новый класс производным от `CTransformFilter` и реализуйте следующие методы:

-   [**Ктрансформфилтер:: Чеккинпуттипе**](ctransformfilter-checkinputtype.md)
-   [**Ктрансформфилтер:: Чекктрансформ**](ctransformfilter-checktransform.md)
-   [**Ктрансформфилтер::D ЕЦидебуфферсизе**](ctransformfilter-decidebuffersize.md)
-   [**Ктрансформфилтер:: Жетмедиатипе**](ctransformfilter-getmediatype.md)
-   [**Ктрансформфилтер:: Transform**](ctransformfilter-transform.md)

Также может потребоваться переопределить другие методы, в зависимости от требований фильтра.

## <a name="media-types"></a>Типы носителей

Входной ПИН-код этого фильтра не предлагает никаких типов мультимедиа; Он использует вышестоящий фильтр для предложения типов мультимедиа для подключения. Причина такого проекта в том, что в большинстве случаев вышестоящий фильтр может предоставить дополнительные сведения о формате. Например, в видеоформатах вышестоящий фильтр знает размеры видео и частоту кадров, в то время как фильтр преобразований не может определить эти сведения. Если вы хотите изменить это поведение, переопределите метод [**жетмедиатипе**](ctransformfilter-getmediatype.md) входного контакта. Когда вышестоящий фильтр предлагает тип мультимедиа, входной ПИН-код вызывает метод [**чеккинпуттипе**](ctransformfilter-checkinputtype.md) фильтра (чисто виртуальный).

Пока входной ПИН-код не будет подключен, он отклоняет все подключения и не возвращает никаких предпочтительных типов носителей. После подключения входного ПИН-кода возвращает список предпочтительных типов, вызывая метод [**жетмедиатипе**](ctransformfilter-getmediatype.md) фильтра. Он проверяет типы вывода для соединения с помощью метода [**чекктрансформ**](ctransformfilter-checktransform.md) фильтра. (Оба метода являются чисто виртуальными.) Как правило, входной тип будет частично определять допустимые типы выходных данных.

В зависимости от фильтра может потребоваться зарегистрировать некоторые типы носителей, поддерживаемые фильтром, чтобы объект [сопоставителя фильтров](filter-mapper.md) мог нахождение фильтра. Дополнительные сведения см. [в разделе Регистрация фильтров DirectShow](how-to-register-directshow-filters.md).

## <a name="streaming"></a>Потоковая передача

Этот класс не ставит в очередь выходные данные. Каждый выходной пример доставляется внутри метода [**имеминпутпин:: Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive) . Метод **Receive** вызывает метод [**преобразования**](ctransformfilter-transform.md) фильтра (также чисто виртуальный) для обработки данных.

Дополнительные сведения об использовании этого класса см. в разделе [написание фильтров преобразования](writing-transform-filters.md).



| Защищенные переменные членов                                                | Описание                                                                                             |
|---------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|
| [**m \_ беосделиверед**](ctransformfilter-m-beosdelivered.md)              | Флаг, указывающий, отправил ли фильтр уведомление об окончании потока.                          |
| [**m \_ бсамплескиппед**](ctransformfilter-m-bsampleskipped.md)            | Флаг, указывающий, был ли удален последний пример.                                         |
| [**m \_ бкуалитичанжед**](ctransformfilter-m-bqualitychanged.md)          | Флаг, указывающий, изменилось ли качество.                                                    |
| [**m \_ ксфилтер**](ctransformfilter-m-csfilter.md)                        | Критическая секция, защищающая состояние фильтра.                                                        |
| [**m \_ ксрецеиве**](ctransformfilter-m-csreceive.md)                      | Критическая секция, защищающая состояние потоковой передачи.                                                     |
| [**m \_ пинпут**](ctransformfilter-m-pinput.md)                            | Указатель на входной ПИН-код.                                                                               |
| [**m \_ паутпут**](ctransformfilter-m-poutput.md)                          | Указатель на выходной ПИН-код.                                                                              |
| Открытые методы                                                            | Описание                                                                                             |
| [**ктрансформфилтер**](ctransformfilter-ctransformfilter.md)             | Метод конструктора.                                                                                     |
| [**~ Ктрансформфилтер**](ctransformfilter--ctransformfilter.md)          | Метод деструктора.                                                                                      |
| [**жетпинкаунт**](ctransformfilter-getpincount.md)                       | Возвращает количество ПИН-кодов в фильтре. Виртуализаци.                                                    |
| [**жетпин**](ctransformfilter-getpin.md)                                 | Извлекает ПИН-код. Виртуализаци.                                                                               |
| [**Преобразование**](ctransformfilter-transform.md)                           | Преобразует входной пример для создания примера вывода. Виртуализаци.                                        |
| [**стартстреаминг**](ctransformfilter-startstreaming.md)                 | Вызывается, когда фильтр переключается в состояние паузы. Виртуализаци.                                           |
| [**стопстреаминг**](ctransformfilter-stopstreaming.md)                   | Вызывается, когда фильтр переключается в состояние Stopped. Виртуализаци.                                          |
| [**алтеркуалити**](ctransformfilter-alterquality.md)                     | Уведомляет фильтр о запросе изменения качества. Виртуализаци.                                        |
| [**сетмедиатипе**](ctransformfilter-setmediatype.md)                     | Вызывается, когда тип носителя задается на одном из ПИН-кодов фильтра. Виртуализаци.                                 |
| [**чеккконнект**](ctransformfilter-checkconnect.md)                     | Определяет, подходит ли подключение по ПИН-коду. Виртуализаци.                                               |
| [**бреакконнект**](ctransformfilter-breakconnect.md)                     | Освобождает ПИН-код из соединения. Виртуализаци.                                                              |
| [**комплетеконнект**](ctransformfilter-completeconnect.md)               | Завершает подключение ПИН-кода. Виртуализаци.                                                                    |
| [**Получать**](ctransformfilter-receive.md)                               | Получает пример носителя, обрабатывает его и доставляет образец вывода для подчиненного фильтра. Виртуализаци. |
| [**инитиализеаутпутсампле**](ctransformfilter-initializeoutputsample.md) | Извлекает новый выходной пример и инициализирует его.                                                       |
| [**EndOfStream**](ctransformfilter-endofstream.md)                       | Уведомляет фильтр о том, что из входного ПИН-кода не ожидается дополнительных данных. Виртуализаци.                    |
| [**бегинфлуш**](ctransformfilter-beginflush.md)                         | Начинает операцию очистки. Виртуализаци.                                                                      |
| [**ендфлуш**](ctransformfilter-endflush.md)                             | Завершает операцию очистки. Виртуализаци.                                                                        |
| [**невсегмент**](ctransformfilter-newsegment.md)                         | Уведомляет фильтр о том, что примеры носителей, полученные после этого вызова, группируются как сегмент. Виртуализаци.      |
| Чистые виртуальные методы                                                      | Описание                                                                                             |
| [**чеккинпуттипе**](ctransformfilter-checkinputtype.md)                 | Проверяет, допустим ли указанный тип носителя для входных данных.                                          |
| [**чекктрансформ**](ctransformfilter-checktransform.md)                 | Проверяет, совместим ли входной тип носителя с выходным типом носителя.                             |
| [**деЦидебуфферсизе**](ctransformfilter-decidebuffersize.md)             | Задает требования к буферу выходного контакта.                                                              |
| [**жетмедиатипе**](ctransformfilter-getmediatype.md)                     | Извлекает предпочтительный тип мультимедиа для выходного контакта.                                                    |
| Методы Имедиафилтер                                                      | Описание                                                                                             |
| [**Stop**](ctransformfilter-stop.md)                                     | Останавливает фильтр.                                                                                       |
| [**Пауза**](ctransformfilter-pause.md)                                   | Приостанавливает фильтр.                                                                                      |
| Методы Ибасефилтер                                                       | Описание                                                                                             |
| [**финдпин**](ctransformfilter-findpin.md)                               | Извлекает ПИН-код с указанным идентификатором.                                                        |



 

## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Header<br/>  | <dl> <dt>Трансфрм. h (включение Streams. h)</dt> </dl>                                                                                  |
| Библиотека<br/> | <dl> <dt>Стрмбасе. lib (розничные сборки); </dt> <dt>Стрмбасд. lib (отладочные сборки)</dt> </dl> |



 

 




