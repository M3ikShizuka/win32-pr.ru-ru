---
description: Класс Кбасереференцеклокк реализует ссылочное время.
ms.assetid: 898e1968-a9ab-4bb9-abf0-943bfae502e2
title: Класс Кбасереференцеклокк (Рефклокк. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CBaseReferenceClock
api_type:
- COM
api_location:
- Strmbase.lib
- Strmbase.dll
- Strmbasd.lib
- Strmbasd.dll
ms.openlocfilehash: 1da55a57faac201a2dbf0ef4d8a9774157d9215d
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "105668755"
---
# <a name="cbasereferenceclock-class"></a>Класс Кбасереференцеклокк

![Иерархия классов кбасереференцеклокк](images/rclock01.png)

`CBaseReferenceClock`Класс реализует ссылочное время.



| Защищенные переменные членов                                                         | Описание                                                                            |
|------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
| [**m \_ псчедуле**](cbasereferenceclock-m-pschedule.md)                            | Объект [**камсчедуле**](camschedule.md) , который обрабатывает задачи планирования для часов. |
| Защищенные методы                                                                  | Описание                                                                            |
| [**~ Кбасереференцеклокк**](cbasereferenceclock--cbasereferenceclock.md)           | Метод деструктора.                                                                     |
| Открытые методы                                                                     | Описание                                                                            |
| [**кбасереференцеклокк**](cbasereferenceclock-cbasereferenceclock.md)             | Метод конструктора.                                                                    |
| [**жетприватетиме**](cbasereferenceclock-getprivatetime.md)                       | Извлекает реальное время из часов.                                                |
| [**сеттимеделта**](cbasereferenceclock-settimedelta.md)                           | Регулирует время внутренних часов.                                                       |
| [**Задание по расписанию**](cbasereferenceclock-getschedule.md)                             | Извлекает указатель на объект расписания часов.                                  |
| [**тригжерсреад**](cbasereferenceclock-triggerthread.md)                         | Пробуждает рабочий поток, который обрабатывает планирование.                                    |
| Методы Иреференцеклокк                                                            | Описание                                                                            |
| [**GetTime**](cbasereferenceclock-gettime.md)                                     | Извлекает текущее время ссылки.                                                  |
| [**адвисетиме**](cbasereferenceclock-advisetime.md)                               | Создает одноразовый запрос Advise.                                                     |
| [**адвисепериодик**](cbasereferenceclock-adviseperiodic.md)                       | Создает периодические запросы рекомендаций.                                                     |
| [**Unadvise**](cbasereferenceclock-unadvise.md)                                   | Удаляет ожидающий запрос рекомендаций.                                                      |
| Методы Иреференцеклокктимерконтрол                                                | Описание                                                                            |
| [**жетдефаулттимерресолутион**](cbasereferenceclock-getdefaulttimerresolution.md) | Возвращает текущее разрешение таймера ссылочного времени.                         |
| [**сетдефаулттимерресолутион**](cbasereferenceclock-setdefaulttimerresolution.md) | Задает разрешение таймера ссылочного времени.                                    |
| Вспомогательные функции                                                                   | Описание                                                                            |
| [**конверттомиллисекондс**](converttomilliseconds.md)                             | Преобразует время ссылки в миллисекунды.                                             |



 

## <a name="remarks"></a>Комментарии

Этот класс реализует ссылочный таймер, который поддерживает интерфейсы [**иреференцеклокк**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclock) и [**иреференцеклокктимерконтрол**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclocktimercontrol) . Если фильтр может предоставить эталонный период для графа фильтра, например путем доступа к устройству, он может использовать этот класс для реализации часов.

`CBaseReferenceClock`Объект поддерживает два различных значения времени:

-   На внутреннем уровне метод [**кбасереференцеклокк:: жетприватетиме**](cbasereferenceclock-getprivatetime.md) возвращает фактическое время, сохраненное в часах.
-   Во внешнем метод [**кбасереференцеклокк::**](cbasereferenceclock-gettime.md) IsReference возвращает время ссылки для графа фильтра.

Это допустимо, чтобы внутренние часы выполнялись в обратном направлении в короткие периоды. Например, если часы переносятся вперед, фильтр может изменить его обратно. (См. [**кбасереференцеклокк:: сеттимеделта**](cbasereferenceclock-settimedelta.md).) Метод  **жетприватетиме** использует значения времени, сообщаемые параметром Однако время ссылки монотонно возрастает; Иными словами, он никогда не выполняется назад. Таким образом, если внутренняя тактовая частота выполняется назад, во **время ожидания** происходит создание отчета о старом времени до тех пор, пока внутреннее время не будет перехватываться.

Например, два метода могут возвращать следующие последовательности:

``` syntax
GetPrivateTime: 105, 106, 103, 104, 105, 106, 107, 108
GetTime:        105, 106, 106, 106, 106, 106, 107, 108
```

В третьем такте времени внутренняя шкала времени переходит в обратное значение в 103. Метод метода **time** до тех пор сообщает 106, пока не будут перехватываться внутренние часы.

По умолчанию **жетприватетиме** возвращает системное время с помощью вызова функции **тимежеттиме** . Фильтр, предоставляющий ссылочное время с внешнего устройства, может выполнять одно из следующих действий.

-   Переопределите **жетприватетиме** , чтобы вернуть время с устройства.
-   Отслеживайте расхождения между временем устройства и системным временем и вызовите **сеттимеделта** для внесения исправлений.

Этот класс использует объект [**камсчедуле**](camschedule.md) для обработки планирования запросов рекомендаций. Дополнительные сведения см. в документации по классу **камсчедуле** .

## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Header<br/>  | <dl> <dt>Рефклокк. h (включение Streams. h)</dt> </dl>                                                                                  |
| Библиотека<br/> | <dl> <dt>Стрмбасе. lib (розничные сборки); </dt> <dt>Стрмбасд. lib (отладочные сборки)</dt> </dl> |



 

 




