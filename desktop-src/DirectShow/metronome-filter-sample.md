---
description: Образец фильтра метрономе
ms.assetid: bb279898-875a-4ce4-ac69-6c58f640fbbd
title: Образец фильтра метрономе
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9ea1b321dd2602829697862e2716c9017573a44b6162b355e78e586e14d85003
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119072988"
---
# <a name="metronome-filter-sample"></a>Образец фильтра метрономе

## <a name="description"></a>Описание

В этом образце фильтра показано, как реализовать ссылочное время. Фильтр использует входные микрофона по умолчанию для прослушивания пиковых всплесков (таких как щелчки, руки клапс или каугхс), которые используются для определения тактовой частоты.

## <a name="usage"></a>Использование

создайте пример проекта и скопируйте файл DLL фильтра (Metronom.ax) в системный каталог Windows. Запустите файл метроном. reg, чтобы зарегистрировать библиотеку DLL.

Чтобы использовать фильтр, выполните следующие действия.

1.  Создание графа фильтра в Графедит, который визуализирует видео-поток.
2.  Удалите все обработанные звуковые потоки.
3.  Добавьте фильтр Метрономе в граф. он отображается в категории DirectShow фильтры.
4.  Запустите граф. Воспроизведение видео начнется с нормальной скоростью.
5.  Рукоплескания свои руки или используйте метрономе, чтобы установить новую скорость.

## <a name="programming-notes"></a>Заметки о программировании

Этот фильтр работает только для видео. Модуль подготовки звука не поддерживает синхронизацию с незначительной разностью часов.

Если вы рукоплескания 92 раз в минуту (каждые ~ 652 МС), видео будет воспроизводиться по нормальной ставке. Это значение по умолчанию можно изменить путем изменения значения константы `BPM` в метроном. cpp.

Если вы останавливаете аплодисменты в течение определенного периода времени, а затем снова запускаете аплодисменты, необходимо начать заново с примерно такой же скоростью, иначе фильтр пропустит его. Кроме того, скорость воспроизведения видео ограничена скоростью ЦП. Если превышено ограничение на период времени, то фильтр перестанет отвечать на запросы на изменение скорости. В этом случае закройте граф и перезапустите.

При реализации собственных часов наиболее важными правилами является то, что ссылки на часы не должны идти назад. То есть они никогда не должны сообщать значение времени, меньшее, чем предыдущее значение времени.

## <a name="downloading-the-sample"></a>Загрузка образца

чтобы скачать примеры пакета SDK для DirectShow, установите последнюю версию [Windows SDK](https://msdn.microsoft.com/windowsvista/bb980924.aspx).

этот пример устанавливается по следующему пути: *\[ \] корневые примеры SDK* \\ \\ мультимедиа \\ DirectShow \\ фильтры \\ метрономе.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**Класс Кбасереференцеклокк**](cbasereferenceclock.md)
</dt> <dt>

[DirectShow Регистрируют](directshow-samples.md)
</dt> </dl>

 

 



