---
description: Работа с целевыми объектами рендеринга Direct3D
ms.assetid: 271b919c-421b-4484-8e60-afbf3cbdca44
title: Работа с целевыми объектами рендеринга Direct3D
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 19f7bacf36402b071d60989e225cdcd9533500494a0593bcf9753ddc06bb93ce
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118650344"
---
# <a name="working-with-direct3d-render-targets"></a>Работа с целевыми объектами рендеринга Direct3D

Несколько подтипов мультимедиа для целевых объектов прорисовки Direct3D определяются для использования с VMR-7 и VMR-9. Когда вышестоящий фильтр предлагает соединение с одним из этих подтипов, он указывает VMR о том, что отрисовка должна выполняться на целевом объекте прорисовки Direct3D. Для VMR-7 это будет целевой объект прорисовки Direct3D DirectX 7, а для VMR-9 это будет целевой объект прорисовки Direct3D DirectX 9. Если VMR находится в режиме смешения, то поверхность также будет текстурой Direct3D. Если VMR не находится в режиме смешения, поверхность будет обычной. Форматы пикселей ARGB поддерживаются, только если VMR находится в режиме смешения. Ниже приведены подтипы целевого объекта рендеринга.



| VMR-7                                | VMR-9                                |
|--------------------------------------|--------------------------------------|
| МЕДИАСУБТИПЕ \_ RGB32 \_ D3D \_ DX7 \_ RT    | МЕДИАСУБТИПЕ \_ RGB32 \_ D3D \_ DX9 \_ RT    |
| МЕДИАСУБТИПЕ \_ RGB16 \_ D3D \_ DX7 \_ RT    | МЕДИАСУБТИПЕ \_ RGB16 \_ D3D \_ DX9 \_ RT    |
| МЕДИАСУБТИПЕ \_ ARGB32 \_ D3D \_ DX7 \_ RT   | МЕДИАСУБТИПЕ \_ ARGB32 \_ D3D \_ DX9 \_ RT   |
| МЕДИАСУБТИПЕ \_ ARGB4444 \_ D3D \_ DX7 \_ RT | МЕДИАСУБТИПЕ \_ ARGB4444 \_ D3D \_ DX9 \_ RT |
| МЕДИАСУБТИПЕ \_ ARGB1555 \_ D3D \_ DX7 \_ RT | МЕДИАСУБТИПЕ \_ ARGB1555 \_ D3D \_ DX9 \_ RT |



 

Эти типы определены в файле заголовков UUIDs. h. \_Типы носителей медиасубтипе RGB32 — это формат RGBx888, а медиасубтипе \_ RGB16 — формат RGB565. Дополнительные сведения об этих форматах пикселей см. в документации DirectX Graphics.

**Запрос незаблокированной поверхности**

Блокировка и разблокировка поверхностей DirectDraw — это ресурсоемкие операции. При использовании подтипов целевого носителя для визуализации Direct3D для вышестоящего фильтра необходимо разблокировать поверхности, чтобы на них можно было работать с графическим оборудованием. Чтобы избежать ненужной операции блокировки, VMR поддерживает новый флаг в методе [**имемаллокатор::**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-getbuffer) - \_ гбф, \_ который указывает VMR не блокировать поверхность DirectDraw перед передачей образца в вышестоящий фильтр. При использовании этого флага вызовы [**имедиасампле::-Point**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getpointer) завершатся неудачей из-за отсутствия заблокированного указателя. Чтобы получить доступ к поверхности DirectDraw, фильтр должен вызвать **QueryInterface** на возвращенном объекте [**имедиасампле**](/windows/desktop/api/Strmif/nn-strmif-imediasample) и запросить интерфейс [**ивмрсурфаце**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurface) . Очевидно, что вышестоящий фильтр должен гарантировать, что поверхность не будет заблокирована при освобождении образца назад в свободный список.

 

 



