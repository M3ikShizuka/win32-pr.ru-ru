---
description: Зафрагментировать рамку афиши
ms.assetid: 0727a1ed-1bc7-49fc-a288-00283e637a71
title: Зафрагментировать рамку афиши
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c2cf06a10d74bb6c81622ac9bad7a1b770f5dc12
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104495774"
---
# <a name="grabbing-a-poster-frame"></a>Зафрагментировать рамку афиши

\[Этот API не поддерживается и может быть изменен или недоступен в будущем.\]

В этой статье описывается, как отобразить кадр афиши из цифрового файла мультимедиа с помощью объекта [детектора мультимедиа (медиадет)](media-detector--mediadet.md) , поставляемого со [службами редактирования DirectShow](directshow-editing-services.md).

Средство обнаружения мультимедиа — это вспомогательный объект, который может получать сведения о форматировании из исходного файла мультимедиа. Он также может захватить растровое изображение из видеопотока в исходном файле. Предполагая, что файл доступен для поиска, можно получить образ из любой точки в файле. Возвращаемое изображение всегда находится в 24-разрядном формате RGB.

Средство обнаружения мультимедиа не является фильтром, и приложению не требуется использовать диспетчер графов фильтров или создать граф фильтра. На внутреннем уровне средство обнаружения мультимедиа создает граф фильтра, содержащий [**образец фильтра захвата**](sample-grabber-filter.md). Чтобы получить точечный рисунок, средство обнаружения мультимедиа ищет и приостанавливает граф фильтра, а затем извлекает точечный рисунок из образца фильтра захвата. Приложение взаимодействует с детектором мультимедиа через интерфейс [**имедиадет**](imediadet.md) . Средство обнаружения мультимедийных данных — хороший пример инкапсуляции графа фильтра внутри вспомогательного объекта для экранирования приложений из сведений, относящихся к графу.

Средство обнаружения мультимедиа работает в двух режимах. Когда вы впервые создаете его, средство обнаружения мультимедиа находится в режиме сбора информации. Можно указать имя файла мультимедиа и получить сведения о каждом из потоков в файле, например тип формата, частоту кадров или длительность. Если файл содержит видеопоток, можно переключить средство обнаружения мультимедиа в режим "захват растрового изображения" и получить точечные рисунки из источника. Однако после этого вы не сможете переключить средство обнаружения мультимедиа обратно в исходный режим. Он постоянно вкладывается в этот поток видео. Для работы с другим потоком или другим файлом необходимо создать новый экземпляр средства обнаружения мультимедиа.

> [!Note]  
> В примерах кода в этом руководстве используется класс ATL **CComPtr** , который автоматически управляет счетчиками ссылок. Если вы предпочитаете использовать указатели необработанных интерфейсов, не забудьте освободить каждый интерфейс после завершения работы с ним. Кроме того, для краткости примеры кода пропускают значительную часть проверки ошибок, которую должно выполнить приложение. В рабочем коде всегда проверяйте значения **HRESULT** .

 

Этот учебник содержит следующие действия.

-   [Шаг 1. Создание платформы Windows](step-1--create-the-windows-framework.md)
-   [Шаг 2. Добавление команды меню для захвата афиши](step-2--add-a-menu-command-to-grab-a-poster-frame.md)
-   [Шаг 3. Реализация функции Frame-Grabbing](step-3--implement-the-frame-grabbing-function.md)
-   [Шаг 4. Рисование точечного рисунка в клиентской области](step-4--draw-the-bitmap-on-the-client-area.md)

## <a name="related-topics"></a>См. также

<dl> <dt>

[Использование служб редактирования DirectShow](using-directshow-editing-services.md)
</dt> </dl>

 

 



