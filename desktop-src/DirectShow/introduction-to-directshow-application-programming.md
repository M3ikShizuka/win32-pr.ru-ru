---
description: общие сведения о программировании приложений DirectShow
ms.assetid: 21a72efa-95df-4754-8304-ad56965a914d
title: общие сведения о программировании приложений DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a448d49939e69b7c8a3b244b27a91a93eaf941eebf1960b7b2a53e4ad9137341
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119823522"
---
# <a name="introduction-to-directshow-application-programming"></a>общие сведения о программировании приложений DirectShow

В этой статье рассказывается о базовой терминологии и концепциях, используемых в DirectShow. после прочтения этого раздела вы будете готовы к написанию первого DirectShow приложения.

**Фильтры и графы фильтров**

стандартный блок DirectShow — это программный компонент, называемый *фильтром*. Фильтр — это программный компонент, который выполняет некоторую операцию в потоке мультимедиа. например, фильтры DirectShow могут

-   чтение файлов
-   получение видео с устройства видеозаписи
-   декодирование различных форматов потоков, таких как видео MPEG-1
-   Передача данных в графический или звуковой адаптер

Фильтры получают входные данные и выдают выходные данные. Например, если фильтр декодирует видео MPEG-1, входные данные являются потоком в кодировке MPEG, а выходные данные — серией несжатых видеокадров.

в DirectShow приложение выполняет любую задачу, подключив цепочки фильтров друг к другу, чтобы выход из одного фильтра стал входным для другого. Набор подключенных фильтров называется *графом фильтра*. Например, на следующей диаграмме показан граф фильтра для воспроизведения AVI-файла.

![Фильтрация графа для воспроизведения файла AVI](images/avi-filter-graph.png)

Фильтр источника файлов считывает AVI с жесткого диска. Фильтр-разделитель AVI анализирует файл в два потока: сжатый поток видео и аудиопоток. Фильтр распаковки AVI декодирует кадры видео. Фильтр модуля обработки видео выводит кадры на экран с помощью DirectDraw или GDI. Фильтр устройства DirectSound по умолчанию воспроизводит аудиопоток, используя DirectSound.

Приложению не требуется управлять всеми этими потоками данных. вместо этого фильтры контролируются компонентом высокого уровня, который называется Filter Graph Manager. Приложение выполняет высокоуровневые вызовы API, такие как "Run" (для перемещения данных через граф) или "останавливаться" (для завершения потока данных). Если требуется больший контроль над операциями потока, можно получить доступ к фильтрам напрямую через интерфейсы COM. фильтр Graph Manager также передает в приложение уведомления о событиях.

фильтр Graph Manager также выполняет другие задачи: он предоставляет приложениям методы для создания графа фильтра, подключаясь к ним. (DirectShow также предоставляет различные вспомогательные объекты, упрощающие этот процесс. Они тщательно описаны в документации.)

**написание приложения DirectShow**

в общих чертах есть три задачи, которые должны выполняться любым приложением DirectShow. Они показаны на следующей схеме.

![Типичное приложение DirectShow](images/fgm.png)

1.  приложение создает экземпляр фильтра Graph Manager.
2.  приложение использует фильтр Graph Manager для создания графа фильтра. Точный набор фильтров в графе будет зависеть от приложения.
3.  приложение использует фильтр Graph Manager для управления графом фильтра и потоковых данных с помощью фильтров. в ходе этого процесса приложение также будет реагировать на события из фильтра Graph Manager.

после завершения обработки приложение выпустит фильтр Graph Manager и все фильтры.

DirectShow основан на модели COM; фильтр Graph Manager, а фильтры — все COM-объекты. Перед началом программирования DirectShow необходимо иметь общее представление о программировании клиента COM. Доступно множество книг по программированию COM.

чтобы приступить к работе с DirectShow, прочитайте статью [как воспроизвести файл](how-to-play-a-file.md), который представляет собой простое консольное приложение для воспроизведения видеофайла. в разделе [DirectShow](about-directshow.md) описывается архитектура DirectShow более подробно, а в разделе, посвященном [DirectShow](using-directshow.md) , рассматриваются основные сценарии, поддерживаемые DirectShow, такие как захват, редактирование видео, воспроизведение DVD-дисков и телевидение.

 

 



