---
description: необязательный Потоки
ms.assetid: 94477a71-c267-4602-893b-1bd1256b34ef
title: необязательный Потоки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b7d7c30f783a8c13b00020c2dac62cd11e2a79d6f2ea66af01f715c3cb389853
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119830974"
---
# <a name="optional-streams"></a>необязательный Потоки

DMO может обозначать некоторые из его выходных потоков как необязательные. Необязательный поток создает данные, которые приложение может отбросить, полностью или в случайном виде. Например, необязательный поток может содержать дополнительные сведения о первичном потоке.

Чтобы запросить, является ли поток необязательным, вызовите метод [**имедиаобжект:: жетаутпутстреаминфо**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputstreaminfo) и проверьте параметр *пдвфлагс* . необязательные потоки возвращают \_ либо \_ флаг DMO output стреамф, \_ либо \_ \_ \_ необязательный флаг DMO output стреамф. Эти флаги означают почти то же самое; одно небольшое различие между ними будет объяснено чуть ниже.

если поток является необязательным, клиент может указать DMO отменить данные из этого потока при обработке выходных данных. Для этого вызовите метод [**имедиаобжект::P роцессаутпут**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-processoutput) и установите для выходного буфера **значение NULL** для каждого потока, который нужно отменить. (выходной буфер указывается в элементе **pBuffer** [**\_ \_ \_ буфера выходных данных DMO**](/previous-versions/windows/desktop/api/Mediaobj/ns-mediaobj-dmo_output_data_buffer).) кроме того, в \_ \_ параметре dwFlags задайте DMO для параметра выход процесса значение \_ отмена, \_ если \_ \_ флаг буфера отсутствует. 

для каждого потока, в котором указатель *pBuffer* имеет **значение NULL**, DMO попытается отменить данные. если поток является необязательным, DMO гарантирует отмену данных. если поток не является необязательным, DMO отклоняет данные, когда это возможно, но не гарантирует это. если данные не могут быть потеряны, то устанавливается \_ флаг DMO OUTPUT \_ data \_ буфферф \_ неполный. если задать в качестве указателя *pBuffer* **значение NULL** , но не задать DMO \_ обработка \_ выходных данных \_ \_ \_ без \_ флага буфера, DMO не отбрасывает данные. в этом случае DMO либо замещает выходные данные внутренним образом, либо просто завершает вызов **ProcessOutput** .

единственное функциональное различие между \_ \_ флагом DMO output стреамф \_ необязательный и DMOным \_ \_ \_ флагом стреамф вывода является следующим:

-   \_ \_ необязательный флаг DMO OUTPUT стреамф \_ указывает, что клиенту не нужно задавать тип носителя в этом потоке. Однако если клиент начинает обработку данных без задания типа носителя для этого потока, он должен отбросить данные из этого потока на всю длительность потоковой передачи. Если требуется отменить выбор образцов, необходимо задать тип носителя.
-   \_флаг стреамф вывода выходных данных \_ \_ указывает, что, хотя поток является необязательным, всегда требуется тип мультимедиа. DMO

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Непосредственное размещение DMO](directly-hosting-a-dmo.md)
</dt> </dl>

 

 



