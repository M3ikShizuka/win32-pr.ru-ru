---
description: Необязательные потоки
ms.assetid: 94477a71-c267-4602-893b-1bd1256b34ef
title: Необязательные потоки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 940be49196396aa2d1fa71502213b0d4fbacb5ea
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "105682219"
---
# <a name="optional-streams"></a>Необязательные потоки

DMO может обозначать некоторые из его выходных потоков как необязательные. Необязательный поток создает данные, которые приложение может отбросить, полностью или в случайном виде. Например, необязательный поток может содержать дополнительные сведения о первичном потоке.

Чтобы запросить, является ли поток необязательным, вызовите метод [**имедиаобжект:: жетаутпутстреаминфо**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputstreaminfo) и проверьте параметр *пдвфлагс* . Необязательные потоки возвращают \_ либо \_ флаг стреамф, либо \_ \_ \_ \_ необязательный флаг DMO Output стреамф. Эти флаги означают почти то же самое; одно небольшое различие между ними будет объяснено чуть ниже.

Если поток является необязательным, клиент может указать, что DMO будет отбрасывать данные из этого потока при обработке выходных данных. Для этого вызовите метод [**имедиаобжект::P роцессаутпут**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-processoutput) и установите для выходного буфера **значение NULL** для каждого потока, который нужно отменить. (Выходной буфер указывается в элементе **pBuffer** [**\_ \_ \_ буфера выходных данных DMO**](/previous-versions/windows/desktop/api/Mediaobj/ns-mediaobj-dmo_output_data_buffer).) Кроме того, задайте \_ для \_ параметра выходные данные процесса DMO значение \_ отбросить, \_ Если \_ \_ в параметре *dwFlags* не задан флаг буфера.

Для каждого потока, в котором указатель *pBuffer* имеет **значение NULL**, DMO предпримет попытку удалить данные. Если поток необязателен, DMO гарантирует отклонять данные. Если поток не является необязательным, DMO удаляет данные, когда это возможно, но не гарантирует это. Если данные не могут быть потеряны, задается \_ \_ \_ \_ флаг незавершенных выходных данных DMO буфферф. Если задать в качестве указателя *PBuffer* **значение NULL** , но не задать для параметра "вывод процесса DMO" значение "нет" \_ \_ \_ \_ , если не задан \_ \_ флаг буфера, то DMO не отбрасывает данные. В этом случае DMO либо помещает выходные данные в буфер на внутреннем уровне, либо просто завершает вызов **ProcessOutput** .

Единственное функциональное различие между \_ \_ необязательным флагом стреамф для выходных данных DMO \_ и \_ \_ \_ отброшенным флагом стреамфа DMO имеет следующий результат:

-   \_ \_ Необязательный флаг DMO Output стреамф \_ указывает, что клиенту не нужно задавать тип мультимедиа в этом потоке. Однако если клиент начинает обработку данных без задания типа носителя для этого потока, он должен отбросить данные из этого потока на всю длительность потоковой передачи. Если требуется отменить выбор образцов, необходимо задать тип носителя.
-   \_ \_ Флаг СТРЕАМФ вывода DMO \_ указывает, что, хотя поток является необязательным, ему всегда требуется тип мультимедиа.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Непосредственное размещение DMO](directly-hosting-a-dmo.md)
</dt> </dl>

 

 



