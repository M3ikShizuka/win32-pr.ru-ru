---
description: Класс Ксаурце является базовым классом для реализации фильтров источника. Фильтр, производный от Ксаурце, содержит один или несколько выходных закрепления, производных от класса Ксаурцестреам. Каждый выходной ПИН-код создает рабочий поток, который передает образцы мультимедиа в нисходящий.
ms.assetid: 25bd0334-4ad1-48ed-93f9-b36c13a280a3
title: Класс Ксаурце (Source. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CSource
api_type:
- COM
api_location:
- Strmbase.lib
- Strmbase.dll
- Strmbasd.lib
- Strmbasd.dll
ms.openlocfilehash: a4fcecbd1973c54e30c9bf1251bed174aa4a469f
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "105688954"
---
# <a name="csource-class"></a>Класс Ксаурце

![Иерархия классов ксаурце](images/source01.png)

Класс **ксаурце** является базовым классом для реализации фильтров источника. Фильтр, производный от **ксаурце** , содержит один или несколько выходных закрепления, производных от класса [**ксаурцестреам**](csourcestream.md) . Каждый выходной ПИН-код создает рабочий поток, который передает образцы мультимедиа в нисходящий.

> [!Note]  
> Класс **ксаурце** предназначен для поддержки модели push-уведомлений для потока данных. Этот класс не рекомендуется для создания фильтров чтения файлов. Модули чтения файлов должны поддерживать модель извлечения через интерфейс [**иасинкреадер**](/windows/desktop/api/Strmif/nn-strmif-iasyncreader) . Дополнительные сведения см. в разделе [поток данных для разработчиков фильтров](data-flow-for-filter-developers.md).

 



| Защищенные переменные членов                     | Описание                                                  |
|------------------------------------------------|--------------------------------------------------------------|
| [**m \_ ипинс**](csource-m-ipins.md)            | Количество ПИН-кодов в фильтре.                                |
| [**m \_ пастреамс**](csource-m-pastreams.md)    | Массив ПИН-кодов.                                               |
| [**m \_ кстателокк**](csource-m-cstatelock.md)  | Объект критического раздела, защищающий состояние фильтра.      |
| Открытые методы                                 | Описание                                                  |
| [**ксаурце**](csource-csource.md)             | Метод конструктора.                                          |
| [**~ Ксаурце**](csource--csource.md)           | Метод деструктора.                                           |
| [**жетпинкаунт**](csource-getpincount.md)     | Возвращает количество ПИН-кодов в фильтре.                  |
| [**жетпин**](csource-getpin.md)               | Извлекает ПИН-код.                                             |
| [**пстателокк**](csource--pstatelock.md)      | Извлекает указатель на объект критической секции фильтра. |
| [**аддпин**](csource-addpin.md)               | Добавляет новый выходной ПИН-код в фильтр.                         |
| [**ремовепин**](csource-removepin.md)         | Удаляет указанный ПИН-код из фильтра.                     |
| [**финдпиннумбер**](csource-findpinnumber.md) | Возвращает номер указанного пин-кода для фильтра.       |
| Методы Ибасефилтер                            | Описание                                                  |
| [**финдпин**](csource-findpin.md)             | Извлекает ПИН-код с указанным идентификатором.             |



 

## <a name="remarks"></a>Комментарии

Чтобы реализовать выходной ПИН-код, выполните следующие действия.

-   Создайте класс, производный от [**ксаурцестреам**](csourcestream.md).
-   Переопределите метод [**ксаурцестреам:: жетмедиатипе**](csourcestream-getmediatype.md) и, возможно, метод [**Ксаурцестреам:: чеккмедиатипе**](csourcestream-checkmediatype.md) , который проверяет типы носителей для ПИН-кода.
-   Реализуйте метод [**кбасеаутпутпин::D еЦидебуфферсизе**](cbaseoutputpin-decidebuffersize.md) , который возвращает требования к буферу ПИН-кода.
-   Реализуйте метод [**ксаурцестреам:: филлбуффер**](csourcestream-fillbuffer.md) , который заполняет буфер образца мультимедиа данными.

Чтобы реализовать фильтр, выполните следующие действия.

-   Создайте класс, производный от **ксаурце**.
-   В конструкторе создайте один или несколько выходных закрепления, полученных из [**ксаурцестреам**](csourcestream.md). ПИН-коды автоматически добавляются в фильтр в своих методах-конструкторах и удаляются в своих методах-деструкторах.

Чтобы синхронизировать состояние фильтра между несколькими потоками, вызовите метод [**ксаурце::P стателокк**](csource--pstatelock.md) . Этот метод возвращает указатель на раздел критического состояния фильтра. Используйте класс [**каутолокк**](cautolock.md) для хранения критической секции. Из ПИН-кода можно получить доступ к **пстателокк** из переменной-члена [**кбасепин:: \_ m**](cbasepin-m-pfilter.md) закрепления, как показано ниже:


```
CAutoLock lock(m_pFilter->pStateLock());
```



## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Header<br/>  | <dl> <dt>Source. h (включение Streams. h)</dt> </dl>                                                                                    |
| Библиотека<br/> | <dl> <dt>Стрмбасе. lib (розничные сборки); </dt> <dt>Стрмбасд. lib (отладочные сборки)</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Запись фильтров источника](writing-source-filters.md)
</dt> </dl>

 

 




