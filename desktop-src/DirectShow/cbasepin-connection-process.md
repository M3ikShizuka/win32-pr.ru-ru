---
description: Процесс подключения Кбасепин
ms.assetid: 4b3a9023-0267-4caa-9d89-88237009df05
title: Процесс подключения Кбасепин
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1441b0daba58857e00da0139d3312fb277287fc2
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "103990078"
---
# <a name="cbasepin-connection-process"></a>Процесс подключения Кбасепин

В этом разделе описывается, как класс [**кбасепин**](cbasepin.md) реализует процесс подключения ПИН-кода.

Диспетчер графов фильтров инициирует все подключения ПИН-кода. Он вызывает метод [**Ипин:: Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) выходного контакта, указывая входной ПИН-код. Закрепление вывода завершает соединение, вызывая метод [**Ипин:: рецеивеконнектион**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) входного контакта. Входной ПИН-код может принимать или отклонять соединение.

Диспетчер графов фильтров может также указывать тип носителя для соединения. В этом случае ПИН-коды пытаются подключиться к этому типу. В противном случае ПИН-коды должны согласовать тип. Диспетчер графов фильтров может также указывать *частичный* тип носителя, который имеет значение GUID \_ null для основного типа, подтипа или типа формата. В этом случае ПИН-коды пытаются сопоставить какой-либо фрагмент типа носителя. значение GUID \_ null выступает в качестве подстановочного знака.

Метод [**кбасепин:: Connect**](cbasepin-connect.md) начинается с проверки того, что ПИН-код может принять соединение. Например, он проверяет, что ПИН-код еще не подключен. Он делегирует оставшуюся часть процесса подключения методу [**кбасепин:: агримедиатипе**](cbasepin-agreemediatype.md) . Все, что следует за, выполняется с помощью **агримедиатипе**.

Если тип носителя задан полностью, ПИН-код вызывает метод [**кбасепин:: аттемптконнектион**](cbasepin-attemptconnection.md) для попытки подключения. В противном случае он пытается выполнить типы мультимедиа в следующем порядке:

1.  Предпочтительные типы входного ПИН-кода.
2.  Предпочтительные типы выходного контакта.

Этот порядок можно изменить, задав для флага [**кбасепин:: m \_ Бтримитипесфирст**](cbasepin-m-btrymytypesfirst.md) **значение true**.

В каждом случае ПИН-код вызывает [**Ипин:: енуммедиатипес**](/windows/desktop/api/Strmif/nf-strmif-ipin-enummediatypes) для перечисления типов мультимедиа. Этот метод извлекает объект перечислителя, который передается в метод [**кбасепин:: тримедиатипес**](cbasepin-trymediatypes.md) . Метод **тримедиатипес** циклически проходит по каждому типу мультимедиа и вызывает [**аттемптконнектион**](cbasepin-attemptconnection.md) для каждого типа.

В методе [**аттемптконнектион**](cbasepin-attemptconnection.md) закрепление вывода вызывает следующие методы:

-   Он вызывает [**кбасепин:: чеккконнект**](cbasepin-checkconnect.md) для себя, чтобы проверить, подходит ли входной ПИН-код.
-   Он вызывает [**кбасепин:: чеккмедиатипе**](cbasepin-checkmediatype.md) для себя, чтобы проверить тип носителя.
-   Он вызывает [**Ипин:: рецеивеконнектион**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) для входного ПИН-кода. Входной ПИН-код использует этот метод, чтобы определить, должен ли он принимать соединение.
-   Он вызывает [**кбасепин:: комплетеконнект**](cbasepin-completeconnect.md) для себя, чтобы завершить соединение.

Следует отметить следующее.

-   [**Чеккконнект**](cbasepin-checkconnect.md) является виртуальным методом. В базовом классе этот метод проверяет, совместимы ли направления ПИН-кода. Выходные контакты должны подключаться к входным ПИН-данным и наоборот. Производный класс закрепления, как правило, переопределяет этот метод для выполнения других проверок. Например, он может запросить другой ПИН-код для интерфейса, который необходим для соединения. Если производный класс переопределяет **чеккконнект**, он должен также вызвать метод [**кбасепин**](cbasepin.md) .
-   [**Чеккмедиатипе**](cbasepin-checkmediatype.md) является чисто виртуальным методом, который должен реализовываться производным классом.
-   [**Комплетеконнект**](cbasepin-completeconnect.md) — виртуальный метод, который не выполняет никаких действий в базовом классе. Производные классы могут переопределять этот метод для выполнения любой дополнительной работы, необходимой для завершения подключения, например для выбора распределителя памяти.

Если какое-либо из этих действий завершается неудачей, закрепление вывода вызывает метод [**кбасепин:: бреакконнект**](cbasepin-breakconnect.md) , чтобы отменить все действия, сделанные [**чеккконнект**](cbasepin-checkconnect.md).

Метод [**рецеивеконнектион**](cbasepin-receiveconnection.md) входного контакта вызывает методы [**чеккконнект**](cbasepin-checkconnect.md), [**чеккмедиатипе**](cbasepin-checkmediatype.md)и [**комплетеконнект**](cbasepin-completeconnect.md) входного контакта. В случае неудачи попытка подключения также завершится ошибкой.

На следующей схеме показан процесс подключения в [**кбасепин**](cbasepin.md).

![процесс подключения кбасепин](images/cbasepin-connect.png)

## <a name="related-topics"></a>См. также

<dl> <dt>

[**кбасепин**](cbasepin.md)
</dt> </dl>

 

 



