---
description: Настройка аналогового телевидения
ms.assetid: f4ae76e3-0f61-4a33-8ea4-ef14a117df6a
title: Настройка аналогового телевидения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b85d0826340b913df88cb20dc538bc85943949b
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "105655605"
---
# <a name="analog-television-tuning"></a>Настройка аналогового телевидения

Настройка осуществляется с помощью фильтра ТВ-тюнера через интерфейс [**иамтвтунер**](/windows/desktop/api/Strmif/nn-strmif-iamtvtuner) . Интерфейс Иамтвтунер наследует Иамтунер. Чтобы получить указатель на интерфейс, вызовите метод [**ICaptureGraphBuilder2:: финдинтерфаце**](/windows/desktop/api/Strmif/nf-strmif-icapturegraphbuilder2-findinterface) следующим образом:


```C++
IAMTVTuner *pTuner = NULL;
hr = pBuild->FindInterface(
    &LOOK_UPSTREAM_ONLY,  // Look upstream from pCap.
    NULL,                 // No particular media type.
    pCap,                 // Pointer to the capture filter.
    IID_IAMTVTuner, (void**)&pTuner);
if (SUCCEEDED(hr))
{
    // Use pTuner ...
    pTuner->Release();
}
```



Первый параметр указывает, что следует искать в потоке из фильтра записи.

Частоты таблиц

На внутреннем уровне фильтр ТВ-тюнера хранит список таблиц с частотой. Каждая таблица частоты соответствует частоте вещания или кабелей для определенной страны или региона. Также существует стандартная таблица частоты "Уникабле", которая используется, когда страна или регион не имеют стандартного набора назначений частоты.

Каждая таблица Frequency содержит список частот настройки. Для некоторых стран и регионов индексы в таблице непосредственно соответствуют номерам каналов, иными словами, частота для канала n — это n-й элемент в таблице. Однако в некоторых странах и регионах нет прямой корреспонденции между номерами каналов и частотой. В этом случае приложение должно иметь список, который сопоставляет номера каналов (обычно выбранные пользователем) с частотой записей таблицы. Например, пользователь видит "канал 5" в таблице Frequency (частота) номер 12.

Дополнительные сведения см. в разделе [Международная Настройка аналогового телевидения](international-analog-tv-tuning.md).

Базовые операции настройки

Если тюнер поддерживает несколько режимов приема, таких как телевизоры и FM-Радио, вызовите [**иамтунер::p UT \_ , чтобы**](/windows/desktop/api/Strmif/nf-strmif-iamtuner-put_mode) выбрать режим. Метод [**иамтунер:: жетаваилаблемодес**](/windows/desktop/api/Strmif/nf-strmif-iamtuner-getavailablemodes) возвращает все режимы, поддерживаемые тюнером. Например, следующий код проверяет, поддерживает ли тюнер FM-Радио, и, если да, переключается в этот режим.


```C++
// Check whether the mode is supported.
long lModes = 0;
hr = m_pTuner->GetAvailableModes(&lModes);
if (SUCCEEDED(hr) && (lModes & AMTUNER_MODE_FM_RADIO))
{
    // Set the mode.
    hr = pTuner->put_Mode(AMTUNER_MODE_FM_RADIO);
}
```



Чтобы задать страну или регион, вызовите метод [**иамтунер::p UT \_ каунтрикоде**](/windows/desktop/api/Strmif/nf-strmif-iamtuner-put_countrycode) . Этот параметр используется программой настройки для выбора подходящей таблицы частоты. Дополнительные сведения см. в разделе о [назначении страны или региона](country-region-assignments.md) .

Чтобы задать канал, вызовите метод [**иамтунер::p UT \_ Channel**](/windows/desktop/api/Strmif/nf-strmif-iamtuner-put_channel) . Аргумент для этого метода фактически не является номером канала, а индексом в текущей таблицей частоты. Как было сказано ранее, номер индекса может быть или не соответствовать номеру канала. Метод [**иамтунер:: чаннелминмакс**](/windows/desktop/api/Strmif/nf-strmif-iamtuner-channelminmax) возвращает минимальное и максимальное значения индекса для текущей таблицы частоты.

Переопределение записей частоты

Возможно, некоторые записи в таблицах частоты могут быть неправильными или устаревшими. Таким образом, для переопределения отдельных записей с помощью разделов реестра предоставляется механизм.

Эти особенности описаны в разделе [Международная Настройка аналогового телевидения](international-analog-tv-tuning.md). Каждый раздел реестра определяет область настройки, которая содержит один или несколько подразделов. Каждый подраздел переопределяет одну запись частоты. Чтобы задать текущее пространство настройки, используйте метод [**иамтунер::p UT \_ тунингспаце**](/windows/desktop/api/Strmif/nf-strmif-iamtuner-put_tuningspace) . Активация пространства настройки переопределяет частоту записей в текущей таблице частоты. Таким образом, приложение может поддерживать соответствие между областями и странами и регионами настройки. Лучшим подходом является использование идентификатора страны или региона в качестве имени пространства настройки.

Тонкая настройка записей частоты

Частота широковещательной передачи может быть настроена на несколько кГц на станции вещания, чтобы снизить потенциальные помехи с соседними каналами. Учитывая номинальную частоту, плата тюнера может проверять точную частоту. Фильтр ТВ-тюнера имеет механизм для сохранения скорректированных частот в реестре.

Для каждой записи в таблице Frequency вызовите \_ метод размещения канала, чтобы настроить эту частоту. Этот тюнер будет проверять наиболее точную частоту. Чтобы проверить, достигает ли тюнера горизонтальной блокировки, вызовите [**иамтунер:: сигналпресент**](/windows/desktop/api/Strmif/nf-strmif-iamtuner-signalpresent). Фильтр ТВ-тюнера также сохраняет результаты внутри.

После просмотра всех частот вызовите метод [**иамтвтунер:: стореаутотуне**](/windows/desktop/api/Strmif/nf-strmif-iamtvtuner-storeautotune) , чтобы записать обновленные значения в реестр. Обновленные значения хранятся в записи реестра для текущего пространства настройки.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Аналоговые телевизоры](analog-television.md)
</dt> </dl>

 

 



