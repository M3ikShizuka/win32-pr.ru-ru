---
description: Диспетчер видеопортов
ms.assetid: d70558a5-9820-432a-b4f3-ccf7bb2a34d5
title: Диспетчер видеопортов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b7ca884ff009584ef2904387d872733ddf8d53dd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103911055"
---
# <a name="video-port-manager"></a><span data-ttu-id="aa5d4-103">Диспетчер видеопортов</span><span class="sxs-lookup"><span data-stu-id="aa5d4-103">Video Port Manager</span></span>

<span data-ttu-id="aa5d4-104">Фильтр диспетчера видеопортов (ВПМ) позволяет использовать фильтр визуализации 7 (VMR-7) с устройствами видеозаписи или аппаратными декодерами, которые используют видеопорт.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-104">The Video Port Manager filter (VPM) enables the Video Mixing Renderer Filter 7 (VMR-7) to work with video capture devices or hardware decoders that use a video port.</span></span> <span data-ttu-id="aa5d4-105">Видеопорт — это прямое аппаратное соединение с графической микросхемой.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-105">A video port is a direct hardware connection to the graphics chip.</span></span> <span data-ttu-id="aa5d4-106">Он позволяет передавать видео непосредственно в графический процессор без перебора системной шины.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-106">It enables video to be transferred directly to the graphics chip without going over the system bus.</span></span>

> [!Note]  
> <span data-ttu-id="aa5d4-107">Диспетчер видеопортов несовместим с VMR-9, так как VMR-9 не поддерживает порты видео.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-107">The Video Port Manager is not compatible with the VMR-9, because the VMR-9 does not support video ports.</span></span>

 



|                                          |                                                                                                                                                                                                                      |
|------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="aa5d4-108">Интерфейсы фильтра</span><span class="sxs-lookup"><span data-stu-id="aa5d4-108">Filter Interfaces</span></span>                        | <span data-ttu-id="aa5d4-109">[**ИамвидеодеЦиматионпропертиес**](/windows/desktop/api/Strmif/nn-strmif-iamvideodecimationproperties), [**ибасефилтер**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**икспропертисет**](ikspropertyset.md), [**икуалпроп**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop), [**ивпманажер**](/windows/desktop/api/Strmif/nn-strmif-ivpmanager)</span><span class="sxs-lookup"><span data-stu-id="aa5d4-109">[**IAMVideoDecimationProperties**](/windows/desktop/api/Strmif/nn-strmif-iamvideodecimationproperties), [**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**IKsPropertySet**](ikspropertyset.md), [**IQualProp**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop), [**IVPManager**](/windows/desktop/api/Strmif/nn-strmif-ivpmanager)</span></span> |
| <span data-ttu-id="aa5d4-110">Типы носителей входных закрепления</span><span class="sxs-lookup"><span data-stu-id="aa5d4-110">Input Pin Media Types</span></span>                    | <span data-ttu-id="aa5d4-111">MEDIATYPE \_ Video, медиасубтипе \_ ВПВИДЕО или медиасубтипе \_ ВПВБИ, отформатировать \_ нет</span><span class="sxs-lookup"><span data-stu-id="aa5d4-111">MEDIATYPE\_Video, MEDIASUBTYPE\_VPVideo or MEDIASUBTYPE\_VPVBI, FORMAT\_None</span></span>                                                                                                                                         |
| <span data-ttu-id="aa5d4-112">Интерфейсы входных закрепления</span><span class="sxs-lookup"><span data-stu-id="aa5d4-112">Input Pin Interfaces</span></span>                     | <span data-ttu-id="aa5d4-113">[**Икспин**](ikspin.md), [**икспропертисет**](ikspropertyset.md), [**имеминпутпин**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**Ипин**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**ипинконнектион**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection), [**икуалитиконтрол**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span><span class="sxs-lookup"><span data-stu-id="aa5d4-113">[**IKsPin**](ikspin.md), [**IKsPropertySet**](ikspropertyset.md), [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span></span> |
| <span data-ttu-id="aa5d4-114">Типы носителей для выходного ПИН-кода</span><span class="sxs-lookup"><span data-stu-id="aa5d4-114">Output Pin Media Types</span></span>                   | <span data-ttu-id="aa5d4-115">МУЛЬТИМЕДИЙное \_ видео, формат \_ VideoInfo2</span><span class="sxs-lookup"><span data-stu-id="aa5d4-115">MEDIATYPE\_Video, FORMAT\_VideoInfo2</span></span>                                                                                                                                                                                 |
| <span data-ttu-id="aa5d4-116">Интерфейсы выходного ПИН-кода</span><span class="sxs-lookup"><span data-stu-id="aa5d4-116">Output Pin Interfaces</span></span>                    | <span data-ttu-id="aa5d4-117">[**Ипин**](/windows/desktop/api/Strmif/nn-strmif-ipin), [ **икуалитиконтрол**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span><span class="sxs-lookup"><span data-stu-id="aa5d4-117">[**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span></span>                                                                                                                                                     |
| <span data-ttu-id="aa5d4-118">Фильтровать CLSID</span><span class="sxs-lookup"><span data-stu-id="aa5d4-118">Filter CLSID</span></span>                             | <span data-ttu-id="aa5d4-119">\_ВИДЕОПОРТМАНАЖЕР CLSID</span><span class="sxs-lookup"><span data-stu-id="aa5d4-119">CLSID\_VideoPortManager</span></span>                                                                                                                                                                                              |
| [<span data-ttu-id="aa5d4-120">Заслуживают</span><span class="sxs-lookup"><span data-stu-id="aa5d4-120">Merit</span></span>](merit.md)                       | <span data-ttu-id="aa5d4-121">неуспешный \_ режим</span><span class="sxs-lookup"><span data-stu-id="aa5d4-121">MERIT\_NORMAL</span></span>                                                                                                                                                                                                        |
| [<span data-ttu-id="aa5d4-122">Категория фильтра</span><span class="sxs-lookup"><span data-stu-id="aa5d4-122">Filter Category</span></span>](filter-categories.md) | <span data-ttu-id="aa5d4-123">\_ЛЕГАЦИАМФИЛТЕРКАТЕГОРИ CLSID</span><span class="sxs-lookup"><span data-stu-id="aa5d4-123">CLSID\_LegacyAmFilterCategory</span></span>                                                                                                                                                                                        |



 

## <a name="remarks"></a><span data-ttu-id="aa5d4-124">Комментарии</span><span class="sxs-lookup"><span data-stu-id="aa5d4-124">Remarks</span></span>

<span data-ttu-id="aa5d4-125">Диспетчер видеопортов сочетает в себе функции порта видео в [фильтре микшера наложения](overlay-mixer-filter.md) и функции [распределительной панели ВБИ](vbi-surface-allocator.md).</span><span class="sxs-lookup"><span data-stu-id="aa5d4-125">The Video Port Manager combines the video port functionality of the [Overlay Mixer Filter](overlay-mixer-filter.md) and the functionality of the [VBI Surface Allocator](vbi-surface-allocator.md).</span></span> <span data-ttu-id="aa5d4-126">ВПМ выделяет видео порты и поверхности и синхронизирует данные из видеопорта.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-126">The VPM allocates video ports and surfaces, and synchronizes data capture from the video port.</span></span> <span data-ttu-id="aa5d4-127">Он позволяет записывать видеопорты, не зависящие от отрисовки.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-127">It allows video port-based capture that is independent of rendering.</span></span> <span data-ttu-id="aa5d4-128">Если требуется предварительная версия, ВПМ координирует с VMR-7, чтобы отобразить данные видеопортов, захваченных видео.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-128">If preview is desired, the VPM coordinates with the VMR-7 to display captured video port data.</span></span> <span data-ttu-id="aa5d4-129">Если в системе имеется порт видео, то фильтру записи требуются дополнительные буферы для извлечения данных ВБИ из видеопотока.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-129">When a video port is present on the system, the capture filter requires additional buffers to extract VBI data from the video stream.</span></span> <span data-ttu-id="aa5d4-130">Эти буферы предоставляются ВПМ.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-130">These buffers are provided by the VPM.</span></span> <span data-ttu-id="aa5d4-131">После того как фильтр записи извлекли данные ВБИ, он доставляет его на отдельный ПИН-код для фильтров, таких как декодер CC.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-131">Once the capture filter has extracted the VBI data, it delivers it on a separate pin to filters such as the CC Decoder.</span></span> <span data-ttu-id="aa5d4-132">На следующем рисунке показаны ВПМ и его соединения в графе фильтра.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-132">The following illustration shows the VPM and its connections in a filter graph.</span></span>

![сегмент графа фильтра диспетчера видеопортов](images/vpm.png)

<span data-ttu-id="aa5d4-134">Построитель DVD Graph автоматически добавляет ВПМ к графу фильтра при обнаружении порта видео в системе.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-134">The DVD Graph Builder adds the VPM to the filter graph automatically when a video port is detected on the system.</span></span> <span data-ttu-id="aa5d4-135">После добавления на диаграмму ВПМ использует объект DirectDraw, предоставляемый модулем подготовки видео, для выделения двух или трех поверхностей.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-135">Once added to the graph, the VPM uses a DirectDraw object provided by the Video Mixing Renderer to allocate two or three surfaces.</span></span> <span data-ttu-id="aa5d4-136">Эти поверхности получают оцифрованные кадры из вышестоящего фильтра захвата.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-136">These surfaces receive the digitized frames from the upstream capture filter.</span></span> <span data-ttu-id="aa5d4-137">В ответ на уведомления о событиях пользовательского режима, отправляемые при наличии данных в области, ВПМ выполняет автоматический Блит на поверхность, предоставляемую VMR.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-137">In response to user-mode event notifications sent when data is present in the surface, the VPM performs an automatic blit to an offscreen surface provided by the VMR.</span></span>

<span data-ttu-id="aa5d4-138">Тот факт, что ВПМ использует несколько поверхностей для входных буферов, означает, что для него требуется больше ресурсов, чем для предыдущей реализации видеопортов DirectShow.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-138">The fact that the VPM uses multiple surfaces for its input buffers means that it requires more VRAM than the previous DirectShow video port implementation.</span></span> <span data-ttu-id="aa5d4-139">Дополнительная Блит от ВПМ к VMR-7 требует дополнительной пропускной способности видеопамяти.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-139">The extra blit from the VPM to the VMR-7 requires additional video memory bandwidth.</span></span> <span data-ttu-id="aa5d4-140">И так как автоматическое зеркальное отображение оборудования больше не используется, существует теоретическая вероятность потери кадров, но многофакторная очевидность предполагает, что это не происходит.</span><span class="sxs-lookup"><span data-stu-id="aa5d4-140">And since hardware auto-flipping is not used any longer, there is a theoretical potential for dropped frames, but the empirical evidence suggests that this does not occur.</span></span>

## <a name="related-topics"></a><span data-ttu-id="aa5d4-141">См. также</span><span class="sxs-lookup"><span data-stu-id="aa5d4-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="aa5d4-142">Фильтры DirectShow</span><span class="sxs-lookup"><span data-stu-id="aa5d4-142">DirectShow Filters</span></span>](directshow-filters.md)
</dt> <dt>

[<span data-ttu-id="aa5d4-143">**Интерфейс Ивпманажер**</span><span class="sxs-lookup"><span data-stu-id="aa5d4-143">**IVPManager Interface**</span></span>](/windows/desktop/api/Strmif/nn-strmif-ivpmanager)
</dt> </dl>

 

 



