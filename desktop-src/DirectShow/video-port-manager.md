---
description: Диспетчер видеопортов
ms.assetid: d70558a5-9820-432a-b4f3-ccf7bb2a34d5
title: Диспетчер видеопортов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b7ca884ff009584ef2904387d872733ddf8d53dd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103911055"
---
# <a name="video-port-manager"></a>Диспетчер видеопортов

Фильтр диспетчера видеопортов (ВПМ) позволяет использовать фильтр визуализации 7 (VMR-7) с устройствами видеозаписи или аппаратными декодерами, которые используют видеопорт. Видеопорт — это прямое аппаратное соединение с графической микросхемой. Он позволяет передавать видео непосредственно в графический процессор без перебора системной шины.

> [!Note]  
> Диспетчер видеопортов несовместим с VMR-9, так как VMR-9 не поддерживает порты видео.

 



|                                          |                                                                                                                                                                                                                      |
|------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Интерфейсы фильтра                        | [**ИамвидеодеЦиматионпропертиес**](/windows/desktop/api/Strmif/nn-strmif-iamvideodecimationproperties), [**ибасефилтер**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**икспропертисет**](ikspropertyset.md), [**икуалпроп**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop), [**ивпманажер**](/windows/desktop/api/Strmif/nn-strmif-ivpmanager) |
| Типы носителей входных закрепления                    | MEDIATYPE \_ Video, медиасубтипе \_ ВПВИДЕО или медиасубтипе \_ ВПВБИ, отформатировать \_ нет                                                                                                                                         |
| Интерфейсы входных закрепления                     | [**Икспин**](ikspin.md), [**икспропертисет**](ikspropertyset.md), [**имеминпутпин**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**Ипин**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**ипинконнектион**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection), [**икуалитиконтрол**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol) |
| Типы носителей для выходного ПИН-кода                   | МУЛЬТИМЕДИЙное \_ видео, формат \_ VideoInfo2                                                                                                                                                                                 |
| Интерфейсы выходного ПИН-кода                    | [**Ипин**](/windows/desktop/api/Strmif/nn-strmif-ipin), [ **икуалитиконтрол**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)                                                                                                                                                     |
| Фильтровать CLSID                             | \_ВИДЕОПОРТМАНАЖЕР CLSID                                                                                                                                                                                              |
| [Заслуживают](merit.md)                       | неуспешный \_ режим                                                                                                                                                                                                        |
| [Категория фильтра](filter-categories.md) | \_ЛЕГАЦИАМФИЛТЕРКАТЕГОРИ CLSID                                                                                                                                                                                        |



 

## <a name="remarks"></a>Комментарии

Диспетчер видеопортов сочетает в себе функции порта видео в [фильтре микшера наложения](overlay-mixer-filter.md) и функции [распределительной панели ВБИ](vbi-surface-allocator.md). ВПМ выделяет видео порты и поверхности и синхронизирует данные из видеопорта. Он позволяет записывать видеопорты, не зависящие от отрисовки. Если требуется предварительная версия, ВПМ координирует с VMR-7, чтобы отобразить данные видеопортов, захваченных видео. Если в системе имеется порт видео, то фильтру записи требуются дополнительные буферы для извлечения данных ВБИ из видеопотока. Эти буферы предоставляются ВПМ. После того как фильтр записи извлекли данные ВБИ, он доставляет его на отдельный ПИН-код для фильтров, таких как декодер CC. На следующем рисунке показаны ВПМ и его соединения в графе фильтра.

![сегмент графа фильтра диспетчера видеопортов](images/vpm.png)

Построитель DVD Graph автоматически добавляет ВПМ к графу фильтра при обнаружении порта видео в системе. После добавления на диаграмму ВПМ использует объект DirectDraw, предоставляемый модулем подготовки видео, для выделения двух или трех поверхностей. Эти поверхности получают оцифрованные кадры из вышестоящего фильтра захвата. В ответ на уведомления о событиях пользовательского режима, отправляемые при наличии данных в области, ВПМ выполняет автоматический Блит на поверхность, предоставляемую VMR.

Тот факт, что ВПМ использует несколько поверхностей для входных буферов, означает, что для него требуется больше ресурсов, чем для предыдущей реализации видеопортов DirectShow. Дополнительная Блит от ВПМ к VMR-7 требует дополнительной пропускной способности видеопамяти. И так как автоматическое зеркальное отображение оборудования больше не используется, существует теоретическая вероятность потери кадров, но многофакторная очевидность предполагает, что это не происходит.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Фильтры DirectShow](directshow-filters.md)
</dt> <dt>

[**Интерфейс Ивпманажер**](/windows/desktop/api/Strmif/nn-strmif-ivpmanager)
</dt> </dl>

 

 



