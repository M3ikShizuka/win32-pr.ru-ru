---
description: Время в службах редактирования DirectShow
ms.assetid: 4e8cc766-97f3-45d5-9c4a-5cd6e9ad9c09
title: Время в службах редактирования DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 421831742a2805f58d61c2258dad89d339131f58
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105674443"
---
# <a name="time-in-directshow-editing-services"></a>Время в службах редактирования DirectShow

\[Этот API не поддерживается и может быть изменен или недоступен в будущем.\]

Чтобы изменить видео, необходимо работать с некоторыми важными концепциями времени. Пример:

-   Каждый клип имеет длительность.
-   Клипы, переходы и эффекты отображаются в определенном времени в проекте.
-   Видео имеет частоту кадров, выраженную в кадрах в секунду (кадров/с).

[Службы редактирования данных DirectShow](directshow-editing-services.md) (DES) предоставляют различные методы, которые устанавливают или извлекают время и частоту кадров. Значение этих значений зависит от контекста.

**Значения времени**

Если параметр выражает время, то возможны три различных значения:

-   *Время временной шкалы*: время относительно начала временной шкалы. Например, клип может начаться с 2 секунд на временную шкалу, а переход на временную шкалу может произойти через 15 секунд. Временная шкала определяет окончательный готовый к просмотру проект, поэтому время временной шкалы можно также представить как "время проекта".
-   *Время мультимедиа*: точка в исходном файле относительно начала файла, достигнутая во время нормального воспроизведения. Например, если у вас есть 10-секундный видеофайл, точка посрединного файла будет находиться в течение 5 секунд, выраженного в виде времени мультимедиа.
-   *Родительское время*: время относительно объекта на временной шкале. Например, если объект запускается в течение 8 секунд на временной шкале и содержит другой объект, который начинается с 10 секунд на временной шкале, дочерний объект начинается с 2 секунд относительно родительского. Виртуальные дорожки начинаются со времени 0 относительно временной шкалы. Таким образом, для любого объекта в виртуальной дорожке значение родительского времени равно времени временной шкалы.

Время мультимедиа применяется только к исходным объектам. Каждый исходный объект имеет время запуска носителя и время окончания работы с носителем. Например, предположим, что у вас есть 10-секундный видеоролик, и вы хотите использовать только 5 секунд из середины клипа, обрезать первые 2 секунды и последние 3 секунды из клипа. Если требуется, чтобы клип выглядел 20 секунд в проекте (и предполагается нормальная скорость воспроизведения), необходимо указать следующее время начала и окончания.

-   Начало носителя: 2 секунды
-   Окончание носителя: 7 секунд
-   Начало временной шкалы: 20 секунд
-   Окончание временной шкалы: 25 секунд

    ![Вставка исходного клипа на временную шкалу](images/des-time1.png)

**Частота кадров**

Частота кадров — это "скорость" потока мультимедиа, измеряемая в кадрах за секунду. Как и значения времени, значение частоты кадров зависит от контекста:

-   **Частота выходных кадров:** Частота кадров окончательно подготовленного проекта, определяемая группой. При подготовке проекта каждая группа преобразуется в отдельный поток мультимедиа с собственной частотой кадров.
-   **Частота исходного кадра:** Частота кадров, в которой изначально был создан исходный файл. Созданная частота кадров не должна соответствовать частоте выходных кадров группы. При необходимости DES будет автоматически исмереть выборку или расдаунсамплинг файла. Для большинства форматов мультимедиа алгоритм DES может определить частоту кадров, изучив формат. Последовательность DIB является исключением; необходимо указать частоту кадров последовательности DIB. (Дополнительные сведения см. в разделе [Работа с источниками](working-with-sources.md).)

**Скорость воспроизведения:** Очевидная скорость исходного клипа, когда он отображается в проекте. Например, в течение 10 секунд видео на временной шкале может уместиться не более 5 секунд. В результате скорость зажима увеличивается на 2, как показано на следующей схеме.

![повышение скорости воспроизведения исходного кода](images/des-time2.png)

(С источником звука также будет смещена высота.) Следующая формула определяет скорость воспроизведения исходного клипа:

-   Скорость воспроизведения = (воспроизведение носителя — начало носителя)/(окончание временной шкалы — начало временной шкалы)

Обратите внимание, что каждая из этих трех ставок не зависит от других.

-   Можно ускорить или замедлить работу клипа, изменяя время работы со носителями. Это не влияет на частоту кадров окончательного вывода.
-   Можно увеличить или уменьшить частоту выходных кадров, не влияя на скорость воспроизведения файла.
-   Вы можете сочетать в одной группе исходные файлы, имеющие разную частоту кадров, а DES — выборке или понижение уровня для каждого клипа в соответствии с частотой кадров группы.

При отрисовке проекта все значения времени округляются до ближайшей границы фрейма, что определяется частотой кадров группы. Например, предположим, что у группы видео частота кадров составляет 30 кадров/с. Каждый кадр имеет примерно 33 миллисекунд (МС). Предположим, что вы добавили в временную шкалу исходный ролик с 1,68 секунд, начиная с нулевого времени. Источник не заканчивается на границе фрейма, поэтому DES округляет время ожидания до 1,6666 секунд (50 кадров). Если в проекте, готовом для просмотра, выполняется поиск в 1,68 секунд, то в кадре 51st будет выполнен поиск после конца источника.

Однако DES не перезаписывает время окончания источника. Позже вы можете изменить частоту кадров группы или переместить источник в новое место на временной шкале, где оно округляется по-другому. Таким образом, DES сохраняет исходное время окончания и округляет только при необходимости. Дополнительные сведения см. в разделе [**иамтимелинеобж:: фикстимес**](iamtimelineobj-fixtimes.md).

## <a name="related-topics"></a>См. также

<dl> <dt>

[начало работы с помощью служб редактирования DirectShow](getting-started-with-directshow-editing-services.md)
</dt> </dl>

 

 



