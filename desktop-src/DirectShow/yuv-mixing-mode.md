---
description: Режим смешения YUV
ms.assetid: 296b1d96-1824-4000-8bec-158925555177
title: Режим смешения YUV
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: faf4ca6b1ba5317145c410d6e5b899c7cf264f82
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103912103"
---
# <a name="yuv-mixing-mode"></a>Режим смешения YUV

Этот раздел относится к пакету обновления 2 (SP2) для Windows XP или более поздней версии.

Начиная с пакета обновления 2 (SP2) для Windows XP, VMR поддерживает режим смешения, называемый режимом смешения YUV. Этот режим лучше всего подходит для расширенных ТЕЛЕПЕРЕДАЧ или DVD-приложений. Она зарабатывает некоторые возможности микшера VMR для повышения производительности аппаратного оборудования, использующего архитектуру единой архитектуры памяти. Режим смешения YUV поддерживается как для VMR-7, так и для VMR-9.

**Преимущества**

Режим смешения YUV имеет несколько преимуществ, связанных с производительностью отрисовки в исходном режиме смешения RGB, поддерживаемом VMR:

-   Когда VMR находится в режиме смешения YUV, все операции композиции, выполняемые в процессе разчередования и воспроизведения видеопотоков, выполняются в пространстве цветов YUV. Для поверхностей YUV обычно требуется от 50% до 60% меньше пропускной способности памяти, чем эквивалентные поверхности RGB.
-   Разбиение и объединение потоков выполняется одним вызовом графического драйвера. Драйвер может использовать возможности работы с несколькими текстурами графического оборудования, что приводит к дополнительной экономии пропускной способности памяти.

Хотя любое видеоприложение может использовать режим смешения YUV, оно в основном предназначено для двух типов приложений воспроизведения видео:

1.  ТВ-приложения, отображающие скрытые субтитры или телетекст.
2.  В приложениях для DVD отображаются данные подизображения DVD или скрытые субтитры.

**Ограничения**

При переводе в режим "Микширование YUV" для параметра VMR применяется ряд ограничений:

-   Поток 0 (поток, подключенный к входному контакту 0) может быть прогрессивным или чередованием; все остальные потоки должны быть прогрессивными.
-   Идентификатор GUID \_ null (режим "плетение") не допускается для потока 0.
-   Деинтерлацепреф- \_ плетение нельзя использовать в качестве резервного режима, так как это может препятствовать созданию устройства без чередования. Режим смешения YUV требует чередования устройства, даже если входящее видео не чередуются.
-   Нельзя вносить изменения в значение плоского альфа-канала, связанное с каждым входным потоком VMR.
-   Пользователь не может изменить Z-порядок подключенных потоков видео. Z-порядок по умолчанию взят из порядка контактов.
-   Ключ цвета не поддерживается.
-   Входной ПИН-код 0 должен получить поток видео.
-   Другие ПИН-коды ввода могут принимать только данные подпотока видео, такие как подизображение DVD, скрытые субтитры или телетекст.
-   Другие ПИН-коды ввода могут принимать только однопиксельные форматы YUV Alpha, такие как АЙУВ, AI44 и IA44.
-   Ни один из входных ПИН-кодов VMR не может принимать какие-либо форматы RGB.
-   Указанные в приложении растровые изображения больше не могут быть объединены с видео до показа.
-   Отдельные подпотоки не могут быть инвертированы по горизонтали или по вертикали с помощью функций «выходного прямоугольника VMR». "Нормальное" перепозиционирование потоков и изменение размера поддерживается.
-   Цвет фона смешивания (заданный параметром [**ивмрмиксерконтрол:: сетбаккграундклр**](/windows/desktop/api/Strmif/nf-strmif-ivmrmixercontrol-setbackgroundclr)) по-прежнему задается в цветовом пространстве RGB, точно так же, как в режиме смешения RGB.

**Конфигурация**

Приложения должны явно настроить фильтр VMR, чтобы воспользоваться преимуществами режима смешения YUV. исходный режим смешения RGB остается в режиме смешения по умолчанию. Чтобы включить режим смешения YUV в VMR-7, вызовите [**ивмрмиксерконтрол:: сетмиксингпрефс**](/windows/desktop/api/Strmif/nf-strmif-ivmrmixercontrol-setoutputrect) с \_ флагом миксерпреф рендертаржетюв. Этот вызов необходимо выполнить до подключения всех входных ПИН-кодов VMR. Чтобы включить режим смешения YUV в VMR-9, вызовите [**IVMRMixerControl9:: сетмиксингпрефс**](/previous-versions/windows/desktop/api/Vmr9/nf-vmr9-ivmrmixercontrol9-setmixingprefs) с \_ флагом MixerPref9 рендертаржетюв.

Единственный способ определить, поддерживает ли VMR-7 новый режим смешивания YUV, — это попробовать установить фильтр VMR в этом режиме. Если вызов будет выполнен, вы по-прежнему можете вернуть VMR в режим смешения RGB, если это необходимо. После того как он переключается в режим смешения YUV, фильтр VMR может быть переведен в режим смешения RGB только после отключения всех входных контактов.

В режиме смешения YUV можно уменьшить нагрузку на графический процессор (GPU), применив следующие флаги в методе **сетмиксингпрефс** :



| Flag                                                                                 | Описание                                                      |
|--------------------------------------------------------------------------------------|------------------------------------------------------------------|
| VMR-7: Миксерпреф \_ динамиксвитчтобобвмр-9: MixerPref9 \_ динамиксвитчтобоб<br/> | Переключитесь на разчересстрочную развертку Боба.                                     |
| VMR-7: Миксерпреф \_ DynamicDecimateBy2VMR-9: миксерпреф \_ DynamicDecimateBy2<br/>  | Децимации изображение с коэффициентом 2 по горизонтали и вертикали. |



 

Эти флаги можно добавить или удалить во время работы графа фильтра. изменение применяется, когда микшер VMR формирует следующий кадр видео. Флаги не являются взаимоисключающими. Эти параметры уменьшают качество изображения, поэтому обычно их следует применять только в том случае, если качество видео менее важно, например, если видео воспроизводится в небольшой части пользовательского интерфейса.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Использование режима смешения VMR](using-vmr-mixing-mode.md)
</dt> </dl>

 

 




