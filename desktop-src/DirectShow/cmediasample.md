---
description: Класс Кмедиасампле определяет пример носителя, поддерживающий интерфейс IMediaSample2. Пример носителя содержит указатель на буфер памяти и различные свойства, хранящиеся как защищенные переменные-члены.
ms.assetid: 1e609c7c-3200-4540-904e-7659976df0da
title: Класс Кмедиасампле (Амфилтер. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CMediaSample
api_type:
- COM
api_location:
- Strmbase.lib
- Strmbase.dll
- Strmbasd.lib
- Strmbasd.dll
ms.openlocfilehash: 7b0b27c8878a2841eeecb3bc1ae24bdcc43d056c57a881596179f5d2bd990fcd
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120084494"
---
# <a name="cmediasample-class"></a>Класс Кмедиасампле

![Иерархия классов кмедиасампле](images/wutil03.png)

`CMediaSample`Класс определяет пример носителя, поддерживающий интерфейс [**IMediaSample2**](/windows/desktop/api/Strmif/nn-strmif-imediasample2) . Пример носителя содержит указатель на буфер памяти и различные свойства, хранящиеся как защищенные переменные-члены.

Примеры носителей создаются распределителями, которые являются производными от класса [**кбасеаллокатор**](cbaseallocator.md) . `CMediaSample`Конструктор получает указатель на выделенный буфер вместе с размером буфера. Другие свойства обычно задаются и извлекаются с помощью методов интерфейса [**имедиасампле**](/windows/desktop/api/Strmif/nn-strmif-imediasample) .

Жизненный цикл примера мультимедиа отличается от большинства COM-объектов:

-   Распределитель содержит список бесплатных выборок. Если для фильтра требуется новый пример, вызывается метод распределителя [**имемаллокатор::-buffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-getbuffer) . Распределитель получает пример из свободного списка, увеличивает счетчик ссылок выборки и возвращает указатель на образец.
-   После того как фильтр выполнен в примере, он вызывает метод **IUnknown:: Release** для примера. В отличие от большинства объектов, образец не удаляет себя, когда счетчик ссылок достигает нуля. Вместо этого он вызывает метод [**имемаллокатор:: релеасебуффер**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-releasebuffer) для распределителя, и распределитель возвращает пример в свободный список.
-   Распределитель не уничтожает образцы до тех пор, пока не будет вызван метод [**имемаллокатор::D екоммит**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-decommit) .



| Защищенные переменные членов                                           | Описание                                                                                     |
|----------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
| [**m \_ dwFlags**](cmediasample-m-dwflags.md)                         | Примеры флагов свойств.                                                                          |
| [**m \_ двтипеспеЦификфлагс**](cmediasample-m-dwtypespecificflags.md) | Флаги, зависящие от типа.                                                                            |
| [**m \_ pBuffer**](cmediasample-m-pbuffer.md)                         | Указатель на буфер памяти, содержащий данные мультимедиа.                                      |
| [**m \_ лактуал**](cmediasample-m-lactual.md)                         | Длина допустимых данных в буфере в байтах.                                               |
| [**m \_ кббуффер**](cmediasample-m-cbbuffer.md)                       | Размер буфера в байтах.                                                                   |
| [**m \_ паллокатор**](cmediasample-m-pallocator.md)                   | Указатель на распределитель, создавший этот образец.                                              |
| [**m \_ пнекст**](cmediasample-m-pnext.md)                             | Указатель на следующий образец в списке выборок распределителя.                                  |
| [**м. \_ Начало**](cmediasample-m-start.md)                             | Время начала выборки.                                                                              |
| [**\_конец m**](cmediasample-m-end.md)                                 | Время окончания выборки.                                                                                |
| [**m \_ медиастарт**](cmediasample-m-mediastart.md)                   | Время начала носителя.                                                                               |
| [**m \_ медиаенд**](cmediasample-m-mediaend.md)                       | Время окончания носителя.                                                                                |
| [**m \_ пмедиатипе**](cmediasample-m-pmediatype.md)                   | Указатель на тип мультимедиа, если тип был изменен из предыдущего примера в потоке данных. |
| [**m \_ двстреамид**](cmediasample-m-dwstreamid.md)                   | Идентификатор потока.                                                                              |
| Открытые переменные члена                                              | Описание                                                                                     |
| [**«m», \_ cref**](cmediasample-m-cref.md)                               | Число ссылок.                                                                                |
| Открытые методы                                                       | Описание                                                                                     |
| [**кмедиасампле**](cmediasample-cmediasample.md)                    | Метод конструктора.                                                                             |
| [**~ Кмедиасампле**](cmediasample--cmediasample.md)                 | Метод деструктора. Виртуализаци.                                                                     |
| [**сетпоинтер**](cmediasample-setpointer.md)                        | Задает указатель на буфер памяти.                                                          |
| Методы Имедиасампле                                                 | Описание                                                                                     |
| [**"Уточняющий указатель"**](cmediasample-getpointer.md)                        | Извлекает указатель чтения/записи в буфер.                                                   |
| [**GetSize**](cmediasample-getsize.md)                              | Возвращает размер буфера.                                                               |
| [**GetTime**](cmediasample-gettime.md)                              | Извлекает время потока, с которого должен начинаться этот образец.                        |
| [**SetTime**](cmediasample-settime.md)                              | Задает время в потоке, в течение которого этот пример должен начинаться и заканчиваться.                             |
| [**иссинкпоинт**](cmediasample-issyncpoint.md)                      | Определяет, является ли начало образца точкой синхронизации.                           |
| [**сетсинкпоинт**](cmediasample-setsyncpoint.md)                    | Указывает, является ли начало этого образца точкой синхронизации.                      |
| [**испреролл**](cmediasample-ispreroll.md)                          | Определяет, является ли этот образец примером предобразца.                                                  |
| [**сетпреролл**](cmediasample-setpreroll.md)                        | Указывает, является ли этот пример примером предобразца.                                              |
| [**жетактуалдаталенгс**](cmediasample-getactualdatalength.md)      | Возвращает длину допустимых данных в буфере.                                           |
| [**сетактуалдаталенгс**](cmediasample-setactualdatalength.md)      | Задает длину допустимых данных в буфере.                                                |
| [**жетмедиатипе**](cmediasample-getmediatype.md)                    | Извлекает тип мультимедиа, если тип мультимедиа отличается от предыдущего примера.                   |
| [**сетмедиатипе**](cmediasample-setmediatype.md)                    | Задает тип носителя для образца.                                                             |
| [**исдисконтинуити**](cmediasample-isdiscontinuity.md)              | Определяет, представляет ли этот образец разрыв в потоке данных.                                |
| [**сетдисконтинуити**](cmediasample-setdiscontinuity.md)            | Указывает, представляет ли этот образец разрыв в потоке данных.                            |
| [**жетмедиатиме**](cmediasample-getmediatime.md)                    | Возвращает время носителя для этого образца.                                                      |
| [**сетмедиатиме**](cmediasample-setmediatime.md)                    | Задает время носителя для этого образца.                                                           |
| Методы IMediaSample2                                                | Описание                                                                                     |
| [**GetProperties**](cmediasample-getproperties.md)                  | Извлекает свойства образца.                                                         |
| [**SetProperties**](cmediasample-setproperties.md)                  | Задает свойства образца.                                                              |



 

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Заголовок<br/>  | <dl> <dt>амфилтер. h (включает Потоки. h)</dt> </dl>                                                                                  |
| Библиотека<br/> | <dl> <dt>Стрмбасе. lib (розничные сборки); </dt> <dt>Стрмбасд. lib (отладочные сборки)</dt> </dl> |



 

 




