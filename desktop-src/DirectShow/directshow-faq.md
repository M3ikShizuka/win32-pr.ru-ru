---
description: Вопросы и ответы по DirectShow
ms.assetid: 198758b9-025a-44af-958c-9ddea8cbb12d
title: Вопросы и ответы по DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1a7d0959c4abb24509edd9c26d111e80a5af221d
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104537499"
---
# <a name="directshow-faq"></a>Вопросы и ответы по DirectShow

В этой статье содержатся ответы на многие часто задаваемые вопросы о Microsoft DirectShow.

**Какие операционные системы поддерживает DirectShow?**

DirectShow доступна во всех поддерживаемых версиях Windows.

**Какой объем базы знаний COM необходим для программирования с помощью DirectShow?**

Для разработки приложений необходимо понимать основы работы с COM-объектами: создание экземпляров, доступ к предоставляемым им интерфейсам и Управление счетчиками ссылок на этих интерфейсах. Для разработки фильтров требуются дополнительные знания COM.

**Какие форматы поддерживает DirectShow?**

См. раздел [Поддерживаемые форматы в DirectShow](supported-formats-in-directshow.md).

**Имеется ли список совместимого оборудования DirectShow?**

Нет. DirectShow использует возможности Microsoft DirectDraw и оборудования Microsoft DirectSound, если они доступны. Если специального оборудования нет, DirectShow использует GDI для рисования видео и  \* мультимедийных API-интерфейсов для воспроизведения аудио.

**Какие языки можно использовать для написания приложения DirectShow?**

DirectShow разработана в основном для разработки на C++. Небольшой поднабор API-интерфейса DirectShow предоставляется через Visual Basic 6,0; Однако эта функция является устаревшей.

**Будет ли доступно DirectShow через управляемый код?**

Корпорация Майкрософт не имеет текущих планов для реализации управляемого API DirectShow.

**Какой компилятор требуется для разработки DirectShow?**

Любой компилятор, способный создавать COM-объекты, должен работать после правильной настройки среды компилятора.

**Как DirectShow связана с Microsoft DirectX?**

На внутреннем уровне DirectShow использует DirectSound и DirectDraw, когда оборудование поддерживает его. Фильтры "модуль подготовки видео" и "микшер оверлея" используют поверхности DirectDraw 3 и DirectDraw 5. Устройство микширования видео 7 (только для Windows XP) использует поверхности DirectDraw 7. Устройство микширования видео 9 и Улучшенный модуль визуализации видео используют новейшие API-интерфейсы Microsoft Direct3D. Для написания приложения DirectShow не нужно использовать другие API-интерфейсы DirectX, хотя их можно комбинировать.

**Как DirectShow связана с Microsoft ActiveMovie?**

ActiveMovie — это исходное имя для DirectShow. Термин ActiveMovie больше не используется.

**Доступен ли исходный код для программы Графедит? Можно ли Графедит распространять?**

Нет, источник недоступен, а Graphedt.exe не является распространяемым.

**Дмос ли заменить фильтры DirectShow?**

Объекты мультимедиа Microsoft DirectX (дмос) можно использовать в приложении DirectShow. Для кодировщиков, декодеров и эффектов рекомендуется писать объекты DMO вместо фильтров DirectShow. (Примечание. Если вы хотите использовать ускорение видео DirectX в декодере, необходимо реализовать его в качестве фильтра.) Для других целей фильтр DirectShow может быть более подходящим. Дополнительные сведения о дмос см. в разделе [DirectX Media Objects](directx-media-objects.md).

**Я воспроизводить файл формата AVI с проигрывателем Windows Media. Я могу слышать звуковой сигнал, но вместо него кажется, что я вижу черный цвет. Что не так?**

Возможно, файл был закодирован с помощью кодека, который отсутствует в вашей системе. Хотя формат AVI является распространенным, AVI-файлы можно создавать с помощью различных форматов сжатия (кодеков). Если вы попытаетесь воспроизвести AVI-файл, который использует неподдерживаемый кодек, вы можете услышать звуковой компонент, но видео будет отображаться как черный экран или содержимое экрана останется без изменений.

> [!Note]  
> Проигрыватель Windows Media часто пытается загрузить и установить кодек, если он отсутствует в системе.

 

**Разделы справки создать приложение? Какие библиотеки и файлы заголовков нужны?**

См. раздел [Настройка среды сборки](setting-up-the-build-environment.md).

**Графедит отображает множество фильтров, которые не документированы. Что такое фильтры?**

Графедит перечисляет все фильтры, зарегистрированные в системе в категории фильтров. Это могут быть фильтры, установленные сторонними приложениями или установленные другими технологиями Майкрософт, такими как Windows Media или NetMeeting. Кроме того, некоторые фильтры DirectShow работают как оболочки для кодеков или устройств, при этом каждый кодек или устройство появлялся как отдельный фильтр. Видеокодек Microsoft H. 263 используется в NetMeeting и больше не поддерживается в DirectShow. Дополнительные сведения см. в разделе [Перечисление устройств и фильтров](enumerating-devices-and-filters.md).

**У меня возникают проблемы при создании пользовательского графа программным способом.**

Сначала попытайтесь построить граф фильтра с помощью Графедит. Это средство позволяет быстро имитировать множество возможностей. Графедит всегда является отличным местом для тестирования графа, прежде чем пытаться построить его с помощью исходного кода.

Дополнительные сведения о построении графов см. в следующих статьях:

-   [Построение графа фильтра](building-the-filter-graph.md)
-   [Перечисление объектов в графе фильтра](enumerating-objects-in-a-filter-graph.md)

**Как определить, установлена ли DirectShow на данном компьютере?**

Вызовите **CoCreateInstance** , чтобы создать экземпляр диспетчера графа фильтров. Если этот вызов будет выполнен, на компьютере будет установлена DirectShow. В следующем коде показано, как это сделать.


```C++
IGraphBuilder *pGraph;

HRESULT hr = CoCreateInstance(CLSID_FilterGraph,
    NULL, CLSCTX_INPROC_SERVER,
    IID_IGraphBuilder, (void **) &pGraph);
```



**Разделы справки изменить параметры фильтра без отображения страницы свойств?**

Большинство фильтров предоставляют один или несколько интерфейсов для установки свойств фильтра. Просмотрите страницу справочника по рассматриваемому фильтру. (См. раздел [фильтры DirectShow](directshow-filters.md).)

**Можно ли протестировать фильтр с помощью Графедит?**

При разработке фильтра Графедит может помочь визуализировать соединения между фильтрами. Кроме того, он может обеспечить быструю проверку функциональности фильтра. Однако это не является надежной платформой тестирования.

**Какие фильтры работают с привилегиями Ring?**

Фильтры выполняются в кольцо 3, хотя некоторые фильтры контролируют потоковые устройства, которые работают в кольцевой 0. Дополнительные сведения см. [в разделе как аппаратные устройства участвуют в графе фильтра](how-hardware-devices-participate-in-the-filter-graph.md).

**Нужно ли использовать отладчик ядра?**

Это зависит от конкретного проекта. Установка библиотек среды выполнения DirectX Debug означает, что устанавливаются отладочные драйверы и другие компоненты режима ядра, и что если приложение вызывает утверждение отладки в одном из этих компонентов, компьютер будет автоматически перезагружен, если к процессу не подключен отладчик ядра.

**При запуске приложения в отладчике происходит сбой.**

Некоторые декодеры не работают, пока приложение подключено к отладчику. Попробуйте запустить приложение вне отладчика.

**Как \_ работает макрос define GUID?**

Макрос **define \_ GUID** решает проблему объявления `extern` ссылок на значения GUID в исходном коде. Например, предположим, что в проекте есть три исходных файла, Src1. cpp, Src2. cpp и Src3. cpp, а во всех трех файлах используется определенное значение идентификатора GUID. Значение GUID должно быть определено в проекте ровно один раз, а другие исходные файлы должны объявлять `extern` ссылки на него. С помощью макроса **define \_ GUID** можно использовать один и тот же файл заголовка для обоих целей. В файле заголовка объявите GUID следующим образом:


```C++
DEFINE_GUID(CLSID_MyObject, 
0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00);
```



(Если этот пример содержит нули, укажите фактические значения идентификатора GUID.) Вы можете использовать служебную программу Guidgen.exe, чтобы создать новый GUID и вставить его в заголовочный файл в формате **определения \_ GUID** . Включите этот заголовочный файл в каждый исходный файл, который ссылается на GUID. В точности один из исходных файлов включает файл заголовка Инитгуид. h перед файлом заголовка. Пример:


```C++
// Src1.cpp
#include <initguid.h>
#include "MyGuids.h"

// Src2.cpp
#include "MyGuids.h"

// Src3.cpp
#include "MyGuids.h"
```



Когда файл заголовка Инитгуид. h не включен, макрос **define \_ GUID** создает `extern` ссылку на значение GUID. При включении файла заголовка Инитгуид. h он переопределяет макрос **define \_ GUID** , чтобы **определение \_ GUID** создавало определяющее объявление идентификатора GUID.

Если Инитгуид. h не включен ни в один из исходных файлов, появится сообщение об ошибке ссылки "неразрешенный внешний символ". Если дважды включить Инитгуид. h для одного и того же идентификатора GUID, будет получено сообщение об ошибке компиляции "Redefinition; Множественная инициализация ". Чтобы устранить эти ошибки, убедитесь, что Инитгуид. h включен ровно один раз. Кроме того, не включайте Инитгуид. h в файл предкомпилированного заголовка, поскольку в силу этого предкомпилированный заголовок включается в каждый исходный файл.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Введение в DirectShow](introduction-to-directshow.md)
</dt> </dl>

 

 



