---
description: Пример Двапп
ms.assetid: 80375170-d0d6-4371-abe3-078703e158b1
title: Пример Двапп
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 72067c04e108354c1706690bc71e8b339ad5af071c46cc0e4102ae10e9a3643f
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119148727"
---
# <a name="dvapp-sample"></a>Пример Двапп

## <a name="description"></a>Описание

Приложение для записи цифрового видео (DV).

В этом образце показано, как создавать различные типы графов фильтров для управления видеокамерами. Здесь также показано, как выполнять захват, просмотр, передачу и управление устройствами с помощью цифровой видеокамеры.

### <a name="usage"></a>Использование

Приложение Двапп поддерживает следующие режимы:

-   Предварительный просмотр: отображает DV с видеокамеры в видеоокно.
-   DV to Type-1 file: захватывает DV-данные с видеокамеры в файл DV типа 1.
-   Type-1 File to DV: передает данные из DV-файла типа 1 на видеокамеру.
-   DV to Type-2 file: захватывает DV-данные с видеокамеры до файла DV типа 2.
-   Type-2 File to DV: передает данные из DV-файла типа 2 на видеокамеру.

Режимы записи и передачи также выполняют предварительную версию. В каждом из этих режимов **отсутствует параметр Предварительный просмотр** , который отключает предварительный просмотр. Захват без предварительного просмотра более эффективен и может уменьшить количество удаленных кадров.

Приложение запускается в режиме предварительного просмотра. чтобы выбрать другой режим, выберите режим в меню **Graph режим** . Для каждого режима Двапп создает граф фильтра, который поддерживает функциональность этого режима. чтобы сохранить граф в виде файла графедит (грф), выберите в меню **файл** пункт **сохранить Graph в файл** . Закройте Двапп, прежде чем открывать файл в Графедит.

Для записи в файл:

1.  В меню **файл** выберите команду **задать выходной файл** и введите имя файла.
2.  в меню **режим Graph** выберите режим *DV в виде файла* (тип 1 или тип 2 с предварительной версией или без нее).
3.  Щелкните **запись**.
4.  Если видеокамера находится в режиме Втр, нажмите кнопку **воспроизвести**.
5.  Чтобы отключить запись, нажмите кнопку " **Закрыть**".

Для передачи из файла на видеокамера:

1.  В меню **файл** выберите команду **задать входной файл** и выберите DV-файл. Файл должен соответствовать выбранному режиму (тип 1 или тип 2).
2.  в меню **режим Graph** выберите *файл в формате DV* (тип 1 или 2 с предварительным просмотром или без него).
3.  Нажмите кнопку **Воспроизвести**.
4.  Чтобы записать данные на ленту, щелкните **запись**.
5.  Чтобы отключить передачу, нажмите кнопку " **Закрыть**".

Если видеокамера находится в режиме Втр, пользователь может управлять транспортным механизмом через кнопки в стиле ВИДЕОМАГНИТОФОНА приложения. Чтобы найти ленту, введите целевой код времени и нажмите кнопку "Поиск".

Чтобы ограничить объем данных, выделяемых приложением, выберите **Размер захвата** в меню **файл** .

Чтобы проверить формат ленты (NTSC или PAL), выберите пункт **проверить ленту** в меню **Параметры** .

Чтобы изменить размер окна предварительного просмотра, выберите **изменить размер декодирования** в меню **Параметры** .

### <a name="programming-notes"></a>Заметки о программировании

Основное назначение этого приложения — продемонстрировать, как создавать различные видеозаписи и передавать графы.

### <a name="device-arrival-and-removal"></a>Получение и удаление устройства

Приложение обрабатывает прибытие и удаление устройства, используя два разных метода. Для прибытия устройства цикл обработки сообщений приложения реагирует на \_ сообщения WM девицечанже. Для удаления устройства приложение реагирует на события [**\_ \_ потерянного устройства EC**](ec-device-lost.md) из диспетчера графа фильтров. Любой из этих подходов работает, хотя \_ событие «потеря устройства EC» зависит от \_ наличия устройства в графе фильтра.

Приложение обрабатывает только одно устройство за раз. Если текущее устройство удалено, приложение ищет другое устройство DV в системе.

На некоторых видеокамерах пользователь должен завершить работу устройства при переключении между режимом камеры и режимом Втр, который запускает сообщение с потерей устройства. Приложение отвечает, включая или отключая соответствующие команды меню. Однако если пользователь переключается между режимами, видеокамера может не генерировать сообщение, потерянное устройством. Можно принудительно обновить меню, выбрав **режим обновления** в меню **Параметры** . Некоторые видеокамеры могут переключаться в режим без выключения, но при переключении в режим ВТРи сообщение будет отправлено только при пересылке устройства.

### <a name="device-control"></a>Управление устройством

Функциональные возможности кнопки **Воспроизведение** и **запись** зависят от текущего режима:

-   Предварительный просмотр: граф фильтра запускается автоматически. Кнопка **Воспроизведение** запускает транспорт.
-   Записать в файл: кнопка **записи** запускает граф, а кнопка **Воспроизведение** запускает транспорт.
-   Передать на устройство. Кнопка **воспроизведения** запускает граф, а кнопка **запись** запускает транспорт.

Пример приложения не выполняет точную запись в виде кадров. В различных точках приложение вызывает функцию **Sleep** для ожидания ответа устройства. Новые видеокамеры с новыми ЦИФРами отправляют уведомление при изменении состояния устройства. Старые устройства могут не поддерживать уведомления. в этом примере вызов **спящего режима** является более простым решением.

## <a name="downloading-the-sample"></a>Загрузка образца

чтобы скачать примеры пакета SDK для DirectShow, установите последнюю версию [Windows SDK](https://msdn.microsoft.com/windowsvista/bb980924.aspx).

этот пример устанавливается по следующему пути: *\[ \] корневые примеры SDK* \\ \\ мультимедиа \\ DirectShow \\ Capture \\ двапп.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Управление видеокамерой](controlling-a-dv-camcorder.md)
</dt> <dt>

[Цифровое видео в DirectShow](digital-video-in-directshow.md)
</dt> <dt>

[DirectShow Регистрируют](directshow-samples.md)
</dt> </dl>

 

 



