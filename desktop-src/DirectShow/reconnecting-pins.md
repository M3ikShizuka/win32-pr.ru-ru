---
description: Повторное подключение ПИН-кодов
ms.assetid: 34b3e4de-e4eb-48c5-aaef-fc99b63e8691
title: Повторное подключение ПИН-кодов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3d8bb214307a5c17639d98ae07284abddca4d5beb11b966150d8b7ec46013853
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119072778"
---
# <a name="reconnecting-pins"></a>Повторное подключение ПИН-кодов

При подключении через ПИН-код фильтр может отключиться и повторно подключить один из его других ПИН-кодов, как показано ниже.

1.  Фильтр вызывает [**Ипин:: куерякцепт**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) в ПИН-коде другого фильтра и указывает новый тип носителя.
2.  Если **куерякцепт** возвращает " \_ ОК", фильтр вызывает [**IFilterGraph2:: реконнектекс**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph2-reconnectex) для повторного подключения ПИН-кодов.

Ниже приведены некоторые примеры того, когда для фильтра может потребоваться повторное подключение ПИН-кодов.

-   **Фильтры Tee.** *Фильтр tee* разделяет входной поток на несколько выходов без изменения данных в потоке. Фильтр tee может принимать ряд типов мультимедиа, но типы должны совпадать во всех соединениях ПИН-кода. Поэтому при подключении входного ПИН-кода фильтру может потребоваться повторное согласование существующих соединений с выходными контактами и наоборот. Пример см. в примере [фильтра инфти](inftee-filter-sample.md).
-   **Фильтры на месте.** Фильтр *на месте* изменяет входные данные в исходном буфере вместо копирования данных в отдельный выходной буфер. Фильтр переноса на месте должен использовать один и тот же распределитель как для вышестоящего, так и для подчиненного подключений. Первый ПИН-код для подключения (входной или выходной) согласовывает распределитель обычным способом. Однако при подключении другого ПИН-кода первый распределитель может оказаться неприемлемым. В этом случае второй ПИН-код выбирает другой распределитель, и первый ПИН-код повторно подключается с помощью нового распределителя. Пример реализации см. в описании класса [**ктрансинплацефилтер**](ctransinplacefilter.md) .

в методе **реконнектекс** фильтр Graph Manager асинхронно отключает и повторно подключает пин-коды. Фильтр не должен предпринимать попытки повторного подключения, если **куерякцепт** не возвращает значение " \_ ОК". В противном случае ПИН-код останется отключенным, что приведет к ошибкам графа. кроме того, фильтр должен запросить повторное подключение из метода [**ипин:: Подключение**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) в том же потоке. если метод **Подключение** возвращается в одном потоке, в то время как другой поток выполняет запрос на повторное подключение, то диспетчер Graph фильтра может запустить граф до того, как будет выполнено повторное подключение, что приведет к ошибкам графа.

 

 



