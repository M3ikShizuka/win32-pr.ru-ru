---
description: Метод Жеткуррентбуффер извлекает копию буфера, связанную с последним примером.
ms.assetid: 08550c82-4711-4725-9cd0-19b43cf4c92e
title: 'Метод Исамплеграббер:: Жеткуррентбуффер (Кедит. h)'
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- ISampleGrabber.GetCurrentBuffer
api_type:
- COM
api_location:
- strmiids.lib
- strmiids.dll
ms.openlocfilehash: d4df4c825761b42533590f10432bf62e5e4e0298
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "105675956"
---
# <a name="isamplegrabbergetcurrentbuffer-method"></a>Метод Исамплеграббер:: Жеткуррентбуффер

> [!Note]  
> \[Не рекомендуется. Этот API может быть удален из будущих выпусков Windows.\]

 

Метод **жеткуррентбуффер** извлекает копию буфера, связанную с последним примером.

## <a name="syntax"></a>Синтаксис


```C++
HRESULT GetCurrentBuffer(
  [in, out] long *pBufferSize,
  [out]     long *pBuffer
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*пбуфферсизе* \[ в, out\]
</dt> <dd>

Указатель на размер буфера. Если *pBuffer* имеет **значение NULL**, этот параметр получает требуемый размер буфера в байтах. Если *pBuffer* не равно **null**, установите этот параметр равным размеру буфера в байтах. В выходных данных параметр получает число байтов, скопированных в буфер. Это значение может быть меньше, чем размер буфера.

</dd> <dt>

*pBuffer* \[ заполняет\]
</dt> <dd>

Указатель на массив байтов размера *пбуфферсизе* или **значение NULL**. Если этот параметр не равен **null**, текущий буфер копируется в массив. Если этот параметр имеет **значение NULL**, параметр *пбуфферсизе* получает требуемый размер буфера.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Возвращает одно из следующих значений.



| Код возврата                                                                                           | Описание                                                                                                                  |
|-------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------|
| <dl> <dt>**E \_ INVALIDARG**</dt> </dl>          | Образцы не буферизуются. Вызовите [**исамплеграббер:: сетбуфферсамплес**](isamplegrabber-setbuffersamples.md).<br/> |
| <dl> <dt>**E \_ OUTOFMEMORY**</dt> </dl>         | Указанный буфер недостаточно велик.<br/>                                                                         |
| <dl> <dt>**\_указатель E**</dt> </dl>             | **Пустой** аргумент указателя.<br/>                                                                                        |
| <dl> <dt>**\_ОК**</dt> </dl>                  | Успешно.<br/>                                                                                                          |
| <dl> <dt>**VFW \_ E \_ не \_ подключен**</dt> </dl> | Фильтр не подключен.<br/>                                                                                      |
| <dl> <dt>**VFW \_ E — \_ неправильное \_ состояние**</dt> </dl>   | Фильтр еще не получил выборки. Чтобы предоставить пример, запустите или приостановите граф.<br/>                         |



 

## <a name="remarks"></a>Комментарии

Чтобы активировать буферизацию, вызовите [**исамплеграббер:: сетбуфферсамплес**](isamplegrabber-setbuffersamples.md) со значением **true**.

Вызовите этот метод дважды. При первом вызове задайте для *PBuffer* **значение NULL**. Размер буфера возвращается в *пбуфферсизе*. Затем выделите массив и снова вызовите метод. Во втором вызове передайте размер массива в *пбуфферсизе* и передайте адрес массива в *pBuffer*. Если массив недостаточно велик, метод возвращает E \_ OUTOFMEMORY.

Параметр *pBuffer* типизирован как **длинный** указатель, но содержимое буфера зависит от формата данных. Вызовите метод [**исамплеграббер:: жетконнектедмедиатипе**](isamplegrabber-getconnectedmediatype.md) , чтобы получить тип мультимедиа формата.

Не вызывайте этот метод во время работы графа фильтра. Пока граф фильтра работает, фильтр захвата при каждом получении нового образца переписывает содержимое буфера. Лучший способ использовать этот метод — использовать Однофакторный режим, который останавливает граф после получения первого образца. Чтобы задать Однофакторный режим, вызовите метод [**исамплеграббер:: сетонешот**](isamplegrabber-setoneshot.md).

Фильтр не содержит образцов предварительной подсчета или выборки, в которых элемент **двстреамид** структуры [**\_ \_ свойств SAMPLE2**](/windows/win32/api/strmif/ns-strmif-am_sample2_properties) отличается от \_ потока \_ мультимедиа.

> [!Note]  
> Файл заголовка Кедит. h несовместим с заголовками Direct3D позднее версии 7.

 

> [!Note]  
> Чтобы получить Кедит. h, скачайте [обновление Microsoft Windows SDK для Windows Vista и платформа .NET Framework 3,0](https://msdn.microsoft.com/windowsvista/bb980924.aspx). Кедит. h недоступен в Microsoft Windows SDK для Windows 7 и платформа .NET Framework 3,5 с пакетом обновления 1 (SP1).

 

## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------|-----------------------------------------------------------------------------------------|
| Header<br/>  | <dl> <dt>Кедит. h</dt> </dl>      |
| Библиотека<br/> | <dl> <dt>Стрмиидс. lib</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Использование образца захвата](using-the-sample-grabber.md)
</dt> <dt>

[**Интерфейс Исамплеграббер**](isamplegrabber.md)
</dt> </dl>

 

 




