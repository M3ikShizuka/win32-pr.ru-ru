---
description: ПИН-коды порта видео
ms.assetid: a6be24e5-7937-48f1-abeb-3f29c3deeafd
title: ПИН-коды порта видео
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 94202e05cc467eabb77719a145a77310a62482e6f82772261b57e5ff544d2b63
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119696792"
---
# <a name="video-port-pins"></a>ПИН-коды порта видео

Устройство записи с видеопортом оборудования может использовать расширения видеопортов (впе) в Microsoft® DirectX®. Если да, то фильтр записи будет иметь ПИН-код для порта видео (президента). Данные видео не передаются с закрепления вице-президента через граф фильтра. Вместо этого видеокадры создаются на оборудовании и отправляются непосредственно в видеопамять. ПИН-код президента позволяет отправлять управляющие сообщения на оборудование.

Важно подключить ПИН-код президента, даже если приложение выполняет только запись файлов без предварительной версии. Если оставить ПИН-код неподключенным, граф будет работать неправильно. Это отличается от предварительного просмотра ПИН-кодов, которые не должны быть подключены.

различные DirectShow модуля подготовки видео предоставляют различные средства поддержки для пин-кодов вице-президента:

-   модуль подготовки видео: Подключениеный пин-код для закрепления 0 на [наложенном Mixer](overlay-mixer-filter.md) фильтре, и подключите наложение Mixer фильтра к обработчику видео.
-   VMR-7. Подключение, чтобы получить доступ к фильтру [диспетчера видеопортов](video-port-manager.md) и подключить диспетчер видеопортов к фильтру VMR-7.
-   VMR-9. Вы не можете использовать VMR-9, если у устройства есть свой вице-президент, так как Direct3D 9 не поддерживает видеопорты. Используйте модуль подготовки видео или VMR-7.

для сценариев видеопортов в диспетчере видеопортов и VMR-7 рекомендуется использовать наложение Mixer и модуля подготовки видео, так как не все драйверы поддерживают диспетчер видеопортов. как правило, наложение Mixer является самым надежным вариантом для видеопортов.

метод [**ICaptureGraphBuilder2:: RenderStream**](/windows/desktop/api/Strmif/nf-strmif-icapturegraphbuilder2-renderstream) автоматически вставляет оверлей Mixer при наличии пин-кода президента. если вы создаете граф без использования этого метода, проверьте наличие пин-кода видеопорта в фильтре записи и, если он существует, подключите его к наложению Mixer фильтру, как показано на следующей схеме.

![Подключение ПИН-кода к видеопорту к фильтру микшера наложения.](images/vidcap11.png)

Для поиска ПИН-кода президента в фильтре записи можно использовать метод [**ICaptureGraphBuilder2:: финдпин**](/windows/desktop/api/Strmif/nf-strmif-icapturegraphbuilder2-findpin) :


```C++
hr = pBuild->FindPin(
    pCap,                    // Pointer to the capture filter.
    PINDIR_OUTPUT,           // Look for an output pin.
    &PIN_CATEGORY_VIDEOPORT, // Look for a video port pin.
    NULL,                    // Any media type.
    FALSE,                   // Pin can be connected.
    0,                       // Retrieve the first matching pin.
    &pVPPin                  // Receives a pointer to the pin.
);
```



после добавления наложения Mixer к графу, вызовите **финдпин** еще раз, чтобы найти pin 0 на перекрытие Mixer. ПИН-код 0 всегда является первым входным закреплением фильтра.


```C++
pBuild->FindPin(pOvMix, PINDIR_INPUT, NULL, NULL, TRUE, 0, &pOVPin);
```



Подключение два контакта путем вызова [**играфбуилдер:: Подключение**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect).


```C++
pGraph->Connect(pVPPin, pOvPin);
```



затем подключите закрепление Mixer наложения к фильтру модуля подготовки видео. видео можно скрыть, вызвав методы [**ивидеовиндов::p ut \_ автоотображения**](/windows/desktop/api/Control/nf-control-ivideowindow-put_autoshow) и [**ивидеовиндов::p ut \_ Visible**](/windows/desktop/api/Control/nf-control-ivideowindow-put_visible) в фильтре Graph Manager.

Для ТВ-тюнеров фильтр записи может также иметь ВБИ PIN (закрепить \_ категорию \_ видеопорт \_ ВБИ). Если да, подключите этот ПИН-код к фильтру [распределителя ВБИ Surface](vbi-surface-allocator.md) . Дополнительные сведения см. в разделе [Просмотр скрытых субтитров](viewing-closed-captions.md).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Разделы, посвященные расширенному записи](advanced-capture-topics.md)
</dt> <dt>

[использование наложения Mixer в видеозаписи](using-the-overlay-mixer-in-video-capture.md)
</dt> </dl>

 

 



