---
description: 'Кбасеинпутпин. Receive — метод Receive получает следующий образец носителя в потоке. Этот метод реализует метод Имеминпутпин:: Receive.'
ms.assetid: 30fefc7b-7c9c-44cd-b58b-2b275dfa2520
title: Метод Кбасеинпутпин. Receive (Амфилтер. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CBaseInputPin.Receive
api_type:
- COM
api_location:
- Strmbase.lib
- Strmbase.dll
- Strmbasd.lib
- Strmbasd.dll
ms.openlocfilehash: 4fe88913ad374923c11cf058a3dc0aa70580411e
ms.sourcegitcommit: 95685061d5b0333bbf9e6ebd208dde8190f97005
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2021
ms.locfileid: "108099692"
---
# <a name="cbaseinputpinreceive-method"></a>Кбасеинпутпин. Receive, метод

`Receive`Метод получает следующий пример носителя в потоке. Этот метод реализует метод [**имеминпутпин:: Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive) .

## <a name="syntax"></a>Синтаксис


```C++
HRESULT Receive(
   IMediaSample *pSample
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*псампле* 
</dt> <dd>

Указатель на интерфейс [**имедиасампле**](/windows/desktop/api/Strmif/nn-strmif-imediasample) образца.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Возвращает значение **HRESULT** . Возможные значения включают перечисленные в следующей таблице.



| Код возврата                                                                                             | Описание                                                |
|---------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
| <dl> <dt>**\_ОК**</dt> </dl>                    | Успешно.<br/>                                        |
| <dl> <dt>**S \_ false**</dt> </dl>                 | ПИН-код в данный момент очищается; Пример отклонен.<br/> |
| <dl> <dt>**\_указатель E**</dt> </dl>               | **Пустой** аргумент указателя.<br/>                      |
| <dl> <dt>**VFW \_ E \_ инвалидмедиатипе**</dt> </dl> | Недопустимый тип носителя.<br/>                             |
| <dl> <dt>**\_ \_ ошибка среды выполнения VFW E \_**</dt> </dl>   | Произошла ошибка времени выполнения.<br/>                      |
| <dl> <dt>**VFW \_ E — \_ неправильное \_ состояние**</dt> </dl>     | ПИН-код остановлен.<br/>                             |



 

## <a name="remarks"></a>Remarks

Входной ПИН-код вышестоящего выхода вызывает этот метод для доставки образца на входный ПИН-код. Входной ПИН-код должен выполнять одно из следующих действий:

-   Обработайте пример перед возвратом.
-   Верните и обработайте пример в рабочем потоке.
-   Отклонить пример.

Если ПИН-код использует рабочий поток для обработки образца, добавьте счетчик ссылок в образец внутри этого метода. После возврата метода вышестоящий ПИН-код освобождает пример. Когда число ссылок в образце достигает нуля, пример возвращается к распределителю для повторного использования.

Этот метод является синхронным и может блокироваться. Если метод может блокироваться, метод [**кбасеинпутпин:: рецеивеканблокк**](cbaseinputpin-receivecanblock.md) в ПИН-коде должен вернуть значение s \_ ОК.

В базовом классе этот метод выполняет следующие действия:

1.  Вызывает метод [**кбасеинпутпин:: чеккстреаминг**](cbaseinputpin-checkstreaming.md) , чтобы убедиться, что ПИН-код может обработать образцы сейчас. Если это невозможно, например, если ПИН-код остановлен, метод завершается ошибкой.
2.  Извлекает пример свойств и проверяет, был ли изменен формат (см. ниже).
3.  Если формат изменился, метод вызывает метод [**кбасепин:: чеккмедиатипе**](cbasepin-checkmediatype.md) , чтобы определить, приемлем ли новый формат.
4.  Если новый формат неприемлем, метод вызывает метод [**кбасепин:: EndOfStream**](cbasepin-endofstream.md) , ОТПРАВЛЯЕТ \_ событие EC еррораборт и возвращает код ошибки.
5.  Если ошибок нет, метод возвращает значение S \_ ОК.

Проверьте формат, как показано ниже.

-   Если образец поддерживает интерфейс [**IMediaSample2**](/windows/desktop/api/Strmif/nn-strmif-imediasample2) , проверьте элемент **двсамплефлагс** структуры [**\_ \_ свойств SAMPLE2**](/windows/win32/api/strmif/ns-strmif-am_sample2_properties) . Если установлен \_ \_ флаг типечанжед для примера, формат изменился.
-   В противном случае, если образец не поддерживает **IMediaSample2**, вызовите метод [**Имедиасампле:: жетмедиатипе**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getmediatype) . Если метод возвращает значение, отличное от **null** , формат изменился.

В базовом классе этот метод не обрабатывает пример. Производный класс должен переопределить этот метод для выполнения обработки. (То, что это влечет, полностью зависит от фильтра.) Производный класс должен вызвать метод базового класса, чтобы проверить наличие ошибок, описанных выше.

## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Header<br/>  | <dl> <dt>Амфилтер. h (включение Streams. h)</dt> </dl>                                                                                  |
| Библиотека<br/> | <dl> <dt>Стрмбасе. lib (розничные сборки); </dt> <dt>Стрмбасд. lib (отладочные сборки)</dt> </dl> |



## <a name="see-also"></a>См. также

<dl> <dt>

[**Класс Кбасеинпутпин**](cbaseinputpin.md)
</dt> </dl>

 

 




