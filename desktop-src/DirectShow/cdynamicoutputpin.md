---
description: Класс Кдинамикаутпутпин реализует выходной ПИН-код, который поддерживает динамические повторное подключения и изменения формата.
ms.assetid: d2488fba-a653-4b6e-b786-ce95f9e20daa
title: Класс Кдинамикаутпутпин (Амфилтер. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CDynamicOutputPin
api_type:
- COM
api_location:
- Strmbase.lib
- Strmbase.dll
- Strmbasd.lib
- Strmbasd.dll
ms.openlocfilehash: 54c6dab41c122456076299df22bf90d886c905cc
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "105657593"
---
# <a name="cdynamicoutputpin-class"></a>Класс Кдинамикаутпутпин

`CDynamicOutputPin`Класс реализует выходной ПИН-код, который поддерживает динамические повторное подключения и изменения формата.

Этот класс является производным от класса [**кбасеаутпутпин**](cbaseoutputpin.md) и реализует интерфейс [**ипинфловконтрол**](/windows/desktop/api/Strmif/nn-strmif-ipinflowcontrol) . Он поддерживает несколько операций, которые важны для построения динамического графа.

-   Динамическое повторное подключение. ПИН-код может отключиться и подключиться заново, пока фильтр остается активным (приостановлен или запущен).
-   Динамическое изменение формата. ПИН-код может согласовать новый тип носителя, пока фильтр остается активным, без повторного подключения.
-   Управление потоком. фильтр-владелец (или приложение) может блокировать поток данных из ПИН-кода без остановки фильтра.

Дополнительные сведения см. в разделе [динамическое построение графа](dynamic-graph-building.md).

ПИН-код имеет три возможных состояния: заблокировано, разблокировано и ожидание. В состоянии *ожидания* ПИН-код ожидает завершения некоторой операции в другом потоке до переключения ПИН-кода в состояние блокировки. Пока ПИН-код заблокирован, фильтр не может доставить данные через ПИН-код или изменить соединение с закреплением.

Для координации между несколькими потоками фильтр владельца должен следовать определенным правилам. (Дополнительные сведения о потоках в графе фильтров см. в разделе [потоки и критические разделы](threads-and-critical-sections.md).) Во первых, поток потоковой передачи должен всегда вызывать метод [**кдинамикаутпутпин:: стартусингаутпутпин**](cdynamicoutputpin-startusingoutputpin.md) перед вызовом любого из следующих методов:

-   [**Кдинамикаутпутпин:: Чанжеаутпутформат**](cdynamicoutputpin-changeoutputformat.md)
-   [**Кдинамикаутпутпин:: Чанжемедиатипе**](cdynamicoutputpin-changemediatype.md)
-   [**Кдинамикаутпутпин::D Инамикреконнект**](cdynamicoutputpin-dynamicreconnect.md)
-   [**Кбасеаутпутпин::D еливер**](cbaseoutputpin-deliver.md)
-   [**Кбасеаутпутпин::D Еливерендофстреам**](cbaseoutputpin-deliverendofstream.md)
-   [**Кбасеаутпутпин::D Еливерневсегмент**](cbaseoutputpin-delivernewsegment.md)
-   [**Имеминпутпин:: Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive)
-   [**Имеминпутпин:: Рецеивемултипле**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receivemultiple)
-   [**Ипин:: EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream)
-   [**Ипин:: Невсегмент**](/windows/desktop/api/Strmif/nf-strmif-ipin-newsegment)

После этого он должен вызвать метод [**кдинамикаутпутпин:: стопусингаутпутпин**](cdynamicoutputpin-stopusingoutputpin.md) .

Во вторых, поток приложения не должен вызывать ни один из методов из предыдущего списка. В-третьих, поток потоковой передачи не должен вызывать методы класса, которые блокируют или разблокируют закрепление. Эти методы: [**кдинамикаутпутпин:: Block**](cdynamicoutputpin-block.md), [**Кдинамикаутпутпин:: синчронаусблоккаутпутпин**](cdynamicoutputpin-synchronousblockoutputpin.md), [**Кдинамикаутпутпин:: AsynchronousBlockOutputPin**](cdynamicoutputpin-asynchronousblockoutputpin.md)и [**CDynamicOutputPin:: UnblockOutputPin**](cdynamicoutputpin-unblockoutputpin.md).

Эти правила гарантируют, что поток приложения не может заблокировать ПИН-код, пока поток потоковой передачи использует его, и наоборот. После того как поток потоковой передачи вызвал **стартусингаутпутпин**, ПИН-код не будет блокироваться до тех пор, пока поток потоковой передачи не вызовет **стопусингаутпутпин**. И наоборот, если ПИН-код заблокирован, **стартусингаутпутпин** ждет, пока закрепление не будет разблокировано.

Чтобы не забыть вызывать **стопусингаутпутпин**, можно использовать класс [**каутаусингаутпутпин**](cautousingoutputpin-cautousingoutputpin.md) . Он вызывает **стопусингаутпутпин** автоматически при выходе за пределы области действия.

Когда фильтр-владелец соединяет или леаведс граф фильтра (в методе [**ибасефилтер:: жоинфилтерграф**](/windows/desktop/api/Strmif/nf-strmif-ibasefilter-joinfiltergraph) ), он должен вызвать метод [**Кдинамикаутпутпин:: сетконфигинфо**](cdynamicoutputpin-setconfiginfo.md) .



| Защищенные переменные членов                                                                      | Описание                                                                                                                   |
|-------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| [**m \_ блоккстателокк**](cdynamicoutputpin-m-blockstatelock.md)                                 | Критическая секция, защищающая состояние блокировки.                                                                            |
| [**m \_ хунблоккаутпутпиневент**](cdynamicoutputpin-m-hunblockoutputpinevent.md)                 | Событие, сигнальное, если ПИН-код не заблокирован.                                                                           |
| [**m \_ хнотификаллерпинблоккедевент**](cdynamicoutputpin-m-hnotifycallerpinblockedevent.md)     | Событие, сообщающее о том, что ПИН-код успешно заблокирован, или пользователь отменяет незавершенный блок.                                 |
| [**m \_ блоккстате**](cdynamicoutputpin-m-blockstate.md)                                         | Состояние блокировки.                                                                                                               |
| [**m \_ двблокккаллерсреадид**](cdynamicoutputpin-m-dwblockcallerthreadid.md)                   | Идентификатор потока, который последним вызвал метод [**ипинфловконтрол:: Block**](/windows/desktop/api/Strmif/nf-strmif-ipinflowcontrol-block) для этого ПИН-кода. |
| [**m \_ двнумаутстандингаутпутпинусерс**](cdynamicoutputpin-m-dwnumoutstandingoutputpinusers.md) | Число потоков потоковой передачи, использующих этот ПИН-код.                                                                                   |
| [**m \_ хстопевент**](cdynamicoutputpin-m-hstopevent.md)                                         | Событие, сигнальное при остановке фильтра или при сбросе ПИН-кода.                                                         |
| [**m \_ пграфконфиг**](cdynamicoutputpin-m-pgraphconfig.md)                                     | Указатель на интерфейс [**играфконфиг**](/windows/desktop/api/Strmif/nn-strmif-igraphconfig) для выполнения динамических повторного подключения.                           |
| [**m \_ бпинусесреадонляллокатор**](cdynamicoutputpin-m-bpinusesreadonlyallocator.md)           | Флаг, указывающий, доступны ли образцы из распределителя закрепления только для чтения.                                                   |
| Защищенные методы                                                                               | Описание                                                                                                                   |
| [**синчронаусблоккаутпутпин**](cdynamicoutputpin-synchronousblockoutputpin.md)                | Блокирует ПИН-код; не возвращает значение, пока ПИН-код не будет заблокирован.                                                                     |
| [**асинчронаусблоккаутпутпин**](cdynamicoutputpin-asynchronousblockoutputpin.md)              | Блокирует ПИН-код; может вернуть, прежде чем ПИН-код будет заблокирован.                                                                       |
| [**унблоккаутпутпин**](cdynamicoutputpin-unblockoutputpin.md)                                  | Разблокирует ПИН-код.                                                                                                             |
| [**блоккаутпутпин**](cdynamicoutputpin-blockoutputpin.md)                                      | Блокирует ПИН-код.                                                                                                               |
| [**ваитевент**](cdynamicoutputpin-waitevent.md)                                                | Ожидает сигнала указанного события.                                                                                  |
| Открытые методы                                                                                  | Описание                                                                                                                   |
| [**кдинамикаутпутпин**](cdynamicoutputpin-cdynamicoutputpin.md)                                | Метод конструктора.                                                                                                           |
| [**~ Кдинамикаутпутпин**](cdynamicoutputpin--cdynamicoutputpin.md)                              | Метод деструктора.                                                                                                            |
| [**сетконфигинфо**](cdynamicoutputpin-setconfiginfo.md)                                        | Указывает указатель [**играфконфиг**](/windows/desktop/api/Strmif/nn-strmif-igraphconfig) и событие завершения.                                                |
| [**деливербегинфлуш**](cdynamicoutputpin-deliverbeginflush.md)                                | Запрашивает подключенный входной ПИН-код для начала операции очистки.                                                                  |
| [**деливерендфлуш**](cdynamicoutputpin-deliverendflush.md)                                    | Запрашивает подключенный входной ПИН-код для завершения операции очистки.                                                                    |
| [**Неактивно**](cdynamicoutputpin-inactive.md)                                                  | Уведомляет ПИН-код о том, что фильтр остановлен.                                                                                 |
| [**Активна**](cdynamicoutputpin-active.md)                                                      | Уведомляет ПИН-код о том, что фильтр активен.                                                                               |
| [**комплетеконнект**](cdynamicoutputpin-completeconnect.md)                                    | Завершает соединение с входным закреплением. Виртуализаци.                                                                              |
| [**стартусингаутпутпин**](cdynamicoutputpin-startusingoutputpin.md)                            | Получает доступ к ПИН-коду для потоковой операции. Виртуализаци.                                                                 |
| [**стопусингаутпутпин**](cdynamicoutputpin-stopusingoutputpin.md)                              | Освобождает доступ к ПИН-коду после потоковой операции. Виртуализаци.                                                              |
| [**стреамингсреадусингаутпутпин**](cdynamicoutputpin-streamingthreadusingoutputpin.md)        | Определяет, выполняет ли поток операцию потоковой передачи с закреплением. Виртуализаци.                                        |
| [**чанжеаутпутформат**](cdynamicoutputpin-changeoutputformat.md)                              | Динамически изменяет тип носителя для подключения и предоставляет сведения о новом сегменте.                                  |
| [**чанжемедиатипе**](cdynamicoutputpin-changemediatype.md)                                    | Динамически изменяет тип носителя для соединения.                                                                        |
| [**динамикреконнект**](cdynamicoutputpin-dynamicreconnect.md)                                  | Выполняет динамическое повторное подключение с новым типом носителя.                                                                        |
| Методы Ипин                                                                                    | Описание                                                                                                                   |
| [**Отключение**](cdynamicoutputpin-disconnect.md)                                              | Прерывает текущее подключение к ПИН-коду.                                                                                            |
| Методы Ипинфловконтрол                                                                         | Описание                                                                                                                   |
| [**Блокировать**](cdynamicoutputpin-block.md)                                                        | Блокирует поток данных из ПИН-кода или разблокирует его.                                                                             |



 

## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Header<br/>  | <dl> <dt>Амфилтер. h (включение Streams. h)</dt> </dl>                                                                                  |
| Библиотека<br/> | <dl> <dt>Стрмбасе. lib (розничные сборки); </dt> <dt>Стрмбасд. lib (отладочные сборки)</dt> </dl> |



 

 




