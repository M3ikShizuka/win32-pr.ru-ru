---
description: Технология энергозависимой памяти (PM Memory) обеспечивает доступ на уровне байт к энергонезависимым носителям, одновременно уменьшая задержку в хранении или получении данных.
ms.assetid: 68BF6074-09CB-4D6E-8BFD-FBA297391286
title: Программирование энергонезависимой памяти в Windows — интеграция НВМЛ
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2c9f033963a8fecded8943eb053781d05a78d568
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104272375"
---
# <a name="persistent-memory-programming-in-windows---nvml-integration"></a>Программирование энергонезависимой памяти в Windows — интеграция НВМЛ

Технология энергозависимой памяти (PM Memory) обеспечивает доступ на уровне байт к энергонезависимым носителям, одновременно уменьшая задержку в хранении или получении данных. Он создает новый уровень между системной памятью и традиционным хранилищем. Любая программа, зависящая от или масштабируется с помощью быстрой записи на постоянный носитель, может выиграть от PM.

В этой статье показано, как можно легко интегрировать невременную библиотеку памяти (НВМЛ) в проект Visual Studio для простоты использования.

> [!Note]  
> Постоянная память иногда также называется памятью класса хранилища (SCM).

 

## <a name="pm-and-nvml"></a>PM и НВМЛ

Первая поддержка постоянной памяти появилась в Windows Server 2016 и юбилейном обновлении Windows 10 (1607). Чтобы получить краткий обзор, ознакомьтесь с этими двумя видео Channel9:

-   [Использование энергонезависимой памяти (NVDIMM-N) в качестве блочного хранилища в Windows Server 2016](https://channel9.msdn.com/Events/Build/2016/P466)
-   [Использование энергонезависимой памяти (NVDIMM-N) в качестве хранилища Byte-Addressable в Windows Server 2016](https://channel9.msdn.com/Events/Build/2016/P470)

Чтобы помочь разработчикам воспользоваться преимуществами постоянных объемов памяти, корпорация Майкрософт также предоставила усилия по переносу библиотеки памяти (нвмл) в Windows. Эта библиотека предоставляет различные средства для создания постоянных приложений с учетом памяти. Например, он содержит код, позволяющий легко создавать хранилище ключей с поддержкой PM для очень быстрого поиска и хранения. Дополнительные сведения о НВМЛ, включая примеры, можно найти в [библиотеке НВМ](https://pmem.io/nvml/).

## <a name="integrating-nvml-into-a-visual-studio-project"></a>Интеграция НВМЛ в проект Visual Studio

1. Скачивание файлов и заголовков библиотеки НВМЛ

-   НВМЛ сохраняется на GitHub. Вы можете либо скомпилировать источник самостоятельно, либо просто загрузить скомпилированные двоичные файлы непосредственно отсюда: [Нвмл версии 1,2 —](https://github.com/pmem/pmdk/releases/tag/1.2%2Bwtp1)Предварительная техническая версия Windows.

2. Поместите файлы библиотеки и заголовки в каталог по своему выбору, например "C: \\ нвмл \\ lib" и "c: \\ нвмл \\ Inc" соответственно.

3. Настройте проект следующим образом.

-   Откройте проект Visual Studio и в окне "обозреватель решений" щелкните правой кнопкой мыши имя проекта.
-   Откройте область параметров проекта в нижней части результирующего всплывающего окна.
-   Перейдите к разделу "Свойства конфигурации-> C/C++" и добавьте папку, в которую был сохранен заголовок (C: \\ нвмл \\ Inc), в поле "Дополнительные каталоги включаемых папок".
-   Затем перейдите к разделу "Свойства конфигурации-> компоновщик" и добавьте папку, в которой была сохранена библиотека (C: \\ нвмл \\ lib), в поле "Дополнительные каталоги библиотеки".

4. Затем убедитесь, что вы нацелены на проект для Windows Server 2016 или годовщины обновления Windows 10:

-   Перейдите в раздел "Свойства конфигурации-> Общие" и задайте в поле "версия целевой платформы" значение "10.0.14393.0" и
-   Перейдите к разделу "Свойства конфигурации-> C/C++" и добавьте "НТДДИ \_ Version = нтдди \_ WIN10 \_ RS1;" в поле "препроцессор".

5. Включение заголовков в код и ссылки на необходимые библиотеки

-   На этом этапе можно просто включить файлы заголовков, которые вы хотите использовать в коде, как и любые другие файлы заголовков. Например, для использования либпмем:
    -   Добавьте " \# include <либпмем. h>" и
    -   Добавьте "либпмем. lib" в "Свойства конфигурации-> компоновщик — > ввод-> дополнительные зависимости"

На этом этапе вы готовы вызывать функции библиотеки непосредственно в коде и использовать их преимущества.

 

 



