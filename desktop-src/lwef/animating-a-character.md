---
title: Анимация символа
description: Анимация символа
ms.assetid: ed42de30-acac-41e8-bacb-4caaff254724
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3ed47b30a9bcfcdb5e305b87ced5f02526ae0056
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104069881"
---
# <a name="animating-a-character"></a>Анимация символа

\[Microsoft Agent является устаревшим в Windows 7 и может быть недоступен в последующих версиях Windows.\]

После загрузки символа можно использовать несколько методов Microsoft Agent для анимации символа. Первый из них обычно является методом [**отображения**](show-method.md) . **Показать** делает фрейм символа видимым и воспроизводит анимацию, назначенную **отображаемому** состоянию символа.

После того как рамка символа будет видима, можно использовать метод [**Play**](play-method.md) , указав имя анимации, чтобы воспроизвести эту анимацию. Имена анимаций относятся к определению символа. При воспроизведении анимации форма его окна изменяется в соответствии с изображением в кадре. Это приводит к перемещению графического изображения или *спрайта*, отображаемого поверх рабочего стола, всех окон или *z-порядка*.

Если файл символа хранится локально, можно просто вызвать метод [**Play**](play-method.md) . В других случаях, например при загрузке. ACF символ из HTTP-сервера. для первого извлечения данных анимации необходимо использовать метод [**Get**](get-method.md) (или [**Prepare**](/windows/desktop/lwef/iagentcharacter--prepare)). Это приведет к тому, что агент запросит файл анимации с сервера и сохранит его в буфере браузера на локальном компьютере.

Метод [**говорите**](speak-method.md) позволяет программировать символ, автоматически синхронизируя выходные данные с помощью пакета LIP. Дополнительные сведения см. в разделе «выходные данные» этого документа.

Для размещения символа в новом месте можно использовать метод [**MoveTo**](moveto-method.md) . При вызове метода **MoveTo** Microsoft Agent автоматически воспроизводит соответствующую анимацию на основе текущего местоположения символа, а затем перемещает кадр символа. Аналогичным образом при вызове [**жестуреат**](gestureat-method.md)Microsoft Agent воспроизводит соответствующую анимацию жестуринг на основе расположения символа и расположения, указанного в вызове.

Чтобы скрыть символ, вызовите метод [Hide](hide-method.md) . При этом автоматически воспроизводится символ, связанный с состоянием **скрытия** символа, а затем рамка символа скрывается. Однако можно также скрыть или показать символ, установив свойство [**Visible**](visible-property.md) символа.

Microsoft Agent обрабатывает все вызовы *анимации или* асинхронно. Это позволяет коду приложения продолжать обработку других событий во время обработки запроса. Например, вызовы метода [**Play**](play-method.md) помещают анимацию в очередь для символа, чтобы анимация могла воспроизводиться последовательно. Однако это означает, что вы не можете предположить, что вызов других функций будет выполняться после анимации, приведенной в коде. Например, оператор, следующий за вызовом **Play** или [**MoveTo**](moveto-method.md) , будет выполняться до завершения анимации.

Вы можете синхронизировать код с анимацией в очереди символов, создав ссылку на объект на запрос анимации, а при начале или завершении анимации — наблюдать за событиями [запросов](the-request-object.md) , которые сервер использует для уведомления клиентов символа. Например, если требуется, чтобы окно сообщения отображалось, когда символ завершает анимацию, можно поместить вызов окна сообщения в подпрограммы обработки событий [**рекуесткомплете**](requestcomplete-event.md) , проверив конкретный идентификатор запроса.

Если символ скрыт, сервер не воспроизводит анимацию. Однако он по-прежнему помещает и обрабатывает запрос анимации (воспроизводит анимацию) и передает клиенту состояние запроса. В скрытом состоянии символ не может стать входным — активным. Однако если пользователь говорит имя символа (при включенном речевом вводе), сервер автоматически отображает этот символ.

Когда клиентское приложение загружает несколько символов одновременно, службы анимации Microsoft Agent позволяют анимировать символы независимо или использовать методы [**ожидания**](wait-method.md), [**прерывания**](interrupt-method.md)или [**остановки**](stop-method.md) для синхронизации анимации друг с другом.

Кроме того, Microsoft Agent автоматически воспроизводит другие анимации. Например, если состояние символа не изменилось в течение нескольких секунд, агент начнет воспроизводить анимацию, назначенную анимации **состояние простоя** символа. Аналогично, если речевой ввод включен, агент воспроизводит анимацию **прослушивания** символа, **а затем** прослушивает анимацию при обнаружении utterance. Эти управляемые сервером анимации называются *состояниями* и определяются при создании символа. Дополнительные сведения см. в разделе [Разработка символов для Microsoft Agent](agent-states.md).

 

 