---
title: замена приложения Windows изображений и просмотра факсов с помощью команды предварительного просмотра
description: начиная с Windows XP, пользователи могут просматривать, переворачивать, печатать и изменять изображения.
ms.assetid: cb08756b-6a5d-424d-ab6d-2e34d180ec4e
keywords:
- Windows Средство просмотра изображений и факсов
- Команда предварительной версии
- рекомендации, Windows средство просмотра изображений и факсов
- рекомендации, команда предварительной версии
- производительность, Windows средство просмотра изображений и факсов
- производительность, команда предварительного просмотра
- регистрация, команда предварительного просмотра
- регистрация, команда слайд-шоу
- Команда показа слайдов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 518e32f7b7bf33db26e534c92cfe2fb46c9a51bc444f04f4881f18fb1fe6c738
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119608524"
---
# <a name="replacing-the-windows-picture-and-fax-viewer-application-using-the-preview-verb"></a>замена приложения Windows изображений и просмотра факсов с помощью команды предварительного просмотра

\[средство просмотра изображений и факсов поддерживается только в Windows XP. \]

начиная с Windows XP, пользователи могут просматривать, переворачивать, печатать и изменять изображения. некоторые из этих функций предоставляются через оболочку Windows, а другие — через Windows приложения для просмотра изображений и факсов. хотя Windows средство просмотра изображений и факсов предоставляет отличный базовый набор функций и является ключевой частью процесса работы с образами, если вы решили, вы можете легко заменить его другим приложением. этот документ призван помочь в эффективном замене Windows изображений и средств просмотра факсов без потери важных функций или ухудшения удобства работы пользователей.

-   [Рекомендации](#best-practices)
    -   [Производительность](#performance)
    -   [Функции](#features)
    -   [Поддержка формата](#format-support)
-   [Регистрация для команды предварительной версии](#registering-for-the-preview-verb)
-   [Регистрация для команды изменения](#registering-for-the-edit-verb)
-   [Регистрация для команды показа слайдов](#registering-for-the-slideshow-verb)
-   [Связанные темы](#related-topics)

## <a name="best-practices"></a>Советы и рекомендации

в Windows XP и более поздних версиях оболочка содержит команду, которую можно использовать для предоставления пользователям возможности предварительного просмотра изображений. Он называется *предварительной версией*. Эта команда выделяет основную задачу пользователя для изображений, которые просматриваются. чтобы этот интерфейс работал правильно, по умолчанию владельцем окна "Windows изображений и факсов" владеет предварительная связь.

Windows средство просмотра изображений и факсов или любое приложение, которому принадлежит сопоставление файлов, включает элемент, запускающий приложение редактирования пользователя. Поскольку команда предварительного просмотра используется только для предварительного просмотра изображений, а не для редактирования, приложение должно соблюдать осторожность, следуя рекомендациям, приведенным в этом документе, при создании этой связи.

Необходимо убедиться, что приложение, которое редактирует изображения, по-прежнему может принимать участие в команде Edit. Например, если у пользователя есть изображение Microsoft Picture! установлен, если дважды щелкнуть файл .jpg, компьютер должен запустить приложение Windows изображений и просмотра факсов. Но если щелкнуть **изменить** на панели инструментов, то компьютер должен запустить Picture! с этим .jpgным файлом.

при замене Windows изображений и средств просмотра факсов необходимо учитывать три аспекта. А именно:

-   [Производительность](#performance)
-   [Функции](#features)
-   [Поддержка формата](#format-support)

### <a name="performance"></a>Производительность

Основное внимание в производительности — скорость, с которой образы загружаются. хотя метрики производительности не предоставляются, следует попытаться заменить Windows изображений и средств просмотра факсов приложением, которое соответствует или увеличит производительность.

Само приложение должно загружаться быстро. Одной из основных проблем, с которыми сталкиваются пользователи при работе с приложениями, принимающими связи с образами, является время ожидания загрузки приложения. Это часто обусловлено повышенной нагрузкой приложения при двойном щелчке файла изображения, даже если пользователь просто хочет просмотреть файл. Он лучше подходит пользователю, если вы предоставляете параметры, которые быстро принимают их в приложении, где они могут редактировать изображение только в том случае, когда это нужно.

### <a name="features"></a>Функции

существует минимальный набор функций, которые приложение должно предоставить при замене приложения Windows изображений и просмотра факсов. Вот они:



| Компонент                            | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Отображать изображение в лучшем соответствии             | Это дает пользователю возможность увидеть все изображение, масштабированное до размера, который лучше всего подходит для видимого пространства окна приложения. Таким образом, они могут видеть все изображение, даже если оно слегка снижено путем масштабирования. Это значение должно быть задано по умолчанию каждый раз, когда загружается изображение, которое больше, чем видимое пространство. В противном случае изображение должно отобразиться в его фактическом размере. Например, изображение пикселей 64 x 64 не следует масштабировать до размера 600 x 600, просто потому, что это размер окна приложения. |
| Отобразить изображение с фактическим размером          | Это дает пользователю возможность увидеть все изображение с фактическим разрешением. Это позволяет им просматривать его в соответствующем размере и сдвигать изображение. Это значение не должно быть представлением по умолчанию, если размер изображения меньше, чем отображаемое в приложении пространство.                                                                                                                                                                                                                                                              |
| Увеличить изображение                    | Это позволяет пользователю увеличивать часть изображения, чтобы исследовать более детальные сведения, или просто увеличить небольшое изображение. Это похоже на отображение фактического размера изображения, но позволяет пользователю управлять тем, насколько близко они будут просматривать изображение.                                                                                                                                                                                                                                                                                            |
| Уменьшить изображение                  | Это позволяет пользователю уменьшить масштаб и получить более широкое представление. Это похоже на отображение изображения в лучшем соответствии, но позволяет пользователю контролировать, насколько далеко они просматривают изображение.                                                                                                                                                                                                                                                                                                                                                          |
| Следующее изображение                         | Это позволяет пользователю видеть следующее изображение в списке. Этот список может быть всеми образами в текущей папке или всеми изображениями, которые пользователь выбирает в ходе операции многовыборки. то есть при щелчке мыши и перетаскивании для выделения изображений или нажатии кнопки управления и щелчке отдельных файлов.                                                                                                                                                                                                                       |
| Предыдущее изображение                     | Это позволяет пользователю просматривать предыдущее изображение в списке.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Повернуть по часовой стрелке на 90 градусов        | Это позволяет пользователю вращать изображение по часовой стрелке по кварталам. Windows XP автоматически сохраняет изображение при его повороте, чтобы снизить вероятность потери качества изображения. Приложение также может поворачивать небольшие инкременты, но 90 градусов — это стандартный способ вращения цифровых изображений.                                                                                                                                                                                                                                 |
| Повернуть на 90 градусов против часовой стрелки | Это позволяет пользователю вращать изображение против часовой стрелки по кварталам.                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Печать                              | Это позволяет пользователю распечатать отображаемое в данный момент изображение.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Сохранить как                            | Это позволяет пользователю сохранить изображение в указанную папку.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Удалить изображение                       | Это позволяет пользователю удалить образ.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Справка                               | Это предоставляет пользователю справочную документацию, которая касается использования приложения для просмотра.                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Свойства                         | Это позволяет пользователю просматривать или изменять свойства изображения, обычно сведения о файле изображения (EXIF), хранящиеся на каждом изображении.                                                                                                                                                                                                                                                                                                                                                                                      |
| Изменить                               | Это позволяет пользователю запускать предпочтительную программу редактирования, зарегистрированную для команды редактирования на изображении.                                                                                                                                                                                                                                                                                                                                                                                                                             |



 

### <a name="format-support"></a>Поддержка формата

поскольку приложение не поддерживает все образы, рекомендуется использовать Windows GDI+ для поддержки форматов изображений. однако если вы решили не использовать GDI+, приложение должно принять только те сопоставления файлов, для которых оно было протестировано и известно, что оно работает. затем, если пользователю нужно просмотреть необрабатываемый формат, Windows средство просмотра изображений и факсов по-прежнему может предоставить доступ.

например, Windows средство просмотра изображений и факсов предоставляет ряд инструментов для редактирования заметок в tiff-изображениях. Если эта функция не повторяется в приложении, не следует регистрировать приложение для обработки изображений в формате TIFF. Основной принцип должен быть уверенным в том, что пользователь не теряет никакой функциональности.

## <a name="registering-for-the-preview-verb"></a>Регистрация для команды предварительной версии

Регистрация приложения для выполнения команды предварительной версии довольно проста. В реестре перейдите к следующему значению приложения, где Application. JPEG представляет имя ключа сопоставления файлов приложения (Дополнительные сведения см. в разделе [программы по умолчанию](/windows/desktop/shell/default-programs) ):

```
HKEY_CLASSES_ROOT
   Application.Jpeg
      shell
         open
            command
               (Default) = app.exe %1
```

Измените имя **открытого** подраздела на «Preview», как показано ниже.

```
HKEY_CLASSES_ROOT
   Application.Jpeg
      shell
         preview
            command
               (Default) = app.exe %1
```

При этом приложение регистрируется и становится приложением по умолчанию для команды предварительного просмотра для файла .jpg. Также требуется следующее.

**HKey \_ \_Корневые классы** \\ **.jpg** \( умолчанию) = Application. JPEG

## <a name="registering-for-the-edit-verb"></a>Регистрация для команды изменения

При этом приложение регистрируется для команды редактирования и становится новым приложением по умолчанию для редактирования изображения. Зарегистрированное приложение должно принять во время установки функцию редактирования существующего приложения по умолчанию и установить ее в качестве обработчика во время удаления. Это можно сделать, зарегистрировав новое приложение, расположенное ниже в списке взаимосвязей, чем приложение по умолчанию. Приложение по умолчанию регистрируется здесь:

```
HKEY_CLASSES_ROOT
   SystemFileAssociations
      image
         shell
            edit
               command
                  (Default) = app.exe %1
```

Новое приложение должно зарегистрироваться здесь:

```
HKEY_CLASSES_ROOT
   Application.Jpeg
      shell
         edit
            command
               (Default) = app.exe %1
```

## <a name="registering-for-the-slideshow-verb"></a>Регистрация для команды показа слайдов

начиная с Windows Vista, приложение может также зарегистрировать команду **показа слайдов** . Приложения, реализующие показ слайдов, могут быть зарегистрированы для вызова при выборе команды показ слайдов. Эта регистрация выполняется точно так же, как описано в приведенной выше команде предварительной версии. Настоятельно рекомендуется, чтобы приложения реализуют Дроптаржет форму команды. Таким образом, им можно передать полный набор элементов. Реализация Дроптаржет регистрируется, как показано ниже:

```
HKEY_CLASSES_ROOT
   Application.Jpeg
      shell
         slideshow
            DropTarget
               CLSID = {CLSID of the implementation}
```

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Общие сведения о сопоставлении файлов](/windows/desktop/shell/fa-intro)
</dt> <dt>

[О GDI+](../gdiplus/-gdiplus-about-gdi--about.md)
</dt> </dl>

 

 