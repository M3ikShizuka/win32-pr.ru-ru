---
title: Функция Мперрормессажеформат (Мпклиент. h)
description: Возвращает отформатированное сообщение об ошибке на основе кода ошибки.
ms.assetid: C125FCE4-3BB0-4608-BBF3-E7FEF17D0807
keywords:
- функции мперрормессажеформат устаревших функций среды Windows
topic_type:
- apiref
api_name:
- MpErrorMessageFormat
api_location:
- MpClient.dll
api_type:
- DllExport
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 124bf9e2c5c2ecc18f286b99f0c3b93695abd3f6a40853fcc47de580edef5db4
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117883511"
---
# <a name="mperrormessageformat-function"></a>Функция Мперрормессажеформат

Возвращает отформатированное сообщение об ошибке на основе кода ошибки.

## <a name="syntax"></a>Синтаксис


```C++
HRESULT WINAPI MpErrorMessageFormat(
  _In_  MPHANDLE hMpHandle,
  _In_  HRESULT  hrError,
  _Out_ LPWSTR   *pwszErrorDesc
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*хмфандле* \[ окне\]
</dt> <dd>

Тип: **мфандле**

Обработчик для интерфейса диспетчера защиты от вредоносных программ. Этот маркер возвращается функцией [**мпманажеропен**](mpmanageropen.md) .

</dd> <dt>

*хреррор* \[ окне\]
</dt> <dd>

Тип: **HRESULT**

Код ошибки на основе **HRESULT**.

</dd> <dt>

*пвсзеррордеск* \[ заполняет\]
</dt> <dd>

Тип: **LPWSTR \***

Возвращает отформатированное сообщение об ошибке на основе *хреррор*. Эту строку необходимо освободить с помощью [**мпфримемори**](mpfreememory.md).

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Тип: **HRESULT**

Если функция выполнена успешно, возвращается значение **S \_**.

Если функция завершается ошибкой, возвращаемое значение является неудачным кодом **HRESULT** .

## <a name="remarks"></a>Remarks

Эта функция поддерживает форматирование системных кодов ошибок в дополнение к конкретным кодам ошибок, возвращаемым функциями защиты от вредоносных программ. Коды ошибок **HRESULT** , характерные для функций защиты от вредоносных программ, имеют значение 0x50. Ниже приведен список подмножества кодов ошибок, связанных с защитой от вредоносных программ, которые могут возвращаться различными функциями защиты от вредоносных программ. При использовании макроса **HRESULT \_ из \_ \_ состояния MP** приведенные ниже коды ошибок можно преобразовать в **значение HRESULT**. Список других возможных кодов ошибок см. в статье [коды ошибок модуля защиты клиента Forefront Client Security](https://support.microsoft.com/kb/939359) .



| Код ошибки                              | Описание                                                                                                                 |
|-----------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|
| Ошибка \_ \_ подсистемы MP                     | В службе защиты от вредоносных программ не загружено ни одного модуля для выполнения запрошенной операции.                                              |
| Ошибка \_ MP \_ без \_ памяти                   | Модуль защиты от вредоносных программ обнаружил нехватки памяти.                                                               |
| \_сбой удаления пакета управления с ошибками \_ \_               | Не удалось выполнить операцию удаления для определенной угрозы.                                                                              |
| \_ \_ сбой карантина пакета управления с ошибками \_           | Сбой операции карантина для определенной угрозы.                                                                          |
| \_ \_ \_ не \_ найдена угроза пакета управления с ошибками           | Конкретная угроза больше не существует в системе.                                                                         |
| \_Удаление пакета управления с ошибками \_ \_ не \_ поддерживается       | Операция удаления для определенной угрозы в типе контейнера не поддерживается.                                          |
| пакет управления с ОШИБКАми \_ \_ Удаление \_ неизменяемого \_ контейнера | Из-за политики ядра операция удаления определенной угрозы в заблокированном контейнере не поддерживается. (Архивы почты.) |
| Ошибка \_ MP \_ баддб \_ олденгине             | В запросе на обновление сигнатуры были указаны старые файлы подсистемы или подписи.                                                    |



 

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|-------------------------------------|-----------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 8 \[ только классические приложения\]<br/>                                              |
| Минимальная версия сервера<br/> | Windows Server 2012 \[ только классические приложения\]<br/>                                    |
| Header<br/>                   | <dl> <dt>Мпклиент. h</dt> </dl>   |
| DLL<br/>                      | <dl> <dt>MpClient.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**мпфримемори**](mpfreememory.md)
</dt> <dt>

[**мпманажеропен**](mpmanageropen.md)
</dt> <dt>

[Коды ошибок модуля защиты от вредоносных программ Forefront Client Security](https://support.microsoft.com/kb/939359)
</dt> </dl>

 

 





