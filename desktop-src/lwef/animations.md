---
title: Анимации
description: Анимации
ms.assetid: 8bd9ac94-3f86-4168-bf33-7a2c8d11907d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bf1b9f5e8daa320390f5c19c3c4c27cb8195a8fe
ms.sourcegitcommit: bf526e267d3991892733bdd229c66d5365cf244a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2021
ms.locfileid: "104562538"
---
# <a name="animations"></a>Анимации

\[Microsoft Agent является устаревшим в Windows 7 и может быть недоступен в последующих версиях Windows.\]

Анимация символа отражает его пол, возраст, личность и поведение. Число и типы создаваемых анимаций для символа зависят от того, что делает ваш символ и как он реагирует на различные ситуации.

Как и в традиционных анимациях, цифровые анимации включают в себя создание ряда слегка отличающихся изображений, которые при последовательном отображении предоставляют иллюзию действий. Создание изображений с высококачественными анимациями может потребовать квалифицированного аниматор, но стиль и представление создаваемого символа также влияют на качество. Многомерные символы с простыми фигурами и функциями иногда могут быть как эффективными (или более эффективными, чем) высоковизуализированными символами. Нет необходимости создавать реалистичные образы, отображать эффективный символ. Многие популярные мультипликационные символы в презентации не являются реалистичными, но они эффективны, так как аниматор распознает, как передавать действия и распознавания эмоций. В приложении содержатся общие сведения об основных принципах разработки анимации.

### <a name="frames"></a>Получен

Каждая анимация, создаваемая для символа Microsoft Agent, состоит из временной последовательности кадров. Каждый кадр анимации состоит из одного или нескольких растровых изображений. Изображения могут быть небольшими по мере необходимости или крупнее самого фрейма.

Такие сведения о анимации, как мерцание глаза или Перемещение пальца, могут быть добавлены в качестве дополнительных изображений для рамки. Можно наложить несколько изображений, чтобы создать составной объект и изменить их расположение на слоях. Этот метод позволяет повторно использовать изображения в нескольких кадрах и изменять сведения, которые меняются. Например, если вы хотите, чтобы каждый кадр имел свою руку, для каждого кадра можно использовать базовый образ, который содержит все, кроме руки и наложение базового образа с другим изображением руки. Аналогично, если вы хотите сделать символ мигающим, можно наложить другой набор глаз на базовый образ для каждого кадра. Изображения также могут быть смещены от базового образа. Однако будет отображена только часть изображения, которая существует в пределах размера фрейма.

В анимации может быть столько кадров, сколько нужно. Однако типичная анимация усредняет около 14 кадров так, чтобы она воспроизводилась не более шести секунд. Это небольшое время гарантирует, что ваш символ будет реагировать на вводимые пользователем данные. Кроме того, чем больше число кадров, тем больше размер файла анимации. Для скачанных веб-символов следует сохранить размер файла анимации как можно меньше, не создавая достаточного размера кадров, чтобы анимация символа не отображалась жерки.

### <a name="image-design"></a>Разработка образа

Для создания изображений для кадров анимации можно использовать любое средство для работы с графикой или анимацией при условии, что конечные изображения хранятся в точечном рисунке Windows (. BMP). При создании образов используйте редактор символов Microsoft Agent (доступный в [загружаемом файле](https://www.microsoft.com/download/en/details.aspx?id=14765)) для сборки, последовательности и времени образов, предоставления других символьных данных и компиляции всей информации в конце файла символов.

Изображения символов должны разрабатываться на цветовой палитре 256, сохраняя 20 стандартных цветов системы Windows в стандартном положении палитры (первые 10 и последние 10 позиций). Это означает, что цветовая палитра вашего символа может использовать стандартные системные цвета и до 236 других цветов. При определении палитры включите все Props, используемые символом в анимации. Если цветовая палитра символов помещает цвета в позиции системного цвета, эти цвета символов будут перезаписаны системными цветами при создании палитры Microsoft Agent.

Чем больше число цветов, используемых в цветовой палитре, тем больше вероятность того, что часть цветов символов может быть повторно сопоставлена для систем, настроенных на 8-разрядное (256) значение цвета. Рассмотрите также использование палитры приложения, в котором будет использоваться символ. Лучше не допустить повторного сопоставления цветов ведущего приложения и наоборот. Аналогично, если планируется поддержка одновременного отображения нескольких символов, вам, вероятно, потребуется поддерживать единообразную палитру для этих символов. Вы можете использовать в своем символе только стандартные системные цвета, если вы нацелены на пользователей с 8-разрядной конфигурацией цвета. Однако это по-прежнему может не препятствовать повторному сопоставлению цвета символа, если другое приложение значительно переопределяет цветовую палитру. В системах, для которых установлено более высокое разрешение цвета, повторное сопоставление цветовой палитры не должно быть проблемой, так как система автоматически управляет цветовыми палитрами.

Использование большего количества цветов в изображении также может увеличить общий размер файла анимации. Количество цветов и частота вариации могут определять степень сжатия файла символов. Например, двумерный символ, который использует только несколько цветов, будет сжиматься лучше, чем трехмерный, затененный символ.

Для всего файла символов необходимо использовать одну и ту же цветовую палитру. Изменить палитру для различных анимаций нельзя. При попытке поддержки 8-разрядных цветовых конфигураций рассмотрите возможность использования той же палитры для приложения и любых других символов, которые вы планируете поддерживать.

11-<sup>е</sup> позиции в палитре по умолчанию определяется как цвет прозрачности (или альфа), хотя цвет можно также задать с помощью редактора символов Microsoft Agent. Службы анимации Microsoft Agent отображают прозрачные пикселы в этом цвете, поэтому используйте цвет изображений только в том месте, где требуется прозрачность.

Внимательно рассмотрите форму символа, так как это может повлиять на производительность анимации. Чтобы отобразить символ, службы анимации создают окно области на основе общего образа. Небольшие нестандартные области часто занимают больше данных о регионах и могут снизить производительность анимации символа. Таким образом, по возможности избегайте пропусков или однопиксельных элементов и сведений.

Избегайте сглаживания внешнего края символа. Хотя сглаживание является хорошим методом уменьшения зубчатых краев, он основан на смежных цветах. Так как ваш символ может отображаться поверх различных цветов, сглаживание внешнего края может сделать ваш символ некачественным для других фоновых рисунков. Тем не менее можно использовать сглаживание для внутренних сведений об этом символе без возникновения этой проблемы.

### <a name="frame-size"></a>Размер кадра

Размер фрейма обычно не должен превышать 128 x 128 пикселей. Хотя символы могут быть больше или меньше в любом измерении, редактор символов Microsoft Agent использует его в качестве размера отображения и масштабирует символы изображения, если вы определили больший размер кадра. Размер кадра 128 x 128 обеспечивает разумные компромиссы с пространством, которое символ будет занимать на экране. Приложение может масштабировать символ во время выполнения.

### <a name="frame-duration"></a>Длительность кадра

Чтобы задать продолжительность отображения каждого кадра анимации перед переходом к следующему кадру, можно использовать редактор символов Microsoft Agent. Задайте продолжительность каждого кадра не менее 10 сотых долей секунды (10 кадров в секунду). в некоторых системах все меньше может быть неощутимым. Вы также можете задать длительность дольше, но не используйте неестественные паузы в действии.

Редактор символов Microsoft Agent также поддерживает ветвление от одного кадра в анимации к другому на основе предоставленных процентных значений вероятности. Для любого конкретного кадра можно определить до трех разных ветвей. Ветвление позволяет создавать анимации, которые могут меняться при воспроизведении и анимации цикла. Однако будьте внимательны при использовании ветвления, так как это может привести к возникновению проблем при попытке воспроизвести одну анимацию после другой. Например, если вы воспроизводите анимацию цикла или ветвление, она может продолжать работать бессрочно, пока не будет использован метод " [**прекратить**](stop-method.md) ". Если вы не уверены, следует избегать ветвления.

Кадры, у которых нет изображений и для которых задано нулевое значение длительности, не отображаются, если они включены в анимацию. Эту функцию можно использовать для создания кадров, поддерживающих ветвление без отображения. Однако будет отображен кадр, у которого еще нет изображений с длительностью больше нуля. Поэтому не следует включать в анимацию пустые кадры, так как пользователь может не иметь возможности отличить пустой фрейм от, когда этот символ скрыт.

### <a name="frame-transition"></a>Переход кадров

При проектировании анимации рассмотрите, как плавно переходить от анимации и к ней. Например, если вы создаете анимацию, в которой действия с символами находятся справа, а другой, в котором остались жесты, вы хотите плавно анимировать этот символ из одной позиции в другую. Хотя это можно сделать в любой анимации, лучшим решением будет определение нейтральной или переходной позиции, с которой начинается и возвращается символ. Анимация с нейтральной позицией может быть включена как часть анимации или как отдельная анимация. В редакторе символов Microsoft Agent можно указать дополнительную анимацию **возвращаемых** символов для каждой анимации символа. Анимация **возврата** обычно должна содержать не более 2-4 кадров, поэтому символ может быстро перейти к нейтральной позиции.

Например, используя сценарий "жестуринг Right, а затем жестуринг Left", можно создать анимацию **жестуреригхт** , начав с рамки, где символ отображается в нейтральной позиции, и добавить кадры с изображениями, которые расширяют руки символа вправо. Затем создайте его **возвращаемую** анимацию: дополнительную анимацию с изображениями, которые возвращают символ в нейтральное расположение. Это можно назначить в качестве анимации возврата для анимации **жестуреригхт** . Затем создайте анимацию **жестурелефт** , которая начинается с нейтральной позиции и расширяет ARM символа влево. Наконец, создайте дополнительную анимацию **возврата** для этой анимации. Анимация **возврата** обычно начинается с изображения, следующего за последним изображением предыдущей анимации.

Запуск и возврат к одной и той же нейтральной позицией либо в анимации, либо с помощью анимации возврата позволяет воспроизводить любую анимацию в любом порядке. Службы анимации Microsoft Agent автоматически воспроизводят назначенную анимацию возврата во многих ситуациях. Например, службы воспроизводят назначенную анимацию **возврата** перед воспроизведением анимации состояния состояние простоя символов. Рекомендуется определить и назначить анимацию **возврата** , если анимации еще не заканчиваются нейтральной позицией.

Если вы хотите предоставить собственные переходы между конкретными анимациями; Например, поскольку вы всегда воспроизводите их в четко определенном порядке, можно избежать определения анимации **возврата** . Однако рекомендуется начинать и завершать последовательность анимации из нейтрального расположения.

### <a name="speaking-animation"></a>Анимация речи

Укажите изображения рот для каждой анимации, в течение которых должен располагаться символ, если только дизайн символа не имеет анимированного рта или не указывает на речевой вывод. Как правило, очень важно движение рот. Символ может показаться менее умным, ликабле или честным, если его движение рот не синхронизировано со своими голосовыми функциями. Изображения рот позволяют вашему символу синхронизировать пакет LIP с выходными данными. Изображения рот определяются отдельно и как файлы точечных рисунков Windows. Они должны соответствовать той же цветовой палитре, что и другие изображения в анимации.

Службы анимации Microsoft Agent отображают кадры анимации поверх последнего кадра анимации, также называемого *кадром речи* анимации. Например, когда символ говорит в анимации **жестуреригхт** , службы анимации накладывают кадры анимации рот на последний кадр **жестуреригхт**. Символ не может говорить во время анимации, поэтому вы можете указать только изображения рот только для последнего кадра анимации. Кроме того, кадром речи должен быть конечный кадр анимации, поэтому символ не может говорить в циклической анимации.

Как правило, изображения рот следует указывать в том же размере, что и кадр (и базовый образ), но включать только область, которая анимируется как часть движения рот, и отображать остальную часть изображения в прозрачном цвете. Разработайте изображение таким образом, чтобы оно соответствовало изображению в кадре речи, если оно наложено поверх него. Для правильной проверки соответствия, скорее всего, потребуется создать отдельный набор изображений рот для каждой анимации, в которой этот символ говорит.

Изображение рот может включать больше самого рта, например Чин или другие части текста символа, когда он говорит. Однако если вы перемещаете руку или подмножество, обратите внимание, что это может показаться случайным образом, поскольку отображаемый наложение рот будет основываться на текущем phoneme произнесенной фразы. Кроме того, сервер вырезает изображение рот в контур изображения кадра речи. Разработайте изображение наложения рот, чтобы оно оставалось в структуре базового изображения кадра, так как сервер использует базовый образ для создания границы окна для символа.

Редактор символов Microsoft Agent позволяет определить семь основных положений рот, которые соответствуют общим фигурам phoneme рот, приведенным в следующей таблице.

**Изображения анимации**



| Расположение рот | Пример изображения                       | Представление                                                                                                                     |
|----------------|------------------------------------|------------------------------------------------------------------------------------------------------------------------------------|
| Закрытое         | :::image type="icon" source="images/g07ci01.gif":::<br/> | Обычная замкнутая фигура рот. Также используется для фонемы, например "m", как в "MOM", "b", как в "Bob", "f", как в "Фифе".<br/>           |
| Открытая-Wide 1    | :::image type="icon" source="images/g07ci02.gif":::<br/> | Рот немного открыт с полной шириной. Используется для таких фонемы, как «g», как в «ГАГ», «l», как в «перерыва», ««», ««», «слышать».<br/> |
| Открытая-Wide 2    | :::image type="icon" source="images/g07ci03.gif":::<br/> | Рот частично открыт, с полной шириной. Используется для фонемы, например "n", как в "нун", "d", как в "отец", "t", как в "т.".<br/>    |
| Открытая-Wide 3    | :::image type="icon" source="images/g07ci04.gif":::<br/> | Рот открыт с полной шириной. Используется для фонемы, например "u", как в "Хут", "EA", как в "головном," "вашем" виде "вред".<br/>          |
| Открытая-широкая 4    | :::image type="icon" source="images/g07ci05.gif":::<br/> | Рот полностью открыт, с полной шириной. Используется для фонемы, таких как «a», как в «Hat», «как», как в «как».<br/>                   |
| Открыть — Средний    | :::image type="icon" source="images/g07ci06.gif":::<br/> | Рот открыт в половину ширины. Используется для фонемы, например "Oy", как в "Ахой", "o", как в "горячем".<br/>                              |
| Открытая-узкий    | :::image type="icon" source="images/g07ci07.gif":::<br/> | Рот открыт с небольшой шириной. Используется для фонемы, например «o», как в «хуп», «o», как в «надеюсь, «w», как в «за».<br/>           |



 

 

 





