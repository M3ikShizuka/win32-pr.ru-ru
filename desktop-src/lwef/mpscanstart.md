---
title: Функция Мпсканстарт (Мпклиент. h)
description: Запускает операцию сканирования.
ms.assetid: 3AF147C8-A41F-4193-AE28-72C1FBD18BA2
keywords:
- Функции Мпсканстарт устаревшие функции среды Windows
topic_type:
- apiref
api_name:
- MpScanStart
api_location:
- MpClient.dll
api_type:
- DllExport
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 9d343787edc85a18dc7471d19165999a7252d18a
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "103988922"
---
# <a name="mpscanstart-function"></a>Функция Мпсканстарт

Запускает операцию сканирования.

## <a name="syntax"></a>Синтаксис


```C++
HRESULT WINAPI MpScanStart(
  _In_     MPHANDLE          hMpHandle,
  _In_     MPSCAN_TYPE       ScanType,
  _In_     DWORD             dwScanOptions,
  _In_opt_ PMPSCAN_RESOURCES pScanResources,
  _In_opt_ PMPCALLBACK_INFO  pCallbackInfo,
  _Out_    PMPHANDLE         phScanHandle
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*хмфандле* \[ окне\]
</dt> <dd>

Тип: **мфандле**

Обработчик для интерфейса диспетчера защиты от вредоносных программ. Этот маркер возвращается функцией [**мпманажеропен**](mpmanageropen.md) .

</dd> <dt>

*Скантипе* \[ окне\]
</dt> <dd>

Тип: **[ **мпскан \_ тип**](mpscan-type.md)**

Указывает тип проверки. Этот параметр должен быть одним из членов [**\_ типа мпскан**](mpscan-type.md) енуератион.

</dd> <dt>

*двсканоптионс* \[ окне\]
</dt> <dd>

Тип: **DWORD**

Указывает различные параметры для операции сканирования.



| Значение                                                                                                                                                                                                       | Значение                                                                                                                                                                                                                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="MPSCAN_OPTION_NONE"></span><span id="mpscan_option_none"></span><dl> <dt>**\_параметр мпскан \_ None**</dt> </dl>                               | Конкретный параметр не запрашивается.<br/>                                                                                                                                                                                                                           |
| <span id="MPSCAN_OPTION_ASYNC"></span><span id="mpscan_option_async"></span><dl> <dt>**\_параметр мпскан \_ Async**</dt> </dl>                            | Операция просмотра должна быть асинхронной, где **мпсканстарт** возвращается сразу после успешного запуска проверки. (По умолчанию операция сканирования является синхронной, то есть **мпсканстарт** будет возвращаться только после завершения проверки.)<br/>      |
| <span id="MPSCAN_OPTION_PROGRESS"></span><span id="mpscan_option_progress"></span><dl> <dt>**\_ \_ ход выполнения параметра мпскан**</dt> </dl>                   | Вызывающий объект заинтересован в получении сведений о ходе проверки с помощью обратного вызова.<br/>                                                                                                                                                                            |
| <span id="MPSCAN_OPTION_LOWPRIORITY"></span><span id="mpscan_option_lowpriority"></span><dl> <dt>**МПСКАН, \_ параметр \_ ловприорити**</dt> </dl>          | Выполните проверку с низким приоритетом. (По умолчанию операция просмотра выполняется с обычным приоритетом.)<br/>                                                                                                                                                     |
| <span id="MPSCAN_OPTION_PACKEDEXES"></span><span id="mpscan_option_packedexes"></span><dl> <dt>**МПСКАН, \_ параметр \_ паккедексес**</dt> </dl>             | Проверьте Упакованные исполняемые файлы для возможных угроз.<br/>                                                                                                                                                                                                              |
| <span id="MPSCAN_OPTION_ARCHIVES"></span><span id="mpscan_option_archives"></span><dl> <dt>**\_ \_ архивы параметров мпскан**</dt> </dl>                   | Проверьте содержимое архива на предмет возможных угроз. Архивы — это файлы с расширениями, такими как ZIP, CAB или tar.<br/>                                                                                                                                                |
| <span id="MPSCAN_OPTION_HEURISTICS"></span><span id="mpscan_option_heuristics"></span><dl> <dt>**\_ \_ эвристика параметра мпскан**</dt> </dl>             | Включить проверку на основе эвристики. Будет проверяться наличие угроз с типом обнаружения Эвристика.<br/>                                                                                                                                                        |
| <span id="MPSCAN_OPTION_REPORTFRIENDLY"></span><span id="mpscan_option_reportfriendly"></span><dl> <dt>**МПСКАН, \_ параметр \_ репортфриендли**</dt> </dl> | Отчитываться о понятных элементах при просмотре ресурсов. Это предназначено только для внутреннего использования.<br/>                                                                                                                                                                          |
| <span id="MPSCAN_OPTION_REPORTUNKNOWN"></span><span id="mpscan_option_reportunknown"></span><dl> <dt>**МПСКАН, \_ параметр \_ репортункновн**</dt> </dl>    | Сообщать об неизвестных элементах при просмотре ресурса. Это предназначено только для внутреннего использования.<br/>                                                                                                                                                                           |
| <span id="MPSCAN_OPTION_NOCONSOLIDATE"></span><span id="mpscan_option_noconsolidate"></span><dl> <dt>**МПСКАН \_ параметр \_ объединения**</dt> </dl>    | Не объединяйте результаты проверки с глобальным представлением угроз. Это полезно для клиента (например, почтового клиента), который хочет управлять автоматическим интерфейсом, а не допускает очистку от вредоносных программ по умолчанию. Это предназначено только для внутреннего использования.<br/> |



 

</dd> <dt>

*псканресаурцес* \[ в необязательное\]
</dt> <dd>

Тип: **пмпскан \_ Resources**

Указатель на сведения о ресурсе сканирования. Для быстрой проверки этот параметр должен иметь **значение NULL** . Это необязательный параметр для полной проверки. Для просмотра ресурсов этот параметр должен быть указан по крайней мере с одной структурой сведений о ресурсах. Для сканирования конкретных ресурсов вызывающий объект должен **иметь \_ универсальное** разрешение на чтение для ресурса. См. раздел [**\_ ресурсы мпскан**](mpscan-resources.md).

</dd> <dt>

*пкаллбаккинфо* \[ в необязательное\]
</dt> <dd>

Тип: **пмпкаллбакк \_ info** .

Указатель на сведения о обратном вызове, используемые для передачи клиенту изменений состояния сканирования (например, запуск и завершение) и сведений о ходе выполнения. [**\_ Данные мпкаллбакк**](mpcallback-data.md) , переданные в функцию обратного вызова, сообщают о фактическом состоянии сканирования и сведениях о ходе выполнения. Ниже приведен список возможных обратных вызовов.



| Значение                                                                                                                                                                                                       | Значение                                                                                                                                                                                                                                                                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="MPNOTIFY_SCAN_START"></span><span id="mpnotify_scan_start"></span><dl> <dt>**\_Начало СКАНИРОВАНИЯ \_ мпнотифи**</dt> </dl>                            | Операция сканирования запущена.<br/>                                                                                                                                                                                                                                                                                       |
| <span id="MPNOTIFY_SCAN_COMPLETE"></span><span id="mpnotify_scan_complete"></span><dl> <dt>**\_сканирование мпнотифи \_ завершено**</dt> </dl>                   | Операция сканирования завершена. Дополнительные сведения можно получить с помощью структуры [**\_ данных мпскан**](mpscan-data.md) .<br/>                                                                                                                                                                                              |
| <span id="MPNOTIFY_SCAN_PAUSED"></span><span id="mpnotify_scan_paused"></span><dl> <dt>**МПНОТИФИ \_ сканирование \_ приостановлено**</dt> </dl>                         | Операция сканирования приостановлена.<br/>                                                                                                                                                                                                                                                                                     |
| <span id="MPNOTIFY_SCAN_RESUMED"></span><span id="mpnotify_scan_resumed"></span><dl> <dt>**\_сканирование мпнотифи \_ возобновлено**</dt> </dl>                      | Операция сканирования возобновлена после приостановки.<br/>                                                                                                                                                                                                                                                                            |
| <span id="MPNOTIFY_SCAN_CANCEL"></span><span id="mpnotify_scan_cancel"></span><dl> <dt>**\_Отмена СКАНИРОВАНИЯ \_ мпнотифи**</dt> </dl>                         | Операция сканирования была отменена.<br/>                                                                                                                                                                                                                                                                                 |
| <span id="MPNOTIFY_SCAN_PROGRESS"></span><span id="mpnotify_scan_progress"></span><dl> <dt>**\_ \_ ход выполнения сканирования мпнотифи**</dt> </dl>                   | Сведения о ходе сканирования. Дополнительные сведения (например, Статистика ресурсов) доступны через структуру [**\_ данных мпскан**](mpscan-data.md) .<br/>                                                                                                                                                               |
| <span id="MPNOTIFY_SCAN_ERROR"></span><span id="mpnotify_scan_error"></span><dl> <dt>**\_Ошибка СКАНИРОВАНИЯ \_ мпнотифи**</dt> </dl>                            | Просмотр сведений об ошибках для определенного ресурса. Сведения о конкретных ресурсах доступны через [**структуру \_ данных мпскан**](mpscan-data.md) .<br/>                                                                                                                                                             |
| <span id="MPNOTIFY_SCAN_INFECTED"></span><span id="mpnotify_scan_infected"></span><dl> <dt>**МПНОТИФИ \_ сканирование с \_ заражением**</dt> </dl>                   | Проверка обнаружила зараженный ресурс. Обратите внимание, что в большинстве случаев это приведет к тому, что в конце сканирования будет отправлено несколько угроз. Иногда он может не материализоваться как угроза из-за исключений. Дополнительные сведения о зараженных ресурсах доступны через структуру [**\_ данных мпскан**](mpscan-data.md) .<br/> |
| <span id="MPNOTIFY_SCAN_MEMORYSTART"></span><span id="mpnotify_scan_memorystart"></span><dl> <dt>**МПНОТИФИ \_ Scan \_ мемористарт**</dt> </dl>          | Запущена Быстрая проверка части полной проверки.<br/>                                                                                                                                                                                                                                                              |
| <span id="MPNOTIFY_SCAN_MEMORYCOMPLETE"></span><span id="mpnotify_scan_memorycomplete"></span><dl> <dt>**МПНОТИФИ \_ Scan \_ меморикомплете**</dt> </dl> | Часть быстрой проверки завершена.<br/>                                                                                                                                                                                                                                                            |
| <span id="MPNOTIFY_INTERNAL_FAILURE"></span><span id="mpnotify_internal_failure"></span><dl> <dt>**\_внутренний \_ сбой мпнотифи**</dt> </dl>          | Операция сканирования обнаружила общий сбой. Значение *hResult* в [**мпкаллбакк \_ данных**](mpcallback-data.md) имеет конкретный код ошибки.<br/>                                                                                                                                                                   |



 

</dd> <dt>

*фсканхандле* \[ заполняет\]
</dt> <dd>

Тип: **пмфандле**

Возвращенный обработчик сканирования, который обозначает инициированную в данный момент проверку. Этот маркер можно использовать в последующих вызовах функций, например для получения результатов проверки. Этот маркер должен быть закрыт функцией [**мфандлеклосе**](mphandleclose.md) .

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Тип: **HRESULT**

Если функция выполнена успешно, возвращается значение **S \_**.

Если функция завершается ошибкой, возвращаемое значение является неудачным кодом **HRESULT** . Вызывающий объект может использовать функцию [**мперрормессажеформат**](mperrormessageformat.md) для получения общего описания сообщения об ошибке.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-----------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | \[Только классические приложения Windows 8\]<br/>                                              |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2012\]<br/>                                    |
| Header<br/>                   | <dl> <dt>Мпклиент. h</dt> </dl>   |
| DLL<br/>                      | <dl> <dt>MpClient.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**мперрормессажеформат**](mperrormessageformat.md)
</dt> <dt>

[**мфандлеклосе**](mphandleclose.md)
</dt> <dt>

[**мпманажеропен**](mpmanageropen.md)
</dt> <dt>

[**\_данные мпкаллбакк**](mpcallback-data.md)
</dt> <dt>

[**\_данные мпскан**](mpscan-data.md)
</dt> <dt>

[**\_ресурсы мпскан**](mpscan-resources.md)
</dt> <dt>

[**\_тип мпскан**](mpscan-type.md)
</dt> </dl>

 

 





