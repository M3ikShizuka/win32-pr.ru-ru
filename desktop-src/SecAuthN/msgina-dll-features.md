---
description: При написании модели GINA для замены стандартной библиотеки DLL Microsoft GINA (MSGina.dll) может потребоваться предоставить некоторые или все стандартные функции GINA.
ms.assetid: cd2ce7b7-6167-4451-9f6e-881676a2145c
title: MSGina.dll функции
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2acf5d1e7e9dccf9581b27ea2fef3deb1c2c8aa218a1b0a711b7015134e1d2d1
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117786753"
---
# <a name="msginadll-features"></a>MSGina.dll функции

При написании [*модели GINA*](../secgloss/g-gly.md) для замены стандартной библиотеки DLL Microsoft gina (MSGina.dll) может потребоваться предоставить некоторые или все стандартные функции GINA. Ниже приведен список стандартных функций и краткое описание их управления.

> [!Note]  
> библиотеки dll GINA не учитываются в Windows Vista.

 

Значения разделов реестра управляют доступностью или поведением многих из этих стандартных функций GINA. Если не указано иное, эти ключевые значения относятся к разделу реестра Winlogon и имеют тип значения \[ reg \_ SZ \] . Фактический путь к ключу [*Winlogon*](../secgloss/w-gly.md) :

**\\HKEY на \_ локальном \_ компьютере \\ программное обеспечение \\ Microsoft \\ Windows NT \\ CurrentVersion \\ Winlogon**

-   **Диалоговое окно с юридическим уведомлением**

    В некоторых случаях у всех, кто имеет доступ к рабочей станции для входа в систему, и приступить к работе, если нет уведомления о том, что система предназначена только для полномочных пользователей. Кроме того, многие пользователи хотят, чтобы сообщения, относящиеся к конкретной компании, отображались перед нормальным входом. Стандартная функция GINA использует два значения ключа реестра Winlogon, чтобы система отображала информацию перед входом в систему. Если какое-либо значение ключа имеется и содержит строку, отличную от NULL, то перед обычным экраном приветствия отображается диалоговое окно с юридическим уведомлением. Эти имена значений ключей показаны в следующей таблице.

    

    | Имя значения ключа         | Содержимое                                                            |
    |------------------------|---------------------------------------------------------------------|
    | **легалнотицекаптион** | Строка, отображаемая в качестве заголовка диалогового окна юридического уведомления |
    | **легалнотицетекст**    | Строка, отображаемая как сообщение в диалоговом окне "Юридическая информация" |

    

     

-   **Отобразить имя последнего пользователя**

    По умолчанию на экране входа в систему отображается имя последнего пользователя для успешного входа на рабочую станцию. Эта функция управляется значением раздела реестра **донтдисплайластусернаме** . Если для этого параметра задано значение 1, то имя пользователя не отображается в диалоговом окне входа в систему.

-   **Автоматический вход**

    Эта функция позволяет системе автоматически входить в систему пользователя при каждом запуске системы, используя сведения по умолчанию и отключая клавиши CTRL + ALT + DEL для входа.

    Эта функция использует следующие значения ключа Winlogon.

    

    | Значение                 | Содержимое                                           |
    |-----------------------|----------------------------------------------------|
    | **аутоадминлогон**    | 1                                                  |
    | **аутологонкаунт**    | Число попыток автоматического входа в систему       |
    | **дефаултусернаме**   | Имя учетной записи пользователя                       |
    | **дефаултдомаиннаме** | Имя домена, в котором находится учетная запись пользователя |

    

     

    Если значение ключа **аутоадминлогон** имеется и содержит его, а значение ключа **аутологонкаунт** отсутствует, автоматический вход выполняется каждый раз, когда текущий пользователь выходит из системы или перезагружается. Учетная запись, на которую выполняется вход, указывается с помощью значений ключа **дефаултусернаме** и **дефаултдомаиннаме** . Пароль для учетной записи можно указать одним из двух способов. для компьютеров, работающих под управлением одной из операционных систем Windows Server 2003 или Windows XP, пароль должен храниться как секрет с помощью функции [**лсастореприватедата**](/windows/win32/api/ntsecapi/nf-ntsecapi-lsastoreprivatedata) . Дополнительные сведения см. [в разделе Защита пароля автоматического входа](protecting-the-automatic-logon-password.md). Другой способ сохранения пароля — это открытый текст в записи **DefaultPassword** ключа Winlogon. в целях безопасности этот метод следует избегать. Если пароль сохраняется с помощью функции **лсастореприватедата** , не следует указывать параметр **DefaultPassword** в разделе Winlogon.

    Если значение ключа **аутоадминлогон** имеется и содержит один, и если значение ключа **аутологонкаунт** имеется и не равно нулю, **аутологонкаунт** определит количество выполняемых автоматически входов в систему. При каждом перезапуске системы значение **аутологонкаунт** будет уменьшено на единицу до тех пор, пока не достигнет нуля. Если **аутологонкаунт** достигает нуля, учетная запись не будет автоматически входить в систему, значение ключа **аутологонкаунт** и значение параметра **DefaultPassword** , если оно используется, будет удалено из реестра, а **аутоадминлогон** будет установлено в 0.

    Существует одно дополнительное предостережение по использованию **аутоадминлогон**: по умолчанию MSGina.dll проверяет состояние клавиши Shift, если **аутоадминлогон** имеет значение One. Если во время загрузки удерживается клавиша SHIFT, MSGina.dll будет игнорировать значение ключа **аутоадминлогон** и запросить у пользователя сведения о идентификации и проверке подлинности в интерактивном режиме. Эта функция полезна при отладке выделенного приложения. Чтобы отключить значение клавиши SHIFT, задайте для **игнорешифтоверриде** значения ключа.

-   **Разрешить завершение работы без проверки подлинности**

    Можно настроить [*GINA*](../secgloss/g-gly.md) по умолчанию, включив в диалоговом окне входа кнопку **Завершение работы** . Это позволяет пользователям завершать работу системы без предварительного входа в систему. Следующее значение ключа определяет, включена ли эта кнопка.

    

    | Значение                    | Описание                                           |
    |--------------------------|-------------------------------------------------------|
    | **шутдовнвисаутлогон** | Один для включения кнопки; ноль для исключения кнопки |

    

     

-   **АктивацияUserinit.exe**

    Userinit.exe — это приложение, выполняемое MSGina.dll, когда пользователь вошел в систему. Она выполняется в [*контексте*](../secgloss/c-gly.md) пользователя, вошедшего в систему, и на рабочем столе приложения. Его целью является настройка среды пользователя, включая восстановление использования сети, установку параметров профиля, таких как шрифты и цвета экрана, а также выполнение сценариев входа в систему. После выполнения этих задач Userinit.exe выполняет программы оболочки пользователя. Программы оболочки наследуют среду, которая Userinit.exe настраивается. Конкретные программы оболочки, которые Userinit.exe выполняются, сохраняются в значении ключа **оболочки** в разделе реестра Winlogon.

    Значение ключа **оболочки** может содержать разделенный запятыми список выполняемых программ. Windows Обозреватель является программой оболочки по умолчанию и будет выполняться, если значение ключа **оболочки** равно null или отсутствует. по умолчанию в списке отображается Windows Explorer.

-   **Параметры безопасности, вошедшие в систему**

    При входе в систему, если пользователь вводит контрольную [*последовательность*](../secgloss/s-gly.md) (SAS), пользователю предлагается экран с параметрами безопасности. Ниже перечислены возможные параметры.

    -   Завершите работу системы.
    -   Выйдите из системы.
    -   Измените пароль.
    -   Перейдите к списку задач.
    -   Блокировка рабочей станции.

    Замена модели GINA может обеспечить аналогичные параметры при получении события SAS при входе пользователя в систему.

 

 
