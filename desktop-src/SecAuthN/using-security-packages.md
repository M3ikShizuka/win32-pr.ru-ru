---
description: Список пакетов безопасности, которые могут использоваться с SSPI.
ms.assetid: f5999d41-b334-49be-8883-d9b9042d20dc
title: Использование пакетов безопасности
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d9253ee2ac4cec98e3c68a1f3dab80a71b216e6235af78722864ee0e0958897c
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118915197"
---
# <a name="using-security-packages"></a>Использование пакетов безопасности

[*Интерфейс поставщика поддержки безопасности*](../secgloss/s-gly.md) (SSPI) можно использовать со следующими [*пакетами безопасности*](../secgloss/s-gly.md):

-   [Пакет безопасности Kerberos](#kerberos-security-package)
-   [Пакет безопасности NTLM](#ntlm-security-package)

Протоколы [*Kerberos*](../secgloss/k-gly.md) и NTLM реализуются как пакеты безопасности от Secur32.dll [*поставщика поддержки безопасности*](../secgloss/s-gly.md) (SSP), предоставляемого вместе с операционной системой. По умолчанию поддержка проверки подлинности Kerberos и NTLM загружается [*локальным администратором безопасности*](../secgloss/l-gly.md) на компьютере при запуске системы. в доменах Windows Server или Windows любой пакет можно использовать для проверки подлинности сетевых входов и подключений клиентов и серверов. Какой из них используется, зависит от возможностей компьютера на другой стороне соединения. Протокол Kerberos всегда предпочтителен, если он доступен.

После установки контекста безопасности для интерактивного пользователя другой экземпляр пакета Kerberos или NTLM может быть загружен процессом, запущенным в контексте безопасности пользователя, для поддержки обмена, подписывания, проверки, шифрования и расшифровки сообщений. Однако ни один из процессов, кроме LSA, всегда имеет доступ к [*ключам сеанса*](../secgloss/s-gly.md) или билетам в кэше учетных данных.

Системные службы и приложения транспортного уровня получают доступ к SSP через SSPI, который предоставляет функции для перечисления пакетов безопасности, доступных в системе, выбора пакета и использования этого пакета для получения проверенного подключения.

Методы в SSPI — это универсальные подпрограммы, которые разработчики могут использовать без знания сведений о конкретном [*протоколе безопасности*](../secgloss/s-gly.md). Например, при проверке подлинности подключения клиента/сервера:

1.  Приложение на клиентской стороне подключения отправляет [*учетные данные*](../secgloss/c-gly.md) на сервер с помощью функции SSPI [**InitializeSecurityContext (Общие)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta).
2.  Приложение на стороне сервера соединения отвечает с помощью функции SSPI [**AcceptSecurityContext (Общие)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).
3.  После проверки подлинности подключения LSA на сервере использует сведения от клиента для создания [*маркера доступа*](../secgloss/a-gly.md).
4.  Затем сервер может вызвать функцию SSPI [**имперсонатесекуритиконтекст**](/windows/desktop/api/Sspi/nf-sspi-impersonatesecuritycontext) , чтобы присоединить маркер доступа к потоку олицетворения для службы.

## <a name="kerberos-security-package"></a>Пакет безопасности Kerberos

[*Пакет безопасности*](../secgloss/s-gly.md) Kerberos основан на [*протоколе проверки подлинности Kerberos*](../secgloss/k-gly.md).

Если протокол Kerberos используется для проверки подлинности подключения клиента или сервера, [**InitializeSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) создает сообщение GSSAPI, которое содержит \_ сообщение о требованиях КРБ AP \_ от клиента. [**AcceptSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) затем создает сообщение GSSAPI, которое содержит сообщение о КРБ \_ AP \_ от сервера.

Дополнительные сведения о действиях, выполняемых в фоновом режиме в реализации протокола Kerberos, см. в разделе [Microsoft Kerberos](microsoft-kerberos.md).

Все распределенные службы используют SSPI для доступа к протоколу Kerberos. Частичный список способов использования протокола Kerberos для проверки подлинности включает следующие способы.

-   Службы диспетчера очереди печати
-   Удаленный доступ к файлам CIFS/SMB
-   Запросы [*LDAP*](../secgloss/l-gly.md) к Active Directory
-   Распределенное управление файловой системой и ссылки
-   Проверка подлинности "узел — узел безопасности" между узлами IPsec
-   Запросы на резервирование для сетевого качества обслуживания
-   проверка подлинности в интрасети для службы IIS
-   Удаленное управление сервером или рабочей станцией с помощью RPC с проверкой подлинности
-   [*Запросы сертификатов*](../secgloss/c-gly.md) службам сертификации для пользователей и компьютеров домена

## <a name="ntlm-security-package"></a>Пакет безопасности NTLM

Пакет безопасности NTLM основан на протоколе проверки подлинности NTLM.

 

 
