---
description: Указание шифров SChannel и стойкости шифров
ms.assetid: b87d3e72-df7b-4a00-854e-c3706565ed7d
title: Указание шифров SChannel и стойкости шифров
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b04ec37cfea633814881fba5bfd71ad15205a1bd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105664160"
---
# <a name="specifying-schannel-ciphers-and-cipher-strengths"></a>Указание шифров SChannel и стойкости шифров

Для обмена данными между клиентом и сервером по умолчанию канал Schannel обеспечивает согласование наилучшего шифра, доступного на основе включенных в реестре. Приложения могут ограничить шифры и стойкости шифра, разрешенные для соединения, с помощью членов структуры учетных данных [**SChannel \_**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) следующим образом:

1.  Задайте для элемента **палгсуппортедалгс** массив [**\_ идентификаторов ALG**](../seccrypto/alg-id.md) , содержащий допустимые шифры. Дополнительные сведения см. в разделе Идентификаторы шифров.
2.  Задайте для элементов **двминимумЦиферстренгс** и/или **двмаксимумЦиферстренгс** допустимые минимальные и максимальные сильные стороны. Дополнительные сведения см. в разделе значения стойкости шифра.
3.  Передайте структуру учетных данных [**\_ SChannel**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) (с помощью параметра *паусдата* ) в вызове функции [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) . Эта функция возвращает маркер учетных данных.
4.  Укажите обработчик учетных данных в вызове клиентской функции [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) или функции [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) на стороне сервера.

## <a name="cipher-ids"></a>Идентификаторы шифров

Поведением по умолчанию Schannel является запрос лучшего шифра, доступного на основе записей Schannel в системном реестре. Не изменяйте системный реестр; параметры, которые он содержит для канала SChannel, используются глобально и повлияют на другие приложения. Список допустимых констант см. в разделе [**\_ идентификатор алгоритма**](../seccrypto/alg-id.md).

## <a name="cipher-strength-values"></a>Значения стойкости шифра

Эта функция SChannel обычно используется для ограничения подключения к внутренним или экспортируемым шифрам стойкости. Внутренние сильные стороны включают 56 и 128 бит, а сила экспорта ограничена 56 битами. Если для параметра минимальное и максимальное значение установлено значение нуль SChannel, будут использоваться все доступные стойкости шифра.

Используя TLS или SSL 3,0, установите для элемента **двминимумЦиферстренгс** значение-1 (отрицательное значение), чтобы включить комплекты шифров со значением "null Cipher", которые предоставляют подписи, но не шифруются. Если для **двмаксимумЦиферстренгс** также задано значение-1, будут включены только наборы "нулевое шифрование". Этот параметр предназначен только для разработки и не должен использоваться в рабочих системах.

## <a name="querying-cipher-information"></a>Запрос сведений о шифрах

Чтобы получить параметры стойкости шифра для учетных данных, вызовите функцию [**куерикредентиалсаттрибутес**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) и укажите \_ \_ стойкости шифра SECPKG attr в \_ качестве параметра *улаттрибуте* .

Чтобы получить список поддерживаемых алгоритмов для учетных данных, вызовите [**куерикредентиалсаттрибутес**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) с SECPKG \_ attr \_ Supported \_ АЛГС в качестве параметра *улаттрибуте* .

 

 
