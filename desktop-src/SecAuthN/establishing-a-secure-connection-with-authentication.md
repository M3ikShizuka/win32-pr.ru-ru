---
description: В протоколе клиентских и серверных приложений сервер привязывается к коммуникационному порту, например к сокету или интерфейсу RPC.
ms.assetid: 176d4ca5-83dd-42ef-b116-227d4badc0dd
title: Установление безопасного подключения с проверкой подлинности
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ad5f9458cf578481e049dcf2b41d6607b3c6151ce16a938cfe0e398ae7b3bf56
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119008252"
---
# <a name="establishing-a-secure-connection-with-authentication"></a>Установление безопасного подключения с проверкой подлинности

В [*протоколе*](/windows/desktop/SecGloss/a-gly)клиентских и серверных приложений сервер привязывается к коммуникационному порту, например к сокету или интерфейсу RPC. Затем сервер ожидает подключения клиента и запроса службы. Роль безопасности при настройке подключения состоит из двух сверток в случае взаимной проверки подлинности:

-   Проверка подлинности клиента сервером.
-   Проверка подлинности сервера клиентом.

Клиентские и серверные компоненты транспортного приложения используют [*пакет безопасности*](/windows/desktop/SecGloss/s-gly) для установления безопасного подключения для передачи сообщений. Первым шагом в установке безопасного соединения является создание [*контекста безопасности*](/windows/desktop/SecGloss/s-gly). то есть непрозрачная структура данных, содержащая данные безопасности, относящиеся к соединению, такие как [*сеансовый ключ*](/windows/desktop/SecGloss/s-gly) и продолжительность сеанса.

Контекст безопасности — это, по сути, сообщение от пакета безопасности, связанного с клиентом, с пакетом безопасности, связанным с сервером. Следовательно, для создания контекста безопасности обычно требуется как клиент, так и сервер, чтобы выполнять вызовы соответствующих пакетов безопасности. Дополнительные сведения о контекстных функциях см. в разделе [Управление контекстами](authentication-functions.md).

Протокол, используемый для установления защищенного подключения с проверкой подлинности, включает в себя обмен одним или несколькими маркерами безопасности между клиентом и сервером. Эти маркеры отправляются в виде непрозрачных сообщений по двум сторонам вместе с другими сведениями, зависящими от [*протокола приложения*](/windows/desktop/SecGloss/a-gly). Как непрозрачное сообщение, маркер получается от функции пакета безопасности клиентом, который не может интерпретировать или изменить его и переслать в качестве сообщения на сервер. Маркер также является непрозрачным для сервера, который не может ни интерпретировать, ни изменять маркер. Сервер пересылает непрозрачный маркер в пакет безопасности для интерпретации. Затем пакет информирует сервер о проверке подлинности клиента или о сбое проверки подлинности.

Клиент получает маркер сервера в сообщении, получает маркер из полученного сообщения и использует этот маркер в вызове пакета безопасности. Затем клиент вызывает пакет безопасности еще раз, указывая, установлено ли безопасное соединение или требуется ли дальнейший обмен, прежде чем безопасное подключение будет готово. Теоретически нет ограничений на количество обменов маркерами безопасности. На практике требуется только ограниченное количество Exchange. Проверка подлинности NTLM основана на схеме «запрос/ответ» и использует три нечего для проверки подлинности клиента на сервере. Протокол [*Kerberos*](/windows/desktop/SecGloss/k-gly) версии 5,0 может потребовать дополнительных обменов сообщениями.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Инициализация контекста клиента](client-context-initialization.md)
</dt> <dt>

[Инициализация контекста сервера](server-context-initialization.md)
</dt> </dl>

 

 
