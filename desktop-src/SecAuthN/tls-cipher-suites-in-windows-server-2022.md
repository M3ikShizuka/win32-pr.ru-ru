---
description: узнайте о комплектах шифров TLS в Windows Server 2022. Комплекты шифров можно согласовать только для тех версий TLS, которые их поддерживают.
title: комплекты шифров TLS в Windows Server 2022.
ms.topic: article
ms.date: 02/16/2021
ms.openlocfilehash: b6f4e7f574c9f13d3b53bebb15e743b11ccbe424
ms.sourcegitcommit: 2c13d0f1620f7c089687ef1d97e8c1d22e5d537a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2021
ms.locfileid: "128520900"
---
# <a name="tls-cipher-suites-in-windows-server-2022"></a>комплекты шифров TLS в Windows Server 2022

Комплекты шифров можно согласовать только для тех версий TLS, которые их поддерживают. Наивысшая поддерживаемая версия TLS всегда является предпочтительной в подтверждении TLS.

Доступность комплектов шифров должна контролироваться одним из двух способов:

-   Порядок приоритетов по умолчанию переопределяется при настройке списка приоритетов. Комплекты шифров, отсутствующие в списке приоритетов, не используются.
-   Разрешено, если приложение передает SCH с \_ использованием \_ надежного \_ шифрования: поставщик Microsoft SChannel будет отфильтровывать известные ненадежные наборы шифров, когда приложение использует \_ \_ флаг стойкого \_ шифрования SCH. Комплекты шифров RC4, DES, Export и NULL отфильтровываются.

> [!IMPORTANT]
> Веб-службы HTTP/2 завершаются сбоем с комплектами шифров, отличными от HTTP и 2. Сведения о том, как обеспечить работу веб-служб с клиентами и браузерами HTTP/2, см. [в разделе Развертывание настраиваемого упорядочения набора шифров](https://support.microsoft.com/help/4032720/how-to-deploy-custom-cipher-suite-ordering-in-windows-server-2016).

 

Соответствие требованиям FIPS стало более сложным благодаря добавлению эллиптических кривых, что делает столбец с включенным режимом FIPS в предыдущих версиях этой таблицы в заблуждение. Например, набор шифров, например TLS \_ ECDHE \_ RSA \_ с \_ AES \_ 128 \_ CBC \_ SHA256, является жалобой FIPS только при использовании эллиптических кривых NIST. Чтобы узнать, какие сочетания эллиптических кривых и комплектов шифров будут включены в режиме FIPS, ознакомьтесь с разделом 3.3.1 [рекомендаций по выбору, настройке и использованию реализаций TLS]( https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-52r2.pdf).

для Windows Server 2022 следующие комплекты шифров включены и в этом порядке по умолчанию используют поставщик Microsoft Schannel:



| Строка набора шифров                                                                           | Разрешено в SCH, \_ использование \_ стойкого \_ шифрования | Версии протокола TLS/SSL                     |
|-----------------------------------------------------------------------------------------------|-------------------------------------|-----------------------------------------------|
| TLS \_ AES \_ 256 \_ gcm \_ SHA384<br/>                                                               | да<br/>                      | Протокол TLS 1.3<br/>                            |
| TLS \_ AES \_ 128 \_ gcm \_ SHA256<br/>                                                               | да<br/>                      | Протокол TLS 1.3<br/>                            |
| TLS \_ ECDHE \_ ECDSA \_ с \_ AES \_ 256 \_ gcm \_ SHA384<br/>                                           | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ ECDHE \_ ECDSA \_ с \_ AES \_ 128 \_ gcm \_ SHA256<br/>                                           | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ ECDHE \_ RSA \_ с \_ AES \_ 256 \_ gcm \_ SHA384<br/>                                             | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ ECDHE \_ RSA \_ с \_ AES \_ 128 \_ gcm \_ SHA256<br/>                                             | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ дхе \_ RSA \_ с \_ AES \_ 256 \_ gcm \_ SHA384<br/>                                               | Нет<br/>                       | TLS 1.2<br/>                            |
| TLS \_ дхе \_ RSA \_ с \_ AES \_ 128 \_ gcm \_ SHA256<br/>                                               | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ ECDHE \_ ECDSA \_ с \_ AES \_ 256 \_ CBC \_ SHA384<br/>                                           | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ ECDHE \_ ECDSA \_ с \_ AES \_ 128 \_ CBC \_ SHA256<br/>                                           | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ ECDHE \_ RSA \_ с \_ AES \_ 256 \_ CBC \_ SHA384<br/>                                             | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ ECDHE \_ RSA \_ с \_ AES \_ 128 \_ CBC \_ SHA256<br/>                                             | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ ECDHE \_ ECDSA \_ с \_ AES \_ 256 \_ CBC \_ SHA<br/>                                              | да<br/>                      | TLS 1,2, TLS 1,1, TLS 1,0<br/>          |
| TLS \_ ECDHE \_ ECDSA \_ с \_ AES \_ 128 \_ CBC \_ SHA<br/>                                              | да<br/>                      | TLS 1,2, TLS 1,1, TLS 1,0<br/>          |
| TLS \_ ECDHE \_ RSA \_ с \_ AES \_ 256 \_ CBC \_ SHA<br/>                                                | да<br/>                      | TLS 1,2, TLS 1,1, TLS 1,0<br/>          |
| TLS \_ ECDHE \_ RSA \_ с \_ AES \_ 128 \_ CBC \_ SHA<br/>                                                | да<br/>                      | TLS 1,2, TLS 1,1, TLS 1,0<br/>          |
| TLS \_ RSA \_ с \_ AES \_ 256 \_ gcm \_ SHA384<br/>                                                    | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ RSA \_ с \_ AES \_ 128 \_ gcm \_ SHA256<br/>                                                    | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ RSA \_ с \_ AES \_ 256 \_ CBC \_ SHA256<br/>                                                    | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ RSA \_ с \_ AES \_ 128 \_ CBC \_ SHA256<br/>                                                    | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ RSA \_ с \_ AES \_ 256 \_ CBC \_ SHA<br/>                                                       | да<br/>                      | TLS 1,2, TLS 1,1, TLS 1,0<br/>          |
| TLS \_ RSA \_ с \_ AES \_ 128 \_ CBC \_ SHA<br/>                                                       | да<br/>                      | TLS 1,2, TLS 1,1, TLS 1,0<br/>          |
| TLS \_ RSA \_ с \_ 3DES \_ еде \_ CBC \_ SHA<br/>                                                      | Нет<br/>                      | TLS 1,2, TLS 1,1, TLS 1,0<br/>          |
| TLS \_ RSA \_ с \_ нулевым \_ SHA256 <br/> Используется только при явном запросе приложения.<br/>       | Нет<br/>                       | TLS 1.2<br/>                            |
| TLS \_ RSA \_ с \_ нулевым \_ SHA <br/> Используется только при явном запросе приложения.<br/>          | Нет<br/>                       | TLS 1,2, TLS 1,1, TLS 1,0, SSL 3,0<br/> |



 

Следующие комплекты шифров поддерживаются поставщиком Schannel (Майкрософт), но не включены по умолчанию.



| Строка набора шифров                                                                               | Разрешено в SCH, \_ использование \_ стойкого \_ шифрования | Версии протокола TLS/SSL                     |
|---------------------------------------------------------------------------------------------------|-------------------------------------|-----------------------------------------------|
| TLS \_ CHACHA20 \_ POLY1305 \_ SHA256<br/>                                                        | да<br/>                      | Протокол TLS 1.3<br/>                            |
| TLS \_ дхе \_ RSA \_ с \_ AES \_ 256 \_ CBC \_ SHA<br/>                                                | да<br/>                      | TLS 1,2, TLS 1,1, TLS 1,0<br/>          |
| TLS \_ дхе \_ RSA \_ с \_ AES \_ 128 \_ CBC \_ SHA<br/>                                                | да<br/>                      | TLS 1,2, TLS 1,1, TLS 1,0<br/>          |
| TLS \_ дхе \_ DSS \_ с \_ AES \_ 256 \_ CBC \_ SHA256<br/>                                             | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ дхе \_ DSS \_ с \_ AES \_ 128 \_ CBC \_ SHA256<br/>                                             | да<br/>                      | TLS 1.2<br/>                            |
| TLS \_ дхе \_ DSS \_ с \_ AES \_ 256 \_ CBC \_ SHA<br/>                                                | да<br/>                      | TLS 1,2, TLS 1,1, TLS 1,0<br/>          |
| TLS \_ дхе \_ DSS \_ с \_ AES \_ 128 \_ CBC \_ SHA<br/>                                                | да<br/>                      | TLS 1,2, TLS 1,1, TLS 1,0<br/>          |
| TLS \_ дхе \_ DSS \_ с \_ 3DES \_ еде \_ CBC \_ SHA<br/>                                               | Нет<br/>                      | TLS 1,2, TLS 1,1, TLS 1,0, SSL 3,0<br/> |
| Алгоритм \_ TLS \_ RSA \_ с \_ \_ алгоритмом SHA 128<br/>                                                          | Нет<br/>                       | TLS 1,2, TLS 1,1, TLS 1,0, SSL 3,0<br/> |
| Алгоритм TLS \_ RSA \_ с \_ RC4 \_ 128 \_ MD5<br/>                                                          | Нет<br/>                       | TLS 1,2, TLS 1,1, TLS 1,0, SSL 3,0<br/> |
| TLS \_ RSA \_ с \_ Des \_ CBC \_ SHA<br/>                                                          | Нет<br/>                       | TLS 1,2, TLS 1,1, TLS 1,0, SSL 3,0<br/> |
| TLS \_ дхе \_ DSS \_ с \_ Des \_ CBC \_ SHA<br/>                                                     | Нет<br/>                       | TLS 1,2, TLS 1,1, TLS 1,0, SSL 3,0<br/> |
| TLS \_ дхе \_ DSS \_ EXPORT1024 \_ с \_ Des \_ CBC \_ SHA<br/>                                         | Нет<br/>                       | TLS 1,2, TLS 1,1, TLS 1,0, SSL 3,0<br/> |
| TLS \_ RSA \_ с \_ неопределенным \_ MD5 <br/> Используется только при явном запросе приложения. <br/> | Нет<br/>                       | TLS 1,2, TLS 1,1, TLS 1,0, SSL 3,0<br/> |
| TLS \_ RSA \_ EXPORT1024 \_ с \_ \_ \_ алгоритмом SHA 56<br/>                                               | Нет<br/>                       | TLS 1,2, TLS 1,1, TLS 1,0, SSL 3,0<br/> |
| \_Экспорт RSA \_ TLS \_ с \_ помощью \_ \_ алгоритма MD5 40<br/>                                                   | Нет<br/>                       | TLS 1,2, TLS 1,1, TLS 1,0, SSL 3,0<br/> |
| TLS \_ RSA \_ EXPORT1024 \_ с \_ Des \_ CBC \_ SHA<br/>                                              | Нет<br/>                       | TLS 1,2, TLS 1,1, TLS 1,0, SSL 3,0<br/> |



 

Следующие наборы шифров PSK включены и в этом порядке по умолчанию используют поставщик Microsoft SChannel:



| Строка набора шифров                              | Разрешено в SCH, \_ использование \_ стойкого \_ шифрования | Версии протокола TLS/SSL |
|--------------------------------------------------|-------------------------------------|---------------------------|
| TLS \_ PSK \_ с \_ AES \_ 256 \_ gcm \_ SHA384<br/> | да<br/>                      | TLS 1.2<br/>        |
| TLS \_ PSK \_ с \_ AES \_ 128 \_ gcm \_ SHA256<br/> | да<br/>                      | TLS 1.2<br/>        |
| TLS \_ PSK \_ с \_ AES \_ 256 \_ CBC \_ SHA384<br/> | да<br/>                      | TLS 1.2<br/>        |
| TLS \_ PSK \_ с \_ AES \_ 128 \_ CBC \_ SHA256<br/> | да<br/>                      | TLS 1.2<br/>        |
| TLS \_ PSK \_ с \_ нулевым \_ SHA384<br/>          | Нет<br/>                       | TLS 1.2<br/>        |
| TLS \_ PSK \_ с \_ нулевым \_ SHA256<br/>          | Нет<br/>                       | TLS 1.2<br/>        |



 

> [!Note]  
> По умолчанию наборы шифров PSK не включены. Приложения должны запрашивать PSK с помощью \_ SCH \_ USE \_ только прешаредкэй. Дополнительные сведения о флагах Schannel см. в разделе [**SChannel \_ cred**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred).

 

Чтобы добавить комплекты шифров, либо разверните групповую политику, либо используйте командлеты TLS.

-   чтобы использовать групповую политику, настройте порядок набора шифров ssl в разделе конфигурация компьютера > административные шаблоны > сеть > конфигурация ssl Параметры с списком приоритет для всех пакетов шифров, которые требуется включить.
-   Сведения об использовании PowerShell см. в разделе [командлеты TLS](/powershell/module/tls/?view=win10-ps).

> [!Note]  
> до Windows 10 строки набора шифров добавляются с эллиптической кривой для определения приоритета кривой. Windows 10 поддерживает настройку порядка приоритета эллиптической кривой, поэтому суффикс эллиптической кривой не является обязательным и переопределяется новым порядковым приоритетом эллиптической кривой, когда он предоставляется, чтобы разрешить организациям использовать групповую политику для настройки различных версий Windows с одинаковыми комплектами шифров.
