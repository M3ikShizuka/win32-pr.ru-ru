---
description: Начальная проверка подлинности выполняется, когда сервер получает ответ на запрос от клиента.
ms.assetid: 8a5cf26b-0b2a-4f19-807b-9ec4d533cdd4
title: Начальная проверка подлинности с помощью Microsoft Digest
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8ed4960d947bbc60df962e6a9b71be755e158c8e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103912479"
---
# <a name="initial-authentication-using-microsoft-digest"></a>Начальная проверка подлинности с помощью Microsoft Digest

Начальная проверка подлинности выполняется, когда сервер получает ответ на запрос от клиента. Проверка подлинности ответа на запрос обычно включает в себя не менее двух серверов:

-   Сервер-источник — получает запрос от клиента и выдает проблему, а затем получает ответ на запрос от клиента, который должен пройти проверку подлинности.
-   Сервер проверки подлинности — получает сведения об авторизации от сервера-источника и выполняет проверку подлинности. Этот сервер обычно является контроллером домена, поддерживающим несколько серверов источника.

Когда исходный сервер получает запрос с заголовком авторизации, содержащим ответ на запрос дайджеста, проверка подлинности продолжается следующим образом:

-   Удостоверение исходного сервера проверяется по отношению к серверу, закодированному в nonce запроса.
-   Проверяется метка времени, закодированная в nonce. Если срок действия nonce истек, а сведения о имени пользователя и пароля действительны, то исходный сервер завершает проверку подлинности, выполняя новый дайджест-запрос с устаревшей директивой со значением "true". Это означает, что только nonce был "устаревшим", и клиент может ответить на новый запрос, используя пароль, использованный в предыдущем ответе. Если клиент получает новую задачу после отправки ответа на запрос для устаревшей задачи, клиент должен создать новый ответ на запрос.
-   Если включено обнаружение воспроизведения, директива NC (число nonce) проверяется на соответствие базе данных сеансов nonce, обслуживаемой сервером.
-   Сервер проверки подлинности идентифицирует и отправляет сведения об авторизации клиента.
-   Сервер проверки подлинности проверяет удостоверение сервера, закодированное в nonce, на идентификатор исходного сервера.
-   Сервер проверки подлинности, который является контроллером домена, получает пароль пользователя.
-   Используя данные авторизации, пароль и идентификатор исходного сервера, сервер проверки подлинности выполняет вычисление значения, которое клиент должен предоставить в директиве ответа ответа на запрос. Сервер проверки подлинности сравнивает вычисленное значение с ответом клиента, чтобы определить успешность или сбой проверки подлинности.

Если проверка подлинности прошла успешно, [*контекст безопасности*](../secgloss/s-gly.md) пользователя и [*ключ сеанса*](../secgloss/s-gly.md) дайджеста возвращаются на сервер-источник. Если проверка подлинности завершается неудачно, на исходном сервере должен выдаваться ответ об ошибке. После успешной проверки подлинности исходный сервер возвращает клиенту запрошенный ресурс.

Ключ сеанса дайджеста, возвращенный сервером проверки подлинности, кэшируется исходным сервером для использования при проверке подлинности будущих запросов. Дополнительные сведения см. в разделе [Проверка подлинности последующих запросов с помощью Microsoft Digest](authenticating-subsequent-requests-using-microsoft-digest.md).

 

 
