---
description: Метод Аппендрекорд создает команду блока данных протокола приложения (КАТЕГОРИЯХ APDU), которая либо добавляет запись в конец базового файла с линейной структурой (EF), либо записывает номер 1 в циклический простой файл.
ms.assetid: 4dd88661-41c4-4238-88c9-279b39afb206
title: 'Метод ISCardISO7816:: Аппендрекорд (Скардссп. h)'
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- ISCardISO7816.AppendRecord
api_type:
- COM
api_location:
- Scardssp.dll
ms.openlocfilehash: 28d1b6762e0a350bb87b673f21fa063ae2478e64
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263587"
---
# <a name="iscardiso7816appendrecord-method"></a>Метод ISCardISO7816:: Аппендрекорд

\[Метод **аппендрекорд** доступен для использования в операционных системах, указанных в разделе требования. Он недоступен для использования в Windows Server 2003 с пакетом обновления 1 (SP1) и более поздней версии, Windows Vista, Windows Server 2008 и последующих версиях операционной системы. [Модули смарт-карт](/previous-versions/windows/desktop/secsmart/smart-card-modules) предоставляют аналогичные функции.\]

Метод **аппендрекорд** создает команду [*блока данных протокола приложения*](../secgloss/a-gly.md) (категориях APDU), которая либо добавляет запись в конец базового файла с линейной структурой (EF), либо записывает номер 1 в циклический простой файл.

## <a name="syntax"></a>Синтаксис


```C++
HRESULT AppendRecord(
  [in]      BYTE         byRefCtrl,
  [in]      LPBYTEBUFFER pData,
  [in, out] LPSCARDCMD   *ppCmd
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*бирефктрл* \[ окне\]
</dt> <dd>

Определяет простейший файл, который необходимо добавить.



| Значение                                                                                                                                                                                | Значение                           |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
| <span id="Current_EF"></span><span id="current_ef"></span><span id="CURRENT_EF"></span><dl> <dt>**Текущая ссылка EF**</dt> </dl>     | Разрядное расположение: 00000000<br/> |
| <span id="Short_EF_ID"></span><span id="short_ef_id"></span><span id="SHORT_EF_ID"></span><dl> <dt>**Краткий идентификатор EF**</dt> </dl> | Битовое расположение: xxxxx000<br/> |
| <span id="Reserved"></span><span id="reserved"></span><span id="RESERVED"></span><dl> <dt>**Зарезервировано**</dt> </dl>             | Разрядное расположение: XXXXXXXX<br/> |



 

</dd> <dt>

*pData* \[ окне\]
</dt> <dd>

Указатель на данные, добавляемые в файл.



| Значение                                                                                                                                                | Значение                 |
|------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
| <span id="Tn"></span><span id="tn"></span><span id="TN"></span><dl> <dt>**Код**</dt> </dl>     | 1 байт<br/>       |
| <span id="Ln_"></span><span id="ln_"></span><span id="LN_"></span><dl> <dt>**LN**</dt> </dl> | 1 или 3 байта<br/> |
| <span id="data"></span><span id="DATA"></span><dl> <dt>**Data**</dt> </dl>                    | LN байт<br/>     |



 

</dd> <dt>

*ппкмд* \[ в, out\]
</dt> <dd>

На входе — указатель на объект интерфейса [**искардкмд**](iscardcmd.md) или **значение NULL**.

При возвращении он заполняется командой КАТЕГОРИЯХ APDU, созданной этой операцией. Если для *ппкмд* было задано **значение NULL**, то объект [*смарт-карты*](../secgloss/s-gly.md) [**искардкмд**](iscardcmd.md) создается внутренне и возвращается с помощью указателя *ппкмд* .

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Метод возвращает одно из следующих возможных значений.



| Код возврата                                                                                   | Описание                                  |
|-----------------------------------------------------------------------------------------------|----------------------------------------------|
| <dl> <dt>**\_ОК**</dt> </dl>          | Operation completed successfully (Операция выполнена успешно).<br/> |
| <dl> <dt>**E \_ INVALIDARG**</dt> </dl>  | Недопустимый параметр.<br/>                |
| <dl> <dt>**\_указатель E**</dt> </dl>     | Передан неверный указатель.<br/>      |
| <dl> <dt>**E \_ OUTOFMEMORY**</dt> </dl> | Недостаточно памяти.<br/>                    |



 

## <a name="remarks"></a>Комментарии

Инкапсулированная команда может быть выполнена только в том случае, если состояние безопасности [*смарт-карты*](../secgloss/s-gly.md) удовлетворяет атрибутам безопасности простейшего файла Read.

Если во время выполнения этой команды выбран другой простейший файл, он может быть обработан без идентификации текущего выбранного файла.

Невозможно прочитать простейшие файлы без структуры записи. Инкапсулированная команда прерывается, если применяется к простейшему файлу без структуры записи.

Список всех методов, предоставляемых этим интерфейсом, см. в разделе [**ISCardISO7816**](iscardiso7816.md).

Кроме приведенных выше кодов ошибок COM, этот интерфейс может возвращать код ошибки смарт-карты, если для завершения запроса была вызвана функция смарт-карты. Дополнительные сведения см. в статье [возвращаемые значения смарт-карты](authentication-return-values.md).

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-----------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Только для \[ классических приложений Windows XP\]<br/>                                             |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2003\]<br/>                                    |
| Окончание поддержки клиента<br/>    | Windows XP<br/>                                                                   |
| Поддержка конца сервера<br/>    | Windows Server 2003<br/>                                                          |
| Header<br/>                   | <dl> <dt>Скардссп. h</dt> </dl>   |
| Библиотека типов<br/>             | <dl> <dt>Скардсрв. tlb</dt> </dl> |
| DLL<br/>                      | <dl> <dt>Scardssp.dll</dt> </dl> |
| IID<br/>                      | IID \_ ISCardISO7816 определен как 53B6AA68-3F56-11D0-916B-00AA00C18068<br/>        |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**ISCardISO7816**](iscardiso7816.md)
</dt> <dt>

[**реадрекорд**](iscardiso7816-readrecord.md)
</dt> <dt>

[**упдатерекорд**](iscardiso7816-updaterecord.md)
</dt> <dt>

[**вритерекорд**](iscardiso7816-writerecord.md)
</dt> </dl>

 

 
