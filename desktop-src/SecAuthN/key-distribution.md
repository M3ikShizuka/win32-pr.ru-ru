---
description: Метод проверки подлинности с помощью секретного ключа не объясняет, как клиент и сервер получают секретный ключ сеанса для использования в сеансах.
ms.assetid: 90ab0359-5079-49e9-809c-0c0005cc61bf
title: Распределение ключей
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9f04a2968e8b7b978bc7b325d65b4a2acf08e1f6
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127461441"
---
# <a name="key-distribution"></a>Распределение ключей

Метод проверки подлинности с помощью секретного ключа не объясняет, как клиент и сервер получают секретный [*ключ сеанса*](../secgloss/s-gly.md) для использования в сеансах. Если это люди, они могут соблюсти секрет и принять ключ. Но если клиент является программой, работающей на рабочей станции, а сервер является службой, работающей на сетевом сервере, этот метод не будет работать.

Клиент хочет взаимодействовать с большим количеством серверов и потребует различных ключей для каждого из них. Сервер взаимодействует с несколькими клиентами и нуждается в различных ключах для каждого из них. Если каждому клиенту требуется отдельный ключ для каждого сервера, и каждому серверу требуется отдельный ключ для каждого клиента, распространение ключей станет проблемой. Кроме того, необходимость хранить и защищать многие ключи на многих компьютерах создает огромную угрозу безопасности.

Имя [*протокола Kerberos*](../secgloss/k-gly.md) предлагает решению проблемы при распространении ключей. Kerberos (или Cerberus) был представлен в классической греческой мифологии — свирепые, трехуровневой собаки, который не позволяет злоумышленникам войти в подсветку. Как и в случае с вымышенной Guard, протокол Kerberos имеет три головки: Клиент, сервер и доверенную третью сторону для исправлять между ними. Доверенным посредником в этом протоколе является центр распространения ключей (KDC).

KDC — это служба, работающая на физическом безопасном сервере. Он поддерживает базу данных со сведениями об учетной записи для всех [*субъектов безопасности*](../secgloss/s-gly.md) в своей сфере. Область — это эквивалент Kerberos домена в Windows.

Наряду с другими сведениями о каждом субъекте безопасности, KDC хранит криптографический ключ, известный только основному и KDC. Это [*главный ключ*](../secgloss/m-gly.md) , используемый в обмене данными между каждым субъектом безопасности и KDC. В большинстве реализаций протокола Kerberos этот главный ключ извлекается с помощью [*хэш-*](../secgloss/h-gly.md) функции из пароля субъекта безопасности.

Когда клиент хочет создать безопасное подключение к серверу, клиент начинает с отправки запроса к KDC, а не к серверу, к которому требуется получить доступ. KDC создает и отправляет клиенту уникальный [*ключ сеанса*](../secgloss/s-gly.md) для клиента и сервер, который используется для проверки подлинности друг друга. KDC имеет доступ как к главному ключу клиента, так и к главному ключу сервера. KDC шифрует копию ключа сеанса на сервере с помощью главного ключа сервера и копирует клиент с помощью главного ключа клиента.

KDC может выполнить свою роль в качестве доверенного посредника, отправив ключ сеанса непосредственно каждому из участвующих участников безопасности, но на практике эта процедура не будет работать по ряду причин. Вместо этого KDC отправляет клиенту оба зашифрованных ключа сеанса. Ключ сеанса для сервера включен в [билет сеанса](session-tickets.md).

 

 
