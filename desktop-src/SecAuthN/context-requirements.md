---
description: Требования к контексту выражаются в виде сочетания битовых флагов, передаваемых в функцию InitializeSecurityContext (General) или AcceptSecurityContext (General).
ms.assetid: 4a44b829-4202-46c0-b17e-04943fa067ab
title: Требования к контексту
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 86af5f71557bdd53229b5c8ed6afc14dc24edb46
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104265016"
---
# <a name="context-requirements"></a>Требования к контексту

Требования к контексту выражаются в виде сочетания битовых флагов, передаваемых в функцию [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) или [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) . Эти флаги влияют на [*контекст*](/windows/desktop/SecGloss/c-gly) несколькими способами. Не все флаги применяются ко всем контекстам. Некоторые из них действительны только для сервера, другие — только для клиента.

Вызывающий объект использует параметр *фконтекстрек* в вызове [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) или [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) для указания набора флагов, которые указывают на необходимые возможности. При возврате функции параметр *пфконтекстаттр* указывает атрибуты установленного контекста. Вызывающий объект определяет, допустимы ли последние атрибуты контекста.

Флаги, запрошенные или возвращенные [**InitializeSecurityContext (Общие)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) , начинаются с префикса ISC. , Запрошенные из [**AcceptSecurityContext (Общие)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) или возвращенные с помощью, имеют префикс ASC. Флаги, передаваемые в функцию, включают REQ, а возвращаемые флаги — RET. Например, флаг запроса для взаимной проверки подлинности, переданный в **InitializeSecurityContext (Общие)** , — это \_ \_ взаимная проверка подлинности ISC req \_ . Сервер, запрашивающий взаимную проверку подлинности, передает \_ \_ \_ в **AcceptSecurityContext (Общие)** взаимную аутентификацию ASC. Если взаимная проверка подлинности достигнута, **InitializeSecurityContext (общая)** возвращает ISC RET взаимную проверку подлинности \_ \_ \_ и **AcceptSecurityContext (General)** возвращает ASC \_ RET \_ взаимной \_ проверки подлинности. Если вызывающий объект запрашивает взаимную проверку подлинности, но [*пакет безопасности*](/windows/desktop/SecGloss/s-gly) указывает, что он не может быть выполнен, вызывающий объект должен решить, следует ли отменить контекст или продолжить.

В следующей таблице описаны различные флаги требований к контексту.



| Flag                             | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ПОЛУЧИТЬ<br/>              | Сервер в транспортном приложении может создавать новые контексты безопасности, имитирующие клиент, который будет приниматься другими серверами в качестве контекстов клиента. Делегат работает, только если \_ задана взаимная проверка подлинности. Сейчас ДЕЛЕГАТ поддерживается только [*протоколом Kerberos*](/windows/desktop/SecGloss/k-gly). Кроме того, протокол Kerberos делегирует только серверу с флагом, ДОВЕРЕНным \_ для \_ делегирования. Не используйте этот флаг для [*ограниченного делегирования*](/windows/desktop/SecGloss/c-gly).<br/> |
| ВЗАИМная \_ Проверка подлинности<br/>          | Взаимодействующие стороны должны проверять подлинность своих удостоверений друг с другом. Без ВЗАИМной \_ проверки подлинности клиент проверяет подлинность удостоверения на сервере. При ВЗАИМной \_ проверке подлинности сервер также должен пройти проверку подлинности на стороне клиента.<br/> При использовании пакета безопасности [*SChannel*](/windows/desktop/SecGloss/s-gly) сервер устанавливает постоянную **\_ \_ взаимную проверку \_ подлинности ASC RET** только в последнем вызове [**AcceptSecurityContext (Negotiate)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext)после успешного завершения сопоставления сертификата.<br/>           |
| обнаружение воспроизведения \_<br/>        | [*Пакет безопасности*](/windows/desktop/SecGloss/s-gly) обнаруживает воспроизводимые пакеты и уведомляет вызывающий объект о том, что пакет был воспроизведен. Использование этого флага подразумевает все условия, заданные флагом целостности.<br/>                                                                                                                                                                                                                                                                                                                      |
| \_Обнаружение последовательности<br/>      | Контекст должен быть разрешен для определения неупорядоченной доставки пакетов позже через функции поддержки сообщений. Использование этого флага подразумевает все условия, заданные флагом целостности.<br/>                                                                                                                                                                                                                                                                                                                                                                                             |
| ЗАЩИТЕ<br/>       | Контекст может защищать данные во время передачи с помощью функций [**енкриптмессаже (Общие)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) и [**декриптмессаже (Общие)**](/windows/win32/api/sspi/nf-sspi-decryptmessage) . Флаг конфиденциальности не работает, если созданный контекст предназначен для учетной записи гостя.<br/>                                                                                                                                                                                                                                                                                                      |
| ИСПОЛЬЗОВАТЬ \_ сеансовый \_ ключ<br/>     | Необходимо согласовать новый [*ключ сеанса*](/windows/desktop/SecGloss/s-gly) .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ЗАПРОС учетных данными \_ \_<br/>    | Если клиент является интерактивным пользователем, пакет безопасности должен по возможности запрашивать у пользователя соответствующие [*учетные данные*](/windows/desktop/SecGloss/c-gly).<br/>                                                                                                                                                                                                                                                                                                                                                                                          |
| ИСПОЛЬЗОВАТЬ \_ предоставляемые учетные данные \_<br/>  | Учетные данные, относящиеся к пакету, доступны во входном буфере. Пакет безопасности может использовать эти [*учетные данные*](/windows/desktop/SecGloss/c-gly) для проверки подлинности подключения.<br/>                                                                                                                                                                                                                                                                                                                                                                |
| Сохранить \_ предоставляемые учетные данные \_<br/> | Указанные учетные данные должны кэшироваться дополнительными учетными данными.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ВЫДЕЛЕНИЕ \_ памяти<br/>      | [*Пакет безопасности*](/windows/desktop/SecGloss/s-gly) должен выделить память. Вызывающий объект должен в конечном итоге вызвать функцию [**фриконтекстбуффер**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) , чтобы освободить память, выделенную пакетом безопасности.<br/>                                                                                                                                                                                                                                                                                                                      |
| ИСПОЛЬЗОВАТЬ \_ \_ стиль DCE<br/>       | Вызывающий объект принимает [*транзакцию*](/windows/desktop/SecGloss/t-gly)с тремя обрезками.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ДАТАГРАММЫ<br/>              | Необходимо использовать семантику [*датаграммы*](/windows/desktop/SecGloss/d-gly) . Дополнительные сведения см. в разделе о [контекстах датаграмм](datagram-contexts.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| CONNECTION<br/>            | Необходимо использовать семантику соединения. Дополнительные сведения см. в разделе [контексты, ориентированные на соединение](connection-oriented-contexts.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Поток<br/>                | Необходимо использовать семантику потока. Дополнительные сведения см. в разделе [потоковые контексты](stream-contexts.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| РАСШИРЕНная \_ Ошибка<br/>       | При сбое контекста необходимо создать сообщения об ошибке для однорангового узла.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| КОНТРОЛЯ<br/>             | Целостность буфера может быть проверена, но не включена последовательность или обнаружение ответов.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| БЕЗ \_ целостности<br/>         | Требование **целостности** игнорируется.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| УКАЗЫВАЕТСЯ<br/>              | Когда сервер олицетворяет контекст, для которого установлен этот флаг, олицетворение дает чрезвычайно ограниченный доступ. Олицетворение с помощью набора IDENTIFY используется для проверки удостоверения клиента.<br/>                                                                                                                                                                                                                                                                                                                                                                                                       |



 

 

