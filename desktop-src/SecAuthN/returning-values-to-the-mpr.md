---
description: Сетевые функции Windows возвращают WN \_ успешно при успешном выполнении или возвращают уникальное ненулевое значение, если функция встречает ошибку. Кроме того, они возвращают расширенные сведения об ошибках с помощью Внетсетластеррор и Сетластеррор.
ms.assetid: cb9d29a1-b3a5-4440-a069-3cd1565b1699
title: Возвращение значений к многопротокольному маршрутизатору
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8c96a5636f57d5c926af4e43e676f0b6db75d164
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103998399"
---
# <a name="returning-values-to-the-mpr"></a>Возвращение значений к многопротокольному маршрутизатору

Сетевые функции Windows возвращают WN \_ успешно при успешном выполнении или возвращают уникальное ненулевое значение, если функция встречает ошибку. Кроме того, они возвращают расширенные сведения об ошибках с помощью [**внетсетластеррор**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) и [**сетластеррор**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror).

Для поддержки описанного выше поведения функции поставщика сети не должны вызывать [**сетластеррор**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) перед возвратом. Это обусловлено тем, что многопротокольный маршрутизатор вызывает **сетластеррор** для функций в API поставщика сети после возврата. Если поставщики сети напрямую вызывают **сетластеррор** , они будут делать лишние вызовы функций. Функции поставщика сети должны просто возвращать код ошибки. Коды ошибок указываются в описании функции или [возвращаемых значениях](network-security-return-values.md). Кроме того, функции поставщика сети могут возвращать [коды системных ошибок](../debug/system-error-codes.md), например недостаток памяти. Единственным исключением является [**нпжеткапс**](/windows/desktop/api/Npapi/nf-npapi-npgetcaps), которое должно возвращать маску, указывающую функции, поддерживаемые поставщиком сети.

Если функция поставщика сети должна возвращать расширенные сведения об ошибке, она должна вызывать [**внетсетластеррор**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora). Эта функция предоставляется операционной системой Windows для использования поставщиками сети. Когда поставщик вызывает **внетсетластеррор**, он может задать строку, содержащую дополнительные сведения об ошибке. Эти сведения хранятся отдельно для каждого потока. Это аналогично [**сетластеррор**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) для приложений Windows. Операционная система Windows вызывает **внетсетластеррор** для проверки строки, хранящейся с помощью **внетсетластеррор** , и, если она найдена, возвращает расширенные сведения об ошибке вызывающему приложению, которое инициировало сетевой запрос.

> [!Note]  
> Префикс Внет [**внетсетластеррор**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) является ошибочным, так как этот API, в отличие от **внетсетластеррор**, не входит в набор API сетевых интерфейсов Windows. **Внетсетластеррор** предназначен для использования только поставщиками сети. Имя **внетсетластеррор** сохраняется для совместимости с существующими поставщиками.

 

 

 
