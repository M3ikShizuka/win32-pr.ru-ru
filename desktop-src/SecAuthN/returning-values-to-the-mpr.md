---
description: Windows сетевые функции возвращают WN \_ успешно при успешном выполнении или возвращают уникальное ненулевое значение, если функция встречает ошибку. Кроме того, они возвращают расширенные сведения об ошибках с помощью Внетсетластеррор и Сетластеррор.
ms.assetid: cb9d29a1-b3a5-4440-a069-3cd1565b1699
title: Возвращение значений к многопротокольному маршрутизатору
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cbbb33a1666252178bd6cfb3c2fca33581149dfdab9e16512b60f82875719018
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118918899"
---
# <a name="returning-values-to-the-mpr"></a>Возвращение значений к многопротокольному маршрутизатору

Windows сетевые функции возвращают WN \_ успешно при успешном выполнении или возвращают уникальное ненулевое значение, если функция встречает ошибку. Кроме того, они возвращают расширенные сведения об ошибках с помощью [**внетсетластеррор**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) и [**сетластеррор**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror).

Для поддержки описанного выше поведения функции поставщика сети не должны вызывать [**сетластеррор**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) перед возвратом. Это обусловлено тем, что многопротокольный маршрутизатор вызывает **сетластеррор** для функций в API поставщика сети после возврата. Если поставщики сети напрямую вызывают **сетластеррор** , они будут делать лишние вызовы функций. Функции поставщика сети должны просто возвращать код ошибки. Коды ошибок указываются в описании функции или [возвращаемых значениях](network-security-return-values.md). Кроме того, функции поставщика сети могут возвращать [коды системных ошибок](../debug/system-error-codes.md), например недостаток памяти. Единственным исключением является [**нпжеткапс**](/windows/desktop/api/Npapi/nf-npapi-npgetcaps), которое должно возвращать маску, указывающую функции, поддерживаемые поставщиком сети.

Если функция поставщика сети должна возвращать расширенные сведения об ошибке, она должна вызывать [**внетсетластеррор**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora). эта функция предоставляется Windows операционной системой для использования поставщиками сети. Когда поставщик вызывает **внетсетластеррор**, он может задать строку, содержащую дополнительные сведения об ошибке. Эти сведения хранятся отдельно для каждого потока. это аналогично [**сетластеррор**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) для приложений Windows. Windows операционная система вызывает **внетсетластеррор** для проверки строки, хранящейся с помощью **внетсетластеррор** , и, если она найдена, возвращает расширенные сведения об ошибке вызывающему приложению, которое инициировало сетевой запрос.

> [!Note]  
> префикс внет [**внетсетластеррор**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) является ошибочным, так как этот API, в отличие от **внетсетластеррор**, не входит в состав набора api Windows networking. **Внетсетластеррор** предназначен для использования только поставщиками сети. Имя **внетсетластеррор** сохраняется для совместимости с существующими поставщиками.

 

 

 
