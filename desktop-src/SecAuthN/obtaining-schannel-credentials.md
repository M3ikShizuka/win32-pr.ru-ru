---
description: В процессе проверки подлинности Schannel требуются учетные данные. Клиент и сервер должны получить действительные учетные данные, чтобы установить контекст безопасности для обмена сообщениями. Пример, демонстрирующий эту процедуру, см. в разделе Получение учетных данных.
ms.assetid: ee4a9908-7ba8-4701-84a4-c50b6b989e82
title: Получение учетных данных SChannel
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 216965d5b6fb1b21c36425242f54150112b2dcfb00dd7184c828aba865bbb5a9
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118921202"
---
# <a name="obtaining-schannel-credentials"></a>Получение учетных данных SChannel

В процессе проверки подлинности Schannel требуются учетные данные. Клиент и сервер должны получить действительные учетные данные, чтобы установить [*контекст безопасности*](../secgloss/s-gly.md) для обмена сообщениями. Пример, демонстрирующий эту процедуру, см. в разделе [Получение учетных данных](getting-a-certificate-for-schannel.md).

Приложение получает учетные данные путем вызова функции [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) , которая возвращает маркер запрошенным учетным данным. Так как дескрипторы учетных данных используются для хранения сведений о конфигурации, один и тот же дескриптор не может использоваться как для операций на стороне клиента, так и для операции на стороне сервера. Это означает, что приложения, поддерживающие как клиентские, так и серверные соединения, должны получить как минимум два дескриптора учетных данных.

в Windows XP структура учетного записи [**SCHANNEL \_**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) содержит следующие указания:

-   Протокол безопасности
-   Допустимые шифры
-   Минимальная и максимальная стойкости шифра
-   Сертификат [*X. 509*](../secgloss/x-gly.md) , используемый для проверки подлинности — требуется для сервера, необязательно для клиента, если сервер не запрашивает проверку подлинности клиента.

Передайте в функцию [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) структуру [**\_ cred**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) (с помощью параметра *паусдата* ). Эта функция возвращает маркер учетных данных, необходимый для установки [*контекста безопасности*](../secgloss/s-gly.md).

Подробные сведения о настройке шифров, используемых с SChannel, см. в разделе [Указание шифров SChannel и стойкости шифра](specifying-schannel-ciphers-and-cipher-strengths.md).

Сведения о сертификатах см. в статье [функции хранилища сертификатов и](../seccrypto/cryptography-functions.md)сертификатов.

Пример, демонстрирующий открытие [*хранилища сертификатов*](../secgloss/c-gly.md) и поиск сертификата, используемого для проверки подлинности Schannel, см. в разделе [Получение сертификата](getting-a-certificate-for-schannel.md).

 

 
