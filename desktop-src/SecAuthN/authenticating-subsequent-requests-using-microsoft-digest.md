---
description: Сервер отправляет клиенту ссылку на общий контекст безопасности, используя непрозрачную директиву запроса дайджеста.
ms.assetid: 543c4bed-b224-4da7-9746-12c9993a40af
title: Проверка подлинности последующих запросов с помощью Microsoft Digest
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8eecccc3be68fb541994e63cdfc5035187e04aa3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103816224"
---
# <a name="authenticating-subsequent-requests-with-microsoft-digest"></a>Проверка подлинности последующих запросов с помощью Microsoft Digest

Сервер отправляет клиенту ссылку на общий [*контекст безопасности*](/windows/desktop/SecGloss/s-gly) , используя непрозрачную директиву запроса дайджеста. После успешной проверки подлинности клиент должен указать это значение в последующих запросах к целевому серверу. Включение непрозрачного значения в запросы ресурсов, доступных с помощью существующего контекста безопасности, устраняет необходимость повторной проверки подлинности на контроллере домена. Такие запросы проходят повторную проверку подлинности на сервере, используя [*ключ сеанса*](/windows/desktop/SecGloss/s-gly) дайджеста, кэшированный после первоначальной проверки подлинности.

На следующей схеме показаны шаги, выполняемые клиентом и сервером во время последующего запроса к ресурсам, защищенным доступом.

![Проверка подлинности последующих запросов с помощью Microsoft Digest](images/digest2.png)

Чтобы запросить дополнительные ресурсы после успешной проверки подлинности, клиент вызывает функцию Microsoft Digest [**макесигнатуре**](/windows/desktop/api/Sspi/nf-sspi-makesignature) , чтобы создать ответ на запрос дайджеста. Непрозрачное значение включается в непрозрачную директиву ответа на запрос, отправляемого на сервер в качестве заголовка авторизации (отображается как HTTP-запрос).

Сервер вызывает функцию [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) , чтобы определить наличие существующего [*контекста безопасности*](/windows/desktop/SecGloss/s-gly) для клиента. При обнаружении существующего контекста функция возвращает значение в СЕКУНДах \_ , \_ \_ необходимое для указания того, что сервер должен вызвать функцию [**CompleteAuthToken**](/windows/desktop/api/Sspi/nf-sspi-completeauthtoken) . Эта функция выполняет проверку подлинности клиента с помощью [*ключа сеанса*](/windows/desktop/SecGloss/s-gly) дайджеста, кэшированного во время [первоначальной проверки подлинности](initial-authentication-using-microsoft-digest.md) , а не повторной проверки подлинности на контроллере домена.

 

 
