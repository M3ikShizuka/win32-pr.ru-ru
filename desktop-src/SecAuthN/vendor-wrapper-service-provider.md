---
description: Обертка поставщика заключается в том, чтобы инкапсулировать и использовать низкоуровневые интерфейсы COM (предоставляемые производителями смарт-карт) для конкретной смарт-карты. Эти интерфейсы не предоставляются корпорацией Майкрософт.
ms.assetid: 7bc26f7b-c355-448a-9f23-4ccfffea2fef
title: Поставщик службы-оболочки поставщика
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aeec4a8a5125e8fe19201a6c810eb87705eb7b5614b49fb455e8a96af63c8d26
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117785852"
---
# <a name="vendor-wrapper-service-provider"></a>Поставщик службы-оболочки поставщика

Обертка поставщика заключается в том, чтобы инкапсулировать и использовать низкоуровневые интерфейсы COM (предоставляемые производителями смарт-карт) для конкретной смарт-карты. Эти интерфейсы не предоставляются корпорацией Майкрософт.

![оболочка поставщика](images/scspart1.png)

Как описано в части 6 *спецификации взаимодействия для систем Иккс и персональных компьютеров* (см. спецификации в [https://www.pcscworkgroup.com/](https://www.pcscworkgroup.com/) ), функциональные возможности, предоставляемые этой оболочкой, проще в использовании, чем у четырех отдельных поставщиков услуг. Функциональные возможности оболочки можно разделить на четыре основные области:

-   Службы проверки подлинности смарт-карт, такие как получение запроса и проверка подлинности карты.
-   Доступ к файлу смарт-карты или службы файловой системы, такие как открытие, закрытие, чтение и запись.
-   Управление смарт-картами, например подключение и отсоединение.
-   Службы проверки смарт-карт, такие как проверка и изменение кода.

> [!Note]  
> Эта спецификация может быть недоступна в некоторых языках и странах или регионах.

 

Функциональные возможности зависят от типа используемой карты (функции, поддерживаемые картой, протоколы и т. д.) и будут отличаться для каждой карты.

Пример оболочки Microsoft Скардком использует библиотеку ATL COM для реализации простой оболочки и размещения шаблона для других оболочек. Он реализует следующие интерфейсы.



| Интерфейс или объект                                     | Описание                         |
|---------------------------------------------------------|-------------------------------------|
| [**искардаус**](iscardauth.md)<br/>             | Службы проверки подлинности.<br/> |
| [**искардфилеакцесс**](iscardfileaccess.md)<br/> | Службы файловой системы.<br/>    |
| [**искардманаже**](iscardmanage.md)<br/>         | Службы управления.<br/>     |
| [**искардверифи**](iscardverify.md)<br/>         | Службы проверки.<br/>   |



 

> [!Note]  
> Пример Скардком предоставляется только в качестве примера реализации интерфейсов-оболочек. Чтобы предотвратить конфликт имен DLL с другими поставщиками, не следует использовать SCardCOM.dll в качестве имени создаваемых библиотек DLL.

 

Ниже приведен типичный пример использования оболочки поставщика. В этом примере используется интерфейс [**искардманаже**](iscardmanage.md) для создания экземпляров интерфейсов, которые будут инкапсулированы в поставщик службы, и интерфейс [**искардверифи**](iscardverify.md) для проверки их работы.

**Создание поставщика службы-оболочки**

1.  Создайте экземпляр интерфейса [**искардманаже**](iscardmanage.md) . Используйте этот интерфейс для создания экземпляра требуемых интерфейсов (например, [**искардфилеакцесс**](iscardfileaccess.md) или [**искардверифи**](iscardverify.md)). При создании этих интерфейсов также создаются все соответствующие COM-интерфейсы низкого уровня.
2.  Подключите или подключитесь к карте с помощью соответствующего метода [**искардманаже**](iscardmanage.md) .
3.  Выполните необходимые операции с помощью соответствующего метода [**искардверифи**](iscardverify.md) (который может вызывать несколько низкоуровневых COM-интерфейсов и методов для завершения).
4.  Повторите операцию для других операций.
5.  Выпуск по завершении.

Имя COM-интерфейса и идентификатор интерфейса (GUID) не должны изменяться из тех, которые используются в коде или образце оболочки. Однако идентификатор GUID класса (то есть, где находится фактическая реализация интерфейса) должен быть изменен из используемых. Это особенно важно при реализации оболочки поставщика. Одним из примеров может быть использование нескольких оболочек поставщика на определенном компьютере. Эти оболочки должны реализовывать одни и те же COM-интерфейсы, но всегда будут использовать разные стратегии реализации. Поэтому требуются разные классы (и идентификаторы классов).

 

 




