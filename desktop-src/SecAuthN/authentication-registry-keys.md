---
description: При установке поставщика сети приложение должно создать разделы реестра и значения, описанные в этом разделе.
ms.assetid: cc5a4a7b-02b5-4ecd-967c-de0656f00846
title: Разделы реестра для проверки подлинности
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7ee2e42febe7516060dd61a7b751a33dcf62cb9c
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127064781"
---
# <a name="authentication-registry-keys"></a>Разделы реестра для проверки подлинности

При установке поставщика сети приложение должно создать разделы реестра и значения, описанные в этом разделе. Эти ключи и значения предоставляют многопротокольному маршрутизатору сведения о сетевых поставщиках, установленных в системе. Многопротокольный маршрутизатор проверяет эти ключи при запуске и загружает найденные библиотеки DLL поставщика сети.

Перед созданием набора ключей для хранения сведений о поставщике сети следует добавить имя поставщика сети в ключ **Order** . Этот ключ является подразделом следующего раздела:

```
HKEY_LOCAL_MACHINE
   SYSTEM
      CurrentControlSet
         Control
            NetworkProvider
```

Ключ **заказа** содержит одно значение, **провидерордер**, в котором перечислены установленные поставщики и указывается порядок, в котором они должны быть предприняты во время операций, которые циклически проходят через поставщиков, пока не будет найден принимающий поставщик.

Значение **провидерордер** содержит разделенный запятыми список имен ключей. Каждое имя ключа в **провидерордер** идентифицирует поставщик сети. Когда многопротокольный цикл проходит через поставщиков, он вызывает их в том порядке, в котором они отображаются в этом списке.

Имя поставщика, заданное в **провидерордер** , должно также использоваться в качестве имени раздела реестра, содержащего сведения об этом поставщике. Разделы реестра, относящиеся к поставщику, создаются в виде подразделов следующего раздела:

```
HKEY_LOCAL_MACHINE
   SYSTEM
      CurrentControlSet
         Services
```

Иными словами, имена поставщиков, указанные в **провидерордер** , являются путем к реестру разделов, относящихся к поставщику сетевых услуг, относительно следующего пути:

```
HKEY_LOCAL_MACHINE
   SYSTEM
      CurrentControlSet
         Services
```

При установке службы поставщика сети приложение установки должно добавить ключ следующим образом:

```
HKEY_LOCAL_MACHINE
   SYSTEM
      CurrentControlSet
         Services
            ProviderName
```

Где *providerName* — имя поставщика сети, указанное в значении **провидерордер** ключа **заказа** . Значение **группы** в ключе *providerName* должно быть равно "нетворкпровидер". Это идентифицирует службу в группе "поставщик сети".

Также необходимо создать подраздел с *providerName*, **нетворкпровидер**. Этот раздел содержит следующие значения, описывающие поставщик сети.



| Значение                       | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|-----------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **имя**;<br/>         | Содержит имя поставщика. Это имя отображается пользователю как имя сети в диалоговых окнах обзор и должно соответствовать полю **лппровидер** , возвращенному в структурах [**нетресаурце**](/windows/desktop/api/Winnetwk/ns-winnetwk-netresourcea) . Это имя должно быть некоторым вариантом названия продукта, желательно с указанием компании, чтобы оно было понятным и уникальным. "MS-LanMan", например, является хорошим именем, тогда как "сеть" будет неудовлетворительным выбором.<br/> |
| **провидерпас**<br/> | Содержит полный путь библиотеки DLL, которая реализует поставщик сети. Многопротокольный вызов [**LoadLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya) по этому пути.<br/>                                                                                                                                                                                                                                                                                                                                |



 

Следующие значения используются только поставщиками сети, которые поддерживают функции управления учетными данными [**нплогоннотифи**](/windows/desktop/api/Npapi/nf-npapi-nplogonnotify) и [**нппассвордчанженотифи**](/windows/desktop/api/Npapi/nf-npapi-nppasswordchangenotify).



| Значение                              | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Класс**<br/>               | **DWORD** , определяющий класс или тип функций поставщика, поддерживаемых этим поставщиком. При необходимости значения могут быть соединены оператором **или** . Допустимыми значениями для этого являются \_ класс WN Network \_ , класс \_ учетных данных WN \_ , класс WN \_ PRIMARY \_ аусент \_ и \_ класс службы WN \_ .<br/> Несмотря на то, что поставщик может поддерживать функциональность основного средства проверки подлинности, для определения основного средства проверки подлинности будет использоваться другое средство.<br/> **Windows XP/2000:** Переключение основного средства проверки подлинности не поддерживается, поэтому это значение игнорируется. <br/> |
| **аусентпровидерпас**<br/> | Это полное имя файла библиотеки DLL, в которой экспортируются функции управления учетными данными. Это значение полезно (но не требуется), только если поставщик определен как класс УЧЕТных данных \_ или поставщик первичного \_ аусент \_ класса. Если это значение отсутствует для поставщика этого класса, предполагается, что функции управления учетными данными должны быть экспортированы из библиотеки DLL, определяемой значением Провидерпас. Это значение используется только в том случае, если желательно упаковать сетевые функции и функции диспетчера учетных данных в отдельных библиотеках DLL.<br/>  |



 

В дополнение к значениям, используемым для регистрации поставщиков сетевых услуг и диспетчеров учетных данных, можно добавить значение в реестр, чтобы зарегистрировать библиотеку DLL для получения уведомлений о подключении. Для этого создайте \_ значение reg Expand \_ SZ в следующем разделе реестра:

```
HKEY_LOCAL_MACHINE
   SYSTEM
      CurrentControlSet
         Control
            NetworkProvider
               Notifyees
```

Это значение должно указывать путь к библиотеке DLL, реализующей [API уведомления о соединении](connection-notification-api.md). Имя этого значения может быть любым, если оно не конфликтует с уже существующими именами значений.

## <a name="example"></a>Пример

В следующем примере показаны разделы реестра для системы с двумя установленными поставщиками сети: LanmanWorkStation и Аносернетсвк. Аносернетсвк также является диспетчером учетных данных. В этом примере имена ключей имеют полужирное начертание, а имена значений — курсивом.

**HKey \_ \_** \\  \\  \\  \\  \\ **Порядок** нетворкпровидер управления CurrentControlSet системы локального компьютера

*Провидерордер* = "LanmanWorkStation, аносернетсвк"

**HKey \_ Локальный \_ компьютер** \\ **система** \\ **CurrentControlSet** \\ **элемент управления** \\ **нетворкпровидер** \\ **нотифеес**

*Минотифяпп* = "c: \\ подключение \\connect.dll"

**HKey \_ Локальная система \_ машинного** \\  \\ **CurrentControlSet** \\ **Services** \\ **LanmanWorkStation**\\

*Group* = "нетворкпровидер"

**HKey \_ Локальный \_ компьютер** \\ **System** \\ **CurrentControlSet** \\ **Services** \\ **LanmanWorkStation** \\ **нетворкпровидер**

*Name* = "NT LanMan"*провидерпас* = "ntlanman.dll"

*Class* = 0x00000001 ( \_ класс WN Network \_ )

**HKey \_ Локальная система \_ машинного** \\  \\ **CurrentControlSet** \\ **Services** \\ **аносернетсвк**\\

*Group* = "нетворкпровидер"

**HKey \_ Локальный \_ компьютер** \\ **System** \\ **CurrentControlSet** \\ **Services** \\ **аносернетсвк** \\ **нетворкпровидер**

*Name* = "другая сеть"*провидерпас* = "c: \\ другой \\anet.dll"

*Class* = 0x00000003 (класс \_ \_ \| \_ учетных данных класса WN Network WN \_ )

*Аусентпровидерпас* = "c: \\ другой \\anetCM.dll"

 

