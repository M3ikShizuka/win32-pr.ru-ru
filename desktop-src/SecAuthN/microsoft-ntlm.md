---
description: Windows-запрос/ответ (NTLM) — это протокол проверки подлинности, используемый в сетях, которые включают в себя системы, работающие под управлением операционной системы Windows и изолированных систем.
ms.assetid: 35a38858-d36f-45c9-95f4-2541a182f5ac
title: Microsoft NTLM
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9723f24d5913adefe70d4e238de0591790a34bfd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104541175"
---
# <a name="microsoft-ntlm"></a>Microsoft NTLM

Windows-запрос/ответ (NTLM) — это протокол проверки подлинности, используемый в сетях, которые включают в себя системы, работающие под управлением операционной системы Windows и изолированных систем.

[*Пакет безопасности*](../secgloss/s-gly.md) Microsoft [*Kerberos*](../secgloss/k-gly.md) повышает безопасность, чем NTLM, для систем в сети. Несмотря на то, что Microsoft *Kerberos* является выбранным протоколом, NTLM по-прежнему поддерживается. NTLM также необходимо использовать для проверки подлинности входа в автономных системах. Дополнительные сведения о протоколе Kerberos см. в разделе [Microsoft Kerberos](microsoft-kerberos.md).

Учетные данные NTLM основываются на данных, полученных в процессе интерактивного входа в систему, и содержат имя домена, имя пользователя и односторонний [*хэш*](../secgloss/h-gly.md) пароля пользователя. NTLM использует зашифрованный протокол запроса/ответа для проверки подлинности пользователя без отправки пароля пользователя по сети. Вместо этого система, запрашивающая проверку подлинности, должна выполнить вычисление, которое подтверждает, что у него есть доступ к защищенным учетным данным NTLM.

Интерактивная проверка подлинности NTLM в сети обычно включает две системы: клиентскую систему, где пользователь запрашивает проверку подлинности, и контроллер домена, где хранятся сведения, связанные с паролем пользователя. Неинтерактивная проверка подлинности, которая может потребоваться, чтобы позволить уже вошедшему пользователю доступ к ресурсу, такому как серверное приложение, обычно включает три системы: Клиент, сервер и контроллер домена, выполняющие вычисления проверки подлинности от имени сервера.

Следующие шаги представляют собой структуру неинтерактивной проверки подлинности NTLM. На первом шаге предоставляются учетные данные NTLM пользователя, которые выполняются только в рамках процесса интерактивной проверки подлинности (Logon).

1.  (Только Интерактивная проверка подлинности) Пользователь обращается к клиентскому компьютеру и предоставляет имя домена, имя пользователя и пароль. Клиент вычислит криптографический [*хэш*](../secgloss/h-gly.md) пароля и отклоняет Фактический пароль.
2.  Клиент отправляет имя пользователя на сервер (в [*виде обычного текста*](../secgloss/p-gly.md)).
3.  Сервер создает 16-байтовое случайное число, называемое *запросом* или [*nonce*](../secgloss/n-gly.md), и отправляет его клиенту.
4.  Клиент шифрует эту задачу с помощью хэша пароля пользователя и возвращает результат на сервер. Это называется *ответом*.
5.  Сервер отправляет на контроллер домена следующие три элемента:

    -   Имя пользователя
    -   Запрос, отправленный клиенту
    -   Ответ, полученный от клиента

6.  Контроллер домена использует имя пользователя для получения хэша пароля пользователя из базы данных диспетчера учетных записей безопасности. Он использует этот хэш пароля для шифрования запроса.
7.  Контроллер домена сравнивает зашифрованный запрос, который он вычислит (на шаге 6), с ответом, вычисленным клиентом (на шаге 4). Если они идентичны, проверка подлинности прошла успешно.

Приложение не должно напрямую получать доступ к [*пакету безопасности*](../secgloss/s-gly.md) NTLM; Вместо этого он должен использовать пакет безопасности [*Negotiate*](../secgloss/n-gly.md) . Согласование позволяет приложению использовать преимущества более сложных [*протоколов безопасности*](../secgloss/s-gly.md) , если они поддерживаются системами, участвующими в проверке подлинности. Сейчас пакет безопасности Negotiate выбирает между [*Kerberos*](../secgloss/k-gly.md) и NTLM. Согласование выбирает Kerberos, если не может использоваться одной из систем, участвующих в проверке подлинности.

 

 
