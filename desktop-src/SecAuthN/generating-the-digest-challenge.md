---
description: Запрос Microsoft Digest создается начальным вызовом на сервере функции AcceptSecurityContext (Digest).
ms.assetid: d33383c2-5c0d-401f-ab28-2a985f6508e0
title: Создание запроса дайджеста
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 511ec4f01c90acf08669835f9728cc711dfd1023
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127271392"
---
# <a name="generating-the-digest-challenge"></a>Создание запроса дайджеста

Запрос Microsoft Digest создается начальным вызовом на сервере функции [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) . Этот вызов функции создает nonce, который является уникальным значением, содержащим сведения, которые можно использовать для обнаружения нарушений безопасности. Этот вызов также создает частичный [*контекст безопасности*](/windows/desktop/SecGloss/s-gly) , который используется для сохранения сведений о состоянии. При вызове **AcceptSecurityContext (Digest)** задаются флаги требований контекста для управления поведением Microsoft Digest и настройки качества защиты. Дополнительные сведения см. в разделе [требования к контексту дайджест-запроса](#digest-challenge-context-requirements).

Выходным результатом начального вызова [*функции*](/windows/desktop/SecGloss/c-gly) [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) является буфер безопасности, содержащий маркер, отправленный клиенту с ответом HTTP 401 (отказано в доступе).

> [!Note]  
> Вызовы [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) , которые не содержат сведений во входных буферах, возвращают дайджест-запрос.

 

## <a name="digest-challenge-context-requirements"></a>Требования к контексту запроса дайджеста

Требования к контексту — это флаги, которые определяют:

-   Определяет, функционируют ли Microsoft Digest как механизм SASL или протокол проверки подлинности HTTP.
-   Качество защиты, поддерживаемое контекстом безопасности, совместно используемым клиентом и сервером.

По умолчанию Microsoft Digest функционирует как механизм SASL. Чтобы использовать его для проверки подлинности HTTP \_ , \_ сервер должен установить флаг ASC HTTP (0x10000000).

Требования к контексту указываются как флаги, передаваемые в параметр *фконтекстрек* функции [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) . Флаги влияют на качество защиты контекста безопасности, управляя директивой КОП в задаче запроса.

По умолчанию директива КОП имеет значение "auth". Чтобы создать запрос, который задает для директивы КОП значение "auth-int", сервер должен указать один или несколько из следующих флагов:

-   \_ \_ целостность требований ASC
-   Обнаружение повторного \_ воспроизведения требований ASC \_ \_
-   \_ \_ Обнаружение последовательности "ASC req" \_

Только для SASL: Создайте задачу с директивой КОП, для которой задано значение "auth-conf", \_ указав \_ флаг требования к контексту для обеспечения конфиденциальности ASC. Поскольку этот флаг является недопустимым для проверки подлинности HTTP, его нельзя использовать \_ с \_ флагом HTTP ASC.

Дополнительные сведения об директиве КОП см. в разделе [качество защиты и шифров](quality-of-protection-and-ciphers.md).

Дополнительные сведения о проблемах см. [в разделе содержание запроса дайджеста](contents-of-a-digest-challenge.md).

 

 
