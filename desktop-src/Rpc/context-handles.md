---
title: Дескрипторы контекста
description: Иногда для распределенных приложений требуется, чтобы серверная программа поддерживала сведения о состоянии между клиентскими вызовами.
ms.assetid: 91732a75-0a3a-44bd-9db9-c11be6fd2d70
keywords:
- Удаленный вызов процедур RPC, описание, дескрипторы контекста
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a8ff36ff8f1a36843293060e091b7eecee0d8666
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "105672063"
---
# <a name="context-handles"></a>Дескрипторы контекста

Иногда для распределенных приложений требуется, чтобы серверная программа поддерживала сведения о состоянии между клиентскими вызовами. Серверные программы, обслуживающие более одного клиента за раз, должны иметь сведения о состоянии для каждого клиента. Так как клиент и сервер используют разные адресные пространства на разных компьютерах и не всегда являются надежными, распространенные подходы к совместному использованию данных часто не работают. Например, клиент и сервер не могут поддерживать сведения о состоянии удаленного сеанса в глобальных переменных, так как они не используют одно и то же глобальное адресное пространство. Трудно удержать информацию в общем файле, так как они выполняются на разных компьютерах. Упрощенный подход может быть отправкой всех состояний клиенту и возвратить его при следующем вызове, но этот подход имеет недостатки: сервер не обязательно доверяет клиенту для возврата правильного состояния, и состояние может быть неявно привязано к другому состоянию на сервере, например дескрипторы файлов или открытые сокеты.

Microsoft RPC предоставляет мощный и безопасный механизм, называемый дескрипторами контекста для сохранения состояния, связанного с данным клиентом на сервере. Сведения о состоянии называются контекстом сервера. Клиенты могут получить описатель контекста, чтобы определить контекст сервера для отдельных сеансов RPC.

Например, каждый клиент в распределенном приложении может иметь серверную программу, которая создает и обновляет файл данных для сеанса RPC. Сервер может использовать свой файловый обработчик для каждого файла данных клиента в качестве маркера контекста. Каждый раз, когда клиент запрашивает операции с файлом данных, создаваемым сервером для него, клиент передает этот контекст на сервер. Клиент фактически не получает сам обработчик файла; он получает непрозрачный маркер, который сервер времени выполнения RPC может однозначно связать с этим маркером файла. Поскольку обработчик контекста действительно является файлом, контекстный обработчик имеет смысл только в адресном пространстве сервера. Однако клиентская программа может использовать контекстный маркер, чтобы сообщить серверу, на каком файле выполнять обновления.

Другие данные также могут быть дескрипторами контекста. Например, клиент и сервер могут использовать номер записи записи базы данных в качестве маркера файла. Если клиент должен выполнить ряд обновлений для определенной записи, он может получить номер записи в виде маркера контекста. Он передаст номер записи серверу при каждом вызове удаленной процедуры для обновления записи базы данных.

Чаще всего обработчик контекста указывает на блок памяти на сервере, где сервер хранит различные данные управления.

В этом разделе представлены сведения об определении и использовании дескрипторов контекста. Обсуждение представлено в следующих разделах:

-   [Разработка интерфейса с использованием дескрипторов контекста](interface-development-using-context-handles.md)
-   [Разработка сервера с помощью дескрипторов контекста](server-development-using-context-handles.md)
-   [Разработка клиентов с помощью дескрипторов контекста](client-development-using-context-handles.md)
-   [Подпрограммы запуска контекста сервера](server-context-run-down-routine.md)
-   [Сброс контекста клиента](client-context-reset.md)
-   [Многопоточные клиенты и дескрипторы контекста](multithreaded-clients-and-context-handles.md)

 

 




