---
title: Разработка сервера
description: При создании серверной программы для распределенного приложения необходимо использовать заголовочный файл и серверную заглушку, создаваемую компилятором MIDL.
ms.assetid: 2b7b14f5-5692-41b8-bb98-7edd36309d21
keywords:
- Удаленный вызов процедур RPC, задачи, разработка сервера
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0fc3405c52c48f531572ab159ad083bad93f95e0
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104338729"
---
# <a name="developing-the-server"></a>Разработка сервера

При создании серверной программы для распределенного приложения необходимо использовать заголовочный файл и серверную заглушку, создаваемую компилятором MIDL. Дополнительные сведения см. [в разделе Разработка интерфейса](developing-the-interface.md). Включите заголовочный файл в файл программы на сервере C. Скомпилируйте заглушку сервера с исходными файлами C, составляющими приложение. Свяжите полученные объектные файлы вместе с библиотекой импорта. Этот процесс показан на следующей схеме.

![процесс создания серверной программы для распределенного приложения](images/srvrdev.png)

Как видно из примера на рисунке, для определения интерфейса использовался MIDL-файл с именем MyApp. idl. Компилятор MIDL использовал MyApp. IDL для создания MyApp \_ s. c и MyApp. h. Он также создает исходный файл на языке C для клиентской заглушки, но это не относится к конкретному обсуждению. Исходный файл C для серверной программы (в данном случае Мисрвр. C) должен включать файл MyApp. h. Кроме того, необходимо включить файлы RPC. h и Рпкндр. h.

Серверное приложение было разработано в двух файлах: Мисрвр. c и Рпрокс. c. Файл Мисрвр. c содержит функции, необходимые для установления и запуска серверной программы. Удаленные процедуры, предлагаемые серверной программой, содержатся в файле Рпрокс. c.

Файлы Мисрвр. c и Рпрокс. c были скомпилированы вместе с MyApp \_ s. c для создания объектных файлов. Объектные файлы затем были связаны с библиотекой времени выполнения RPC и другими библиотеками, которые могут потребоваться. Результатом является исполняемая программа сервера с именем Mysrvr.exe.

Если вы не компилируете IDL-файл в режиме совместимости Open Software Foundation (использование) ([**/ОСФ**](/windows/desktop/Midl/-osf)), серверная программа должна предоставить функцию для выделения памяти и функцию для ее освобождения. Для Windows 2000 и более поздних версий Windows рекомендуется использовать режим [**/Oicf**](/windows/desktop/Midl/-oi). Дополнительные сведения см. в статье [о выделении и](how-memory-is-allocated-and-deallocated.md)освобождении памяти и назначении [указателей и выделении памяти](pointers-and-memory-allocation.md).

 

 