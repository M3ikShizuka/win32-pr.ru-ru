---
title: Строковая привязка
description: Строковая привязка представляет собой строку символов без знака, состоящую из строк, представляющих UUID объекта привязки, последовательность протокола RPC, сетевой адрес, а также параметры конечной точки и конечной точки.
ms.assetid: 5e55ddd0-d71c-42ef-90cc-dd1f0b9ed305
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c5d804fe614185b054b8041e13069e900501342a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104413444"
---
# <a name="string-binding"></a>Строковая привязка

Строковая привязка представляет собой строку символов без знака, состоящую из строк, представляющих UUID объекта привязки, последовательность протокола RPC, сетевой адрес, а также параметры конечной точки и конечной точки.

*Обжектууид* @ *Протоколсекуенце*: \[ *Конечная точка* networkAddress,*параметр*\]

## <a name="parameters"></a>Параметры

<dl> <dt>

<span id="ObjectUUID"></span><span id="objectuuid"></span><span id="OBJECTUUID"></span>*обжектууид*
</dt> <dd>

[UUID](/windows/desktop/Midl/uuid) объекта, который управляется удаленным вызовом процедуры. На сервере библиотека времени выполнения RPC сопоставляет тип объекта с вектором точки входа диспетчера (массивом указателей на функции) для вызова правильной процедуры диспетчера. Сведения о том, как сопоставлять идентификаторы объектов (UUID) с векторами точки входа диспетчера, см. в разделе [Регистрация интерфейсов](registering-interfaces.md).

</dd> <dt>

<span id="ProtocolSequence"></span><span id="protocolsequence"></span><span id="PROTOCOLSEQUENCE"></span>*протоколсекуенце*
</dt> <dd>

Символьная строка, представляющая допустимое сочетание протокола RPC (например, нкакн), транспортного протокола (например, TCP) и сетевого протокола (например, IP). Microsoft RPC поддерживает следующие протоколы, указанные в [константах последовательности протоколов](protocol-sequence-constants.md).

</dd> <dt>

<span id="NetworkAddress"></span><span id="networkaddress"></span><span id="NETWORKADDRESS"></span>*NetworkAddress*
</dt> <dd>

Сетевой адрес системы для получения удаленных вызовов процедур.

> [!Note]  
> Следующие последовательности протоколов не поддерживаются в Windows XP:

 

-   [нкакн \_ NetBIOS, \_ протокол TCP](/windows/desktop/Midl/ncacn-nb-tcp)
-   [нкакн \_ имена \_ NetBIOS](/windows/desktop/Midl/ncacn-nb-nb)
-   [нкакн \_ NetBIOS- \_ IPX](/windows/desktop/Midl/ncacn-nb-ipx)
-   [нкакн \_ днет \_ NSP](/windows/desktop/Midl/ncacn-dnet-nsp)
-   [нкакн \_ ВНС \_ SPP](/windows/desktop/Midl/ncacn-vns-spp)
-   [нкадг \_ MQ](/windows/desktop/Midl/ncadg-mq)
-   [нкадг \_ IPX](/windows/desktop/Midl/ncadg-ipx)

Формат и содержимое сетевого адреса зависят от указанной последовательности протоколов, как показано ниже.



| Последовательность протокола                       | Сетевой адрес                                                                                                                                  | Примеры                                               |
|-----------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
| [нкакн \_ NetBIOS, \_ протокол TCP](/windows/desktop/Midl/ncacn-nb-tcp)     | Имя компьютера                                                                                                                                    | MyServer                                               |
| [нкакн \_ NetBIOS- \_ IPX](/windows/desktop/Midl/ncacn-nb-ipx)     | Имя компьютера                                                                                                                                    | MyServer                                               |
| [нкакн \_ имена \_ NetBIOS](/windows/desktop/Midl/ncacn-nb-nb)       | Имя компьютера                                                                                                                                    | MyServer                                               |
| [нкакн \_ IP \_ TCP](/windows/desktop/Midl/ncacn-ip-tcp)     | Адрес Интернета из четырех октетов или имя узла. Если установлен стек сети IPv6, IPv6 полностью поддерживается и адрес IPv6 также принимается. | 128.10.2.30 anynode.microsoft.com                      |
| [нкакн \_ NP](/windows/desktop/Midl/ncacn-np)              | Имя сервера (начальные двойные косые черты необязательны)                                                                                            | \\ \\ мйосерсервер MyServer                             |
| [нкакн \_ SPX](/windows/desktop/Midl/ncacn-spx)            | IP-адрес IPX или имя сервера                                                                                                             | ~ 0000000108002B30612C                         |
| [нкакн \_ днет \_ NSP](/windows/desktop/Midl/ncacn-dnet-nsp) | Синтаксис областей и узлов                                                                                                                             | 4,120                                                  |
| [нкакн \_ в \_ DSP](/windows/desktop/Midl/ncacn-at-dsp)     | Имя компьютера, при необходимости укажите @ и имя зоны AppleTalk. По умолчанию используется значение @ \* , зона клиента, если зона не указана                     | servername@zonename имя                         |
| [нкакн \_ ВНС \_ SPP](/windows/desktop/Midl/ncacn-vns-spp)   | Имя сервера Стритталк в формате item@group@organization                                                                                       | printserver@sdkdocs@microsoft                          |
| [нкадг \_ MQ](/windows/desktop/Midl/ncadg-mq)              | Имя сервера                                                                                                                                      | MyServer                                               |
| [нкакн \_ http](/windows/desktop/Midl/ncacn-http)          | Адрес в Интернете (с четырьмя или с понятным именем или с именем локального сервера)                                                                       | 128.10.2.30 somesvr@anywhere.com милокалсвр<br/> |
| [нкадг \_ IP \_ UDP](/windows/desktop/Midl/ncadg-ip-udp)     | Адрес в Интернете с четырьмя октетами или имя узла                                                                                                        | 128.10.2.30 anynode.microsoft.com                      |
| [нкадг \_ IPX](/windows/desktop/Midl/ncadg-ipx)            | IP-адрес IPX или имя сервера                                                                                                             | ~ 0000000108002B30612C                         |
| [нкалрпк](/windows/desktop/Midl/ncalrpc)                 | Имя компьютера                                                                                                                                     | сисмачине                                            |



 

Поле "сетевой адрес" является необязательным. Если сетевой адрес не указан, строковая привязка ссылается на локальный узел. При использовании последовательности протокола **нкалрпк** можно указать имя локального компьютера, но делать это не нужно.

</dd> <dt>

<span id="Endpoint"></span><span id="endpoint"></span><span id="ENDPOINT"></span>*Конечной*
</dt> <dd>

Конечная точка или адрес процесса для получения удаленных вызовов процедур. Конечной точке может предшествовать ключевое слово **Endpoint =**. Указание конечной точки является необязательным, если сервер зарегистрировал свои привязки с помощью сопоставителя конечных точек. См. [**рпцепрегистер**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregister).

Формат и содержимое конечной точки зависят от указанной последовательности протокола, как показано в следующей таблице конечная точка/параметр.

</dd> <dt>

<span id="Option"></span><span id="option"></span><span id="OPTION"></span>*Функцию*
</dt> <dd>

Параметры конкретного протокола. Поле параметра не является обязательным. Каждый параметр задается парой {Name, value}, которая использует  = *значение параметра* имени параметра синтаксиса. Параметры определяются для каждой последовательности протокола, как показано в следующей таблице конечных точек или параметров.



| Последовательность протокола                       | Конечная точка                                                                                           | Примеры             | Имя параметра                                            |
|-----------------------------------------|----------------------------------------------------------------------------------------------------|----------------------|--------------------------------------------------------|
| [нкакн \_ NetBIOS, \_ протокол TCP](/windows/desktop/Midl/ncacn-nb-tcp)     | Целое число от 1 до 254. Многие значения от 0 до 32 зарезервированы корпорацией Майкрософт.                 | 100                  | Нет                                                   |
| [нкакн \_ NetBIOS- \_ IPX](/windows/desktop/Midl/ncacn-nb-ipx)     | (как описано выше)                                                                                         | (как описано выше)           | Нет                                                   |
| [нкакн \_ имена \_ NetBIOS](/windows/desktop/Midl/ncacn-nb-nb)       | (как описано выше)                                                                                         | (как описано выше)           | Нет                                                   |
| [нкакн \_ IP \_ TCP](/windows/desktop/Midl/ncacn-ip-tcp)     | Номер порта в Интернете.                                                                              | 1025                 | Нет                                                   |
| [нкакн \_ NP](/windows/desktop/Midl/ncacn-np)              | Именованный канал. Имя должно начинаться с " \\ \\ pipe".                                                       | \\\\\\ \\ pipeName канала | Безопасность                                               |
| [нкакн \_ SPX](/windows/desktop/Midl/ncacn-spx)            | Целое число от 1 до 65535.                                                                       | 5000                 | Нет                                                   |
| [нкакн \_ днет \_ NSP](/windows/desktop/Midl/ncacn-dnet-nsp) | Номер объекта-фазы DECnet IV (перед ним должен стоять \# символ) или имя объекта.              | MailServer \# 17      | Нет                                                   |
| [нкакн \_ в \_ DSP](/windows/desktop/Midl/ncacn-at-dsp)     | Символьная строка длиной до 22 байт.                                                           | мисервицесендпоинт   | Нет                                                   |
| [нкакн \_ ВНС \_ SPP](/windows/desktop/Midl/ncacn-vns-spp)   | Номер порта vines SPP от 250 до 511.                                                         | 500                  | Нет                                                   |
| [нкадг \_ MQ](/windows/desktop/Midl/ncadg-mq)              | Целое число от 1 до 65535.                                                                       | 5000                 | Нет                                                   |
| [нкакн \_ http](/windows/desktop/Midl/ncacn-http)          | Номер порта в Интернете.                                                                              | 2215                 | Имена прокси-серверов HTTP и RPC, параметр Хттпконнектион |
| [нкадг \_ IP \_ UDP](/windows/desktop/Midl/ncadg-ip-udp)     | Номер порта в Интернете.                                                                              | 1025                 | Нет                                                   |
| [нкадг \_ IPX](/windows/desktop/Midl/ncadg-ipx)            | Целое число от 1 до 65535.                                                                       | 5000                 | Нет                                                   |
| [нкалрпк](/windows/desktop/Midl/ncalrpc)                 | Строка, указывающая имя приложения или службы. Строка не может содержать символы обратной косой черты. | мой \_ принтер          | Безопасность                                               |



 

Имя параметра **хттпконнектионоптион** , поддерживаемое для \_ последовательности протокола HTTP нкакн, принимает следующее значение.



| Имя параметра       | Значение            |
|-------------------|------------------|
| хттпконнектоптион | **усехттппрокси** |



 

**Хттпконнектионоптион** позволяет направлять поведение RPC s при выполнении HTTP-соединений. Значение **усехттппрокси** ПРЕДписывает RPC пересылать свой трафик через прокси-сервер HTTP в любое время, в том числе когда у клиента в Internet Explorer задается, чтобы обходить прокси-сервер для локальных адресов.  Этот параметр направляет клиент на принудительное подключение к прокси-серверу RPC через прокси-сервер HTTP. Это ускоряет установку подключения, так как обходит любые задержки поиска сервера RPC непосредственно перед использованием HTTP-прокси.

Если используется этот параметр **хттпконнектионоптион** и Internet Explorer на клиенте не настроен для использования этого HTTP-прокси, то подключения могут завершиться **с \_ \_ недопустимыми \_ \_ параметрами сети RPC S**.

``` syntax
HttpConnectOption=UseHttpProxy
```

Дополнительные сведения о **хттпконнектионоптион** см. в разделе [использование HTTP в качестве транспорта RPC](using-http-as-an-rpc-transport.md).

Имя параметра **безопасности** , поддерживаемое для \_ последовательностей протоколов нкалрпк, нкакн NP, нкадг \_ IP \_ UDP и нкадг \_ IPX, принимает следующие значения параметров.



| Имя параметра  | Значение параметра                                                                               |
|--------------|--------------------------------------------------------------------------------------------|
| **Безопасность** | {Идентификация \| анонимного \| олицетворения} {динамический \| статический} {**true** \| **false**} |



 

Если указано имя параметра безопасности, необходимо также указать одну запись из каждого набора значений параметров безопасности. Значения параметров должны быть разделены символом одиночного пробела. Например, следующие поля *параметров* являются допустимыми:

``` syntax
Security=identification dynamic true
Security=impersonation static true
```

Значения параметров безопасности имеют следующее значение.



| Значение параметра безопасности | Описание                                                                                                                                                                                                                                                                                                                                              |
|-----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Анонимные             | Клиент анонимен по отношению к серверу.                                                                                                                                                                                                                                                                                                                   |
| Динамический               | Изменения в удостоверении Client Security отображаются сервером, когда сервер использует безопасность транспорта. Это режим по умолчанию для безопасности на транспортном уровне ЛРПК (нкалрпк) и для безопасности на транспортном уровне локального именованного канала (нкакн \_ NP).                                                                                                             |
| **False**             | Действующий = **false**; все параметры привилегий маркера, включая значения OFF, включаются в маркер на сервере и могут быть включены сервером. Привилегии важны только для вызовов RPC на одном компьютере.                                                                                                                                     |
| **Идентификация**    | Сервер содержит сведения о клиенте, но не может олицетворять.                                                                                                                                                                                                                                                                                      |
| **Олицетворение**     | Сервер может действовать от имени клиента в локальной системе (безопасность на транспортном уровне не поддерживает делегирование).                                                                                                                                                                                                                               |
| **статически.**            | Изменения в удостоверении Client Security не отображаются сервером, когда сервер использует безопасность транспорта. Это единственный режим, доступный для безопасности транспортного уровня удаленного именованного канала (нкакн \_ NP). Удостоверение вызывающего объекта сохраняется во время первого вызова удаленной процедуры для этого маркера привязки, а не на момент создания маркера привязки. |
| **True**              | Вступает в силу = **true**; только параметры привилегий маркера, установленные в ON, включаются в маркер на сервере. Сервер не может включить привилегии, установленные в OFF, если этот параметр используется. Привилегии важны только для вызовов RPC на одном компьютере.                                                                                                         |



 

Дополнительные сведения о параметрах безопасности см. в статье [Безопасность](security.md).

</dd> </dl>

## <a name="remarks"></a>Комментарии

Пробелы не допускаются в строковых привязках, за исключением случаев, когда требуется синтаксис *параметра* . Параметры по умолчанию для полей *NetworkAddress*, *Endpoint* и *Option* различаются в зависимости от значения элемента *протоколсекуенце* .

Для всех полей привязки строк — один символ обратной косой черты ( \) интерпретируется как escape-символ). Чтобы указать один символ обратной косой черты, необходимо указать два символа обратной косой черты ( \\ \) .

Строковая привязка содержит символьное представление маркера привязки и иногда части маркера привязки. Строковые привязки удобны для представления частей маркера привязки, но их нельзя использовать для выполнения удаленных вызовов процедур. Сначала их необходимо преобразовать в маркер привязки, вызвав [**рпкбиндингфромстрингбиндинг**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding).

Кроме того, привязка строки не содержит все сведения из маркера привязки. Например, сведения о проверке подлинности (если таковые имеются), связанные с маркером привязки, не переводятся в привязку строк, возвращаемую при вызове [**рпкбиндингтострингбиндинг**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingtostringbinding).

Во время разработки распределенного приложения серверы могут передавать сведения о привязке клиентам с помощью строковых привязок для установления связи "клиент-сервер" без использования базы данных Map или базы данных-службы "имя-служба". Чтобы установить такую связь, используйте функцию [**рпкбиндингтострингбиндинг**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingtostringbinding) , чтобы преобразовать один или несколько дескрипторов привязки из вектора привязки дескриптора в привязку строки и предоставить клиенту привязку строки.

## <a name="examples"></a>Примеры

Ниже приведены примеры допустимых строковых привязок. В этих примерах объект *obj-UUID* используется для удобства представления допустимого UUID в виде строки. Вместо отображения UUID 308FB580-1EB2-11CA-923B-08002B1075A7 в примерах показан *obj-UUID*.

``` syntax
obj-uuid@ncadg_mq:mymqserver
obj-uuid@ncacn_http:major7.microsoft.com[2225]
obj_uuid@ncacn_http:major7.microsoft.com[,HttpProxy=proxysvr:80,
    RpcProxy=websvr1.microsoft.com:80]
obj_uuid@ncacn_http:major7.microsoft.com[,HttpProxy=proxysvr:80,
    RpcProxy=websvr1.microsoft.com:80,HttpConnectOption=UseHttpProxy]
obj-uuid@ncacn_ip_tcp:16.20.16.27[2001]
obj-uuid@ncacn_ip_tcp:16.20.16.27[endpoint=2001]
obj-uuid@ncacn_nb_nb:
obj-uuid@ncacn_nb_nb:[100]
obj-uuid@ncacn_np:
obj-uuid@ncacn_np:[\\pipe\\p3,Security=impersonation static true]
obj-uuid@ncacn_np:\\\\marketing[\\pipe\\p2\\p3\\p4]
obj-uuid@ncacn_np:\\\\marketing[endpoint=\\pipe\\p2\\p3\\p4]
obj-uuid@ncacn_np:\\\\sales
obj-uuid@ncacn_np:\\\\sales[\\pipe\\p1,Security=identification dynamic true]
obj-uuid@ncalrpc:
obj-uuid@ncalrpc:[object1_name_demonstrating_that_these_can_be_lengthy]
obj-uuid@ncalrpc:[object2_name,Security=anonymous static true]
obj-uuid@ncacn_vns_spp:server@group@org[500]
obj-uuid@ncacn_dnet_nsp:took[elf_server]
obj-uuid@ncacn_dnet_nsp:took[endpoint=elf_server]
obj-uuid@ncadg_ip_udp:128.10.2.30
obj-uuid@ncadg_ip_udp:maryos.microsoft.com[1025]
obj-uuid@ncadg_ipx: ~0000000108002B30612C[5000]
obj-uuid@ncadg_ipx:printserver
obj-uuid@ncacn_spx:annaw[4390]
obj-uuid@ncacn_spx:~0000000108002B30612C
```

## <a name="related-topics"></a>См. также

<dl> <dt>

[**рпкбиндингфромстрингбиндинг**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding)
</dt> <dt>

[**рпкбиндингтострингбиндинг**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingtostringbinding)
</dt> <dt>

[**рпцепрегистер**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregister)
</dt> <dt>

[Использование HTTP в качестве транспорта RPC](using-http-as-an-rpc-transport.md)
</dt> </dl>

 

