---
title: Полные указатели
description: В отличие от уникальных указателей, полные указатели поддерживают псевдонимы.
ms.assetid: 38023942-a4c2-4de7-b7d5-10d508cf083b
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2bdbdc223125889eeb1849e60d162e5690b5c307b18b6667d43c578a46282400
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120021263"
---
# <a name="full-pointers"></a>Полные указатели

В отличие от [уникальных](unique-pointers.md) указателей, полные указатели поддерживают псевдонимы. Это означает, что несколько указателей могут ссылаться на одни и те же данные, как показано на следующем рисунке.

![два указателя, ссылающихся на одни и те же данные](images/prog-a02.png)

Полный указатель имеет следующие характеристики.

-   Оно может иметь значение null.
-   При вызове может измениться со значения NULL на значение, отличное от NULL. Когда значение изменяется со значением, отличным от NULL, заглушка клиента выделяет новую память, выделенную при возврате. Клиентская программа должна освободить эту память до ее завершения.
-   Во время вызова он может измениться с значения, отличного от NULL, на null. Когда значение изменяется на null, приложение отвечает за освобождение памяти.
-   Значение может изменяться от одного значения, отличного от NULL, к другому.
-   Доступ к хранилищу, на который указывает полный указатель, может получить другой указатель или имя в операции.
-   Возвращаемые данные записываются в существующее хранилище, если указатель не имеет значения NULL.

Используйте атрибут \[ [**ptr**](/windows/desktop/Midl/ptr) \] для указания полного указателя, как показано в следующем примере:

``` syntax
/* IDL file */
[ 
  uuid(ba209999-0c6c-11d2-97cf-00c04f8eea45),
  version(1.0)
]
interface FullPtrInterface
{
  void RemoteFn([in,ptr,string]) char *ptrName1,
                [in,ptr,string]  char *ptrName2);
}
```

В этом примере параметры *ptrName1* и *ptrName2* определены как полные указатели на строку. Оба указателя могут указывать на один и тот же адрес памяти, содержащий одну строку.

\[**ptr** \] -записи является обязательным при предоставлении поддержки псевдонимов. Однако, поскольку для этого требуется наибольшая обработка всех указателей, доступных в RPC, не рекомендуется для большинства приложений.

 

 