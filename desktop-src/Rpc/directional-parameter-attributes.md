---
title: Атрибуты направления (параметра)
description: Атрибуты направления описывают, передаются ли данные с клиента на сервер, с сервера на клиент или в оба этих атрибута.
ms.assetid: 1e4f92ae-2d98-412f-a693-54bb09ae4674
keywords:
- Удаленный вызов процедур RPC, описание, атрибуты направления
- in
- out
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: eec37dbf65919f5aae9e7674cf7102eddcdf5170
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104134223"
---
# <a name="directional-parameter-attributes"></a>Атрибуты направления (параметра)

Атрибуты направления описывают, передаются ли данные с клиента на сервер, с сервера на клиент или в оба этих атрибута. Все параметры в прототипе функции должны быть связаны с атрибутами направления. Три возможных сочетания атрибутов направления: 1) \[ [**в**](/windows/desktop/Midl/in) \] , 2) \[ [**out**](/windows/desktop/Midl/out-idl) \] и 3) \[ **в**, **out** \] . Они описывают способ передачи параметров между вызовом и вызовом процедур. При компиляции в режиме по умолчанию (расширенный режим Майкрософт) и пропущении атрибута направления для параметра компилятор MIDL предполагает, что значение по умолчанию — \[ **в** \] .

\[ [**Выходной**](/windows/desktop/Midl/out-idl) \] параметр должен быть указателем. Фактически \[  \] атрибут out не имеет смысла при применении к параметрам, которые не являются указателями, так как параметры функции C передаются по значению. В C вызываемая функция получает закрытую копию значения параметра; Он не может изменить значение вызывающей функции для этого параметра. Однако если параметр выступает в качестве указателя, его можно использовать для доступа к памяти и его изменения. Атрибут \[ **out** \] указывает, что серверная функция должна возвращать значение вызывающей функции клиента, и эта память, связанная с указателем, должна возвращаться в соответствии с атрибутами, назначенными указателю.

В следующем интерфейсе показаны три возможных сочетания атрибутов направления, которые можно применить к параметру. Функция **инаутпрок** ОПРЕДЕЛЯЕТСЯ в IDL-файле следующим образом:

``` syntax
void InOutProc ([in]       short     s1,
                [in, out]  short *  ps2,
                [out]      float *  pf3);
```

Первый параметр *S1* используется \[ [](/windows/desktop/Midl/in) \] только в. Его значение передается на удаленный компьютер, но не возвращается вызывающей процедуре. Несмотря на то, что серверное приложение может изменить значение *S1*, значение *S1* на клиенте будет таким же, как и после вызова.

Второй параметр, *PS2*, определен в прототипе функции как указатель с \[ [](/windows/desktop/Midl/in) \] атрибутами in и \[ [**out**](/windows/desktop/Midl/out-idl) \] . Атрибут \[ **in** \] указывает, что значение параметра передается с клиента на сервер. Атрибут \[ **out** \] указывает, что значение, на которое указывает *PS2* , возвращается клиенту.

Третий параметр — только \[ [**out**](/windows/desktop/Midl/out-idl) \] . Для параметра на сервере выделено место, но при входе значение не определено. Как упоминалось выше, все \[ **выходные** \] параметры должны быть указателями.

Удаленная процедура изменяет значение всех трех параметров, но клиенту доступны только новые значения \[ параметров [**out**](/windows/desktop/Midl/out-idl) \] и \[ [**in**](/windows/desktop/Midl/in) \] .


```C++
#define MAX 257

void InOutProc(short    s1,
               short * ps2,
               float * pf3)
{
    *pf3 = (float) s1 / (float) *ps2;
    *ps2 = (short) MAX - s1;
    s1++;  // in only; not changed on the client side
    return;
}
```



При возврате из вызова **инаутпрок** изменяется второй и третий параметры. Первый параметр, который находится \[ [**в только в**](/windows/desktop/Midl/in) \] , не изменен.

![параметры In](images/prog-a22.png)

![параметры вывода](images/prog-a23.png)

![параметры out](images/prog-a21.png)

 

 