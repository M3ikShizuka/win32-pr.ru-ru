---
title: Top-Level и внедренные указатели
description: Чтобы понять, как указатели и связанные с ними элементы данных выделяются в Microsoft RPC, необходимо различать указатели верхнего уровня и внедренные указатели.
ms.assetid: 217b9200-827c-4d36-9412-5e65858b8a97
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f28fab18cfb345587f4c152f6890d94c5177e5bd9344e542592c33e462915beb
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119011272"
---
# <a name="top-level-and-embedded-pointers"></a>Top-Level и внедренные указатели

Чтобы понять, как указатели и связанные с ними элементы данных выделяются в Microsoft RPC, необходимо различать *указатели верхнего уровня* и *внедренные указатели*. Также полезно ссылаться на набор всех указателей, не являющихся указателями верхнего уровня.

*Указатели верхнего уровня* — это те, которые указаны в качестве имен параметров в прототипах функций. Указатели верхнего уровня и их референтс всегда выделяются на сервере.

*Внедренные указатели* — это указатели, которые внедряются в структуры данных, такие как массивы, структуры и объединения. Если внедренные указатели записывают выходные данные в буфер и имеют значение null, серверное приложение может изменить их значения на отличные от NULL. В этом случае клиентские заглушки выделяют новую память для этих данных.

Если встроенный указатель не имеет значение NULL на клиенте перед вызовом, заглушки не распределяют память на клиенте при возврате. Вместо этого заглушки пытаются записать память, связанную с внедренным указателем, в существующую память на клиенте, связанную с этим указателем, перезаписывая данные уже там.

> [!Note]  
> Для данных, считываемых из или записанный в буфер и не указывающих размер буфера, длина выходного значения должна быть меньше или равна длине ввода. При обнаружении переполнения возникает исключение RPC. Для строковых данных длина вывода определяется путем проверки длины входной строки. Поэтому длина выходных строк не может превышать длину входных строк. Рекомендуется избегать этого, так как следует всегда включать параметр size, чтобы указать размер буфера.

 

Внедренные указатели только на запись обсуждаются в разделе [сочетание атрибутов указателя и направления](combining-pointer-and-directional-attributes.md).

Термины « *указатель уровня нонтоп* » ссылаются на все указатели, которые не указаны в качестве имен параметров в прототипе функции, включая внедренные указатели и несколько уровней вложенных указателей.

 

 




