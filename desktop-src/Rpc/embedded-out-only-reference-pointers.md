---
title: Внедренные Out-Only указатели ссылок
description: Внедренные Out-Only указатели ссылок
ms.assetid: b0fcba9e-b285-4d29-9ffc-c8d6d7818824
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d36fc6229c0b155e3fa9a7f66e6cd1fbd742d7ec876264a8706ce81c4150d6ba
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118930533"
---
# <a name="embedded-out-only-reference-pointers"></a>Внедренные Out-Only указатели ссылок

При использовании \[ [](/windows/desktop/Midl/out-idl) \] ссылочных указателей в Microsoft RPC, созданные заглушки сервера выделяют только первый уровень указателей, доступных из указателя ссылки. Указатели на более глубоких уровнях не выделяются заглушками, но должны выделяться уровнем серверного приложения. Например, предположим, что интерфейс указывает только недопустимый \[  \] массив указателей ссылок:

``` syntax
/* IDL file (fragment) */
typedef [ref] short * PREF;

Proc1([out] PREF array[10]);
```

В этом примере заглушка сервера выделяет память для 10 указателей и присваивает каждому указателю значение null. Серверное приложение должно выделить память для 10 [**коротких**](/windows/desktop/Midl/short) целых чисел, на которые ссылаются указатели, а затем установить 10 указателей для указания на целые числа.

Если в \[ [](/windows/desktop/Midl/out-idl) \] структуре данных только для выхода включены вложенные указатели на ссылки, то заглушки сервера выделяют только первый указатель, доступный из указателя ссылки. Например:

``` syntax
/* IDL file (fragment) */
typedef struct 
{
    [ref] small * psValue;
} STRUCT1_TYPE;

typedef struct 
{
    [ref] STRUCT1_TYPE * ps1;
} STRUCT_TOP_TYPE;

Proc2([out, ref] STRUCT_TOP_TYPE * psTop);
```

В предыдущем примере заглушки сервера распределяют указатель *пстоп* и **\_ \_ тип Top структуры** Structure. Указатель ссылки *PS1* в **типе структуры \_ Top \_** имеет значение null. Заглушка сервера не выделяет каждый уровень структуры данных, а также не выделяет **\_ тип STRUCT1** или внедренный указатель *псвалуе*.

 

 