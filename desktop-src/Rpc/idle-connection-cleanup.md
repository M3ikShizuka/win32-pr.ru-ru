---
title: Очистка бездействующего подключения
description: По умолчанию соединения в пуле потоков не закрываются, пока не завершится вся ассоциация.
ms.assetid: e3d6c89b-0ec5-429d-96d9-1396cce10750
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ddc7a7d4cefcead53e9b92678867cd76ceb6fab7f1ab5f1a573cf75378cf2a5c
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120020804"
---
# <a name="idle-connection-cleanup"></a>Очистка бездействующего подключения

По умолчанию соединения в пуле потоков не закрываются, пока не завершится вся ассоциация. Эта политика позволяет клиентам с большим количеством потоков или идентификаторов безопасности выполнять вызовы RPC на сервере эффективным образом. Недостаток заключается в том, что для поддержания этих подключений может быть зафиксировано недостаточное количество ресурсов. Для управления процессом RPC предоставляет функцию [**рпкмгмтенаблеидлеклеануп**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtenableidlecleanup) . Эта функция включает очистку бездействующего подключения; Клиент периодически проверяет пул подключений и закрывает соединения, которые не использовались недавно. Если ассоциация поддерживает дескрипторы контекста, то очистка неактивных соединений закрывает все неактивные подключения, но гарантирует, что по крайней мере одно соединение остается открытым, даже если соединение бездействует (в противном случае сервер получает дескриптор контекста). Если ассоциация не поддерживает дескрипторы контекста, то очистка неактивных соединений закрывает все неактивные соединения, даже если в пуле нет соединений.

в Windows XP время выполнения RPC отслеживает количество открытых соединений в ассоциации и автоматически включает очистку бездействующего подключения, если число подключений в любой связи превышает определенное пороговое значение.

 

 




