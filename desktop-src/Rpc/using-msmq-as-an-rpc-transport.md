---
title: Использование MSMQ в качестве транспорта RPC
description: Подсистема RPC поддерживает использование MSMQ в качестве транспорта в синхронном и асинхронном режимах.
ms.assetid: c3f96a91-b7bb-4c2a-8699-2100324af165
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ab18f4476815929e8a7e6fb4e4a1eef0a4e4e34754ac134f023c8551899e0138
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119010682"
---
# <a name="using-msmq-as-an-rpc-transport"></a>Использование MSMQ в качестве транспорта RPC

Подсистема RPC поддерживает использование MSMQ в качестве транспорта в синхронном и асинхронном режимах.

В синхронном режиме используются обычные удаленные вызовы процедур. Эти вызовы используют хорошо известные конечные точки и транспорт очереди сообщений [нкадг \_ MQ](/windows/desktop/Midl/ncadg-mq)в качестве транспортного протокола. В синхронном режиме удаленные процедуры могут иметь параметры \[ [in](/windows/desktop/Midl/in) \] и \[ [out](/windows/desktop/Midl/out-idl) , \] а также использовать стандартные службы безопасности RPC. Подсистема RPC создает очередь ответов для удаленных вызовов, содержащих **\[ выходные \]** параметры. Синхронный режим удобен для приложений, в которых клиенту требуется получение данных с сервера. Основное ограничение этого режима заключается в том, что, как и в случае обычных удаленных вызовов процедур, клиент и сервер должны работать и оставаться работающими в течение всего времени вызова.

Асинхронный режим позволяет клиентским приложениям выполнять вызовы к серверу и возвращаться немедленно, независимо от состояния серверного приложения или компьютера сервера. Он также делает подмножество функций MSMQ, доступных для управления очередями сообщений и информационным потоком. Функция [**рпкбиндингсетоптион**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetoption) позволяет управлять качеством обслуживания, приоритетом вызовов, ведением журнала, безопасностью и временем существования очереди серверных процессов. Функция [**рпксерверусепротсекепекс**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqepex) позволяет задавать атрибуты очереди серверных процессов, такие как сохраняемость очереди, проверка подлинности и шифрование.

Асинхронный MSMQ реализуется так же, как и синхронный. Необходимо использовать хорошо известные конечные точки и определить транспортный протокол как [нкадг \_ MQ](/windows/desktop/Midl/ncadg-mq). В IDL-файле примените атрибут [Message](/windows/desktop/Midl/message) к функциям, использующим асинхронную очередь сообщений. Обратите внимание, что функции сообщений могут иметь \[ \] только параметры.

 

 