---
title: Состояние асинхронного канала
description: На этой странице описывается асинхронное состояние канала для вызовов RPC.
ms.assetid: af937eba-6b70-447a-af76-a8e27f5754e3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9a35e54d9f86228cb4c957f53411c105e20e2109
ms.sourcegitcommit: 9b5faa61c38b2d0c432b7f2dbee8c127b0e28a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2021
ms.locfileid: "122468171"
---
# <a name="asynchronous-pipe-state"></a>Состояние асинхронного канала

На этой странице описывается асинхронное состояние канала для вызовов RPC.

## <a name="in-pipe"></a>В канале

Поведение клиента


| Состояние | State Name | Действие | 
|-------|------------|--------|
| C | Сделать вызов | Создание RPC<ul><li>При успешном завершении переходит в состояние WS</li><li>При возникновении исключения перейдите в конец</li></ul>Сбой: перейдите на страницу Can<br /> | 
| P | push | Выполнить принудительную отправку<ul><li>При сбое переходит в конец</li><li>При успешном переходе в WS</li></ul>Сбой: перейдите на страницу Can<br /> | 
| WS | Ожидание отправки | Ожидание уведомления<ul><li>При сбое получения уведомления может</li><li>Если получено сообщение об успешном <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпксендкомплетее</strong></a> и требуется отправить дополнительные данные, перейдите на страницу P</li><li>Если получено сообщение об успешном <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпксендкомплетее</strong></a> и больше не нужно отправлять данные, перейдите на страницу NP</li><li>Если сообщение о сбое <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпккаллкомплете</strong></a> получено Go</li></ul>Сбой: перейдите на страницу Can<br /> | 
| NP | Push-уведомления null | Отправить 0 байт (Push-уведомления null)<ul><li>При сбое переходит в конец</li><li>При успешном завершении переходит в Вкомп</li></ul>Сбой: перейдите на страницу Can<br /> | 
| Можно | Отменить вызов | Вызов <a href="/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccancelcall"><strong>рпкасинкканцелкалл</strong></a>Go to вкомп<br /> | 
| вкомп | Ожидание завершения | Должно быть получено уведомление о Нотификатионкалл-завершении.<br /> К Comp<br /> | 
| Соответствовал | Completion | Выдача <a href="/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall"><strong>рпкасинккомплетекалл</strong></a>к концу<br /> | 
| Конец | 




 

Поведение сервера


| Состояние | State Name | Действие | 
|-------|------------|--------|
| D | Dispatch | Вызов отправляется средой выполнения RPC к P<br /> Неустранимая ошибка (при выполнении в потоке RPC): вызов исключения; к концу<br /> Для корректного сбоя: перейдите на<br /> | 
| P | По запросу | Сделать запрос на вытягивание<ul><li>При сбое переходит в конец</li><li>При успешном выполнении и синхронном завершении с чтением ненулевых байтов перейдите к P</li><li>При успешном выполнении и синхронном завершении с нулевым количеством считанных байтов (по запросу null) переход к Comp</li><li>При успешном выполнении и асинхронном завершении (возвращается ERROR_IO_PENDING) перейдите к WP.</li></ul>Сбой: перейдите на<br /> | 
| WP | Ожидание запроса на вытягивание | Ожидание уведомления<ul><li>При сбое для получения завершения перейдите к</li><li>Если <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпкрецеивекомплете</strong></a> сбоя получен, перейдите к</li><li>Если получено <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпкрецеивекомплете</strong></a> об успешном выполнении с чтением ненулевых байтов, перейдите к P</li><li>Если получено сообщение об успешном <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпкрецеивекомплете</strong></a> с нулевым количеством считанных байтов (по запросу null), перейдите в раздел "Comp"</li><li>При получении ошибки перейдите к</li></ul>Сбой: перейдите на<br /> | 
| А | Прервать вызов | Вызов <a href="/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasyncabortcall"><strong>рпкасинкаборткалл</strong></a>к концу<br /> | 
| Соответствовал | Completion | Вызов <a href="/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall"><strong>рпкасинккомплетекалл</strong></a>к концу<br /> | 
| Конец | 




 

## <a name="out-pipe"></a>ВЫХОДНОЙ канал

Поведение клиента


| Состояние | State Name | Действие | 
|-------|------------|--------|
| C | Сделать вызов | Создание RPC<ul><li>При успешном переходе на P</li><li>При сбое перейдите в раздел Comp</li></ul>Сбой: перейдите на страницу Can<br /> | 
| P | По запросу | Сделать запрос на вытягивание<ul><li>При сбое переходит в конец</li><li>При успешном выполнении и синхронном завершении с чтением ненулевых байтов перейдите к P</li><li>При успешном выполнении и синхронном завершении с нулевым количеством считанных байтов (по запросу null) перейдите в Вкомп.</li><li>При успешном выполнении и асинхронном завершении (возвращается ERROR_IO_PENDING) перейдите к WP.</li></ul>Сбой: перейдите на страницу Can<br /> | 
| WP | Ожидание запроса на вытягивание | Ожидание уведомления<ul><li>При неудачном завершении переходит к CAN</li><li>Если <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпкрецеивекомплете</strong></a> сбоя получен, переходит к CAN</li><li>Если получено <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпкрецеивекомплете</strong></a> об успешном выполнении с чтением ненулевых байтов, перейдите к P</li><li>Если получено сообщение об успешном <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпкрецеивекомплете</strong></a> с нулевым количеством считанных байтов (по запросу null), перейдите в раздел "Comp"</li><li>Если ошибка получена, можно</li></ul>Сбой: перейдите на страницу Can<br /> | 
| Можно | Отменить вызов | Вызов <a href="/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccancelcall"><strong>рпкасинкканцелкалл</strong></a>Go to вкомп<br /> | 
| вкомп | Ожидание завершения | Ожидание уведомления. Должно быть получено уведомление о завершении вызова.<br /> К Comp<br /> | 
| Соответствовал | Completion | Выдача <a href="/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall"><strong>рпкасинккомплетекалл</strong></a>к концу<br /> | 
| Конец | 




 

Поведение сервера


| Состояние | State Name | Действие | 
|-------|------------|--------|
| D | Dispatch | Вызов отправляется средой выполнения RPC к P<br /> Неустранимая ошибка (при выполнении в потоке RPC): вызов исключения; к концу<br /> Для корректного сбоя: перейдите на<br /> | 
| P | push | Выполнить принудительную отправку<ul><li>При успешном переходе в WP</li><li>При сбое переходит в конец</li></ul>Сбой: перейдите на<br /> | 
| WP | Ожидание принудительной отправки | Ожидание уведомления<ul><li>При сбое для получения завершения перейдите к</li><li>Если получено сообщение об успешном <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпксендкомплетее</strong></a> и требуется отправить дополнительные данные, перейдите на страницу P</li><li>Если получено сообщение об успешном <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпксендкомплетее</strong></a> и больше не нужно отправлять данные, перейдите на страницу NP</li><li>Если ошибка получена, переходите к следующему.</li></ul>Сбой: перейдите на<br /> | 
| NP | Push-уведомления null | Отправить 0 байт<ul><li>При успешном переходе на WNP</li><li>при сбое перейдите в раздел Comp</li></ul>Сбой: перейдите на<br /> | 
| WNP | Ожидание принудительной отправки null | Ожидание уведомления<ul><li>При сбое для получения завершения перейдите к</li><li>Если ошибка получена, переходите к следующему.</li><li>Если получено сообщение об успешном выполнении Go</li></ul> | 
| А | Прервать вызов | Вызовите <a href="/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasyncabortcall"><strong>рпкасинкаборткалл</strong></a>; к концу | 
| Соответствовал | Completion | Ошибка <a href="/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall"><strong>рпкасинккомплетекалл</strong></a>; к концу | 
| Конец | 




 

## <a name="in-out-pipe"></a>Исходящий канал

Поведение клиента


| Состояние | State Name | Действие | 
|-------|------------|--------|
| C | Сделать вызов | Создание RPC<ul><li>При успешном переходе в WS</li><li>При возникновении исключения перейдите в конец</li></ul>Сбой: перейдите на страницу Can<br /> | 
| PS | push | Выполнить принудительную отправку<ul><li>При сбое переходит в конец</li><li>При успешном переходе в WS</li></ul>Сбой: перейдите на страницу Can<br /> | 
| WS | Ожидание отправки | Ожидание уведомления<ul><li>При сбое получения уведомления может</li><li>Если получено сообщение об успешном <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпксендкомплетее</strong></a> и требуется отправить дополнительные данные, перейдите в PS</li><li>Если получено сообщение об успешном <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпксендкомплетее</strong></a> и больше не нужно отправлять данные, перейдите на страницу NP</li><li>Если сообщение о сбое <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпккаллкомплете</strong></a> получено Go</li></ul>Сбой: перейдите на страницу Can<br /> | 
| NP | Push-уведомления null | Отправить 0 байт (Push-уведомления null)<ul><li>При сбое переходит в конец</li><li>При успешном переходе на PL</li></ul>Сбой: перейдите на страницу Can<br /> | 
| PL | По запросу | Сделать запрос на вытягивание<ul><li>При сбое переходит в конец</li><li>При успешном выполнении и синхронном завершении с ненулевыми байтами чтение переходит к PL</li><li>При успешном выполнении и синхронном завершении с нулевым количеством считанных байтов (по запросу null) перейдите в Вкомп.</li><li>При успешном выполнении и асинхронном завершении (возвращается ERROR_IO_PENDING) перейдите к WPL.</li></ul>Сбой: перейдите на страницу Can<br /> | 
| WPL | Ожидание запроса на вытягивание | Ожидание уведомления<ul><li>При неудачном завершении переходит к CAN</li><li>Если <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпкрецеивекомплете</strong></a> сбоя получен, переходит к CAN</li><li>Если получено <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпкрецеивекомплете</strong></a> об успешном выполнении с чтением ненулевых байтов, перейдите к PL</li><li>Если получено сообщение об успешном <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпкрецеивекомплете</strong></a> с нулевым количеством байтов, перейдите к Comp</li><li>Если ошибка получена, можно</li></ul>Сбой: перейдите на страницу Can<br /> | 
| Можно | Отменить вызов | Вызов <a href="/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccancelcall"><strong>рпкасинкканцелкалл</strong></a>Go to вкомп<br /> | 
| вкомп | Ожидание завершения | Ожидание уведомления. Должно быть получено уведомление Каллкомплете.<br /> К Comp<br /> | 
| Соответствовал | Completion | Выдача <a href="/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall"><strong>рпкасинккомплетекалл</strong></a>к концу<br /> | 
| Конец | 




 

Поведение сервера


| Состояние | State Name | Действие | 
|-------|------------|--------|
| D | Dispatch | Вызов отправляется с помощью RPC Рунтимего в PL.<br /> Неустранимая ошибка (при выполнении в потоке RPC): вызов исключения; к концу<br /> Для корректного сбоя: перейдите на<br /> | 
| PL | По запросу | Сделать запрос на вытягивание<ul><li>При сбое переходит в конец</li><li>При успешном выполнении и синхронном завершении с ненулевыми байтами чтение переходит к PL</li><li>При успешном выполнении и синхронном завершении с нулевым количеством прочитанных байтов (по запросу null) переход к PS</li><li>При успешном выполнении и асинхронном завершении (возвращается ERROR_IO_PENDING) перейдите к WPL.</li></ul>Сбой: перейдите на<br /> | 
| WPL | Ожидание запроса на вытягивание | Ожидание уведомления<ul><li>При сбое для получения завершения перейдите к</li><li>Если <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпкрецеивекомплете</strong></a> сбоя получен, перейдите к</li><li>Если получено <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпкрецеивекомплете</strong></a> об успешном выполнении с чтением ненулевых байтов, перейдите к PL</li><li>Если получено сообщение об успешном <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпкрецеивекомплете</strong></a> с нулевым числом байтов Read, перейдите к PS</li><li>Если ошибка получена, перейдите к</li></ul>Сбой: перейдите на<br /> | 
| PS | push | Выполнить принудительную отправку<ul><li>При успешном переходе в WPS</li><li>При сбое переходит в конец</li></ul>Сбой: перейдите на<br /> | 
| Информационный | Ожидание принудительной отправки | Ожидание уведомления<ul><li>При сбое для получения завершения перейдите к</li><li>Если получено сообщение об успешном <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпксендкомплетее</strong></a> и требуется отправить дополнительные данные, перейдите в PS</li><li>Если получено сообщение об успешном <a href="/windows/desktop/api/Rpcasync/ne-rpcasync-rpc_async_event"><strong>рпксендкомплетее</strong></a> и больше не нужно отправлять данные, перейдите на страницу NP</li><li>Если ошибка получена, переходите к следующему.</li></ul>Сбой: перейдите на<br /> | 
| NP | Push-уведомления null | Отправить 0 байт<ul><li>При успешном переходе на WNP</li><li>при сбое перейдите в раздел Comp</li></ul>Сбой: перейдите на<br /> | 
| WNP | Ожидание принудительной отправки null | Ожидание уведомления<ul><li>При сбое для получения завершения перейдите к</li><li>Если ошибка получена, переходите к следующему.</li><li>Если получено сообщение об успешном выполнении Go</li></ul><br /> | 
| А | Прервать вызов | Вызовите <a href="/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasyncabortcall"><strong>рпкасинкаборткалл</strong></a>; к концу | 
| Соответствовал | Completion | Ошибка <a href="/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall"><strong>рпкасинккомплетекалл</strong></a>; к концу | 
| Конец | 




 

 

 





