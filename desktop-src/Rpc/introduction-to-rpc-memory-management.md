---
title: Общие сведения об управлении памятью RPC
description: Общие сведения об управлении памятью удаленного вызова процедур (RPC).
ms.assetid: 3474d79c-93ef-4221-b9ea-9173978e2929
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0a169f87bbd8a9747dd7a4983a26f1122cf575e95434ed0dd3be346bae12b9a9
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118928938"
---
# <a name="introduction-to-rpc-memory-management"></a>Общие сведения об управлении памятью RPC

В контексте RPC управление памятью включает в себя:

-   Выделение и освобождение памяти, необходимой для имитации одного концептуального адресного пространства между клиентом и сервером в различных адресных пространствах потоков клиента и сервера.
-   Определение того, какой программный компонент отвечает за управление памятью — это приложение или заглушка, созданная с помощью MIDL.
-   Выбор атрибутов MIDL, влияющих на управление памятью: атрибуты направления, атрибуты указателя, атрибуты массива и атрибуты ACF, \[ [ \_ количество байт](/windows/desktop/Midl/byte-count) \] , \[ [выделение](/windows/desktop/Midl/allocate) \] и \[ [Включение \_ выделения](/windows/desktop/Midl/enable-allocate) \] .

Когда программа вызывает функцию или процедуру в адресном пространстве, управление памятью является более простым, чем в распределенном приложении. Для иллюстрации на следующей схеме показано двоичное дерево. Чтобы передать эту структуру данных процедуре в адресном пространстве, программа просто передает указатель на корень дерева.

![Двоичное дерево с указателями на данные структуры, размещенные в корне дерева](images/bintree.png)

Клиентские и серверные приложения RPC совместно используют данные в двух разных пространствах памяти. Эти пространства памяти могут быть или не находиться на одном компьютере. В любом случае клиент и сервер не имеют прямого доступа к пространству памяти друг друга. RPC зависит от возможности имитировать адресное пространство клиентской программы в адресном пространстве серверной программы. Он также должен возвращать данные, включая новые и измененные данные, с сервера в память клиента.

В таких случаях, как двоичное дерево, представленное на предыдущей схеме, недостаточно передать указатель на корневой узел удаленной процедуре. Либо программа, либо заглушки должны передать полное дерево в адресное пространство сервера, чтобы Удаленная процедура работала с ней.

 

 