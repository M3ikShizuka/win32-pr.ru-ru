---
title: Обратные вызовы (RPC)
description: Часто модель программирования требует обратного вызова сервера клиенту через удаленный вызов процедур (RPC) или вызов клиента на недоверенный сервер. В этом разделе представлено множество потенциальных ловушек.
ms.assetid: a4f3ea26-ac4b-41e5-abde-96b4baedf2ae
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6260e2cff2cbaff86f210764e89d55859c4d33af
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "104071029"
---
# <a name="callbacks-rpc"></a>Обратные вызовы (RPC)

Часто модель программирования требует обратного вызова сервера клиенту через удаленный вызов процедур (RPC) или вызов клиента на недоверенный сервер. В этом разделе представлено множество потенциальных ловушек.

Во-первых, необходимо выполнить обратный вызов клиента с достаточно низким уровнем олицетворения. Если сервер является системной службой с высоким уровнем привилегий, то при обращении к локальному клиенту с уровнем олицетворения олицетворения или выше может быть обеспечен достаточный уровень привилегий для получения доступа к системе. Обратный вызов удаленного клиента с более высоким уровнем олицетворения также может привести к нежелательным последствиям.

Во-вторых, если злоумышленник запустит службу для выполнения обратного вызова, она может запустить то, что называется *черным отверстием*— атакой типа "отказ в обслуживании". Такие атаки не относятся к RPC; в этих атаках компьютер вызывает отправку на него трафика, но не отвечает на запросы. Вы перейдете на все больше ресурсов, чтобы вызвать Черное отверстие, но они никогда не будут возвращаться. Одним из универсальных примеров такой атаки является атака на уровне TCP, называемая атакой TCP/IP SYN Flood.

На уровне RPC простая атака с черными отверстиями возникает, когда злоумышленник вызывает интерфейс, и запрашивает сервер для вызова интерфейса обратно. Интерфейс соответствует, но злоумышленник никогда не возвращает вызов: один поток на сервере связан. Злоумышленник выполняет это 100 раз, занимая 100 потоков на сервере. В конечном итоге на сервере заканчивается память. Отладка сервера потенциально может раскрыть удостоверение вызывающего его черного, но часто сервер будет перезапущен без подозрения на Фаул Play, или может быть недостаточно знаний для определения злоумышленника.

Третья ловушка находится на клиенте. Часто клиент выполняет вызов сервера, уведомляя сервер о том, как вызвать его обратно (обычно это привязка строки), а затем ожидает от сервера вызова, который не принимает все вызовы на этой конечной точке, которые поступают от сервера. Протокол обратного вызова от сервера к клиенту должен включать некоторый механизм проверки, чтобы гарантировать, что когда обратный вызов передается клиенту, он на самом деле поступает на сервер.

 

 




