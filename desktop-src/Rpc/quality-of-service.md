---
title: Качество обслуживания (RPC)
description: Для создания привязки с проверкой подлинности клиентские программы могут использовать функцию Рпкбиндингсетаусинфоекс, а не функцию Рпкбиндингсетаусинфо.
ms.assetid: bc3d47ba-3c1b-4aba-8fe3-b4501a621931
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ee93b1aa376c9d6f4e2b3eedab73c91471d42498
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127348078"
---
# <a name="quality-of-service-rpc"></a>Качество обслуживания (RPC)

Для создания привязки с проверкой подлинности клиентские программы могут использовать функцию [**рпкбиндингсетаусинфоекс**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfoexa) , а не функцию [**рпкбиндингсетаусинфо**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) . В противном случае они передают указатель на структуру [**\_ \_ QoS безопасности RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) в качестве последнего параметра **рпкбиндингсетаусинфоекс**. Эта структура содержит сведения о качеству обслуживания. Клиентские программы также могут указать отслеживание удостоверений и выбрать тип олицетворения.

Используйте элемент **capabilities** структуры [**\_ \_ QoS безопасности RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) , чтобы задать, какие части приложения клиента и сервера проходят проверку подлинности. Если выбран параметр RPC \_ C \_ QoS \_ \_ по умолчанию, то библиотека времени выполнения RPC выполняет проверку подлинности клиента или сервера в соответствии с по умолчанию для поставщика общих служб. По умолчанию поставщик общих служб Kerberos проверяет подлинность клиента и сервера. По умолчанию для всех остальных SSP, предоставляемых корпорацией Майкрософт, является проверка подлинности клиента на сервере, но не проверка подлинности сервера для клиента.

Если клиент и сервер должны всегда проходить проверку подлинности друг с другом, установите для элемента **возможности** в структуре [**RPC \_ Security \_ QoS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) значение \_ \_ \_ \_ взаимная \_ Проверка подлинности RPC C. Некоторые поставщики безопасности могут не поддерживать взаимную проверку подлинности. Если \_ \_ \_ \_ \_ для таких поставщиков безопасности задана взаимная проверка подлинности RPC C, то при вызове удаленной процедуры будет возвращена ошибка. При использовании поставщика общих служб SCHANNEL можно также установить возможности участника RPC C на **основе возможностей** \_ QoS в \_ \_ \_ любом \_ центре. Эта константа указывает, что поставщик удостоверений должен проверять вызов удаленной процедуры, даже если центр сертификации, выдавший сертификат проверки подлинности клиента, отсутствует в корневом хранилище сертификатов поставщика общих служб. По умолчанию сертификат отклоняется, если поставщик удостоверений не распознает центр сертификации. Центр сертификации — это независимая компания или организация, например VeriSign, которая выдает сертификаты проверки подлинности.

Приложения также могут задавать отслеживание идентификации, используемое библиотекой времени выполнения RPC. Обычно в программах используется [*статическое отслеживание идентификаторов*](s-glos.md). При статическом отслеживании учетные данные клиента задаются при вызове функции [**рпкбиндингсетаусинфо**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) . Затем библиотека времени выполнения RPC использует эти учетные данные для всех вызовов RPC для привязки, независимо от изменений в удостоверении вызывающего потока или вызывающего процесса. Приложения также могут выбрать [*динамическое отслеживание идентификаторов*](d-glos.md). Динамическое отслеживание идентификаторов дает указание библиотеке времени выполнения RPC использовать учетные данные вызывающего потока во время каждого вызова, а не маркер привязки. По умолчанию отслеживание удостоверений является статическим.

Если идентификатор клиента не будет изменяться, то отслеживание статических удостоверений может иметь более высокий уровень производительности и может сэкономить время выполнения RPC от проверки каждого раза, совпадает ли удостоверение в вызывающем потоке с удостоверением, предоставленным системе безопасности. Если идентификация вызывающего потока может измениться между вызовами, и сервер должен распознать эти изменения, лучше указать динамическое отслеживание идентификаторов — время выполнения RPC без заданных и эффективно отслеживать удостоверение, а также при изменении удостоверения управляет этим изменением от вашего имени.

> [!Note]  
> Для вызовов **нкалрпк** статические и динамические отслеживания идентификаторов имеют различные характеристики производительности, и в зависимости от обстоятельств они могут быть более быстрыми.

 

В рамках спецификации качества обслуживания клиентская программа также может задать тип олицетворения, который серверная программа может выполнять от ее имени. Дополнительные сведения см. в разделе [олицетворение клиента](client-impersonation.md).

В поле номер версии структуры [**\_ \_ QoS безопасности RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) всегда должно быть установлено значение RPC \_ C \_ Security \_ QoS \_ Version.

 

 




