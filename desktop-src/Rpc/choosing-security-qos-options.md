---
title: Выбор параметров качества обслуживания для системы безопасности
description: Параметры качества обслуживания безопасности передаются как часть параметра Секуритикос, заданного функцией Рпкбиндингсетаусинфоекс. Используйте следующие рекомендации.
ms.assetid: 43befe3d-079a-4389-a1ff-6bda90935769
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 44c943fd9e2b4104de87a24c6078499fa38acdf1b6d1ea2122bf9d3063cd80f3
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118932200"
---
# <a name="choosing-security-qos-options"></a>Выбор параметров качества обслуживания для системы безопасности

Параметры качества обслуживания безопасности передаются как часть параметра *секуритикос* , заданного функцией [**рпкбиндингсетаусинфоекс**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfoexa) . Используйте следующие рекомендации.

## <a name="use-mutual-authentication"></a>Использовать взаимную проверку подлинности

Истинная взаимная проверка подлинности доступна только для определенных поставщиков безопасности: согласование (при согласовании Kerberos), Kerberos и SChannel. NTLM не поддерживает взаимную проверку подлинности. Для использования взаимной проверки подлинности необходимо указать правильно сформированное имя участника на сервере. Многие разработчики используют следующий сбой безопасности: сервер вызывается для запроса имени участника ([**рпкмгмтинксерверпринкнаме**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtinqserverprincname)), после чего он не запрашивает взаимную проверку подлинности с помощью имени участника. Этот подход нарушает всю идею взаимной проверки подлинности. идея взаимной проверки подлинности заключается в том, что вызываются только определенные серверы, так как они являются доверенными для анализа и обработки данных. Используя только что описанную методику безопасности, разработчики применяют свои данные для того, чтобы они могли возвращать свое имя.

Например, если клиентское программное обеспечение должно вызывать только сервер, работающий под учетными записями Джо, Иван или Алисы, необходимо вызвать функцию [**рпкмгмтинксерверпринкнаме**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtinqserverprincname) , а затем проверить возвращаемое имя. Если это Джо, Иван или Alice, то взаимная проверка подлинности должна быть запрошена с использованием имени участника на сервере. Это гарантирует, что обе половины диалога поступают к одному и тому же участнику.

Если клиентское программное обеспечение должно вызывать службу, работающую только под учетной записью Джо, непосредственно создать имя участника-службы и выполнить вызов. Если сервер не является Джо, вызов просто завершится ошибкой.

многие раз службы выполняются как Windows системные службы, что означает, что они выполняются под учетной записью компьютера. Также рекомендуется взаимная проверка подлинности и создание имени участника-сервера.

## <a name="use-the-lowest-impersonationtype-that-allows-the-call-to-go-through"></a>Используйте самый низкий Имперсонатионтипе, позволяющий вызвать Go

Эта рекомендация является довольно ясной. Даже если используется взаимная проверка подлинности, не выдайте серверу больше прав, чем требуется. законный сервер мог быть скомпрометирован, и несмотря на то, что отправленные данные попадают в неправильные руки в таких случаях, по крайней мере сервер не сможет получить доступ к другим данным в сети от вашего имени. Некоторые серверы ототклоняют вызов, который не имеет достаточных сведений для определения и, возможно, олицетворения вызывающего. Кроме того, имейте в виду, что некоторые последовательности протоколов поддерживают безопасность на транспортном уровне ([**нкакн \_ NP**](/windows/desktop/Midl/ncacn-np) и [**нкалрпк**](/windows/desktop/Midl/ncalrpc)). В таких случаях сервер всегда может олицетворять пользователя, если при создании маркера привязки указать достаточно высокий уровень олицетворения через параметр *нетворкоптионс* .

Наконец, некоторые поставщики или транспорты безопасности могут прозрачно увеличить Имперсонатионтипе на более высокий уровень, чем указанный. При разработке программы убедитесь, что вы пытаетесь выполнить вызовы с предполагаемой Имперсонатионтипе и проверьте, получаете ли вы более высокие Имперсонатионтипе на сервере.

 

 