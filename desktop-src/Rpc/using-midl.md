---
title: Использование MIDL
description: Создание и компиляция интерфейса язык MIDL (MIDL) и удаленного вызова процедур (RPC).
ms.assetid: 2594e3d6-d44a-4e12-8286-b9700e67702e
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a5ae89a740831fef28ade4c07dc6bbe2b9b68a8a154eb119f47e16b2cb68b325
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119010752"
---
# <a name="using-midl"></a>Использование MIDL

Все интерфейсы для программ, использующих RPC, должны быть определены в язык MIDL (MIDL) и скомпилированы с помощью компилятора MIDL. В следующих разделах представлен краткий обзор создания и компиляции интерфейса MIDL.

-   [Определение интерфейса с помощью MIDL](#defining-an-interface-with-midl)
-   [Компиляция MIDL-файла](#compiling-a-midl-file)

Подробное обсуждение этих разделов см. [в файлах IDL и ACF](the-idl-and-acf-files.md).

## <a name="defining-an-interface-with-midl"></a>Определение интерфейса с помощью MIDL

MIDL-файлы — это текстовые файлы, которые можно создавать и редактировать в текстовом редакторе. При создании идентификатора UUID для интерфейса обычно выходные данные сохраняются в шаблоне MIDL-файла. Дополнительные сведения о UUID см. в разделе [создание идентификаторов UUID интерфейса](generating-interface-uuids.md).

Все интерфейсы в MIDL имеют тот же формат. Они начинаются с заголовка, содержащего список атрибутов интерфейса и имя интерфейса. Атрибуты заключаются в квадратные скобки. За заголовком интерфейса следует его тело, заключенное в фигурные скобки. В следующем примере показан простой интерфейс.

``` syntax
[
  uuid(ba209999-0c6c-11d2-97cf-00c04f8eea45),
  version(1.0)
]
interface MyInterface
{
  const unsigned short INT_ARRAY_LEN = 100;

  void MyRemoteProc( 
      [in] int param1,
      [out] int outArray[INT_ARRAY_LEN]
  );
}
```

Некоторые атрибуты, обычно присутствующие в определении интерфейса MIDL, — это UUID и номер версии интерфейса. Тело определения интерфейса должно содержать объявления процедур всех удаленных процедур в интерфейсе. Он также может содержать объявления типов данных и констант, необходимых интерфейсу.

Все параметры в объявлениях удаленных процедур должны быть объявлены как \[ [**in**](/windows/desktop/Midl/in), \] \[ [**out**](/windows/desktop/Midl/out-idl) \] или \[ **in**  \] . Эти объявления указывают, что клиентская программа передает данные в удаленную процедуру, получает данные из удаленной процедуры или и то, и другое. Более подробные сведения об объявлениях параметров интерфейса см. [в теле интерфейса IDL](the-idl-interface-body.md).

## <a name="compiling-a-midl-file"></a>Компиляция MIDL-файла

Компилятор MIDL — это программа командной строки, которая автоматически устанавливается вместе с пакетом SDK для платформы. Вызовите его в командном окне, введя команду **MIDL**, а затем имя файла MIDL в командной строке. Убедитесь, что каталог, содержащий компилятор MIDL, находится в пути. В следующем примере демонстрируется его использование:

**MIDL MyApp. idl**

Обратите внимание, что нет необходимости включать расширение, если имя файла имеет расширение IDL. Можно также использовать [Параметры командной строки](/windows/desktop/Midl/midl-command-line-reference) компилятора MIDL, вставив их между командой **MIDL** и именем файла. Это показано в следующем примере:

**MIDL/АКФ MyApp. ACF MyApp. idl**

В этом примере компилятор MIDL выполняется с использованием файла MyApp. idl в качестве входного файла. Параметр командной строки **/АКФ** указывает компилятору использовать файл конфигурации приложения (ACF) для ввода. Файлы конфигурации приложений более тщательно обсуждаются в [файлах IDL и ACF](the-idl-and-acf-files.md).

Более подробные сведения об использовании компилятора MIDL см. в разделе [язык MIDL (MIDL)](/windows/desktop/Midl/midl-start-page), который содержит сведения по следующим темам:

-   [Требования к препроцессору C-препроцессор для MIDL](/windows/desktop/Midl/c-preprocessor-requirements-for-midl)
-   [C/C++-рекомендации по компиляторам](/windows/desktop/Midl/c-c-compiler-considerations)
-   [Файлы, созданные для интерфейса RPC](/windows/desktop/Midl/files-generated-for-an-rpc-interface)
-   [Справочник по командной строке MIDL](/windows/desktop/Midl/midl-command-line-reference)
-   [Справочник по языку MIDL](/windows/desktop/Midl/midl-language-reference)
-   [Ошибки и предупреждения компилятора MIDL](/windows/desktop/Midl/midl-compiler-errors-and-warnings)

 

 