---
title: Настройка компьютеров для RPC через HTTP
description: Чтобы использовать протокол HTTP в качестве транспортного протокола для RPC, прокси-сервер RPC, запущенный в Internet Information Server (IIS), должен быть настроен в сети серверной программы.
ms.assetid: 5a67af51-924a-4f2b-b013-a4fd1bfaeddd
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 62d1b39276633f3b827f778deef77edd5630c599
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "105650286"
---
# <a name="configuring-computers-for-rpc-over-http"></a>Настройка компьютеров для RPC через HTTP

Чтобы использовать протокол HTTP в качестве транспортного протокола для RPC, прокси-сервер RPC, запущенный в Internet Information Server (IIS), должен быть настроен в сети серверной программы. В этом разделе описываются параметры конфигурации. Рекомендации по оптимальным методикам программирования и настройки при использовании RPC через HTTP см. в статье [рекомендации по развертыванию RPC по](rpc-over-http-deployment-recommendations.md)протоколу HTTP. Основная задача — Настройка прокси-сервера RPC для приема и переадресации подключений RPC через HTTP к серверной программе RPC через HTTP.

Сначала необходимо установить службы IIS на компьютере, на котором запущен прокси-сервер RPC. После установки служб IIS устанавливается прокси-сервер RPC. Службы IIS и прокси-сервер RPC можно установить одновременно с помощью компонента " **Установка и удаление компонентов Windows** " на панели управления. Прокси-сервер RPC устанавливается из **сетевых служб** и называется **прокси-сервером RPC через HTTP** в программе установки Windows. Если одновременно установлены службы IIS и RPC-прокси, Windows гарантирует их установку в правильном порядке.

> [!Note]  
> После завершения установки необходимо перезапустить службы IIS, если они были запущены в процессе установки.

 

После установки прокси-сервера RPC необходимо выполнить некоторые дополнительные задачи настройки.

1.  Откройте оснастку консоли MMC IIS и настройте виртуальный каталог RPC для прокси-сервера, как описано в [подсистеме безопасности RPC по протоколу HTTP](rpc-over-http-security.md). Этот шаг необходим только в том случае, если вы планируете использовать RPC через HTTP v2.
2.  Если на сервере IIS не установлен сертификат, для использования SSL при взаимодействии с прокси-сервером RPC необходимо получить и установить действительный сертификат. Этот шаг относится только к RPC через HTTP v2. Так как RPC через HTTP v1 не поддерживает SSL, этот шаг можно опустить для RPC через HTTP v1.
3.  Задайте ключ **ValidPorts** , как описано в статье [безопасность RPC через HTTP](rpc-over-http-security.md).

По завершении этих задач настройки прокси-сервер RPC через HTTP готов к пересылке запросов от клиента RPC через HTTP к серверу RPC через HTTP.

## <a name="rpc-over-http-registry-keys"></a>Ключи реестра RPC через HTTP

В этом разделе описываются дополнительные разделы реестра, используемые для настройки клиента, сервера или прокси-сервера RPC при подключении RPC через HTTP. Как правило, эти ключи не являются обязательными; они предоставляются здесь для полноты.

**HKLM \\ Software \\ Microsoft \\ RPC \\ дефаултчаннеллифетиме**

DWORD. Переопределяет время существования канала по умолчанию. Используется на клиенте и прокси-сервере RPC. Время жизни канала выражается в байтах. Если значение не указано, используется 1 ГБ. Используется только в RPC через HTTP v2. При изменении прокси-сервера RPC необходимо перезапустить службы IIS, чтобы изменения вступили в силу.

\-

**HKLM \\ Software \\ Microsoft \\ RPC \\ клиентрецеивевиндов**

DWORD. При наличии указывает окно приема, используемое клиентом для данных, полученных от прокси-сервера RPC. Минимальное допустимое значение — 8 КБ. Максимальное значение — 1 ГБ. Если значение не указано, используется 64 КБ. Используется только в RPC через HTTP v2.

\-

**HKLM \\ Software \\ Microsoft \\ RPC \\ инпроксирецеивевиндов**

DWORD. При наличии указывает окно приема, используемое прокси-сервером RPC для данных, полученных от клиента. Минимальное допустимое значение — 8 КБ. Максимальное значение — 1 ГБ. Если значение не указано, используется 64 КБ. Используется только в RPC через HTTP v2. При внесении изменений в это значение необходимо перезапустить службы IIS, чтобы изменения вступили в силу.

\-

**HKLM \\ Software \\ Microsoft \\ RPC \\ аутпроксирецеивевиндов**

DWORD. При наличии указывает окно приема, используемое прокси-сервером RPC для данных, полученных с сервера. Минимальное допустимое значение — 8 КБ. Максимальное значение — 1 ГБ. Если значение не указано, используется 64 КБ. Используется только в RPC через HTTP v2. При внесении изменений в это значение необходимо перезапустить службы IIS, чтобы изменения вступили в силу.

\-

**HKLM \\ Software \\ Microsoft \\ RPC \\ серверрецеивевиндов**

DWORD. При наличии указывает окно приема, используемое сервером для данных, полученных от прокси-сервера RPC. Минимальное допустимое значение — 8 КБ. Максимальное значение — 1 ГБ. Если значение не указано, используется 64 КБ. Используется только в RPC через HTTP v2. При внесении изменений в это значение необходимо перезапустить службы IIS, чтобы изменения вступили в силу.

\-

**\\Политики программного обеспечения HKLM \\ \\ Microsoft \\ Windows NT \\ RPC \\ минимумконнектионтимеаут**

DWORD. При наличии указывает минимальное время ожидания соединения, используемое клиентом и прокси-сервером RPC, в секундах. Фактически используемое время ожидания — это меньшее из этих значений и время ожидания бездействующего подключения IIS. Если значение равно нулю или ключ отсутствует, используется время ожидания бездействующего подключения IIS. Используется только в RPC через HTTP v2. При внесении изменений в это значение прокси-сервера RPC необходимо перезапустить службы IIS, чтобы изменения вступили в силу.

\-

**HKLM \\ Software \\ Microsoft \\ RPC \\ усепроксифорипаддрифрднсфаилс**

Если задано ненулевое значение, а в качестве адреса прокси-сервера RPC указан числовой IP-адрес, то клиент RPC через HTTP попытается отменить разрешение имени и, если это не удается, будет пытаться подключиться к прокси-серверу RPC через прокси-сервер HTTP. Может использоваться для эмуляции поведения Windows NT при установке, требующей такого поведения. Игнорируется для RPC через HTTP v2. Используется только при использовании RPC через HTTP v1. Поддерживается только в Windows 2000 с пакетом обновления 3 (SP3) и более поздних версий.

\-

**HKLM \\ Software \\ Microsoft \\ RPC \\ RPCProxy \\ allowAnonymous**

DWORD. Если значение отсутствует или равно нулю, прокси-сервер RPC проверяет, прошел ли подключение проверку подлинности и является ли оно безопасным (используется SSL или другая форма шифрования). Если значение равно false, соединение отклоняется. Если это значение содержит ненулевое, анонимные и незашифрованные соединения разрешены. Этот параметр является дополнением к любым параметрам виртуального каталога. Например, если анонимный доступ отключен на уровне виртуального каталога, но **allowAnonymous** не равен нулю, анонимный доступ по-прежнему будет заблокирован на уровне IIS. Используется в RPC-прокси только в RPC через HTTP v2. При внесении изменений в это значение прокси-сервера RPC необходимо перезапустить службы IIS, чтобы изменения вступили в силу.

> [!WARNING]
> Корпорация Майкрософт настоятельно рекомендует устанавливать значение **allowAnonymous** в производственных системах для обеспечения безопасности. Единственная причина, по которой этот ключ должен быть установлен, — тестирование в закрытых сетях без доступа к ним. Любая система, подключенная к Интернету и выполняющая RPC-прокси с ключом **allowAnonymous** , для которого установлено ненулевое значение, может быть уязвима для атак.

 

 

 




