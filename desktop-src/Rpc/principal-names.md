---
title: Имена участников
description: Чтобы клиент был создан с помощью серверной программы с взаимной проверкой подлинности, он должен предоставить ожидаемое имя участника сервера.
ms.assetid: 4d9977f8-0efb-4559-977e-3eba4e277bc0
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 554ffecff6eb019b4712e6b2d9f5c6319db492e7
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104486988"
---
# <a name="principal-names"></a>Имена участников

Чтобы клиент был создан с помощью серверной программы с взаимной проверкой подлинности, он должен предоставить ожидаемое имя участника сервера. Для некоторых протоколов, таких как Kerberos, требуется правильное имя участника на сервере для любого сеанса, прошедшего проверку подлинности. Участник — это сущность, которую распознает система безопасности. Сюда входят пользователи и системные службы. Все имена субъектов имеют одинаковый формат для заданного поставщика поддержки безопасности (SSP). SSP — это программный модуль, который выполняет проверку безопасности. Дополнительные сведения см. в разделе [Обзор архитектуры SSPI](sspi-architectural-overview.md). Чтобы обеспечить единообразие, поставщик безопасности обычно предоставляет системным службам аналогичные имена в качестве пользователей. В некоторых поставщиках безопасности системные службы могут не иметь имени участника.

Сервер регистрирует имя участника для поставщика безопасности с помощью функции [**рпксерверрегистераусинфо**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterauthinfo) . Для каждого поставщика безопасности можно использовать только одно имя участника на сервере. Если зарегистрировано более одного имени, одно имя выбирается случайным образом и используется. Поставщик общих служб определяет формат имени участника. Например, SSP Kerberos/Negotiate для системной службы выглядит примерно следующим образом: \_ имя компьютера $ @childdomain.parentdomain1.parentdomain2.COM .

Рекомендуемой процедурой для создания имен участников является использование документированных API (например, функции **дсмакеспн** ), а не пиеЦинг вместе с именем участника из строк. Использование документированных API повышает переносимость между различными средами развертывания и устраняет вероятность ошибок.

Указание неправильного имени участника может помешать клиенту и серверу устанавливать сеанс, прошедший проверку подлинности. Поставщик услуг SCHANNEL использует имена участников в одной из двух форм:

-   Первая форма имени участника SCHANNEL — это форма [*мсстд*](m-glos.md) . Имена в мсстд Form обычно соответствуют шаблону msstd:servername@serverdomain.com . Это называется свойством имени электронной почты. Если сертификат содержит свойство "имя электронной почты" и содержит символ "@", имя участника — мсстд: имя электронной почты. В противном случае он должен содержать свойство Common Name. Внутренние обратные косые черты являются двойными, так же как и в строковых привязках.
-   Вторая форма имени участника SCHANNEL — это форма [*фуллсик*](f-glos.md) . Это ряд совместимых с RFC1779 имен, ограниченных угловыми скобками и разделенных символами обратной косой черты. Обычно это следует шаблону фуллсик: \\ < \\ Authority \\ \\ ... \\ . Person> или фуллсик: \\ < \\ \\ подавтор полномочий \\ ... \\ .> Серверпрограм.

Если имя не соответствует сертификату, возвращается сообщение об ошибке \_ отказа в доступе \_ . Если формат имени является недопустимым, поставщик услуг SCHANNEL (SSP) возвращает код ошибки \_ недопустимого \_ параметра.

Чтобы запросить имя участника сервера, приложения могут вызывать [**рпкмгмтинксерверпринкнаме**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtinqserverprincname). Он выделяет строку, завершающуюся нулем, для хранения имени участника. Перед завершением работы приложение должно вызвать [**рпкстрингфри**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcstringfree) , чтобы освободить память, занимаемую этой строкой.

Запрос имени сервера таким образом не является безопасным, и его следует избегать. Для проверки подлинности сервера клиентская программа должна быть в курсе, к какому серверу подключается, и следует создать имя участника-сервера с нуля.

 

 




