---
title: Несколько уровней указателей
description: Использование нескольких уровней указателей в удаленном вызове процедур (RPC).
ms.assetid: d45b9b20-3b21-4d46-9097-8aacb4e4e921
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a61a917ee29c982505c601d7b0dd0721e94e4678
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127169088"
---
# <a name="multiple-levels-of-pointers"></a>Несколько уровней указателей

При наличии нескольких уровней указателей атрибуты связываются с указателем, ближайшим к имени переменной. Клиент по-прежнему отвечает за выделение памяти, связанной с ответом.

В следующем примере заглушка позволяет вызвать сервер, не зная заранее, сколько данных будет возвращено:

``` syntax
[
    uuid( ...),
    version(3.3),
]
interface AnInterface
{
    HRESULT GetBars([out] long * pSize,
             [out, size_is( , *pSize)]
             BAR ** ppBar);//BAR type defined elsewhere
}
```

В этом примере заглушка передает серверу уникальный указатель, который инициализируется сервером в **значение NULL**. Затем сервер выделяет блок полос, устанавливает указатель, устанавливает аргумент size и возвращает значение. Обратите внимание, что для того, чтобы сервер мог оказывать воздействие на вызывающий объект, необходимо передать \[ \] указатель ссылки на \[ [**уникальный**](/windows/desktop/Midl/unique) \] указатель на данные. Также обратите внимание, что запятая в \[ [**size \_ имеет значение**](/windows/desktop/Midl/size-is)(, \* псизе) \] , которое указывает, что указатель верхнего уровня не является указателем размера, но указатель нижнего уровня имеет значение.

На стороне клиента заглушка задает \* для Ппбар **значение NULL** перед вызовом удаленной процедуры. Затем заглушка выделяет и расмаршалирует массив UTF8 объектов BAR. Аргумент Size указывает размер блока (и число неупакованных полос). Клиент должен освободить возвращенный массив погрешностей, если он больше не требуется.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**размер \_ равен**](/windows/desktop/Midl/size-is)
</dt> </dl>

 

 