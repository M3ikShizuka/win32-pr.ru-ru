---
title: Рекомендации по балансировке нагрузки
description: Рекомендации по балансировке нагрузки
ms.assetid: 260cf8dd-13b8-4b46-93a6-5333e794c0d3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1c68b85f60b75cb5a0fc75bd5ad8bd438608a9b2
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103987731"
---
# <a name="load-balancing-best-practices"></a>Рекомендации по балансировке нагрузки

При настройке и настройке балансировки нагрузки RPC следует следовать нескольким рекомендациям.

Во – первых, безопасность должна быть установлена для входящих и исходящих вызовов ФУНТа. Это означает, что оба необязательных раздела реестра с параметром [безопасности](configuring-load-balancing.md) не должны присутствовать или быть равны нулю.

Во вторых, обратите внимание на решение о балансировке нагрузки переднего плана, используемое в сочетании с решением для балансировки нагрузки RPC. Например, если подсистема балансировки нагрузки переднего плана использует простую балансировку нагрузки с циклическим перебором, на ферме серверов должно существовать нечетное число серверов. Это позволяет снизить вероятность того, что все подключения пересылаются и, таким же, обслуживаются одним сервером или серверами.

Для обеспечения безопасности обычно желательно, чтобы брандмауэр управляет доступом к прокси-серверам RPC. Если используется решение брандмауэра на основе порта, конечные точки RPC должны быть статическими, чтобы ограничить число портов, открываемых в брандмауэре. В Windows Server 2008 и более поздних версиях Windows RPC предоставляет механизм назначения статического порта динамическим конечным точкам. Это достигается с помощью команд брандмауэра Netsh RPC. Пример набора команд для установки для интерфейса ФУНТа статического порта 3010:

``` syntax
netsh rpc filter add rule layer=ep_add actiontype=permit

netsh rpc filter add condition field=process_with_if_uuid matchtype=equal data=
3357951c-a1d1-47db-a278-ab945d063d03

netsh rpc filter add condition field=protocol matchtype=equal data=ncacn_ip_tcp

netsh rpc filter add condition field=ep_value matchtype=equal data=w3010

netsh rpc filter add filter
```

Команду RPC Netsh можно использовать для установки статической конечной точки для любого динамического или статического интерфейса. Это полезно при ограничении доступа к компьютеру, на котором работает решение брандмауэра на основе портов. Если используется решение брандмауэра Windows, интерфейс RPC можно заблокировать или включить, не назначив его конкретному порту. Дополнительные сведения см. в [справочнике по командам брандмауэра Netsh RPC](/previous-versions/windows/it-pro/windows-server-2003/cc784909(v=ws.10)).

 

 