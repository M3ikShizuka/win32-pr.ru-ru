---
title: Обзор архитектуры служб очереди сообщений
description: Службы очередей сообщений (MSMQ) используют модель сайта или предприятия. Как правило, сайт — это физическое расположение, например сборка. Предприятие состоит из одного или нескольких сайтов и представляет собой организацию.
ms.assetid: f5c54c58-8ec5-49b7-a184-aed9a8100960
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f2226c185d32cb628529b34ba33d5569bd51ac28
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104331368"
---
# <a name="overview-of-message-queuing-services-architecture"></a>Обзор архитектуры служб очереди сообщений

Службы очередей сообщений (MSMQ) используют модель сайта или предприятия. Как правило, сайт — это физическое расположение, например сборка. Предприятие состоит из одного или нескольких сайтов и представляет собой организацию.

На следующей схеме показана архитектура службы MSMQ.

![Архитектура MSMQ](images/msmq.png)

В основе MSMQ лежит база данных службы очередей сообщений (MQIS), которая работает поверх SQL Server. На предприятии имеется единая Главная MQIS, называемая основным контроллером предприятия. Каждый сайт имеет собственную MQIS, называемую *первичным контроллером сайта* и нулевым или более *резервным контроллером сайта*. Наконец, существуют отдельные клиентские компьютеры, каждый из которых имеет собственный диспетчер очередей, реализованный как услуга. Основной контроллер предприятия также может быть основным контроллером сайта, а любой контроллер также может быть клиентом.

Очереди сообщений могут быть либо открытыми, либо закрытыми. Общие очереди регистрируются в Active Directory и доступны по сети. Сообщения в общей очереди направляются по всему предприятию под управлением MSMQ. Сообщения клиентских приложений перемещаются из диспетчера очередей клиента в очередь назначения путем перемещения между диспетчерами очереди контроллеров сайта.

Частные очереди обслуживаются диспетчером локальных очередей и не регистрируются в Active Directory. Область сообщений частной очереди ограничена компьютером, на котором они находятся.

 

 




