---
title: Настройка SAP и RPC
description: Сетевые серверы Novell NetWare используют протокол SAP для вещания сведений о доступных службах в сети на другие сетевые устройства.
ms.assetid: 6d6ef481-fc09-4795-8954-33329912ff4f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 385d60168a52cbe5d31368959ec4f21d52f9ad80
ms.sourcegitcommit: 1e8e6e6f27c909900cfa8be58b042456331a82ad
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/15/2019
ms.locfileid: "104411478"
---
# <a name="configuring-sap-and-rpc"></a>Настройка SAP и RPC

Сетевые серверы Novell NetWare используют протокол SAP для вещания сведений о доступных службах в сети на другие сетевые устройства. Сервер может отправить широковещательное сообщение SAP каждые 60 секунд, чтобы сообщить другим сетевым устройствам о предоставляемых службах. Рабочие станции используют SAPs для поиска необходимых служб в сети.

Windows включает службу агента SAP, которая позволяет серверам под управлением Windows взаимодействовать с серверами NetWare. Служба агента SAP будет прослушивать запросы SAP клиентов сети на наличие служб на основе IPX, установленных и работающих на сервере.

Программное обеспечение, разработанное для объявления в качестве службы по сети с помощью широковещательной рассылки SAP, будет выдавать объявления SAP каждые 60 секунд без установки агента SAP. Однако для того, чтобы сетевые клиенты могли быстро найти сетевую службу IPX, сервер, обслуживающий базу данных службы, должен быть доступен в сети для реагирования на запрос обнаружения службы. Эта база данных службы обычно обслуживается Novell NetWare или совместимым с NetWare сервером. Службы файлов и печати (Майкрософт) для NetWare также будут поддерживать базу данных сетевой службы IPX.

На компьютере под управлением Windows Server, если установлена служба шлюза для NetWare (GSNW), тип SAP 640 будет транслировать каждые 60 секунд со стороны службы удаленного вызова процедур (RPC). Вещание SAP будет продолжено даже в том случае, если пользователь отключит службу ШЛЮЗа и агент SAP.

Служба RPC выполнит широковещательную рассылку SAP, если установлены клиентские службы для NetWare (CSNW) и служба агента SAP. Вещание SAP будет продолжено, даже если пользователь отключается от агента SAP.

По умолчанию служба RPC будет проверять наличие служб шлюза для NetWare и службы агента SAP на компьютере под управлением Windows Server. Установка служб файлов и печати для NetWare устанавливает агент SAP.

На компьютере, на котором установлена клиентская версия Windows с CSNW, служба RPC проверяет наличие службы агента SAP. Если службы существуют, RPC запустит собственный поток, который будет выполнять широковещательный пакет SAP 640 каждую минуту.

> [!NOTE]
> Если вы не хотите, чтобы широковещательные передачи SAP направляются в сеть каждые 60 секунд, можно отключить широковещательные рассылки SAP с помощью редактора реестра. Предупреждение о неправильном использовании редактора реестра может привести к серьезным проблемам, которые могут потребовать переустановки операционной системы. Корпорация Майкрософт не гарантирует возможность устранения проблем, возникших в результате неправильного использования редактора реестра. Используйте редактор реестра на свой страх и риск. Перед редактированием реестра необходимо создать его резервную копию.

 

**Настройка для SAP**

1.  Запустите редактор реестра (Regedt32.exe) и перейдите к следующему разделу реестра:

    **HKEY \_ \_ \\ программное обеспечение локального компьютера \\ Microsoft \\ RPC**

2.  В меню **Правка** выберите команду **Добавить значение** и используйте следующую запись:
    1.  Имя значения: Адвертисерпксервице
    2.  Тип данных: REG \_ SZ
    3.  Строка: нет
3.  Использование команды No для строки отключает широковещательную трансляцию RPC SAP. При использовании команды Да для строки включается RPC SAP широковещания on.
4.  Перезагрузите компьютер, чтобы изменения в реестре вступили в силу.
    > [!NOTE]
    > Если широковещательные пакеты SAP продолжают работу после выполнения этих действий, может потребоваться выполнить действия по устранению неполадок. Удалите строку **нкакн \_ SPX** в следующем разделе реестра:
    >
    > **HKEY \_ локальный \_ компьютер \\ программное обеспечение \\ Microsoft \\ RPC \\ серверпротоколс\\**

     

> [!NOTE]  
> Это следует использовать только в качестве действия по устранению неполадок. Удаление этого строкового значения полностью отключает широковещательные передачи SAP, которые могут потребоваться для правильной работы некоторых программ.