---
title: Три типа указателей
description: MIDL поддерживает три типа указателей для размещения широкого спектра приложений.
ms.assetid: 6684c252-6fbe-49ca-9967-6d4baf5dc298
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: efdcc9548568c8fca24d8abb40bf0eaa8b6e7da3
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103987553"
---
# <a name="three-pointer-types"></a>Три типа указателей

MIDL поддерживает три типа указателей для размещения широкого спектра приложений. Три разных уровня называются ссылками, уникальными и полными указателями, и они обозначаются атрибутами **\[** [**ref**](/windows/desktop/Midl/ref) **\]** , **\[** [**UNIQUE**](/windows/desktop/Midl/unique) **\]** и **\[** [**ptr**](/windows/desktop/Midl/ptr) **\]** соответственно. Классы указателей, описываемые этими атрибутами, являются взаимоисключающими. Атрибуты указателя можно применять к указателям в определениях типов, возвращаемых функцией типов, параметрах функций, членам структур или объединений, а также элементам массива.

Внедренные указатели — это указатели, которые являются элементами структур или объединений. Они также могут быть элементами массивов. В **\[** [](/windows/desktop/Midl/in) **\]** направлении внедренные указатели **\[ ref \]** предполагают указание на допустимое хранилище и не должны иметь значение null. Эта ситуация рекурсивно применяется к любым **\[ ссылочным \]** указателям, на которые они указывают. В направлении внедренные **\[ уникальные \]** и полные указатели (указатели с атрибутом **\[ ptr \]** ) могут иметь или не иметь значение null. **\[ \]**

Любой атрибут указателя, помещаемый в параметр в синтаксисе объявления функции, влияет только на декларатор самого правого указателя для этого параметра. Чтобы задействовать другие деклараторы указателя, необходимо использовать промежуточные именованные типы.

Функции, возвращающие указатель, могут иметь атрибут указателя в качестве атрибута функции. Атрибуты **\[ Unique \]** и **\[ ptr \]** должны применяться к типам возвращаемых функцией функций. Объявления членов, являющиеся указателями, могут указывать атрибут указателя в качестве атрибута поля. Атрибут указателя можно также применить как атрибут типа в конструкциях [**typedef**](/windows/desktop/Midl/typedef) .

Если атрибут указателя не указан в качестве поля или атрибута типа, атрибуты указателя применяются в соответствии с правилами для объявления неатрибутивного указателя, как показано ниже.

В режиме совместимости DCE атрибуты указателя определяются в определяющем IDL-файле. Если **\[** в определяющем интерфейсе указан атрибут [**указателя \_ по умолчанию**](/windows/desktop/Midl/pointer-default) **\]** , то используется этот атрибут. Если атрибут **\[ указателя \_ по \] умолчанию** отсутствует, все указатели без атрибутов являются полными указателями.

В режиме расширений Майкрософт атрибуты указателя могут быть определены путем импорта IDL-файлов и применяются в следующем порядке:

1.  Явный атрибут указателя, примененный на сайте использования.
2.  Атрибут **\[ ref \]** , если указатель без атрибута является параметром указателя верхнего уровня.
3.  Атрибут **\[ указателя \_ по \] умолчанию** , указанный в определяющем интерфейсе.
4.  Атрибут **\[ указателя \_ по \] умолчанию** , указанный в базовом интерфейсе.
5.  **\[ Уникальный \]** атрибут.

Атрибут **\[** [**интерфейса \_ по умолчанию указателя**](/windows/desktop/Midl/pointer-default) **\]** задает атрибуты указателя по умолчанию, применяемые к декларатору указателя в типе, параметре или объявлении возвращаемого типа, если к этому объявлению не применен явный атрибут указателя. Атрибут интерфейса **\[ \_ по \] умолчанию указателя** не применяется к неатрибутному указателю верхнего уровня параметра, который считается **\[ ссылочным \]**.

 

 