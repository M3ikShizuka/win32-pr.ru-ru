---
title: Расширения Microsoft RPC Binding-Handle
description: Расширения Майкрософт для языка IDL поддерживают несколько параметров обработки, которые отображаются в позициях, отличных от первого, крайнего левого, параметра.
ms.assetid: 084b0d8e-0c8a-43b9-b3ae-4f69cab3a2c2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8c93b68b20628bf6f7f65cee026412846e0b497d
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127244441"
---
# <a name="microsoft-rpc-binding-handle-extensions"></a>Расширения Microsoft RPC Binding-Handle

Расширения Майкрософт для языка IDL поддерживают несколько параметров обработки, которые отображаются в позициях, отличных от первого, крайнего левого, параметра. Следующие шаги описывают последовательность, с которой компилятор MIDL проходит, чтобы разрешить параметр Binding-Handle в режиме совместимости DCE (/**Использование**) и в режиме по умолчанию (Расширенный Майкрософт).

## <a name="dce-compatibility-mode"></a>Режим совместимости DCE

-   Маркер привязки, который отображается в первой позицией.
-   Крайний левый \[ [**в**](/windows/desktop/Midl/in)параметре [**\_ обработчика контекста**](/windows/desktop/Midl/context-handle) \] .
-   Неявный маркер привязки, заданный \[ [**неявным \_ обработчиком**](/windows/desktop/Midl/implicit-handle) \] или \[ [**автоматическим \_ обработчиком**](/windows/desktop/Midl/auto-handle) \] .
-   Если ACF отсутствует, по умолчанию используется \[ **Автоматический \_ обработчик** \] .

## <a name="default-mode"></a>Режим по умолчанию

-   Крайний слева явный маркер привязки.
-   Неявный маркер привязки, заданный \[ [**неявным \_ обработчиком**](/windows/desktop/Midl/implicit-handle) \] или \[ [**автоматическим \_ обработчиком**](/windows/desktop/Midl/auto-handle) \] .
-   Если ACF отсутствует, по умолчанию используется \[ [**Автоматический \_ обработчик**](/windows/desktop/Midl/auto-handle) \] .

Компиляторы DCE IDL ищут явный маркер привязки в качестве первого параметра. Если первый параметр не является дескриптором привязки и указаны один или несколько дескрипторов контекста, то в качестве дескриптора привязки используется крайний левый дескриптор контекста. Если первый параметр не является дескриптором и дескрипторы контекста отсутствуют, процедура использует неявную привязку с помощью \[ [**неявного \_ дескриптора**](/windows/desktop/Midl/implicit-handle) \] или \[ [**автоматической \_ обработки**](/windows/desktop/Midl/auto-handle)атрибута ACF \] .

Расширения Майкрософт для IDL позволяют использовать маркер привязки в месте, отличном от первого параметра. Крайний левый \[ [**в**](/windows/desktop/Midl/in) \] параметре явного обработчика — является ли он примитивом, определяемым программистом или маркером контекста — является маркером привязки. При отсутствии параметров обработки процедура использует неявную привязку с помощью \[ [**неявного \_ обработчика**](/windows/desktop/Midl/implicit-handle) атрибута ACF \] или \[ [**автоматической \_ обработки**](/windows/desktop/Midl/auto-handle) \] .

Следующие правила применяются как к режиму DCE-совместимости (/ОСФ), так и к режиму по умолчанию:

-   Привязка с автоматической обработкой используется, когда отсутствует ACF.
-   Явные \[ [](/windows/desktop/Midl/in) \] дескрипторы in или \[ **in** [**out**](/windows/desktop/Midl/out-idl) \] для отдельной функции загружают любую неявную привязку, заданную для интерфейса.
-   \[Не поддерживаются несколько [**входных**](/windows/desktop/Midl/in) \] и входных \[  \] дескрипторов-примитивов.
-   \[ [](/windows/desktop/Midl/in) \] \[  \] Разрешено использовать несколько дескрипторов явного контекста в или в.
-   Все определяемые программистом параметры обработки, за исключением параметра Binding-Handle, рассматриваются как трансмиссибле данные.

Следующая таблица содержит примеры и описывает назначение дескрипторов привязки в каждом режиме компилятора.




| Пример | Описание | 
|---------|-------------|
| <pre class="syntax" data-space="preserve"><code>void proc1( void );</code></pre> | Явный маркер не задан. Используется неявный маркер привязки, заданный параметром [ <a href="/windows/desktop/Midl/implicit-handle">implicit_handle</a>] или [ <a href="/windows/desktop/Midl/auto-handle">auto_handle</a>]. Если ACF отсутствует, используется автоматический обработчик. | 
| <pre class="syntax" data-space="preserve"><code>void proc2([in] handle_t H,           [in] short s );</code></pre> | Указан явный обработчик типа handle_t. Параметр <em>H</em> является маркером привязки для процедуры. | 
| <pre class="syntax" data-space="preserve"><code>void proc3([in] short s,           [in] handle_t H );</code></pre> | Первый параметр не является обработчиком. В режиме по умолчанию левый параметр Handle ( <em>H</em>) является маркером привязки. В режиме/ОСФ используется неявная привязка. Сообщается об ошибке, так как второй параметр должен быть трансмиссибле, а handle_t передаваться. | 
| <pre class="syntax" data-space="preserve"><code>typedef [handle] short * MY_HDL;void proc1([in] short s,           [in] MY_HDL H );</code></pre> | Первый параметр не является обработчиком. В режиме по умолчанию левый параметр Handle ( <em>H</em>) является маркером привязки. Заглушки вызывают предоставляемые пользователем подпрограммы MY_HDL_bind и MY_HDL_unbind. В режиме "в/использование" используется неявная привязка. Параметр обработки <em>H</em> , определяемый программистом, обрабатывается как трансмиссибле данные. | 
| <pre class="syntax" data-space="preserve"><code>Typedef [handle] short * MY_HDL;void proc1([in] MY_HDL H,            [in] MY_HDL p );</code></pre> | Первый параметр — это маркер привязки. Параметр <em>H</em> является параметром обработчика привязки. Второй определяемый программистом параметр Handle обрабатывается как данные трансмиссибле. | 
| <pre class="syntax" data-space="preserve"><code>Typedef [context_handle] void * CTXT_HDL;void proc1([in] short s,           [in] long l,           [in] CTXT_HDL H ,           [in] char c);</code></pre> | Маркер привязки — это контекстный обработчик. Параметр <em>H</em> является маркером привязки. | 




 

 

 
