---
title: Объединение атрибутов массива
description: Атрибуты полей можно указывать в различных сочетаниях, если заглушка может использовать эти сведения для определения размера массива и числа байтов для передачи на сервер.
ms.assetid: ff4f971f-9e46-4454-9d57-d8ebdf70b261
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fd440251a658dd5b888df7275f578369419d4b8b2d4f920b263bc5095c4bd948
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118931757"
---
# <a name="combining-array-attributes"></a>Объединение атрибутов массива

Атрибуты полей можно указывать в различных сочетаниях, если заглушка может использовать эти сведения для определения размера массива и числа байтов для передачи на сервер. Связи между атрибутами определяются с помощью следующих формул:

``` syntax
size_is = max_is + 1;
length_is = last_is - first_is + 1;
```

Значения, связанные с атрибутами, должны соблюдать несколько общих правил, основанных на этих формулах. В эти правила входит следующее:

-   Не указывайте первый параметр \[ [**\_ —**](/windows/desktop/Midl/first-is) \] значение индекса меньше нуля, а \[ [**Последнее \_ —**](/windows/desktop/Midl/last-is) \] значение больше \[ [**максимального \_**](/windows/desktop/Midl/max-is) \] .
-   Не указывайте отрицательный размер для массива. Определите первый и последний элементы таким образом, чтобы они выводили нулевое или большее значение длины. Определите \[ [**Максимальное \_**](/windows/desktop/Midl/max-is) \] значение, чтобы размер был нулевым или большим. Если MIDL вызывался с параметром CHECK [**/Error**](/windows/desktop/Midl/-error) boundss \_ , то заглушка вызывает исключение, если размер меньше нуля, или передаваемая длина меньше нуля.
-   Не используйте \[ атрибуты [**length \_**](/windows/desktop/Midl/length-is) \] и \[ [**Last \_ —**](/windows/desktop/Midl/last-is) \] одновременно, а \[ атрибуты **size \_** \] и \[ **Last \_ —** \] одновременно.

Из-за замкнутой связи в C между массивами и указателями MIDL также позволяет объявлять массивы в списках параметров с помощью нотации указателя. MIDL обрабатывает параметр, который является указателем на тип, в виде массива этого типа, если параметр имеет какие-либо атрибуты, обычно связанные с массивами.

``` syntax
/* IDL file */
[ 
  uuid(ba209999-0c6c-11d2-97cf-00c04f8eea45)
  version(6.0) 
]
interface arraytest
{
  void fArray6([in] short sSize, 
               [in, out, size_is(sSize)] char * p1);
  void fArray7([in] short sSize, 
               [in, out, size_is(sSize)] char achArray[]);
}
```

В предыдущем примере параметры массива и указателя в функциях fArray6 и fArray7 эквивалентны.

 

 