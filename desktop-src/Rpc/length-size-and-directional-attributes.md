---
title: Атрибуты длины, размера и направления
description: При передаче массивов между клиентом и сервером атрибуты с указанием размера \ Max \_ — \, а размер \_ — определяет количество элементов массива, выделенных заглушкой сервера.
ms.assetid: 2c95cf47-6fc0-4ccd-bb4f-acf356596e56
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0e91424a93a53fe710c945011d19f8f97dc0f65e4899bc3305be5725d5a08e7e
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120020135"
---
# <a name="length-size-and-directional-attributes"></a>Атрибуты длины, размера и направления

При передаче массивов между клиентом и сервером максимальный размер атрибутов, связанных с размером, определяется \[ [**\_**](/windows/desktop/Midl/max-is) \] \[ [**\_**](/windows/desktop/Midl/size-is) \] как число элементов массива, выделенных заглушкой сервера. Длина атрибутов, связанных с длиной, равна \[ [**\_**](/windows/desktop/Midl/length-is) \] , \[ [**First \_ —**](/windows/desktop/Midl/first-is) \] и \[ [**Last \_ —**](/windows/desktop/Midl/last-is) \] определяет количество элементов, передаваемых как серверу, так и клиенту.

К параметрам могут применяться различные направления. Однако некоторые сочетания атрибутов направления могут вызвать ошибки. Например, предположим, что вы пишете интерфейс, который указывает процедуру с двумя параметрами, массивом и переданной длиной массива. Термин *dir \_ attr* относится к атрибуту Direction, примененному к параметру, как:

``` syntax
Proc1(
    [dir_attr] short *plength;
    [dir_attr, length_is(pLength)] short array[MAX_SIZE]);
```

Поведение компилятора MIDL для каждого сочетания атрибутов направления описывается в следующей таблице.



| Array                                          | Параметр длины                               | Действия-заглушки при вызове от клиента к серверу                                                                                                                                                                                                                          | Действия-заглушки при возврате с сервера на клиент                                                                                                                                                                         |
|------------------------------------------------|------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \[[**окне**](/windows/desktop/Midl/in)\]                          | \[[**окне**](/windows/desktop/Midl/in)\]                          | Передача длины и количества элементов, указанных параметром.                                                                                                                                                                                              | Данные не передаются.                                                                                                                                                                                                 |
| \[[**окне**](/windows/desktop/Midl/in)\]                          | \[[**заполняет**](/windows/desktop/Midl/out-idl)\]                    | Неюридическая информация; Ошибка компилятора MIDL.                                                                                                                                                                                                                                         | Неюридическая информация; Ошибка компилятора MIDL.                                                                                                                                                                                      |
| \[[**окне**](/windows/desktop/Midl/in)\]                          | \[[**в**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\] | Передает длину и количество элементов, указанных параметром length.                                                                                                                                                                                       | Передавать только длину.                                                                                                                                                                                            |
| \[[**заполняет**](/windows/desktop/Midl/out-idl)\]                    | \[[**окне**](/windows/desktop/Midl/in)\]                          | Передача длины.<br/> Если размер массива фиксирован, выделите размер массива на сервере, но не передавайте элементы.<br/> Если размер массива не привязан, недопустимый: MIDL — Ошибка компилятора.<br/>                                                              | Передает количество элементов, обозначенных длиной.<br/> Обратите внимание, что длина может быть изменена и может отличаться от значения на клиенте. Не передавать длину.<br/>          |
| \[[**заполняет**](/windows/desktop/Midl/out-idl)\]                    | \[[**заполняет**](/windows/desktop/Midl/out-idl)\]                    | Выделить место для параметра длины на сервере, но не передавать параметр. Если размер массива является фиксированным, выделите размер массива на сервере, но не передавайте элементы.<br/> Если размер массива не фиксирован, недопустимый: MIDL-Ошибка компилятора.<br/> | Передача длины и количества элементов, обозначенных длиной, заданной в серверном приложении.                                                                                                             |
| \[[**заполняет**](/windows/desktop/Midl/out-idl)\]                    | \[[**в**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\] | Передача параметра длины. Если размер массива привязан, следует выделить размер массива на сервере, но не передавать элементы.<br/> Если размер массива не привязан, недопустимый: MIDL — Ошибка компилятора.<br/>                                                           | Передача длины. Передает количество элементов массива, обозначенное длиной.<br/>                                                                                                                       |
| \[[**в**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\] | \[[**окне**](/windows/desktop/Midl/in)\]                          | Передача длины и количества элементов, указанных параметром.                                                                                                                                                                                              | Не передавать длину. Передает количество элементов, обозначенных длиной.<br/> Обратите внимание, что длину можно изменить, и она может иметь другое значение из исходного значения на клиенте.<br/> |
| \[[**в**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\] | \[[**заполняет**](/windows/desktop/Midl/out-idl)\]                    | Неюридическая информация; Ошибка компилятора MIDL.                                                                                                                                                                                                                                         | Неюридическая информация; Ошибка компилятора MIDL.                                                                                                                                                                                      |
| \[[**в**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\] | \[[**в**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\] | Передача длины и количества элементов, указанных параметром.                                                                                                                                                                                              | Передача длины и количества элементов, указанных параметром.                                                                                                                                           |



 

В общем случае не следует изменять параметры длины и размера на стороне сервера. Если изменить параметр length, память можно будет потерянной. Дополнительные сведения см. в разделе [потеря памяти](memory-orphaning.md).

 

