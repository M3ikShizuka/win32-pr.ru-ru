---
title: Примеры несовместимых изменений
description: 'При работе с несовместимыми изменениями несвязанное правило Thumb выглядит следующим образом: любое изменение может быть обратно несовместимым, если оно не слишком хорошо понятно.'
ms.assetid: 5b893d79-b81d-4ede-8d49-71d85219c497
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9498e5c71c7ce9690da0969f234fbb9d094eca50
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104068129"
---
# <a name="examples-of-incompatible-changes"></a>Примеры несовместимых изменений

При работе с несовместимыми изменениями несвязанное правило Thumb имеет следующий вид: любое изменение может быть обратно несовместимым, если оно не слишком хорошо понятно. Это правило требует знания правил NDR. Если вы не уверены, что такое NDR, не вносите изменения. Примеры изменений, которые обычно приводят к нарушению прав доступа в приложении, или \_ \_ исключением данных заглушки, \_ вызванных модулем упаковки, являются следующие.

-   Добавление нового метода в середину старых методов.
-   Добавление или удаление параметров из метода.
-   Изменение атрибута, например, атрибута указателя: изменение \[ ссылки \] на \[ Unique \] или \[ ptr \] или наоборот. Каждый тип указателя имеет другое представление провода.
-   Изменение размера данных: с короткого на длинный, от char до WCHAR \_ t (Юникод) Добавление поля в структуру с изменением размера массива фиксированного размера.
-   Добавление подлокотников Union к объединению с предложением Default.

Некоторые коварные изменения или непредвиденные несоответствия между клиентом и сервером могут происходить следующим образом:

-   Изменение элемента составного типа, например структуры или массива. Например, если \_ идентификатор клиента меняется с целочисленного на GUID, \_ Структура записи клиента с \_ полем идентификатор клиента станет несовместимой. Это может быть трудно обнаружить в каскадном соединении по нескольким уровням внедрения к фактическому типу удаленного параметра.
-   Изменение импортированного типа. Тип может быть получен из другого компонента, который не является удаленным напрямую, поэтому изменение было считалось совместимым.
-   Использование \# ifdef в IDL-файле является неправильной идеей определений типа ifdef в IDL-файле — это аварийное завершение. Неизбежно, из-за сборки или других сбоев, клиент компилируется с другим набором определений, чем сервер, и в итоге они несовместимы.

 

 




