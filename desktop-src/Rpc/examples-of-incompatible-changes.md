---
title: Примеры несовместимых изменений
description: 'При работе с несовместимыми изменениями несвязанное правило Thumb выглядит следующим образом: любое изменение может быть обратно несовместимым, если оно не слишком хорошо понятно.'
ms.assetid: 5b893d79-b81d-4ede-8d49-71d85219c497
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f0a8736093e8189570026489bc1753145b941b7429b704e2c9c68783ddefef0c
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118930043"
---
# <a name="examples-of-incompatible-changes"></a>Примеры несовместимых изменений

При работе с несовместимыми изменениями несвязанное правило Thumb имеет следующий вид: любое изменение может быть обратно несовместимым, если оно не слишком хорошо понятно. Это правило требует знания правил NDR. Если вы не уверены, что такое NDR, не вносите изменения. Примеры изменений, которые обычно приводят к нарушению прав доступа в приложении, или \_ \_ исключением данных заглушки, \_ вызванных модулем упаковки, являются следующие.

-   Добавление нового метода в середину старых методов.
-   Добавление или удаление параметров из метода.
-   Изменение атрибута, например, атрибута указателя: изменение \[ ссылки \] на \[ Unique \] или \[ ptr \] или наоборот. Каждый тип указателя имеет другое представление провода.
-   Изменение размера данных: с короткого на длинный, от char до WCHAR \_ t (Юникод) Добавление поля в структуру с изменением размера массива фиксированного размера.
-   Добавление подлокотников Union к объединению с предложением Default.

Некоторые коварные изменения или непредвиденные несоответствия между клиентом и сервером могут происходить следующим образом:

-   Изменение элемента составного типа, например структуры или массива. Например, если \_ идентификатор клиента меняется с целочисленного на GUID, \_ Структура записи клиента с \_ полем идентификатор клиента станет несовместимой. Это может быть трудно обнаружить в каскадном соединении по нескольким уровням внедрения к фактическому типу удаленного параметра.
-   Изменение импортированного типа. Тип может быть получен из другого компонента, который не является удаленным напрямую, поэтому изменение было считалось совместимым.
-   Использование \# ifdef в IDL-файле является неправильной идеей определений типа ifdef в IDL-файле — это аварийное завершение. Неизбежно, из-за сборки или других сбоев, клиент компилируется с другим набором определений, чем сервер, и в итоге они несовместимы.

 

 




