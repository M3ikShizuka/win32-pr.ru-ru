---
title: Выгрузка сервера с необработанными дескрипторами контекста
description: Обычно выгрузка библиотеки DLL, которая обслуживает вызовы RPC с помощью дескрипторов контекста, без предварительной остановки хост-процесса была проблематичной.
ms.assetid: d3880578-e542-418c-803a-fd00d0bfde7f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c1192b013a06def4bb1ee49e08e43b7165c9edfd
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104258936"
---
# <a name="unloading-a-server-with-outstanding-context-handles"></a>Выгрузка сервера с необработанными дескрипторами контекста

Обычно выгрузка библиотеки DLL, которая обслуживает вызовы RPC с помощью дескрипторов контекста, без предварительной остановки хост-процесса была проблематичной. Это вызвано тем, что подсистема запуска больше не действительна при выгрузке библиотеки DLL. Если клиент с ранее открытым контекстом завершается с ошибкой, а во время выполнения RPC попытается закрыть маркер контекста, то попытка вызова процедуры, вызывающей запуск, нарушается, и сервер завершается сбоем.

Начиная с Windows XP был добавлен новый API с именем [**рпксерверунрегистерифекс**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterifex) . **Рпксерверунрегистерифекс** закрывает дескрипторы контекста, открытые незарегистрированным интерфейсом. Функция [**рпксерверунрегистериф**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterif) не имеет значение. Использование **рпксерверунрегистерифекс** не является обязательным, когда весь процесс завершается, но это необходимо, если одна или несколько библиотек DLL, в которых размещаются подпрограммы выполнения, выгружаются, когда существуют необработанные дескрипторы контекста.

 

 




