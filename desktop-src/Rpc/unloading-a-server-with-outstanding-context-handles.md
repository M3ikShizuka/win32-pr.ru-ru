---
title: Выгрузка сервера с необработанными дескрипторами контекста
description: Обычно выгрузка библиотеки DLL, которая обслуживает вызовы RPC с помощью дескрипторов контекста, без предварительной остановки хост-процесса была проблематичной.
ms.assetid: d3880578-e542-418c-803a-fd00d0bfde7f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e581ff142c7453f4a9e9f1e40a5ab9991257a350a84b2fcb2ea08a0e157288cd
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119010952"
---
# <a name="unloading-a-server-with-outstanding-context-handles"></a>Выгрузка сервера с необработанными дескрипторами контекста

Обычно выгрузка библиотеки DLL, которая обслуживает вызовы RPC с помощью дескрипторов контекста, без предварительной остановки хост-процесса была проблематичной. Это вызвано тем, что подсистема запуска больше не действительна при выгрузке библиотеки DLL. Если клиент с ранее открытым контекстом завершается с ошибкой, а во время выполнения RPC попытается закрыть маркер контекста, то попытка вызова процедуры, вызывающей запуск, нарушается, и сервер завершается сбоем.

начиная с Windows XP был добавлен новый API с именем [**рпксерверунрегистерифекс**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterifex) . **Рпксерверунрегистерифекс** закрывает дескрипторы контекста, открытые незарегистрированным интерфейсом. Функция [**рпксерверунрегистериф**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterif) не имеет значение. Использование **рпксерверунрегистерифекс** не является обязательным, когда весь процесс завершается, но это необходимо, если одна или несколько библиотек DLL, в которых размещаются подпрограммы выполнения, выгружаются, когда существуют необработанные дескрипторы контекста.

 

 




