---
title: Потеря памяти
description: Если в распределенном приложении используется параметр "\ in", "out", "Unique" или "\ in", "out", "PTR \ указатель", серверная часть приложения может изменить значение параметра указателя на null.
ms.assetid: 65588b4d-6bf4-44f7-994c-29a5b185c6b9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 32042911695f377e0a628168e91387bfa25f0d79
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "105672389"
---
# <a name="memory-orphaning"></a>Потеря памяти

Если распределенное приложение использует параметр " \[ [in](/windows/desktop/Midl/in)" [,](/windows/desktop/Midl/out-idl)" [UNIQUE](/windows/desktop/Midl/unique) " \] или " \[ **in**" **,** [](/windows/desktop/Midl/ptr) \] "pointer", то Серверная часть приложения может изменить значение параметра указателя на null. Когда сервер затем возвращает клиенту значение null, память, на которую ссылается указатель перед вызовом удаленной процедуры, по-прежнему остается на клиентской стороне, но больше не доступна из этого указателя (за исключением случаев, когда указатель полностью имеет псевдоним). Такая память называется *потерянной*. Это также называется *утечкой памяти*. Повторный потерянный объем памяти на клиенте приводит к тому, что клиент выполнит недоступные ресурсы памяти.

Память также может быть потеряна каждый раз, когда сервер изменяет внедренный указатель на значение null. Например, если параметр указывает на сложную структуру данных, такую как дерево, серверная часть приложения может удалять узлы дерева и устанавливать указатели внутри дерева в значение null.

Другая ситуация, которая может привести к утечке памяти, заключается в согласованности, различном и открытом массиве, содержащем указатели. Когда серверное приложение изменяет параметр, указывающий размер массива или переданный диапазон таким образом, что он представляет меньшее значение, заглушки используют меньшее значение для освобождения памяти. Элементы массива с индексами, превышающими параметр size, считаются потерянными. Приложение должно освобождать элементы за пределами переданного диапазона.

 

 