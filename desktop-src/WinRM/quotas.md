---
title: Управление квотами для удаленных оболочек
description: Управление квотами позволяет пользователям более эффективно управлять системными ресурсами.
ms.assetid: 6651a500-a95a-45a1-b46a-27b2e9b36a1c
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a1310efd37b913ae0bf8394015f6df792711ac6b
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104331760"
---
# <a name="quota-management-for-remote-shells"></a>Управление квотами для удаленных оболочек

Управление квотами позволяет пользователям более эффективно управлять системными ресурсами. Служба удаленного управления Windows (WinRM) добавил Специальный набор квот, обеспечивающих более высокое качество обслуживания, помогает предотвратить проблемы отказа в обслуживании и выделить ресурсы сервера для параллельных пользователей. Набор квот WinRM основан на инфраструктуре квот, которая реализована для службы службы IIS (IIS).

Реализация квот поможет предотвратить проблемы снижения производительности и отказа в обслуживании, выполнив следующие действия.

-   Ограничение числа оболочек и процессов оболочки, которые может создать пользователь
-   Ограничение максимального числа одновременных пользователей
-   Управление объемом памяти, выделенной оболочке
-   Установка времени ожидания для оболочек, которые неактивны

## <a name="quota-settings"></a>Параметры квоты

Для управления удаленной оболочкой необходимо применять следующие квоты. Эти квоты можно настроить с помощью служебной программы WinRM или с помощью параметров групповая политика. Параметры, настроенные групповая политика, заменяют квоты, заданные программой WinRM. Дополнительные сведения о настройке групповых политик для WinRM см. в разделе [Установка и настройка для служба удаленного управления Windows](installation-and-configuration-for-windows-remote-management.md).

<dl> <dt>

<span id="IdleTimeout"></span><span id="idletimeout"></span><span id="IDLETIMEOUT"></span>IdleTimeout
</dt> <dd>

Максимальное время в миллисекундах до удаления неактивной удаленной оболочки. Значение по умолчанию — 180000 миллисекунд. Минимальное время равно 1000 миллисекундам.

</dd> <dt>

<span id="MaxProcessesPerShell"></span><span id="maxprocessespershell"></span><span id="MAXPROCESSESPERSHELL"></span>макспроцессеспершелл
</dt> <dd>

Максимальное количество процессов, разрешенных на оболочку, включая дочерние процессы оболочки. Значение по умолчанию — 25.

</dd> <dt>

<span id="MaxMemoryPerShellMB"></span><span id="maxmemorypershellmb"></span><span id="MAXMEMORYPERSHELLMB"></span>максмеморипершеллмб
</dt> <dd>

Максимальный объем памяти, выделяемой на оболочку, включая дочерние процессы оболочки. Значение по умолчанию — 1024 МБ.

> [!Note]  
> Поведение не поддерживается, если для Максмеморипершеллмб задано значение, которое меньше значения по умолчанию.

 

</dd> <dt>

<span id="MaxShellsPerUser"></span><span id="maxshellsperuser"></span><span id="MAXSHELLSPERUSER"></span>максшеллсперусер
</dt> <dd>

Максимальное количество оболочек на пользователя. Значение по умолчанию равно 30.

</dd> <dt>

<span id="MaxConcurrentUsers"></span><span id="maxconcurrentusers"></span><span id="MAXCONCURRENTUSERS"></span>максконкуррентусерс
</dt> <dd>

Максимальное число одновременных пользователей, которые могут открывать оболочки. Значение по умолчанию равно 10.

</dd> </dl>

## <a name="deprecated-quotas"></a>Устаревшие квоты

WinRM 2,0 устанавливает квоту Максшеллрунтиме на доступ только для чтения. Изменение значения этой квоты не будет действовать на удаленных оболочках.

## <a name="retrieving-quota-configuration-information"></a>Получение сведений о конфигурации квоты

Чтобы проверить параметры конфигурации квоты, введите **WinRM Get WinRM/config**.

Следующий фрагмент кода представляет собой текстовый пример конфигурации WinRM с параметрами квоты по умолчанию.

``` syntax
Config

          ...         

          Winrs

                   AllowRemoteShellAccess = true

                   IdleTimeout = 7200000

                   MaxConcurrentUsers = 10

                   MaxProcessesPerShell = 25

                   MaxMemoryPerShellMB = 1024

                   MaxShellsPerUser = 30
```

## <a name="configuring-shell-quotas"></a>Настройка квот оболочки

Квоты можно задать с помощью параметра групповая политика или вручную. Дополнительные сведения о конкретных параметрах конфигурации см. в разделе [Установка и настройка для служба удаленного управления Windows](installation-and-configuration-for-windows-remote-management.md).

**Установка квоты с групповая политика**

1.  Откройте окно командной строки с правами администратора.
2.  В командной строке введите **gpedit. msc**. Откроется окно **Редактор объектов групповой политики** .
3.  Найдите **Служба удаленного управления Windows** и **удаленная оболочка Windows** групповая политика объектов (GPO) в разделе **Конфигурация компьютера \\ Административные шаблоны \\ компоненты Windows**.
4.  На вкладке **Расширенная** выберите параметр, чтобы просмотреть описание. Дважды щелкните параметр, чтобы изменить его.

**Задание квоты вручную**

1.  Откройте окно командной строки с правами администратора.
2.  В командной строке введите **WinRM set winrm/config/WinRS ' @ { ***<Quota>*** = " ***<Value>*** "} "**

Например, чтобы увеличить максимальное число оболочек на пользователя с 5 до 7, введите **WinRM set winrm/config/WinRS ' @ {максшеллсперусер = "7 '} '**.

 

 




