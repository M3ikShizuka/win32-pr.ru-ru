---
title: Управление квотами для удаленных оболочек
description: Управление квотами позволяет пользователям более эффективно управлять системными ресурсами.
ms.assetid: 6651a500-a95a-45a1-b46a-27b2e9b36a1c
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1f8cfa177d6f09552238471ff29d81d0ac0b7351
ms.sourcegitcommit: 61a4c522182aa1cacbf5669683d9570a3bf043b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2021
ms.locfileid: "122883221"
---
# <a name="quota-management-for-remote-shells"></a>Управление квотами для удаленных оболочек

Управление квотами позволяет пользователям более эффективно управлять системными ресурсами. Windows Удаленное управление (WinRM) добавило Специальный набор квот, обеспечивающих более высокое качество обслуживания, помогает предотвратить проблемы отказа в обслуживании и выделить ресурсы сервера для параллельных пользователей. набор квот WinRM основан на инфраструктуре квот, которая реализована для службы службы IIS (IIS).

Реализация квот поможет предотвратить проблемы снижения производительности и отказа в обслуживании, выполнив следующие действия.

-   Ограничение числа оболочек и процессов оболочки, которые может создать пользователь
-   Ограничение максимального числа одновременных пользователей
-   Управление объемом памяти, выделенной оболочке
-   Установка времени ожидания для оболочек, которые неактивны

## <a name="quota-settings"></a>Параметры квоты

Для управления удаленной оболочкой необходимо применять следующие квоты. Эти квоты можно настроить с помощью служебной программы WinRM или с помощью параметров групповая политика. Параметры настроенные групповая политика заменяют квоты, заданные программой winrm. дополнительные сведения о настройке групповых политик для WinRM см. в разделе [установка и настройка для служба удаленного управления Windows](installation-and-configuration-for-windows-remote-management.md).

<dl> <dt>

<span id="IdleTimeout"></span><span id="idletimeout"></span><span id="IDLETIMEOUT"></span>IdleTimeout
</dt> <dd>

Максимальное время в миллисекундах до удаления неактивной удаленной оболочки. Значение по умолчанию — 180000 миллисекунд. Минимальное время равно 1000 миллисекундам.

</dd> <dt>

<span id="MaxProcessesPerShell"></span><span id="maxprocessespershell"></span><span id="MAXPROCESSESPERSHELL"></span>макспроцессеспершелл
</dt> <dd>

Максимальное количество процессов, разрешенных на оболочку, включая дочерние процессы оболочки. Значение по умолчанию — 25.

</dd> <dt>

<span id="MaxMemoryPerShellMB"></span><span id="maxmemorypershellmb"></span><span id="MAXMEMORYPERSHELLMB"></span>максмеморипершеллмб
</dt> <dd>

Максимальный объем памяти, выделяемой на оболочку, включая дочерние процессы оболочки. Значение по умолчанию — 1024 МБ.

> [!Note]  
> Поведение не поддерживается, если для Максмеморипершеллмб задано значение, которое меньше значения по умолчанию.

 

</dd> <dt>

<span id="MaxShellsPerUser"></span><span id="maxshellsperuser"></span><span id="MAXSHELLSPERUSER"></span>максшеллсперусер
</dt> <dd>

Максимальное количество оболочек на пользователя. Значение по умолчанию равно 30.

</dd> <dt>

<span id="MaxConcurrentUsers"></span><span id="maxconcurrentusers"></span><span id="MAXCONCURRENTUSERS"></span>максконкуррентусерс
</dt> <dd>

Максимальное число одновременных пользователей, которые могут открывать оболочки. Значение по умолчанию равно 10.

</dd> </dl>

## <a name="deprecated-quotas"></a>Устаревшие квоты

WinRM 2,0 устанавливает квоту Максшеллрунтиме на доступ только для чтения. Изменение значения этой квоты не будет действовать на удаленных оболочках.

## <a name="retrieving-quota-configuration-information"></a>Получение сведений о конфигурации квоты

Чтобы проверить параметры конфигурации квоты, введите **WinRM Get WinRM/config**.

Следующий фрагмент кода представляет собой текстовый пример конфигурации WinRM с параметрами квоты по умолчанию.

``` syntax
Config

          ...         

          Winrs

                   AllowRemoteShellAccess = true

                   IdleTimeout = 7200000

                   MaxConcurrentUsers = 10

                   MaxProcessesPerShell = 25

                   MaxMemoryPerShellMB = 1024

                   MaxShellsPerUser = 30
```

## <a name="configuring-shell-quotas"></a>Настройка квот оболочки

Квоты можно задать с помощью параметра групповая политика или вручную. дополнительные сведения о конкретных параметрах конфигурации см. в разделе [установка и настройка для служба удаленного управления Windows](installation-and-configuration-for-windows-remote-management.md).

**Установка квоты с групповая политика**

1.  Откройте окно командной строки с правами администратора.
2.  В командной строке введите **gpedit. msc**. Откроется окно **Редактор объектов групповой политики** .
3.  найдите **служба удаленного управления Windows** и **Windows удаленную оболочку** групповая политика объектов (GPO) в разделе **конфигурация компьютера \\ административные шаблоны \\ Windows компоненты**.
4.  На вкладке **Расширенная** выберите параметр, чтобы просмотреть описание. Дважды щелкните параметр, чтобы изменить его.

**Задание квоты вручную**

1.  Откройте окно командной строки с правами администратора.
2.  В командной строке введите **WinRM set winrm/config/WinRS ' @ {**_&lt; Quota &gt;_*_= "_*_&lt; значение &gt;_*_"} "_*

Например, чтобы увеличить максимальное число оболочек на пользователя с 5 до 7, введите **WinRM set winrm/config/WinRS ' @ {максшеллсперусер = "7 '} '**.

 

 




