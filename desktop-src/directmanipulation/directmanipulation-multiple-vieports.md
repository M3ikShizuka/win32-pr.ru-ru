---
description: При использовании нескольких окон просмотра тестингдетерминес на то, какие окна просмотра зависят от вводимых пользователем данных, занимая положение контакта на экране и определяя, какой прямоугольник окна просмотра обращается к контактам.
ms.assetid: 960EF92D-F439-4A84-AAF9-1469E2830573
title: Использование нескольких окон просмотра в Директманипулатион
ms.topic: article
ms.date: 02/03/2020
ms.openlocfilehash: e422d99d8a71fbf24af5fc60641da7ac808b54215c56e5d81b8c222226ef8452
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119787534"
---
# <a name="using-multiple-viewports-in-directmanipulation"></a>Использование нескольких окон просмотра в Директманипулатион

При использовании нескольких окон просмотра Проверка *попадания* определяет, какие окна просмотра зависят от вводимых пользователем данных, путем получения расположения на экране контакта и определения того, какой прямоугольник окна просмотра обращается к контактам.

Распространенным сценарием в [непосредственной манипуляции](direct-manipulation-portal.md) является размещение одного окна просмотра внутри другого, также известного как *вложенные окна просмотра*. Если контакт обращается более чем к одному окну просмотра, порядок вызовов  [**сетконтакт**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) в окне [*WndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) определяет связь типа «родители-потомки» вложенных окон просмотра.

Правило: дочерний элемент должен вызвать [**сетконтакт**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact)перед вызовом родителя.

![Схема, показывающая иерархии проверки попадания](images/dm-art-8.png)

Контакт появляется в окне просмотра. Сначала необходимо вызвать [**сетконтакт**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) для оранжевого (дочернего) окна просмотра, а затем выбрать зеленое (родительское) окно просмотра, чтобы установить правильную иерархию.

## <a name="targeting-the-correct-viewport"></a>Выбор правильного окна просмотра

Контакт может быть связан с любым количеством окна просмотра, и каждый контакт может быть назначен другому набору окна просмотра.

Каждое окно просмотра можно настроить для поддержки конкретных взаимодействий по мере необходимости.

На основе этих параметров [Direct манипуляция](direct-manipulation-portal.md) определяет, какое окно просмотра обрабатывает входные данные. Дочернее окно просмотра в иерархии проверки попадания имеет первую шанс обработки входных данных. Однако как цепочка, так и родительское повышение могут изменить то, какое окно просмотра обрабатывает входные данные.

## <a name="chaining"></a>Построение цепочек

Когда конец содержимого достигается во время манипуляции, [Непосредственная манипуляция](direct-manipulation-portal.md) применяет границу, чтобы показать, что содержимое не может быть дальше. Однако, если дочернее окно просмотра помещается в *цепочку* к родительскому области просмотра, этот результат подавляется. Вместо этого ближайшее окно просмотра предка в иерархии проверки попадания, которое поддерживает манипуляцию, обрабатывает входные данные. Если направление манипуляции отменяется таким, что предок возвращается к точке, в которой была активирована цепочка, то манипуляции "разцепочки" и управления передаются обратно в дочернее окно просмотра.

![Диаграмма, показывающая связанные манипуляции](images/dm-art-9.png)

Когда пользователь переменяет дочернее окно просмотра на границу содержимого, управление цепочкой привязывается к родительскому области просмотра, а пользователь начинает панорамирование родительского содержимого.

> [!Note]  
> Цепочка осей X и Y независимо друг от друга, поэтому, если диагональный сдвиг достигает границы x до границы y, манипуляция перемещает родительский объект в направлении x, продолжая перемещать дочерний элемент в направлении y. Чтобы включить или отключить цепочку, вызовите API [**сетчаининг**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setchaining) в дочернем окне просмотра.

### <a name="rails"></a>Rails

Указание границ в конфигурации окна просмотра влияет на способ сцепления входных данных из окна просмотра. В частности, входные данные не могут быть связаны с привязанным дочерним окном просмотра к его родителю в режиме панорамирования "не привязано". Чтобы создать цепочку входов, когда задаются границы, пользователь должен иметь сдвигаемых вертикально или горизонтально и быть заблокированным для границ.

### <a name="zooming"></a>изменение масштаба;

Если дочернее окно просмотра вложено в родительский объект и оба настроены для масштабирования, то операция масштабирования может быть связана от дочернего объекта к родительскому. Однако если операция продолжится, она будет работать только в родительском элементе и не может "развязать" к дочернему элементу. Если пользователь привязывает масштаб от дочернего объекта к родительскому, [прямое управление](direct-manipulation-portal.md) приостанавливает дочерний объект до тех пор, пока все контакты, связанные с манипуляцией, не будут удалены с экрана. На этом этапе дочерний элемент освобождается от приостановки и пользователь может сдвигать дочернее окно просмотра.

## <a name="gesture-targeting-parent-promotion"></a>Нацеленность на жесты: родительская акция

*Нацеливание на жесты* — это процесс, с помощью которого [прямые манипуляции](direct-manipulation-portal.md) группируют контакты и определяют, какое окно просмотра обрабатывает входные данные. *Родительское повышение* относится к случаям, когда входные данные передаются из дочернего элемента в родительский. Например, когда пользователь наводит два контакта и сжатие в пределах дочернего окна просмотра, настроенного только для прокрутки, входные данные помещаются в родительский объект, что позволяет увеличить масштаб. Родительское продвижение происходит независимо от того, включена ли цепочка в дочернем окне просмотра.

В отличие от цепочек, родительское продвижение не является обратным. Родительское окно просмотра продолжит обрабатывать входные данные взаимодействия до тех пор, пока все контакты не будут ликвидированы (дочерние окна просмотра не прекращают обрабатывать входные данные).
