---
description: Приемник мультимедиа ASF — это последний компонент в конвейере кодирования, позволяющий приложению записать файл ASF.
ms.assetid: 65bb8822-5eb0-46a3-ab9e-c55ae466e982
title: Приемники мультимедиа ASF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2d6bcd3e6b91403185342607e8c4374eb32069c7
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "105674551"
---
# <a name="asf-media-sinks"></a>Приемники мультимедиа ASF

Приемник мультимедиа ASF — это последний компонент в конвейере кодирования, позволяющий приложению записать файл ASF.

Media Foundation предоставляет два типа приемников мультимедиа ASF:

-   *Приемник файлов* ASF используется для архивации данных ASF Media в файл.
-   *Приемник потоковой передачи ASF* используется для записи содержимого ASF в байтовый поток, который можно передавать по сети.

Приемники мультимедиа ASF содержат один или несколько приемников потоков, которые представляют данные для записи для каждого потока в выходном файле ASF. Для кодирования приложений, работающих в Windows Vista, необходимо вручную настроить топологию кодирования, создав и настроив приемник ASF Media, а затем добавив его в топологию. В Windows 7, если для создания топологии используются объекты быстрого перекодирования, вы не создаете приемник мультимедиа напрямую и приложение не вызывает никаких методов приемника носителя или любого приемника потока. Объекты быстрого перекодирования создают необходимые приемники носителей и добавляют их в топологию перед возвратом ссылки на вызывающее приложение. Однако для быстрого преобразования объектов существуют некоторые ограничения, применяемые в зависимости от типа кодировки.

-   [Объектная модель приемника ASF Media](#asf-media-sink-object-model)
-   [Приемник файлов ASF](#asf-file-sink)
-   [См. также](#related-topics)

## <a name="asf-media-sink-object-model"></a>Объектная модель приемника ASF Media

Приемники мультимедиа ASF реализуют интерфейс [**имфмедиасинк**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) и предоставляют следующие интерфейсы. Приложение может получить ссылку на эти интерфейсы, вызвав [**QueryInterface**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(q)) в приемнике ASF Media, который используется для создания выходных образцов.



| Интерфейс                                                  | Описание                                                                                                                                                                                            |
|------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**имфмедиасинк**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink)                       | Требуется для всех приемников мультимедиа.                                                                                                                                                                          |
| [**имффинализаблемедиасинк**](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink) | Реализуется приемником файлов ASF, который записывает сгенерированное мультимедийное содержимое в файл. Можно использовать методы этого интерфейса для сброса данных и обновления объекта заголовка ASF для окончательного выходного файла. |
| [**имфклоккстатесинк**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink)             | Получает уведомления об изменении состояния с часов презентации.                                                                                                                                       |
| [**имфасфконтентинфо**](/windows/desktop/api/wmcontainer/nn-wmcontainer-imfasfcontentinfo)             | Объект ASF Контентинфо — это объект уровня Вмконтаинер, в основном хранящий сведения о объекте заголовка ASF. Используется для создания приемников мультимедиа ASF.                                                     |
| [**имфметадата**](/windows/desktop/api/mfidl/nn-mfidl-imfmetadata)                         | Используется для описания метаданных файла ASF.                                                                                                                                                        |
| [**имфметадатапровидер**](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider)         | Извлекает коллекцию метаданных либо для всей презентации, либо для одного потока в презентации.                                                                                          |



 

## <a name="asf-file-sink"></a>Приемник файлов ASF

Приемник ASF-файлов — это реализация [**имфмедиасинк**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) , предоставляемая Media Foundation, которую приложение может использовать для архивации данных ASF Media в файл.

Необходимо создать, настроить и вызвать методы для приемника файла или любого из его приемников потока, если вы используете объекты уровня конвейера для записи нового ASF-файла. После настройки приемника файла его можно добавить в конвейер кодирования.

Ниже приведены общие действия по использованию приемника файлов ASF.

1.  Создайте приемник файлов в процессе или вне процесса.
2.  Настройте приемник файлов со всеми потоками, свойствами кодировки и метаданными.
3.  Свяжите приемник файла с узлом выходной топологии либо путем перечисления приемников потока, либо путем отслеживания номеров потоков в приемнике.

В следующих разделах содержатся подробные сведения о работе с приемником файлов ASF.

-   [Создание приемника файлов ASF](creating-the-asf-file-sink.md)
-   [Добавление потоковой информации в приемник файлов ASF](adding-stream-information-to-the-asf-file-sink.md)
-   [Задание свойств в приемнике файла](setting-properties-in-the-file-sink.md)
-   [Добавление метаданных в приемник файлов](adding-metadata-to-the-file-sink.md)
-   [Модель буфера для контейнера утечки](the-leaky-bucket-buffer-model.md)

## <a name="related-topics"></a>См. также

<dl> <dt>

[Компоненты ASF уровня конвейера](pipeline-layer-asf-components.md)
</dt> <dt>

[Поддержка ASF в Media Foundation](asf-support-in-media-foundation.md)
</dt> </dl>

 

 
