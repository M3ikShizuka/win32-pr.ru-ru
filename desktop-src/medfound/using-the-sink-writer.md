---
description: Использование модуля записи приемника
ms.assetid: BE89E2E0-711F-4BD5-BB86-AA4CCA2D3E7F
title: Использование модуля записи приемника
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fa4fa472bd1a5121454b3ffb06def7082508432b
ms.sourcegitcommit: 95685061d5b0333bbf9e6ebd208dde8190f97005
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2021
ms.locfileid: "108110492"
---
# <a name="using-the-sink-writer"></a>Использование модуля записи приемника

## <a name="overview"></a>Обзор

### <a name="file-container-types"></a>Типы контейнеров файлов

Модуль записи приемников имеет встроенную поддержку нескольких типов контейнеров файлов. Полный список см. в разделе [MF \_ \_ контаинертипе](mf-transcode-containertype.md). Вы можете поддерживать дополнительные типы контейнеров, написав пользовательский [приемник мультимедиа](media-sinks.md). Файловый контейнер указывается при создании нового экземпляра модуля записи приемника.

### <a name="stream-formats"></a>Форматы потоков

Для каждого потока приложение должно указать следующее.

-   *Формат входных данных* — это формат, который приложение отправляет в модуль записи приемника.
-   *Формат выходных данных* — это формат, который будет записан в файл.

Форматы входных и выходных данных могут быть либо сжатыми, либо несжатыми. Модуль записи приемника поддерживает следующие сочетания:

-   Несжатые входные данные с сжатыми выходными данными. Это типичный случай и используется для сценариев кодирования или кодирования. Должен быть доступен кодировщик Microsoft Media Foundation, который принимает входной тип и кодирует в выходной тип.
-   Сжатые входные данные с одинаковыми выходными данными. Используйте это сочетание для ремукс файла без перекодирования.
-   Несжатые входные данные с одинаковыми выходными данными. Используйте это сочетание для записи несжатого аудио-или видеофайла в контейнер файлов.

Модуль записи приемника не поддерживает изменение размера видео, преобразование кадров или интерполяцию звука, если только эти функции не предоставляются кодировщиком. В противном случае приложение может использовать [обработчики цифровых сигналов](windowsmediadigitalsignalprocessors.md) для преобразования входных данных перед их отправкой в

## <a name="creating-the-sink-writer"></a>Создание модуля записи приемника

Существует две функции, которые создают модуль записи приемника:

-   [**Мфкреатесинквритерфромурл**](/windows/desktop/api/mfreadwrite/nf-mfreadwrite-mfcreatesinkwriterfromurl) принимает URL-адрес выходного файла или указатель на байтовый поток. Эта функция создает приемник мультимедиа внутренним образом.
-   [**Мфкреатесинквритерфроммедиасинк**](/windows/desktop/api/mfreadwrite/nf-mfreadwrite-mfcreatesinkwriterfrommediasink) принимает указатель на приемник мультимедиа, который уже был создан приложением.

Если вы используете один из встроенных приемников носителей, лучше использовать функцию [**мфкреатесинквритерфромурл**](/windows/desktop/api/mfreadwrite/nf-mfreadwrite-mfcreatesinkwriterfromurl) , так как вызывающему объекту не нужно настраивать приемник мультимедиа.

Метод [**мфкреатесинквритерфромурл**](/windows/desktop/api/mfreadwrite/nf-mfreadwrite-mfcreatesinkwriterfromurl) предоставляет несколько параметров для указания типа контейнера файлов. В самом простом случае функция использует расширение имени файла в URL-адресе для выбора контейнера файлов. Дополнительные сведения см. на странице справки по функциям.

Например, следующий код задает имя файла Output. WMV для URL-адреса. На основе расширения имени файла модуль записи приемника загрузит [приемник мультимедиа ASF](asf-media-sinks.md) для создания файла ASF.


```C++
    HRESULT hr = MFCreateSinkWriterFromURL(L"output.wmv", NULL, NULL, &pSinkWriter);
```



В случае с [**мфкреатесинквритерфроммедиасинк**](/windows/desktop/api/mfreadwrite/nf-mfreadwrite-mfcreatesinkwriterfrommediasink)тип файла определяется приемником мультимедиа.

## <a name="related-topics"></a>Связанные разделы

<dl> <dt>

[Модуль записи приемников](sink-writer.md)
</dt> </dl>

 

 



