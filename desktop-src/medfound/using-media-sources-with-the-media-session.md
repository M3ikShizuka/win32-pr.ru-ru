---
description: Использование источников мультимедиа с сеансом мультимедиа
ms.assetid: b50d3d6e-728b-4ba5-9b79-413d2108ade1
title: Использование источников мультимедиа с сеансом мультимедиа
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bf08edf1d68ea11b05e8f8db83e247bc844cd85c
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "103999898"
---
# <a name="using-media-sources-with-the-media-session"></a>Использование источников мультимедиа с сеансом мультимедиа

Если для управления воспроизведением используется сеанс мультимедиа, то набор методов, которые следует вызывать в источнике мультимедиа, ограничен. В этом разделе описывается, как использовать источник мультимедиа в сочетании с сеансом мультимедиа.

Ниже приведены основные шаги, которые будет выполнять приложение.

1.  Создайте источник мультимедиа. Чтобы создать источник мультимедиа, используйте сопоставитель источника. Дополнительные сведения см. в разделе [сопоставитель источников](source-resolver.md). Сопоставитель источника возвращает указатель на интерфейс [**имфмедиасаурце**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) источника. (Если вы написали пользовательский источник мультимедиа, вместо него можно предоставить пользовательский метод создания.)

2.  Настройте презентацию. Чтобы настроить представление источника, вызовите метод [**имфмедиасаурце:: креатепресентатиондескриптор**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasource-createpresentationdescriptor). Эту копию можно изменить, но изменения не станут активными до начала воспроизведения. Не изменяйте дескриптор презентации во время воспроизведения. Дополнительные сведения см. в разделе [дескрипторы представления](presentation-descriptors.md).

3.  Создайте топологию, содержащую источник мультимедиа. Дополнительные сведения см. в разделе [топологии](topologies.md).

4.  Используйте сеанс мультимедиа для управления воспроизведением. Сеанс мультимедиа вызывает методы в источнике мультимедиа. В настоящее время приложение не должно вызывать методы в источнике мультимедиа.

5.  Перед освобождением источника мультимедиа вызовите [**имфмедиасаурце:: Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasource-shutdown) , чтобы завершить работу источника.

    > [!Note]  
    > Если вы используете источник Sequencer, источник Sequencer выполняет завершение работы источников сегмента. Дополнительные сведения см. в разделе [источник Sequencer](sequencer-source.md).

     

При использовании сеанса мультимедиа единственными методами, которые следует вызывать в источнике мультимедиа, являются [**креатепресентатиондескриптор**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasource-createpresentationdescriptor), [**характеристика**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasource-getcharacteristics)и [**Завершение работы**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasource-shutdown). В частности:

-   Не вызывайте [**Запуск**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasource-start), [**приостановку**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasource-pause)или [**остановку**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasource-stop); Эти методы должны вызываться только сеансом мультимедиа.

-   Не вызывайте ни один из методов [**имфмедиастреам**](/windows/desktop/api/mfidl/nn-mfidl-imfmediastream) .

-   Не извлекать события непосредственно из источника мультимедиа или из потоков. Сеанс мультимедиа должен получить эти события для правильной работы конвейера. Сеанс мультимедиа пересылает все события, необходимые для приложения.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Сеанс мультимедиа](media-session.md)
</dt> </dl>

 

 



