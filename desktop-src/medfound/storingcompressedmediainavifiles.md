---
description: Описывает, как хранить данные Windows Media в файле AVI.
ms.assetid: f2a9d9ff-4876-4f24-b96a-5d89e42fa3d5
title: Хранение сжатых файлов мультимедиа в AVI-файлах (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 080524a47b4295517d50705f6aeb125d085a8346
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "104351495"
---
# <a name="storing-compressed-media-in-avi-files-microsoft-media-foundation"></a>Хранение сжатых файлов мультимедиа в AVI-файлах (Microsoft Media Foundation)

Любое содержимое, сжатое с помощью кодеков аудио и видео Windows Media, должно быть размещено в определенном формате контейнера. Одним из наиболее популярных форматов является аудио чередование видео или AVI. Для создания AVI-файлов можно использовать Microsoft Video для Windows (VfW) или Microsoft DirectShow. Дополнительные сведения об использовании видео для Windows или DirectShow см. в документации по продукту на сайте MSDN.

Видеокодеки Windows Media Audio и Video разработаны для использования свойств расширенного системного формата (ASF), который является контейнером, используемым Windows Media. Так как в AVI и ASF содержимое хранится по-разному, при хранении содержимого, сжатого с помощью аудиокодеков Windows Media и видеокодеков в AVI-файле, возникают некоторые трудности.

Аудиокодеки Windows Media сжимают аудио содержимое таким образом, что его невозможно правильно распаковать без отметки времени для отдельных выборок. Это позволяет выполнить некоторую оптимизацию на сжатом носителе. Так как контейнер ASF сохраняет отметки времени во всех примерах, эта характеристика алгоритмов аудио всегда работала нормально.

Однако файлы AVI не сохраняют метки времени с примерами. Это означает, что звуковые данные Windows Media не могут быть распакованы должным образом при сохранении в файле AVI. В видеоматериале Windows Media нет этого ограничения, и его можно добавить в файлы AVI. Для кодирования содержимого видео Windows Media в файл AVI с синхронизированным звуком необходимо использовать другой аудиокодек.

Другая ошибка использования файла AVI в качестве контейнера для Windows Media — это видео с низкой скоростью. Один из способов, которым видеокодеки видео Windows Media создает видеоматериалы для низкой скорости, заключается в удалении повторяющихся кадров. Если вы хотите разместить видео-содержимое Windows Media в ASF-файле, необходимо настроить кодировщик для доставки фиктивных кадров для повторяющихся кадров (установите [мфпкэй \_ продуцедуммифрамес](mfpkey-producedummyframesproperty.md) в значение Variant \_ true), чтобы каждый кадр представлялся в файле. Фиктивные кадры, создаваемые кодеком, имеют размер 8 байт. Тем не менее, кадр, записываемый в файл с помощью AVI мультиплексора, может быть больше сотен байтов и заполнен случайными данными. Файл AVI, сделанный таким образом, по-прежнему будет воспроизводиться, но он будет гораздо больше, чем ожидалось. Эту проблему можно избежать, используя более высокие скорости передачи данных при кодировании видео для хранения в файлах AVI.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Кодеки Windows Media](windows-media-codecs.md)
</dt> </dl>

 

 



