---
description: О топологиях
ms.assetid: 4f69b099-0ca7-4ea6-8412-0f1ea02e1600
title: О топологиях
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35008d839e8054554370039dd13297ae7a1f0b0a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104553573"
---
# <a name="about-topologies"></a>О топологиях

Топология — это объект, представляющий поток данных в конвейере. Приложение создает топологию для описания пути, который каждый поток получает от источника носителя к приемнику мультимедиа. Приложение передает топологию сеансу мультимедиа, а сеанс мультимедиа использует топологию для управления потоком данных.

Компоненты обработки данных в конвейере (источники мультимедиа, преобразования и приемники носителей) представлены в топологии как *узлы*. Поток данных от одного компонента к другому представлен соединением между узлами. Определены следующие типы узлов:

-   Исходный узел: представляет поток мультимедиа в источнике мультимедиа.
-   Узел преобразования: представляет Media Foundation преобразование (MFT).
-   Выходной узел: представляет приемник потока в приемнике мультимедиа.
-   Узел tee: представляет вилку в потоке. Узлы tee являются исключением из правила, которое узел представляет объект конвейера. В отличие от других типов узлов, узел tee просто направляет поток данных.

Действующая топология должна содержать по крайней мере один исходный узел, подключенный к выходному узлу, возможно, через один или несколько узлов преобразования. Например, на следующей диаграмме показана простая топология с одним потоком.

![Схема, на которой показана топология с одним потоком.](images/topology01.png)

Для воспроизведения файла узел преобразования может представлять декодер, а выходной узел — модуль подготовки звука или видео. Для кодировки файлов узел преобразования будет представлять кодировщик, а выходной узел будет представлять приемник архива, например приемник файлов ASF.

Если подключены два узла, узел, создающий данные, называется *вышестоящим* узлом, а узел, который получает данные, называется *подчиненным* узлом. Например, на предыдущей схеме исходный узел является вышестоящим из узла преобразования.

В паре Соединенных узлов точка подключения на вышестоящем узле называется *выходом*. Точка соединения на подчиненном узле называется *входными данными*. На следующей диаграмме показана пара узлов с точками соединения, а также поток данных между ними. Точки соединения не представлены в топологии как отдельные объекты. Они указываются по значению индекса для объекта node.

![Диаграмма, на которой показаны два подключенных узла.](images/topology04.png)

Исходный узел не может иметь входных данных. Таким образом, не могут быть передаваться узлы из исходного узла. Аналогичным образом выходной узел не может иметь выходные данные, и ни один из узлов не может быть подчинен выходного узла. Цепочка узлов из исходного узла в выходной узел называется *ветвью* топологии. На первой схеме в этом разделе показана топология с одной ветвью. Обычно существует одна ветвь на поток. Например, для воспроизведения файла с одним звуковым потоком и одним видеопотоком требуется топология с двумя ветвями.

## <a name="partial-topologies"></a>Частичные топологии

Полная или *полная* топология содержит узел для каждого необходимого объекта конвейера. Однако приложению не всегда нужно создавать полную топологию. Вместо этого создается *частичная* топология, в которой пропущен один или несколько узлов преобразования.

Сеанс мультимедиа завершает топологию с помощью объекта, называемого *загрузчиком топологии*. Загрузчик топологии преобразует частичные топологии в полные топологии путем вставки необходимых преобразований. Процесс преобразования называется *разрешением* топологии.

Например, для воспроизведения закодированного звукового потока в топологии должен быть декодер между исходным и выходным узлами. Приложение создает частичную топологию, которая подключает исходный узел непосредственно к выходному узлу без декодера. Загрузчик топологии проверяет форматы потоков, находит правильный декодер и вставляет узел преобразования в топологию.

На следующей диаграмме показана частичная топология, созданная приложением.

![Диаграмма, которая показывает частичный узел с исходным узлом и выходным узлом.](images/topology02.png)

На следующей схеме показана полная топология после того, как загрузчик топологии разрешит ее. В этом примере загрузчик топологии вставил узел преобразования для декодера.

![Схема, на которой показана полная топология.](images/topology03.png)

В текущей версии Media Foundation загрузчик топологии поддерживает топологии для воспроизведения. Для кодирования файлов и других сценариев приложение должно создать полную топологию.

Приложения также могут создать загрузчик топологии и использовать его напрямую. Например, можно использовать загрузчик топологии для разрешения частичной топологии, а затем изменить полную топологию перед передачей в сеанс мультимедиа. Чтобы создать загрузчик топологии, вызовите [**мфкреатетополоадер**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatetopoloader).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Топологии](topologies.md)
</dt> </dl>

 

 



