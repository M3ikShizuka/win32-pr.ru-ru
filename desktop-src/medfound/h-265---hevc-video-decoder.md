---
description: Декодер видео Media Foundation H. 265 — это Media Foundation преобразование, которое поддерживает декодирование содержимого H. 265/HEVC в формате приложение б и может использоваться при воспроизведении файлов MP4 и M2TS.
ms.assetid: BBE754E4-2AAD-4CFD-B53F-2B66693502EE
title: Декодер видео H. 265/HEVC
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: c764353e04da0113b51c4efb0d39fad02c84b98859e154d24866229c3a524385
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119777204"
---
# <a name="h265--hevc-video-decoder"></a>Декодер видео H. 265/HEVC

Декодер видео Media Foundation H. 265 — это [Media Foundation преобразование](media-foundation-transforms.md) , которое поддерживает декодирование содержимого H. 265/HEVC в формате приложение б и может использоваться при воспроизведении файлов MP4 и M2TS.

Декодер видео H. 265 предоставляет следующие интерфейсы.

-   [**Икодекапи**](/windows/win32/api/strmif/nn-strmif-icodecapi) (поддерживается в Windows 8)
-   [**имфаттрибутес**](/windows/desktop/api/mfobjects/nn-mfobjects-imfattributes)
-   [**имфжетсервице**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)
-   [**имфкуалитядвисе**](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise)
-   [**IMFQualityAdvise2**](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise2)
-   [**имфратеконтрол**](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol)
-   [**имфратесуппорт**](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport)
-   [**имфреалтимеклиент**](/windows/desktop/api/mfidl/nn-mfidl-imfrealtimeclient)
-   [**имфтрансформ**](/windows/desktop/api/mftransform/nn-mftransform-imftransform)

Чтобы создать экземпляр декодера, вызовите функцию [**мфтенум**](/windows/desktop/api/mfapi/nf-mfapi-mftenum) или [**мфтенумекс**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex) .

## <a name="input-types"></a>Типы входных данных

Входной тип должен содержать по крайней мере два следующих атрибута:



| attribute                                                 | Описание                                                                                   |
|-----------------------------------------------------------|-----------------------------------------------------------------------------------------------|
| [**\_ \_ основной тип MF \_ MT**](mf-mt-major-type-attribute.md) | **\_Видео мфмедиатипе**                                                                        |
| [**подтип MF \_ MT \_**](mf-mt-subtype-attribute.md)        | [Мфвидеоформат \_ HEVC](video-subtype-guids.md) или мфвидеоформат \_ HEVC \_ ES |



 

Первый подтип носителя, Мфвидеоформат \_ HEVC, указывает, что образцы мультимедиа содержат H. 265 битовый поток с начальными кодами, а поток — с чередованием SPS/PPS. Предполагается наличие одного кадра на выборку.

Подтип носителя Мфвидеоформат HEVC ES означает, что \_ \_ примеры мультимедиа содержат элементарное значение H. 265 битовый поток, где каждый пример может содержать частичное изображение, несколько изображений, некоторые рисунки и часть изображения.

Входные типы носителей не могут динамически изменяться между двумя типами. Декодер может обнаруживать изменения в выходном формате на основе простейшего синтаксиса потока (пропорции, измерения, флаги развертки, сведения о колориметрие) и запускать соответствующие изменения типа выходных данных.

Для входного типа мультимедиа декодер ожидает, что источник задает правильный профиль. Например, если содержимое будет 10 бит, тип носителя input должен указать профиль как Main10.

## <a name="output-types"></a>Типы вывода

Декодер поддерживает следующие выходные типы выходных данных:

-   **Мфвидеоформат \_ NV12**
-   **Мфвидеоформат \_ P010**

Дополнительные сведения об этих подтипах см. в разделе [GUID подтипа видео](video-subtype-guids.md).

## <a name="transform-attributes"></a>Атрибуты преобразования

Декодер H. 265 реализует метод [**имфтрансформ:: OutAttribute**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-getattributes) . Приложения могут использовать этот метод для получения или установки следующих атрибутов.



| attribute                                                                                       | Описание                                                                                                                   |
|-------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| [КОДЕКАПИ \_ авловлатенцимоде](codecapi-avlowlatencymode.md)                                     | Включает или отключает режим декодирования с низкой задержкой.                                                                                |
| [КОДЕКАПИ \_ авдекнумворкерсреадс](codecapi-avdecnumworkerthreads.md)                           | Задает число рабочих потоков, используемых декодером.                                                                        |
| [КОДЕКАПИ \_ авдеквидеосумбнаилженератионмоде](../directshow/avdecvideothumbnailgenerationmode-property.md) | Включает или отключает режим формирования эскизов.                                                                                |
| [\_ \_ задана длина налу MF \_](mf-nalu-length-set.md)                                                 | Указывает, что сведения о длине налу будут отправляться в виде большого двоичного объекта в каждом сжатом образце H. 265.                              |
| [\_ \_ сведения о длине MF налу \_](mf-nalu-length-information.md)                                 | Указывает длину Налус в образце. Это большой двоичный объект MF, заданный в сжатых примерах входных данных для декодера H. 265. |
| [\_ \_ минимальное \_ \_ число образцов выходных данных SA MF \_](mf-sa-minimum-output-sample-count.md)                 | Указывает максимальное число выборок выходных данных.                                                                               |



 

Декодер H. 265 поддерживает интерфейс [**икодекапи**](/windows/win32/api/strmif/nn-strmif-icodecapi) . Этот интерфейс предоставляет API алтернативате для установки следующих свойств кодека.

-   [КОДЕКАПИ \_ авдекнумворкерсреадс](codecapi-avdecnumworkerthreads.md)
-   [КОДЕКАПИ \_ авдеквидеосумбнаилженератионмоде](../directshow/avdecvideothumbnailgenerationmode-property.md)
-   [КОДЕКАПИ \_ авловлатенцимоде](codecapi-avlowlatencymode.md)

## <a name="format-constraints"></a>Ограничения формата

Декодер поддерживает следующие форматы:



| Требование | Значение |
|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Профили и уровни    | Main, Главная по-прежнему рисунок и профили Main10                                                                                                                                                                                                                        |
| Форматы чрома     | 4:2:0 чрома                                                                                                                                                                                                                                                         |
| Минимальное разрешение | 48 × 48 пикселей                                                                                                                                                                                                                                                       |
| Максимальное разрешение | 4096 × 2304 пикселей<br/> Максимальное гарантированное разрешение для ускорения ДКСВА — 1920 × 1088 пикселей; при более высоком разрешении Декодирование выполняется с помощью ДКСВА, если оно поддерживается базовым оборудованием, в противном случае Декодирование выполняется с помощью программного обеспечения.<br/> |
| дксва               | Декодер поддерживает DX11 и DX12 ДКСВА, но не ДКСВА версии 2 или ДКСВА версии 1.                                                                                                                                                                                                         |



 

Входные данные должны соответствовать приложению B из ITU-T H. 265 \| ISO/IEC 23008-2. Данные должны включать начальные коды. Декодер пропускает байты, пока не найдет допустимый набор параметров последовательности (SPS) и набор параметров изображения (PPS) в байтовом потоке.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 10 \[ только классические приложения\]<br/>                                              |
| Минимальная версия сервера<br/> | Ни одна версия не поддерживается<br/>                                                                |
| DLL<br/>                      | <dl> <dt>hevcdecoder.dll</dt> <dt>hevcdecoder_store.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Объекты кодека](codecobjects.md)
</dt> </dl>

 

 
