---
description: В этом разделе описывается настройка потоков VBR.
ms.assetid: 9dd3ff5b-4c7c-41a8-b1b9-7ea380175193
title: Использование кодирования VBR (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cdd1f317308d79c696e26a8671cc9d84ca8effa4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263481"
---
# <a name="using-vbr-encoding-microsoft-media-foundation"></a>Использование кодирования VBR (Microsoft Media Foundation)

Как описано в разделе [методы кодирования](encodingmethods.md) , для повышения согласованности качества содержимого используется кодирование с переменной СКОРОСТЬЮ (VBR). Потоки VBR настраиваются точно так же, как потоки с постоянными скоростями (CBR), за исключением параметров буфера (скорость потока и окно буфера). В этом разделе описывается настройка потоков VBR.

## <a name="configuring-quality-based-vbr"></a>Настройка качества VBR

Для кодирования, использующего метод VBR на основе метода Quality, не требуются стандартные параметры буфера. Вместо этого указывается уровень качества (от 0 до 100), используемый кодировщиком для динамического определения соответствующих параметров буфера. Этот режим кодирования использует только один проход кодирования.

Вы можете перечислить Поддерживаемые типы выходных данных VBR на основе качества для аудиокодеков. При задании типа выходных данных необходимо использовать один из типов, возвращаемых DMO. Дополнительные сведения см. в разделе [Перечисление типов аудио для конкретных режимов кодирования](enumeratingaudiotypesforspecificencodingmodes.md).

Чтобы настроить поток видео VBR с учетом качества, необходимо задать свойства, перечисленные в следующей таблице.



| Свойство                                            | Описание                                                                                                                                             |
|-----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|
| [МФПКЭЙ \_ вбренаблед](mfpkey-vbrenabledproperty.md) | Установите значение \_ true.                                                                                                                                   |
| [МФПКЭЙ \_ вбркуалити](mfpkey-vbrqualityproperty.md) | Задайте нужное значение качества от 0 до 100. Не все значения качества представляют дискретные параметры. Дополнительные сведения см. в описании свойства. |



 

## <a name="configuring-unconstrained-vbr"></a>Настройка неограниченных VBR

Неограниченная кодировка VBR позволяет кодировщику изменять размер отдельных выборок без явных ограничений буфера. Однако средняя скорость потока на протяжении полученного содержимого должна быть меньше или равна указанному значению. Для неограниченной VBR требуется два прохода кодирования.

Можно перечислить Поддерживаемые типы выходных данных VBR с двумя проходами для аудиокодеков. При задании типа выходных данных необходимо использовать один из типов, возвращаемых DMO. Дополнительные сведения см. в разделе [Перечисление типов аудио для конкретных режимов кодирования](enumeratingaudiotypesforspecificencodingmodes.md).

Для настройки видеопотока с неограниченным каналом VBR необходимо задать свойства, перечисленные в следующей таблице.



| Свойство                                            | Описание                          |
|-----------------------------------------------------|--------------------------------------|
| [МФПКЭЙ \_ вбренаблед](mfpkey-vbrenabledproperty.md) | Установите значение \_ true.                |
| [МФПКЭЙ \_ пассесусед](mfpkey-passesusedproperty.md) | Задайте значение 2.                            |
| [МФПКЭЙ \_ равг](mfpkey-ravgproperty.md)             | Задайте требуемую среднюю скорость. |



 

## <a name="configuring-peak-constrained-vbr"></a>Настройка Peak-Constrained VBR

Пиковая частота VBR похожа на "неограниченное число VBR", так как она ограничена средним битом скорости в течение потока. Кроме того, Пиковая нагрузка соответствует пиковому буферу. Этот буфер описывается с использованием пиковой скорости потока и пикового окна буфера, точно так же, как буфер CBR описывается средним битом скорости и окном буфера. Этот режим обеспечивает гибкость кодировщика при кодировании отдельных выборок с соблюдением пиковых ограничений. Это особенно полезно при декодировании с помощью микросхемы устройства, например проигрывателя DVD, при этом необходимо учитывать ограничения по оборудованию.

Поддерживаемые выходные типы выходных кодировщика VBR с ограничением пиковой нагрузки — это те же типы, которые перечислены для неограниченных VBR. Установите пиковые значения для DMO и используйте доставленный тип. Дополнительные сведения см. в разделе [Перечисление типов аудио для конкретных режимов кодирования](enumeratingaudiotypesforspecificencodingmodes.md).

Чтобы настроить поток видео с пиковым ограничением VBR, необходимо задать свойства, перечисленные в следующей таблице, с помощью метода **ипропертибаг:: Write** .



| Свойство                                            | Описание                                                     |
|-----------------------------------------------------|-----------------------------------------------------------------|
| [МФПКЭЙ \_ вбренаблед](mfpkey-vbrenabledproperty.md) | Установите значение \_ true.                                           |
| [МФПКЭЙ \_ пассесусед](mfpkey-passesusedproperty.md) | Задайте значение 2.                                                       |
| [МФПКЭЙ \_ равг](mfpkey-ravgproperty.md)             | Задайте требуемую среднюю скорость.                            |
| [МФПКЭЙ \_ рмакс](mfpkey-rmaxproperty.md)             | Задайте желаемую пиковую скорость.                               |
| [МФПКЭЙ \_ бмакс](mfpkey-bmaxproperty.md)             | Задайте для параметра окно буфера, соответствующее пиковой скорости. |



 

> [!Note]  
> Рекомендуется установить пиковую скорость по крайней мере вдвое в два раза выше средней скорости. Если задать для пиковой скорости более низкое значение, то кодек может кодировать содержимое как CBR, а не Пиковое ограничение VBR.

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Кодеки Windows Media](windows-media-codecs.md)
</dt> <dt>

[Использование кодировки Two-Pass](usingtwoencodingpasses.md)
</dt> <dt>

[Работа с аудио](workingwithaudio.md)
</dt> <dt>

[Работа с видео](workingwithvideo.md)
</dt> </dl>

 

 



