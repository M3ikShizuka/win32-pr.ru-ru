---
description: В потоке перевыборки звука выполняется одно или оба следующих действия с звуковым потоком. Измените частоту выборки. Измените число каналов.
ms.assetid: bee755c4-0585-40fb-aa4d-4e964f5144a3
title: DSP изменения дискретизации звука (Wmcodecdsp.h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 8fb173fa4f8d964bec1102c4cfeefa4bf83f1ffe
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2021
ms.locfileid: "105693922"
---
# <a name="audio-resampler-dsp"></a>DSP по интерполяции аудио

В потоке перевыборки звука выполняется одно или оба следующих действия с звуковым потоком.

-   Измените частоту выборки.
-   Измените число каналов.

## <a name="clsid"></a>CLSID

\_КРЕСАМПЛЕРМЕДИАОБЖЕКТ CLSID

## <a name="interfaces"></a>Интерфейсы

-   [**имедиаобжект**](/previous-versions/ms785953(v=vs.85))
-   [**имфтрансформ**](/windows/desktop/api/mftransform/nn-mftransform-imftransform)
-   [**ипропертисторе**](/windows/win32/api/propsys/nn-propsys-ipropertystore)
-   [**ивмресамплерпропс**](/windows/desktop/api/wmcodecdsp/nn-wmcodecdsp-iwmresamplerprops)

## <a name="formats"></a>Форматы

PCM или IEEE с плавающей запятой

Тип носителя должен указывать несжатый формат PCM или аудио в формате с плавающей точкой.

-   Для интерфейса [**имфтрансформ**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) инициализируйте тип мультимедиа, как описано в разделе [типы несжатых аудио носителей](uncompressed-audio-media-types.md).
-   Для интерфейса [**имедиаобжект**](/previous-versions/ms785953%28v%3dvs.85%29) тип мультимедиа должен быть типа **\_ вавеформатекс формата** . Дополнительные сведения см. в [**разделе \_ \_ тип мультимедиа DMO**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type).

## <a name="properties"></a>Свойства

-   [МФПКЭЙ \_ вмресамп \_ филтеркуалити](mfpkey-wmresamp-filterquality.md)
-   [МФПКЭЙ \_ вмресамп \_ чаннелмткс](mfpkey-wmresamp-channelmtx.md)
-   [\_ \_ пропускная способность мфпкэй вмресамп ловпасс \_](mfpkey-wmresamp-lowpass-bandwidth.md)

## <a name="required-attributes"></a>Обязательные атрибуты

Для использования этого параметра необходимо задать следующие атрибуты:

-   [\_ \_ \_ Маска канала MF MT \_ Audio](mf-mt-audio-channel-mask-attribute.md)
-   [\_ \_ \_ Среднее \_ число байт \_ в секунду для \_ звука MF MT](mf-mt-audio-avg-bytes-per-second-attribute.md)
-   [\_ \_ Выравнивание звукового \_ блока MF MT \_](mf-mt-audio-block-alignment-attribute.md)

## <a name="custom-channel-mapping"></a>Настраиваемое сопоставление каналов

В результате перевыборки звука на выходных звуковых каналах сопоставляются входные Звуковые каналы на основе следующих сведений:

-   Число каналов. Это значение указывается в атрибуте [ \_ \_ канала MF \_ Audio \_ nums](mf-mt-audio-num-channels-attribute.md) типа мультимедиа или в элементе **нчаннелс** структуры [вавеформатекс](mf-mt-audio-prefer-waveformatex-attribute.md) .
-   Маска канала, которая назначает каналы для расположения динамика. Маска канала указывается в \_ \_ \_ \_ атрибуте маски канала MF для типа носителя или в элементе **двчаннелмаск** структуры [**вавеформатекстенсибле**](/windows/desktop/api/mmreg/ns-mmreg-waveformatextensible) .
-   Матрица веса сопоставления.

Матрица содержит ряд весов, в которых каждый выходной канал является взвешенным средним значением входных каналов.

Можно указать пользовательскую матрицу для сопоставления каналов, вызвав [**ивмресамплерпропс:: сетусерчаннелмткс**](/windows/desktop/api/wmcodecdsp/nf-wmcodecdsp-iwmresamplerprops-setuserchannelmtx) или задав свойство [**мфпкэй \_ вмресамп \_ чаннелмткс**](mfpkey-wmresamp-channelmtx.md) . Если пользовательская матрица не предоставлена, в этом примере используется набор стандартных матриц.

## <a name="default-channel-mapping"></a>Сопоставление каналов по умолчанию

Если пользовательская матрица не указана, то DSP по умолчанию для сопоставления каналов использует значения по умолчанию.

В приведенных ниже таблицах каналы сокращаются.

-   L: слева
-   R: right
-   C: по центру
-   Низкочастотный динамик: низкая частота
-   BL: задний левый
-   BR: задний правый
-   SL: левое окружение
-   SR: разместить справа

В следующей таблице показаны коэффициенты по умолчанию для сопоставления 6 каналов (Mask 0x3F) с 2 каналами.



|     | L     | R     | C     | ВЫХОД   | BL    | BR    |
|-----|-------|-------|-------|-------|-------|-------|
| L   | 0,314 | 0     | 0,222 | 0,031 | 0,268 | 0,164 |
| R   | 0     | 0,314 | 0,222 | 0,031 | 0,164 | 0,268 |



 

В следующей таблице показаны коэффициенты по умолчанию для сопоставления 6 каналов (Mask 0x60F) с 2 каналами.



|     | L     | R     | C     | ВЫХОД   | SL    | SR    |
|-----|-------|-------|-------|-------|-------|-------|
| L   | 0,320 | 0     | 0,226 | 0,032 | 0,292 | 0,130 |
| R   | 0     | 0,320 | 0,226 | 0,032 | 0,130 | 0,292 |



 

В следующей таблице показаны коэффициенты по умолчанию для сопоставления каналов 6 (Mask 0x3F или 0x60F) с 1 каналом.



|     | L     | R     | C     | ВЫХОД   | BL (SL) | BR (SR) |
|-----|-------|-------|-------|-------|--------|--------|
| C   | 0,192 | 0,192 | 0,192 | 0,038 | 0,192  | 0,192  |



 

В следующей таблице показаны коэффициенты по умолчанию для сопоставления 8 каналов (Mask 0x63F) с 2 каналами.



|     | L     | R     | C     | ВЫХОД   | BL    | BR    | SL    | SR    |
|-----|-------|-------|-------|-------|-------|-------|-------|-------|
| L   | 0,222 | 0     | 0,157 | 0,022 | 0,189 | 0,116 | 0,203 | 0,090 |
| R   | 0     | 0,222 | 0,157 | 0,022 | 0,116 | 0,189 | 0,090 | 0,203 |



 

В следующей таблице показаны коэффициенты по умолчанию для сопоставления 8 каналов (Mask 0x63F) с 1 каналом.



|     | L     | R     | C     | ВЫХОД   | BL    | BR    | SL    | SR    |
|-----|-------|-------|-------|-------|-------|-------|-------|-------|
| C   | 0,139 | 0,139 | 0,139 | 0,028 | 0,139 | 0,139 | 0,139 | 0,139 |



 

В следующей таблице показаны коэффициенты по умолчанию для сопоставления 8 каналов (Mask 0x63F) с 6 каналами (Mask 0x3F).



|     | L     | R     | C     | ВЫХОД   | BL    | BR    | SL    | SR    |
|-----|-------|-------|-------|-------|-------|-------|-------|-------|
| L   | 0,518 | 0     | 0     | 0     | 0     | 0     | 0,189 | 0     |
| R   | 0     | 0,518 | 0     | 0     | 0     | 0     | 0     | 0,189 |
| C   | 0     | 0     | 0,518 | 0     | 0     | 0     | 0     | 0     |
| ВЫХОД | 0     | 0     | 0     | 0,518 | 0     | 0     | 0     | 0     |
| BL  | 0     | 0     | 0     | 0     | 0,518 | 0     | 0,482 | 0     |
| BR  | 0     | 0     | 0     | 0     | 0     | 0,518 | 0     | 0,482 |



 

В следующей таблице показаны коэффициенты по умолчанию для сопоставления 8 каналов (Mask 0x63F) с 6 каналами (Mask 0x60F).



|     | L     | R     | C     | ВЫХОД   | BL    | BR    | SL    | SR    |
|-----|-------|-------|-------|-------|-------|-------|-------|-------|
| L   | 0,447 | 0     | 0     | 0     | 0     | 0     | 0     | 0     |
| R   | 0     | 0,447 | 0     | 0     | 0     | 0     | 0     | 0     |
| C   | 0     | 0     | 0,447 | 0     | 0     | 0     | 0     | 0     |
| ВЫХОД | 0     | 0     | 0     | 0,447 | 0     | 0     | 0     | 0     |
| SL  | 0     | 0     | 0     | 0     | 0,429 | 0,124 | 0,447 | 0     |
| SR  | 0     | 0     | 0     | 0     | 0,124 | 0,429 | 0     | 0,447 |



 

Чтобы понять, как интерпретировать таблицы коэффициентов, рассмотрим первую таблицу, которая сопоставляет 6 каналов с 2. Первая строка таблицы (0,314, 0, 0,222, 0,031, 0,268, 0,164) является вектором весов, определяющим степень интенсивности каждого входного канала в левом канале выходных данных. Вторая строка таблицы (0, 0,314, 0,222, 0,031, 0,164, 0,268) — это вектор весов, определяющий степень интенсивности каждого входного канала в правильном канале выходных данных.

В следующих формулах показано, как вычисляются выходные каналы.

``` syntax
L_out = L*0.314 + C*0.222 + LFE*0.031 + BL*0.268 + BR*0.164 
R_out = R*0.314 + C*0.222 + LFE*0.031 + BL*0.164 + BR*0.268
```

> [!Note]  
> Если вы используете DSP для увеличения числа каналов, для добавленных каналов будут назначены значения 0.

 

## <a name="output-quality"></a>Качество вывода

Можно указать качество вывода DSP для реобразца звука, вызвав [**ивмресамплерпропс:: сесалффилтерленгс**](/windows/desktop/api/wmcodecdsp/nf-wmcodecdsp-iwmresamplerprops-sethalffilterlength) или задав свойство [**мфпкэй \_ вмресамп \_ филтеркуалити**](mfpkey-wmresamp-filterquality.md) . Если не указать качество вывода, DSP по умолчанию использует значение качества, равное 30.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|--------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Только для \[ классических приложений Windows Vista\]<br/>                                             |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2008\]<br/>                                       |
| Header<br/>                   | <dl> <dt>Вмкодекдсп. h</dt> </dl>    |
| DLL<br/>                      | <dl> <dt>Resampledmo.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

[Обработчики цифровых сигналов](windowsmediadigitalsignalprocessors.md)
