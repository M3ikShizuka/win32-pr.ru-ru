---
description: Описывает, как добавить расширения модулей данных при использовании кодировщиков Windows Media.
ms.assetid: fdadcb85-c564-4d05-a4d7-af53a0107455
title: Использование расширений модулей данных (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 21c16053ee078f5adcd48767f53d9e6e1c0eeb02
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662683"
---
# <a name="using-data-unit-extensions-microsoft-media-foundation"></a>Использование расширений модулей данных (Microsoft Media Foundation)

Аудиокодеки и видеокодеки Windows Media предназначены для работы с контейнером ASF. ASF — это структурированный формат, используемый для файлов Windows Media Audio (WMA) и файлов Windows Media Video (WMV). Это расширяемый формат, предназначенный для потоковой передачи данных. Одной из необычных характеристик структуры ASF является возможность присоединения метаданных к отдельным образцам и встраивание этих данных с помощью примеров в потоке битов. Элемент метаданных, хранимых таким образом, называется *расширением единицы* данных или *примером расширения*.

Расширение единицы данных может содержать сведения, необходимые кодировщику, декодеру или приложению проигрывателя. Большинство типов модулей обработки данных, реализованных в серии кодеков Windows Media 9, содержат данные, предназначенные для приложения, которое декодирует и готовит к просмотру мультимедиа. Например, можно сохранить коды времени SMPTE из исходных данных, добавив их в качестве расширений модулей данных. Однако для следующих функций кодека требуется расширение модулей данных:

-   [Принудительная вставка ключевых кадров](forcedkeyframeinsertion.md)
-   [Кодирование видео с чередованием](interlacedvideoencoding.md)
-   Сложность использования расширений модулей данных при доступе к кодека напрямую — это механизм, с помощью которого объект получает данные расширения. Это достигается объектами пакета SDK формата Windows Media с помощью объектов буфера, предназначенных для поддержки этой функции. Для активации функций кодека, требующих расширения модулей обработки данных, рекомендуется использовать пакет SDK Windows Media Format. Однако эти функции можно настроить для работы с автономными объектами кодека.

## <a name="passing-extended-samples-to-the-codec-objects"></a>Передача расширенных образцов объектам кодека

Пакет SDK для формата Windows Media использует объекты буфера, которые предоставляют интерфейсы [**инссбуффер**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer) . Последний интерфейс — [**INSSBuffer4**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer4). Чтобы передать примеры объекту кодека с расширениями модулей данных, необходимо использовать объект buffer, реализующий интерфейс [**имедиабуффер**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediabuffer) или [**Имфмедиабуффер**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediabuffer) и интерфейс **инссбуффер** . Для этого можно использовать объекты буфера, созданные с помощью пакета SDK Windows Media Format или Microsoft Media Foundation. также можно создать собственный класс буфера, соответствующий требованиям. Чтобы создать собственный класс буфера, необходимо согласовать прототипы методов для интерфейсов **инссбуффер** . Эти определения интерфейсов можно найти в файле заголовка вмсбуффер. h, который устанавливается вместе с пакетом SDK для формата Windows Media.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Кодеки Windows Media](windows-media-codecs.md)
</dt> </dl>

 

 
