---
description: описывает, как добавить расширения модулей данных при использовании Windowsных кодировщиков мультимедиа.
ms.assetid: fdadcb85-c564-4d05-a4d7-af53a0107455
title: Использование расширений модулей данных (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4680626f06c93e63f293699360d98ac995eedc3b3351fe617c182dbc176165ed
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118972723"
---
# <a name="using-data-unit-extensions-microsoft-media-foundation"></a>Использование расширений модулей данных (Microsoft Media Foundation)

микрокодеки Windows Media Audio и Video предназначены для работы с контейнером ASF. ASF — это структурированный формат, используемый для файлов Windows media Audio (WMA) и Windows файлов мультимедиа видео (WMV). Это расширяемый формат, предназначенный для потоковой передачи данных. Одной из необычных характеристик структуры ASF является возможность присоединения метаданных к отдельным образцам и встраивание этих данных с помощью примеров в потоке битов. Элемент метаданных, хранимых таким образом, называется *расширением единицы* данных или *примером расширения*.

Расширение единицы данных может содержать сведения, необходимые кодировщику, декодеру или приложению проигрывателя. большинство типов модулей обработки данных, реализованных в Windows Media 9 серии кодеков, содержат данные, предназначенные для приложения, которое декодирует и готовит к просмотру мультимедиа. Например, можно сохранить коды времени SMPTE из исходных данных, добавив их в качестве расширений модулей данных. Однако для следующих функций кодека требуется расширение модулей данных:

-   [Принудительная вставка ключевых кадров](forcedkeyframeinsertion.md)
-   [Кодирование видео с чередованием](interlacedvideoencoding.md)
-   Сложность использования расширений модулей данных при доступе к кодека напрямую — это механизм, с помощью которого объект получает данные расширения. это достигается за счет объектов пакета SDK для Windows Media Format с помощью объектов buffer, предназначенных для поддержки этой функции. для активации функций кодека, требующих расширения модулей данных, рекомендуется использовать пакет SDK для Windows Media Format, но можно сделать эти функции работать с автономными объектами кодека.

## <a name="passing-extended-samples-to-the-codec-objects"></a>Передача расширенных образцов объектам кодека

пакет SDK для Windows Media Format использует объекты буфера, которые предоставляют интерфейсы [**инссбуффер**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer) . Последний интерфейс — [**INSSBuffer4**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer4). Чтобы передать примеры объекту кодека с расширениями модулей данных, необходимо использовать объект buffer, реализующий интерфейс [**имедиабуффер**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediabuffer) или [**Имфмедиабуффер**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediabuffer) и интерфейс **инссбуффер** . для этого можно использовать объекты буфера, созданные с помощью пакета SDK Windows Media Format или Microsoft Media Foundation. также можно создать собственный класс буфера, соответствующий требованиям. Чтобы создать собственный класс буфера, необходимо согласовать прототипы методов для интерфейсов **инссбуффер** . эти определения интерфейсов можно найти в файле заголовка вмсбуффер. h, который устанавливается вместе с пакетом SDK для Windows Media Format.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Кодеки Windows Media](windows-media-codecs.md)
</dt> </dl>

 

 
