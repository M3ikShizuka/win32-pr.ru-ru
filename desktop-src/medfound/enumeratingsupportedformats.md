---
description: Настройка кодека дмос
ms.assetid: 431b33f1-ceb0-4f1b-a9f2-72e88b63f973
title: Настройка кодека дмос
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 564c0e6c566d9f583a495238f3ea6f0716d7adde
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104496815"
---
# <a name="configuring-codec-dmos"></a>Настройка кодека дмос

В этом разделе описывается процесс настройки кодека дмос. Каждый кодек имеет определенные процедуры, но сведения, общие для всех, описаны здесь.

## <a name="configuring-dmo-inputs-and-outputs"></a>Настройка входных и выходных данных DMO

Каждый DMO поддерживает определенные типы входных и выходных данных. Поддерживаемые типы входных и выходных данных можно получить, вызвав [**имедиаобжект:: жетинпуттипе**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputtype) для входных данных и [**Имедиаобжект:: жетаутпуттипе**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getoutputtype) для выходов. Можно перечислить Поддерживаемые форматы, добавив повторяющиеся вызовы в любой из методов, увеличивая индекс типа с каждым вызовом. Если индекс превышает тип конечного поддерживаемого типа, вызов возвращает DMO, а \_ \_ не \_ больше \_ элементов.

Для видеокодеков перечисляются только один тип выходных данных или тип входных данных для данного подтипа носителя. Для аудиокодеков поддерживается перечисление каждого отдельного поддерживаемого типа. Дополнительные сведения о поддерживаемых типах для отдельных кодеков см. в разделе [Работа с аудио](workingwithaudio.md) и [Работа с видео](workingwithvideo.md).

После настройки типов мультимедиа для входных и выходных потоков задайте их, вызвав [**имедиаобжект:: сетинпуттипе**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setinputtype) и [**Имедиаобжект:: сетаутпуттипе**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setoutputtype) соответственно. Оба этих метода возвращают **DMO \_ E \_ Type \_ не \_ принимается** , если указанный тип является недопустимым.

## <a name="configuring-the-codec-dmos-for-encoding"></a>Настройка кодека дмос для кодирования

Все видеокодеки Windows Media Audio и Video поддерживают различные функции кодирования. Эти функции обычно настраиваются путем установки свойств в DMO с помощью методов интерфейса **ипропертибаг** . Некоторые свойства настраиваются с помощью специализированных интерфейсов кодека. Эти интерфейсы перечислены для каждого кодека в разделе [объекты кодека](codecobjects.md).

Ниже приведен общий порядок операций по настройке кодировки DMO.

1.  Настройте необходимые функции кодека с помощью методов **ипропертибаг**.
2.  При необходимости используйте интерфейсы кодека DMO для настройки дополнительных функций.
3.  Настройте типы входных и выходных данных. Порядок, в котором должны настраиваться типы, зависит от отдельных кодеков. Дополнительные сведения см. в разделе [Работа с аудио](workingwithaudio.md) и [Работа с видео](workingwithvideo.md).

## <a name="configuring-the-codec-dmos-for-decoding"></a>Настройка кодека дмос для декодирования

Декодирование проще, чем кодирование, так как поддерживается меньше возможностей декодера.

Ниже приведен общий порядок операций для настройки декодирования DMO.

1.  Настройте необходимые функции декодера с помощью методов **ипропертибаг**.
2.  Установите тип входных данных в тип, используемый для выходных данных кодировщика.
3.  Настройте тип выходных данных. Поддерживаемые типы вывода различаются для различных входных данных.

> [!Note]  
> Важно использовать тот же тип носителя для ввода декодера, что использовалось для выходных данных кодировщика. Это обусловлено тем, что видеокодеки Windows Media Audio и Video используют форматы мультимедиа с дополнительными данными. Эти данные добавляются к структуре, на которую указывает элемент **пбформат** структуры [**\_ \_ типа мультимедиа DMO**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) (обычно [**видеоинфохеадер**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader) или [**вавеформатекс**](/previous-versions/dd757713(v=vs.85))). Для некоторых типов дополнительные данные являются частью типа выходных данных кодировщика перечисления. Другие типы потребует добавления этих данных вручную. Без данных расширенного формата декодировать сжатое содержимое нельзя.

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Работа с кодеками дмос](workingwithcodecdmos.md)
</dt> </dl>

 

 
