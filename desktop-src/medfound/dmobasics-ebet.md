---
description: DMO Основы
ms.assetid: eaf453d2-69f8-432a-8a58-1ed70778f182
title: DMO Основные сведения (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f24c7fb988d5e5225f292585a5562cce22e67c007175fa7ddc4cd86e40ec1d18
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118742363"
---
# <a name="dmo-basics-microsoft-media-foundation"></a>DMO Основные сведения (Microsoft Media Foundation)

в этом разделе представлен краткий обзор дмос, связанных с кодеками мультимедиа Windows. Дополнительные сведения о дмос см. в разделе [DirectX Media Objects](../directshow/directx-media-objects.md).

DMO — это COM-объект, который преобразует данные. В него передаются данные и возвращаются преобразованные данные. в случае кодировщика кодека DMO вы передаете несжатые данные мультимедиа, и DMO доставляет сжатые данные мультимедиа. Основное преимущество использования дмос заключается в том, что все они реализуют один и тот же базовый интерфейс, [**имедиаобжект**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediaobject), который упрощает работу с ними, поскольку можно использовать один и тот же объект независимо от типа выполняемого преобразования.

Поскольку существуют переменные, участвующие в любом преобразовании данных, преобразование аудио и видео должно учитывать широкий спектр возможных конфигураций носителей. видеокодеки Windows Media Audio и Video также поддерживают ряд специальных функций, которые необходимо настроить с помощью DMO.

Как правило, сведения о переменных, необходимые кодеку дмос для сжатия и распаковки цифровых носителей, передаются одним из трех способов:

-   задайте тип входных данных DMO, чтобы передать характеристики несжатого носителя, передаваемого кодировщику DMO, и характеристики сжатого носителя, который был передан в DMO декодера.
-   задайте тип выходных данных DMO, чтобы передать характеристики сжатого носителя, поставляемого DMO кодировщика, и характеристики несжатого носителя, которые доставляются DMO декодера.
-   С помощью методов интерфейса **ипропертибаг** настройте другие параметры, которые поддерживают различные функции кодека дмос как свойства. **Ипропертибаг** — это стандартный COM-интерфейс, поддерживаемый всеми кодеками дмос.

Кроме того, некоторые функции кодека управляются с помощью других интерфейсов, характерных для кодека дмос. Эти интерфейсы перечислены для каждого кодека в разделе [объекты кодека](codecobjects.md).

Типы входных и выходных данных относятся только к входным и выходным потокам. Каждый поток представляет отдельное представление содержимого. например, Windows кодировщик видео мультимедиа DMO имеет один входной поток и два выходных потока. Входной поток принимает несжатые видео образцы. Первый из двух выходных потоков предоставляет сжатые образцы. другой предоставляет несжатые образцы. Отдельные выборки в одном потоке вывода представляют то же содержимое, что и соответствующие образцы в другом потоке, но каждый поток доставляет эти примеры в другом формате.

Каждый поток (входящий или исходящий) поддерживает один или несколько типов носителей. тип мультимедиа, или формат, описывается структурой [**\_ \_ типа DMO мультимедиа**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) . можно запросить DMO для типов, поддерживаемых выходным потоком, вызвав [**имедиаобжект:: жетаутпуттипе**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getoutputtype). Этот метод возвращает допустимую (хотя в некоторых случаях частично неполное) тип вывода для этого потока. Вы можете перечислить Поддерживаемые типы носителей для выходного потока, сделав повторные вызовы к **жетаутпуттипе**, увеличивая параметр типа при каждом вызове. если передаваемый индекс типа выходит за пределы допустимого диапазона, метод возвращает **DMO \_ е больше \_ \_ \_ элементов**. Форматы входных данных можно перечислить аналогичным образом с помощью метода [**имедиаобжект:: жетинпуттипе**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputtype) .

типы, перечисленные DMO, являются только "предпочтительными" типами, однако могут поддерживаться другие типы. Тип выходных данных можно проверить путем вызова [**имедиаобжект:: сетаутпуттипе**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setoutputtype). Для проверки входного типа используйте [**имедиаобжект:: сетинпуттипе**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setinputtype) . оба метода возвращают **DMO \_ \_ тип E \_ не \_ принимается** , если переданная вами структура [**\_ \_ типа мультимедиа DMO**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) недопустима. Некоторые дмос перед перечислением входных типов должны задать тип вывода. видеокодек Windows Media Audio и Video дмос все они имеют входные и выходные данные, которые имеют зависимость от проверки. То есть заданный тип выходных данных будет задавать условия проверки для типа входных данных. Существуют также некоторые свойства, которые при установке изменяют допустимые типы входных и выходных данных. по этой причине необходимо задать все необходимые свойства в DMO перед перечислением типов.

если для DMO заданы типы выходных данных и входных данных, можно начать обработку образцов. Каждый входной образец передается в кодек с помощью вызова [**имедиаобжект::P роцессинпут**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processinput), а каждый выходной пример доставляется кодеком при вызове [**Имедиаобжект::P роцессаутпут**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processoutput).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Работа с кодеками дмос](workingwithcodecdmos.md)
</dt> </dl>

 

 
