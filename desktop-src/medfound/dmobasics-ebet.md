---
description: Основы DMO
ms.assetid: eaf453d2-69f8-432a-8a58-1ed70778f182
title: Основы DMO (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 44b1aca2fcd7e70cf78e2e95135aee73c454b910
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104262791"
---
# <a name="dmo-basics-microsoft-media-foundation"></a>Основы DMO (Microsoft Media Foundation)

Этот раздел содержит краткий обзор дмос, связанных с кодеками Windows Media. Дополнительные сведения о дмос см. в разделе [DirectX Media Objects](../directshow/directx-media-objects.md).

DMO — это COM-объект, который преобразует данные. В него передаются данные и возвращаются преобразованные данные. В случае с кодировщиком кодеков DMO вы задаете несжатые данные мультимедиа, и DMO предоставляет сжатые данные мультимедиа. Основное преимущество использования дмос заключается в том, что все они реализуют один и тот же базовый интерфейс, [**имедиаобжект**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediaobject), который упрощает работу с ними, поскольку можно использовать один и тот же объект независимо от типа выполняемого преобразования.

Поскольку существуют переменные, участвующие в любом преобразовании данных, преобразование аудио и видео должно учитывать широкий спектр возможных конфигураций носителей. Видеокодеки Windows Media Audio и Video также поддерживают ряд специальных функций, которые необходимо настроить с помощью DMO.

Как правило, сведения о переменных, необходимые кодеку дмос для сжатия и распаковки цифровых носителей, передаются одним из трех способов:

-   Задайте тип входных данных для DMO, чтобы передать характеристики несжатого носителя, передаваемого кодировщику DMO, и характеристики сжатого носителя, передаваемого декодеру DMO.
-   Задайте тип выходных данных для DMO, чтобы передать характеристики сжатого носителя, который доставляется кодировщиком DMO, и характеристики несжатого носителя, которые доставляются декодером DMO.
-   С помощью методов интерфейса **ипропертибаг** настройте другие параметры, которые поддерживают различные функции кодека дмос как свойства. **Ипропертибаг** — это стандартный COM-интерфейс, поддерживаемый всеми кодеками дмос.

Кроме того, некоторые функции кодека управляются с помощью других интерфейсов, характерных для кодека дмос. Эти интерфейсы перечислены для каждого кодека в разделе [объекты кодека](codecobjects.md).

Типы входных и выходных данных относятся только к входным и выходным потокам. Каждый поток представляет отдельное представление содержимого. Например, у DMO кодировщика видео Windows Media есть один входной поток и два выходных потока. Входной поток принимает несжатые видео образцы. Первый из двух выходных потоков предоставляет сжатые образцы. другой предоставляет несжатые образцы. Отдельные выборки в одном потоке вывода представляют то же содержимое, что и соответствующие образцы в другом потоке, но каждый поток доставляет эти примеры в другом формате.

Каждый поток (входящий или исходящий) поддерживает один или несколько типов носителей. Тип мультимедиа (или формат) описывается структурой [**\_ \_ типа мультимедиа DMO**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) . Можно выполнить запрос к DMO для типов, поддерживаемых выходным потоком, вызвав [**имедиаобжект:: жетаутпуттипе**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getoutputtype). Этот метод возвращает допустимую (хотя в некоторых случаях частично неполное) тип вывода для этого потока. Вы можете перечислить Поддерживаемые типы носителей для выходного потока, сделав повторные вызовы к **жетаутпуттипе**, увеличивая параметр типа при каждом вызове. Если передаваемый индекс типа выходит за пределы допустимого диапазона, метод возвращает **DMO, \_ а \_ не \_ больше \_ элементов**. Форматы входных данных можно перечислить аналогичным образом с помощью метода [**имедиаобжект:: жетинпуттипе**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputtype) .

Типы, перечисленные DMO, — это только "предпочтительные" типы, однако могут поддерживаться другие типы. Тип выходных данных можно проверить путем вызова [**имедиаобжект:: сетаутпуттипе**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setoutputtype). Для проверки входного типа используйте [**имедиаобжект:: сетинпуттипе**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setinputtype) . Оба метода возвращают **\_ тип DMO \_ E \_ не \_ принимается** , если переданная структура [**\_ \_ типа мультимедиа DMO**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) является недопустимой. Некоторые дмос перед перечислением входных типов должны задать тип вывода. Звуковые и видеокодеки Windows Media дмос все имеют входные и выходные данные, которые имеют зависимость от проверки. То есть заданный тип выходных данных будет задавать условия проверки для типа входных данных. Существуют также некоторые свойства, которые при установке изменяют допустимые типы входных и выходных данных. По этой причине перед перечислением типов необходимо задать все необходимые свойства в DMO.

Если для DMO заданы типы выходных данных и входных данных, можно начать обработку образцов. Каждый входной образец передается в кодек с помощью вызова [**имедиаобжект::P роцессинпут**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processinput), а каждый выходной пример доставляется кодеком при вызове [**Имедиаобжект::P роцессаутпут**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processoutput).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Работа с кодеками дмос](workingwithcodecdmos.md)
</dt> </dl>

 

 
