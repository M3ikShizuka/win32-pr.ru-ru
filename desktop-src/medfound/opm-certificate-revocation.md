---
description: .
ms.assetid: 21faf809-1335-4d93-be06-628c5a05a4c8
title: Отзыв сертификата ОПМ
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9e4b20dc00b0bd23644ef9dca22558a304ca9438
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104543879"
---
# <a name="opm-certificate-revocation"></a>Отзыв сертификата ОПМ

Сертификат диспетчера выходной защиты (ОПМ) может быть отозван корпорацией Майкрософт. Список отозванных сертификатов хранится в глобальном списке отзыва (GRL). GRL имеет следующий формат:



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Section</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Header</td>
<td>Структура <a href="grl-header.md"><strong>GRL_HEADER</strong></a> .</td>
</tr>
<tr class="even">
<td>Основные сведения</td>
<td>Содержит следующие списки отзыва:
<ul>
<li>Двоичные вызовы ядра</li>
<li>Двоичные отзыва пользовательского режима</li>
<li>Отзыв сертификатов</li>
<li>Доверенные корни (зарезервированные)</li>
</ul>
Список доверенных корневых каталогов в настоящее время не используется и зарезервирован для использования в будущем.</td>
</tr>
<tr class="odd">
<td>Расширяемые записи</td>
<td>Содержит сведения, используемые другими компонентами. Этот раздел не относится к ОПМ.</td>
</tr>
<tr class="even">
<td>Обновления</td>
<td>Содержит идентификаторы GUID, определяющие идентификаторы Центр обновления Windows. Этот раздел содержит идентификаторы для следующих списков.
<ul>
<li>Двоичные вызовы ядра</li>
<li>Двоичные отзыва пользовательского режима</li>
<li>Отзыв сертификатов</li>
</ul>
Приложение может использовать эти идентификаторы для запроса обновленной версии отозванного двоичного файла, если он доступен.</td>
</tr>
<tr class="odd">
<td>Подпись: раздел Core</td>
<td>Подписывает разделы заголовка и ядра.</td>
</tr>
<tr class="even">
<td>Сигнатура: расширяемый раздел</td>
<td>Подписывает заголовки и расширяемые разделы.</td>
</tr>
</tbody>
</table>



 

Заголовок GRL — это структура [**\_ заголовка GRL**](grl-header.md) . Элемент **двсекуенценумбер** структуры содержит номер версии GRL. Это число увеличивается при каждом обновлении GRL и последующей версии, размещенной на компьютере пользователя.

Отозванные сертификаты ОПМ перечислены в списке отзыва сертификатов в разделе Основные. Каждая основная запись в GRL — это 20-байтовый массив, который содержит хэш SHA-1 открытого ключа отозванного сертификата.

Разделы подписей содержат подписи, которые можно использовать для проверки того, что GRL не был изменен. Каждая из разделов подписей [**содержит \_ MF**](mf-signature.md) . Первая сигнатура подписывает заголовок и основной раздел. Вторая сигнатура подписывает заголовок и расширяемый раздел; Эта сигнатура не относится к ОПМ.

Чтобы убедиться, что сам GRL не был изменен, проверьте сигнатуру следующим образом:

1.  Найдите начало структуры [**\_ сигнатуры MF**](mf-signature.md) . Расположение структуры **\_ сигнатуры MF** указывается в элементе **кбсигнатурекореоффсет** структуры [**\_ заголовка GRL**](grl-header.md) . Расположение указывается в виде смещения в байтах от начала GRL.
2.  Проанализируйте [**структуру \_ сигнатуры MF**](mf-signature.md) как \# подпись PKCS 7 с цепочкой сертификатов.
3.  Проверьте цепочку сертификатов до доверенного корня.
4.  Убедитесь, что конечный сертификат имеет следующий идентификатор объекта в EKU: "1.3.6.1.4.1.311.10.5.4".
5.  Вычислите хэш байтов, содержащих заголовок, и основные разделы GRL.
6.  Убедитесь, что хэш совпадает с подписью в конечном сертификате.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Диспетчер выходной защиты](output-protection-manager.md)
</dt> <dt>

[**\_заголовок GRL**](grl-header.md)
</dt> <dt>

[**\_подпись MF**](mf-signature.md)
</dt> </dl>

 

 



