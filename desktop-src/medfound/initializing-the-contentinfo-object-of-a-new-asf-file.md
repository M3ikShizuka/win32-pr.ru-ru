---
description: Инициализация объекта Контентинфо нового ASF-файла
ms.assetid: a4f6c90e-1b38-4c70-8bc5-e2e16af3d87a
title: Инициализация объекта Контентинфо нового ASF-файла
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bf0180eb4e9369447355a9a4cd607f630bfb3664108ad77d6d008c281f92fdf1
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120114254"
---
# <a name="initializing-the-contentinfo-object-of-a-new-asf-file"></a>Инициализация объекта Контентинфо нового ASF-файла

После создания пустого объекта Контентинфо путем вызова функции [**мфкреатеасфконтентинфо**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfcontentinfo) приложение должно вызвать [**Имфасфконтентинфо:: сетпрофиле**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile) , чтобы предоставить профиль кодирования. Сведения о создании профиля см. в разделе [Создание профиля ASF](creating-an-asf-profile.md).

Прежде чем можно будет считать сведения из профиля, метод **сетпрофиле** должен проверить указанный объект профиля, проверив идентификаторы потоков или типы носителей. Если профиль проходит проверку, создаются различные объекты заголовка, такие как объект свойств файла, объект свойств потоковой передачи, объект свойств потока и объект взаимного исключения.

**Сетпрофиле** выполняет вычисление и задает Рекомендуемые значения для некоторых свойств, например предварительную отгрузку. Если это значение еще не задано, рекомендуемая величина предварительной версии в миллисекундах зависит от максимального окна буфера в сегменте утечки, указанного для потоков в профиле. Аналогичным образом также устанавливаются минимальный и максимальный размеры пакетов данных. Рекомендуемые значения могут переопределять размеры пакетов, заданные в профиле с помощью атрибутов.

Поскольку файл находится в процессе создания, он классифицируется как тип вещания, который отмечается полем Flags объекта Properties (свойства файла). Для некоторых неизвестных значений, таких как количество пакетов данных, длительность воспроизведения и длительность отправки, устанавливается нулевое значение. Эти значения представлены атрибутами **MF \_ PD \_ ASF \_ xxx** и должны быть обновлены приложением после завершения создания файла.

Указанный объект профиля заменяет существующий профиль, связанный с объектом Контентинфо, удаляет объекты заголовков, на которые имеются ссылки, и сбрасывает глобальные свойства файла, такие как предварительная проба и размер пакета данных.

Метод **сетпрофиле** также создает объект данных, представляющий объект данных ASF. При повторном использовании объекта Контентинфо, который содержит сведения о каких-либо пакетах данных, происходит сбой **сетпрофиле** и возвращается \_ сообщение MF E, \_ уже \_ инициализированное с указанием того, что она уже связана с существующим объектом данных ASF. По умолчанию для нового объекта Контентинфо число пакетов данных устанавливается равным нулю, а размер объекта данных устанавливается равным 50 байт. При использовании мультиплексора для создания пакетов данных мультиплексор обновляет объект Контентинфо для отражения новых значений, таких как число пакетов данных. Дополнительные сведения о создании пакетов данных см. в разделе [Создание новых пакетов данных ASF](generating-new-asf-data-packets.md).

После добавления всех объектов заголовка в окончательный объект заголовка ASF можно получить общий размер заголовка, вызвав [**имфасфконтентинфо:: жесеадерсизе**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getheadersize). Этот размер включает исходный размер объекта данных.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Задание свойств в объекте Контентинфо](setting-properties-in-the-contentinfo-object.md)
</dt> <dt>

[Запись объекта заголовка ASF для нового файла](writing-an-asf-header-object-for-a-new-file.md)
</dt> </dl>

 

 



