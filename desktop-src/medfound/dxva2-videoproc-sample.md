---
description: Показывает, как использовать обработку видео ДКСВА.
ms.assetid: 1465bd41-94f9-4e19-8236-00e7a2d6f54a
title: Пример DXVA2_VideoProc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8497a241baf07b76148a5bc2e7ddb4dd5e878e86
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104342495"
---
# <a name="dxva2_videoproc-sample"></a>\_Пример ВИДЕОПРОК DXVA2

Показывает, как использовать [обработку видео дксва](dxva-video-processing.md).

Этот пример программно создает видео с первичным потоком и подпотоком. Основной поток отображает SMPTE цветовые полосы, а подпоток — полупрозрачный прямоугольник. Затем видео обрабатывается и отображается с помощью обработчика видео ДКСВА. Пользователь может изменять плоские значения альфа-канала, исходные и конечные прямоугольники, настройки цветов и цветового пространства.

![снимок экрана примера DXVA2 \- видеопрок](images/dxva2-videoproc.png)

## <a name="apis-demonstrated"></a>Продемонстрированные API

В этом примере демонстрируются следующие интерфейсы ДКСВА:

-   [**идиректксвидеопроцессорсервице**](/windows/desktop/api/dxva2api/nn-dxva2api-idirectxvideoprocessorservice)
-   [**идиректксвидеопроцессор**](/windows/desktop/api/dxva2api/nn-dxva2api-idirectxvideoprocessor)

## <a name="usage"></a>Использование

Пример DXVA2 \_ видеопрок создает приложение Windows.

Параметры командной строки:



| Параметр | Описание                                                                          |
|--------|--------------------------------------------------------------------------------------|
| -чч    | Заставляет приложение использовать аппаратное устройство Direct3D и аппаратное устройство ДКСВА. |
| -HS    | Заставляет приложение использовать аппаратное устройство Direct3D и программное ДКСВА устройство. |
| -ss    | Заставляет приложение использовать программное устройство Direct3D и программное ДКСВА устройство. |



 

Команды клавиатуры:



| Ключ       | Описание                                             |
|-----------|---------------------------------------------------------|
| ALT+ВВОД | Переключение между оконным режимом и полноэкранным режимом.      |
| F1 — F8     | Введите один из режимов, показанных в следующей таблице.    |
| END       | Включение или отключение ведения журнала отладки для удаленных кадров. |
| HOME      | Сбросьте параметр в исходное значение.                 |



 

Каждая функция клавиш F1 по F8 переключается в режим, в котором клавиши со стрелками используются для корректировки конкретного параметра отрисовки. Кроме того, изменяется цвет подпотока.



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Ключ</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>F1</td>
<td>Настройте альфа-значения.<br/>
<ul>
<li>ВВЕРХ: Увеличьте плоскую альфа-составляющую обоих потоков.</li>
<li>ВНИЗ: уменьшение плоской альфа-составляющей обоих потоков.</li>
<li>RIGHT: увеличение пиксельного альфа-канала подпотока.</li>
<li>LEFT: уменьшение пиксельного альфа-канала подпотока.</li>
</ul>
Цвет подпотока: белый<br/></td>
</tr>
<tr class="even">
<td>F2</td>
<td>Настройте исходную область источника (масштаб) основного потока.<br/>
<ul>
<li>ВВЕРХ: увеличение по вертикали (увеличение).</li>
<li>ВНИЗ: уменьшить по вертикали (уменьшить).</li>
<li>СПРАВА: увеличение по горизонтали (увеличение).</li>
<li>LEFT: уменьшить по горизонтали (уменьшить масштаб).</li>
</ul>
Цвет подпотока: красный<br/></td>
</tr>
<tr class="odd">
<td>F3</td>
<td>Переместите исходную область источника первичного потока.<br/>
<ul>
<li>ВВЕРХ: переместить вверх.</li>
<li>ВНИЗ: вниз.</li>
<li>СПРАВА: переместить вправо.</li>
<li>СЛЕВА: переместить влево.</li>
</ul>
Цвет подпотока: желтый<br/></td>
</tr>
<tr class="even">
<td>F4</td>
<td>Настройте область назначения основного потока.<br/>
<ul>
<li>ВВЕРХ: увеличение по вертикали.</li>
<li>ВНИЗ: уменьшить по вертикали.</li>
<li>СПРАВА: увеличить по горизонтали.</li>
<li>LEFT: уменьшить по горизонтали.</li>
</ul>
Цвет подпотока: зеленый<br/></td>
</tr>
<tr class="odd">
<td>F5</td>
<td>Переместите область назначения основного потока.<br/>
<ul>
<li>ВВЕРХ: переместить вверх.</li>
<li>ВНИЗ: вниз.</li>
<li>СПРАВА: переместить вправо.</li>
<li>СЛЕВА: переместить влево.</li>
</ul>
Цвет подпотока: голубой<br/></td>
</tr>
<tr class="even">
<td>F6</td>
<td>Изменение цвета фона или цветового пространства.<br/>
<ul>
<li>ВВЕРХ, вниз: циклический перебор цветовых пространств.</li>
<li>СПРАВА, слева: перебор цветов фона.</li>
</ul>
Цвет подпотока: синий<br/></td>
</tr>
<tr class="odd">
<td>F7</td>
<td>Настройка яркости и контрастности.<br/>
<ul>
<li>ВВЕРХ: увеличение яркости.</li>
<li>ВНИЗ: уменьшение яркости.</li>
<li>RIGHT: повышение контрастности.</li>
<li>LEFT: уменьшить контрастность.</li>
</ul>
Цвет подпотока: пурпурный<br/></td>
</tr>
<tr class="even">
<td>F8</td>
<td>Настройка оттенка и насыщенности.<br/>
<ul>
<li>ВВЕРХ: увеличить оттенок.</li>
<li>ВНИЗ: уменьшить оттенок.</li>
<li>RIGHT: увеличение насыщенности.</li>
<li>LEFT: уменьшение насыщенности.</li>
</ul>
Цвет подпотока: черный<br/></td>
</tr>
</tbody>
</table>



 

В каждом режиме нажатие клавиши HOME приводит к сбросу параметров для этого режима до исходных значений.

## <a name="requirements"></a>Требования



| Продукт                                                        | Version   |
|----------------------------------------------------------------|-----------|
| [Windows SDK](https://msdn.microsoft.com/windowsvista/bb980924.aspx) | Windows 7 |



 

## <a name="downloading-the-sample"></a>Загрузка образца

Этот пример доступен в [репозитории GitHub с классическими примерами Windows](https://github.com/Microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/multimedia/mediafoundation/evrpresenter).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Ускорение видео DirectX 2,0](directx-video-acceleration-2-0.md)
</dt> <dt>

[Обработка видео ДКСВА](dxva-video-processing.md)
</dt> <dt>

[Примеры пакетов SDK Media Foundation](media-foundation-sdk-samples.md)
</dt> </dl>

 

 




