---
description: В этом разделе представлен обзор API-интерфейсов кодирования файлов, предоставляемых в Microsoft Media Foundation.
ms.assetid: 69dbef63-e272-4ad2-8d04-ae9366f79b33
title: Общие сведения о кодировке в Media Foundation
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 81882bd6da43f4040614347b662d988844c7b7a6
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "104554616"
---
# <a name="overview-of-encoding-in-media-foundation"></a>Общие сведения о кодировке в Media Foundation

В этом разделе представлен обзор API-интерфейсов кодирования файлов, предоставляемых в Microsoft Media Foundation.

## <a name="terminology"></a>Терминология

*Кодирование* — это общий термин, охватывающий несколько различных процессов:

1.  Кодирование аудио-или видеопотока в сжатые форматы. Например, кодирование видео-потока в H. 264 Video.
2.  Мультиплексирование ("мультиплексированием") одного или нескольких потоков в однобайтовый поток. Как правило, входящие потоки кодируются первыми. Этот шаг может содержать паккетизинг закодированных потоков.
3.  Запись мультиплексированного потока байтов в файл, например в файл формата MP4 или Advanced Systems (ASF). Кроме того, мультиплексированный поток может быть отправлен по сети.

На следующей схеме показаны три процесса:

![Схема, демонстрирующая процессы кодирования и мультиплексирования](images/encoding03.png)

К вариантам этого процесса относятся Перекодировка и ремуксинг:

-   *Перекодирование* означает декодирование существующего файла, повторное кодирование потоков и повторное мультиплексирование закодированных потоков. Перекодирование может быть выполнено для преобразования файла из одного типа кодирования в другой. Например, для преобразования видео H. 264 в Windows Media Video (WMV). Это также можно сделать для изменения скорости закодированных битов; Размер кадра видео; Частота кадров; или другие параметры форматирования.
-   *Ремультиплексирование* или *ремуксинг* означает демультиплексирование файла и повторное мультиплексирование потоков без шага декодирования/кодирования. Это может быть сделано для изменения способа мультиплексирования аудио-и видеосигналов, удаления потока или объединения потоков из двух разных исходных файлов.
-   Преобразование — это особый случай перекодирования *, при котором* битовая частота изменяется без изменения типа сжатия. Например, вы можете преобразовать файл высокой разрядной скорости в более низкую разрядную скорость. Как правило, при синхронизации мультимедийного содержимого с компьютера на портативное устройство используется типичный сценарий. Если портативное устройство не поддерживает высокую скорость передачи, перед копированием на переносное устройство может быть выполнено переоценка файла.

На следующей блоковой схеме показан процесс перекодирования.

![Схема, показывающая процесс перекодирования](images/encoding05.png)

На следующей блоковой схеме показан процесс ремуксинг.

![Схема, показывающая процесс ремуксинг](images/encoding06.png)

В этой документации иногда используется термин *кодирование* для включения как перекодирования, так и ремуксинг. Если важно различать их, в документации будет заметка разницы.

См. также: [Media Foundation: основные понятия](media-foundation-programming--essential-concepts.md).

## <a name="media-foundation-encoding-architecture"></a>Архитектура кодировки Media Foundation

На самом низком уровне архитектуры Media Foundation для кодирования используются следующие типы компонентов:

-   Для перекодировки [источники мультимедиа](media-sources.md) используются для демультиплексирования исходного файла.
-   Для процесса кодирования [Media Foundation преобразования](media-foundation-transforms.md) используются для декодирования и кодирования потоков.
-   Для процесса мультиплексирования [приемники мультимедиа](media-sinks.md) используются для мультиплексирования потоков и записи мультиплексированного потока в файл или в сеть.

На следующей схеме показан поток данных между этими компонентами в сценарии перекодирования:

![Диаграмма, на которой показаны компоненты, используемые при перекодировании](images/encoding04.png)

Большинство приложений не будут использовать эти компоненты напрямую. Вместо этого приложение будет использовать API более высокого уровня для управления этими компонентами нижнего уровня. Media Foundation предоставляет два интерфейса API более высокого уровня для кодирования:

<dl> <dt>

<span id="Media_Session"></span><span id="media_session"></span><span id="MEDIA_SESSION"></span>[Сеанс мультимедиа](media-session.md)
</dt> <dd>

Сеанс мультимедиа предоставляет сквозной конвейер, который перемещает данные из источника мультимедиа через кодеки, а затем в приемник мультимедиа. Приложение управляет сеансом мультимедиа и получает события состояния от сеанса мультимедиа.

</dd> <dt>

<span id="Source_Reader_plus_Sink_Writer"></span><span id="source_reader_plus_sink_writer"></span><span id="SOURCE_READER_PLUS_SINK_WRITER"></span>Модуль [чтения исходного кода](source-reader.md) и [модуль записи приемников](sink-writer.md)
</dt> <dd>

Модуль чтения исходного кода создает оболочку для источника мультимедиа и, при необходимости, декодеров. Он предоставляет приложению закодированные или декодированные образцы. Модуль записи приемника инкапсулирует приемник мультимедиа и, при необходимости, кодировщики. Приложение передает примеры в модуль записи приемника.

</dd> </dl>

На следующей схеме показан сеанс мультимедиа.

![Схема, показывающая, как сеанс мультимедиа выполняет перекодирование](images/encoding01.png)

[API](transcode-api.md) перекодировки (синее затенение) — это набор интерфейсов API, появившихся в Windows 7, которые упрощают настройку сеанса мультимедиа для кодирования.

На следующей схеме показан считыватель исходного кода и модуль записи приемника:

![Схема, демонстрирующая перекодирование с помощью модуля чтения исходного кода и модуля записи приемника](images/encoding02.png)

## <a name="related-topics"></a>См. также

<dl> <dt>

[Кодировка и разработка файлов](encoding-and-file-authoring.md)
</dt> <dt>

[Media Foundation программирование: основные понятия](media-foundation-programming--essential-concepts.md)
</dt> </dl>

 

 



