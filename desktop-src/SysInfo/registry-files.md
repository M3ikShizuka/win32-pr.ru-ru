---
description: Приложения могут сохранить часть реестра в файле, а затем загрузить содержимое файла обратно в реестр.
ms.assetid: a71a564d-934a-46e8-b555-989a6fa82337
title: Файлы реестра
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 44916618946f6541495186aa5843799c9b864fbc
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103998675"
---
# <a name="registry-files"></a>Файлы реестра

Приложения могут сохранить часть реестра в файле, а затем загрузить содержимое файла обратно в реестр. Файл реестра полезен при управлении большим объемом данных, при выполнении множества записей в реестре или при передаче данных, а также при повторной выгрузке. Приложения, которые архивируются и восстанавливают части реестра, скорее всего, используют файлы реестра.

Чтобы сохранить ключ и его подразделы и значения в файле реестра, приложение может вызвать функцию [**регсавекэй**](/windows/desktop/api/Winreg/nf-winreg-regsavekeya) или [**регсавекэйекс**](/windows/desktop/api/Winreg/nf-winreg-regsavekeyexa) .

[**Регсавекэй**](/windows/desktop/api/Winreg/nf-winreg-regsavekeya) и [**регсавекэйекс**](/windows/desktop/api/Winreg/nf-winreg-regsavekeyexa) создают файл с атрибутом Archive. Файл создается в текущем каталоге процесса для локального ключа и в каталоге% systemroot% \\ system32 удаленного ключа.

Файлы реестра имеют два следующих формата: Standard и latest. Стандартный формат — единственный формат, поддерживаемый Windows 2000. Кроме того, она поддерживается в более поздних версиях Windows для обеспечения обратной совместимости. [**Регсавекэй**](/windows/desktop/api/Winreg/nf-winreg-regsavekeya) создает файлы в стандартном формате.

Последний формат поддерживается начиная с Windows XP. Файлы реестра, созданные в этом формате, не могут быть загружены в Windows 2000. [**Регсавекэйекс**](/windows/desktop/api/Winreg/nf-winreg-regsavekeyexa) может сохранять файлы реестра в любом формате, указывая \_ стандартный формат REG \_ или \_ последний формат REG \_ . Таким образом, его можно использовать для преобразования файлов реестра, использующих стандартный формат, в последний формат.

Чтобы записать файл реестра обратно в реестр, приложение может использовать функции [**реглоадкэй**](/windows/desktop/api/Winreg/nf-winreg-regloadkeya), [**регреплацекэй**](/windows/desktop/api/Winreg/nf-winreg-regreplacekeya)или [**регресторекэй**](/windows/desktop/api/Winreg/nf-winreg-regrestorekeya) следующим образом.

-   **Реглоадкэй** загружает данные реестра из указанного файла в указанный подраздел в разделе **hKey \_ Users** или **hKey на \_ локальном \_** компьютере вызывающего приложения или на удаленном компьютере. Функция создает указанный подраздел, если он еще не существует. После вызова этой функции приложение может использовать функцию [**регунлоадкэй**](/windows/desktop/api/Winreg/nf-winreg-regunloadkeya) для восстановления предыдущего состояния реестра.
-   [**Регреплацекэй**](/windows/desktop/api/Winreg/nf-winreg-regreplacekeya) заменяет ключ и все его подразделы и значения в реестре данными, содержащимися в указанном файле. Новые данные вступают в силу при следующем запуске системы.
-   [**Регресторекэй**](/windows/desktop/api/Winreg/nf-winreg-regrestorekeya) загружает данные реестра из указанного файла в указанный ключ на компьютере вызывающего приложения или на удаленном компьютере. Эта функция заменяет подразделы и значения, расположенные ниже указанного ключа, на подразделы и значения, которые следуют за ключом верхнего уровня в файле.

Функция [**регконнектрегистри**](/windows/desktop/api/Winreg/nf-winreg-regconnectregistrya) устанавливает соединение с предопределенным маркером реестра на другом компьютере. Приложение использует эту функцию в основном для доступа к информации из удаленного реестра на других компьютерах в сетевой среде, что также можно сделать с помощью редактора реестра. Для резервного копирования реестра или регулирования сетевого доступа к нему может потребоваться доступ к удаленному реестру. Обратите внимание, что у вас должны быть соответствующие разрешения для доступа к удаленному реестру с помощью этой функции.

 

 



