---
description: '\_ \_ Ключ корневых классов hKey (HKCR) содержит сопоставления расширения имени файла и сведения о регистрации класса COM, такие как ProgID, CLSID и идентификаторов IID. В основном он предназначен для обеспечения совместимости с реестром в 16-разрядных Windows.'
ms.assetid: b404875f-11e1-48f2-98d2-0378a0646ed3
title: Ключ HKEY_CLASSES_ROOT
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1e7aebe0e59424eb5ff7584fe61c2c5089eb887b
ms.sourcegitcommit: 9eebab0ead09cecdbc24f5f84d56c8b6a7c22736
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2021
ms.locfileid: "124371883"
---
# <a name="hkey_classes_root-key"></a>\_ \_ Корневой ключ классов hKey

Ключ **\_ \_ корневых классов hKey** (**HKCR**) содержит сопоставления расширения имени файла и сведения о регистрации класса COM, такие как [ProgID](../com/-progid--key.md), [CLSID](../com/clsid-key-hklm.md)и [идентификаторов IID](../com/interface-key.md). В основном он предназначен для обеспечения совместимости с реестром в 16-разрядных Windows.

Сведения о регистрации класса и расширении имени файла хранятся как на **\_ локальном \_ компьютере hKey** , так и в разделе реестра **hKey для \_ текущих \_ пользователей** . Ключ **\_ \_ \\ \\ классов программного обеспечения для локального компьютера hKey** содержит параметры по умолчанию, которые могут применяться ко всем пользователям на локальном компьютере. Ключ **" \_ \_ классы текущего \\ пользовательского \\ программного обеспечения hKey** " содержит параметры, которые применяются только к интерактивному пользователю. **\_ \_ Корневой ключ классов hKey** предоставляет представление реестра, которое объединяет информацию из этих двух источников. **HKey \_ \_Корневой каталог классов** также предоставляет объединенное представление для приложений, предназначенных для предыдущих версий Windows.

Параметры, определяемые пользователем, имеют приоритет над параметрами по умолчанию. Например, параметр по умолчанию может указывать конкретное приложение для работы с .doc файлами. Но пользователь может переопределить этот параметр, указав другое приложение в реестре.

Функции реестра, такие как [**RegOpenKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regopenkeyexa) или [**процедура RegQueryValueEx**](/windows/desktop/api/Winreg/nf-winreg-regqueryvalueexa) , позволяют указать **\_ \_ корневой ключ классов hKey** . При вызове этих функций из процесса, выполняемого в интерактивной учетной записи пользователя, система объединяет параметры по умолчанию в **\_ \_ \\ \\ классах программного обеспечения локального компьютера в hKey** с параметрами интерактивного пользователя в **hKey \_ \_ \\ \\**. Дополнительные сведения о слиянии этих параметров см. в разделе [объединенное представление \_ \_ корня классов hKey](merged-view-of-hkey-classes-root.md).

Чтобы изменить параметры для интерактивного пользователя, храните изменения в разделе **hKey \_ Current \_ user \\ Software \\ Classes** , а не в **\_ \_ корневых классах hKey**.

Чтобы изменить параметры по умолчанию, сохраните изменения в **разделе \_ \_ \\ \\ классы программного обеспечения для локального компьютера hKey**. Если вы записываете ключи в ключ **в \_ \_ корневом каталоге hKey classes**, система сохраняет информацию в разделе **\_ \_ \\ \\ классы программного обеспечения локального компьютера hKey**. Если вы записываете значения в ключ **в \_ \_ корневой папке classes**, а ключ уже существует в разделе Классы **\_ текущего \_ пользовательского \\ программного обеспечения \\ hKey**, система сохранит там информацию, а не в разделе **\_ \_ \\ \\ классы программного обеспечения локального компьютера hKey**.

Процессы, выполняющиеся в контексте безопасности, отличном от текущего пользователя, не должны использовать **\_ \_ корневой ключ классов hKey** с функциями реестра. Вместо этого такие процессы могут явно открыть ключ **\_ \_ \\ \\ классов программного обеспечения для локального компьютера hKey** , чтобы получить доступ к параметрам по умолчанию. Чтобы открыть раздел реестра, который объединяет содержимое **\_ \_ \\ \\ классов программного обеспечения локального компьютера hKey** с параметрами указанного пользователя, эти процессы могут вызывать функцию [**регопенусерклассесрут**](/windows/desktop/api/Winreg/nf-winreg-regopenuserclassesroot) . Например, поток, [олицетворяющий](/windows/desktop/SecAuthZ/client-impersonation) клиент, может вызвать **регопенусерклассесрут** , если ему нужно получить объединенное представление для олицетворенного клиента. Обратите внимание, что **регопенусерклассесрут** завершается ошибкой, если профиль пользователя для указанного пользователя не был загружен. Система автоматически загружает профиль для интерактивного пользователя при входе в систему. Для других пользователей необходимо вызвать функцию [**LoadUserProfile**](/windows/win32/api/userenv/nf-userenv-loaduserprofilea) для явной загрузки профиля пользователя.

Если приложение запускается с правами администратора, а контроль учетных записей отключен, среда выполнения COM игнорирует конфигурацию COM для каждого пользователя и обращается только к конфигурации COM для каждого компьютера. Приложения, для которых требуются права администратора, должны регистрировать зависимые COM-объекты во время установки в хранилище конфигураций COM для каждого компьютера (**hKey, \_ \_ \\ \\ классы программного обеспечения для локального компьютера**). Дополнительные сведения см. в разделе [AC: UAC: конфигурация Per-User com](/previous-versions/bb756926(v=msdn.10)).

**Windows Server 2003 и Windows XP/2000:** Приложения могут регистрировать зависимые COM-объекты в хранилище конфигураций COM на уровне компьютера или на уровне пользователя (в **\_ \_ \\ \\ классе "программное обеспечение локального компьютера** " или в **hKey \_ текущих \_ пользовательских \\ \\ классов**).

## <a name="related-topics"></a>Связанные разделы

<dl> <dt>

[\_Корневой узел классов hKey \_ (Справочник по реестру набора ресурсов)](/previous-versions/windows/it-pro/windows-server-2003/cc739822(v=ws.10))
</dt> </dl>

 

 
