---
description: Хотя система использует время на основе времени в формате UTC, приложения обычно отображают местное время, которое представляет собой дату и время суток для часового пояса.
ms.assetid: a6570ec5-ac77-427a-86d9-32cbecc62e37
title: Местное время
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c60eb9ca53245a12eba1bc0096b522eae97de75a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103897762"
---
# <a name="local-time"></a>Местное время

Хотя система использует время на основе времени в формате UTC, приложения обычно отображают **местное время**, которое представляет собой дату и время суток для часового пояса. Таким образом, чтобы обеспечить правильные результаты, необходимо знать, должна ли функция получать время в формате UTC или местное время, а также возвращать ли функция время в формате UTC или местное время.

Текущие параметры часового пояса контролируют преобразование системы между временем в формате UTC и местным временем. Текущие параметры часового пояса можно получить с помощью функции [**жеттимезонеинформатион**](/windows/win32/api/timezoneapi/nf-timezoneapi-gettimezoneinformation) . Функция копирует результат в структуру [**\_ \_ сведений о часовом поясе**](/windows/win32/api/timezoneapi/ns-timezoneapi-time_zone_information) и возвращает значение, указывающее, находится ли местное время в данный момент в стандартном времени или на летнем времени (DST). Параметры часового пояса можно задать с помощью функции [**сеттимезонеинформатион**](/windows/win32/api/timezoneapi/nf-timezoneapi-settimezoneinformation) . Для поддержки границ перехода на летнее время, которое меняется с года на год, используйте функции [**жеттимезонеинформатионфореар**](/windows/win32/api/timezoneapi/nf-timezoneapi-gettimezoneinformationforyear), [**жетдинамиктимезонеинформатион**](/windows/win32/api/timezoneapi/nf-timezoneapi-getdynamictimezoneinformation) и [**сетдинамиктимезонеинформатион**](/windows/win32/api/timezoneapi/nf-timezoneapi-setdynamictimezoneinformation) .

Чтобы получить местное время, используйте функцию [**жетлокалтиме**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getlocaltime) . **Жетлокалтиме** преобразует системное время в местное время на основе текущих настроек часового пояса и копирует результат в структуру [**SYSTEMTIME**](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) . Системное время можно задать с помощью функции [**сетлокалтиме**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-setlocaltime) . **Сетлокалтиме** предполагает, что вы указали местное время и преобразуете его в формат UTC перед установкой системного времени.

При вызове [**сетлокалтиме**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-setlocaltime)система использует текущие сведения о часовом поясе, включая параметр перехода на летнее время, для выполнения преобразования. Обратите внимание, что система использует параметр перехода на летнее время в текущем времени, а не на новое время, которое вы задаете. Таким образом, чтобы обеспечить правильный результат, вызовите **сетлокалтиме** еще раз, после чего первый вызов обновит параметр перехода на летнее время.

Чтобы преобразовать время в формате UTC в местное время, используйте функцию [**системтиметотзспеЦификлокалтиме**](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetotzspecificlocaltime) . Чтобы преобразовать местное время в время на основе времени в формате UTC, используйте функцию [**тзспеЦификлокалтиметосистемтиме**](/windows/win32/api/timezoneapi/nf-timezoneapi-tzspecificlocaltimetosystemtime) .

 

 
