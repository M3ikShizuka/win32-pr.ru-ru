---
description: Значение реестра может хранить данные в различных форматах.
ms.assetid: 5fd828d6-4d62-4823-a2f1-15782b5cd28c
title: Типы значений реестра
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: adc653e69c514bc77323704485e88f0a57eebaae
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103910319"
---
# <a name="registry-value-types"></a>Типы значений реестра

Значение реестра может хранить данные в различных форматах. Например, при хранении данных в значении реестра для экземпляра путем вызова функции [**RegSetValueEx**](/windows/desktop/api/Winreg/nf-winreg-regsetvalueexa) можно указать одно из следующих значений, чтобы указать тип сохраняемых данных. При извлечении значения реестра такие функции, как [**процедура RegQueryValueEx**](/windows/desktop/api/Winreg/nf-winreg-regqueryvalueexa) , используют эти значения для указания типа извлекаемых данных.

В Winnt. h определены следующие типы значений реестра.



| Значение                                 | Тип                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|---------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_двоичный файл REG<br/>                | Двоичные данные в любой форме.<br/>                                                                                                                                                                                                                                                                                                                                                                                                     |
| REG \_ DWORD<br/>                 | 32-разрядное число.<br/>                                                                                                                                                                                                                                                                                                                                                                                                             |
| REG \_ DWORD с \_ прямым \_ порядком байтов<br/> | 32-разрядный номер в формате с прямым порядком байтов.<br/> Windows предназначена для работы на архитектурных компьютерах с прямым порядком байтов. Таким образом, это значение определяется как REG \_ DWORD в файлах заголовков Windows.<br/>                                                                                                                                                                                                                          |
| REG \_ байт с \_ обратным \_ порядком байтов<br/>    | 32-разрядное число в формате с обратным порядком байтов.<br/> Некоторые системы UNIX поддерживают архитектуры с обратным порядком байтов.<br/>                                                                                                                                                                                                                                                                                                                         |
| \_распаковать \_ SZ<br/>            | Строка, завершающаяся нулем, которая содержит нераскрытные ссылки на переменные среды (например, "% PATH%"). Это будет строка в Юникоде или ANSI в зависимости от того, используются ли функции Юникода или ANSI. Чтобы развернуть ссылки на переменные среды, используйте функцию [**експанденвиронментстрингс**](/windows/win32/api/processenv/nf-processenv-expandenvironmentstringsa) .<br/>                                                                                 |
| Ссылка на REG \_<br/>                  | Строка в Юникоде, заканчивающаяся нулем, которая содержит целевой путь символьной ссылки, созданной путем вызова функции [**регкреатекэйекс**](/windows/desktop/api/Winreg/nf-winreg-regcreatekeyexa) с \_ параметром REG \_ Create \_ Link.<br/>                                                                                                                                                                                                                          |
| REG \_ Multi \_ SZ<br/>             | Последовательность строк, завершающихся нулем, заканчивающаяся пустой строкой ( \\ 0).<br/> Ниже представлен пример такого кода:<br/> *Строка1* \\ 0 *строка2* \\ 0 *string3* \\ 0 *ластстринг* \\ 0 \\ 0<br/> Первый \\ 0 завершает первую строку, вторая — до последней \\ 0 — завершает последнюю строку, а последняя — \\ 0 — последовательность завершается. Обратите внимание, что конечный Терминатор должен быть разделяться на длину строки.<br/> |
| REG \_ None<br/>                  | Нет определенного типа значения.<br/>                                                                                                                                                                                                                                                                                                                                                                                                       |
| REG \_ QWORD<br/>                 | 64-разрядное число.<br/>                                                                                                                                                                                                                                                                                                                                                                                                             |
| REG с обратным \_ \_ \_ порядком байтов<br/> | 64-разрядный номер в формате с прямым порядком байтов.<br/> Windows предназначена для работы на архитектурных компьютерах с прямым порядком байтов. Таким образом, это значение определяется как REG \_ QWORD в файлах заголовков Windows.<br/>                                                                                                                                                                                                                          |
| REG \_ SZ<br/>                    | Строка с нулевым символом в конце. Это может быть строка в Юникоде или ANSI, в зависимости от того, используются ли функции Юникода или ANSI.<br/>                                                                                                                                                                                                                                                                                       |



 

## <a name="string-values"></a>Строковые значения

Если данные имеют тип REG \_ SZ, REG \_ Multi \_ SZ или REG \_ expand \_ SZ, строка может быть не сохранена с соответствующими завершающими символами NULL. Поэтому при чтении строки из реестра необходимо убедиться, что строка должна завершиться должным образом, прежде чем использовать ее. в противном случае он может перезаписать буфер. (Обратите внимание, что REG \_ НЕСКОЛЬКО \_ SZ строк должны иметь два завершающих нуль символа.)

При записи строки в реестр необходимо указать длину строки, включая завершающий нуль-символ ( \\ 0). Распространенная ошибка заключается в использовании функции **strlen** для определения длины строки, но чтобы забывать, что **strlen** возвращает только число символов в строке, не включая завершающее значение null. Таким образом, длина строки должна быть вычислена следующим образом: `strlen( string ) + 1`

Строка реестра с \_ несколькими \_ SZми заканчивается строкой длиной 0. Поэтому невозможно включить в последовательность строку нулевой длины. Пустая последовательность будет определена следующим образом: \\ 0.

В следующем примере рассматривается строка реестра с \_ несколькими \_ SZми.


```C++
#include <windows.h>
#include <tchar.h>
#include <stdio.h>

void SampleSzz(PTSTR pszz)
{
   _tprintf(_TEXT("\tBegin multi-sz string\n"));
   while (*pszz) 
   {
      _tprintf(_TEXT("\t\t%s\n"), pszz);
      pszz = pszz + _tcslen(pszz) + 1;
   }
   _tprintf(_TEXT("\tEnd multi-sz\n"));
}

int __cdecl main(int argc, char **argv)
{
   // Because the compiler adds a \0 at the end of quoted strings, 
   // there are two \0 terminators at the end. 

   _tprintf(_TEXT("Conventional multi-sz string:\n"));  
   SampleSzz(_TEXT("String1\0String2\0String3\0LastString\0"));

   _tprintf(_TEXT("\nTest case with no strings:\n"));  
   SampleSzz(_TEXT(""));

   return 0;
}
```



## <a name="byte-formats"></a>Форматы байтов

В *формате с прямым порядком* байтов значение в байтах хранится в памяти с наименьшего байта («маленький конец») до самого большого байта. Например, значение 0x12345678 хранится как (0x78 0x56 0x34 0x12) в формате с прямым порядком байтов.

В *формате с обратным порядком байтов* многобайтовое значение хранится в памяти из самого длинного байта («Big-конец») до наименьшего байта. Например, значение 0x12345678 сохраняется как (0x12 0x34 0x56 0x78) в формате с обратным порядком байтов.

 

