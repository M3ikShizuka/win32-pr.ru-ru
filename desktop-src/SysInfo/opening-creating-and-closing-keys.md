---
description: Прежде чем приложение сможет добавлять данные в реестр, оно должно создать или открыть ключ.
ms.assetid: 7b0b24d2-b54f-4243-95d0-2adbd87cb4df
title: Открытие, создание и закрытие ключей
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 605d53a00506122c6350abd7f06e9166ed487de98c7910a3b7c3a913978492f5
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117763966"
---
# <a name="opening-creating-and-closing-keys"></a>Открытие, создание и закрытие ключей

Прежде чем приложение сможет добавлять данные в реестр, оно должно создать или открыть ключ. Чтобы создать или открыть ключ, приложение всегда ссылается на ключ в качестве подраздела открытого в данный момент ключа. Всегда открыты следующие стандартные разделы: **hKey \_ локальный \_ компьютер**, **классы hKey, \_ \_ корень**, **\_ Пользователи hKey** и **hKey \_ текущий \_ пользователь**. Приложение использует функцию [**RegOpenKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regopenkeyexa) , чтобы открыть ключ, и функцию [**регкреатекэйекс**](/windows/desktop/api/Winreg/nf-winreg-regcreatekeyexa) для создания ключа. Дерево реестра может иметь глубину 512 уровней. С помощью одного вызова API реестра можно создать до 32 уровней за раз.

Приложение может использовать функцию [**Ошибка RegCloseKey**](/windows/desktop/api/Winreg/nf-winreg-regclosekey) для закрытия ключа и записи содержащихся в реестре данных. **Ошибка RegCloseKey** не обязательно записывает данные в реестр перед возвратом; на очистку кэша на жестком диске может потребоваться несколько секунд. Если приложение должно явно записать данные реестра на жесткий диск, можно использовать функцию [**функция RegFlushKey вернула**](/windows/desktop/api/Winreg/nf-winreg-regflushkey) . Однако **функция RegFlushKey вернула** использует много системных ресурсов и должен вызываться только при крайней необходимости.

 

 



