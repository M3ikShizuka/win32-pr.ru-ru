---
description: Хотя существует несколько технических ограничений на тип и размер данных, которые приложение может хранить в реестре, для повышения эффективности работы системы существует ряд практических рекомендаций.
ms.assetid: fa85ff87-3d72-4f71-856a-f43df7d19aa8
title: Место для хранения реестра
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 90b776498528d6c7deaacd92f9e010758b5d57c0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105663494"
---
# <a name="registry-storage-space"></a>Место для хранения реестра

Хотя существует несколько технических ограничений на тип и размер данных, которые приложение может хранить в реестре, для повышения эффективности работы системы существует ряд практических рекомендаций. Приложение должно хранить данные конфигурации и инициализации в реестре и хранить другие типы данных в другом расположении.

Как правило, данные, состоящие более чем из одного или двух килобайтов (K), должны храниться в виде файла и ссылаться на них с помощью ключа в реестре, а не хранить как значение. Вместо дублирования больших фрагментов данных в реестре приложение должно сохранить данные в виде файла и ссылаться на файл. Исполняемый двоичный код никогда не должен храниться в реестре.

Запись значения использует гораздо меньше пространства реестра, чем ключ. Чтобы сэкономить место, приложение должно сгруппировать аналогичные данные в виде структуры и сохранить структуру как значение, а не хранить каждый из членов структуры как отдельный ключ. (Хранение данных в двоичной форме позволяет приложению хранить данные в одном значении, которое в противном случае было бы состоять из нескольких несовместимых типов).

Представления файлов реестра сопоставлены в памяти выгружаемого пула.

**Windows server 2008 для 32-bit, Windows Vista с пакетом обновления 1 (SP1) для 32-bit, Windows Vista, Windows Server 2003, Windows XP:** Представления файлов реестра сопоставлены в адресном пространстве кэша компьютера. Таким образом, независимо от размера данных реестра, он не занимает больше 4 мегабайт (МБ).

Максимальный размер куста реестра составляет 2 ГБ, за исключением системного куста.

**Windows server 2003 с пакетом обновления 1 (SP1), Windows server 2003 и Windows XP:** Нет явных ограничений на общий объем пространства, который может использоваться Hive в выгружаемого пула памяти и на диске, хотя системные квоты могут повлиять на фактический максимальный размер. Максимальный размер куста реестра ограничен 2 ГБ, начиная с Windows Server 2003 с пакетом обновления 2 (SP2).

Максимальный размер системного куста ограничен физической памятью, как показано в следующей таблице. 

| Система                      | Максимальный размер системного куста                                                                                                                                                                                                            |
|-----------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| системы на базе x86           | 50% физической памяти, до 400 МБ. **Windows server 2003 с пакетом обновления 2 (SP2), Windows server 2003 с пакетом обновления 1 (SP1), Windows server 2003 и Windows XP:** 25% физической памяти, до 200 МБ.<br/>                                    |
| системы на базе x64           | 50% физической памяти, до 1,5 ГБ. **Windows Server 2003 с пакетом обновления 2 (SP2):** 25% системной памяти, до 200 МБ.<br/> **Windows server 2003 с пакетом обновления 1 (SP1), Windows server 2003 и Windows XP 64-bit Edition:** 32 МБ.<br/> |
| Системы на базе Intel Itanium | 50% физической памяти, до 1 ГБ. **Windows server 2008, Windows Vista, Windows server 2003 с пакетом обновления 2 (SP2), Windows server 2003 с пакетом обновления 1 (SP1), Windows server 2003 и Windows XP 64-bit Edition:** 32 МБ.<br/>                         |



 

## <a name="windows-2000"></a>Windows 2000

Данные реестра хранятся в выгружаемом пуле, области физической памяти, используемой для системных данных, которые могут быть записаны на диск, когда они не используются. Значение **регистрисизелимит** устанавливает максимальный объем выгружаемого пула, который может использоваться данными реестра из всех приложений. Это значение находится в следующем разделе реестра:

```
HKEY_LOCAL_MACHINE
   System
      CurrentControlSet
         Control
```

По умолчанию предельный размер реестра составляет 25 процентов выгружаемого пула. (Размер выгружаемого пула по умолчанию составляет 32 МБ, поэтому это 8 МБ). Система гарантирует, что минимальное значение **регистрисизелимит** — 4 МБ, а максимальное — примерно 80% от значения **пажедпулсизе** . Если значение этой записи превышает 80% от размера выгружаемого пула, система устанавливает максимальный размер реестра, равный 80% от размера выгружаемого пула. Это предотвращает использование пространства реестра, необходимого для процессов. Обратите внимание, что установка этого значения не приводит к выделению места в выгружаемом пуле и не гарантирует, что при необходимости пространство будет доступно.

Размер выгружаемого пула определяется значением **пажедпулсизе** в следующем разделе реестра:

```
HKEY_LOCAL_MACHINE
   System
      CurrentControlSet
         Control
            SessionManager
               MemoryManagement
```

Пример определения текущего и максимального размера реестра см. [в разделе Определение размера реестра](determining-the-registry-size.md).

Максимальный размер выгружаемого пула составляет примерно 300 470 МБ, поэтому ограничение размера реестра составляет 240-376 МБ. Однако если используется параметр/3GB, максимальный размер выгружаемого пула составляет 192 МБ, поэтому в реестре может быть не более 153,6 МБ.

 

 




