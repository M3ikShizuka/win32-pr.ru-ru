---
title: Форматы данных и передачи мультимедиа
description: Форматы данных и передачи мультимедиа
ms.assetid: c6023c42-ce20-40e4-9d88-55fa1d2a4d38
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6893fabd776d196cbc7354dde7c330f9caffb0a
ms.sourcegitcommit: 89f99926f946dc6c5ea600fb7c41f6b19ceac516
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/21/2020
ms.locfileid: "104070843"
---
# <a name="data-formats-and-transfer-media"></a>Форматы данных и передачи мультимедиа

Большинство платформ, в том числе Windows, определяют стандартный протокол для передачи данных между приложениями на основе набора функций, называемых буфером обмена. Приложения, использующие эти функции, могут обмениваться данными, даже если их собственные форматы данных различаются. Как правило, эти буферы обмена имеют два серьезных недостатка, которые пропреодолеть модель COM.

Во-первых, в описаниях данных используется только идентификатор формата, например один 16-разрядный идентификатор формата буфера обмена в Windows, что означает, что буфер обмена может описывать только структуру данных, то есть порядок битов. Он может сообщить: «у меня есть точечный рисунок» или есть текст «», но он не может указывать целевые устройства, для которых состоят данные, какие представления или аспекты самих данных могут предоставляться или какие носители лучше всего подходят для его передачи. Например, он не может сообщить: «у меня есть Текстовая строка, хранящаяся в глобальной памяти и отформатированная для представления на экране или на принтере» или «у меня есть растровое изображение эскиза, отображаемое для принтера с точечной матрицей 100 dpi и сохраненное как файл на диске».

Во-вторых, все передачи данных с помощью буфера обмена обычно происходят через глобальную память. Использование глобальной памяти достаточно эффективно для небольших объемов данных, но ужасно неэффективно для больших объемов, таких как мультимедийный объект размером 20 МБ. Глобальная память работает слишком долго для больших объектов данных, размер которой требует значительного переключения на виртуальную память на диске. В случаях, когда данные, которыми вы обмениваетесь, обычно находятся в основном на диске, принудительное применение этого узкого места виртуальной памяти является очень неэффективным. Лучшим способом будет полностью пропускать глобальную память и просто передавать данные непосредственно на диск.

Чтобы решить эти проблемы, COM предоставляет две структуры данных: [**форматетк**](/windows/win32/api/objidl/ns-objidl-formatetc) и [**стгмедиум**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1). Дополнительные сведения см. в следующих разделах:

-   [Структура ФОРМАТЕТК](the-formatetc-structure.md)
-   [Структура СТГМЕДИУМ](the-stgmedium-structure.md)

## <a name="related-topics"></a>См. также

<dl> <dt>

[Передача данных](data-transfer.md)
</dt> </dl>

 

 




