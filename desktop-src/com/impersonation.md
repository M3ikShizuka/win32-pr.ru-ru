---
title: Олицетворение
description: Олицетворение — это способность потока выполняться в контексте безопасности, отличном от контекста процесса, владеющего потоком.
ms.assetid: b33ca3b0-0423-4338-b3d6-4bb3db3d3e1b
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a735fa12e175ecec5dc2a7ed741843d713532e19
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "104070697"
---
# <a name="impersonation"></a>Олицетворение

Олицетворение — это способность потока выполняться в контексте безопасности, отличном от контекста процесса, владеющего потоком. При выполнении в контексте безопасности клиента сервер "является" клиентом, в некоторой степени. Поток сервера использует маркер доступа, представляющий учетные данные клиента для получения доступа к объектам, к которым у клиента есть доступ.

Основная причина олицетворения — вызвать проверку доступа к удостоверению клиента. Использование удостоверения клиента для проверки доступа может привести к ограничению или расширению доступа в зависимости от того, что у клиента есть разрешение. Например, предположим, что файловый сервер содержит файлы, содержащие конфиденциальные сведения, и что каждый из этих файлов защищен ACL. Чтобы предотвратить несанкционированный доступ клиента к данным в этих файлах, сервер может олицетворять клиента перед доступом к файлам.

## <a name="access-tokens-for-impersonation"></a>Маркеры доступа для олицетворения

Маркеры доступа — это объекты, описывающие контекст безопасности процесса или потока. Они предоставляют сведения, включающие удостоверение учетной записи пользователя и подмножество привилегий, доступных для учетной записи пользователя. Каждый процесс имеет *основной маркер доступа* , описывающий контекст безопасности учетной записи пользователя, связанной с процессом. По умолчанию система использует основной маркер, когда поток процесса взаимодействует с защищаемым объектом. Однако когда поток олицетворяет клиента, поток олицетворения имеет как основной маркер доступа, так и *маркер олицетворения*. Маркер олицетворения представляет контекст безопасности клиента, и этот маркер доступа используется для проверки доступа во время олицетворения. Когда используется олицетворение, поток возвращается к использованию только основного маркера доступа.

Для получения маркера основного маркера процесса можно использовать функцию [**OpenProcessToken**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-openprocesstoken) . Используйте функцию [**опенсреадтокен**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-openthreadtoken) , чтобы получить маркер для маркера олицетворения потока.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Маркеры доступа](/windows/desktop/SecAuthZ/access-tokens)
</dt> <dt>

[Делегирование и олицетворение](delegation-and-impersonation.md)
</dt> </dl>

 

 