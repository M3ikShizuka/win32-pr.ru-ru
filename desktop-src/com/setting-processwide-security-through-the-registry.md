---
title: Настройка безопасности Process-Wide в реестре
description: Если вы хотите настроить безопасность для всего процесса, одно из решений заключается в установке требуемых уровней безопасности в реестре.
ms.assetid: 87f0a64f-f3ec-4ee2-8d65-4f82e8971f0b
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d303f184229cb20aef1cbf71733956a3b6ce6618
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "103987919"
---
# <a name="setting-process-wide-security-through-the-registry"></a>Настройка безопасности Process-Wide в реестре

Если вы хотите настроить безопасность для всего процесса, одно из решений заключается в установке требуемых уровней безопасности в реестре. Если приложение не может вызвать [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) или вы предпочитаете не использовать программную безопасность, это может быть хорошим вариантом. Если вы решили установить безопасность на уровне процесса с помощью реестра, следует иметь в виду, что при вызове **CoInitializeSecurity** в рамках программы com будет использовать значения в **CoInitializeSecurity** и игнорировать значения реестра.

Существует два способа настройки параметров безопасности в реестре для приложения.

-   Можно использовать Dcomcnfg.exe, который предоставляет простой пользовательский интерфейс для изменения значений безопасности. Все серверы COM можно настроить с помощью Dcomcnfg.exe. Дополнительные сведения см. в разделе [Настройка безопасности Process-Wide с помощью DCOMCNFG](setting-processwide-security-using-dcomcnfg.md). Однако клиентские приложения обычно не отображаются в Dcomcnfg.exe, если только клиент не создает идентификатор GUID и не вводит его в реестр.
-   Вы можете задать значения безопасности в разделе [AppID](appid-key.md) для приложения. В оставшейся части этого раздела объясняется, как задать параметры безопасности в реестре с помощью ключа **AppID** .

AppID — это идентификатор GUID, представляющий серверный процесс для одного или нескольких классов. Каждый класс связан ровно с одним AppID, а идентификаторы AppID могут быть назначены только исполняемым файлам. Библиотеки DLL не получают AppID, если они не выполняются в суррогате, а затем являются суррогатным процессом, имеющим AppID. Если в суррогат загружается несколько библиотек DLL, каждый суррогат имеет только один AppID.

Для некоторых COM-серверов код регистрации создает AppID и помещает в реестр записи, которые сопоставляют AppID с именем исполняемого файла. Но некоторые COM-серверы не предоставляют эту функцию. Однако если код регистрации сервера добавляет запись для элемента реестра HKCR \\ CLSID {серверклсид} \\ [](localserver32.md) при запуске dcomcnfg.exe, автоматически добавляет AppID для идентификатора CLSID.

Для COM-клиента, который не является сервером, это сопоставление не создается, так как клиент никогда не зарегистрирован. Таким образом, чтобы настроить безопасность с помощью ключа **AppID** , клиент должен создать необходимые записи реестра, как программно с помощью [функций реестра](/windows/desktop/SysInfo/registry-functions) , так и с помощью программы Regedit.

Если вы решили установить безопасность на уровне процесса в реестре в разделе **AppID** , имейте в виду, что в ключе **AppID** есть два именованных значения, которые можно установить без разрешения администратора.

-   [акцесспермиссион](accesspermission.md)
-   [аусентикатионлевел](authenticationlevel.md)

Значения **аусентикатионлевел** и **акцесспермиссион** задаются независимо друг от друга и имеют отдельные значения по умолчанию. Если значение **аусентикатионлевел** отсутствует, в качестве значения по умолчанию используется значение [легациаусентикатионлевел](legacyauthenticationlevel.md) . Аналогично, если значение **акцесспермиссион** отсутствует, в качестве значения по умолчанию используется значение [дефаултакцесспермиссион](defaultaccesspermission.md) . Однако значения **аусентикатионлевел** и **акцесспермиссион** взаимосвязаны следующими способами.

-   Если **аусентикатионлевел** имеет значение None, то значения **акцесспермиссион** и **дефаултакцесспермиссион** для этого приложения игнорируются.
-   Если **аусентикатионлевел** отсутствует и **легациаусентикатионлевел** имеет значение None, то значения **акцесспермиссион** и **дефаултакцесспермиссион** для этого приложения игнорируются.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Настройка безопасности Process-Wide](setting-processwide-security.md)
</dt> </dl>

 

 