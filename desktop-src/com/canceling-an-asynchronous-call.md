---
title: Отмена асинхронного вызова
description: Клиент может отменить асинхронный вызов, который выполняется, если объект вызова реализует интерфейс Иканцелмесодкаллс.
ms.assetid: 30a162f2-ce16-4ee6-8002-59216ac0e59a
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 775b187f1abd3fca43ba907d92f6eabd926e4608
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127459230"
---
# <a name="canceling-an-asynchronous-call"></a>Отмена асинхронного вызова

Клиент может отменить асинхронный вызов, который выполняется, если объект вызова реализует интерфейс [**иканцелмесодкаллс**](/windows/win32/api/objidlbase/nn-objidlbase-icancelmethodcalls) . Для объектов, использующих стандартный маршалирование, **иканцелмесодкаллс** всегда доступен для упакованных вызовов. Для объектов, использующих настраиваемое маршалирование или для вызовов к серверным объектам в пределах одного подразделения, эта функция доступна, только если объект вызова реализует **иканцелмесодкаллс**.

Клиент может в любое время отменить вызов, от момента \_ вызова метода Begin до \_ возврата методом Finish. Если клиент отменяет вызов до вызова \_ метода Finish, он должен вызвать метод Finish, \_ чтобы очистить состояние объекта вызова. Пока клиент не закончит работу, любые вызовы любого метода Begin \_ в объекте Call будут возвращать вызов RPC \_ E \_ Call \_ .

**Отмена асинхронного вызова**

1.  Запросите объект Call для [**иканцелмесодкаллс**](/windows/win32/api/objidlbase/nn-objidlbase-icancelmethodcalls).

2.  Вызовите метод [**иканцелмесодкаллс:: Cancel**](/windows/win32/api/objidlbase/nf-objidlbase-icancelmethodcalls-cancel), а затем вызовите метод [**Release**](/windows/win32/api/unknwn/nf-unknwn-iunknown-release) , чтобы освободить указатель, полученный вызовом [**QueryInterface**](/windows/desktop/api/Unknwn/nf-unknwn-iunknown-queryinterface(q)) на шаге 1.

3.  Если клиент еще не вызвал \_ метод Finish, вызовите его сейчас.

Нет никакой гарантии, что сервер фактически остановил выполнение вызова. Если работа клиента зависит от состояния сервера, которое вызов может измениться, клиент должен определить это состояние перед продолжением.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Выполнение асинхронного вызова](making-an-asynchronous-call.md)
</dt> </dl>

 

 