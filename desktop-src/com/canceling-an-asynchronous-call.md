---
title: Отмена асинхронного вызова
description: Клиент может отменить асинхронный вызов, который выполняется, если объект вызова реализует интерфейс Иканцелмесодкаллс.
ms.assetid: 30a162f2-ce16-4ee6-8002-59216ac0e59a
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 42d2751400d631c62c19f68f2cab841c0845b432df676abe60befed1f231e103
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117737118"
---
# <a name="canceling-an-asynchronous-call"></a>Отмена асинхронного вызова

Клиент может отменить асинхронный вызов, который выполняется, если объект вызова реализует интерфейс [**иканцелмесодкаллс**](/windows/win32/api/objidlbase/nn-objidlbase-icancelmethodcalls) . Для объектов, использующих стандартный маршалирование, **иканцелмесодкаллс** всегда доступен для упакованных вызовов. Для объектов, использующих настраиваемое маршалирование или для вызовов к серверным объектам в пределах одного подразделения, эта функция доступна, только если объект вызова реализует **иканцелмесодкаллс**.

Клиент может в любое время отменить вызов, от момента \_ вызова метода Begin до \_ возврата методом Finish. Если клиент отменяет вызов до вызова \_ метода Finish, он должен вызвать метод Finish, \_ чтобы очистить состояние объекта вызова. Пока клиент не закончит работу, любые вызовы любого метода Begin \_ в объекте Call будут возвращать вызов RPC \_ E \_ Call \_ .

**Отмена асинхронного вызова**

1.  Запросите объект Call для [**иканцелмесодкаллс**](/windows/win32/api/objidlbase/nn-objidlbase-icancelmethodcalls).

2.  Вызовите метод [**иканцелмесодкаллс:: Cancel**](/windows/win32/api/objidlbase/nf-objidlbase-icancelmethodcalls-cancel), а затем вызовите метод [**Release**](/windows/win32/api/unknwn/nf-unknwn-iunknown-release) , чтобы освободить указатель, полученный вызовом [**QueryInterface**](/windows/desktop/api/Unknwn/nf-unknwn-iunknown-queryinterface(q)) на шаге 1.

3.  Если клиент еще не вызвал \_ метод Finish, вызовите его сейчас.

Нет никакой гарантии, что сервер фактически остановил выполнение вызова. Если работа клиента зависит от состояния сервера, которое вызов может измениться, клиент должен определить это состояние перед продолжением.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Выполнение асинхронного вызова](making-an-asynchronous-call.md)
</dt> </dl>

 

 