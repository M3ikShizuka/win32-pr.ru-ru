---
title: Ловушек
description: Заглушка, как и прокси-сервер, состоит из одной или нескольких элементов интерфейса и руководителя.
ms.assetid: ed7d5546-2d19-4055-b078-62b39d0317b7
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f182cd2d47eec18f129d53d57c283d54862660a126d2d9e171989695418b3a8e
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119678433"
---
# <a name="stub"></a>Ловушек

Заглушка, как и прокси-сервер, состоит из одной или нескольких элементов интерфейса и руководителя. Каждая заглушка интерфейса предоставляет код для распаковки параметров и кода, который вызывает один из поддерживаемых интерфейсов объекта. Каждая заглушка также предоставляет интерфейс для внутренней связи. Диспетчер заглушек отслеживает доступные заглушки интерфейса.

Однако существуют следующие различия между заглушкой и прокси-сервером:

-   Самое важное отличие заключается в том, что заглушка представляет клиента в адресном пространстве объекта.
-   Заглушка не реализуется как агрегатный объект, так как нет необходимости просматривать клиент как единое целое. Каждый элемент в заглушке является отдельным компонентом.
-   Заглушки интерфейса являются частными, а не общедоступными.
-   Заглушки интерфейса реализуют [**ирпкстуббуффер**](/windows/win32/api/objidlbase/nn-objidlbase-irpcstubbuffer), а не [**ирпкпроксибуффер**](/windows/win32/api/objidlbase/nn-objidlbase-irpcproxybuffer).
-   Вместо упаковки упакованных параметров заглушка разменяет их после маршалирования, а затем упаковывает ответ.

## <a name="structure-of-the-stub"></a>Структура заглушки

На следующей диаграмме показана структура заглушки. Каждая заглушка интерфейса подключена к интерфейсу объекта. Канал отправляет входящие сообщения в соответствующую заглушку интерфейса. Все компоненты говорят по каналу через [**ирпкчаннелбуффер**](/windows/win32/api/objidlbase/nn-objidlbase-irpcchannelbuffer), интерфейс, предоставляющий доступ к библиотеке времени выполнения RPC.

![Снимок экрана, на котором показана структура заглушки.](images/98714a22-733e-432f-bb90-408bbeecc23f.png)

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Канал](channel.md)
</dt> <dt>

[Обмен данными между объектами](inter-object-communication.md)
</dt> <dt>

[Сведения о маршалировании](marshaling-details.md)
</dt> <dt>

[Microsoft RPC](microsoft-rpc.md)
</dt> <dt>

[Прокси](proxy.md)
</dt> </dl>

 

 