---
title: Требования к серверу DLL
description: Хотя большинство библиотек DLL могут работать в суррогате, некоторые библиотеки DLL не могут.
ms.assetid: f89dabe6-f65f-4d90-ad0e-c680d4b08ba5
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ae82aa44771d398d80169c56976df7b0e209ea6e
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104068628"
---
# <a name="dll-server-requirements"></a>Требования к серверу DLL

Хотя большинство библиотек DLL могут работать в суррогате, некоторые библиотеки DLL не могут.

Библиотека DLL должна быть правильно настроена, если вы хотите использовать заданный системой суррогат. Например, Библиотека DLL, которая вызывает методы, которые регистрируют обратные вызовы от клиента, попытается вызвать эти обратные вызовы, как если бы полученные указатели функций были инструкциями в адресном пространстве, что не так. Аналогичным образом, Библиотека DLL, использующая глобальную переменную, которая не требует доступа к клиенту, не будет работать. В общем случае параметры, которые не могут быть правильно упакованы, не позволяют серверу DLL выполняться вне клиентского процесса. Во многих случаях можно написать специальный суррогат, специально разработанный для компенсации «плохого» поведения. (Дополнительные сведения см. [в разделе Написание пользовательского суррогата](writing-a-custom-surrogate.md).)

Если сервер DLL использует пользовательские интерфейсы, необходимо убедиться, что код для маршалирования доступен для этих интерфейсов. Например, можно создать и зарегистрировать прокси-библиотеку DLL или предоставить и зарегистрировать библиотеку типов, которая позволит серверу правильно работать при выполнении в суррогате.

Серверы DLL будут загружены только в суррогатный процесс, выполняемый в правильном контексте безопасности. Контекст безопасности для суррогата сервера DLL определяется так же, как и для серверов EXE. Суррогат сервера DLL выполняется в том же контексте безопасности, что и клиент, за исключением случаев, когда значение **runas** , определяющее контекст безопасности, задается в разделе реестра [AppID](appid-clsid.md) для сервера.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Суррогаты библиотеки DLL](dll-surrogates.md)
</dt> </dl>

 

 




