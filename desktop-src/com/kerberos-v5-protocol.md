---
title: Протокол Kerberos V5
description: Протокол Kerberos V5
ms.assetid: a53a1edf-f374-4cbf-8050-7cde45284157
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 50a1b739aac67a7a30918e78fa3bb364506ade7dfd720c390db1cc37909f2fbd
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119992464"
---
# <a name="kerberos-v5-protocol"></a>Протокол Kerberos V5

Протокол проверки подлинности Kerberos V5 имеет идентификатор службы проверки подлинности RPC \_ C \_ AUTHN \_ GSS (Kerberos) \_ . Протокол Kerberos определяет, как клиенты взаимодействуют со службой проверки подлинности сети и были стандартизованы в стандарте IETF (Internet Engineering Task Force) в сентябре 1993 в документе [RFC 1510](https://www.ietf.org/rfc/rfc1510.txt). Клиенты получают билеты в центре распространения ключей Kerberos и предъявляют их серверам при установлении соединений. Билеты Kerberos представляют собой сетевые учетные данные клиента.

Как и NTLM, протокол Kerberos использует доменное имя, имя пользователя и пароль для представления удостоверения клиента. Первоначальный билет Kerberos, полученный от KDC при входе пользователя в систему, основан на зашифрованном хэш-коде пароля пользователя. Этот первоначальный билет кэшируется. Когда пользователь пытается подключиться к серверу, протокол Kerberos проверяет кэш билетов на наличие действительного билета для этого сервера. Если он недоступен, первоначальный билет для пользователя отправляется в KDC вместе с запросом билета для указанного сервера. Этот билет сеанса добавляется в кэш и может использоваться для подключения к тому же серверу до истечения срока действия билета.

Когда сервер вызывает [**кокуериклиентбланкет**](/windows/desktop/api/combaseapi/nf-combaseapi-coqueryclientblanket) с помощью протокола Kerberos, возвращаются доменное имя и имя пользователя клиента. Когда сервер вызывает [**коимперсонатеклиент**](/windows/desktop/api/combaseapi/nf-combaseapi-coimpersonateclient), возвращается маркер клиента. Эти поведения те же, что и при использовании NTLM.

Протокол Kerberos работает через границы компьютера. Компьютеры клиента и сервера должны быть в доменах, и эти домены должны иметь отношения доверия.

Протокол Kerberos требует взаимной проверки подлинности и поддерживает его удаленно. Клиент должен указать имя участника сервера, и удостоверение сервера должно точно совпадать с именем субъекта. Если клиент указывает **значение NULL** для имени участника сервера или если имя участника не соответствует серверу, вызов завершится ошибкой.

При использовании протокола Kerberos можно использовать уровни олицетворения Identify, IMPERSONATE и Delegate. Когда сервер вызывает [**коимперсонатеклиент**](/windows/desktop/api/combaseapi/nf-combaseapi-coimpersonateclient), возвращенный токен действителен на компьютере в течение некоторого периода времени от 5 минут до 8 часов. По истечении этого времени его можно использовать только на серверном компьютере. Если сервер имеет значение "Запуск от имени активатора" и активация выполняется с помощью протокола Kerberos, срок действия маркера сервера истекает через 5 минут и 8 часов после активации.

Протокол проверки подлинности Kerberos V5, реализованный Windows, поддерживает [маскировку](cloaking.md).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Пакеты безопасности и COM](com-and-security-packages.md)
</dt> </dl>

 

 




