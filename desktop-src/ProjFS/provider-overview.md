---
title: Общие сведения о поставщике
description: Общие сведения о приложении поставщика.
ms.assetid: <GUID-GOES-HERE>
ms.date: 01/17/2020
ms.topic: article
ms.openlocfilehash: c6905d6d2d52fd30b8950682c45c9d3bd0fc13281fc0f1d3120cba1b168012d5
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120127964"
---
# <a name="provider-overview"></a>Общие сведения о поставщике

Поставщик — это приложение пользовательского режима, которое поддерживает и распознает резервное хранилище данных.  Поставщик реализует обратные вызовы Прожфс и использует API Прожфс для проецирования этого хранилища данных в файловую систему, где они отображаются пользователю как файлы и каталоги.  Резервное хранилище поставщика может быть локальным для системы пользователя или удалено.

## <a name="data-projection"></a>Проекция данных

Часть файловой системы, которой принадлежит поставщик, в которой проецируется его данные, находится в каталоге с именем "корень виртуализации".  Когда поставщик хочет начать проецирование своих данных, он запускает "экземпляр виртуализации", который представляет собой объект, который управляет взаимодействием между поставщиком и Прожфс для набора файлов и каталогов, расположенных в определенном корне виртуализации.  Все файлы и каталоги, являющиеся потомками корневого каталога виртуализации, которые не были созданы локально пользователем, проводятся поставщиком через API Прожфс.  Эти элементы запускаются как виртуальные файлы и каталоги, что означает, что они не существуют на локальном устройстве хранения пользователя, но добавлены в результаты перечисления с помощью Прожфс.  При открытии и чтении элементов Прожфс вызывает обратные вызовы, реализуемые поставщиком для запроса данных, а поставщик использует Прожфс API для отправки этих данных в локальное хранилище, в котором они кэшируются для последующего доступа.  Если необходимо изменить представление резервного хранилища данных пользователя, например, если содержимое хранилища данных изменилось, поставщик может использовать API Прожфс для обновления или удаления локальных элементов, чтобы отразить новое представление хранилища данных.

## <a name="callback-return-codes"></a>Коды возврата обратного вызова

Каждый обратный вызов перечисляет ряд возможных возвращаемых значений, характерных для этого обратного вызова.  В дополнение к возвращаемым значениям, перечисленным для данного обратного вызова, обратный вызов может также возвращать некоторые другие коды ошибок.  Это полный список кодов ошибок, которые может вернуть обратный вызов:

| Код ошибки                                    | Значение
|-----------------------------------------------|--------
| S_OK                                          | Операция выполнена успешно
| E_OUTOFMEMORY                                 | Не удалось выделить требуемую память.
| HRESULT_FROM_WIN32 (ERROR_IO_PENDING)          | Поставщик хочет завершить операцию позднее.
| HRESULT_FROM_WIN32(ERROR_INSUFFICIENT_BUFFER) | Буфер, переданный обратному вызову, был слишком мал.
| HRESULT_FROM_WIN32(ERROR_FILE_NOT_FOUND)      | Файл не существует в резервном хранилище поставщика.
| HRESULT_FROM_WIN32 (ERROR_INVALID_PARAMETER)   | Недопустимый аргумент обратного вызова.  Например, идентификатор перечисления не соответствует активному сеансу перечисления.
| HRESULT_FROM_WIN32(ERROR_ACCESS_DENIED)       | Поставщик хочет предотвратить выполнение операции, такой как переименование или удаление.

Обратные вызовы могут также возвращать любые ошибки, которые могут быть получены от вызовов API-интерфейсов Прожфс.
Если обратный вызов возвращает код ошибки, который не находится в предыдущем списке или не был получен из API Прожфс, Прожфс вернет его в файловую систему как STATUS_INTERNAL_ERROR.
