---
title: Общие сведения о дереве модели автоматизации пользовательского интерфейса
description: Продукты с поддержкой специальных возможностей и сценарии тестирования позволяют перемещаться по дереву Microsoft UI Automation для сбора сведений о пользовательском интерфейсе и его элементах.
ms.assetid: f3afe258-baa7-41b5-a27e-cdc94b467d73
keywords:
- Модель автоматизации пользовательского интерфейса, Обзор дерева
- Модель автоматизации пользовательского интерфейса, представление дерева
- Модель автоматизации пользовательского интерфейса, необработанное представление дерева
- Модель автоматизации пользовательского интерфейса, представление элемента управления Tree
- Модель автоматизации пользовательского интерфейса, представление содержимого дерева
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a9e1b8776f86931882acc85e2fb974ff5d1db0be266be94e391ce242ff2a497e
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119570410"
---
# <a name="ui-automation-tree-overview"></a>Общие сведения о дереве модели автоматизации пользовательского интерфейса

Продукты с поддержкой специальных возможностей и сценарии тестирования позволяют перемещаться по дереву Microsoft UI Automation для сбора сведений о пользовательском интерфейсе и его элементах.

в дереве модели автоматизации пользовательского интерфейса находится корневой элемент, представляющий окно Windows рабочего стола (рабочий стол), чьи дочерние элементы представляют окна приложений. Каждый из этих дочерних элементов может содержать элементы, представляющие части пользовательского интерфейса, такие как меню, кнопки, панели инструментов и списки. Эти элементы могут содержать элементы, такие как элементы списка.

Дерево модели автоматизации пользовательского интерфейса не является фиксированной структурой. Она редко встречается в целом, так как она может содержать тысячи элементов. Части дерева модели автоматизации пользовательского интерфейса строятся по мере необходимости клиентом, а структура дерева изменяется по мере добавления, перемещения или удаления элементов.

Поставщики автоматизации пользовательского интерфейса поддерживают дерево модели автоматизации пользовательского интерфейса, реализуя навигацию между элементами в фрагменте. Фрагмент — это полное поддерево элементов из определенной платформы и имеющее корневой элемент (называемый *корнем фрагмента*), который обычно размещается в окне.

Поставщики не связаны с навигацией от одного элемента управления к другому. Это управляется ядром автоматизации пользовательского интерфейса, которое использует сведения из поставщиков окон по умолчанию.

В этом разделе содержатся следующие подразделы.

-   [Представления дерева модели автоматизации пользовательского интерфейса](#views-of-the-ui-automation-tree)
    -   [Необработанное представление](#raw-view)
    -   [Представление элемента управления](#control-view)
    -   [Представление содержимого](#content-view)
-   [Связанные темы](#related-topics)

## <a name="views-of-the-ui-automation-tree"></a>Представления дерева модели автоматизации пользовательского интерфейса

Дерево модели автоматизации пользовательского интерфейса можно фильтровать для создания представлений, содержащих только те элементы автоматизации пользовательского интерфейса, которые относятся к конкретному клиенту. Такой подход позволяет клиентам настраивать структуру, представленную в модели автоматизации пользовательского интерфейса, в соответствии с конкретными потребностями.

Клиент может настраивать представление с помощью области и фильтрации. Определение области определяет экстент представления, начиная с базового элемента. Например, приложению может потребоваться найти только прямые дочерние элементы рабочего стола или всех потомков окна приложения. Фильтрация определяет типы элементов, включенных в представление.

Поставщики автоматизации пользовательского интерфейса поддерживают фильтрацию путем определения свойств элементов, включая свойства [**иуиаутоматионелемент:: исконтролелемент**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomationelement-get_currentiscontrolelement) и [**Иуиаутоматионелемент:: исконтентелемент**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomationelement-get_currentiscontentelement) .

Модель автоматизации пользовательского интерфейса предоставляет три представления по умолчанию: представление RAW, представление элемента управления и представление содержимого. Эти представления определяются типом выполняемой фильтрации. Область любого представления определяется приложением. Приложение может применять другие фильтры к свойствам; Например, чтобы включить в представление элемента управления только включенные элементы управления.

### <a name="raw-view"></a>Базовое представление

Необработанное представление дерева модели автоматизации пользовательского интерфейса представляет собой полное дерево элементов автоматизации, для которых настольным компьютером является корневой элемент. Необработанное представление в точности соответствует собственной программной структуре приложения и является самым подробным представлением. Оно также является основой, на которой строятся другие представления дерева. поскольку это представление зависит от базовой платформы пользовательского интерфейса, необработанное представление кнопки Windows Presentation Foundation (WPF) имеет разное представление raw, чем кнопка Microsoft Win32.

Представление RAW получается путем поиска элементов без указания свойств или с помощью [**иуиаутоматион:: раввиеввалкер**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomation-get_rawviewwalker) для получения интерфейса [**иуиаутоматионтривалкер**](/windows/desktop/api/UIAutomationClient/nn-uiautomationclient-iuiautomationtreewalker) для навигации по дереву.

### <a name="control-view"></a>Представление элемента управления

Представление элемента управления является подмножеством базового представления. Он включает только те элементы пользовательского интерфейса, для которых свойство [**иуиаутоматионелемент:: исконтролелемент**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomationelement-get_currentiscontrolelement) имеет значение **true**.

Представление элемента управления включает элементы пользовательского интерфейса, предоставляющие сведения пользователю или позволяющие пользователю выполнить действие. Это элементы пользовательского интерфейса, которые наиболее интересны для автоматизированного тестирования приложений.

Представление элемента управления также включает неинтерактивные элементы пользовательского интерфейса, которые вносят вклад в логическую структуру пользовательского интерфейса. К ним относятся контейнеры элементов, такие как заголовки представлений списков, панели инструментов, меню и строка состояния. Другие неинтерактивные элементы, отображаемые в представлении элемента управления, представляют собой графические данные и статический текст в диалоговом окне.

Неинтерактивные элементы, используемые только для макета или декоративных целей, такие как панели, используемые для размещения элементов управления в диалоговом окне, не отображаются в представлении элемента управления.

Представление элемента управления дерева модели автоматизации пользовательского интерфейса тесно соответствует структуре пользовательского интерфейса, воспринимаемой конечным пользователем. Благодаря этому продукт с поддержкой специальных возможностей упрощает описание пользовательского интерфейса для конечного пользователя и помогает ему взаимодействовать с приложением.

Представление элемента управления получается путем поиска элементов, для которых свойство [**иуиаутоматионелемент:: исконтролелемент**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomationelement-get_currentiscontrolelement) установлено в значение true, или с помощью [**контролвиеввалкер**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomation-get_controlviewwalker) , чтобы получить интерфейс [**иуиаутоматионтривалкер**](/windows/desktop/api/UIAutomationClient/nn-uiautomationclient-iuiautomationtreewalker) для навигации по дереву.

### <a name="content-view"></a>Представление содержимого

Представление содержимого дерева модели автоматизации пользовательского интерфейса является подмножеством представления элемента управления. Он включает только те элементы пользовательского интерфейса, у которых свойство [**иуиаутоматионелемент:: исконтролелемент**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomationelement-get_currentiscontrolelement) и [**Иуиаутоматионелемент:: Исконтентелемент**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomationelement-get_currentiscontentelement) установлено в **значение true**.

Представление содержимого содержит элементы ПОЛЬЗОВАТЕЛЬСКОГО интерфейса, которые передают фактические данные в пользовательском интерфейсе, включая элементы пользовательского интерфейса, которые могут получать фокус клавиатуры, и некоторый текст, который не является меткой элемента пользовательского интерфейса. Это элементы пользовательского интерфейса, которые наиболее интересны для приложения для чтения с экрана. Например, значения в раскрывающемся поле со списком отображаются в представлении содержимого, поскольку значения представляют сведения, используемые конечным пользователем.

В представлении содержимого поле со списком и поле со списком представляются в виде коллекции элементов пользовательского интерфейса, где можно выбрать один или несколько элементов. Тот факт, что один элемент всегда открыт, и один элемент может быть развернут и свернут, не имеет отношения к представлению содержимого, так как он предназначен для отображения данных или содержимого, представляемого пользователю.

Представление содержимого получается путем поиска элементов, у которых свойство [**исконтролелемент**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomationelement-get_currentiscontrolelement) и [**Куррентисконтентелемент**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomationelement-get_currentiscontentelement) имеет значение **true**, или с помощью [**иуиаутоматион:: контентвиеввалкер**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomation-get_contentviewwalker) , чтобы получить интерфейс [**иуиаутоматионтривалкер**](/windows/desktop/api/UIAutomationClient/nn-uiautomationclient-iuiautomationtreewalker) для навигации по дереву.

На следующих изображениях показаны различия между представлением элемента управления и представлением содержимого. На первом изображении показано простое поле со списком, содержащее три элемента в раскрывающемся списке. На втором изображении показано, как отображаются элементы пользовательского интерфейса поля со списком в представлениях элементов управления и содержимого приложения UISpy.exe.

![снимок экрана простого поля со списком с тремя раскрывающимися элементами](images/combobox.png)

![снимок экрана приложения UISpy с представлениями элементов управления и содержимого элементов поля со списком](images/treeviews.jpg)

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

**Зрения**
</dt> <dt>

[Создание объекта Куиаутоматион](uiauto-creatingcuiautomation.md)
</dt> <dt>

[Получение элементов автоматизации пользовательского интерфейса](uiauto-obtainingelements.md)
</dt> <dt>

[Основы модели автоматизации пользовательского интерфейса](entry-uiautocore-overview.md)
</dt> </dl>

 

 




