---
title: Функция Жетпроцесшандлефромхвнд
description: Извлекает маркер процесса из маркера окна.
ms.assetid: 173579d2-c930-402c-81c7-761b063b5b51
keywords:
- Специальные возможности Windows для функции Жетпроцесшандлефромхвнд
topic_type:
- apiref
api_name:
- GetProcessHandleFromHwnd
api_location:
- Oleacc.dll
api_type:
- DllExport
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: bee00f36f236396816e7bb54cadbe6914f3437e6
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "104135991"
---
# <a name="getprocesshandlefromhwnd-function"></a>Функция Жетпроцесшандлефромхвнд

Извлекает маркер процесса из маркера окна.

## <a name="syntax"></a>Синтаксис


```C++
HANDLE WINAPI GetProcessHandleFromHwnd(
  _In_ HWND hwnd
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*HWND* \[ окне\]
</dt> <dd>

Тип: **[ **HWND**](/windows/desktop/WinProg/windows-data-types)**

Дескриптор окна.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Тип: **[ **Handle**](/windows/desktop/WinProg/windows-data-types)**

В случае успеха возвращает маркер процесса, владеющего окном.

Если это не удалось, возвращает **значение NULL**.

## <a name="remarks"></a>Комментарии

В предыдущих версиях операционной системы процесс мог открыть другой процесс (например, для доступа к его памяти) с помощью [**OpenProcess**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-openprocess). Эта функция будет выполнена успешно, если вызывающая сторона имеет соответствующие привилегии. как правило, вызывающий и целевой процессы должны быть одного пользователя.

Однако в Windows Vista [**OpenProcess**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-openprocess) завершается ошибкой в сценарии, где вызывающий объект имеет UIAccess, и целевой процесс повышается. В этом случае владелец целевого процесса находится в группе Администраторы, но вызывающий процесс выполняется с маркером с ограниченным доступом, поэтому не имеет членства в этой группе и запрещает доступ к процессу с повышенными правами. Однако если вызывающий объект имеет UIAccess, то он может использовать обработчик Windows для внедрения кода в целевой процесс, а в рамках целевого процесса отправить его обратно вызывающему объекту.

**Жетпроцесшандлефромхвнд** — это удобная функция, которая использует этот метод для получения дескриптора процесса, владеющего указанным HWND. Обратите внимание, что она выполняется только в тех случаях, когда вызывающий и целевой процессы выполняются как один и тот же пользователь. Возвращенный обработчик имеет следующие привилегии: Process \_ DUP обработка операции виртуальной машины обработка виртуальной машины процесс \_ \| чтения виртуальной \_ \_ \| \_ \_ \| \_ машины \_ запись \| Синхронизация. Если требуются другие привилегии, то вместо использования этой функции может потребоваться реализовать методику привязки явным образом.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|---------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Только для \[ классических приложений Windows XP\]<br/>                                           |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2003\]<br/>                                  |
| DLL<br/>                      | <dl> <dt>Oleacc.dll</dt> </dl> |



 

