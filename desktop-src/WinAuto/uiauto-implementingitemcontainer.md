---
title: Шаблон элемента управления ItemContainer
description: Описывает правила и соглашения для реализации Иитемконтаинерпровидер, включая сведения о методах. Шаблон элемента управления ItemContainer используется для поддержки виртуализации элементов.
ms.assetid: 6f3dd94e-3563-4a13-9db9-5928a02bab77
keywords:
- Модель автоматизации пользовательского интерфейса, реализация шаблона элемента управления ItemContainer
- Модель автоматизации пользовательского интерфейса, шаблон элемента управления ItemContainer
- Модель автоматизации пользовательского интерфейса, Иитемконтаинерпровидер
- IItemContainerProvider
- реализация шаблонов элементов управления ItemContainer модели автоматизации пользовательского интерфейса
- Шаблоны элементов управления ItemContainer
- шаблоны элементов управления, Иитемконтаинерпровидер
- шаблоны элементов управления, реализация модели автоматизации пользовательского интерфейса ItemContainer
- шаблоны элементов управления, ItemContainer
- интерфейсы, Иитемконтаинерпровидер
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 55246abde51e7053bf0c3266ccbe9c2b080b2fe7
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103775224"
---
# <a name="itemcontainer-control-pattern"></a>Шаблон элемента управления ItemContainer

Описывает правила и соглашения для реализации [**иитемконтаинерпровидер**](/windows/desktop/api/UIAutomationCore/nn-uiautomationcore-iitemcontainerprovider), включая сведения о методах. Шаблон элемента управления **ItemContainer** используется для поддержки виртуализации элементов.

Элементы управления, содержащие большое количество дочерних элементов, могут использовать виртуализацию для эффективного управления элементами. При использовании виртуализации элемент управления сохраняет полную информацию в памяти только для подмножества элементов в любой момент времени. Как правило, подмножество включает только те элементы, которые в настоящее время видны пользователю. Полные сведения о оставшихся виртуализованных элементах хранятся в хранилище и загружаются в память, так как им требуется элемент управления, например, когда новые элементы становятся видимыми для пользователя.

Например, на следующей диаграмме показан список, содержащий тысячи виртуализированных элементов. Поскольку элемент управления поддерживает полную информацию только для дочерних элементов, которые в настоящий момент видимы, поставщик может предоставлять элементы автоматизации пользовательского интерфейса Майкрософт только для элементов с 100 по 127.

![Диаграмма, показывающая элементы в поле со списком, которые виртуализированы и не виртуализированы](images/virtualizeditems.jpg)

Элементы управления, использующие виртуализацию, представляют проблему, так как только реализованные (удаленные) элементы полностью доступны в виде элементов модели автоматизации пользовательского интерфейса в дереве модели автоматизации пользовательского интерфейса. Виртуализированные элементы не существуют в дереве, поэтому сведения о них недоступны.

Чтобы предоставить сведения о виртуализированных элементах, поставщики реализуют шаблон элемента управления **ItemContainer** , который предоставляет интерфейс [**иитемконтаинерпровидер**](/windows/desktop/api/UIAutomationCore/nn-uiautomationcore-iitemcontainerprovider) . Метод [**финдитембипроперти**](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-iitemcontainerprovider-finditembyproperty) находит дочерние элементы на основе значения конкретного свойства, например **Name**, **AutomationId** или **SELECT**. Если элемент виртуализирован, **финдитембипроперти** получает элемент заполнителя модели автоматизации пользовательского интерфейса для элемента. Элемент-заполнитель является реализацией интерфейса [**иравелементпровидерсимпле**](/windows/desktop/api/UIAutomationCore/nn-uiautomationcore-irawelementprovidersimple) , поддерживающего только шаблон элемента управления [виртуализедитем](uiauto-implementingvirtualizeditem.md) .

Метод [**ивиртуализедитемпровидер:: реализовать**](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-ivirtualizeditemprovider-realize) позволяет клиенту запрашивать возможность реализации виртуализированного элемента, тем самым предоставляя полный элемент автоматизации пользовательского интерфейса для элемента, чтобы были доступны все необходимые свойства и шаблоны.

Хотя основной целью шаблона элемента управления **ItemContainer** является поддержка виртуализированных сценариев контейнеров, она может быть реализована любым контейнером, который получает дочерние элементы по имени независимо от того, использует ли контейнер виртуализацию.

В этом разделе содержатся следующие подразделы.

-   [Правила и соглашения реализации](#implementation-guidelines-and-conventions)
-   [Обязательные члены для Иитемконтаинерпровидер](#required-members-for-iitemcontainerprovider)
-   [См. также](#related-topics)

## <a name="implementation-guidelines-and-conventions"></a>Правила и соглашения реализации

При реализации шаблона элемента управления **ItemContainer** Обратите внимание на следующие правила и соглашения.

-   Любой элемент управления, который может содержать виртуализированные элементы, должен поддерживать шаблон элемента управления **ItemContainer** . Любой контейнер, поддерживающий извлечение элементов на основе значения свойства, может поддерживать этот шаблон независимо от того, использует ли контейнер виртуализацию.
-   Если контейнер является виртуализированным, это может повлиять на другие шаблоны элементов управления, такие как [Выбор](uiauto-implementingselection.md), [Таблица](uiauto-implementingtable.md)и [Сетка](uiauto-implementinggrid.md) . Например, метод [**иселектионпровидер::**](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-iselectionprovider-getselection) WebMethod может поддерживать только элементы, находящиеся в окне просмотра, или только выбранные элементы, которые в настоящее время не виртуализированы.
-   Виртуализация не влияет на шаблон элемента управления [Scroll](uiauto-implementingscroll.md) .
-   Для виртуализированных элементов нет доступных сведений о количестве элементов или индексе. Виртуализованный элемент управления может использовать свойство **DescribedBy** или **итемстатус** для предоставления этих сведений при необходимости.
-   Разработчики элементов управления должны документировать и публиковать сведения обо всех свойствах модели автоматизации пользовательского интерфейса и шаблонах элементов управления, на которые влияет использование виртуализации. Хотя шаблоны элементов управления ItemContainer и [виртуализедитем](uiauto-implementingvirtualizeditem.md) обеспечивают базовую поддержку, они могут не поддерживать некоторые варианты поведения виртуализации.

Следующие рекомендации и требования применяются к методу [**иитемконтаинерпровидер:: финдитембипроперти**](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-iitemcontainerprovider-finditembyproperty) .

-   Хотя это и не является обязательным, корпорация Майкрософт настоятельно рекомендует [**финдитембипроперти**](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-iitemcontainerprovider-finditembyproperty) поддерживать свойства **Name**, **AutomationId** и **OnSelect** .
-   [**Финдитембипроперти**](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-iitemcontainerprovider-finditembyproperty) может быть достаточно длительным, если необходимо выполнить обход нескольких объектов, чтобы найти соответствующий.
-   [**Финдитембипроперти**](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-iitemcontainerprovider-finditembyproperty) можно вызывать многократно для поиска элементов последовательно. Элементы могут находиться в любом порядке, если каждый элемент возвращается только один раз.
-   [**Финдитембипроперти**](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-iitemcontainerprovider-finditembyproperty) может быть реализован для поиска только тех элементов, которые отображаются в представлении элемента управления или содержимого дерева модели автоматизации пользовательского интерфейса. Элементы, которые появляются только в представлении RAW, можно пропустить, чтобы избежать извлечения нескольких элементов, представляющих только часть элемента, пользователю.
-   Когда критерий поиска соответствует виртуализированному элементу, поставщик может вернуть элемент-заполнитель, который поддерживает шаблон элемента управления [виртуализедитем](uiauto-implementingvirtualizeditem.md) . Следующие рекомендации применяются к элементам заполнителей.
    -   Получение элемента заполнителя для виртуализированного элемента не должно приводить к изменениям пользовательского интерфейса.
    -   Элемент заполнителя должен быть однорангом других дочерних элементов (требуется событие, измененное структурой).
    -   По возможности поставщик может создать полный элемент автоматизации вместо заполнителя.
-   Если критерий поиска соответствует невиртуализированному элементу, поставщик должен возвращать фактический элемент, а не заполнитель.
-   Если элемент не найден, [**иитемконтаинерпровидер:: финдитембипроперти**](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-iitemcontainerprovider-finditembyproperty) должен задать для параметра *пфаунд* **значение NULL** и вернуть команду **S \_ ОК**.
-   Если параметр *PropertyId* имеет значение 0, поставщик должен вернуть следующий элемент после *пстартафтер*.
-   Если параметр *пстартафтер* имеет **значение NULL** , а *PropertyId* равен 0, поставщик должен вернуть первый элемент в контейнере.
-   Если параметр *PropertyId* имеет значение 0, параметр value игнорируется.

Следующие рекомендации и требования применяются к элементам заполнителя для виртуализированных элементов в дереве модели автоматизации пользовательского интерфейса.

-   Хотя поставщики рекомендуется поддерживать больше свойств и шаблонов элементов управления для элемента-заполнителя, требуется только шаблон элемента управления [виртуализедитем](uiauto-implementingvirtualizeditem.md) .
-   Поставщик может сделать недействительным предыдущий элемент PlaceHolder при повторном вызове [**иитемконтаинерпровидер:: финдитембипроперти**](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-iitemcontainerprovider-finditembyproperty) . (Если клиент должен реализовать элемент PlaceHolder, он должен сделать это немедленно; в противном случае элемент может стать недействительным, если **финдитембипроперти** вызывается снова или если окно просмотра изменяется по какой-либо причине.)
-   Действия пользовательского интерфейса, такие как прокрутка или изменение размера, могут привести к изменению окна просмотра контейнера, а также к отображению нового набора дочерних элементов. В этом случае ранее извлеченные элементы-заполнители могут быть недоступны в дереве модели автоматизации пользовательского интерфейса.
-   Поставщик не должен виртуализировать элементы пользовательского интерфейса, доступные на экране в окне просмотра объекта контейнера.

## <a name="required-members-for-iitemcontainerprovider"></a>Обязательные члены для Иитемконтаинерпровидер

Для реализации интерфейса [**иитемконтаинерпровидер**](/windows/desktop/api/UIAutomationCore/nn-uiautomationcore-iitemcontainerprovider) требуется следующий метод.



| Обязательные члены                                                               | Тип члена | Примечания |
|--------------------------------------------------------------------------------|-------------|-------|
| [**финдитембипроперти**](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-iitemcontainerprovider-finditembyproperty) | Метод      | Нет  |



 

Шаблон элемента управления **ItemContainer** не имеет связанных свойств или событий.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Типы элементов управления и поддерживаемые ими шаблоны элементов управления](uiauto-controlpatternmapping.md)
</dt> <dt>

[Общие сведения о шаблонах элементов управления модели автоматизации пользовательского интерфейса](uiauto-controlpatternsoverview.md)
</dt> <dt>

[Общие сведения о дереве модели автоматизации пользовательского интерфейса](uiauto-treeoverview.md)
</dt> <dt>

[Шаблон элемента управления Виртуализедитем](uiauto-implementingvirtualizeditem.md)
</dt> </dl>

 

 




