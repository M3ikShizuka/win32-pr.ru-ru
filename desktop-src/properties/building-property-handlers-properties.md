---
description: Свойства представлены идентификаторами, известными как идентификаторы свойств (PID).
ms.assetid: a773c7b3-a1a2-4cce-ae5f-b54217ea06f4
title: Основные сведения о обработчиках свойств
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 42139a869551f0f4dc786f02c66c673a49495ba01f5258aeeff12051bd3f60b8
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119946974"
---
# <a name="understanding-property-handlers"></a>Основные сведения о обработчиках свойств

Свойства представлены идентификаторами, известными как идентификаторы свойств (PID). Каждое свойство должно иметь глобальный уникальный идентификатор (GUID). Этот идентификатор состоит из идентификатора GUID, представляющего коллекцию свойств, называемых набором свойств, а также строку или 32-разрядное целое число для идентификации свойства в наборе. Если используется целочисленная форма идентификатора, значения 0x00000000, 0xFFFFFFFF и 0xFFFFFFFE считаются недопустимыми. Поставщики гарантируют, что их свойства определяются уникальным образом, помещая их в набор свойств, определенный собственными идентификаторами GUID.

> [!IMPORTANT]
> Важно тщательно и стратегически определять свойства для первого выпуска схемы. Любые изменения пользовательских свойств (например, ширина столбца или тип свойства) не будут отражены в базе данных после регистрации схемы. Единственный способ определить эти изменения после того, как схема была зарегистрирована в системе, — либо перестроить индекс, либо зарегистрировать новую схему, либо зарегистрировать схему, а затем создать новое свойство (которое состоит из канонического имени и PKEY) для каждого выпуска субекуент; например `PKEY_GroupName_PropertyNameV2` , `PKEY_GroupName_PropertyNameV3` и т. д.). Не рекомендуется создавать новые свойства таким образом, поскольку несколько внешних столбцов могут повлиять на производительность системы.

 

Этот раздел организован следующим образом:

-   [Метаданные](#metadata)
    -   [Открыть метаданные](#open-metadata)
-   [Сведения об обработчиках свойств](#about-property-handlers)
-   [Устаревшие технологии](#legacy-technology)
-   [Связанные темы](#related-topics)

## <a name="metadata"></a>Метаданные

в Windows Vista и более поздних версиях новая система свойств, основанная на метаданных, является центральной для организации таких элементов, как файлы, электронная почта и контакты. В этой новой системе свойств можно выполнять поиск элементов на основе их метаданных, а пользователи могут считывать или записывать эти метаданные. Метаданные в этой системе представлены расширяемым набором *свойств* , реализованных как пары "имя-значение".

в Windows Vista и более поздних версиях широкий набор свойств охватывает особенности таких элементов, как фотографии, музыка, документы, сообщения, контакты и файлы. Независимые поставщики программного обеспечения могут представлять собственные свойства платформы, если ни одно из существующих свойств не соответствует их потребностям.

### <a name="open-metadata"></a>Открыть метаданные

система свойств в Windows Vista и более поздних версий — это открытая система метаданных. Формат файла сохраняет любое присвоенное ему свойство и предоставляет это значение при запросе, независимо от релевантности или значения. Это позволяет сторонним разработчикам прикреплять дополнительные свойства к файлу, не требуя изменения связанного с ним обработчика свойств. Открытые метаданные — это мощная концепция. Дополнительные сведения о поддержке открытых метаданных для формата файлов на основе XML см. в разделе "Поддержка открытых метаданных" раздела [инициализация обработчиков свойств](./building-property-handlers-property-handlers.md).

> [!Note]  
> Обработчики свойств всегда связаны с конкретными типами файлов. Таким же, если формат файла содержит свойства, требующие пользовательского обработчика свойств, всегда следует регистрировать уникальное расширение имени файла для каждого формата файла.

 

## <a name="about-property-handlers"></a>Сведения об обработчиках свойств

в Windows Vista и более поздних версий Windows имеет расширяемую систему свойств для хранения и извлечения метаданных в файлах и элементах данных, к которым вы обращаетесь. Windows обозреватель и система поиска Windows, а также другие приложения используют обработчики свойств для чтения и изменения этих метаданных. Если вы являетесь разработчиком, которому принадлежит конкретный тип файла, следует зарегистрировать обработчик свойств, чтобы предоставить системе свойств доступ к метаданным в файлах. В некоторых случаях можно использовать существующий обработчик свойств, который может считывать и понимать формат файла и его свойства. в других случаях может потребоваться разработать новый обработчик свойств для типа файлов.

Первым шагом при написании обработчика свойств является рассмотрение того, какие свойства поддерживает ваш тип файла. Значения свойств хранятся в потоке файлов в основном для обеспечения возможности транспортного потока. Если значения свойств хранятся в самом файле, как они находятся в этой системе, пользователь может скопировать файл на другой компьютер, USB-накопитель или другую файловую систему или отправить файл как вложение электронной почты, свойства передаются вместе с файлом и никогда не будут потеряны или утеряны. Поэтому, если формат файла поддерживает хранение дополнительной информации, лучше хранить свойства в самом файле.

Следующим шагом является определение свойств, которые должен предоставить файл. Вы можете сначала подумать, что ограниченный набор свойств достаточно. Звуковой файл может поддерживать только свойства, связанные со звуком, и заканчивать его. Однако этот звуковой файл может быть записан в течение сеанса судебного законодательства, архивированного юридическим утверждением. В этом случае Юридическая фирма, безусловно, хочет связать с этим файлом другие свойства, не являющиеся звуком, например номер варианта. Поставщик формата звукового файла не может определить все сценарии, в которых будет использоваться их формат. Поэтому следует рассмотреть возможность включения общего хранилища любого произвольного свойства, поддерживаемого системой свойств.

## <a name="legacy-technology"></a>Устаревшие технологии

технология вторичных потоков Microsoft Windows NT файловой системы (NTFS) была разработана для поддержки сохраняемости дополнительной информации с файлом через альтернативный потоковый набор на уровне файловой системы. Может возникнуть вопрос, почему эти вторичные потоки не используются в качестве метода Main для хранения свойств, особенно с поддержкой Open Metadata. Основная причина — это транспортная часть этих дополнительных сведений. К сожалению, эти альтернативные потоки удаляются во многих сценариях, включая поддержку кэширования на стороне клиента (CSC), передачу файлов в виде вложений и копирование файлов в хранилище, отличное от NTFS.

вторичные потоки не предоставляют надежного решения, в котором свойства гарантированно перемещаются с файлом, и поэтому система свойств Windows Vista не предоставляет встроенный механизм, который использует вторичные потоки NTFS для хранения свойств. Независимые поставщики программного обеспечения также настоятельно не рекомендуются для создания обработчиков свойств, использующих вторичные потоки для хранения свойств. Конечно, существуют ситуации, когда вторичные потоки NTFS подходят, особенно если приложения могут гарантировать, что файл, с которым они работают, всегда хранится в томе NTFS и не будет передаваться в результате взаимодействия с пользователем.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Использование имен видов](./building-property-handlers-user-friendly-kind-names.md)
</dt> <dt>

[Использование списков свойств](./building-property-handlers-property-lists.md)
</dt> <dt>

[Инициализация обработчиков свойств](./building-property-handlers-property-handlers.md)
</dt> <dt>

[Регистрация и распространение обработчиков свойств](./prophand-reg-dist.md)
</dt> <dt>

[Рекомендации и вопросы и ответы по обработчикам свойств](./prophand-bestprac-faq.yml)
</dt> </dl>

 

 
