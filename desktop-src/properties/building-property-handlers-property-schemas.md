---
description: свойства, используемые в системе свойств Windows Vista и более поздних версий, объявляются в схемах свойств.
ms.assetid: 4e301210-df3a-41db-a58e-015ee8d41714
title: Создание пользовательских свойств
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d33ebd18c799dca757c1cf7e5b2f16fd35edb6072a52f7d1f5d41749ec0b8341
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117685568"
---
# <a name="creating-custom-properties"></a>Создание пользовательских свойств

свойства, используемые в системе свойств Windows Vista и более поздних версий, объявляются в схемах свойств. эти схемы свойств определяются в XML-файлах и описывают различные аспекты свойства, включая его тип (включая сведения о его примитивном типе и о том, является ли он многозначным), как он может отображаться в Windows пользовательском интерфейсе, какие метки (удобные для пользователя строки редактирования) используются вместе с ним и как они кэшируются в хранилище поиска для более быстрого доступа. Свойства определяются по каноническому имени или ключу их свойства (PKEY).

Каноническое имя — это понятное имя свойства, использующее соглашение о пространстве имен, аналогичное использованному в Microsoft .NET. для системных свойств (которые включены в Windows) соглашение имеет значение `System.GroupName.PropertyName` . Обратите внимание, что в этих именах используется схема регистра языка Pascal, которая состоит из букв в начале каждого слова. Канонические имена используются в различных местах, включая списки свойств и имена столбцов в кэше свойств. поэтому они используются в запросах язык SQL (SQL) для получения значения свойства.

PKEY — это пара значений, состоящих из GUID и **DWORD**, которые называются *форматид* и *PropID* соответственно. Он представлен структурой [**PROPERTYKEY**](/windows/win32/api/wtypes/ns-wtypes-propertykey) . Большинство API-интерфейсов системы свойств принимают эти ключи свойств. Windows пакет средств разработки программного обеспечения (SDK) включает заголовочный файл с расширением pkey. h, включающий в себя определение каждого из `System` ключей свойств с помощью соглашения `PKEY_GroupName_PropertyName` . Например, `PKEY_Photo_DateTaken` — это ключ свойства для свойства с каноническим именем `System.Photo.DateTaken` . Значения свойств хранятся в виде структуры [**пропвариант**](/windows/win32/api/propidlbase/ns-propidlbase-propvariant) , которая является РАСШИРЕНИЕМ типов Variant OLE.

В этом разделе содержится следующий раздел, который является неотъемлемой частью создания пользовательских свойств.

-   [Основные сведения о схеме описания свойства](./propdesc-schema-entry.md)

> [!Note]  
> Из-за потенциальных проблем, которые может иметь индексатор при использовании схемы системы свойств, очень важно определить атрибуты внимательно и стратегически для первого выпуска схемы. Любые изменения атрибутов (тип, ширина столбца, будь то индексибле) не будут отражаться в базе данных после регистрации схемы. Единственным способом определения этих изменений после регистрации схемы в системе может быть либо перестроение индекса, а затем регистрация новой схемы или регистрация схемы, а затем создание нового свойства для каждого последующего выпуска. например `PKEY_GroupName_PropertyNameV2` , `PKEY_GroupName_PropertyNameV3` и т. д.). Не рекомендуется создавать новые свойства таким образом, поскольку несколько внешних столбцов могут повлиять на производительность системы.

 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Реализация обработчиков свойств](./building-property-handlers.md)
</dt> <dt>

[Схема описания свойства](./propdesc-schema-entry.md)
</dt> </dl>

 

 
