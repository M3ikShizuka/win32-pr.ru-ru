---
description: Свойства, используемые в системе свойств Windows Vista и более поздних версий, объявляются в схемах свойств.
ms.assetid: 4e301210-df3a-41db-a58e-015ee8d41714
title: Создание пользовательских свойств
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 90849383e25889edf7f3abd4704c36354eff153c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104346645"
---
# <a name="creating-custom-properties"></a>Создание пользовательских свойств

Свойства, используемые в системе свойств Windows Vista и более поздних версий, объявляются в схемах свойств. Эти схемы свойств определяются в XML-файлах и описывают различные аспекты свойства, включая его тип (включая сведения о его примитивном типе и о том, является ли он многозначным), как он может быть отображен в пользовательском интерфейсе Windows, какие метки (удобные для пользователя строки редактирования) используются вместе с ним, и как она кэшируется в хранилище поиска для более быстрого доступа. Свойства определяются по каноническому имени или ключу их свойства (PKEY).

Каноническое имя — это понятное имя свойства, использующее соглашение о пространстве имен, аналогичное использованному в Microsoft .NET. Для системных свойств (которые входят в состав Windows) используется соглашение `System.GroupName.PropertyName` . Обратите внимание, что в этих именах используется схема регистра языка Pascal, которая состоит из букв в начале каждого слова. Канонические имена используются в различных местах, включая списки свойств и имена столбцов в кэше свойств. Поэтому они используются в запросах язык SQL (SQL) для получения значения свойства.

PKEY — это пара значений, состоящих из GUID и **DWORD**, которые называются *форматид* и *PropID* соответственно. Он представлен структурой [**PROPERTYKEY**](/windows/win32/api/wtypes/ns-wtypes-propertykey) . Большинство API-интерфейсов системы свойств принимают эти ключи свойств. Пакет средств разработки программного обеспечения (SDK) для Windows включает файл заголовка "PKEY. h", включающий в себя определение каждого `System` ключа свойства в соответствии с соглашением `PKEY_GroupName_PropertyName` . Например, `PKEY_Photo_DateTaken` — это ключ свойства для свойства с каноническим именем `System.Photo.DateTaken` . Значения свойств хранятся в виде структуры [**пропвариант**](/windows/win32/api/propidlbase/ns-propidlbase-propvariant) , которая является РАСШИРЕНИЕМ типов Variant OLE.

В этом разделе содержится следующий раздел, который является неотъемлемой частью создания пользовательских свойств.

-   [Основные сведения о схеме описания свойства](./propdesc-schema-entry.md)

> [!Note]  
> Из-за потенциальных проблем, которые может иметь индексатор при использовании схемы системы свойств, очень важно определить атрибуты внимательно и стратегически для первого выпуска схемы. Любые изменения атрибутов (тип, ширина столбца, будь то индексибле) не будут отражаться в базе данных после регистрации схемы. Единственным способом определения этих изменений после регистрации схемы в системе может быть либо перестроение индекса, а затем регистрация новой схемы или регистрация схемы, а затем создание нового свойства для каждого последующего выпуска. например `PKEY_GroupName_PropertyNameV2` , `PKEY_GroupName_PropertyNameV3` и т. д.). Не рекомендуется создавать новые свойства таким образом, поскольку несколько внешних столбцов могут повлиять на производительность системы.

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Реализация обработчиков свойств](./building-property-handlers.md)
</dt> <dt>

[Схема описания свойства](./propdesc-schema-entry.md)
</dt> </dl>

 

 
