---
title: Ограничение времени клиента с помощью IDirectorySearch
description: Клиент может установить ограничение по времени, чтобы сервер возвращал результирующий набор. Если серверу не удается ответить на запрос в течение указанного периода времени, клиент может отменить поиск и повторить попытку позже.
ms.assetid: fe8a8b08-b34d-4aa5-a925-bcda6e72d437
ms.tgt_platform: multiple
keywords:
- Ограничение времени клиента с помощью IDirectorySearch
- ADSI, поиск, IDirectorySearch, другие параметры поиска, ограничение времени клиента
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ed25bd8499f7166d7ea494f71e6f78193f9c778a
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "105654145"
---
# <a name="client-time-limit-with-idirectorysearch"></a>Ограничение времени клиента с помощью IDirectorySearch

Клиент может установить ограничение по времени, чтобы сервер возвращал результирующий набор. Если серверу не удается ответить на запрос в течение указанного периода времени, клиент может отменить поиск и повторить попытку позже.

Настройка ограничения времени клиента полезна, когда клиент запрашивает асинхронный поиск. При асинхронном поиске клиент выполняет запрос, а затем переходит к другим задачам, ожидая возврата результатов сервером. Возможно, сервер может переключиться в режим «вне сети» без уведомления клиента. В этом случае клиент не будет иметь уведомления о том, обрабатывается ли сервер запросом или перестает быть активным. Настройка предельного времени клиента дает клиенту некоторый контроль над подобными ситуациями.

Значение по умолчанию для ограничения по времени клиента не ограничено. Чтобы установить предельное время клиента, задайте параметру сеарчпреф поиска по **\_ \_ времени ожидания** с **адстипе \_ целым числом** , которое содержит предельное время клиента (в секундах) в массиве [**\_ \_ сведений об ADS сеарчпреф**](/windows/desktop/api/Iads/ns-iads-ads_searchpref_info) , переданном в метод [**IDirectorySearch:: сетсеарчпреференце**](/windows/desktop/api/Iads/nf-iads-idirectorysearch-setsearchpreference) . Ограничение времени клиента, равное нулю, указывает на отсутствие ограничения по времени.

В следующем примере кода показано, как задать предельное время клиента.


```C++
ADS_SEARCHPREF_INFO SearchPref;
SearchPref.dwSearchPref = ADS_SEARCHPREF_TIMEOUT;
SearchPref.vValue.dwType = ADSTYPE_INTEGER;
SearchPref.vValue.Integer = 10;
```



 

 




