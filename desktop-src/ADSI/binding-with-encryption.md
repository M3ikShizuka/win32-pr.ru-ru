---
title: Привязка с шифрованием
description: Конфиденциальные данные, которыми обмениваются сети, должны быть зашифрованы.
ms.assetid: 51fe2131-5f7d-41b1-ad88-d965cbb4d630
ms.tgt_platform: multiple
keywords:
- ADSI ADSI, использование, привязка с шифрованием
- Привязка с шифрованием
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8cf19747a8356459f4ab50c0aa409f69b58eb224
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986116"
---
# <a name="binding-with-encryption"></a>Привязка с шифрованием

Конфиденциальные данные, которыми обмениваются сети, должны быть зашифрованы. Чтобы разрешить это, ADSI поддерживает два типа шифрования: Kerberos и SSL (SSL). Оба типа шифрования должны использовать [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) или [**Иадсопендсобжект:: опендсобжект**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) для привязки.

В этом случае **GetObject** и [**адсжетобжект**](/windows/desktop/api/Adshlp/nf-adshlp-adsgetobject) не могут использоваться для привязки, поскольку эти функции вызывают LDAP-запросы, используемые ADSI, и данные, возвращаемые сервером каталогов, для передачи по сети в виде открытого текста. В целях отладки рекомендуется отключить шифрование, чтобы сетевой монитор можно было использовать для просмотра запросов LDAP и данных между клиентом и сервером каталога.

## <a name="kerberos-based-encryption"></a>Шифрование на основе Kerberos

Чтобы использовать шифрование на основе Kerberos, укажите **баннеры, \_ используя флаг \_ запечатывания** при вызове [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) или [**иадсопендсобжект:: опендсобжект**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject). Для проверки целостности данных можно также использовать флаг **\_ \_ запечатывания рекламы** , то есть убедиться, что полученные данные совпадают с отправленными данными. Если в **рекламе \_ используется флаг \_ запечатывания** , **баннеры также \_ используют флаг \_ подписывания** . Для обоих флагов требуется проверка подлинности Kerberos, которая работает только при следующих условиях.

-   Клиентский компьютер должен входить в домен Windows или в домен, являющийся доверенным для домена Windows.
-   [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) или [**Иадсопендсобжект:: опендсобжект**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) должны вызываться с пустыми учетными данными. то есть нельзя указать альтернативные учетные данные.

## <a name="ssl-based-encryption"></a>Шифрование на основе SSL

Чтобы использовать шифрование на основе SSL, укажите **объявление \_ использовать флаг \_ SSL** при вызове [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) или [**иадсопендсобжект:: опендсобжект**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject). Если задан флаг **\_ \_ SSL** только в ADS, ADSI открывает SSL-порт 636, а затем выполняет простую привязку по этому каналу SSL. Если используются флаги **\_ \_ SSL** для **\_ безопасной \_ проверки подлинности** и ADS, то поведение привязки зависит от клиента, из которого выполняется вызов. В неподдерживаемых версиях Windows ADSI сначала открыли канал SSL и выполняет простую привязку, используя указанные имя пользователя и пароль или контекст текущего пользователя, если имя пользователя и пароль имеют значение null. В поддерживаемых версиях Windows интерфейс ADSI выполняет безопасную проверку подлинности, а не простую привязку.

Чтобы использовать шифрование на основе SSL при взаимодействии с Active Directory, Active Directory должна иметь включенную инфраструктуру открытых ключей (PKI). PKI можно включить, настроив центр сертификации предприятия на одном из серверов в Active Directory, включая один из самих серверов Active Directory. Настройка центра сертификации предприятия приводит к тому, что сервер Active Directory получает сертификат сервера, который затем можно использовать для шифрования на основе SSL.

 

 




