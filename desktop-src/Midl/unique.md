---
title: unique - атрибут
description: Атрибут \ Unique \ задает уникальный указатель.
ms.assetid: 0d668148-e65a-478f-9e47-2528d3caa84c
keywords:
- уникальный атрибут MIDL
topic_type:
- apiref
api_name:
- unique
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 57c176c9a246329b6193c97ca5ce356c2b433cb421b77b374e103778df1b79dd
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119822034"
---
# <a name="unique-attribute"></a>unique - атрибут

Атрибут **\[ Unique \]** задает уникальный указатель.

``` syntax
pointer_default(unique)

typedef [ unique [[ , type-attribute-list ]] ] type-specifier declarator-list; 

typedef struct-or-union-declarator 
{
    [ unique [[ , field-attribute-list ]] ] type-specifier declarator-list;
    ...}

[ unique [[ , function-attribute-list ]] ] type-specifier ptr-decl function-name(
    [[ [ parameter-attribute-list ] ]] type-specifier [[declarator]]
    , ...);

[[ [ function-attribute-list ] ]] type-specifier [[ptr-decl]] function-name(
    [ unique [[ , parameter-attribute-list ]] ] type-specifier [[declarator]]
    , ...);
```

## <a name="parameters"></a>Параметры

<dl> <dt>

*Type-Attribute-List* 
</dt> <dd>

Указывает один или несколько атрибутов, применяемых к типу. К допустимым атрибутам типа относятся **\[** [**Handle**](handle.md), **\]** **\[** [**Switch \_ Type**](switch-type.md) **\]** , **\[** [**передает \_ as**](transmit-as.md) **\]** ; атрибут указателя **\[** [**ref**](ref.md) **\]** , **\[ Unique \]** или **\[** [**ptr**](ptr.md) **\]** ;, а также **\[** [**\_ маркер контекста**](context-handle.md)атрибутов использования **\]** , **\[** [**String**](string.md) **\]** и **\[** [**Ignore**](ignore.md) **\]** . Несколько атрибутов разделяются запятыми.

</dd> <dt>

*Описатель типа* 
</dt> <dd>

Задает [базовый тип](midl-base-types.md), [**структуру**](struct.md), [**объединение**](union.md), тип [**перечисления**](enum.md) или идентификатор типа. Дополнительная спецификация хранилища может предшествовать *спецификатору типа*.

</dd> <dt>

*декларатор и декларатор-список* 
</dt> <dd>

Задает стандартные деклараторы C, такие как идентификаторы, деклараторы указателей и деклараторы массивов. Дополнительные сведения см. в разделе [атрибуты Array и Sized-Pointer](array-and-sized-pointer-attributes.md), [**массивы**](arrays-1.md). и [массивы и указатели](/windows/desktop/Rpc/arrays-and-pointers). *Список деклараторов* состоит из одного или нескольких деклараторов, разделенных запятыми. Идентификатор параметра-Name в деклараторе функции является необязательным.

</dd> <dt>

*декларатор структуры или объединения* 
</dt> <dd>

Задает объявление [**структуры**](struct.md) MIDL или [**объединения**](union.md) .

</dd> <dt>

*Список атрибутов Field* 
</dt> <dd>

Указывает ноль или более атрибутов полей, применимых к члену структуры, члену объединения или параметру функции. К допустимым атрибутам полей относятся: **\[** [**First \_**](first-is.md)—, **\]** **\[** [**Last \_ —**](last-is.md), **\]** **\[** [**length \_ —**](length-is.md) **\]** , **\[** [**\_**](max-is.md) **\]** **\[** [**\_**](size-is.md) **\]** **\[ \]** **\[ \]** **\[ \]** **\[ \]** **\[ \]** **\[ \_ Max —, Size —, строка атрибутов использования, Ignore и контекст контекста; атрибут указателя ref, Unique, PTR, и тип переключателя атрибута Union. \]** **\[ \_ \]** Несколько атрибутов полей разделяются запятыми.

</dd> <dt>

*Function-Attribute-List* 
</dt> <dd>

Указывает ноль или более атрибутов, которые применяются к функции. Допустимые атрибуты функции — **\[** [**обратный вызов**](callback.md) **\]** , **\[** [**локальный**](local.md) **\]** объект, атрибут указателя **\[ \] ref**, **\[ Unique \]** или **\[ ptr \]**; и атрибуты использования **\[ строка \]**, **\[ Ignore \]** и **\[ Контекстный \_ маркер \]**.

</dd> <dt>

*PTR-decl* 
</dt> <dd>

Указывает по крайней мере один декларатор указателя, к которому применяется **\[ уникальный \]** атрибут. Декларатор указателя аналогичен декларатору указателя, используемому в C; Он создается из \* указателя, модификаторов, таких как **FAR**, и квалификатора [**const**](const.md).

</dd> <dt>

*имя функции* 
</dt> <dd>

Задает имя удаленной процедуры.

</dd> <dt>

*Parameter-список атрибутов* 
</dt> <dd>

Состоит из нуля или более атрибутов, подходящих для указанного типа параметра. **Атрибуты параметров могут принимать и \[ \]** **\[ \]** исключать атрибуты направления. сначала атрибуты полей **\[ \_ \] :**, **\[ Last \_ \] -**, **\[ length \_ — \]**, **\[ Max \_ — \]**, **\[ size \_ — \]** и **\[ \_ тип \] переключателя**; атрибут указателя **\[ ref \]**, **UNIQUE** или [**ptr**](ptr.md), а также **\[ \_ маркер \] контекста** атрибутов использования и **\[ строка \]**. Атрибут использования **\[ Ignore \]** не может использоваться в качестве атрибута параметра. Несколько атрибутов разделяются запятыми.

</dd> </dl>

## <a name="remarks"></a>Remarks

Атрибуты указателя можно применять как атрибут типа. в качестве атрибута поля, который применяется к члену структуры, члену объединения или параметру; или в качестве атрибута функции, который применяется к возвращаемому типу функции. Атрибут указателя также может присутствовать с **\[** ключевым словом [**указателя \_ по умолчанию**](pointer-default.md) **\]** .

Уникальный указатель имеет следующие характеристики.

-   Может иметь значение **null**.
-   Может изменяться при вызове от **null** к значению, отличному от NULL, от **ненулевого** до **null** или от одного **значения,** отличного **от NULL,** к другому.
-   Может выделить новую память на клиенте. Когда уникальный указатель меняется со **значения NULL** на **значение**, отличное от NULL, данные, возвращаемые с сервера, записываются в новое хранилище.
-   Может использовать имеющуюся память на клиенте без выделения новой памяти. Когда уникальный указатель изменяется во время вызова из одного значения, отличного от **null** , на другое, предполагается, что указатель указывает на объект данных того же типа. Данные, возвращаемые с сервера, записываются в существующее хранилище, заданное значением уникального указателя перед вызовом.
-   Может иметь потерянную память на клиенте. Память, на которую ссылается уникальный указатель, не **равная NULL** , может никогда не освобождаться, если уникальный указатель изменяется на **null** во время вызова, а клиент не имеет другого способа разыменования хранилища.
-   Не вызывает присвоение псевдонимов. Как и хранилище, на которое указывает указатель ссылки, хранилище, на которое указывает уникальный указатель, не может быть достигнуто из любого другого имени в функции.

Заглушки вызывают предоставляемые пользователем функции управления памятью MIDL. пользователь самостоятельно [**\_ \_ выделяет**](/windows/desktop/Rpc/the-midl-user-allocate-function) и MIDL, чтобы выделить и освободить память, необходимую для уникальных указателей и их референтс. [**\_ \_**](/windows/desktop/Rpc/the-midl-user-free-function)

К уникальным указателям применяются следующие ограничения.

-   Атрибут **\[ Unique \]** не может применяться к параметрам обработчика привязки ( [**Handle \_ t**](handle-t.md)) и параметрам обработчика контекста.
-   Атрибут **\[ Unique \]** не может применяться к **\[** [](out-idl.md) **\]** параметрам указателей верхнего уровня только для выхода **\[ \]** (параметрам, имеющим только атрибут Direction).
-   По умолчанию указатели верхнего уровня в списках параметров являются **\[** [**ссылочными**](ref.md) **\]** указателями. Это справедливо, даже если интерфейс указывает **указатель \_ по умолчанию (уникальный)**. Параметры верхнего уровня в списках параметров должны быть указаны с **\[ уникальным \]** атрибутом, который является уникальным указателем.
-   Нельзя использовать уникальные указатели для описания размера массива или ARM-объединения, так как уникальные указатели могут иметь значение **null**. Это ограничение предотвращает возникновение ошибки, которая возникает, если в качестве размера массива используется значение **null** или размер Union-ARM.

## <a name="examples"></a>Примеры

``` syntax
pointer_default(unique) 
 
typedef [unique, string] unsigned char * MY_STRING_TYPE; 
 
[unique] char * MyFunction([in, out, unique] long * plNumber);
```

## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**массивы**](arrays-1.md)
</dt> <dt>

[Массивы и указатели](/windows/desktop/Rpc/arrays-and-pointers)
</dt> <dt>

[Атрибуты массива и Sized-Pointer](array-and-sized-pointer-attributes.md)
</dt> <dt>

[Базовые типы MIDL](midl-base-types.md)
</dt> <dt>

[**обратный вызов**](callback.md)
</dt> <dt>

[**const**](const.md)
</dt> <dt>

[**Контекстный \_ маркер**](context-handle.md)
</dt> <dt>

[**enum**](enum.md)
</dt> <dt>

[**первый \_ —**](first-is.md)
</dt> <dt>

[**handle**](handle.md)
</dt> <dt>

[**Handle \_ t**](handle-t.md)
</dt> <dt>

[**обращать**](ignore.md)
</dt> <dt>

[**Последний \_ —**](last-is.md)
</dt> <dt>

[**Длина \_ равна**](length-is.md)
</dt> <dt>

[**Языковые**](local.md)
</dt> <dt>

[**Максимальное \_ число**](max-is.md)
</dt> <dt>

[\_пользовательское \_ выделение MIDL](/windows/desktop/Rpc/the-midl-user-allocate-function)
</dt> <dt>

[\_бесплатный пользователь \_ MIDL](/windows/desktop/Rpc/the-midl-user-free-function)
</dt> <dt>

[**заполняет**](out-idl.md)
</dt> <dt>

[**Указатель \_ по умолчанию**](pointer-default.md)
</dt> <dt>

[**указатель**](ptr.md)
</dt> <dt>

[**ref**](ref.md)
</dt> <dt>

[**размер \_ равен**](size-is.md)
</dt> <dt>

[**Строка**](string.md)
</dt> <dt>

[**struct**](struct.md)
</dt> <dt>

[**Тип коммутатора \_**](switch-type.md)
</dt> <dt>

[**передать \_ как**](transmit-as.md)
</dt> <dt>

[**наборов**](union.md)
</dt> </dl>

 

 