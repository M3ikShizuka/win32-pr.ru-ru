---
title: атрибут const
description: Ключевое слово const изменяет тип объявления типа или типа параметра функции, предотвращая изменение значения.
ms.assetid: 398fab76-93f3-4d5a-9223-1c57c612b2d7
keywords:
- Константный атрибут MIDL
topic_type:
- apiref
api_name:
- const
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 7095e29daf18dc111caf37038b06b0beff5245a8
ms.sourcegitcommit: cb87082135319cbdc5df541e3071eebb83a58972
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2021
ms.locfileid: "111387063"
---
# <a name="const-attribute"></a>атрибут const

Ключевое слово **const** изменяет тип объявления типа или типа параметра функции, предотвращая изменение значения.

``` syntax
const const-type identifier = const-expression ;

[ typedef [ , type-attribute-list ] ] const const-type declarator-list;

[ typedef [ , type-attribute-list ] ] pointer-type const declarator-list;

[ [ function-attr-list ] ] type-specifier [ ptr-decl ] function-name(
    [ [ parameter-attribute-list ] ] ) const; 

const-type [declarator], [ [ parameter-attribute-list ] ] pointer-type const [declarator], ...);
```

## <a name="parameters"></a>Параметры

<dl> <dt>

*Const-тип* 
</dt> <dd>

Задает допустимое целое число, символ, строка или логический тип MIDL. Допустимые типы MIDL включают [**небольшие**](small.md), [**короткие**](short.md), [**длинные**](long.md), [**char**](char-idl.md),** \* чарâ* _, [_ * *WCHAR \_ t*](wchar-t.md), **WCHAR \_ тâ \**_, [_ *Byte* *](byte.md), **битеâ \** _ и [_*воидâ \**_](void.md). Типы integer и character могут быть знаками [ * _](signed.md) или [**без знака**](unsigned.md).

</dd> <dt>

*identifier* 
</dt> <dd>

Указывает допустимый идентификатор MIDL. Допустимые идентификаторы MIDL состоят из символов длиной до 31 алфавитно-цифровых и знаков подчеркивания и должны начинаться с символа алфавита или знака подчеркивания.

</dd> <dt>

*const-выражение* 
</dt> <dd>

Указывает выражение, идентификатор или цифровую или символьную константу, подходящую для указанного типа: константные целочисленные литералы или константные целочисленные выражения для целочисленных констант. Логические выражения, которые могут быть вычислены при компиляции для [**логических**](boolean.md) типов; Односимвольные константы для типов [**char**](char-idl.md) ; и строковые константы для **\[** [**строковых**](string.md) **\]** типов. Тип [ * *воидâ \** _](void.md) может быть инициализирован только значением _ * null * *.

</dd> <dt>

*Type-Attribute-List* 
</dt> <dd>

Указывает один или несколько атрибутов, применяемых к типу.

</dd> <dt>

*pointer-type* 
</dt> <dd>

Указывает допустимый тип указателя MIDL.

</dd> <dt>

*декларатор и декларатор-список* 
</dt> <dd>

Задает стандартные деклараторы C, такие как идентификаторы, деклараторы указателей и деклараторы массивов. Дополнительные сведения см. в разделе [атрибуты Array и Sized-Pointer](array-and-sized-pointer-attributes.md), [**массивы**](arrays-1.md), [массивы и указатели](/windows/desktop/Rpc/arrays-and-pointers). *Список деклараторов* состоит из одного или нескольких деклараторов, разделенных запятыми. Идентификатор параметра-Name в деклараторе функции является необязательным.

</dd> <dt>

*Function-attr-список* 
</dt> <dd>

Указывает ноль или более атрибутов, которые применяются к функции. Допустимые атрибуты функции — **\[** [**обратный вызов**](callback.md) **\]** , **\[** [**локальный**](local.md) **\]** объект, атрибут указателя **\[** [**ref**](ref.md) **\]** , **\[** [**UNIQUE**](unique.md) **\]** или **\[** [**ptr**](ptr.md) **\]** ; и атрибуты использования **\[** [**строка**](string.md) **\]** , **\[** [**Ignore**](ignore.md) **\]** и **\[** [**Контекстный \_ маркер**](context-handle.md) **\]** .

</dd> <dt>

*Описатель типа* 
</dt> <dd>

Задает [Базовый \_ тип](midl-base-types.md), [**структуру**](struct.md), [**объединение**](union.md), тип [**перечисления**](enum.md) или идентификатор типа. Дополнительная спецификация хранилища может предшествовать *спецификатору типа*.

</dd> <dt>

*PTR-decl* 
</dt> <dd>

Указывает ноль или несколько деклараторов указателей. Декларатор указателя аналогичен декларатору указателя, используемому в C. Он состоит из **\* *_ указателя, модификаторов, таких как _* FAR**, и квалификатора **const**.

</dd> <dt>

*имя функции* 
</dt> <dd>

Задает имя удаленной процедуры.

</dd> <dt>

*Parameter-список атрибутов* 
</dt> <dd>

Указывает ноль или более атрибутов направления, атрибутов полей, атрибутов использования и атрибутов указателя, подходящих для указанного типа параметра. Несколько атрибутов разделяются запятыми.

</dd> </dl>

## <a name="remarks"></a>Remarks

MIDL позволяет объявлять константные целочисленные, символьные, строковые и логические типы в теле интерфейса IDL-файла. Объявления типов **const** воссоздаются в создаваемом файле заголовка как директивы **\# define** .

Компиляторы DCE IDL не поддерживают константные выражения. Поэтому эта функция недоступна при использовании параметра компилятора MIDL [**/ОСФ**](-osf.md) .

Ранее определенная константа может использоваться как присвоенное значение последующей константы. Значение константного целочисленного выражения автоматически преобразуется в соответствующий целочисленный тип в соответствии с правилами преобразования C.

Значение символьной константы должно быть символом ASCII с одинарной кавычкой. Если символьная константа является самой одинарной кавычкой ('), символ обратной косой черты ( \\ ) должен предшествовать символу одинарной кавычки, как в \\ .

Значение константы символьной строки должно быть строкой, заключенной в двойные кавычки. В строке символ обратной косой черты ( **\\** ) должен предшествовать символу двойной кавычки ( **"** ), как в **\\ "**. В строке символ обратной косой черты ( **\\** ) представляет escape-символ. Строковые константы могут состоять не более чем из 255 символов.

Значение **null** является единственным допустимым значением для констант типа [ * *\* воидâ* _](void.md). Все атрибуты, связанные с объявлением _ *const**, игнорируются.

Компилятор MIDL не проверяет наличие ошибок диапазона при инициализации **константы** . Например, при указании "const Short x = 0xFFFFFFFF;" компилятор MIDL не сообщает об ошибке, а инициализатор воспроизводится в создаваемом файле заголовка.

## <a name="examples"></a>Примеры

``` syntax
const void *  p1        = NULL; 
const char    my_char1  = 'a'; 
const char    my_char2  = my_char1; 
const wchar_t my_wchar3 = L'a'; 
const wchar_t * pszNote = L"Note"; 
const unsigned short int x = 123; 
 
typedef [string] const char *LPCSTR; 
 
HRESULT GetName([out] wchar_t * const pszName );
```

## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**массивы**](arrays-1.md)
</dt> <dt>

[Базовые типы MIDL](midl-base-types.md)
</dt> <dt>

[**Boolean**](boolean.md)
</dt> <dt>

[**двухбайтовых**](byte.md)
</dt> <dt>

[**обратный вызов**](callback.md)
</dt> <dt>

[**типа**](char-idl.md)
</dt> <dt>

[**Контекстный \_ маркер**](context-handle.md)
</dt> <dt>

[**перечисления**](enum.md)
</dt> <dt>

[Файл определения интерфейса (IDL)](interface-definition-idl-file.md)
</dt> <dt>

[**обращать**](ignore.md)
</dt> <dt>

[**Языковые**](local.md)
</dt> <dt>

[**поддерживаем**](long.md)
</dt> <dt>

[**/осф**](-osf.md)
</dt> <dt>

[**указатель**](ptr.md)
</dt> <dt>

[**ref**](ref.md)
</dt> <dt>

[**short**](short.md)
</dt> <dt>

[**входил**](signed.md)
</dt> <dt>

[**значительные**](small.md)
</dt> <dt>

[**Строка**](string.md)
</dt> <dt>

[**struct**](struct.md)
</dt> <dt>

[**наборов**](union.md)
</dt> <dt>

[**unique**](unique.md)
</dt> <dt>

[**без знака**](unsigned.md)
</dt> <dt>

[**void**](void.md)
</dt> <dt>

[**WCHAR \_ t**](wchar-t.md)
</dt> </dl>

 

 