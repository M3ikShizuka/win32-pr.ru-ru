---
title: Требования к препроцессору C-препроцессор для MIDL
description: Эта страница относится только к разработчикам, имеющим определенные причины для замены препроцессора Microsoft C/C++ в качестве препроцессора, используемого MIDL, или для разработчиков, которые должны указывать настраиваемые параметры препроцессора.
ms.assetid: 1dd5eef4-5ea4-4958-8f53-9a95c0ccbf3e
keywords:
- MIDL компилятора MIDL, C-препроцессор, требования
- C-препроцессор MIDL, требования
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b49c4e0c086a52eda2705d72cf2a2ff22c759290
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986703"
---
# <a name="c-preprocessor-requirements-for-midl"></a>Требования к препроцессору C-препроцессор для MIDL

Эта страница относится только к разработчикам, имеющим определенные причины для замены препроцессора Microsoft C/C++ в качестве препроцессора, используемого MIDL, или для разработчиков, которые должны указывать настраиваемые параметры препроцессора. Для переопределения поведения компилятора по умолчанию используются параметры MIDL, [**/КПП \_ cmd**](-cpp-cmd.md), [**/КПП \_ OPT**](-cpp-opt.md)и [**/но \_ cpp**](-no-cpp-nocpp.md) . Обычно нет причин для замены препроцессора Microsoft C/C++, а также для указания настраиваемых параметров препроцессора.

Компилятор MIDL использует препроцессор C во время первоначальной обработки IDL-файла. Среда сборки, используемая при компиляции IDL-файлов, связана с препроцессором C/C++ по умолчанию. При использовании другого препроцессора параметр компилятора MIDL [**/КПП \_ cmd**](-cpp-cmd.md) позволяет переопределить имя препроцессора по умолчанию C/C++:

``` syntax
midl /cpp_cmd preprocessor_name filename
```

<dl> <dt>

<span id="preprocessor_name"></span><span id="PREPROCESSOR_NAME"></span>*имя препроцессора \_*
</dt> <dd>

Указывает имя препроцессора, используемого MIDL. Может быть указан с путем к двоичному файлу. Расширение EXE является необязательным.

</dd> <dt>

<span id="filename"></span><span id="FILENAME"></span>*файлов*
</dt> <dd>

Указывает имя IDL-файла.

</dd> </dl>

-   Компилятор MIDL должен иметь любые препроцессоры для отслеживания следующих соглашений:
-   Входной файл указывается в качестве последнего аргумента в командной строке.
-   Препроцессор должен перенаправить выходные данные на стандартное выходное устройство stdout.
-   В потоке вывода препроцессора имеются директивы **\# line** , позволяющие улучшить сообщения диагностики.
-   Директивы line являются единственными директивами препроцессора в выходном потоке.

MIDL предполагает, что порожденный препроцессор удалил все директивы препроцессора из входного потока компилятора, за исключением вхождений директивы line, необходимых для определения местоположения источника в сообщениях компилятора. При указании препроцессора, отличного от препроцессора Microsoft C/C++, или при задании параметров препроцессора с помощью параметра [**/КПП \_ OPT**](-cpp-opt.md) , следует указать соответствующий параметр препроцессора, который помещает директивы line во входной поток компилятора. Например, для препроцессора Microsoft C/C++ необходимо использовать параметр **/e** :

``` syntax
midl /cpp_cmd cl.exe /cpp_opt "/E" file.idl
```

Директива **\# line** принимается MIDL в одной из следующих форм:

``` syntax
#line digit-sequence "filename" new-line
 
# digit-sequence "filename" new-line
```

Полное описание директивы line и других директив препроцессора см. в документации по используемому компилятору C.

MIDL принимает только директиву препроцессора Line. Таким образом, если используется параметр [**/но \_ cpp**](-no-cpp-nocpp.md) , входной файл не должен содержать другие директивы препроцессора, или входной файл должен быть ОБРАБОТАН до вызова MIDL.

Дополнительные сведения см. [в разделе Работа с \# определениями в IDL-файлах](dealing-with-defines-in-idl-files-2.md).

 

 




