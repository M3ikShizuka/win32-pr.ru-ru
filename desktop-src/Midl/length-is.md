---
title: length_is - атрибут
description: Атрибут \ length = \_ \ указывает число передаваемых элементов массива. Необходимо указать неотрицательное значение.
ms.assetid: 060dbd4a-3078-4050-abfe-c1b633c06861
keywords:
- length_is атрибута MIDL
topic_type:
- apiref
api_name:
- length_is
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: fac217bae01c6896c7dadd36bb18f15e425a0427
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127143698"
---
# <a name="length_is-attribute"></a>Length \_ — атрибут

Атрибут **\[ \_ length \]** указывает количество передаваемых элементов массива. Необходимо указать неотрицательное значение.

``` syntax
[length_is( limited-expression-list )]
```

## <a name="parameters"></a>Параметры

<dl> <dt>

*список ограниченных выражений* 
</dt> <dd>

Указывает одно или несколько выражений языка C. Каждое выражение оценивается как целое число, представляющее число передаваемых элементов массива. Компилятор MIDL поддерживает условные выражения, логические выражения, реляционные выражения и арифметические выражения. MIDL не разрешает вызовы функций в выражениях и не поддерживает операторы инкремента и декремента. Несколько выражений разделяются запятыми.

</dd> </dl>

## <a name="remarks"></a>Remarks

Атрибут **\[ \_ length \]** определяет значение индексов массива, соответствующих **\[** [**\_**](last-is.md) **\]** **\[ \_ последнему атрибуту, если параметр Last не задан. \]** Связь между этими индексами массива выглядит следующим образом: Length = Last-First + 1.

Атрибут **\[ \_ length \]** не может использоваться одновременно с атрибутом **\[** [**Last \_ -**](last-is.md) **\]** Attribute или **\[** [**строковым**](string.md) **\]** атрибутом.

Чтобы определить подсчитанную строку с атрибутом **\[ length \_ \]** или **\[** [**Last \_ -**](last-is.md) **\]** Attribute, используйте массив символов или указатель без атрибута **\[** [**String**](string.md) **\]** .

Использование константного выражения с атрибутом **\[ length \_ является \]** недопустимым применением атрибута. Он является юридическим, но неэффективным и приведет к более медленному упаковке кода.

Можно использовать **\[** [**размер \_**](size-is.md) , **\]** а **\[ длина \_ \] —** атрибуты вместе. При этом **\[ размер \_ — \]** атрибут определяет объем памяти, выделенной для данных. Атрибут **\[ \_ length \]** определяет количество передаваемых элементов. Объем памяти, указанный в параметре **\[ size \_ , \] имеет** значение, и **\[ длина \_ \]** атрибута не должна совпадать. Например, клиент может передать **выходной \]** **\[ параметр на сервер** и указать большой объем **\[ \_ \]** памяти с размером, даже если он указывает небольшое **\[ \_ \]** количество элементов данных, которые должны быть переданы с длиной. Это позволяет серверу заполнить массив большим количеством данных, чем получено, который затем можно отправить обратно клиенту.

Как правило, нецелесообразно указывать оба **\[** [**размера, \_**](size-is.md) **\]** а **\[ длина \_ — \]** **\[** [**в**](in.md) **\]** параметрах in и **\[** [**out**](out-idl.md) **\]** . В обоих случаях **\[ размер \_ \]** управляет выделением памяти. Приложение может использовать **\[ размер \_ — \]** выделить больше элементов массива, чем передается (как **\[ \_ \]** указано в параметре length). Однако это будет неэффективно. Также было бы неэффективно указывать идентичные значения **\[ размера \_ \]** , а **\[ длина \_ — \]**. Так как при маршалировании параметров будет создаваться дополнительная нагрузка. Если значения **\[ size \_ \]** и **\[ length \_ не \]** совпадают, то параметр **\[ length \_ имеет \]** значение Attribute.

## <a name="examples"></a>Примеры

``` syntax
/* counted string holding at most "size" characters */ 
typedef struct 
{ 
    unsigned short size; 
    unsigned short length; 
    [size_is(size), length_is(length)] char string[*]; 
 } COUNTED_STRING_TYPE; 
 
/* counted string holding at most 80 characters */ 
typedef struct 
{ 
    unsigned short length; 
    [length_is(length)] char string[80]; 
} STATIC_COUNTED_STRING_TYPE; 
 
HRESULT Proc1(
    [in] short iLength; 
    [in, length_is(iLength)] short asNumbers[10]);
```

## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Атрибуты поля](/windows/desktop/Rpc/field-attributes)
</dt> <dt>

[**первый \_ —**](first-is.md)
</dt> <dt>

[Файл определения интерфейса (IDL)](interface-definition-idl-file.md)
</dt> <dt>

[**Последний \_ —**](last-is.md)
</dt> <dt>

[**Максимальное \_ число**](max-is.md)
</dt> <dt>

[**min \_ —**](min-is.md)
</dt> <dt>

[**размер \_ равен**](size-is.md)
</dt> <dt>

[**Строка**](string.md)
</dt> </dl>

 

 