---
title: Union, атрибут
description: Ключевое слово UNION отображается в функциях, связанных с размеченные объединения.
ms.assetid: 135a6581-e03e-4b90-9fd8-15690820dbd0
keywords:
- атрибут Union MIDL
topic_type:
- apiref
api_name:
- union
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: bc683472d67775c4a2900695246d5f9ca920ca32
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127143346"
---
# <a name="union-attribute"></a>Union, атрибут

Ключевое слово **Union** отображается в функциях, связанных с размеченные объединения.

``` syntax
/* Encapsulated union*/
typedef [[ [type-attribute-list] ]] union [[ struct-name ]] switch (switch-type switch-name) [[ union-name ]] 
{
  C-style-case-list 
  [[ [ field-attribute-list <> ] ]] type-specifier <> declarator-list <>;

        ...
}

/* Non-encapsulated union*/
typedef [switch_type(switch-type) [[ , type-attr-list ]] ] union [[ tag ]] 
{ 
    [ case ( limited-expr-list) ]
  [[ [ field-attribute-list ] ]] type-specifier declarator-list;
  [[ [ default ]
  [[ [ field-attribute-list ] ]] type-specifier declarator-list;
  ]]
}
```

## <a name="parameters"></a>Параметры

<dl> <dt>

*Type-Attribute-List* 
</dt> <dd>

Указывает ноль или более атрибутов, применимых к типу объединения. К допустимым атрибутам типа относятся **\[** [**Handle**](handle.md) **\]** , **\[** " [**передать \_ как**](transmit-as.md) **\]** ", атрибут указателя " **\[** [**уникальный**](unique.md)" **\]** или "PTR", а также **\[** [](ptr.md) **\]** **\[** [**\_ маркер контекста**](context-handle.md) атрибутов использования **\]** и **\[** [**игнорировать**](ignore.md) **\]** . Инкапсулированные объединения могут также иметь **\[** [](ref.md) **\]** атрибут типа ref Pointer. Несколько атрибутов разделяются запятыми.

</dd> <dt>

*имя структуры* 
</dt> <dd>

Задает необязательный тег, который именует структуру, созданную компилятором MIDL.

</dd> <dt>

*Тип переключателя* 
</dt> <dd>

Задает тип [**int**](int.md), [**char**](char-idl.md), [**enum**](enum.md) или идентификатор, который разрешается в один из этих типов.

</dd> <dt>

*имя коммутатора* 
</dt> <dd>

Задает имя переменной *типа Switch-Type* , которая выступает в качестве discriminant объединения.

</dd> <dt>

*имя объединения* 
</dt> <dd>

Задает необязательный идентификатор, который именует объединение в структуре, созданной компилятором MIDL, который содержит Union и discriminant.

</dd> <dt>

*C-style-Case-список* 
</dt> <dd>

Список "**case** *const-expr* :"

</dd> <dt>

*список ограниченных выражений* 
</dt> <dd>

Указывает одно или несколько выражений языка C. Компилятор MIDL поддерживает условные выражения, логические выражения, реляционные выражения и арифметические выражения. MIDL не разрешает вызовы функций в выражениях и не поддерживает операторы инкремента и декремента. Отдельные выражения в списке должны быть разделены запятыми.

</dd> <dt>

*Список атрибутов Field* 
</dt> <dd>

Указывает ноль или более атрибутов полей, применимых к элементу объединения. К допустимым атрибутам полей относятся: **\[** [**First \_**](first-is.md)—, **\]** **\[** [**Last \_ —**](last-is.md), **\]** **\[** [**length \_ —**](length-is.md) **\]** , **\[** [**Max \_ —**](max-is.md) **\]** , **\[** [**size \_ —**](size-is.md), **\]** String атрибуты использования **\[** [](string.md) **\]** , **\[** [**Ignore**](ignore.md) **\]** и **\[** [**Контекстный \_ маркер**](context-handle.md) **\]** ; атрибут указателя **\[** [**UNIQUE**](unique.md) **\]** или **\[** [**ptr**](ptr.md), **\]** а для членов, которые являются неинкапсулированными, **\[** [**\_ Тип переключателя**](switch-type.md)атрибута объединения **\]** . Неинкапсулированные объединения могут также использовать **\[** [](ref.md) **\]** атрибут поля REF Pointer. Несколько атрибутов полей разделяются запятыми.

</dd> <dt>

*Описатель типа* 
</dt> <dd>

Задает [базовый тип](midl-base-types.md), [**структуру**](struct.md), **объединение**, тип [**перечисления**](enum.md) или идентификатор типа. Дополнительная спецификация хранилища может предшествовать *спецификатору типа*.

</dd> <dt>

*декларатор-список* 
</dt> <dd>

Один или несколько стандартных деклараторов C, таких как идентификаторы, деклараторы указателей и деклараторы массивов. (Деклараторы функций и объявления битовых полей не допускаются в объединениях, передаваемых в удаленных вызовах процедур. За исключением случаев, когда используется параметр компилятора MIDL [**/ОСФ**](-osf.md), эти деклараторы допускаются в объединениях, которые не передаются.) Несколько деклараторов разделяются запятыми.

</dd> <dt>

*тегами* 
</dt> <dd>

Указывает необязательный тег.

</dd> </dl>

## <a name="remarks"></a>Remarks

MIDL поддерживает два типа размеченных объединений: [инкапсулированные объединения](encapsulated-unions.md) и [неинкапсулированные объединения](nonencapsulated-unions.md). Инкапсулированное объединение совместимо с предыдущими реализациями RPC (NCA версии 1). Неинкапсулированное объединение исключает некоторые ограничения инкапсулированного объединения и предоставляет более наглядный discriminant, чем инкапсулированное объединение.

Инкапсулированное объединение определяется ключевым словом [**switch**](switch.md) и отсутствием других ключевых слов, связанных с объединением.

Неинкапсулированное объединение, также называемое объединением, определяется наличием **\[** [**переключателя \_**](switch-is.md) **\]** и **\[** ключевыми словами [**\_ типа Switch**](switch-type.md) **\]** , которые определяют discriminant и его тип.

При использовании **\[** [**во**](in.md) [**внешних**](out-idl.md) **\]** объединениях имейте в виду, что изменение значения переключателя Union во время вызова может привести к поведению удаленного вызова иначе, чем при локальном вызове. При возврате заглушки копируют **\] выходной** параметр **\[ in** в память, которая уже имеется на клиенте. Когда удаленная процедура изменяет значение переключателя Union и, соответственно, изменяет размер объекта данных, заглушки могут перезаписывать допустимую память с **\[ выходным \]** значением. Когда параметр Union изменяет объект данных с базового типа на тип указателя, заглушки могут перезаписывать допустимую память при копировании указателя референт в место в памяти, указанное в параметре **\[ in \]** базового типа.

Чтобы обеспечить взаимодействие, форма объединений должна быть идентичной на разных платформах.

## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Инкапсулированные объединения](encapsulated-unions.md)
</dt> <dt>

[Файл определения интерфейса (IDL)](interface-definition-idl-file.md)
</dt> <dt>

[**окне**](in.md)
</dt> <dt>

[Неинкапсулированные объединения](nonencapsulated-unions.md)
</dt> <dt>

[**заполняет**](out-idl.md)
</dt> <dt>

[**параметр \_ имеет**](switch-is.md)
</dt> <dt>

[**Тип коммутатора \_**](switch-type.md)
</dt> </dl>

 

 




