---
title: backward_compat Switch
description: '\_Параметр совместимости/бакквард указывает компилятору MIDL отключить некоторые дополнительные функции при создании ЗАГЛУШЕК RPC/com.'
ms.assetid: eec0ade7-30a0-44e4-92e9-fb03ff657723
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd412bdabe4255a9a4538503b29ddf5681265ce5e16c81d3d5fc2484eb6c9675
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120086394"
---
# <a name="backward_compat-switch"></a>\_переключатель совместимости/бакквард

\_Параметр совместимости/бакквард указывает компилятору MIDL отключить некоторые дополнительные функции при создании ЗАГЛУШЕК RPC/com.

``` syntax
midl /backward_compat { maybenull_sizeis | zeroout_alignmentgap | 
     BSTR_byvalue_escaping | string_defaultvalue | signed_wchar_t }
```

## <a name="switch-options"></a>Параметры коммутатора

*\_Размер майбенулл*<dl> Применяет атрибут [ \[ отключения \_ \_ проверки \] согласованности](disable-consistence-check.md) ко всей компиляции MIDL.  
</dl>

*нулевое \_ алигнментгап*<dl> Отключает нулевые промежутки в упакованном буфере.  
</dl>

*\_Преобразование BSTR бивалуе \_*<dl> Направляет компилятор MIDL для обработки escape-последовательностей, таких как € ̃ \\ нâ €™ или ̃ \\ тâ™ € в bstrs.  
</dl>

*значение \_ DefaultValue для строки*<dl> Заставляет компилятор MIDL применяет строки в атрибутах [**\[ DefaultValue \]**](defaultvalue.md) к типу VARIANT. VT \_ I4 Type перед приведением значения к правильному типу.  
</dl>

*со знаком \_ WCHAR \_ t*<dl> Направляет MIDL для интерпретации типа WCHAR \_ t как подписанного на совместимость с Visual Basic.  
</dl>

## <a name="remarks"></a>Remarks

-   *\_ Размер майбенулл*: см \[ . раздел \_ отключение \_ проверки согласованности \] .
-   *нулевое \_ алигнментгап*: когда IDL компилируются с параметром "Target NT60 или выше", MIDL создаст заглушки, которые обнуляют любые пробелы выравнивания между элементами или структурой в сетевом буфере. Параметр командной строки/бакквард с функцией *\_ совместимости нулевого значения \_ алигнментгап* направляет MIDL для отключения этой функции.

    В следующем примере структуры проводной буфер содержит 7-байтный разрыв выравнивания для выравнивания элемента Hyper до 8 после элемента char. При использовании параметра target NT60 или более поздней версии MIDL отменяет этот разрыв, пока не будет использован параметр.

    IDL-файл:

    ``` syntax
    typedef struct _structwithgaps{
        char c;
        // 7 byte gap to align the following hyper to 8 
        hyper h;
    } structwithgap;
    ```

    Этот параметр обеспечивает небольшое повышение производительности с потенциально значительным увеличением риска раскрытия.

-   *\_ Escape- \_ Преобразование бивалуе*~. по умолчанию компилятор MIDL не обрабатывает escape-последовательности, такие как € ̃ \\ нâ €™ или тâ, \\ то есть™ в строковых константах для OLE-автоматизации при преобразовании строковой константы в типы VT \_ LPSTR или VT \_ LPWSTR. При этом параметре обратной совместимости вычисляются escape-последовательности.
-   *\_ DefaultValue = строка*: заставляет компилятор MIDL применять числовые строки в атрибутах [**\[ \] DefaultValue**](defaultvalue.md) к Variant. VT \_ I4 Type перед приведением значения к правильному типу. В некоторых случаях это может привести к утрате точности, поэтому этот параметр не рекомендуется.
-   *со знаком \_ WCHAR \_ t*: указывает MIDL обрабатывать \_ тип WCHAR t как подписанный для совместимости с Visual Basic.

 

 




