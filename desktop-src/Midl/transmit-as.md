---
title: transmit_as - атрибут
description: Атрибут \ "передать \_ как \" указывает компилятору связать тип-ID, который представляет собой представляемый тип, управляемый клиентскими и серверными приложениями, с переданным типом xmit-Type.
ms.assetid: 3dd1a242-03ec-49b4-ac96-87ef186e41d2
keywords:
- transmit_as атрибута MIDL
topic_type:
- apiref
api_name:
- transmit_as
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 18d1b8e9aae9a147c929fade8030babbf6b02fd87c9170370252522001742e95
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118382834"
---
# <a name="transmit_as-attribute"></a>передать \_ как атрибут

Атрибут **\[ передать \_ как \]** указывает компилятору связать **тип-ID**_,_ который представляет собой представляемый тип, который управляется клиентскими и серверными приложениями, с переданным типом **xmit-Type.**

``` syntax
typedef [transmit_as(xmit-type) [[ , type-attribute-list ]] ] type-specifier declarator-list; 

void __RPC_USER type-id_to_xmit (
  type-id __RPC_FAR *,
  xmit-type __RPC_FAR * __RPC_FAR *);
void __RPC_USER type-id_from_xmit (
  xmit-type __RPC_FAR *,
  type-id __RPC_FAR *);
void __RPC_USER type-id_free_inst (
  type-id __RPC_FAR *);
void __RPC_USER type-id_free_xmit (
  xmit-type__RPC_FAR *);
```

## <a name="parameters"></a>Параметры

<dl> <dt>

*xmit — тип* 
</dt> <dd>

Указывает тип данных, передаваемый между клиентом и сервером.

</dd> <dt>

*Type-Attribute-List* 
</dt> <dd>

Указывает один или несколько атрибутов, применяемых к типу. К допустимым атрибутам типа относятся **\[** [**Handle**](handle.md), **\]** **\[** [**Switch \_ Type**](switch-type.md) **\]** ; указатель на **\[** [**ref**](ref.md) **\]** , **\[** [**UNIQUE**](unique.md) **\]** , **\[** [**ptr**](ptr.md), **\]** и атрибуты использования, а также параметр **\[** [](string.md) **\]** **\[** [**Ignore**](ignore.md) **\]** . Несколько атрибутов разделяются запятыми.

</dd> <dt>

*Описатель типа* 
</dt> <dd>

Задает [базовый тип](midl-base-types.md), [**структуру**](struct.md), [**объединение**](union.md), тип [**перечисления**](enum.md) или идентификатор типа. Дополнительная спецификация хранилища может предшествовать *спецификатору типа*.

</dd> <dt>

*декларатор-список* 
</dt> <dd>

Задает стандартные деклараторы C, такие как идентификаторы, деклараторы указателей и деклараторы массивов. Дополнительные сведения см. в разделе [атрибуты Array и Sized-Pointer](array-and-sized-pointer-attributes.md), [**массивы**](arrays-1.md), [массивы и указатели](/windows/desktop/Rpc/arrays-and-pointers). *Список деклараторов* состоит из одного или нескольких деклараторов, разделенных запятыми. Декларатор параметра в деклараторе функции, например имя параметра, является необязательным.

</dd> <dt>

*Идентификатор типа* 
</dt> <dd>

Указывает имя типа данных, представленного для клиентских и серверных приложений.

</dd> </dl>

## <a name="remarks"></a>Remarks

Чтобы использовать атрибут **\[ передачи \_ As \]** , пользователь должен предоставить подпрограммы, которые преобразуют данные между представленными и передаваемыми типами. Эти подпрограммы также должны освободить память, используемую для хранения преобразованных данных. Атрибут **\[ передать \_ как \]** указывает заглушкам вызывать предоставляемые пользователем подпрограммы преобразования.

Передаваемый тип *xmit-Type* должен разрешаться в базовый тип MIDL, предопределенный тип или идентификатор типа. Дополнительные сведения см. в разделе [базовые типы MIDL](midl-base-types.md).

Пользователь должен предоставить следующие подпрограммы.



| Имя подпрограммы              | Описание                                                                                                                                                                                                       |
|---------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| *Type-ID * * * \_ to \_ xmit**   | Преобразует данные из представленного типа в передаваемый тип. Эта подпрограммы выделяет память для переданного типа и для любых данных, на которые ссылаются указатели в переданном типе.                            |
| *Type-ID * * * \_ из \_ xmit** | Преобразует данные переданного типа в представленный тип. Эта подпрограммы отвечает за выделение памяти для данных, на которые ссылаются указатели в представленном типе. RPC выделяет память для самого типа. |
| *Type-ID * * * \_ бесплатная \_ inst** | Освобождает память, выделенную для данных, на которые ссылаются указатели в представленном типе. RPC освобождает память для самого типа.                                                                                               |
| *Type-ID * * * \_ бесплатная \_ xmit** | Освобождает хранилище, используемое вызывающим объектом для переданного типа, и для данных, на которые ссылаются указатели в переданном типе.                                                                                            |



 

 

Заглушка клиента вызывает *Type-ID * * * \_ to \_ xmit** для выделения пространства для передаваемого типа и преобразования данных в объекты типа *xmit-Type.* Заглушка сервера выделяет место для исходного типа данных и вызывает метод *Type-ID * * * \_ из \_ xmit** для преобразования данных из переданного типа в представленный тип.

При возврате из кода приложения заглушка сервера вызывает *Type-ID * * * \_ Free \_ inst**, чтобы освободить хранилище для *типа-ID* на стороне сервера. Заглушка клиента вызывает *Type-ID * * * \_ Free \_ xmit** для освобождения хранилища *типа xmit* на стороне клиента.

Следующие типы не могут иметь атрибут " **\[ передать \_ как \]** ":

-   Дескрипторы контекста (типы с **\[** атрибутом типа [**\_ дескриптора контекста**](context-handle.md) **\]** и типами, которые используются в качестве параметров атрибута **\[ \_ дескриптора \] контекста** )
-   Типы, являющиеся каналами или производными от каналов
-   Типы данных, используемые в качестве базового типа определения канала
-   Параметры, которые являются указателями или разрешаются в указатели
-   Параметры, которые являются согласованными, различными или открытыми массивами
-   Структуры, содержащие согласованные массивы
-   Предопределенный тип [**маркера \_ t**](handle-t.md), [**void**](void.md)

Передаваемые типы должны соответствовать следующим ограничениям:

-   Они не должны быть указателями или содержать указатели.
-   Они не должны быть каналами или содержать каналы.

## <a name="examples"></a>Примеры

``` syntax
typedef struct _TREE_NODE_TYPE 
{ 
    unsigned short data; 
    struct _TREE_NODE_TYPE * left; 
    struct _TREE_NODE_TYPE * right; 
} TREE_NODE_TYPE; 
 
typedef [transmit_as(TREE_XMIT_TYPE)] TREE_NODE_TYPE * TREE_TYPE; 
 
void __RPC_USER TREE_TYPE_to_xmit( 
    TREE_TYPE __RPC_FAR * , 
    TREE_XMIT_TYPE __RPC_FAR * __RPC_FAR *); 
 
void __RPC_USER TREE_TYPE_from_xmit ( 
    TREE_XMIT_TYPE __RPC_FAR *, 
    TREE_TYPE __RPC_FAR *); 
 
void __RPC_USER TREE_TYPE_free_inst( 
    TREE_TYPE __RPC_FAR *); 
 
void __RPC_USER TREE_TYPE_free_xmit( 
    TREE_XMIT_TYPE __RPC_FAR *);
```

## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**массивы**](arrays-1.md)
</dt> <dt>

[Базовые типы MIDL](midl-base-types.md)
</dt> <dt>

[**Контекстный \_ маркер**](context-handle.md)
</dt> <dt>

[**enum**](enum.md)
</dt> <dt>

[**handle**](handle.md)
</dt> <dt>

[**Handle \_ t**](handle-t.md)
</dt> <dt>

[Файл определения интерфейса (IDL)](interface-definition-idl-file.md)
</dt> <dt>

[**обращать**](ignore.md)
</dt> <dt>

[**указатель**](ptr.md)
</dt> <dt>

[**ref**](ref.md)
</dt> <dt>

[**строка**](string.md)
</dt> <dt>

[**struct**](struct.md)
</dt> <dt>

[**Тип коммутатора \_**](switch-type.md)
</dt> <dt>

[**определение**](typedef.md)
</dt> <dt>

[**наборов**](union.md)
</dt> <dt>

[**однозначно**](unique.md)
</dt> <dt>

[**void**](void.md)
</dt> </dl>

 

 