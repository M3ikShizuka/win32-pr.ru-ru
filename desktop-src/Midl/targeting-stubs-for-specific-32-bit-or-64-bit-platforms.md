---
title: Назначение заглушек для конкретных 32-разрядных или 64-разрядных платформ
description: Некоторые функции Microsoft RPC и компиляторов MIDL 3,0 и более поздних версий являются специфичными для платформы.
ms.assetid: bb1bee56-7f39-406c-bdbf-b73bda568247
keywords:
- 32-разрядные платформы MIDL
- 64-разрядные платформы MIDL
- заглушки MIDL
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 526265a60f8b2ef2f31d19d0356d4ec3a3ae8c8f
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104331379"
---
# <a name="targeting-stubs-for-specific-32-bit-or-64-bit-platforms"></a>Назначение заглушек для конкретных 32-разрядных или 64-разрядных платформ

Некоторые функции Microsoft RPC и компиляторов MIDL 3,0 и более поздних версий являются специфичными для платформы.

В качестве меры предосторожности компиляторы MIDL 3,0 и более поздних версий создают условия, которые упрощают проверку совместимости на этапе C-compilation. MIDL создает два типа условий: зависимый от платформы (32-разрядный и 64-бит) и зависимый от выпуска предохранитель (зависимость набора функций). Например, MIDL создает следующее условие, чтобы предотвратить компиляцию 32-разрядной заглушки для других платформ с помощью C:

``` syntax
#if !defined(__RPC_WIN32__)
#error  Invalid build platform for this stub.
#endif
```

Зависимый от выпуска предохранитель активируется набором компонентов, найденных в обрабатываемых IDL-файлах, и параметром [**/Target**](-target.md) . Например, если интерфейс использует функции, поддерживаемые только в Windows 2000 или более поздней версии, MIDL создает защиту с ЦЕЛЕВЫМ \_ объектом \_ \_ \_ макроса NT50 или более поздней версии.

Макросы Guard, определенные в Рпкндр. h, зависят от настройки WINVER и \_ Win32 \_ Winnt и оцениваются компилятором C/C++.

Если во время компиляции на языке C вы получаете сообщение об ошибке, указывающее, что для запуска заглушки требуется определенная платформа, сначала убедитесь, что вы не использовали функцию, недоступную на этой платформе. Функции, активируемые определенным условием, перечислены в тексте средства защиты. В предыдущем примере параметр компилятора-Оикф активировал условие. Важные функции такого рода включают параметр [**/robust**](-robust.md) и \[ атрибут [**Async**](async.md) , \] доступный в Windows 2000 и более поздних версиях, конструктор типа [**канала**](pipe.md) , параметр компилятора/OIF, а также атрибуты маршалирования и передачи данных \[ [**пользователя \_**](user-marshal.md) \] \[ [**\_**](wire-marshal.md) \] . Заглушки, использующие эти функции, не будут работать в более ранних системах.

Если вы уверены, что Целевая платформа правильна для используемых Вами функций и по-прежнему получает сообщение об ошибке, может потребоваться задать соответствующие переменные среды.

**Сборка для Windows 2000 или более поздних версий**

-   Добавьте следующую строку в файл Makefile:

    ``` syntax
    CFLAGS = $(CFLAGS) -D_WIN32_WINNT=0x500
    ```

## <a name="related-topics"></a>См. также

<dl> <dt>

[**/Target**](-target.md)
</dt> <dt>

[**/robust**](-robust.md)
</dt> <dt>

[**async**](async.md)
</dt> <dt>

[**асинхронный \_ UUID**](async-uuid.md)
</dt> <dt>

[**/Oi**](-oi.md)
</dt> <dt>

[**дать**](pipe.md)
</dt> <dt>

[**проводное \_ маршалирование**](wire-marshal.md)
</dt> <dt>

[**Пользовательская \_ Упаковка**](user-marshal.md)
</dt> <dt>

[Маршалирование типов данных OLE](marshaling-ole-data-types.md)
</dt> </dl>

 

 




