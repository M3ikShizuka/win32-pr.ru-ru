---
title: Создание библиотеки типов с помощью MIDL
description: Элемент верхнего уровня в синтаксисе ODL является оператором Library (блоком библиотеки).
ms.assetid: e21a9e6e-4e10-4280-af8f-24534cb2ab90
keywords:
- Язык MIDL MIDL, задачи, создание библиотеки типов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 85f6e8f7ea6f65bc503c08872c9199ff3d5fd828
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "105650352"
---
# <a name="generating-a-type-library-with-midl"></a>Создание библиотеки типов с помощью MIDL

Элемент верхнего уровня в синтаксисе ODL является оператором Library (блоком библиотеки). Каждая другая инструкция ODL, за исключением атрибутов, примененных к оператору Library, должна быть определена в блоке библиотеки. Когда компилятор MIDL видит блок библиотеки, он создает библиотеку типов во многом так же, как это делает MkTypLib. За некоторыми исключениями, описанными в разделе [различия между MIDL и MKTYPLIB](differences-between-midl-and-mktyplib.md), инструкции в блоке библиотеки должны следовать тому же синтаксису, что и в ODL-языке и MKTYPLIB.

> [!Note]  
> Средство Mktyplib.exe устарело. Вместо этого используйте компилятор MIDL.

 

Атрибуты ODL можно применять к элементам, которые определены либо внутри, либо вне блока библиотеки. Эти атрибуты не действуют за пределами блока библиотеки, если только элемент, к которому они применяются, ссылается из блока библиотеки. Инструкции внутри блока библиотеки могут ссылаться на внешний элемент либо с помощью его базового типа, наследования от него, либо путем ссылки на него в строке, как показано ниже.

``` syntax
<some IDL definitions including definitions for interface IFace and struct bar>
[<some attributes>]
library a
{
    interface IFace;
    struct this_struct;
...
};
```

Если в блоке библиотеки имеется ссылка на элемент, определенный вне блока библиотеки, его определение будет размещено в созданной библиотеке типов. Компилятор MIDL рассматривает операторы за пределами блока библиотеки как обычный IDL-файл и анализирует эти инструкции по мере того, как она выполняется всегда. Как правило, это означает создание заглушек языка C для приложения RPC.

Дополнительные сведения о синтаксисе файлов ODL см. в разделе [синтаксис ODL File](/previous-versions/windows/desktop/automat/odl-file-syntax).

 

 