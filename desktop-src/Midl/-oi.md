---
title: /Oi, параметр
description: /Oi и/ОИК переключает компилятор MIDL на использование полностью интерпретируемого метода маршалирования. Параметр/Oicf обеспечивает дополнительные улучшения производительности.
ms.assetid: cf597a45-410f-4098-850b-240c6ebce23b
keywords:
- MIDL/Oi Switch
topic_type:
- apiref
api_name:
- /Oi
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 1671b16640d3f3214f10138e50a2ac08b6114674
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127144126"
---
# <a name="oi-switch"></a>/Oi, параметр

**/Oi** и **/ОИК** переключает компилятор MIDL на использование полностью интерпретируемого метода маршалирования. Параметр **/Oicf** обеспечивает дополнительные улучшения производительности.

``` syntax
midl /{Oi | Oic | Oif | Oicf}
```

## <a name="switch-options"></a>Параметры коммутатора

<dl> <dt>

*Oi* 
</dt> <dd>

Указывает полностью интерпретируемый метод для упаковки кода заглушки, передаваемого между клиентом и сервером.

> [!Note]  
> Этот параметр устарел. Рекомендуется использовать вместо него параметр **/Oicf** .

 

</dd> <dt>

*оик* 
</dt> <dd>

Указывает прокси-метод без кода для маршалирования, который предоставляет все функции **/Oi** , а также еще больше сокращает размер кода заглушки клиента для интерфейсов объектов.

> [!Note]  
> Этот параметр устарел. Рекомендуется использовать вместо него параметр **/Oicf** .

 

</dd> <dt>

*ОИФ или Оикф* 
</dt> <dd>

Указывает прокси-метод для упаковки без кода, который включает все функции, предоставляемые **/Oi** и **/ОИК** , но использует новый интерпретатор (строки быстрого формата), обеспечивающий лучшую производительность, чем **/Oi** или **/ОИК**. Этот параметр включает последние усовершенствования RPC и рекомендуется для современных сценариев RPC.

</dd> </dl>

## <a name="remarks"></a>Remarks

Обратите внимание на ограничения, связанные с поддерживающими платформами.

Компилятор MIDL 3,0 предоставляет два метода для маршалирования кода: полностью интерпретируемые ( **/Oi**, **/ОИК** и **/Oicf**) и смешанный режим ( [**/OS**](-os.md)). Начиная с MIDL версии 6.0.359, компилятор MIDL по умолчанию создает заглушки **/Oicf** в [**/robust**](-robust.md) . Некоторые функции языка не поддерживаются в некоторых режимах. В этом случае компилятор автоматически переключается в соответствующий режим и выдает предупреждение.

Если важна производительность, лучшим подходом может быть метод со смешанным режимом ( [**/OS**](-os.md)). В этом режиме компилятор выбирает упаковку некоторых параметров, встроенных в созданные заглушки. Хотя это приводит к увеличению размера заглушки, оно обеспечивает повышенную производительность.

Полностью интерпретируемый метод маршалирует данные полностью в автономном режиме. Это значительно сокращает размер кода заглушки, но приводит к снижению производительности. Кроме того, при использовании полностью интерпретируемого метода для каждой процедуры существует ограничение в 16 параметров. Любая процедура, содержащая более 16 параметров, будет автоматически обработана в режиме [**/OS**](-os.md) . В интерпретированных режимах **/Oicf** обеспечивает наилучшую производительность и **/Oi** обеспечивает лучшую обратную совместимость.

Вы можете использовать параметр **/OIF** , если приложение использует функции MIDL, появившиеся в MIDL 3,0, например \[ [**\_**](wire-marshal.md) \] атрибуты передачи и \[ [**\_ маршалирования пользователя**](user-marshal.md) \] . Если приложение использует [каналы](/windows/desktop/Rpc/pipes) , необходимо использовать параметр **/OIF** . Если указан другой режим, компилятор MIDL переключается на **/OIF**.

Для точной настройки способа маршалирования кода заглушки Microsoft RPC предоставляет \[ атрибут [**оптимизации**](optimize.md) ACF \] . Этот атрибут используется в качестве атрибута интерфейса или атрибута операции для выбора режима маршалирования для отдельных интерфейсов или для отдельных операций.

### <a name="calling-conventions"></a>Соглашения о вызовах

Суррогаты, созданные компилятором MIDL в интерпретированном методе с использованием ключей **/Oi**, **/ОИК** или **/OIF** , должны быть скомпилированы в виде процедуры stdcall или cdecl во время компиляции C. Соглашение о вызовах PASCAL или fastcall не будет работать. Кроме того, заглушку сервера необходимо скомпилировать как STDCALL.

## <a name="examples"></a>Примеры

**MIDL/Oi filename. idl**

**MIDL/ОИК filename. idl**

**MIDL/OIF filename. idl**

## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**/robust**](-robust.md)
</dt> <dt>

[**/но \_ надежность**](-no-robust.md)
</dt> <dt>

[Общий синтаксис командной строки MIDL](general-midl-command-line-syntax.md)
</dt> <dt>

[**/OS**](-os.md)
</dt> <dt>

[**увеличить**](optimize.md)
</dt> <dt>

[**/но в \_ формате \_ OPT**](-no-format-opt.md)
</dt> </dl>

 

 