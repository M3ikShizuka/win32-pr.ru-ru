---
title: Использование восстановления и перезапуска приложения
description: Приложение может использовать восстановление и перезагрузку приложения (ARR) для сохранения данных и сведений о состоянии до завершения работы приложения из-за необработанного исключения или зависания приложения. При запросе приложение также перезапускается.
ms.assetid: 28cbb4c0-a287-4302-b3a9-daddc69adb40
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 88a844e7bb8795dae26fa2900b539651cdab3f07877dce83403bd37126dac197
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120073654"
---
# <a name="using-application-recovery-and-restart"></a>Использование восстановления и перезапуска приложения

Приложение может использовать восстановление и перезагрузку приложения (ARR) для сохранения данных и сведений о состоянии до завершения работы приложения из-за необработанного исключения или зависания приложения. При запросе приложение также перезапускается.

При регистрации для восстановления или перезапуска сведения о регистрации добавляются в процесс. [отчеты об ошибках Windows (WER)](/windows/desktop/wer/windows-error-reporting) использует регистрационные данные для вызова функции обратного вызова восстановления и перезапуска приложения. Например, если вы регистрируетесь для восстановления и приложение встречает необработанное исключение, в WER отображается диалоговое окно, в котором пользователю предоставляется возможность проверить наличие решения в сети, закрыть программу или выполнить отладку программы. Если пользователь решает либо проверить наличие решения, либо закрыть программу, то WER вызывает зарегистрированный обратный вызов и дает приложению возможность сохранить данные и сведения о состоянии. После завершения восстановления приложение будет завершено.

Если вы регистрируетесь для перезапуска и приложение встречает необработанное исключение, программа WER отображает то же самое диалоговое окно для пользователя, но дает возможность перезапустить программу вместо закрытия программы. Если вы регистрируетесь как для восстановления, так и для перезапуска, сначала выполняется восстановление. Затем приложение завершает работу и перезапускается.

Неотвечающее приложение обрабатывается аналогичным образом. приложение считается неотвечающим, если оно не реагирует на Windows сообщения в течение пяти секунд, а пользователь пытается взаимодействовать с приложением. пользователь увидит (не отвечает) в заголовке окна. WER активируется, когда пользователь нажимает кнопку закрытия системы.

Необходимо зарегистрироваться для восстановления или перезапуска или удалить регистрацию, прежде чем приложение перестанет отвечать или встречает необработанное исключение. Однако в обратном вызове восстановления можно изменить командную строку перезапуска.

Дополнительные сведения о регистрации для восстановления или перезапуска см. в следующих разделах:

-   [Регистрация для восстановления приложения](registering-for-application-recovery.md)
-   [Регистрация для перезапуска приложения](registering-for-application-restart.md)

примеры, реализующие функции восстановления и перезапуска, см. в примерах аппрековери и аппрестарт в Windows SDK, расположенном в \\ папке винбасе виндовсерроррепортинг.

 

 