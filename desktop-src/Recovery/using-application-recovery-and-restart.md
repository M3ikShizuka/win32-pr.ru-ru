---
title: Использование восстановления и перезапуска приложения
description: Приложение может использовать восстановление и перезагрузку приложения (ARR) для сохранения данных и сведений о состоянии до завершения работы приложения из-за необработанного исключения или зависания приложения. При запросе приложение также перезапускается.
ms.assetid: 28cbb4c0-a287-4302-b3a9-daddc69adb40
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b0d5bf0b9bd0e0f6cc257ee785ab5df6febc8fef
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103890716"
---
# <a name="using-application-recovery-and-restart"></a>Использование восстановления и перезапуска приложения

Приложение может использовать восстановление и перезагрузку приложения (ARR) для сохранения данных и сведений о состоянии до завершения работы приложения из-за необработанного исключения или зависания приложения. При запросе приложение также перезапускается.

При регистрации для восстановления или перезапуска сведения о регистрации добавляются в процесс. [Отчеты об ошибках Windows (WER)](/windows/desktop/wer/windows-error-reporting) использует регистрационные данные для вызова функции обратного вызова восстановления и перезапуска приложения. Например, если вы регистрируетесь для восстановления и приложение встречает необработанное исключение, в WER отображается диалоговое окно, в котором пользователю предоставляется возможность проверить наличие решения в сети, закрыть программу или выполнить отладку программы. Если пользователь решает либо проверить наличие решения, либо закрыть программу, то WER вызывает зарегистрированный обратный вызов и дает приложению возможность сохранить данные и сведения о состоянии. После завершения восстановления приложение будет завершено.

Если вы регистрируетесь для перезапуска и приложение встречает необработанное исключение, программа WER отображает то же самое диалоговое окно для пользователя, но дает возможность перезапустить программу вместо закрытия программы. Если вы регистрируетесь как для восстановления, так и для перезапуска, сначала выполняется восстановление. Затем приложение завершает работу и перезапускается.

Неотвечающее приложение обрабатывается аналогичным образом. Приложение считается неотвечающим, если оно не реагирует на сообщения Windows в течение пяти секунд, а пользователь пытается взаимодействовать с приложением. пользователь увидит (не отвечает) в заголовке окна. WER активируется, когда пользователь нажимает кнопку закрытия системы.

Необходимо зарегистрироваться для восстановления или перезапуска или удалить регистрацию, прежде чем приложение перестанет отвечать или встречает необработанное исключение. Однако в обратном вызове восстановления можно изменить командную строку перезапуска.

Дополнительные сведения о регистрации для восстановления или перезапуска см. в следующих разделах:

-   [Регистрация для восстановления приложения](registering-for-application-recovery.md)
-   [Регистрация для перезапуска приложения](registering-for-application-restart.md)

Примеры, реализующие функции восстановления и перезапуска, см. в примерах Аппрековери и Аппрестарт в Windows SDK, расположенном в \\ папке винбасе виндовсерроррепортинг.

 

 