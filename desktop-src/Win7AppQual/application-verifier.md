---
description: Средство проверки приложений (Windows 7 и Windows Server 2008 R2 Application Quality Cookbook)
ms.assetid: edf719b7-9bd9-4e23-9bba-d0d7c3c5dbf5
title: Средство проверки приложений (Windows 7 и Windows Server 2008 R2 Application Quality Cookbook)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bac2a8bc900ea9d1f35ae228371226355657b930
ms.sourcegitcommit: 95685061d5b0333bbf9e6ebd208dde8190f97005
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2021
ms.locfileid: "108088692"
---
# <a name="application-verifier-windows-7-and-windows-server-2008-r2-application-quality-cookbook"></a><span data-ttu-id="7cb12-103">Средство проверки приложений (Windows 7 и Windows Server 2008 R2 Application Quality Cookbook)</span><span class="sxs-lookup"><span data-stu-id="7cb12-103">Application Verifier (Windows 7 and Windows Server 2008 R2 Application Quality Cookbook)</span></span>

## <a name="affected-platforms"></a><span data-ttu-id="7cb12-104">Затронутые платформы</span><span class="sxs-lookup"><span data-stu-id="7cb12-104">Affected Platforms</span></span>

<span data-ttu-id="7cb12-105">**Клиенты** — Windows XP, Windows Vista, Windows 7</span><span class="sxs-lookup"><span data-stu-id="7cb12-105">**Clients** - Windows XP, Windows Vista, Windows 7</span></span>  
<span data-ttu-id="7cb12-106">**Серверы** — windows Server 2003, windows Server 2008, windows Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="7cb12-106">**Servers** - Windows Server 2003, Windows Server 2008, Windows Server 2008 R2</span></span>  


## <a name="description"></a><span data-ttu-id="7cb12-107">Описание</span><span class="sxs-lookup"><span data-stu-id="7cb12-107">Description</span></span>

<span data-ttu-id="7cb12-108">Додвигайте и применяйте средство проверки приложений в качестве шлюза качества для всей разработки.</span><span class="sxs-lookup"><span data-stu-id="7cb12-108">Promote and enforce Application Verifier as a quality gate for all development.</span></span> <span data-ttu-id="7cb12-109">Он включает несколько улучшений:</span><span class="sxs-lookup"><span data-stu-id="7cb12-109">It includes several improvements:</span></span>

-   <span data-ttu-id="7cb12-110">Мы предоставили дополнительные проверки для решения проблем, которые команда отчеты об ошибках Windows обнаружила во время использования пула потоков.</span><span class="sxs-lookup"><span data-stu-id="7cb12-110">We have provided additional checks to address issues that the Windows Error Reporting team discovered during thread-pool usage.</span></span>
-   <span data-ttu-id="7cb12-111">Мы объединили 32-и 64-разрядные версии пакета для устранения изменений в Windows 7, включая требования для тестирования 32-разрядных компонентов в рамках 64-разрядной версии Windows, а также для общего упрощения.</span><span class="sxs-lookup"><span data-stu-id="7cb12-111">We combined 32- and 64-bit versions of the package to address changes in Windows 7, including the needs for testing 32-bit components under a 64-bit version of Windows, as well as for general simplification.</span></span>
-   <span data-ttu-id="7cb12-112">Мы включили дополнительные проверки для многопоточных приложений, запуская 32-разрядные приложения в 64-разрядной версии Windows, а также много исправлений ошибок.</span><span class="sxs-lookup"><span data-stu-id="7cb12-112">We have included additional checks for multithreaded applications, running 32-bit applications on 64-bit Windows, as well as many bug fixes.</span></span>

<span data-ttu-id="7cb12-113">Эти изменения не должны оказывать негативное влияние на пользователей, которые не включают проверки потоков; Пользователи должны получить дополнительную поддержку в процессе обнаружения и диагностики существующих проблем использования пула потоков.</span><span class="sxs-lookup"><span data-stu-id="7cb12-113">These changes should have no negative impact on users who do not enable the Thread Checks; those who do should receive additional support in discovery and diagnosis of existing thread-pool usage problems.</span></span> <span data-ttu-id="7cb12-114">Независимо от того, включены ли проверки потоков, вы получите преимущество от других улучшений и исправлений ошибок в этой службе.</span><span class="sxs-lookup"><span data-stu-id="7cb12-114">Whether or not you enable Thread Checks, you will benefit from the other improvements and bug fixes in this service.</span></span>

<span data-ttu-id="7cb12-115">Несмотря на небольшое снижение производительности при использовании этой службы, уровни производительности должны оставаться приемлемыми, поскольку обычно не выполняются в розничных средах.</span><span class="sxs-lookup"><span data-stu-id="7cb12-115">While there is a slight performance penalty when using this service, the performance levels should remain acceptable because it does not typically run in retail environments.</span></span>

## <a name="usage"></a><span data-ttu-id="7cb12-116">Использование</span><span class="sxs-lookup"><span data-stu-id="7cb12-116">Usage</span></span>

<span data-ttu-id="7cb12-117">**Общие сведения**</span><span class="sxs-lookup"><span data-stu-id="7cb12-117">**General Information**</span></span>

<span data-ttu-id="7cb12-118">Для предоставления надежных приложений Windows:</span><span class="sxs-lookup"><span data-stu-id="7cb12-118">To deliver reliable Windows applications:</span></span>

1.  <span data-ttu-id="7cb12-119">Протестируйте приложения, написанные на неуправляемом (машинном) коде, с средство проверки приложений в отладчике и в полной куче, прежде чем выпустить их для клиентов.</span><span class="sxs-lookup"><span data-stu-id="7cb12-119">Test applications written in unmanaged (native) code with Application Verifier under the debugger and with full-page heap before releasing it to customers.</span></span>
2.  <span data-ttu-id="7cb12-120">Выполните действия, предоставленные средство проверки приложений, чтобы разрешить условия аномального.</span><span class="sxs-lookup"><span data-stu-id="7cb12-120">Follow the steps provided by Application Verifier to resolve errant conditions.</span></span>
3.  <span data-ttu-id="7cb12-121">После выпуска приложения регулярно Отслеживайте отчеты о сбоях приложений, собранные отчеты об ошибках Windows.</span><span class="sxs-lookup"><span data-stu-id="7cb12-121">Once your application is released, regularly monitor the application failure reports collected by Windows Error Reporting.</span></span>

<span data-ttu-id="7cb12-122">Проверки пула потоков включены по умолчанию в заголовке проверки "Основные сведения".</span><span class="sxs-lookup"><span data-stu-id="7cb12-122">Thread-pool checks are enabled by default under the "Basics" check heading.</span></span> <span data-ttu-id="7cb12-123">Так как это включено в параметр по умолчанию, пользователям нужно только выполнить средство проверки приложений в коде с параметрами по умолчанию, чтобы использовать новые проверки.</span><span class="sxs-lookup"><span data-stu-id="7cb12-123">As this is included in the default setting, users need only to run Application Verifier on their code with the default settings to leverage the new checks.</span></span>

<span data-ttu-id="7cb12-124">**Сведения**</span><span class="sxs-lookup"><span data-stu-id="7cb12-124">**Details**</span></span>

<span data-ttu-id="7cb12-125">Как минимум, следует запускать средство проверки приложений с выбранным параметром основы.</span><span class="sxs-lookup"><span data-stu-id="7cb12-125">At a minimum, you should run Application Verifier with the Basics setting selected.</span></span> <span data-ttu-id="7cb12-126">Это необходимо для Винлого и Винкуал.</span><span class="sxs-lookup"><span data-stu-id="7cb12-126">This is required for WinLogo and WinQual.</span></span> <span data-ttu-id="7cb12-127">Параметр Основные сведения проверяет следующее:</span><span class="sxs-lookup"><span data-stu-id="7cb12-127">The Basics setting checks for the following:</span></span>

-   <span data-ttu-id="7cb12-128">**Исключения, сведения об окончании исключений** . гарантирует, что приложения не скрывают нарушения прав доступа с помощью структурированной обработки исключений.</span><span class="sxs-lookup"><span data-stu-id="7cb12-128">**Exceptions Stop Details** - Ensures that applications do not hide access violations using structured exception handling</span></span>
-   <span data-ttu-id="7cb12-129">**Обрабатывает сведения о прерывании** — тесты, чтобы убедиться, что приложение не пытается использовать недопустимые дескрипторы</span><span class="sxs-lookup"><span data-stu-id="7cb12-129">**Handles Stop Details** - Tests to ensure the application is not attempting to use invalid handles</span></span>
-   <span data-ttu-id="7cb12-130">**Сведения о прерывании куч** — проверяет наличие проблем с повреждением памяти в куче</span><span class="sxs-lookup"><span data-stu-id="7cb12-130">**Heaps Stop Details** - Checks for memory corruptions issues in the heap</span></span>
-   <span data-ttu-id="7cb12-131">**Сведения об окончании ввода-вывода** — отслеживание выполнения асинхронных операций ввода/вывода и выполнение различных проверок</span><span class="sxs-lookup"><span data-stu-id="7cb12-131">**Input/Output Stop Details** - Monitors the execution of asynchronous IO, and performs various validations</span></span>
-   <span data-ttu-id="7cb12-132">**Сведения о прекращении утечки** — обнаруживает утечки за счет отслеживания ресурсов, созданных библиотекой DLL, которые не освобождаются до момента выгрузки библиотеки DLL</span><span class="sxs-lookup"><span data-stu-id="7cb12-132">**Leak Stop Details** - Detects leaks by tracking the resources made by a dll that are not freed by the time the dll was unloaded</span></span>
-   <span data-ttu-id="7cb12-133">**Подробные сведения о блокировках** — проверяет правильность использования критических секций.</span><span class="sxs-lookup"><span data-stu-id="7cb12-133">**Locks Stop Details** - Verifies the correct usage for critical sections</span></span>
-   <span data-ttu-id="7cb12-134">**Сведения о прерывании памяти** . обеспечивает правильное использование API-интерфейсов для манипуляций с виртуальным пространством (например, VirtualAlloc, MapViewOfFile).</span><span class="sxs-lookup"><span data-stu-id="7cb12-134">**Memory Stop Details** - Ensures APIs for virtual space manipulations are used correctly (for example, VirtualAlloc, MapViewOfFile)</span></span>
-   <span data-ttu-id="7cb12-135">**Сведения об окончании TLS** . обеспечивает правильное использование интерфейсов API локального хранилища потока</span><span class="sxs-lookup"><span data-stu-id="7cb12-135">**TLS Stop Details** - Ensures that Thread Local Storage APIs are used correctly</span></span>
-   <span data-ttu-id="7cb12-136">**Сведения о прерывании ThreadPool** . обеспечивает правильное использование интерфейсов API ThreadPool и обеспечивает проверку согласованности в состояниях рабочего потока после обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="7cb12-136">**Threadpool Stop Details** - Ensures correct usage of threadpool APIs and enforces consistency checks on worker-thread-states after a callback</span></span>

<span data-ttu-id="7cb12-137">Если приложение переходит с приложения "пред-Vista", необходимо использовать "Луаприв" (также называемые проверками UAC).</span><span class="sxs-lookup"><span data-stu-id="7cb12-137">If your application is migrating from a "Pre-Vista" application, you will want to leverage the "LuaPriv" (also known as UAC checks).</span></span> <span data-ttu-id="7cb12-138">У прогнозируемого права доступа к учетной записи пользователя (Луаприв) есть две основные цели:</span><span class="sxs-lookup"><span data-stu-id="7cb12-138">The Limited User Account Privilege Predictor (LuaPriv) has two primary goals:</span></span>

-   <span data-ttu-id="7cb12-139">**Прогноз**. при запуске приложения с правами администратора необходимо предсказать, будет ли это приложение работать, если оно работает с меньшими привилегиями (как правило, в качестве обычного пользователя).</span><span class="sxs-lookup"><span data-stu-id="7cb12-139">**Predictive**: While running an application with administrative privilege, predict whether that application would work as well if run with less privilege (generally, as a normal user).</span></span> <span data-ttu-id="7cb12-140">Например, если приложение записывает данные в файлы, которые разрешают доступ только администраторам, это приложение не сможет выполнять запись в тот же файл, если он запускается от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="7cb12-140">For example, if the application writes to files that only allow Administrators access, then that application will not be able to write to the same file if run as a non-administrator.</span></span>
-   <span data-ttu-id="7cb12-141">**Диагностика**. при запуске с привилегиями, не являющимися администраторами, выявление потенциальных проблем, которые могут уже существовать в текущем запуске.</span><span class="sxs-lookup"><span data-stu-id="7cb12-141">**Diagnostic**: While running with non-administrator privilege, identify potential problems that may already exist with the current run.</span></span> <span data-ttu-id="7cb12-142">Продолжая предыдущий пример, если приложение пытается выполнить запись в файл, предоставляющий доступ только членам группы администраторов, приложение получит \_ ошибку отказа в доступе.</span><span class="sxs-lookup"><span data-stu-id="7cb12-142">Continuing the previous example, if the application tries to write to a file that grants only Administrator group members access, the application will get an ACCESS\_DENIED error.</span></span> <span data-ttu-id="7cb12-143">Если приложение работает неправильно, эта операция может быть причиной.</span><span class="sxs-lookup"><span data-stu-id="7cb12-143">If the application does not operate correctly, this operation may be the culprit.</span></span>

<span data-ttu-id="7cb12-144">Луаприв определяет следующие типы проблем:</span><span class="sxs-lookup"><span data-stu-id="7cb12-144">LuaPriv identifies the following types of problems:</span></span>



| <span data-ttu-id="7cb12-145">**Потенциальная ошибка**</span><span class="sxs-lookup"><span data-stu-id="7cb12-145">**Potential Issue**</span></span>       | <span data-ttu-id="7cb12-146">**Описание**</span><span class="sxs-lookup"><span data-stu-id="7cb12-146">**Description**</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7cb12-147">Ограниченные пространства имен</span><span class="sxs-lookup"><span data-stu-id="7cb12-147">Restricted Namespaces</span></span>     | <span data-ttu-id="7cb12-148">Создание именованного объекта синхронизации (события, семафора, мьютекса и т. д.) без пространства имен может усложнить выполнение без прав доступа в некоторых операционных системах, так как операционная система может выбрать размещение объекта в ограниченном пространстве имен.</span><span class="sxs-lookup"><span data-stu-id="7cb12-148">Creating a named synchronization object (Event, Semaphore, Mutex, etc) without a namespace may complicate running without privilege on some operating systems because the operating system may choose to place the object in a restricted namespace.</span></span> <span data-ttu-id="7cb12-149">Для создания такого объекта в ограниченном пространстве имен (например, в глобальном пространстве имен) требуется Секреатеглобалпривилеже, который предоставляется только администраторам.</span><span class="sxs-lookup"><span data-stu-id="7cb12-149">Creating such an object in a restricted namespace (such as the Global namespace) requires SeCreateGlobalPrivilege, which is granted only to administrators.</span></span><br/> <span data-ttu-id="7cb12-150">Луаприв помечает эти проблемы, если они обнаруживаются.</span><span class="sxs-lookup"><span data-stu-id="7cb12-150">LuaPriv flags both these issues if it detects them.</span></span><br/> |
| <span data-ttu-id="7cb12-151">Проверки жесткого администратора</span><span class="sxs-lookup"><span data-stu-id="7cb12-151">Hard Administrator Checks</span></span> | <span data-ttu-id="7cb12-152">Некоторые приложения передают маркер безопасности пользователя, чтобы узнать, сколько прав он имеет.</span><span class="sxs-lookup"><span data-stu-id="7cb12-152">Some applications interrogate the user's security token to find out how much privilege he/she has.</span></span> <span data-ttu-id="7cb12-153">В таких случаях приложение может изменить его поведение в зависимости от того, сколько энергии полагается на пользователя.</span><span class="sxs-lookup"><span data-stu-id="7cb12-153">In those cases, the application may change its behavior depending on how much power it thinks the user has.</span></span> <br/> <span data-ttu-id="7cb12-154">Вызовы API Луаприв flags, возвращающие эту информацию.</span><span class="sxs-lookup"><span data-stu-id="7cb12-154">LuaPriv flags API calls that return this information.</span></span><br/>                                                                                                                                                                                                |
| <span data-ttu-id="7cb12-155">Запрос прав доступа</span><span class="sxs-lookup"><span data-stu-id="7cb12-155">Requesting Privileges</span></span>     | <span data-ttu-id="7cb12-156">Приложение может попытаться включить необходимую для безопасности привилегию (например, SeTcbPrivilege или SeSecurityPrivilege) перед выполнением операции, которая ее требует.</span><span class="sxs-lookup"><span data-stu-id="7cb12-156">An application may attempt to enable a security-relevant privilege (such as SeTcbPrivilege or SeSecurityPrivilege) prior to performing an operation that requires it.</span></span> <br/> <span data-ttu-id="7cb12-157">Флаги Луаприв попытаются включить привилегии, соответствующие безопасности.</span><span class="sxs-lookup"><span data-stu-id="7cb12-157">LuaPriv flags attempts to enable security-relevant privileges.</span></span> <br/>                                                                                                                                                                                                                               |
| <span data-ttu-id="7cb12-158">Отсутствующие привилегии</span><span class="sxs-lookup"><span data-stu-id="7cb12-158">Missing Privileges</span></span>        | <span data-ttu-id="7cb12-159">Если приложение пытается разрешить привилегию, которое у пользователя нет, то, вероятно, сообщает, что приложение принимает привилегию, что может привести к различиям в поведении.</span><span class="sxs-lookup"><span data-stu-id="7cb12-159">If an application attempts to enable a privilege that the user does not have, it probably signals that the application expects the privilege, which can cause behavior differences.</span></span> <br/> <span data-ttu-id="7cb12-160">Неудачные запросы на привилегии Луаприв флагов.</span><span class="sxs-lookup"><span data-stu-id="7cb12-160">LuaPriv flags failed privilege requests.</span></span> <br/>                                                                                                                                                                                                                                       |
| <span data-ttu-id="7cb12-161">INI-File операции</span><span class="sxs-lookup"><span data-stu-id="7cb12-161">INI-File Operations</span></span>       | <span data-ttu-id="7cb12-162">Попытки записи в сопоставленные INI-файлы (Вритеприватепрофилесектион и аналогичные API) могут завершаться сбоем в качестве пользователя без прав администратора.</span><span class="sxs-lookup"><span data-stu-id="7cb12-162">Attempts to write to mapped INI files (WritePrivateProfileSection and similar APIs) can fail as a non-administrator user.</span></span> <br/> <span data-ttu-id="7cb12-163">Луаприв помечает такие операции.</span><span class="sxs-lookup"><span data-stu-id="7cb12-163">LuaPriv flags such operations.</span></span><br/>                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="7cb12-164">доступ запрещен</span><span class="sxs-lookup"><span data-stu-id="7cb12-164">Access Denied</span></span>             | <span data-ttu-id="7cb12-165">Если приложение пытается получить доступ к объекту (файлу, разделу реестра и т. д.), но попытка не удалась из-за недостаточного доступа, приложение, скорее всего, будет работать с более высоким уровнем привилегий.</span><span class="sxs-lookup"><span data-stu-id="7cb12-165">If the application attempts to access an object (File, registry key, etc) but the attempt fails due to insufficient access, then the application probably expects to be running with more privilege than it has.</span></span> <br/> <span data-ttu-id="7cb12-166">Луаприв flags Object — открытые попытки, которые завершаются сбоем с отказом в ДОСТУПе \_ и аналогичными ошибками.</span><span class="sxs-lookup"><span data-stu-id="7cb12-166">LuaPriv flags object-open attempts that fail with ACCESS\_DENIED and similar errors.</span></span><br/>                                                                                                                                                               |
| <span data-ttu-id="7cb12-167">Запретить ACE</span><span class="sxs-lookup"><span data-stu-id="7cb12-167">Deny ACEs</span></span>                 | <span data-ttu-id="7cb12-168">Если объект запрещает ACE в списке DACL, он явно запрещает доступ к определенным сущностям.</span><span class="sxs-lookup"><span data-stu-id="7cb12-168">If an object has Deny ACEs in its DACL, then it explicitly denies access to specific entities.</span></span> <br/> <span data-ttu-id="7cb12-169">Это редкое и усложняет прогнозирование, поэтому флаги Луаприв отклоняют ACE при их обнаружении.</span><span class="sxs-lookup"><span data-stu-id="7cb12-169">This is uncommon, and makes prediction difficult, so LuaPriv flags Deny ACEs when it finds them.</span></span><br/>                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="7cb12-170">Доступ ограничен</span><span class="sxs-lookup"><span data-stu-id="7cb12-170">Access Restricted</span></span>         | <span data-ttu-id="7cb12-171">Если приложение пытается открыть объект для получения прав, которые не предоставляются обычным пользователям (например, при попытке записи в файл, доступный только для чтения администраторам), приложение, скорее всего, не будет работать при запуске от имени обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="7cb12-171">If an application attempts to open an object for rights that are not granted to normal users (for example, trying to write to a file that is only writeable by administrators), then the application probably will not work the same when run as a normal user.</span></span> <br/> <span data-ttu-id="7cb12-172">Луаприв помечает такие операции.</span><span class="sxs-lookup"><span data-stu-id="7cb12-172">LuaPriv flags such operations.</span></span><br/>                                                                                                                                                                      |
| <span data-ttu-id="7cb12-173">МАКСИМАЛЬНО \_ допустимое</span><span class="sxs-lookup"><span data-stu-id="7cb12-173">MAXIMUM\_ALLOWED</span></span>          | <span data-ttu-id="7cb12-174">Если приложение открывает объект для максимального \_ допустимого значения, то фактическая проверка доступа к объекту будет выполняться в других местах.</span><span class="sxs-lookup"><span data-stu-id="7cb12-174">If an application opens an object for MAXIMUM\_ALLOWED, then the actual access check on the object will occur elsewhere.</span></span> <span data-ttu-id="7cb12-175">Большинство кода, выполняющего эту команду, работает неправильно и, по-своему, будет работать по-разному при выполнении без прав доступа.</span><span class="sxs-lookup"><span data-stu-id="7cb12-175">Most code that does this does not work correctly, and will almost certainly work differently when run without privilege.</span></span> <br/> <span data-ttu-id="7cb12-176">Таким же Луаприв помечает все инциденты максимально \_ допустимого числа.</span><span class="sxs-lookup"><span data-stu-id="7cb12-176">LuaPriv thus flags all incidents of MAXIMUM\_ALLOWED.</span></span> <br/>                                                                                                                                                            |



 

<span data-ttu-id="7cb12-177">Распространенные проблемы записываются в туманны прочие проверки:</span><span class="sxs-lookup"><span data-stu-id="7cb12-177">Commonly overlooked issues are captured in the nebulous Misc Checks:</span></span>

-   <span data-ttu-id="7cb12-178">Сведения о неопасных интерфейсах API</span><span class="sxs-lookup"><span data-stu-id="7cb12-178">Dangerous APIs Stop Details</span></span>
-   <span data-ttu-id="7cb12-179">Сведения об отмене "грязных" стеков</span><span class="sxs-lookup"><span data-stu-id="7cb12-179">Dirty Stacks Stop Details</span></span>
-   <span data-ttu-id="7cb12-180">Смена времени</span><span class="sxs-lookup"><span data-stu-id="7cb12-180">Time Rollover</span></span>

<span data-ttu-id="7cb12-181">Мы добавили новый средство проверки печати.</span><span class="sxs-lookup"><span data-stu-id="7cb12-181">We have added a new Print Verifier.</span></span> <span data-ttu-id="7cb12-182">Этот уровень помогает находить и устранять неполадки, которые могут возникнуть, когда приложение вызывает подсистему печати.</span><span class="sxs-lookup"><span data-stu-id="7cb12-182">This layer helps find and troubleshoot issues that may result when an application calls the print subsystem.</span></span> <span data-ttu-id="7cb12-183">Средство проверки печати предназначено для двух уровней подсистемы печати, слоя Принтапи и слоя Принтдривер.</span><span class="sxs-lookup"><span data-stu-id="7cb12-183">Print Verifier targets the two layers of the print subsystem, the PrintAPI layer and the PrintDriver layer.</span></span>

<span data-ttu-id="7cb12-184">*Уровень API печати*</span><span class="sxs-lookup"><span data-stu-id="7cb12-184">*Print API Layer*</span></span>

<span data-ttu-id="7cb12-185">Средство проверки печати проверяет интерфейс между программой и Винспул. drv и prntvpt.dll и проверяет интерфейсы этих библиотек DLL.</span><span class="sxs-lookup"><span data-stu-id="7cb12-185">Print Verifier tests the interface between a program and Winspool.drv and prntvpt.dll and tests the interfaces of those DLLs.</span></span> <span data-ttu-id="7cb12-186">Правила вызова функций в этом интерфейсе см. в разделе справки MSDN, посвященном интерфейсам API, экспортируемым с помощью винспул. drv и prntvpt.dll.</span><span class="sxs-lookup"><span data-stu-id="7cb12-186">You can review the rules for calling functions in this interface in the MSDN help section for APIs exported by winspool.drv and prntvpt.dll.</span></span>

<span data-ttu-id="7cb12-187">*Уровень драйвера принтера*</span><span class="sxs-lookup"><span data-stu-id="7cb12-187">*Print Driver Layer*</span></span>

<span data-ttu-id="7cb12-188">Средство проверки печати также проверяет интерфейс между основным драйвером печати, таким как UNIDRV.DLL, UNIDRUI.DLL, PSCRIPT5.DLL, PS5UI.DLL или MXDWDRV.DLL, а также подключаемые модули драйвера печати. Сведения об этом интерфейсе можно найти в MSDN и WDK.</span><span class="sxs-lookup"><span data-stu-id="7cb12-188">Print Verifier also tests the interface between a core print driver such as UNIDRV.DLL, UNIDRUI.DLL, PSCRIPT5.DLL, PS5UI.DLL, or MXDWDRV.DLL, and the print driver plug-ins. You can find information about this interface in the MSDN and the WDK.</span></span>

<span data-ttu-id="7cb12-189">Обратите внимание, что некоторые из этих проверок предназначены только для Windows 7, а другие будут работать лучше под Windows 7.</span><span class="sxs-lookup"><span data-stu-id="7cb12-189">Note that some of these checks are for Windows 7 only, and others will simply perform better under Windows 7.</span></span>

<span data-ttu-id="7cb12-190">Как правило, только отладочные версии запускают средство проверки приложений, поэтому производительность обычно не является проблемой.</span><span class="sxs-lookup"><span data-stu-id="7cb12-190">Typically, only debug versions run the Application Verifier, so performance is not generally an issue.</span></span> <span data-ttu-id="7cb12-191">Если проблемы с производительностью возникают при использовании этой или любой другой проверки средство проверки приложений, выполните одну проверку за раз, пока не будут выполнены все необходимые проверки.</span><span class="sxs-lookup"><span data-stu-id="7cb12-191">If performance issues arise from the use of this, or any other Application Verifier check, run one check at a time until you have performed all needed checks.</span></span>

<span data-ttu-id="7cb12-192">Почти 10% сбоев приложений в системах Windows вызваны повреждением кучи.</span><span class="sxs-lookup"><span data-stu-id="7cb12-192">Nearly 10% of application crashes on Windows systems are due to heap corruption.</span></span> <span data-ttu-id="7cb12-193">Эти сбои практически невозможно отлаживать после факта.</span><span class="sxs-lookup"><span data-stu-id="7cb12-193">These crashes are nearly impossible to debug after the fact.</span></span> <span data-ttu-id="7cb12-194">Лучшим способом избежать этих проблем является тестирование функций кучи страниц, найденных в средство проверки приложений.</span><span class="sxs-lookup"><span data-stu-id="7cb12-194">The best way to avoid these issues is to test with the Page Heap features found in Application Verifier.</span></span> <span data-ttu-id="7cb12-195">Существует две разновидности кучи страниц: Full и light.</span><span class="sxs-lookup"><span data-stu-id="7cb12-195">There are two flavors of Page Heap: "Full" and "Light."</span></span> <span data-ttu-id="7cb12-196">Параметр Full является значением по умолчанию. При обнаружении повреждений отладчик немедленно останавливается.</span><span class="sxs-lookup"><span data-stu-id="7cb12-196">Full is the default; it will force a debugger stop instantly upon detecting corruption.</span></span> <span data-ttu-id="7cb12-197">Эта функция должна выполняться в отладчике.</span><span class="sxs-lookup"><span data-stu-id="7cb12-197">This feature MUST be run while under the debugger.</span></span> <span data-ttu-id="7cb12-198">Однако это также самый ресурсоемкий ресурс.</span><span class="sxs-lookup"><span data-stu-id="7cb12-198">However, it is also the most resource demanding.</span></span> <span data-ttu-id="7cb12-199">Если у пользователя возникают проблемы с временем и сценарий уже выполнялся в режиме полной кучи страниц, его установка в значение «Light», скорее всего, позволит решить эти проблемы.</span><span class="sxs-lookup"><span data-stu-id="7cb12-199">If a user is having timing issues and has already run a scenario under "Full" Page Heap, setting it to "Light" will likely address these issues.</span></span> <span data-ttu-id="7cb12-200">Кроме того, куча неустранимых страниц не завершает работу, пока процесс не завершится.</span><span class="sxs-lookup"><span data-stu-id="7cb12-200">Additionally, Light Page Heap does not crash until the process exits.</span></span> <span data-ttu-id="7cb12-201">Он обеспечивает трассировку стека для выделения, но может значительно дольше диагностировать, чем использование его полного аналога.</span><span class="sxs-lookup"><span data-stu-id="7cb12-201">It does provide a stack trace to the allocation, but can take considerably longer to diagnose than leveraging its Full counterpart.</span></span>

<span data-ttu-id="7cb12-202">Отслеживайте состояние надежности приложений с помощью веб-портала Винкуал.</span><span class="sxs-lookup"><span data-stu-id="7cb12-202">Monitor the reliability status of the applications via the Winqual web portal.</span></span> <span data-ttu-id="7cb12-203">На этом портале отображаются отчеты об ошибках, собранные с помощью отчеты об ошибках Windows, что позволяет легко находить наиболее частые сбои.</span><span class="sxs-lookup"><span data-stu-id="7cb12-203">This portal shows the error reports collected via Windows Error Reporting, so it is easy to identify the most frequent failures.</span></span> <span data-ttu-id="7cb12-204">Дополнительные сведения см. в отчеты об ошибках Windows: начало работы.</span><span class="sxs-lookup"><span data-stu-id="7cb12-204">Learn about this at Windows Error Reporting: Getting Started.</span></span> <span data-ttu-id="7cb12-205">Корпорация Майкрософт не взимается за эту службу.</span><span class="sxs-lookup"><span data-stu-id="7cb12-205">Microsoft does not charge for this service.</span></span>

<span data-ttu-id="7cb12-206">Чтобы воспользоваться преимуществами Винкуал, необходимо:</span><span class="sxs-lookup"><span data-stu-id="7cb12-206">To take advantage of WinQual, you must:</span></span>

1.  <span data-ttu-id="7cb12-207">Зарегистрируйте компанию для Винкуал, для которой требуется идентификатор VeriSign.</span><span class="sxs-lookup"><span data-stu-id="7cb12-207">Register your company for WinQual, which requires a VeriSign ID.</span></span> <span data-ttu-id="7cb12-208">Сведения о Windows 7 для Винкуал можно найти на портале разработчика, сгруппированном под управлением Windows Vista с пакетом обновления 1 (SP1) \\ Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="7cb12-208">You can find Windows 7 information about WinQual in the developer portal grouped under Windows Vista SP1 \\ Windows Server 2008.</span></span> <span data-ttu-id="7cb12-209">В ближайшее время у него будет расположение Windows 7.</span><span class="sxs-lookup"><span data-stu-id="7cb12-209">It will have a Windows 7 location soon.</span></span>
2.  <span data-ttu-id="7cb12-210">Сопоставьте приложения ISV с именем продукта и именем ISV, которое связывает отчеты об ошибках с компанией.</span><span class="sxs-lookup"><span data-stu-id="7cb12-210">Map the ISV applications to a product name and the ISV name, which links the failure reports to the company.</span></span> <span data-ttu-id="7cb12-211">Другие независимые поставщики программного обеспечения не могут просматривать ваши отчеты об ошибках.</span><span class="sxs-lookup"><span data-stu-id="7cb12-211">Other ISVs cannot view your error reports.</span></span>
3.  <span data-ttu-id="7cb12-212">Используйте портал для обнаружения основных проблем.</span><span class="sxs-lookup"><span data-stu-id="7cb12-212">Use the portal to identify top issues.</span></span> <span data-ttu-id="7cb12-213">Независимые поставщики программного обеспечения могут также создавать ответы, которые сообщают клиентам о том, какие действия следует предпринять после сбоя.</span><span class="sxs-lookup"><span data-stu-id="7cb12-213">ISVs can also create responses that inform customers what steps to take after a failure.</span></span> <span data-ttu-id="7cb12-214">Система ответа поддерживает более 10 языков по всему миру.</span><span class="sxs-lookup"><span data-stu-id="7cb12-214">The response system supports over 10 languages worldwide.</span></span>

<span data-ttu-id="7cb12-215">Еще одно Примечание. средство проверки приложений подходит только для ветвей кода, с которыми он выполняется.</span><span class="sxs-lookup"><span data-stu-id="7cb12-215">One further note: Application Verifier is only as good as the code paths you run it against.</span></span> <span data-ttu-id="7cb12-216">Значение объединения этого инструмента с инструментом покрытия кода не может быть переопределенно.</span><span class="sxs-lookup"><span data-stu-id="7cb12-216">The value of combining this tool with a code coverage tool cannot be overstated.</span></span>

## <a name="links-to-other-resources"></a><span data-ttu-id="7cb12-217">Ссылки на другие ресурсы</span><span class="sxs-lookup"><span data-stu-id="7cb12-217">Links to Other Resources</span></span>

<span data-ttu-id="7cb12-218">**Средства отладки для Windows:**</span><span class="sxs-lookup"><span data-stu-id="7cb12-218">**Debugging Tools for Windows:**</span></span>

-   [<span data-ttu-id="7cb12-219">Обзор и загрузка сайта</span><span class="sxs-lookup"><span data-stu-id="7cb12-219">Overview and download site</span></span>](https://msdn.microsoft.com/windows/hardware/bg127145)
-   [<span data-ttu-id="7cb12-220">Документация MSDN в Интернете</span><span class="sxs-lookup"><span data-stu-id="7cb12-220">MSDN online documentation</span></span>](/windows-hardware/drivers/debugger/)

<span data-ttu-id="7cb12-221">**средство проверки приложений:**</span><span class="sxs-lookup"><span data-stu-id="7cb12-221">**Application Verifier:**</span></span>

-   <span data-ttu-id="7cb12-222">[Обзор](/previous-versions/ms220948(v=vs.80))</span><span class="sxs-lookup"><span data-stu-id="7cb12-222">[Overview](/previous-versions/ms220948(v=vs.80))</span></span>
-   [<span data-ttu-id="7cb12-223">Загрузить</span><span class="sxs-lookup"><span data-stu-id="7cb12-223">Download</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyID=c4a25ab9-649d-4a1b-b4a7-c9d8b095df18&amp;DisplayLang=en)
-   <span data-ttu-id="7cb12-224">[Средство проверки приложений для Microsoft Visual Studio 2008/платформа .NET Framework 3,5](/previous-versions/ms220948(v=vs.80))</span><span class="sxs-lookup"><span data-stu-id="7cb12-224">[Application Verifier for Microsoft Visual Studio 2008/.NET Framework 3.5](/previous-versions/ms220948(v=vs.80))</span></span>

    <span data-ttu-id="7cb12-225">**Примечание.** версия средство проверки приложений, поставляемая в составе Visual Studio, весьма устаревша.</span><span class="sxs-lookup"><span data-stu-id="7cb12-225">**Note:** the Application Verifier version that ships in Visual Studio is quite dated.</span></span> <span data-ttu-id="7cb12-226">По возможности используйте автономный пакет.</span><span class="sxs-lookup"><span data-stu-id="7cb12-226">If possible, use the standalone package instead.</span></span> <span data-ttu-id="7cb12-227">По этой причине в будущих версиях Visual Studio больше не будет встроенных средство проверки приложений.</span><span class="sxs-lookup"><span data-stu-id="7cb12-227">For this reason, future versions of Visual Studio will no longer have embedded Application Verifier.</span></span>

<span data-ttu-id="7cb12-228">**Винкуал:**</span><span class="sxs-lookup"><span data-stu-id="7cb12-228">**WinQual:**</span></span>

-   [<span data-ttu-id="7cb12-229">Веб-службы Windows Quality Services (Винкуал)</span><span class="sxs-lookup"><span data-stu-id="7cb12-229">Windows Quality Online Services (Winqual)</span></span>](/windows-hardware/drivers/dashboard/winqual-submission-tool--winqualexe-)
-   [<span data-ttu-id="7cb12-230">Отчеты об ошибках Windows: начало работы</span><span class="sxs-lookup"><span data-stu-id="7cb12-230">Windows Error Reporting: Getting Started</span></span>](../wer/using-wer.md)

 

 
