---
description: .
ms.assetid: 25d07e42-b5eb-4f72-b4b1-0ebb881644ba
title: Дополнительные защита ресурсов Windows по разделам реестра
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fb048a45324e52c9b9319f52f95b64361b95bbfd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105693692"
---
# <a name="additional-windows-resource-protection-on-registry-keys"></a>Дополнительные защита ресурсов Windows по разделам реестра

## <a name="platform"></a>Платформа

**Клиенты** — Windows 7  
**Серверы** — Windows Server 2008 R2  









## <a name="feature-impact"></a>Воздействие на функции

**Серьезность** — средний  
**Частота** -низкая  


## <a name="description"></a>Описание

Дополнительные системные ресурсы добавили параметры защита ресурсов Windows (WRP) в Windows 7, делая их параметрами только для чтения. Подавляющее большинство ресурсов, получивших дополнительную защиту, являются системными ключами сервера COM, хотя некоторые функции имеют дополнительную защиту ресурсов. Корпорация Майкрософт изменила эти ресурсы, чтобы защитить систему и другие приложения от нарушения друг друга и обеспечить согласованную, стабильную платформу, на основе которой приложения могут надежно работать. В прошлом приложения могли предоставлять пользовательские файлы и использовать незащищенную регистрацию COM для изменения системы. В случае старых приложений это может понизить уровень среды выполнения системы или изменить интерфейс, на котором другие приложения должны работать правильно. В худшем случае такие установки могут привести к сбою системы или ухудшению его производительности с течением времени. Для обеспечения лучшей работы и более стабильной платформы приложений мы заблокировали эти регистрации, чтобы только обновления Майкрософт могли изменять системные компоненты.

Так как большинство ресурсов — это ключи COM, используемые системой, это изменение не повлияет на большинство приложений. Хотя мы планируем, чтобы большинство приложений имели более высокий опыт работы с Windows 7 в результате этих изменений, это может негативно повлиять на небольшое подмножество приложений. Уровни совместимости приложений автоматически устраняют проблемы установки, всегда указывая приложению, что оно было успешно изменено, даже если оно не прошло из-за того, что он был защищенным ресурсом. Это предотвращает критические установки приложений, но может вызвать проблемы, если необходимо изменить настройку, чтобы приложение работало правильно.

## <a name="manifestation"></a>Проявление

Приложения могли изменить эти параметры до Windows 7. После установки в Windows 7 приложения могут обнаружить, что некоторые функции больше не работают, поскольку параметры не отражали ожидаемое приложение.

Существуют два сценария, в которых приложения могут столкнуться с проблемами, связанными с этой дополнительной защитой:

-   Приложения, которые могли использовать защищенные параметры в качестве хранилища данных или как редкие или непредвиденные точки расширяемости;
-   В редких случаях механизм обнаружения, используемый для определения настроек приложений, может не распознать определенную программу установки, поэтому уровень предотвращения совместимости приложений может быть не применен.

## <a name="mitigation"></a>Меры по снижению риска

Основным способом устранения рисков является уровень совместимости приложений системы, который автоматически применяется к программам установки приложений при обнаружении. Можно также вручную применить его к любому приложению, используя вкладку Совместимость в свойствах приложения.

Этот уровень устраняет проблему, перехватывая операции реестра. В случае, когда приложение пытается изменить параметр только для чтения (WRP), слой всегда возвращает значение Success, даже несмотря на то, что настройка фактически не изменилась. Для большинства приложений это не приведет к возникновению проблем. Тем не менее существует вероятность того, что приложению требовалось изменить настройку, чтобы обеспечить правильную работу, что является первым сценарием, описанным выше.

## <a name="solution"></a>Решение

Для двух указанных выше сценариев:

-   Если приложению требуется, чтобы ключ был доступен для записи, для работы или использования хранилища данных нет решения, отличного от изменения приложения, чтобы оно больше не записывалось в это место.
-   Если уровень совместимости не был применен к программе установки, то ошибка установки должна быть обнаружена и предложена для применения и повторного запуска. Приложения также могут работать в режиме совместимости, в этом случае применяется уровень защиты.

## <a name="compatibility-tests"></a>Тесты на совместимость

Как определить, применено ли приложение к снижению защиты WRP:

-   Установщик Windows учитывает WRP; он автоматически игнорирует попытки записи или изменения защищенного ресурса. Если приложение было установлено с установщик Windows и ведение журнала включено, то для каждой операции записи в реестре будет зарегистрировано предупреждение, которое было пропущено из-за того, что он является ресурсом, защищенным WRP.
-   API WRP включает СфЦискэйпротектед, который может выполнять запросы, если раздел реестра защищен WRP в текущей системе. Дополнительные сведения об использовании этого API см. в записи WRP в MSDN.

## <a name="links-to-other-resources"></a>Ссылки на другие ресурсы

<dl>

[защита ресурсов Windows](/windows/desktop/Wfp/windows-resource-protection-portal)  
</dl>

 

 
