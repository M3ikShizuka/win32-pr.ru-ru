---
description: .
ms.assetid: ee1df9f2-585f-4208-ad49-a0f6ba76f53a
title: ChooseFont () общее диалоговое окно Win32
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4e55a31d1f4d5530e04fe455135952eb94cc4bda
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105713038"
---
# <a name="choosefont-win32-common-dialog"></a>ChooseFont () общее диалоговое окно Win32

## <a name="affected-platforms"></a>Затронутые платформы

**Клиенты** — Windows 7  
**Серверы** — Windows Server 2008 R2  









## <a name="feature-impact"></a>Воздействие на функции

**Серьезность** — низкая  
**Частота** — средний  




## <a name="description"></a>Описание

В состав Windows 7 входит несколько обновлений для общего диалогового окна ChooseFont () Win32. Они делятся на две категории:

-   Визуальное обновление диалогового окна
-   Поддержка новой функции "Показать/скрыть шрифты"

**Диалоговое окно Обновление** обновляет стандартный шаблон, чтобы диалоговое окно больше в строке с другими макетами диалоговых окон в Windows. В нем представлено представление WYSIWYG для списков шрифтов, помогающих пользователям выбирать шрифты. Он также содержит ссылку на CPL, обеспечивающую удобный доступ для пользователей, желающих настроить списки шрифтов.

**Показать/скрыть шрифты** — это новая функция платформы Windows 7, в которой шрифты, не подходящие для языковых параметров текущего пользователя (методы ввода), не отображаются по умолчанию в списках выбора шрифтов. Пользователи могут настроить шрифты, которые должны отображаться в CPL, или отключить эту функцию.

## <a name="manifestation-of-impact"></a>Влияние на манифесты

**Визуальное обновление диалогового окна**

В Windows 7 появились два новых шаблона (одна для приложений, которые загружают версию 6 или более поздней comctl32.dll а другая — для приложений, загружая более ранние версии).

-   В целях совместимости приложений эти новые шаблоны будут загружены только для приложений, которые не применяют очередь сообщений ChooseFont. Приложения, которые применяют очередь сообщений, будут по-прежнему видеть старый макет диалогового окна.
-   Приложения, предоставляющие собственные шаблоны, по прежнему смогут их использовать.

Приложения, не получающие новые шаблоны, не увидят изменений макета диалога из Vista. Однако они должны по-прежнему получить новый предварительный просмотр шрифта WYSIWYG.

**Показать/скрыть шрифты**

Для всех версий ChooseFont диалоговое окно будет использовать параметры отображения и скрытия шрифта текущего пользователя, чтобы определить список шрифтов для отображения. Это приведет к отображению меньшего числа списков шрифтов в большинстве экземпляров.

## <a name="end-user-mitigation"></a>Устранение рисков для конечных пользователей

**Показать/скрыть шрифты:** Чтобы отключить скрытие шрифтов, пользователи должны открыть страницу «параметры шрифта» в панели «шрифты» и снять флажок «

Флажок "скрыть шрифты, основанные на языковых параметрах"

## <a name="developer-mitigation"></a>Устранение рисков для разработчиков

-   **Визуальное обновление:** Разработчикам приложений, которые предоставляют собственные шаблоны, может потребоваться обновить это, чтобы они были в соответствии с новым шаблоном Windows 7. Новые шаблоны доступны в файле шаблона Font. DLG.

    **Примечание.** Новый опубликованный шаблон содержит дополнительный элемент управления SysLink, который предоставляет ярлык, позволяющий пользователям запускать значок CPL для вывода дополнительных шрифтов. Для элемента управления Link требуется версия 6 библиотеки общих элементов управления Windows (comctl32.dll). Разработчики должны предоставить манифест или директиву, указывающую на использование библиотеки DLL версии 6, если она доступна. Когда приложение использует более раннюю версию библиотеки общих элементов управления, используйте вместо него тип элемента управления "Кнопка".

-   **Показать/скрыть шрифты:** Разработчики могут отключить эту функцию, предоставив дополнительный флаг (CF \_ инактивефонтс) в элементе flags структуры CHOOSEFONT. Установка этого флага приводит к тому, что все установленные шрифты отображаются в списке шрифтов.
-   **Показать/скрыть шрифты:** В приложениях, предоставляющих содержимое справки ChooseFont, может потребоваться добавить содержимое, объясняющее, почему список шрифтов уменьшается, и направлять пользователей на панели CPL для настройки их списков шрифтов.

## <a name="compatibility-performance-reliability-and-usability-testing"></a>Совместимость, производительность, надежность и тестирование на удобство использования

Разработчики, чьи приложения заключают очередь сообщений ChooseFont для настройки диалогового окна, должны убедиться, что их приложения сохраняют все имеющиеся функции.

Приложения, которые сильно обрезают список шрифтов с помощью флагов, должны убедиться, что представленный список шрифтов остается приемлемым.

 

 



