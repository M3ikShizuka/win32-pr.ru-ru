---
description: .
ms.assetid: fe19e337-3109-42d6-a704-70662ac7c684
title: Включение поддержки Windows 7 для Intel AVX
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 440c71c5fd6aa65b5e56b8dfb0b6eab134418192
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105693642"
---
# <a name="enable-windows-7-support-for-intel-avx"></a>Включение поддержки Windows 7 для Intel AVX

## <a name="affected-platforms"></a>Затронутые платформы

 **Клиенты** — Windows 7 SP1  
**Серверы** — Windows Server 2008 R2 с пакетом обновления 1 (SP1)  


## <a name="feature-impact"></a>Воздействие на функции

 **Серьезность** — низкая  
**Частота** -низкая  





## <a name="description"></a>Описание

Intel<sup>?</sup> Расширенные векторные расширения (AVX)<sup>?</sup> — это 256-разрядное расширение вектора с плавающей запятой SIMD для архитектуры Intel. Он включает расширения для наборов инструкций и регистров.

Корпорация Майкрософт разработала некоторые улучшения API, такие как функции Ксстате, которые позволяют приложениям получать доступ к информации и состоянию расширенных функций процессора, включая AVX, и управлять ими.

## <a name="usage-scenarios"></a>Сценарии использования

Существует три общих уровня потенциального воздействия.

**Уровень 1.** Приложения, которые не используют Intel AVX напрямую, не увидят никакого влияния на их функциональность, даже если они вызывают библиотеки или используют компиляторы, которые косвенно используют или создают расширения Intel AVX. Это соответствует большинству приложений.

**Уровень 2:** Расширенные приложения, явно использующие набор инструкций Intel AVX, смогут получать доступ к содержимому регистра AVX и изменять его при возникновении аппаратного исключения. Очень небольшое количество приложений попадают в эту категорию, так как оно подразумевает глубокую информацию о потоке инструкций, выполняемую на момент исключения, например приложения с разделами, написанными на языке ассемблера, или те, которые создают машинный код во время выполнения (например, среды выполнения управляемого кода с JIT-компиляцией).

**Уровень 3.** Приложения отладчика смогут получать доступ к состоянию AVX в отлаживаемом приложении и работать с ним.

## <a name="how-to-leverage-feature-capabilities"></a>Как использовать возможности функций

**Уровень 1.** Чтобы приложения не использовали Intel AVX, никаких действий не требуется.

**Уровень 2:** Приложения в этой категории имеют возможность доступа и управления состоянием AVX во время исключения из фильтров исключений. После получения контекста базового процессора через Жетексцептионинформатион фильтры должны:

 **1.** проверьте значение флага **context \_ ксстате** . Этот флаг указывает на наличие по крайней мере одной функции Ксстате в контексте.  
**2.** если это так, вызовите **жетксстатефеатуресмаск** и проверьте значение флага **\_ AVX ксстате** в возвращенной маске. Это указывает на присутствие состояния AVX в контексте.  
**3.** вызовите **локатексстатефеатуре** , чтобы получить фактическое расположение, где хранится состояние AVX.  

**Уровень 3.** Нет необходимости обновлять существующие приложения отладчика, если только они не хотят получить доступ к регистрам Intel AVX:

**1.** чтобы определить, включена ли AVX, отладчик должен использовать:

-   Жетенабледксстатефеатурес для получения маски включенных функций Ксстате на процессорах x86 или x64, чтобы определить, какие функции существуют и включены в системе перед использованием функции процессора Ксстате или попытки управления контекстами Ксстате.

  
**2.** если AVX существует и вы хотите получить и манипулировать состоянием AVX из отлаживаемого приложения (например, GetThreadContext и SetThreadContext), отладчик должен использовать:

-   Функция Инитиализеконтекст для инициализации структуры контекста в буфере с требуемым размером и выравниванием
-   Функция Копиконтекст для копирования структуры исходного контекста (включая любые Ксстате) на инициализированную структуру контекста назначения

  
**3.** чтобы проверить, установить и определить состояние AVX в контексте процессора, отладчик должен использовать:

-   Локатексстатефеатуре получить указатель на состояние процессора для отдельной функции Ксстате в структуре контекста
-   Жетксстатефеатуресмаск вернуть маску функций Ксстате, установленных в структуре контекста
-   Сетксстатефеатуресмаск для установки маски функций Ксстате, установленных в структуре контекста

  


## <a name="links-to-other-resources"></a>Ссылки на другие ресурсы

-   Дополнительные сведения о функциях Ксстате в Windows SDK см. в разделе [Отладка функций](../debug/debugging-functions.md).
-   Общие сведения о инструкциях и возможностях Intel AVX см. [в разделе Intel AVX: новые границы повышения производительности и эффективности энергопотребления](https://software.intel.com/articles/intel-avx-new-frontiers-in-performance-improvements-and-energy-efficiency/).

 

 
