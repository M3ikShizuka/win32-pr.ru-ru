---
description: .
ms.assetid: 872c2a33-327e-41a8-81db-905c46673f13
title: Рекомендации по повышению производительности
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6fda45cb1ec7fb66b8afdcdebab7c92bdb071a79
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105713040"
---
# <a name="best-practices-for-onoff-performance"></a>Рекомендации по повышению производительности

## <a name="platform"></a>Платформа

**Клиенты —** Windows Vista, Windows \| 7  
**Серверы —** Windows Server 2008 \| Windows server 2008 R2  

## <a name="description"></a>Описание

Состояния питания системы (или S-States), как определено в спецификации Advanced Computer Interface (ACPI), разговорной речи называются состояниями "вкл./выкл.", так как наиболее распространенным переходом в состоянии S является включение и отключение компьютера. Различные переходы состояния On/Off в системе, работающей под управлением Windows Vista или Windows 7, — это загрузка, спящий режим (ACPI S3), режим гибернации (ACPI S4) и завершение работы.

Высокая производительность во время этих переходов не только повышает восприятное качество компьютера, но и существенно влияет на ежедневные шаблоны использования компьютеров и надежность системы. Клиенты могут быть разочарованы системами, которые занимают слишком много времени для загрузки или завершения работы. Мобильные системы с длительными переходами в спящий режим и спящий режим могут неоправданно выпустить заряд аккумулятора. Более длительное время завершения работы также может негативно сказаться на надежности мобильных систем. Например, они увеличивают риск непредвиденных постепенных вырезков.

Системные расширения, такие как драйверы, приложения и службы, могут оказать значительное влияние на время перехода. В этом разделе обсуждаются некоторые рекомендации, которые могут быть доступны разработчикам приложений и служб, чтобы избежать задержек при загрузке, резервном завершении и выключении, а также для обеспечения реагирования на запросы после загрузки и после возобновления работы пользователя. Дополнительные сведения о выявлении проблем с производительностью при использовании набора средств производительности Windows и реализации следующих рекомендаций для приложения или службы см. в документации, приведенной в разделе "ссылки на другие ресурсы".

## <a name="best-practices"></a>Рекомендации

-   Используйте набор средств производительности Windows для измерения производительности во время всех переходов/выключений.
-   Выполните тестирование контролируемым образом и выполните сравнения с допустимым базовым показателем:
    -   Получение базового измерения в системе с минимальным числом системных расширений
    -   Добавление приложений и служб по одному за раз
    -   Проверка на неприемлемые регрессии при смене времени перехода
-   Избегайте использования управляемого кода для приложений с критическим загрузочным путем.
-   Убедитесь, что все приложения быстро реагируют на уведомления о завершении работы ( \_ сообщения WM куерендсессион и WM \_ ENDSESSION).
-   Сократите задержки в пути завершения работы служб и приложений за счет минимизации активности ЦП, диска и сети в ответ на уведомления о завершении работы.
-   Избегайте задержек при обработке уведомления о приостановке ( \_ сообщение WM поверброадкаст).
-   Быстрое реагирование на возобновление событий и сокращение времени ЦП, диска и сети после возобновления работы.
-   Уменьшение потребления ресурсов приложения после загрузки.
-   Не запускайте приложения из раздела RunOnce при каждой загрузке.
-   Преобразуйте все ненужные службы в начало или запуск триггера, чтобы обеспечить доступность системных ресурсов во время загрузки.
-   Не используйте группы порядка загрузки для выражения служб.
-   Убедитесь, что все работающие службы сообщают о состоянии как можно скорее во время загрузки, чтобы предотвратить блокировку диспетчера управления службами (SCM).
-   Избегайте использования управляемого кода для служб в пути запуска.
-   Не разрешайте службам участвовать в получении уведомлений о завершении работы и завершении работы (предварительное \_ Завершение управления службами и управляющие \_ \_ \_ коды завершения управления службой), если не требуется абсолютное требование.
-   Убедитесь, что все службы, которые выбрали получение уведомлений о завершении работы, быстро реагируют на работу SCM.
-   Убедитесь, что службы не хотят получать уведомления о приостановке, если это не требуется.
-   Убедитесь, что все службы быстро реагируют на возобновление событий и снижают скорость ЦП, диск и использование сети после возобновления.

## <a name="links-to-other-resources"></a>Ссылки на другие ресурсы

-   -   [Руководств по решениям перехода на Windows](/windows-hardware/test/assessments/onoff-transition-performance)
-   [Анализ производительности перехода на смену в Windows Vista](/windows-hardware/test/assessments/onoff-transition-performance)
-   [Анализ производительности Windows](https://msdn.microsoft.com/performance/default.aspx)
-   [Документация по инструментарию производительности Windows на MSDN](/previous-versions/windows/desktop/xperf/windows-performance-analyzer--wpa-)
-   [Форум по анализу производительности Windows](https://social.msdn.microsoft.com/Forums/wptk_v4/threads/)
-   [Трассировка событий для Windows на сайте MSDN](../etw/event-tracing-portal.md)

 

 
