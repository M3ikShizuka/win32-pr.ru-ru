---
description: Удаление отражения реестра Windows
ms.assetid: 4b42d44d-cde8-4d96-96c5-24b7ab7e4cec
title: Удаление отражения реестра Windows
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: eeab0109cbbac988c89d6add91fa899cea9169ad
ms.sourcegitcommit: 95685061d5b0333bbf9e6ebd208dde8190f97005
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2021
ms.locfileid: "108116262"
---
# <a name="removal-of-windows-registry-reflection"></a>Удаление отражения реестра Windows

## <a name="platform"></a>Платформа

**Клиенты** — Windows 7  
**Серверы** — Windows Server 2008 R2  









## <a name="feature-impact"></a>Воздействие на функции

 **Серьезность** — низкая  
**Частота** -низкая  





## <a name="description"></a>Описание

Процесс отражения реестра копирует разделы и значения реестра между двумя представлениями реестра, чтобы синхронизировать их. В предыдущих 64-разрядных установках Windows процесс отражал подмножество перенаправленных разделов реестра между 32-битным и 64-битным представлениями. Однако реализация этого метода привела к несогласованности в состоянии реестра. (Дополнительные сведения об отражении реестра см. в соответствующей статье MSDN в разделе *ссылки на другие ресурсы* ниже.)

Начиная с Windows 7, мы полностью удалили отражение реестра и объединили ключи, которые использовались для отражения:

-   \_ \_ \\ Классы программного обеспечения для локального компьютера hKey \\
-   HKEY \_ \_ \\ программное обеспечение на локальном компьютере \\ Microsoft \\ COM3
-   HKEY \_ \_ по локального компьютера \\ программное обеспечение \\ Microsoft \\ EventSystem
-   HKEY \_ по для локального \_ компьютера, \\ \\ Microsoft \\ OLE
-   HKEY \_ \_ \\ программное обеспечение локального компьютера \\ Microsoft \\ RPC
-   \_Классы пользовательских \\ \* \\ программ \\ hKey
-   \_Классы пользователей \\ \* \_ hKey

Фактически это обеспечивает то же поведение отражения, так как изменения этих ключей немедленно доступны как для 32-разрядных, так и для 64-разрядных приложений.

Ключи, которые были отражены условно, остаются разбитыми:

-   \_ \_ \\ Классы программного обеспечения для локального компьютера hKey \\ \\ CLSID
-   \_ \_ \\ Интерфейс классов программного \\ обеспечения \\ для локального компьютера hKey
-   \_Классы для пользователей \\ \* \\ программного обеспечения hKey \\ \\ CLSID
-   \_ \\ \* \\ Интерфейс классов пользователей программного обеспечения \\ \\ hKey
-   \_Классы пользователей hKey \\ \* \_ \\ CLSID
-   \_ \\ \* \_ Интерфейс классов пользователей \\ hKey

Они используются для сохранения данных, которые не должны совместно использоваться для 32-разрядных и 64-разрядных приложений.

## <a name="manifestation"></a>Проявление

CLSID и ключи интерфейса из приведенного выше списка больше не отражаются, пока они еще перенаправляются. Хотя это желаемое поведение в большинстве случаев, приложения могут зависеть от их отраженного поведения в Vista.

Функции, позволяющие приложениям управлять отражением (Регдисаблерефлектионкэй и Реженаблерефлектионкэй), — это не Ops в Windows 7.

## <a name="mitigation-of-impact"></a>Снижение влияния

COM является основным потребителем отражения в реестре. COM и другие потребители были обновлены в соответствии с этим изменением. Это изменение не влияет на приложения, использующие стандартные API-интерфейсы COM.

## <a name="solution"></a>Решение

Примените один из следующих вариантов, если вы полагаетесь на отражение реестра для синхронизации 32-разрядных и 64-разрядных представлений:

-   Явное создание ключей в обоих представлениях во время установки
-   Перемещение ключей из области отраженных ключей
-   Проверьте оба представления реестра при запросе отраженного ключа.

    **Примечание.** КЛЮЧ \_ WOW64 \_ 32KEY и ключ \_ WOW64 \_ 64KEY не могут быть объединены

Примените один из следующих вариантов, если вы используете функции Регдисаблерефлектионкэй для отключения отражения реестра:

-   Явное создание ключей в обоих представлениях во время установки
-   Перемещение ключей из области отраженных ключей
-   Использование подразделов, зависящих от платформы (например, x86, AMD64 и ia64), для разделения данных, зависящих от разрядности

## <a name="links-to-other-resources"></a>Ссылки на другие ресурсы

-   [Статья о отражении реестра](../winprog64/registry-reflection.md)
-   [Список перенаправленных ключей в статье о перенаправлении реестра](../winprog64/registry-redirector.md)
-   [Рекомендации по использованию WOW64](/windows-hardware/drivers/display/microsoft-windows-vista-display-driver-64-bit-issues)

> [!Note]  
> Эти ресурсы могут быть недоступны в некоторых языках и странах или регионах.

 

 

 
