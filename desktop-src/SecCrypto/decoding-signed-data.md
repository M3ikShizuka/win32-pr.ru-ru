---
description: Процесс декодирования подписанных данных.
ms.assetid: 803220d0-7963-4fc4-8451-a979e54a9cc3
title: Декодирование подписанных данных
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fdfd327746c5d0ba8e7089e1c273817b76c16370
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662311"
---
# <a name="decoding-signed-data"></a>Декодирование подписанных данных

Следующий общий процесс декодирует тип [*данных со знаком*](../secgloss/s-gly.md) .

**Декодирование подписанного сообщения**

1.  Получение указателя на закодированный BLOB-объект.
2.  Вызовите [**криптмсгопентодекоде**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptmsgopentodecode), передав необходимые аргументы.
3.  Вызовите [**криптмсгупдате**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptmsgupdate) один раз, передав маркер, полученный на шаге 2, и указатель на данные, которые необходимо декодировать. Это приводит к тому, что в зависимости от типа сообщений в сообщении будут выполняться соответствующие действия.
4.  Вызовите [**криптмсгжетпарам**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptmsggetparam), передав маркер, полученный на шаге 2, и соответствующие типы параметров для доступа к декодированным данным. Например, передайте значение \_ параметра КМСГ Content \_ param, чтобы получить указатель на декодированное содержимое.

В следующем общем процессе проверяется подпись подписанного сообщения.

**Проверка подписи раскодированного подписанного сообщения**

1.  Вызовите [**криптмсгжетпарам**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptmsggetparam), передав в обработчик сообщений и \_ \_ Параметр info КМСГ сведения о сертификате подписывания, \_ \_ чтобы получить [**\_ сведения о сертификате**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) подписывания из сообщения.
2.  Вызовите [**цертопенсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore) , чтобы открыть временное хранилище, которое инициализируется сертификатами из сообщения.
3.  Вызовите [**цертжетсубжектцертификатефромсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certgetsubjectcertificatefromstore) , чтобы получить [**\_ сведения о сертификате**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) подписавших из сертификатов, входящих в сообщение.
4.  Вызовите [**криптмсгконтрол**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptmsgcontrol), передав КМСГ \_ CTRL \_ , \_ чтобы проверить сигнатуры.
5.  Вызовите [**криптмсгклосе**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptmsgclose) , чтобы закрыть сообщение.

Результатом этих процедур является проверка подписи и получение указателя на декодированное содержимое сообщения, полученное на шаге 4 процедуры декодирования подписанного сообщения.

Сведения о кодировании C см. в разделе [Пример программы c: подписывание, кодирование, декодирование и проверка сообщения](example-c-program-signing-encoding-decoding-and-verifying-a-message.md).

 

 
