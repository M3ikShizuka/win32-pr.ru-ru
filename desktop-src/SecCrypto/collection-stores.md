---
description: По мере роста числа сертификатов, списков отзыва сертификатов (CRL) и списка доверия сертификатов (CTL) в коллекции пользователей Организация этих сертификатов становится проблемой.
ms.assetid: 13e7e077-e8be-4ba4-99e1-08421fd2452e
title: Хранилища коллекций
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 66d783aafe6d0ff22cd990195f6bce5ce433f2f01595bed2cf20c5c41ea3a24e
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119876922"
---
# <a name="collection-stores"></a>Хранилища коллекций

По мере роста числа [*сертификатов*](../secgloss/c-gly.md), [*списков отзыва сертификатов*](../secgloss/c-gly.md) (CRL) и [*списка доверия сертификатов*](../secgloss/c-gly.md) (CTL) в коллекции пользователей Организация этих сертификатов становится проблемой. Одним из возможных решений является создание отдельных хранилищ сертификатов для хранения разных типов сертификатов. Это решение создает новую проблему, так как приложению может потребоваться выполнить поиск по нескольким разным магазинам, чтобы найти конкретный сертификат. Эта проблема решается с помощью логических хранилищ или хранилища коллекций.

[*Логическое хранилище*](../secgloss/l-gly.md) и хранилище сертификатов коллекции — это группы физических хранилищ, которые отображаются в приложении как единое хранилище. Для всех хранилищ элементов в логическом хранилище или хранилища коллекции можно выполнить поиск или перечислить с помощью одного вызова функции либо [**цертфиндцертификатеинсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certfindcertificateinstore) , либо [**цертенумцертификатесинсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumcertificatesinstore).

Использование логических хранилищ и хранилища коллекций также обеспечивает гибкость, которую трудно достичь с помощью бумажных записей. Сертификат в одном физическом хранилище может быть членом нескольких разных логических групп. Таким образом, отдельное физическое хранилище может быть членом нескольких логических хранилищ или хранилищем коллекций, как показано на следующем рисунке.

![хранилища коллекций](images/mancert.png)

На этом рисунке представлены следующие основные понятия хранилища логических сертификатов:

-   Хранилище сертификатов коллекции имеет указатель на первый блок указателя для этого хранилища коллекции.
-   Каждый блок указателя в хранилище коллекции имеет указатель на родственное хранилище и указатель на следующий блок указателя коллекции.
-   Каждое хранилище одного уровня в коллекции является простым физическим хранилищем сертификатов.
-   Простое хранилище сертификатов может быть одноэлементным хранилищем элементов во многих разных хранилищах коллекций.
-   Сертификаты, добавленные в хранилище коллекции, физически добавляются в одно из одноуровневого хранилища в коллекции.
-   Сертификаты в хранилище одного уровня могут быть доступны любому хранилищу, в котором входит одноуровневый магазин.

Хранилища коллекций создаются в приложении путем открытия хранилища коллекции с помощью [**цертопенсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore) и последующего использования [**цертаддсторетоколлектион**](/windows/desktop/api/Wincrypt/nf-wincrypt-certaddstoretocollection) для добавления в хранилище коллекции открытого одноуровневого хранилища. Хранилище с общим родителем можно удалить из хранилища коллекции, вызвав [**цертремовесторефромколлектион**](/windows/desktop/api/Wincrypt/nf-wincrypt-certremovestorefromcollection).

 

 
