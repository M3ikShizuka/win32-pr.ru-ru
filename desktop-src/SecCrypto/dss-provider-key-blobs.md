---
description: Используется с поставщиком услуг стандарта цифровой подписи (DSS) для экспорта ключей из и импорта ключей в поставщик служб шифрования (CSP).
ms.assetid: a0a266ef-0830-4a3f-9bf6-6b64c95c3d03
title: BLOB-объекты ключа поставщика DSS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f27a73e35cccd6fad672f4c94d589d754f970c0d
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127469938"
---
# <a name="dss-provider-key-blobs"></a>BLOB-объекты ключа поставщика DSS

[*BLOB-объекты*](../secgloss/b-gly.md) используются с поставщиком услуг [*стандарта цифровой подписи*](../secgloss/d-gly.md) (DSS) для экспорта ключей из и импорта ключей в [*поставщик служб шифрования*](../secgloss/c-gly.md) (CSP).

-   [BLOB-объекты открытого ключа](#public-key-blobs)
-   [BLOB-объекты закрытых ключей](#private-key-blobs)

## <a name="public-key-blobs"></a>BLOB-объекты открытого ключа

[*Открытый ключ*](../secgloss/p-gly.md) DSS экспортируется и импортируется как большой двоичный объект, последовательность байтов, структурированная следующим образом.

``` syntax
PUBLICKEYSTRUC    publickeystruc;
DSSPUBKEY         dsspubkey;
BYTE              p[dsspubkey.bitlen/8];
BYTE              q[20];
BYTE              g[dsspubkey.bitlen/8];
BYTE              y[dsspubkey.bitlen/8];
DSSSEED           seedstruct;
```

Эти компоненты описаны в следующей таблице. Все значения представлены в формате с [*прямым порядком байтов*](../secgloss/l-gly.md) .



| Поле          | Описание                                                                                                                                                                                                          |
|----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| дсспубкэй      | Структура [**дсспубкэй**](/previous-versions/windows/desktop/legacy/aa381982(v=vs.85)) . Элемент **Magic** должен иметь значение 0x31535344. Это шестнадцатеричное число — кодировка [*ASCII*](../secgloss/a-gly.md) DSS1. |
| н              | Последовательность **байтов** . Генератор, g. Длина должна быть такой же, как и у p. Если длина не совпадает с длиной p, то она должна быть дополнена 0x00 байтами.                                                                      |
| p              | Последовательность **байтов** . Основной модуль, p. Для наиболее значимого бита наиболее значимого байта должно быть задано значение 1.                                                                                                 |
| публиккэйструк | Структура [**публиккэйструк**](/windows/desktop/api/Wincrypt/ns-wincrypt-publickeystruc) .                                                                                                                                                                |
| q              | Последовательность **байтов** . Простой, q, 20 байт. Для наиболее значимого бита наиболее значимого байта должно быть задано значение 1.                                                                                     |
| сидструкт     | Структура [**дсссид**](/windows/desktop/api/Wincrypt/ns-wincrypt-dssseed) . Начальные значения и счетчики для проверки простых значений.                                                                                                                                |
| да              | Последовательность **байтов** . Открытый ключ, y. Длина должна быть такой же, как и у p. Если длина не совпадает с длиной p, то она должна быть дополнена 0x00 байтами.                                                                         |



 

> [!Note]  
> [*Большие двоичные объекты с открытым ключом*](../secgloss/p-gly.md) не шифруются. Они содержат открытые ключи в виде открытого [*текста*](../secgloss/p-gly.md) .

 

## <a name="private-key-blobs"></a>BLOB-объекты закрытых ключей

[*Закрытый ключ*](../secgloss/p-gly.md) DSS экспортируется и импортируется в виде последовательности байтов, структурированной следующим образом.

``` syntax
PUBLICKEYSTRUC    publickeystruc;
DSSPUBKEY         dsspubkey;
BYTE              p[dsspubkey.bitlen/8];
BYTE              q[20];
BYTE              g[dsspubkey.bitlen/8];
BYTE              x[20];
DSSSEED           seedstruct;
```

В следующей таблице описаны все компоненты. Все значения представлены в формате с [*прямым порядком байтов*](../secgloss/l-gly.md) .



| Поле          | Описание                                                                                                                                                                                                    |
|----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| дсспубкэй      | Структура [**дсспубкэй**](/previous-versions/windows/desktop/legacy/aa381982(v=vs.85)) . **Фокусный** элемент должен иметь значение 0x32535344. Это шестнадцатеричное число — кодировка [*ASCII*](../secgloss/a-gly.md) DSS2. |
| н              | Последовательность **байтов** . Генератор, g. Длина должна быть такой же, как и у p. Если длина не совпадает с длиной p, то она должна быть дополнена 0x00 байтами.                                                                |
| публиккэйструк | Структура [**публиккэйструк**](/windows/desktop/api/Wincrypt/ns-wincrypt-publickeystruc) .                                                                                                                                                          |
| p              | Последовательность **байтов** . Основной модуль, p. Для наиболее значимого бита наиболее значимого байта должно быть задано значение 1.                                                                                           |
| q              | Последовательность **байтов** . Простое, q. q имеет длину 20 байт. Для наиболее значимого бита наиболее значимого байта должно быть задано значение 1.                                                                          |
| сидструкт     | Структура [**дсссид**](/windows/desktop/api/Wincrypt/ns-wincrypt-dssseed) . Начальные значения и счетчики для проверки простых значений.                                                                                                                          |
| x              | Последовательность **байтов** . Экспонента секрета, x. Всегда должно иметь длину 20 байт. Если длина x меньше 20 байт, то она должна быть дополнена 0x00.                                                     |



 

При вызове [**криптекспорткэй**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptexportkey)разработчик может выбрать, следует ли шифровать ключ. **Приватекэйблоб** шифруется, если параметр *хекспкэй* содержит допустимый маркер для ключа сеанса. Все, кроме [**публиккэйструк**](/windows/desktop/api/Wincrypt/ns-wincrypt-publickeystruc) части большого двоичного объекта, шифруется.

> [!Note]  
> Параметры алгоритма шифрования и ключа шифрования не сохраняются вместе с BLOB-объектом закрытого ключа. Приложение должно управлять и хранить эти сведения. Если для *хекспкэй* передается ноль, закрытый ключ будет экспортирован без шифрования.

 

> [!Caution]  
> Экспортировать закрытые ключи без шифрования небезопасно, так как они уязвимы для перехвата и использования неавторизованными сущностями.

 

 

 
