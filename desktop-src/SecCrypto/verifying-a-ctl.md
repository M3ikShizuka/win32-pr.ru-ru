---
description: Чтобы Интерлопер заменять фиктивный список доверия сертификатов (CTL) для существующего, проверьте подпись в списке доверия сертификатов при каждом использовании списка доверия сертификатов.
ms.assetid: 24ba6955-f6d1-4123-ab39-50385f6e03a0
title: Проверка списка доверия сертификатов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ac88362c96d5b419a7c16731e31456b569079d7c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104543511"
---
# <a name="verifying-a-ctl"></a>Проверка списка доверия сертификатов

Чтобы Интерлопер заменять фиктивный [*список доверия сертификатов*](../secgloss/c-gly.md) (CTL) для существующего, проверьте подпись в списке доверия сертификатов при каждом использовании списка доверия сертификатов. Не используйте CTL, который не содержит доверенную подпись.

**Проверка подписи CTL**

1.  Откройте [*хранилище сертификатов*](../secgloss/c-gly.md) , содержащее нужный список доверия сертификатов.
2.  Получение маркера для [**\_ контекста CTL**](/windows/desktop/api/Wincrypt/ns-wincrypt-ctl_context) для CTL. Это можно сделать, вызвав любую функцию, которая возвращает маркер в **\_ контекст CTL**, например [**цертфиндктлинсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certfindctlinstore).
3.  Вызовите [**криптмсгжетандверифисигнер**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptmsggetandverifysigner), передав [**\_ контекст CTL**](/windows/desktop/api/Wincrypt/ns-wincrypt-ctl_context) , полученный на шаге 2, в параметре *хкриптмсг* , маркер хранилища сертификатов, который содержит сертификат доверенного источника для CTL в параметре *ргхсигнерсторе* , и флаг КМСГ \_ Trusted Sign (доверенный) \_ \_ в параметре *dwFlags* . Если функция возвращает **значение true**, подпись была проверена, а в параметре *ппсигнер* возвращается указатель на [**\_ контекст пкцерт**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_context) для подписанного доверия.

 

 
