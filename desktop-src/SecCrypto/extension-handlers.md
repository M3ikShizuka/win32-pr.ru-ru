---
description: Начиная с формата сертификата X. 509 версии 3, сертификат может содержать расширения сертификата.
ms.assetid: fb106cab-8a61-4a83-8fb4-7c045d905575
title: Обработчики расширений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cba61c5896887471038325eba0dbed75f43061cff81452727933a3013c37f8aa
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119006932"
---
# <a name="extension-handlers"></a>Обработчики расширений

Начиная с формата сертификата [*X. 509*](../secgloss/x-gly.md) версии 3, сертификат может содержать расширения сертификата. (Содержимое сертификата X. 509 см. в разделе [Свойства сертификата](certificate-properties.md).) Эти расширения указывают дополнительные сведения. Например, расширение может указывать дополнительные сведения об идентификации субъекта или сведения об использовании ключа, которые указывают задачи (такие как подпись или шифрование), для которых может использоваться ключ. Набор стандартных расширений определяется для использования приложением, а расширения также могут быть настроены.

Каждое расширение имеет связанную строку идентификатора объекта, которая определяет тип дополнительной информации и структуру данных, содержащую эти сведения. Например, идентификатором объекта использования ключа является "2.5.29.15", который указывает сведения об использовании ключа. Связанная с ним структура данных — это [**\_ Многоразрядный \_ большой двоичный объект**](/windows/desktop/api/Wincrypt/ns-wincrypt-crypt_bit_blob) (битовое значение), указывающий, как можно использовать ключ.

Расширение можно добавить в сертификат перед его выдаче. При выдаче сертификата все включенные расширения являются частью сертификата. Если расширение помечено как критическое, его использование должно быть известно с помощью приложения, а приложение должно соответствовать намерению или значению расширения. Службы сертификации позволяют задавать расширения для невыданного сертификата с помощью методов, предоставляемых [**ицертадмин**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) и [**ицертсерверполици**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy). Дополнительные сведения о расширениях сертификатов см. в разделе [**\_ расширение сертификата**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) в документации CryptoAPI. Дополнительные сведения о структурах данных общих расширений сертификатов см. в разделе [структуры расширений сертификатов X. 509](cryptography-structures.md).

Обработчик расширения — это COM-объект, который предоставляет подпрограммы для кодирования более сложных, но часто используемых расширений и типов данных, таких как IA5String или Принтаблестринг.

Расширения, имеющие типы данных **Date**, **Long** и **BSTR** , не нуждаются в обработчике расширений. Модуль политики просто вызывает [**ицертсерверполици:: сетцертификатикстенсион**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) с параметром *типа* , который имеет значение, представляющее тип данных расширения: проптипе \_ Date, проптипе \_ long или проптипе \_ String. Затем расширение передается в ядро сервера. Ядро сервера, в свою очередь, выполняет [*синтаксическую нотацию синтаксиса One*](../secgloss/a-gly.md) (ASN. 1) перед сохранением расширения в сертификате.

Однако расширения, имеющие типы данных, отличные от этих типов по умолчанию, должны иметь тип ASN. 1, закодированный обработчиком расширений, прежде чем модуль политики передаст их в ядро сервера. Когда модуль политики вызывает [**ицертсерверполици:: сетцертификатикстенсион**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) для передачи расширения ASN. 1, закодированного в ядро сервера, он должен задать для параметра *типа* значение проптипе \_ binary. Затем ядро сервера просто сохраняет это закодированное расширение в сертификате.

Обработчик расширения по умолчанию, Certenc.dll, экспортирует ряд интерфейсов **ицертенкодекскскс** и может вызываться модулем политики. Необходимые сведения о типе также содержатся в Certencl.dll, который предоставляется в пакете SDK для платформы. Каждый интерфейс предоставляет метод **кодирования** , который возвращает расширение сертификата ASN. 1 с кодировкой для модуля политики в двоичном формате. Затем модуль политики может задать расширение в сертификате, вызвав метод [**ицертсерверполици:: сетцертификатикстенсион**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) .

Дополнительные сведения см. в разделе [написание пользовательских обработчиков расширений](writing-custom-extension-handlers.md).

 

 
