---
description: Diffie-Hellman BLOB-объектов открытого ключа версии 3 (тип ПУБЛИККЭЙБЛОБ) используется для экспорта и импорта сведений о открытом ключе Диффи-Хелмана.
ms.assetid: ba29a71a-7509-49c7-93d2-f0a699532706
title: Двоичные объекты открытого ключа Diffie-Hellman версии 3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df7228e4b4a786dc0eb25d1ba199b5c20923dd8e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105663093"
---
# <a name="diffie-hellman-version-3-public-key-blobs"></a>Двоичные объекты открытого ключа Diffie-Hellman версии 3

Diffie-Hellman BLOB- [*объектов открытого ключа*](../secgloss/p-gly.md) версии 3 (тип публиккэйблоб) используется для экспорта и импорта сведений о открытом ключе Диффи-Хелмана. Они имеют следующий формат:


```C++
BLOBHEADER blobheader; 
                 // As explained under "Data Structures"
DHPUBKEY_VER3 dhpubkeyver3;
BYTE p[dhpubkeyver3.bitlenP/8]; 
                 // Where P is the prime modulus
BYTE q[dhpubkeyver3.bitlenQ/8]; 
                 // Where Q is a large factor of P-1
BYTE g[dhpubkeyver3.bitlenP/8]; 
                 // Where G is the generator parameter
BYTE j[dhpubkeyver3.bitlenJ/8]; 
                 // Where J is (P-1)/Q
BYTE y[dhpubkeyver3.bitlenP/8]; 
                 // Where Y is (G^X) mod P
```



Этот формат большого двоичного объекта экспортируется, когда \_ флаг шифрования BLOB \_ -объекта VER3 используется с [**криптекспорткэй**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptexportkey). Так как версия находится в большом двоичном объекте, нет необходимости указывать флаг при использовании этого [*большого двоичного объекта*](../secgloss/b-gly.md) с [**криптимпорткэй**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptimportkey).

Кроме того, этот формат больших двоичных объектов используется с функцией [**криптсеткэйпарам**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptsetkeyparam) , если параметр *двпарам* значение параметра \_ Pub \_ используется для задания параметров ключа в ключе Диффи-Хелмана. Это делается, если \_ для создания ключа использовался флаг шифрования прежен. При использовании в этой ситуации значение y игнорируется и поэтому не должно включаться в большой двоичный объект.

В следующей таблице описаны все компоненты большого двоичного объекта ключа.



| Поле        | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|--------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| блобхеадер   | Структура [**блобхеадер**](/windows/desktop/api/Wincrypt/ns-wincrypt-publickeystruc) . Элемент **бтипе** должен иметь значение публиккэйблоб.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| dhpubkeyver3 | Структура [**\_ VER3 дхпубкэй**](/windows/win32/api/wincrypt/ns-wincrypt-dhpubkey_ver3) . Для открытых ключей необходимо задать для элемента **Magic** значение 0x33484400. Обратите внимание, что шестнадцатеричное значение — это просто кодировка [*ASCII*](../secgloss/a-gly.md) "DH3".                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| С            | Значение P расположено непосредственно после структуры [**дхпубкэй \_ VER3**](/windows/win32/api/wincrypt/ns-wincrypt-dhpubkey_ver3) и всегда должно быть длиной (в байтах) поля **дхпубкэй \_ VER3** **битленп** (разрядная длина P), разделенной на 8 (формат с [*прямым порядком байтов*](../secgloss/l-gly.md) ).                                                                                                                                                                                                                                                                                                                                                                                           |
| Q            | Значение Q находится непосредственно после значения P и всегда должно быть длиной в байтах поля [**дхпубкэй \_ VER3**](/windows/win32/api/wincrypt/ns-wincrypt-dhpubkey_ver3) **битленк** , деленного на 8 (формат с [*прямым порядком байтов*](../secgloss/l-gly.md) ). Если значение Битленк равно 0, то это значение отсутствует в большом двоичном объекте.                                                                                                                                                                                                                                                                                                                                                                 |
| G            | Значение G расположено непосредственно после значения Q и всегда должно быть длиной (в байтах) поля [**дхпубкэй \_ VER3**](/windows/win32/api/wincrypt/ns-wincrypt-dhpubkey_ver3) **битленп** (разрядная длина P), деленная на восемь. Если длина данных равна одному или нескольким байтам, меньшим, чем P, деленному на 8, то данные должны быть дополнены требуемыми байтами (нулевыми значениями), чтобы данные были требуемой длины (формат с [*прямым порядком байтов*](../secgloss/l-gly.md) ).                                                                                                                                                                                                                              |
| J            | Значение J находится непосредственно после значения G и всегда должно быть длиной в байтах поля [**дхпубкэй \_ VER3**](/windows/win32/api/wincrypt/ns-wincrypt-dhpubkey_ver3) **битленж** , деленного на 8 (формат с [*прямым порядком байтов*](../secgloss/l-gly.md) ). Если значение Битленк равно 0, то это значение отсутствует в большом двоичном объекте.                                                                                                                                                                                                                                                                                                                                                                 |
| Да            | Значение Y (G ^ X) mod P находится непосредственно после значения J и всегда должно быть длиной в байтах поля [**дхпубкэй \_ VER3**](/windows/win32/api/wincrypt/ns-wincrypt-dhpubkey_ver3) **Битленп** (бит длиной P), разделенного на восемь. Если длина данных, полученная в результате вычисления (G ^ X) mod P, равна одному или более байтам, меньшим, чем P, то данные должны быть дополнены требуемыми байтами (нулевыми значениями), чтобы данные были требуемой длины (формат с [*прямым порядком байтов*](../secgloss/l-gly.md) ). Если эта структура используется с [**криптсеткэйпарам**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptsetkeyparam) с параметрами *двпарам* значения параметра \_ Pub \_ , это значение не включается в большой двоичный объект. |



 

> [!Note]  
> Большие двоичные объекты с открытым ключом не шифруются, но содержат открытые ключи в виде обычного текста.

 

 

 
