---
description: Содержит указатели на функции обратного вызова, которые могут использоваться функциями поставщика служб шифрования (CSP).
ms.assetid: 84a379e9-c6b9-4c1d-bbbb-9bed4a045d90
title: Структура Втаблепровструк (Кспдк. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- VTableProvStruc
- VTableProvStrucW
api_type:
- HeaderDef
api_location:
- Cspdk.h
ms.openlocfilehash: 99b9344c6951dc93972315d9b4f60752f1484d68
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103817633"
---
# <a name="vtableprovstruc-structure"></a>Структура Втаблепровструк

Структура **втаблепровструк** содержит указатели на функции обратного вызова, которые могут использоваться функциями [*поставщика служб шифрования*](../secgloss/c-gly.md) (CSP).

## <a name="syntax"></a>Синтаксис


```C++
typedef struct VTableProvStruc {
  DWORD   Version;
  FARPROC FuncVerifyImage;
  FARPROC FuncReturnhWnd;
  DWORD   dwProvType;
  BYTE    *pbContextInfo;
  DWORD   cbContextInfo;
  LPSTR   pszProvName;
} VTableProvStruc, *PVTableProvStruc;
```



## <a name="members"></a>Члены

<dl> <dt>

**Version**
</dt> <dd>

Значение **типа DWORD** , указывающее версию структуры. Используются три версии этой структуры. Версии имеют номер 1, 2 и 3, а также определяют, какие члены структуры являются допустимыми. Члены версии 1 действительны во всех системах, поддерживающих эту структуру.

Это член версии 1.

</dd> <dt>

**функверифимаже**
</dt> <dd>

Адрес функции обратного вызова [**функверифимаже**](funcverifyimage.md) , которую CSP использует для проверки подписи любых библиотек DLL, которые будет загружать CSP. Все вспомогательные библиотеки DLL, в которые CSP вызывает вызовы функций, должны быть подписаны аналогичным образом (и с тем же ключом), что и первичная библиотека CSP. Чтобы обеспечить эту сигнатуру, вспомогательные библиотеки DLL должны динамически загружаться с помощью функции [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) . Но перед загрузкой библиотеки DLL необходимо проверить подпись библиотеки DLL. CSP выполняет эту проверку, вызывая функцию **функверифимаже** , как показано в примере ниже.

Этот указатель функции можно хранить и использовать до тех пор, пока не будет освобожден контекст CSP.

Это член версии 1.

</dd> <dt>

**функретурнхвнд**
</dt> <dd>

Адрес функции обратного вызова [**функретурнхвнд**](funcreturnhwnd.md) , возвращающей маркер окна, который CSP должен использовать в качестве родителя или владельца любого отображаемого пользовательского интерфейса. Поставщики CSP, которые не обмениваются данными напрямую с пользователем и CSP, использующие выделенное оборудование для этой цели, могут игнорировать эту запись. По умолчанию дескриптор окна равен нулю, но приложение может задать другое значение с помощью функции [**криптсетпровпарам**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptsetprovparam) , чтобы задать свойство **\_ \_ HWND клиента PP** .

Этот указатель функции можно хранить и использовать до тех пор, пока не будет освобожден контекст CSP.

Это член версии 1.

</dd> <dt>

**двпровтипе**
</dt> <dd>

Значение типа **DWORD** , указывающее тип получаемого поставщика. Следующие [*типы поставщиков*](../secgloss/p-gly.md) являются стандартными и подробно рассматриваются в разделе [взаимодействие с CSP](https://www.bing.com/search?q=CSP+Interoperability):

-   PROV \_ RSA \_ Full
-   PROV \_ RSA \_ SIG
-   PROV \_ DSS
-   PROV \_ Fortezza
-   PROV \_ MS \_ Exchange

Это член версии 2.

</dd> <dt>

**пбконтекстинфо**
</dt> <dd>

Указатель на массив сведений о контексте. Члены **пбконтекстинфо** и **кбконтекстинфо** вместе определяют набор данных, используемый при вызове функции [**кпсетпровпарам**](https://www.bing.com/search?q=**CPSetProvParam**) с \_ \_ набором сведений контекста PP.

Это член версии 2.

</dd> <dt>

**кбконтекстинфо**
</dt> <dd>

Значение **типа DWORD** , указывающее количество элементов в массиве **пбконтекстинфо** .

Это член версии 2.

</dd> <dt>

**псзпровнаме**
</dt> <dd>

Строка, содержащая имя поставщика.

Это член версии 3.

</dd> </dl>

## <a name="remarks"></a>Комментарии

Указатели в структуре **втаблепровструк** доступны только в функции [**кпаккуиреконтекст**](https://www.bing.com/search?q=**CPAcquireContext**) . Если элементы структуры необходимы после завершения вызова **кпаккуиреконтекст** , то CSP должны сделать копии необходимых элементов структуры. Указатели функций в этой структуре можно хранить и использовать до тех пор, пока не будет освобожден контекст CSP.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Только для \[ классических приложений Windows XP\]<br/>                                        |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2003\]<br/>                               |
| Header<br/>                   | <dl> <dt>Кспдк. h</dt> </dl> |
| Имя в кодировке Юникод и ANSI<br/>   | **Втаблепровструкв** (Юникод)<br/>                                          |



 

 
