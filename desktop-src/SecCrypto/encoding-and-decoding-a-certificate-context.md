---
description: Кодирование и декодирование контекста сертификата с помощью CryptoAPI.
ms.assetid: 149d1097-5f50-40ba-84f1-b815f54ba33d
title: Кодирование и декодирование контекста сертификата
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b4168d15ad8db5d4711a18f2042106e7d6d46010
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263425"
---
# <a name="encoding-and-decoding-a-certificate-context"></a>Кодирование и декодирование контекста сертификата

[*CryptoAPI*](../secgloss/c-gly.md) поддерживает кодирование и декодирование [*сертификатов*](../secgloss/c-gly.md). Интерфейс CryptoAPI включает в себя обширную, гибкую систему функций и структур C, которые позволяют выполнять кодирование и декодирование различными способами. CryptoAPI поддерживает стандартную структуру сертификатов [*X. 509*](../secgloss/x-gly.md) и стандартную [*синтаксическую нотацию синтаксиса*](../secgloss/a-gly.md) (ASN. 1) для обеспечения взаимодействия с другими системами.

Общие сведения о кодированных данных см. в разделе [закодированные и декодированные данные](encoded-and-decoded-data.md).

## <a name="certificate-contexts"></a>Контексты сертификатов

[*Контекст сертификата*](../secgloss/c-gly.md), [**\_ контекст CERT**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_context), представляет собой структуру C, которая содержит закодированный элемент, маркер [*хранилища сертификатов*](../secgloss/c-gly.md), указатель на исходный [*BLOB-объект*](../secgloss/c-gly.md)закодированного сертификата и указатель на структуру сертификата C. [**\_**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info)

Структура [**\_ сведений о**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) сертификате — это сердце сертификата. В нем содержатся все основные сведения о сертификате, в прямой форме и в кодированной форме. На следующем рисунке показана **Структура \_ сведений о сертификате** со всеми закодированными членами, отображаемыми как затененные.

![\-Структура сведений о сертификате](images/certinf2.png)

Члены **иссуеруникуеид** и **субжектуникуеид** являются частью реализации сертификата [*X. 509*](../secgloss/x-gly.md) версии 2, но редко используются. Расширения сертификатов в версии 3 заменяют функциональные возможности этих членов.

Если требуются сведения, содержащиеся в закодированных (затененных) элементах **Issuer** и **subject** , эти члены необходимо декодировать. Для декодирования этих элементов используйте [**криптдекодеобжект**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecodeobject) . На следующем рисунке показан процесс декодирования одного из этих элементов.

![Декодирование с помощью криптдекодеобжект](images/infoflow.png)

В проиллюстрированном примере функция [**криптдекодеобжект**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecodeobject) создает [**\_ \_ информационную**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) структуру сертификата, массив структур [**\_ RDN**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) , соответствующий массиву структур [**\_ \_ attr**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) , а также строку, содержащую имя. Элементы структуры **\_ \_ attr RDN сертификата** определяют содержимое строки. Например, если элемент **псзобжид** имеет значение 2.5.4.3, строка содержит общее имя. Если это 2.5.4.10, строка будет содержать название организации. Список [*идентификаторов объектов*](../secgloss/o-gly.md) (OID) см. в разделе **CERT \_ RDN \_ attr**.

Элемент **дввалуетипе** содержит сведения о типе строки. Если он является \_ \_ печатаемой \_ строкой с RDN CERT, то элемент value содержит строку символов, заканчивающуюся нулем. Если строка имеет значение \_ RDN в \_ Юникоде \_ , строка представляет собой строку символов двойной ширины (размер слова).

Подробный процесс кодирования и декодирования сертификатов см. в разделе [кодирование \_ структуры сведений о сертификате](encoding-a-cert-info-structure.md) и [декодирование \_ структуры сведений о сертификате](decoding-a-cert-info-structure.md).

 

 
