---
description: Функции CryptoAPI используют поставщики служб шифрования (CSP) для шифрования и расшифровки, а для хранения ключей и обеспечения безопасности.
ms.assetid: 7977e59b-7ce1-4bb4-aae4-d67b7d646493
title: CSP и процесс шифрования
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f5404fc3641a9a2c753158f5acb84850f3f0f29
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104072684"
---
# <a name="csps-and-the-cryptography-process"></a>CSP и процесс шифрования

Функции [*CryptoAPI*](../secgloss/c-gly.md) используют [*поставщики служб шифрования*](../secgloss/c-gly.md) (CSP) для шифрования и расшифровки, а для хранения ключей и обеспечения безопасности. Эти CSP являются независимыми модулями. В идеале CSP записываются как независимые от конкретного приложения, чтобы любое приложение выполнялось с различными CSP. Однако на практике некоторые приложения имеют особые требования, требующие настроенного CSP. Это сравнение с моделью Windows [*GDI*](../secgloss/g-gly.md) . CSP аналогичны драйверам графических устройств.

Качество защиты для ключей в системе является параметром модели CSP, а не системой в целом. Это позволяет приложению работать в различных контекстах безопасности без изменения.

Приложения Access, предназначенные для внутренних криптографических функций, тщательно ограничиваются. Это упрощает разработку защищенных и переносимых приложений.

Применяются следующие три правила проектирования:

-   Приложения не могут напрямую обращаться к материалам ключа. Поскольку все материалы по ключам создаются в CSP и используются приложением с помощью непрозрачных дескрипторов, приложение или связанные с ним DLL-библиотеки не имеют никакого риска, что он либо рассматривает материал ключа, либо выбирает материал для создания ключей из плохих случайных источников.
-   Приложения не могут указывать сведения о криптографических операциях. Интерфейс CSP позволяет приложению выбрать алгоритм шифрования или подписи, но реализация каждой криптографической операции выполняется CSP.
-   Приложения не обрабатывали [*учетные данные*](../secgloss/c-gly.md) пользователя или другие данные проверки подлинности пользователя. Проверка подлинности пользователя выполняется CSP; Таким образом, будущие CSP с расширенными возможностями проверки подлинности, такие как биометрические входы, будут работать без необходимости изменения модели проверки подлинности приложения.

Как минимум CSP состоит из библиотеки динамической компоновки (DLL) и [*файла сигнатур*](../secgloss/s-gly.md). Файл сигнатуры необходим для того, чтобы интерфейс [*CryptoAPI*](../secgloss/c-gly.md) распознавал CSP. CryptoAPI периодически проверяет эту подпись, чтобы убедиться в том, что обнаружены все изменения, внесенные в CSP.

Некоторые поставщики служб шифрования могут реализовать часть их функций в службе с разделением адресов через локальную RPC или оборудование, вызванное с помощью драйвера системного устройства. Изоляция глобальных криптографических операций и централизованного шифрования в службе с разделением адреса или оборудованием обеспечивает защиту ключей и операций от несанкционированного изменения в пространстве данных приложения.

Не рекомендуется использовать для приложений атрибуты, относящиеся к конкретному CSP. Например, базовый поставщик служб шифрования Майкрософт (предоставляемый CryptoAPI) поддерживает 40-разрядные ключи сеанса и 512-разрядные открытые ключи. Приложения, работающие с этими ключами, должны избегать предположений относительно объема памяти, необходимого для хранения этих ключей, так как приложение, скорее всего, завершится ошибкой, если используется другой CSP. Хорошо написанные приложения должны работать с различными CSP.

Дополнительные сведения о типах поставщиков служб шифрования и стандартных CSP, которые можно использовать с CryptoAPI, см. в разделе [типы поставщиков](cryptographic-provider-types.md) служб шифрования и [поставщики служб шифрования Майкрософт](microsoft-cryptographic-service-providers.md).

 

 
