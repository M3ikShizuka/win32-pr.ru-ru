---
description: Системные хранилища по умолчанию, включая мои, CA и ROOT, реализуются в виде логических хранилищ коллекций с несколькими предопределенными физическими хранилищами в качестве их хранилищ элементов.
ms.assetid: 1d82b94b-4842-454a-aca4-823cd264ac52
title: Логические и физические хранилища
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 66a5441bac91e39b7f4c124daecd3a6a569c323c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103810253"
---
# <a name="logical-and-physical-stores"></a>Логические и физические хранилища

Системные хранилища по умолчанию, включая мои, CA и ROOT, реализуются в виде логических хранилищ коллекций с несколькими предопределенными физическими хранилищами в качестве их хранилищ элементов. Элементы физического хранилища системного хранилища открываются автоматически при открытии хранилища системы. Пользователь может добавлять дополнительные физические хранилища в любую коллекцию системных хранилищ. Функция CryptoAPI [**цертрегистерфисикалсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregisterphysicalstore) добавляет новое физическое хранилище в коллекцию системных хранилищ. [**Цертунрегистерфисикалсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregisterphysicalstore) отменяет связь физического хранилища с логическим хранилищем. [**Цертрегистерсистемсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregistersystemstore) создает новое системное хранилище в разделе реестра hKey, а [**цертунрегистерсистемсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregistersystemstore) удаляет системное хранилище из реестра.

В CryptoAPI системные хранилища — это логические хранилища со связанными физическими хранилищами. Все сертификаты в существующем системном хранилище остаются доступными, а физическое Добавление новых сертификатов выполняется в физических хранилищах, составляющих логическое хранилище системы.

Пользователи, которые предпочитают продолжать использовать физические хранилища систем и не преобразовывать их в логические хранилища, могут открывать системные хранилища с \_ помощью \_ \_ поставщика системного реестра хранилища сертификатов Prov \_ . Этот поставщик будет по-прежнему использовать каждое системное хранилище как единое физическое хранилище.

Функции [**цертенумсистемсторелокатион**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstorelocation), [**цертенумсистемсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstore)и [**цертенумфисикалсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumphysicalstore) переводят список расположений системных хранилищ, доступных системных хранилищ и всех физических хранилищ, входящих в системное хранилище.

Системные хранилища также могут быть перемещены. По умолчанию системное хранилище открывается относительно подраздела реестра после предопределенного шаблона. Дополнительные сведения см. в разделе [расположения системных хранилищ](system-store-locations.md). При настройке \_ флага переустановки хранилища системы сертификатов \_ \_ \_ в параметре *DwFlags* , переданном в [**цертопенсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore) , в реестр помещается системное хранилище в заданном пользователем подразделе реестра, а не в стандартном.

 

 



