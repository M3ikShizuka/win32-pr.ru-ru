---
description: Непрозрачные BLOB-объекты, также известные как Опакуекэйблобс, используются для хранения ключей сеанса в формате, зависящем от поставщика, например SChannel.
ms.assetid: a0756c03-0c27-41ff-9b74-8af462e09675
title: Непрозрачный тип большого двоичного объекта
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3e45cf8899d5cc63fb360a6b5e4177733de3880f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104424037"
---
# <a name="opaque-blob-type"></a>Непрозрачный тип большого двоичного объекта

[*Непрозрачные BLOB-объекты*](../secgloss/o-gly.md), также известные как опакуекэйблобс, используются для хранения [*ключей сеанса*](../secgloss/s-gly.md) в формате, зависящем от поставщика, например [*SChannel*](../secgloss/s-gly.md). Они содержат базовый материал ключа и все сведения о текущем [*состоянии*](../secgloss/s-gly.md) . Сюда входят такие сведения, как [*расширяющее значение*](../secgloss/s-gly.md), [*вектор инициализации*](../secgloss/i-gly.md)и таблица ключей. Формат непрозрачных больших двоичных объектов не опубликован. Каждый поставщик CSP определяет собственный формат больших двоичных объектов.

Поскольку ключ экспортируется в непрозрачный большой двоичный объект в формате, характерном для CSP, он может быть импортирован только в CSP, из которого он был изначально экспортирован.

Когда участвуют два процесса, каждый [*процесс*](../secgloss/p-gly.md) вызывает [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) отдельно. Каждый процесс получает маркер контейнера ключей. Оба процесса могут иметь дескрипторы одного и того же контейнера ключей. Один процесс создает ключи и экспортирует их в непрозрачные BLOB-объекты, а затем передает большие двоичные объекты второму процессу. Второй процесс импортирует ключи из большого двоичного объекта в [*контейнер ключей*](../secgloss/k-gly.md).

Если CSP оборудования не поддерживает экспорт ключей, большой двоичный объект может содержать только индекс регистра ключа или что-то подобное. В этом случае оставшаяся часть процедуры игнорируется.

``` syntax
<secure process>
cbBlob = sizeof(rgbBlob);
CryptExportKey(
          hKey, 
          0, 
          OPAQUEKEYBLOB, 
          0, 
          rgbBlob, 
          &cbBlob);
hKey = 0;

<BLOB is transferred to other process>

<user process>
CryptImportKey(
            hProv, 
            pbBlob, 
            cbBlob, 
            0, 
            0, 
            &hKey);
```

 

 
