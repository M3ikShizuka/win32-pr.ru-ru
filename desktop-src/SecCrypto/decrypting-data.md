---
description: Представляет шаги для расшифровки зашифрованного сообщения.
ms.assetid: 6af7dd28-325e-431a-9cdb-109d93af6302
title: Расшифровка данных
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 970f16862bb8c6693b2ff11f519af3f7c412024b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104350155"
---
# <a name="decrypting-data"></a>Расшифровка данных

В этом разделе описываются действия по расшифровке зашифрованного сообщения.

**Расшифровка зашифрованного сообщения**

1.  Получает указатель на сообщение с цифровой подписью.
2.  Откройте хранилище сертификатов.
3.  В сообщении получите идентификатор получателя (My ID).
4.  Используйте идентификатор получателя для получения сертификата.
5.  Получите закрытый ключ для сертификата.
6.  Используйте закрытый ключ для расшифровки симметричного ключа (сеанса).
7.  Получение алгоритма шифрования из сообщения.
8.  Расшифровка данных с помощью расшифрованного ключа сеанса и алгоритма шифрования.

[**Криптдекриптмессаже**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecryptmessage) выполняет все задачи для расшифровки сообщения; Тем не менее, все еще необходимо инициализировать структуры и другие данные.

**Расшифровка данных с помощью Криптдекриптмессаже**

1.  Получите указатель на зашифрованный большой двоичный объект.
2.  Откройте хранилище сертификатов.
3.  Создайте массив хранилища сертификатов.
4.  Инициализируйте [**структуру \_ расшифровки расшифрованного сообщения в виде \_ \_ абзаца**](/windows/desktop/api/Wincrypt/ns-wincrypt-crypt_decrypt_message_para) .
5.  Вызовите [**криптдекриптмессаже**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecryptmessage) , чтобы расшифровать данные, содержащиеся в сообщении.

[Пример программы на языке C. Использование криптенкриптмессаже и криптдекриптмессаже](example-c-program-using-cryptencryptmessage-and-cryptdecryptmessage.md) реализует только что представленную процедуру. Комментарии показывают, какие элементы кода выполняют каждый шаг в процедуре. Дополнительные сведения о функции см. в разделе [**криптдекриптмессаже**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecryptmessage), а дополнительные сведения о структуре данных см. в разделе [**\_ Шифрование расшифровки сообщения с помощью \_ \_ абзаца**](/windows/desktop/api/Wincrypt/ns-wincrypt-crypt_decrypt_message_para).

 

 



