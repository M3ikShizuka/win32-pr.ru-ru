---
description: Используется для представления записей реестра, управляющих кэшированием закрытых ключей программных CSP Майкрософт.
ms.assetid: 67909072-72fe-4777-ae52-a7b9047c9dd5
title: Константы кэширования закрытых ключей (Винкрипт. h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 87d4caf6a3973a5113e03cbe24882241609ff83b8be65a20492f8f967abb734f
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117978565"
---
# <a name="private-key-caching-constants"></a>Константы кэширования закрытого ключа

Следующие константы используются для представления записей реестра, управляющих кэшированием [*закрытых ключей*](../secgloss/p-gly.md) программных CSP Майкрософт.



| Константа/значение                                                                                                                                                                                                                                                                                                                                                                                    | Описание                                                                                                |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------|
| <span id="szKEY_CRYPTOAPI_PRIVATE_KEY_OPTIONS"></span><span id="szkey_cryptoapi_private_key_options"></span><span id="SZKEY_CRYPTOAPI_PRIVATE_KEY_OPTIONS"></span><dl> <dt>**сзкэй \_ \_ \_ \_ Параметры закрытого ключа CRYPTOAPI**</dt> <dt>"политики программного обеспечения \\ \\ \\ \\ Microsoft \\ \\ Cryptography"</dt> </dl> | Путь в корне **\_ локального \_ компьютера hKey** в записях реестра для кэширования закрытого ключа.<br/> |



Следующие константы используются для обнаружения значений реестра, управляющих кэшированием закрытых ключей глобально для конкретного процесса в соответствии с программным CSP корпорации Майкрософт.



| Константа/значение                                                                                                                                                                                                                                                                                                                                                                                    | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="szPRIV_KEY_CACHE_MAX_ITEMS"></span><span id="szpriv_key_cache_max_items"></span><span id="SZPRIV_KEY_CACHE_MAX_ITEMS"></span><dl> <dt>**сзприв \_ \_ \_ Максимальное число \_ элементов в кэше ключей**</dt> <dt>"привкэйкачемакситемс"</dt> </dl>                                                                  | Значение **reg \_ DWORD** в разделе реестра **Options сзкэй ( \_ \_ \_ \_ Параметры закрытого ключа CRYPTOAPI** ), которое указывает максимальное количество закрытых ключей, которые могут быть кэшированы в один раз для одного процесса. Эта проверка выполняется при считывании сохраненного закрытого ключа. Если превышено максимальное число, из кэша удаляется наименее недавно использованный ключ.<br/> Если это значение равно нулю, ключи не кэшируются. Если это значение отсутствует, по умолчанию используется значение **\_ \_ \_ максимального числа \_ элементов \_ кэша ключей кприв по** умолчанию.<br/> Если в открытом контексте имеется ссылка на закрытый ключ, который удаляется из кэша, этот ключ считывается из хранилища при следующей попытке использования ключа.<br/> **Windows Server 2003 и Windows XP с пакетом обновления 1 (SP1) и более ранними версиями:** Это значение реестра не поддерживается.<br/>                                  |
| <span id="cPRIV_KEY_CACHE_MAX_ITEMS_DEFAULT"></span><span id="cpriv_key_cache_max_items_default"></span><span id="CPRIV_KEY_CACHE_MAX_ITEMS_DEFAULT"></span><dl> <dt>**кприв \_ \_ \_ Максимальное число элементов в кэше ключей \_ \_ по умолчанию**</dt> <dt>20</dt> </dl>                                                         | Значение по умолчанию для параметра реестра **\_ \_ \_ Max \_ Items кэша ключей сзприв** , если значение не указано.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span id="szPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS"></span><span id="szpriv_key_cache_purge_interval_seconds"></span><span id="SZPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS"></span><dl> <dt>**сзприв \_ \_Интервал очистки кэша ключей (в \_ \_ \_ секундах**</dt> <dt>— "привкэйкачепуржеинтервалсекондс"</dt> ) </dl> | Значение **reg \_ DWORD** в разделе реестра **Options сзкэй ( \_ \_ \_ \_ Параметры закрытого ключа CRYPTOAPI** ), которое указывает максимальный возраст (в секундах) любого кэшированного закрытого ключа. Эта проверка выполняется при использовании или считывании сохраненного закрытого ключа. Если это время прошло с момента последнего сброса, все кэшированные ключи, на которые нет ссылок с момента последнего очистки, будут удалены из кэша.<br/> Если это значение отсутствует, по умолчанию используется значение **\_ \_ интервала очистки кэша ключей кприв в \_ \_ \_ секундах \_** .<br/> Если в открытом контексте имеется ссылка на закрытый ключ, который удаляется из кэша, ключ будет считан из хранилища при следующей попытке использования ключа.<br/> **Windows Server 2003 и Windows XP с пакетом обновления 1 (SP1) и более ранними версиями:** Это значение реестра не поддерживается.<br/> |
| <span id="cPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS_DEFAULT"></span><span id="cpriv_key_cache_purge_interval_seconds_default"></span><span id="CPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS_DEFAULT"></span><dl> <dt>**кприв \_ \_Интервал очистки кэша ключей (в \_ \_ \_ секундах) \_ по умолчанию**</dt> <dt>86400</dt> </dl> | Значение по умолчанию для **\_ \_ интервала очистки кэша ключей сзприв в \_ \_ \_ секундах** , если значение не указано. Это значение эквивалентно одному дню.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



Следующие константы используются для обнаружения значений реестра, управляющих кэшированием закрытых ключей для одного программного экземпляра [*поставщика служб шифрования*](../secgloss/c-gly.md) (CSP) корпорации Майкрософт.



| Константа/значение                                                                                                                                                                                                                                                                                          | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <dt></dt><dt>"Алловкачепв"</dt> </dl>                                                                                                                                                         | Значение **reg \_ DWORD** в разделе " **\_ \_ \\ политики программного обеспечения локального компьютера" ( \\ \\ Майкрософт) \\ \\ Защита** раздела реестра, которое указывает, включено ли кэширование паролей для защищенных паролем ключей в CSP на основе программного обеспечения Майкрософт. Если это значение равно 0, то кэширование паролей будет дисабелд и пользователю будет предложено ввести пароль при каждом использовании ключа, защищенного паролем. Любое другое значение или отсутствие этого значения указывает на то, что пароль будет кэшироваться. В этом сценарии пользователю предлагается один раз для каждого отдельного ключа. <br/> |
| <span id="szKEY_CACHE_ENABLED"></span><span id="szkey_cache_enabled"></span><span id="SZKEY_CACHE_ENABLED"></span><dl> <dt>**сзкэй \_ КЭШ \_ включен**</dt> <dt>"качеприватекэйс"</dt> </dl>          | Значение **reg \_ DWORD** в разделе реестра **Options сзкэй ( \_ \_ \_ \_ Параметры закрытого ключа CRYPTOAPI** ), которое указывает, включено ли кэширование закрытых ключей. Если это значение равно 1, то кэширование закрытых ключей включено. Любое другое значение или отсутствие этого значения указывает на то, что кэширование закрытых ключей отключено.<br/> **Windows vista с пакетом обновления 1 (SP1), Windows Vista и Windows XP:** Это значение реестра не поддерживается.<br/>                                                                                                                                                        |
| <span id="szKEY_CACHE_SECONDS"></span><span id="szkey_cache_seconds"></span><span id="SZKEY_CACHE_SECONDS"></span><dl> <dt>**сзкэй \_ \_Секунды кэша**</dt> <dt>"приватекэйлифетимесекондс"</dt> </dl> | Значение **reg \_ DWORD** в разделе реестра **Options сзкэй ( \_ \_ \_ \_ Параметры закрытого ключа CRYPTOAPI** ), которое указывает максимальный возраст (в секундах) любого кэшированного закрытого ключа.<br/> **Windows XP:** Это значение реестра не поддерживается.<br/>                                                                                                                                                                                                                                                                                                                                          |



## <a name="remarks"></a>Remarks

Различия между значениями в **\_ кэше сзкэй \_** и **\_ \_ интервалом очистки кэша ключей сзприв в \_ \_ \_ секундах** приведены ниже.

 **\_секунды кэша \_ сзкэй**  

-   Это значение применяется только к конкретному CSP. После выпуска CSP также освобождается кэш CSP.  
-   Это значение применяется только в том случае, если предпринимается попытка использовать конкретный закрытый ключ с заданным маркером контекста.  

**\_ \_ интервал очистки кэша ключей сзприв в \_ \_ \_ секундах**  

-   Это значение применяется ко всем CSP в процессе. Даже если поставщик CSP освобожден, этот кэш не освобождается.  
-   Это значение применяется каждый раз, когда любой сохраненный закрытый ключ используется или считывается из хранилища в одном процессе.  



## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|---------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows \[Только классические приложения XP\]<br/>                                           |
| Минимальная версия сервера<br/> | Windows Только для \[ настольных приложений сервера 2003\]<br/>                                  |
| Заголовок<br/>                   | <dl> <dt>Винкрипт. h</dt> </dl> |



 

 
