---
description: Во время загрузки системы SCM запускает все службы автозапуска и службы, от которых они зависят. Например, если автоматический запуск службы зависит от службы, запускаемой по требованию, то служба запуска по требованию также запускается автоматически.
ms.assetid: 8aa60e96-a35e-4670-832c-c045d0903618
title: Автоматический запуск служб
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 40b2e7ef0c65e72ee21145891b6f9598117a7afe
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662255"
---
# <a name="automatically-starting-services"></a>Автоматический запуск служб

Во время загрузки системы SCM запускает все службы автозапуска и службы, от которых они зависят. Например, если автоматический запуск службы зависит от службы, запускаемой по требованию, то служба запуска по требованию также запускается автоматически.

Порядок загрузки определяется следующим образом:

1.  Порядок групп в списке группы упорядочения нагрузки. Эти сведения хранятся в значении **ServiceGroupOrder** в следующем разделе реестра:

    **\_ \_ \\ \\ Элемент управления CurrentControlSet системы hKey локального компьютера \\**

    Чтобы указать группу порядка загрузки для службы, используйте параметр *лплоадордерграуп* функции [**CreateService**](/windows/desktop/api/Winsvc/nf-winsvc-createservicea) или [**чанжесервицеконфиг**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfiga) .

2.  Порядок служб в группе, указанной в векторе порядка тегов. Эти сведения хранятся в значении **граупордерлист** в следующем разделе реестра:

    **\_ \_ \\ \\ Элемент управления CurrentControlSet системы hKey локального компьютера \\**

3.  Зависимости, перечисленные для каждой службы.

После завершения загрузки система выполняет программу проверки загрузки, указанную параметром **бутверификатионпрограм** в следующем разделе реестра: **hKey \_ локальный \_ компьютер \\ System \\ CurrentControlSet \\ Control**.

По умолчанию это значение не установлено. Система просто сообщает о том, что загрузка прошла успешно после входа первого пользователя в систему. Вы можете указать программу проверки загрузки, которая проверяет систему на наличие проблем и передает состояние загрузки SCM с помощью функции [**нотифибутконфигстатус**](/windows/desktop/api/Winsvc/nf-winsvc-notifybootconfigstatus) .

После успешной загрузки система сохраняет клон базы данных в последней известной конфигурации (LKG). Система может восстановить эту копию базы данных, если изменения, внесенные в активную базу данных, приведут к сбою перезагрузки системы. Ниже приведен раздел реестра для этой базы данных.

**\_Службы hKey локального \_ компьютера, \\ система \\ управления версиями *xxx* \\**

где *xxx* — значение, сохраненное в следующем параметре реестра: **hKey \_ Local \_ Machine \\ System \\ выберите \\ ласткновнгуд**.

Если не удается запустить автоматический запуск службы с \_ \_ критическим уровнем контроля ошибок службы, SCM перезагружает компьютер с помощью конфигурации LKG. Если конфигурация LKG уже используется, происходит сбой загрузки.

Службу автоматического запуска можно настроить в качестве отложенного автоматического запуска, вызвав функцию [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) с \_ \_ отложенным \_ \_ автозапуском конфигурации службы \_ . Это изменение вступает в силу после следующей загрузки системы. Дополнительные сведения см. в разделе [**Служба \_ отложенного \_ автоматического \_ запуска \_ службы**](/windows/desktop/api/Winsvc/ns-winsvc-service_delayed_auto_start_info).

 

 



