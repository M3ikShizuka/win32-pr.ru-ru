---
description: При считывании каждой записи службы из базы данных установленных служб SCM создает запись службы для службы.
ms.assetid: c0ee43e2-af9b-4578-9017-46a5ed50b938
title: Список записей службы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1143625de977c7e5c488c5cc56620adc3a5454db
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662399"
---
# <a name="service-record-list"></a>Список записей службы

При считывании каждой записи службы из базы данных установленных служб SCM создает запись службы для службы. Запись службы включает:

-   Имя службы
-   Тип запуска (автоматический запуск или запуск по требованию)
-   Состояние службы (см. [**структуру \_ состояния службы**](/windows/desktop/api/Winsvc/ns-winsvc-service_status) ) <dl> Тип  
    Текущее состояние  
    Допустимые управляющие коды  
    Код выхода  
    Указание ожидания  
    </dl>
-   Pointer to dependency list

Имя пользователя и пароль учетной записи указываются во время установки службы. SCM хранит имя пользователя в реестре и пароль в защищенной части локального центра безопасности (LSA). Системный администратор может создавать учетные записи с паролями, срок действия которых никогда не истекает. Кроме того, системный администратор может создавать учетные записи с просроченными паролями и управлять этими учетными записями, периодически изменяя пароли.

SCM хранит две копии пароля учетной записи пользователя, текущий пароль и пароль резервной копии. Пароль, указанный при первом запуске службы, сохраняется в качестве текущего пароля, а пароль резервной копии не инициализируется. Когда SCM пытается запустить службу в контексте безопасности учетной записи пользователя, он использует текущий пароль. Если текущий пароль используется успешно, он также сохраняется как пароль резервной копии. Если пароль изменен с помощью функции [**чанжесервицеконфиг**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfiga) или служебной программы панели управления "службы", новый пароль хранится в качестве текущего пароля, а предыдущий пароль хранится в качестве пароля для резервного копирования. Если SCM пытается запустить службу, а текущий пароль завершается неудачей, то он использует пароль резервной копии. Если пароль резервной копии используется успешно, он сохраняется как текущий пароль.

SCM обновляет состояние службы, когда служба отправляет уведомления о состоянии, используя функцию [**сбой SetServiceStatus**](/windows/desktop/api/Winsvc/nf-winsvc-setservicestatus) . SCM поддерживает состояние службы драйвера путем запроса к системе ввода-вывода вместо получения уведомлений о состоянии, как это происходит от службы.

Служба может зарегистрировать дополнительные сведения о типе, вызвав функцию [**сетсервицебитс**](/windows/desktop/api/Lmserver/nf-lmserver-setservicebits) . Функции [**нетсервержетинфо**](/windows/desktop/api/lmserver/nf-lmserver-netservergetinfo) и [**нетсерверенум**](/windows/desktop/api/lmserver/nf-lmserver-netserverenum) получают Поддерживаемые типы служб.

 

 
