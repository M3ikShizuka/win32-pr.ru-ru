---
description: Для отправки управляющих запросов работающей службе программа управления службами использует функцию ControlService.
ms.assetid: d6cdc876-8b74-460e-ad43-6455ddf428dd
title: Запросы управления службами
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4320aad28f8a176fbf4aaa6b51539256a376a01b8edea034341cae7831ca4c40
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117967573"
---
# <a name="service-control-requests"></a>Запросы управления службами

Для отправки управляющих запросов работающей службе программа управления службами использует функцию [**ControlService**](/windows/desktop/api/Winsvc/nf-winsvc-controlservice) . Эта функция задает значение элемента управления, которое передается функции [**хандлерекс**](/windows/desktop/api/WinSvc/nc-winsvc-lphandler_function_ex) указанной службы. Это значение элемента управления может быть определяемым пользователем кодом или одним из стандартных кодов, которые позволяют вызывающей программе выполнять следующие действия.

-   Останавливает службу (служба \_ управления службами \_ останавливается).
-   Приостановка службы ( \_ \_ приостановка управления службой).
-   Возобновить выполнение приостановленной службы ( \_ продолжение управления службой \_ ).
-   Получение обновленной информации о состоянии из службы ( \_ опрос управления службами \_ ).

Каждая служба определяет значения элементов управления, которые будут приняты и обработаны. Чтобы определить, какие из стандартных значений элементов управления принимаются службой, используйте функцию [**куерисервицестатусекс**](/windows/desktop/api/Winsvc/nf-winsvc-queryservicestatusex) или задайте \_ метод опроса управления службой, \_ чтобы запросить контрольное значение в вызове функции [**ControlService**](/windows/desktop/api/Winsvc/nf-winsvc-controlservice) . Элемент **двконтролсакцептед** структуры [**\_ состояния службы**](/windows/desktop/api/Winsvc/ns-winsvc-service_status) , возвращаемой этими функциями, указывает, может ли служба быть остановлена, приостановлена или возобновлена. Все службы принимают управление службой \_ для \_ опроса контрольного значения.

Функция [**куерисервицестатусекс**](/windows/desktop/api/Winsvc/nf-winsvc-queryservicestatusex) сообщает о последнем состоянии указанной службы, но не получает обновленное состояние от самой службы. Использование управления службой \_ \_ для опроса контрольного значения при вызове [**ControlService**](/windows/desktop/api/Winsvc/nf-winsvc-controlservice) гарантирует, что возвращенная информация о состоянии будет актуальной.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Управление службой с помощью SC](controlling-a-service-using-sc.md)
</dt> </dl>

 

 



