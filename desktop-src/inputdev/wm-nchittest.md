---
title: Сообщение WM_NCHITTEST (Winuser. h)
description: Отправляется в окно, чтобы определить, какая часть окна соответствует определенной координате экрана.
ms.assetid: 4c860466-a9f8-4af8-96b9-cee005481875
keywords:
- WM_NCHITTEST ввода сообщений с клавиатуры и мыши
topic_type:
- apiref
api_name:
- WM_NCHITTEST
api_location:
- Winuser.h
api_type:
- HeaderDef
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 2f54c397db10e8ecd6b2ed3c67a73affde4507ea59a265d502f28ada97b8a68e
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119778644"
---
# <a name="wm_nchittest-message"></a>\_Сообщение НЧИТТЕСТ WM

Отправляется в окно, чтобы определить, какая часть окна соответствует определенной координате экрана. Это может произойти, например, при перемещении курсора, при нажатии или отпускании кнопки мыши или в ответ на вызов функции, такой как [**виндовфромпоинт**](/windows/desktop/api/winuser/nf-winuser-windowfrompoint). Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.

Окно получает это сообщение через функцию [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)) .


```C++
#define WM_NCHITTEST                    0x0084
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*wParam* 
</dt> <dd>

Этот параметр не используется.

</dd> <dt>

*lParam* 
</dt> <dd>

Слово нижнего порядка Указывает координату x курсора. Координата задается относительно левого верхнего угла экрана.

Слово в высоком порядке Указывает координату y курсора. Координата задается относительно левого верхнего угла экрана.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Возвращаемое значение функции [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) является одним из следующих значений, указывающим позицию курсора в горячей точке.



| Возвращаемый код и значение                                                                                                                                    | Описание                                                                                                                                                                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <dt>**Хтбордер**</dt> <dt>18</dt> </dl>      | В границах окна, у которых нет границы изменения размера.<br/>                                                                                                                                           |
| <dl> <dt>**Хтботтом**</dt> <dt>15</dt> </dl>      | В нижней горизонтальной границе окна изменяемого размера (пользователь может щелкнуть мышью, чтобы изменить размер окна по вертикали).<br/>                                                                                    |
| <dl> <dt>**Хтботтомлефт**</dt> <dt>16</dt> </dl>  | В левом нижнем углу границы окна изменяемого размера (пользователь может щелкнуть мышью, чтобы изменить размер окна по диагонали).<br/>                                                                              |
| <dl> <dt>**Хтботтомригхт**</dt> <dt>17</dt> </dl> | В правом нижнем углу границы окна изменяемого размера (пользователь может щелкнуть мышью, чтобы изменить размер окна по диагонали).<br/>                                                                             |
| <dl> <dt>**Хткаптион**</dt> <dt>2</dt> </dl>      | В заголовке окна.<br/>                                                                                                                                                                                         |
| <dl> <dt>**Хтклиент**</dt> <dt>1</dt> </dl>       | В клиентской области.<br/>                                                                                                                                                                                       |
| <dl> <dt>**Хтклосе**</dt> <dt>20</dt> </dl>       | В кнопке **Закрыть** .<br/>                                                                                                                                                                                  |
| <dl> <dt>**Хтеррор**</dt> <dt>-2</dt> </dl>       | На фоне экрана или на разделительной линии между окнами (то же, что и **хтновхере**, за исключением того, что функция [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) выдает системный сигнал для указания на ошибку).<br/> |
| <dl> <dt>**Хтгровбокс**</dt> <dt>4</dt> </dl>      | В поле размера (то же, что и **хтсизе**).<br/>                                                                                                                                                                     |
| <dl> <dt>**Хселп**</dt> <dt>21</dt> </dl>        | В кнопке **справки** .<br/>                                                                                                                                                                                   |
| <dl> <dt>**Хсскролл**</dt> <dt>6</dt> </dl>      | В горизонтальной полосе прокрутки.<br/>                                                                                                                                                                             |
| <dl> <dt>**Хтлефт**</dt> <dt>10</dt> </dl>        | В левой границе окна изменяемого размера (пользователь может щелкнуть мышью, чтобы изменить размер окна по горизонтали).<br/>                                                                                              |
| <dl> <dt>**Хтмену**</dt> <dt>5</dt> </dl>         | В меню.<br/>                                                                                                                                                                                              |
| <dl> <dt>**Хтмаксбуттон**</dt> <dt>9</dt> </dl>    | В кнопке **развертывания** .<br/>                                                                                                                                                                               |
| <dl> <dt>**Хтминбуттон**</dt> <dt>8</dt> </dl>    | В кнопке **сворачивания** .<br/>                                                                                                                                                                               |
| <dl> <dt>**Хтновхере**</dt> <dt>0</dt> </dl>      | На фоне экрана или на разделительной линии между окнами.<br/>                                                                                                                                         |
| <dl> <dt>**Хтредуце**</dt> <dt>8</dt> </dl>       | В кнопке **сворачивания** .<br/>                                                                                                                                                                               |
| <dl> <dt>**Хтригхт**</dt> <dt>11</dt> </dl>       | В правой границе окна изменяемого размера (пользователь может щелкнуть мышью, чтобы изменить размер окна по горизонтали).<br/>                                                                                             |
| <dl> <dt>**Хтсизе**</dt> <dt>4</dt> </dl>         | В поле размера (то же, что и **хтгровбокс**).<br/>                                                                                                                                                                  |
| <dl> <dt>**Хтсисмену**</dt> <dt>3</dt> </dl>      | В меню окна или в кнопке **закрытия** дочернего окна.<br/>                                                                                                                                            |
| <dl> <dt>**Хттоп**</dt> <dt>12</dt> </dl>         | В верхней горизонтальной границе окна.<br/>                                                                                                                                                             |
| <dl> <dt>**Хттоплефт**</dt> <dt>13</dt> </dl>     | В левом верхнем углу границы окна.<br/>                                                                                                                                                            |
| <dl> <dt>**Хттопригхт**</dt> <dt>14</dt> </dl>    | В правом верхнем углу границы окна.<br/>                                                                                                                                                           |
| <dl> <dt>**Хттранспарент**</dt> <dt>-1</dt> </dl> | В окне, которое в настоящий момент покрывается другим окном в том же потоке (сообщение будет отправлено в базовые окна в том же потоке, пока один из них не вернет код, который не **хттранспарент**).<br/>  |
| <dl> <dt>**Хтвскролл**</dt> <dt>7</dt> </dl>      | На вертикальной полосе прокрутки.<br/>                                                                                                                                                                             |
| <dl> <dt>**Хтзум**</dt> <dt>9</dt> </dl>         | В кнопке **развертывания** .<br/>                                                                                                                                                                               |



 

## <a name="remarks"></a>Remarks

Чтобы получить горизонтальное и вертикальное расположение, используйте следующий код:


```
xPos = GET_X_LPARAM(lParam); 
yPos = GET_Y_LPARAM(lParam);
```



Как отмечалось выше, координата x находится в низком порядке в **коротком** значении возвращаемого значения; Координата y находится в **высоком порядке (** оба представляют значения *со знаком* , так как они могут принимать отрицательные значения в системах с несколькими мониторами). Если возвращаемое значение присваивается переменной, можно использовать макрос [**макепоинтс**](/windows/desktop/api/wingdi/nf-wingdi-makepoints) для получения структуры [**points**](/previous-versions//dd162808(v=vs.85)) из возвращаемого значения. Для извлечения координат x или y можно также использовать макрос [**Get \_ x \_ lParam**](/windows/desktop/api/windowsx/nf-windowsx-get_x_lparam) или [**Get \_ Y \_**](/windows/desktop/api/windowsx/nf-windowsx-get_y_lparam) .

> [!IMPORTANT]
> Не используйте макросы [**ловорд**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85)) или [**HIWORD**](/previous-versions/windows/desktop/legacy/ms632657(v=vs.85)) для извлечения координат x и y позиции курсора, так как эти макросы возвращают неверные результаты в системах с несколькими мониторами. Системы с несколькими мониторами могут иметь отрицательные координаты x и y, а **ловорд** и **HIWORD** обрабатывают координаты как неподписанные количества.

 

**Windows Vista:** При создании пользовательских фреймов, содержащих стандартные кнопки заголовков, это сообщение сначала должно быть передано функции [**двмдефвиндовпрок**](/windows/desktop/api/dwmapi/nf-dwmapi-dwmdefwindowproc) . Это позволяет диспетчер окон рабочего стола (DWM) обеспечивать проверку попадания для кнопок субтитров. Если **двмдефвиндовпрок** не обрабатывает это сообщение, может потребоваться дополнительная обработка **WM \_ нчиттест** .

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-----------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                                                |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                                                      |
| Заголовок<br/>                   | <dl> <dt>Winuser. h (включение Виндовскс. h)</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

**Ссылки**
</dt> <dt>

[**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca)
</dt> <dt>

[**ПОЛУЧИТЬ \_ X \_ lParam**](/windows/desktop/api/windowsx/nf-windowsx-get_x_lparam)
</dt> <dt>

[**ПОЛУЧИТЬ \_ lParam для Y \_**](/windows/desktop/api/windowsx/nf-windowsx-get_y_lparam)
</dt> <dt>

**Зрения**
</dt> <dt>

[Ввод с помощью мыши](mouse-input.md)
</dt> <dt>

**Другие ресурсы**
</dt> <dt>

[**макепоинтс**](/windows/desktop/api/wingdi/nf-wingdi-makepoints)
</dt> <dt>

[**ТОЧКИ**](/previous-versions//dd162808(v=vs.85))
</dt> </dl>

 

