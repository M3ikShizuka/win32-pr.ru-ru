---
title: Ввод с клавиатуры (ввод с клавиатуры и мыши)
description: В этом разделе описывается, как система создает ввод с клавиатуры и как приложение получает и обрабатывает эти входные данные.
ms.assetid: vs|winui|~\winui\windowsuserinterface\userinput\keyboardinput.htm
keywords:
- Ввод данных пользователем, ввод с клавиатуры
- запись вводимых пользователем данных, ввод с клавиатуры
- ввод с клавиатуры
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 249e42a97c0848a9935fe700a0408989cbab90abc53c9ac2da6c7ef56fbc31da
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118757593"
---
# <a name="keyboard-input-keyboard-and-mouse-input"></a>Ввод с клавиатуры (ввод с клавиатуры и мыши)

В этом разделе описывается, как система создает ввод с клавиатуры и как приложение получает и обрабатывает эти входные данные.

### <a name="in-this-section"></a>В этом разделе



| Имя                                                     | Описание                                                       |
|----------------------------------------------------------|-------------------------------------------------------------------|
| [О вводе с клавиатуры](about-keyboard-input.md)         | Обсуждает ввод с клавиатуры.<br/>                              |
| [Использование ввода с клавиатуры](using-keyboard-input.md)         | Охватывает задачи, связанные с вводом с клавиатуры. <br/> |
| [Справочник по вводу с клавиатуры](keyboard-input-reference.md) | Содержит справочник по API.<br/>                            |



 

### <a name="functions"></a>Функции



| Имя                                                     | Описание                                                                                                                                                                                                                                                                                                                                                                                           |
|----------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**активатекэйбоардлайаут**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) | Задает идентификатор локали ввода (прежнее название — маркер раскладки клавиатуры) для вызывающего потока или текущего процесса. Идентификатор языка ввода определяет языковой стандарт, а также физический макет клавиатуры.<br/>                                                                                                                                                                |
| [**блоккинпут**](/windows/win32/api/winuser/nf-winuser-blockinput)                         | Блокирует события ввода с клавиатуры и мыши для достижения приложений. <br/>                                                                                                                                                                                                                                                                                                                        |
| [**енаблевиндов**](/windows/win32/api/winuser/nf-winuser-enablewindow)                     | Включает или отключает ввод с клавиатуры и мыши в указанное окно или элемент управления. Если входные данные отключены, окно не получает таких входных данных, как щелчки мыши и нажатия клавиш. Если входные данные включены, окно получает все входные данные.<br/>                                                                                                                                                     |
| [**жетактивевиндов**](/windows/win32/api/winuser/nf-winuser-getactivewindow)               | Получает маркер окна для активного окна, присоединенного к очереди сообщений вызывающего потока. <br/>                                                                                                                                                                                                                                                                                          |
| [**жетасинккэйстате**](/windows/win32/api/winuser/nf-winuser-getasynckeystate)             | Определяет, находится ли ключ в момент вызова функции, а также была ли нажата клавиша после предыдущего вызова [**жетасинккэйстате**](/windows/win32/api/winuser/nf-winuser-getasynckeystate). <br/>                                                                                                                                                                                                         |
| [**Фокус ввода**](/windows/win32/api/winuser/nf-winuser-getfocus)                             | Получает маркер окна с фокусом клавиатуры, если окно присоединено к очереди сообщений вызывающего потока. <br/>                                                                                                                                                                                                                                                          |
| [**жеткэйбоардлайаут**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayout)           | Получает активный идентификатор локали ввода (прежнее название раскладки клавиатуры) для указанного потока. Если значение параметра *идсреад* равно нулю, возвращается идентификатор языка ввода для активного потока.<br/>                                                                                                                                                                           |
| [**жеткэйбоардлайаутлист**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutlist)   | Извлекает идентификаторы языка ввода (ранее назывались маркерами раскладки клавиатуры), соответствующие текущему набору входных языков в системе. Функция копирует идентификаторы в указанный буфер.<br/>                                                                                                                                                                             |
| [**жеткэйбоардлайаутнаме**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutnamea)   | Возвращает имя активного идентификатора локали ввода (прежнее название раскладки клавиатуры). <br/>                                                                                                                                                                                                                                                                                           |
| [**жеткэйбоардстате**](/windows/win32/api/winuser/nf-winuser-getkeyboardstate)             | Копирует состояние виртуальных ключей 256 в указанный буфер. <br/>                                                                                                                                                                                                                                                                                                                        |
| [**жеткэйнаметекст**](/windows/win32/api/winuser/nf-winuser-getkeynametexta)                 | Извлекает строку, представляющую имя ключа. <br/>                                                                                                                                                                                                                                                                                                                                     |
| [**жеткэйстате**](/windows/win32/api/winuser/nf-winuser-getkeystate)                       | Получает состояние указанного виртуального ключа. Состояние указывает, что ключ: вверх, вниз или переключается (вкл., при каждом нажатии клавиши). <br/>                                                                                                                                                                                                                       |
| [**жетластинпутинфо**](/windows/win32/api/winuser/nf-winuser-getlastinputinfo)             | Возвращает время последнего входного события.<br/>                                                                                                                                                                                                                                                                                                                                                |
| [**исвиндовенаблед**](/windows/win32/api/winuser/nf-winuser-iswindowenabled)               | Определяет, включено ли в указанном окне Ввод с клавиатуры и мыши. <br/>                                                                                                                                                                                                                                                                                                          |
| [**лоадкэйбоардлайаут**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta)         | Загружает в систему новый идентификатор локали ввода (ранее назывался раскладкой клавиатуры). В каждый момент времени может загружаться несколько идентификаторов национальных настроек ввода, но только один процесс активен одновременно. Загрузка нескольких идентификаторов языка ввода позволяет быстро переключаться между ними.<br/>                                                                                             |
| [**мапвиртуалкэй**](/windows/win32/api/winuser/nf-winuser-mapvirtualkeya)                   | Преобразует (сопоставляет) код виртуального ключа в код сканирования или символьное значение или преобразует код просмотра в код виртуального ключа. <br/> Чтобы задать маркер для раскладки клавиатуры, который будет использоваться для перевода указанного кода, используйте функцию [**мапвиртуалкэйекс**](/windows/win32/api/winuser/nf-winuser-mapvirtualkeyexa) .<br/>                                                                                                |
| [**мапвиртуалкэйекс**](/windows/win32/api/winuser/nf-winuser-mapvirtualkeyexa)               | Карты в код сканирования или символьное значение, а также преобразует код просмотра в код виртуального ключа. Функция преобразует коды с помощью языка ввода и идентификатора локали ввода.<br/>                                                                                                                                                                                 |
| [**оемкэйскан**](/windows/win32/api/winuser/nf-winuser-oemkeyscan)                         | Карты Коды ОЕМАСЦИИ от 0 до 0x0FF в кодах OEM-проверки и смене состояния. Функция предоставляет сведения, позволяющие программе отправить текст OEM в другую программу путем имитации ввода с клавиатуры. <br/>                                                                                                                                                                                   |
| [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey)                 | Определяет горячую клавишу уровня системы.<br/>                                                                                                                                                                                                                                                                                                                                                             |
| [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput)                           | Синтезирование нажатий клавиш, движения мыши и нажатия кнопок.<br/>                                                                                                                                                                                                                                                                                                                                  |
| [**сетактивевиндов**](/windows/win32/api/winuser/nf-winuser-setactivewindow)               | Активирует окно. Окно должно быть присоединено к очереди сообщений вызывающего потока. <br/>                                                                                                                                                                                                                                                                                                    |
| [**SetFocus**](/windows/win32/api/winuser/nf-winuser-setfocus)                             | Задает фокус клавиатуры для указанного окна. Окно должно быть присоединено к очереди сообщений вызывающего потока. <br/>                                                                                                                                                                                                                                                                       |
| [**сеткэйбоардстате**](/windows/win32/api/winuser/nf-winuser-setkeyboardstate)             | Копирует 256-байтовый массив состояний клавиш клавиатуры в таблицу ввода состояния клавиатуры вызывающего потока. Это та же самая таблица, к которой обращается функция [**жеткэйбоардстате**](/windows/win32/api/winuser/nf-winuser-getkeyboardstate) и [**жеткэйстате**](/windows/win32/api/winuser/nf-winuser-getkeystate) . Изменения, вносимые в эту таблицу, не влияют на ввод с клавиатуры в любой другой поток. <br/>                                                                   |
| [**ToAscii**](/windows/win32/api/winuser/nf-winuser-toascii)                               | Преобразует указанный код виртуального ключа и состояние клавиатуры в соответствующий символ или символы. Функция преобразует код, используя язык ввода и физическую раскладку клавиатуры, обозначенную маркером раскладки клавиатуры.<br/> Чтобы задать маркер для раскладки клавиатуры, который будет использоваться для преобразования указанного кода, используйте функцию [**тоасЦииекс**](/windows/win32/api/winuser/nf-winuser-toasciiex) .<br/> |
| [**тоасЦииекс**](/windows/win32/api/winuser/nf-winuser-toasciiex)                           | Преобразует указанный код виртуального ключа и состояние клавиатуры в соответствующий символ или символы. Функция преобразует код, используя язык ввода и физическую раскладку клавиатуры, определяемую идентификатором языка ввода.<br/>                                                                                                                                               |
| [**тауникоде**](/windows/win32/api/winuser/nf-winuser-tounicode)                           | Преобразует указанный код виртуального ключа и состояние клавиатуры в соответствующий символ или символы Юникода. <br/> Чтобы задать маркер для раскладки клавиатуры, который будет использоваться для преобразования указанного кода, используйте функцию [**тауникодикс**](/windows/win32/api/winuser/nf-winuser-tounicodeex) .<br/>                                                                                                                     |
| [**тауникодикс**](/windows/win32/api/winuser/nf-winuser-tounicodeex)                       | Преобразует указанный код виртуального ключа и состояние клавиатуры в соответствующий символ или символы Юникода.<br/>                                                                                                                                                                                                                                                                         |
| [**унлоадкэйбоардлайаут**](/windows/win32/api/winuser/nf-winuser-unloadkeyboardlayout)     | Выгружает идентификатор локали ввода (ранее назывался раскладкой клавиатуры). <br/>                                                                                                                                                                                                                                                                                                                   |
| [**унрегистерхоткэй**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey)             | Освобождает активный ключ, ранее зарегистрированный вызывающим потоком. <br/>                                                                                                                                                                                                                                                                                                                              |
| [**вккэйсканекс**](/windows/win32/api/winuser/nf-winuser-vkkeyscanexa)                       | Преобразует символ в соответствующий код виртуального ключа и сдвиг состояния. Функция преобразует символ, используя язык ввода и физическую раскладку клавиатуры, определяемую идентификатором языка ввода. <br/>                                                                                                                                                                      |



 

Следующие функции являются устаревшими.



| Функция                               | Описание                                                                                                                                                                                                                                                                   |
|----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**жеткбкодепаже**](/windows/win32/api/winuser/nf-winuser-getkbcodepage) | Извлекает текущую кодовую страницу.<br/>                                                                                                                                                                                                                                   |
| [**\_событие кэйбд**](/windows/win32/api/winuser/nf-winuser-keybd_event)    | Синтезирование нажатия клавиши. Система может использовать такое синтезированное нажатие клавиш для создания сообщения [**WM \_ KEYUP**](wm-keyup.md) или [**WM \_ KeyDown**](wm-keydown.md) . Обработчик прерываний драйвера клавиатуры вызывает функцию [**\_ события кэйбд**](/windows/win32/api/winuser/nf-winuser-keybd_event) .<br/> |
| [**вккэйскан**](/windows/win32/api/winuser/nf-winuser-vkkeyscana)         | Преобразует символ в соответствующий код виртуального ключа и сдвиг для текущей клавиатуры.<br/>                                                                                                                                                             |



 

### <a name="messages"></a>Сообщения



| name                                  | Описание                                                                                                           |
|---------------------------------------|-----------------------------------------------------------------------------------------------------------------------|
| [**\_сочетание клавиш WM**](wm-gethotkey.md) | Определяет горячую клавишу, связанную с окном. <br/>                                                          |
| [**WM \_ сесоткэй**](wm-sethotkey.md) | Связывает горячую клавишу с окном. Когда пользователь нажимает клавишу горячего ключа, система активирует окно. <br/> |



 

### <a name="notifications"></a>Уведомления



| Имя                                      | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**\_Активация WM**](wm-activate.md)       | Посылается как активируемое окно, так и деактивируемое окно. Если в Windows используется одна и та же очередь ввода, сообщение отправляется синхронно, сначала в процедуру окна верхнего уровня, которая деактивируется, а затем в оконную процедуру активируемого окна верхнего уровня. Если в Windows используются различные входные очереди, сообщение отправляется асинхронно, поэтому окно активируется немедленно. <br/>                                                                                                                               |
| [**WM \_ аппкомманд**](wm-appcommand.md)   | Уведомляет окно о том, что пользователь создал событие команды приложения, например, щелкнув кнопку команды приложения с помощью мыши или введя клавишу команды приложения на клавиатуре.<br/>                                                                                                                                                                                                                                                                                                                                                       |
| [**WM \_ char**](wm-char.md)               | Отправляется в окно с фокусом клавиатуры, когда сообщение [**WM \_ KeyDown**](wm-keydown.md) преобразуется функцией [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) . Сообщение [**WM \_ char**](wm-char.md) содержит код символа нажатой клавиши. <br/>                                                                                                                                                                                                                                                                             |
| [**WM \_ деадчар**](wm-deadchar.md)       | Отправляется в окно с фокусом клавиатуры, когда сообщение [**WM \_ KEYUP**](wm-keyup.md) преобразуется функцией [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) . [**WM \_ ДЕАДЧАР**](wm-deadchar.md) указывает код символа, сформированный мертвым ключом. Мертвый ключ — это ключ, создающий символ, например умляут (двойную точку), который объединяется с другим символом для формирования составного символа. Например, символ умляут-O () создается путем ввода неработающего ключа для символа умляут, а затем ввода ключа O. <br/> |
| [**\_сочетание клавиш WM**](wm-hotkey.md)           | Публикуется, когда пользователь нажимает на горячую клавишу, зарегистрированную функцией [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) . Сообщение помещается в верхней части очереди сообщений, связанной с потоком, который зарегистрировал горячую клавишу. <br/>                                                                                                                                                                                                                                                                                                                                 |
| [**WM \_ KeyDown**](wm-keydown.md)         | Отправляется в окно с фокусом клавиатуры при нажатии несистемного ключа. Несистемный ключ — это ключ, который нажимается, когда клавиша ALT не нажата. <br/>                                                                                                                                                                                                                                                                                                                                                                                                   |
| [**WM \_ KEYUP**](wm-keyup.md)             | Отправляется в окно с фокусом клавиатуры при освобождении несистемного ключа. Несистемный ключ — это ключ, который нажимается, когда клавиша ALT не нажата, или клавиша, которая нажата, когда окно имеет фокус клавиатуры. <br/>                                                                                                                                                                                                                                                                                                                          |
| [**WM \_ киллфокус**](wm-killfocus.md)     | Посылается окну непосредственно перед тем, как оно теряет фокус клавиатуры. <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**WM \_ SETFOCUS**](wm-setfocus.md)       | Посылается окну после того, как оно получило фокус клавиатуры. <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [**WM \_ сисдеадчар**](wm-sysdeadchar.md) | Передается в окно с фокусом клавиатуры, когда сообщение [**WM \_ сискэйдовн**](wm-syskeydown.md) преобразуется функцией [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) . [**WM \_ СИСДЕАДЧАР**](wm-sysdeadchar.md) указывает код неработающего системного ключа, который нажимается при удерживании клавиши ALT. <br/>                                                                                                                                                                                                        |
| [**WM \_ сискэйдовн**](wm-syskeydown.md)   | Отправляется в окно с фокусом клавиатуры, когда пользователь нажимает клавишу F10 (активирует строку меню) или удерживает клавишу ALT, а затем нажимает другой ключ. Это также происходит, когда ни один из окон в данный момент не имеет фокуса клавиатуры. в этом случае сообщение [**WM \_ сискэйдовн**](wm-syskeydown.md) отправляется в активное окно. Окно, получающее сообщение, может различать эти контексты путем проверки кода контекста в параметре *lParam* . <br/>                                                                             |
| [**WM \_ сискэйуп**](wm-syskeyup.md)       | Передается в окно с фокусом клавиатуры, когда пользователь отпускает клавишу, которая была нажата во время удержания клавиши ALT. Это также происходит, когда ни один из окон в данный момент не имеет фокуса клавиатуры. в этом случае сообщение [**WM \_ сискэйуп**](wm-syskeyup.md) отправляется в активное окно. Окно, получающее сообщение, может различать эти контексты путем проверки кода контекста в параметре *lParam* . <br/>                                                                                                                           |
| [**WM \_ уничар**](wm-unichar.md)         | Отправляется в окно с фокусом клавиатуры, когда сообщение [**WM \_ KeyDown**](wm-keydown.md) преобразуется функцией [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) . Сообщение [**WM \_ уничар**](wm-unichar.md) содержит код символа нажатой клавиши.<br/>                                                                                                                                                                                                                                                                        |



 

### <a name="structures"></a>Структуры



| Имя                                   | Описание                                                                                                              |
|----------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| [**хардвареинпут**](/windows/win32/api/winuser/ns-winuser-hardwareinput) | Содержит сведения о имитации сообщения, созданного устройством ввода, отличным от клавиатуры или мыши. <br/>  |
| [**ВХОДНОЙ**](/windows/win32/api/winuser/ns-winuser-input)                 | Содержит сведения, используемые для синтезирования событий ввода, например нажатия клавиш, перемещения мыши и щелчков мышью.<br/> |
| [**кэйбдинпут**](/windows/win32/api/winuser/ns-winuser-keybdinput)       | Содержит сведения о имитации события клавиатуры. <br/>                                                       |
| [**ластинпутинфо**](/windows/win32/api/winuser/ns-winuser-lastinputinfo) | Содержит время последнего входа.<br/>                                                                          |
| [**маусеинпут**](/windows/win32/api/winuser/ns-winuser-mouseinput)       | Содержит сведения о имитации события мыши.<br/>                                                           |



 

### <a name="constants"></a>Константы



| Имя                                           | Описание                                                                                                                                                                         |
|------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**Коды виртуальных клавиш**](virtual-key-codes.md) | Имена символьных констант, шестнадцатеричные значения и эквиваленты клавиш мыши или клавиатуры для кодов виртуальных клавиш, используемых системой. Коды перечислены в числовом порядке. <br/> |



 

 

