---
description: Барьер синхронизации позволяет нескольким потокам ожидать до тех пор, пока все потоки достигли определенной точки выполнения до того, как поток будет продолжен.
ms.assetid: 3A76E6F7-C38B-4843-9496-36F3C78B700C
title: Барьеры синхронизации
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1247d7ab3b20d4fe89763aea0429d742e8ce1c4d11030088316d4e9f3272556b
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118885986"
---
# <a name="synchronization-barriers"></a>Барьеры синхронизации

Барьер синхронизации позволяет нескольким потокам ожидать до тех пор, пока все потоки достигли определенной точки выполнения до того, как поток будет продолжен. Барьеры синхронизации нельзя совместно использовать в процессах.

Барьеры синхронизации полезны для поэтапных вычислений, в которых потоки, выполняющие один и тот же код в параллельном режиме, должны пройти один этап перед переходом к следующему.

Чтобы создать барьер синхронизации, вызовите функцию [**инитиализесинчронизатионбарриер**](/windows/desktop/api/SynchAPI/nf-synchapi-initializesynchronizationbarrier) и укажите максимальное число потоков и количество раз, которое поток должен прокрутить перед его блокированием. Затем запустите потоки, которые будут использовать барьер. После того как каждый поток завершит свою работу, он вызывает [**ентерсинчронизатионбарриер**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) для ожидания в барьере. Функция **ентерсинчронизатионбарриер** блокирует каждый поток до тех пор, пока количество потоков, блокируемых в барьере, не достигнет максимального числа потоков для барьера, после чего **ентерсинчронизатионбарриер** разблокирует все потоки. Функция **ентерсинчронизатионбарриер** возвращает **значение true** только для одного из потоков, которые входили в барьер, и возвращает **false** для всех остальных потоков.

Чтобы освободить барьер синхронизации, когда он больше не нужен, вызовите [**делетесинчронизатионбарриер**](/windows/desktop/api/SynchAPI/nf-synchapi-deletesynchronizationbarrier). Вызвать эту функцию можно сразу же после вызова [**ентерсинчронизатионбарриер**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) , так как эта функция гарантирует, что все потоки завершили работу с барьером до его освобождения.

Если барьер синхронизации никогда не будет удален, потоки могут указать в качестве **барьера синхронизации флаги " \_ \_ \_ без \_ удаления** " при входе в барьер. Этот флаг должен быть указан во всех потоках, использующих барьер. Если какой-либо поток не имеет значение, флаг игнорируется. Этот флаг заставляет функцию пропустить дополнительную работу, необходимую для безопасности удаления, что может повысить производительность. Обратите внимание, что удаление барьера, когда этот флаг действует, может привести к недопустимому доступу к обработке и одному или нескольким постоянным заблокированным потокам.

 

 



