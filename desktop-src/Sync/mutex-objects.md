---
description: Объект Mutex — это объект синхронизации, состояние которого равно сигнальному, если он не владеет ни одним потоком, и несигнальным, когда он принадлежит.
ms.assetid: eca0795a-1fd0-4034-9d61-9416670919cf
title: Мьютексные объекты
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e84c17ba3e99e888f7d1e9137a7f24a4d78ce2d4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103911235"
---
# <a name="mutex-objects"></a>Мьютексные объекты

*Объект Mutex* — это объект синхронизации, состояние которого равно сигнальному, если он не владеет ни одним потоком, и несигнальным, когда он принадлежит. Только один поток за раз может владеть объектом Mutex, имя которого берется из того факта, что он полезен при координации взаимоисключающего доступа к общему ресурсу. Например, чтобы предотвратить одновременную запись двух потоков в общую память, каждый поток ждет владения объектом Mutex перед выполнением кода, который обращается к памяти. После записи в общую память поток освобождает объект Mutex.

Поток использует функцию [**CreateMutex**](/windows/win32/api/synchapi/nf-synchapi-createmutexa) или [**креатемутексекс**](/windows/win32/api/synchapi/nf-synchapi-createmutexexa) для создания объекта мьютекса. Создание потока может запрашивать немедленное владение объектом мьютекса, а также указывать имя для объекта Mutex. Он также может создать неименованный мьютекс. Дополнительные сведения об именах для мьютексов, событий, семафоров и объектов таймера см. в разделе [межпроцессная синхронизация](interprocess-synchronization.md).

Потоки в других процессах могут открыть обработчик для существующего именованного объекта мьютекса, указав его имя в вызове функции [**опенмутекс**](/windows/win32/api/synchapi/nf-synchapi-openmutexw) . Чтобы передать маркер в неименованный мьютекс в другой процесс, используйте функцию [**дупликатехандле**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle) или наследование маркера «родители-потомки».

Любой поток с маркером для объекта Mutex может использовать одну из [функций ожидания](wait-functions.md) для запроса владения объектом Mutex. Если объект мьютекса принадлежит другому потоку, функция wait блокирует запрашивающий поток до тех пор, пока владеющий поток не освободит объект Mutex с помощью функции [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) . Возвращаемое значение функции Wait указывает, возвращается ли функция по некоторой причине, отличной от состояния мьютекса, для которого задан сигнал.

Если несколько потоков ожидают мьютекс, выбирается ожидающий поток. Не думайте порядок "первым поступил — первым обслужен" (FIFO). Внешние события, такие как режим ядра APC, могут изменять порядок ожидания.

После того как поток получает владение мьютексом, он может указать один и тот же мьютекс в повторяющихся вызовах [функций ожидания](wait-functions.md) , не блокируя его выполнение. Это предотвращает взаимную взаимоблокировку потока при ожидании того, что он уже владеет мьютексом. Чтобы освободить владение при таких обстоятельствах, поток должен вызвать [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) один раз для каждого случая, когда мьютекс удовлетворен условиями функции Wait.

Если поток завершается без освобождения владения объектом Mutex, объект Mutex считается брошенным. Ожидающий поток может получить владение брошенным объектом мьютекса, но функция Wait возвратит значение **Wait, \_** чтобы указать, что объект Mutex брошен. Брошенный объект мьютекса указывает на то, что произошла ошибка и что все общие ресурсы, защищенные объектом Mutex, находятся в неопределенном состоянии. Если поток продолжается, как будто объект мьютекса не был прерван, он больше не считается брошенным после того, как поток выйдет из состояния владения. Это восстанавливает нормальное поведение, если в функции Wait впоследствии задается обработчик объекта мьютекса.

Обратите внимание, что [объекты критической секции](critical-section-objects.md) обеспечивают синхронизацию, аналогичную той, которая предоставляется объектами Mutex, за исключением того, что критически важные объекты раздела могут использоваться только потоками одного процесса.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Использование объектов Mutex](using-mutex-objects.md)
</dt> </dl>

 

 
