---
description: Отменяет зарегистрированную операцию ожидания, выданную функцией RegisterWaitForSingleObject.
ms.assetid: ea700e55-fce7-46cd-bb96-0c129b429d46
title: Функция UnregisterWaitEx (Среадпуллегациаписет. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- UnregisterWaitEx
api_type:
- DllExport
api_location:
- Kernel32.dll
- API-MS-Win-Core-threadpool-l1-1-0.dll
- KernelBase.dll
- API-MS-Win-Core-threadpool-legacy-l1-1-0.dll
- API-MS-Win-DownLevel-Kernel32-l1-1-0.dll
- MinKernelBase.dll
ms.openlocfilehash: 4181aa43cb0c2844f99b7ad81b448271366eb2925740c25d400f891389efb129
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117765537"
---
# <a name="unregisterwaitex-function"></a>Функция UnregisterWaitEx

Отменяет зарегистрированную операцию ожидания, выданную функцией [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) .

## <a name="syntax"></a>Синтаксис


```C++
BOOL WINAPI UnregisterWaitEx(
  _In_     HANDLE WaitHandle,
  _In_opt_ HANDLE CompletionEvent
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*WaitHandle* \[ окне\]
</dt> <dd>

Дескриптор ожидания. Этот маркер возвращается функцией [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) .

</dd> <dt>

*Комплетионевент* \[ в необязательное\]
</dt> <dd>

Дескриптор объекта события, который должен быть сигнальным при отмене регистрации операции ожидания. Этот параметр может принимать значение **NULL**.

Если этот параметр имеет **недопустимое \_ \_ значение Handle**, функция ожидает завершения всех функций обратного вызова перед возвратом.

Если этот параметр имеет **значение NULL**, функция помечает таймер для удаления и сразу же возвращает значение. Однако большинство вызывающих объектов должны ждать завершения функции обратного вызова, чтобы они могли выполнить необходимую очистку.

Если вызывающий объект предоставляет это событие, функция завершается успешно или функция завершается с **ошибкой ввода-вывода с ошибками \_ \_**, не закрывайте событие до тех пор, пока не будет получен сигнал.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Если функция выполняется успешно, возвращается ненулевое значение.

Если функция выполняется неудачно, возвращается нулевое значение. Дополнительные сведения об ошибке можно получить, вызвав [**GetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror).

## <a name="remarks"></a>Комментарии

Невозможно сделать блокирующий вызов **UnregisterWaitEx** из функции обратного вызова для той же операции ожидания. В противном случае обратный вызов будет ожидать завершения. Как правило, при блокирующем вызове **UnregisterWaitEx** создается зависимость между текущим потоком и обратным вызовом, поэтому для блокирования вызова отмены регистрации в другой операции ожидания необходимо убедиться, что функции обратного вызова не зависят друг от друга и что вторая операция ожидания не выполняет блокирование вызова отмены регистрации для первой операции.

Будьте внимательны при выполнении блокирующего вызова **UnregisterWaitEx** в постоянном потоке. Если операция ожидания, для которой выполняется отмена регистрации, была создана с помощью **WT \_ ексекутеинперсистентсреад**, может возникнуть взаимоблокировка.

После выполнения неблокирующего вызова **UnregisterWaitEx** никакие новые функции обратного вызова, связанные с *WaitHandle* , не могут быть поставлены в очередь. Однако могут существовать ожидающие функции обратного вызова, уже поставленные в очередь рабочим потокам.

В некоторых случаях функция завершится с **ошибкой ввода- \_ вывода \_** , если *комплетионевент* имеет **значение NULL**. Это означает, что существуют необработанные функции обратного вызова. Эти обратные вызовы будут выполняться или находиться в процессе выполнения.

Если *комплетионевент* является обработчиком события, предоставленного вызывающим объектом, функция может завершиться успешно, завершиться с **ошибкой ввода- \_ вывода \_ с ошибками** или завершиться с другим кодом ошибки. Если функция завершается успешно или если функция завершается с **ошибкой \_ ввода-вывода в режиме \_ ожидания**, вызывающий объект всегда должен ждать, пока событие не закроет событие. Если функция завершается с другим кодом ошибки, нет необходимости ждать, пока событие не будет сигнальным, чтобы закрыть событие.

**Windows XP:** Если *комплетионевент* является дескриптором события, предоставленного вызывающим объектом, и функция завершается с **ошибкой ввода-вывода с ошибками \_ \_**, вызывающий объект должен подождать, пока событие не закроет событие. это поведение изменилось, начиная с Windows Vista.

Чтобы скомпилировать приложение, использующее эту функцию, определите **\_ Win32 \_ WinNT** как 0x0500 или более поздней версии. дополнительные сведения см. [в разделе использование Windows заголовков](../winprog/using-the-windows-headers.md).

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows \[Только классические приложения XP\]<br/>                                                                                                                                                                                                                                                                                                                    |
| Минимальная версия сервера<br/> | Windows Только для \[ настольных приложений сервера 2003\]<br/>                                                                                                                                                                                                                                                                                                           |
| Header<br/>                   | <dl> <dt>среадпуллегациаписет. h на Windows 8 и Windows Server 2012 (включая Windows. h);</dt> <dt>винбасе. h на Windows 7, Windows server 2008 R2, Windows Vista, Windows server 2008, Windows XP и Windows server 2003 (include Windows. h)</dt> </dl> |
| Библиотека<br/>                  | <dl> <dt>Kernel32.lib</dt> </dl>                                                                                                                                                                                                                                                                        |
| DLL<br/>                      | <dl> <dt>Kernel32.dll</dt> </dl>                                                                                                                                                                                                                                                                        |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject)
</dt> <dt>

[Функции синхронизации](synchronization-functions.md)
</dt> <dt>

[Группировка потоков в пул](../procthread/thread-pooling.md)
</dt> </dl>

 

 
