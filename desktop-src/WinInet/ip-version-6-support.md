---
title: Поддержка протокола IP версии 6
description: Начиная с версии IE7 и выше, WinINet поддерживает литералы IPv6 в имени узла и компонент центра URI.
ms.assetid: cbbb9f93-15b0-4017-ac39-8a396203532e
keywords:
- Поддержка протокола IP версии 6
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 67a024c792995780769a078c84b0493b7abba8647189fa2cee835d93dcb83770
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118113634"
---
# <a name="ip-version-6-support"></a>Поддержка протокола IP версии 6

Начиная с версии IE7 и выше, WinINet поддерживает литералы IPv6 в имени узла и компонент центра URI. WinINet также поддерживает использование литералов IPv6 в соответствующих частях протокола HTTP, например в заголовке Location.

## <a name="hostname-ipv6-literals-and-uri-components"></a>Литералы IPv6 имени узла и компоненты URI

WinINet реализует литералы IPv6 в соответствии со спецификациями в RFC 3513. Как указано в этом документе RFC, литералы IPv6 в URI должны быть заключены в квадратные скобки. Например, https:// \[ :: 1 \] /является допустимым URI IPv6; форма без квадратных скобок (недопустима https://::1/) . Однако имена узлов IPv6, которые не являются частью URI, не обязательно должны быть заключены в квадратные скобки. Любая форма допустима для WinINet. Например, ":: 1" и " \[ :: 1 \] " являются приемлемыми формами литералов имен узлов IPv6. Другие API, например API WinSock, также будут принимать обе формы. Поэтому приложения должны быть подготовлены для поддержки обеих форм литералов имен узлов IPv6.

## <a name="scope-id"></a>Идентификатор области

Литеральный адрес IPv6 в URI может включать идентификатор области. Идентификатор области может быть ИДЕНТИФИКАТОРом интерфейса, таким как \[ FE80:: 1% 1 \] . Стандарт URI, описанный в RFC 3986, не определяет синтаксис для идентификатора области, а URI считается неоднородным при наличии идентификатора области. Однако WinINet принимает идентификатор области в компоненте центра URI и в литерале имени узла IPv6.

Символ процента (%) в литеральном адресе IPv6 должен иметь процент экранирования при его наличии в URI. Например, область с ИДЕНТИФИКАТОРом FE80:: 2% 3 должна отображаться в URI как "https:// \[ FE80:: 2% 253 \] /", где %25 — это шестнадцатеричная кодировка символа процента (%). Если приложение получает универсальный код ресурса (URI) из API-интерфейса Winsock [**всааддресстостринг**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) , приложение должно добавить экранированную версию символа процента (%) в имени узла URI. Чтобы создать экранированную версию URI, приложения вызывают [**интернеткреатеурл**](/windows/desktop/api/Wininet/nf-wininet-internetcreateurla) с параметром *dwFlags* , для которого задано значение ICU, и имя узла IPv6, указанное в структуре компонентов URL-адреса, указанной в параметре *лпурлкомпонентс* . **\_ \_**

Для всех операций сокетов WinINet использует идентификатор области. Однако, поскольку идентификатор области имеет только значение локального узла, он не отправляется как часть заголовков протокола HTTP в запросе. Например, вызов [**интернетопенурл**](/windows/desktop/api/Wininet/nf-wininet-internetopenurla) вызывается со следующим URL-адресом в параметре *лпсзурл* .

``` syntax
https://[fec0::2%251]:80/path.htm
```

Часть идентификатора области URL-адреса удаляется с помощью WinINet при отправке запроса HTTP для этого URL-адреса. Запрос содержит следующие заголовки:

``` syntax
GET path.htm HTTP/1.1
Host: [fec0::2]
```

> [!Note]  
> WinINet не поддерживает реализации серверов. Кроме того, его не следует использовать из службы. для серверных реализаций или служб используйте [Microsoft Windows HTTP services (WinHTTP)](/windows/desktop/WinHttp/winhttp-start-page).

 

 

 