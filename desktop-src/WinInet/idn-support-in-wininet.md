---
title: Поддержка IDN в WinINet
description: Начиная с Windows Server 2008 и Windows Vista, часть узла URL-адреса в Юникоде преобразуется в международного доменного имени (IDN).
ms.assetid: 7c56908e-f6d0-48dc-9ac1-73f888fb7b6c
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 510b1bc8d2ab77534d7f5dac587f287d5e7095af
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104413525"
---
# <a name="idn-support-in-wininet"></a>Поддержка IDN в WinINet

Начиная с Windows Server 2008 и Windows Vista, часть узла URL-адреса в Юникоде преобразуется в международного доменного имени (IDN). Отдельные части кодировки URL-адресов в Юникоде также могут быть изменены конфигурациями, заданными приложением. Версии ANSI API WinINet продолжают отсылать URL-адрес по каналу, указанному приложением, однако версии API WinINet в Юникоде теперь соответствуют стандарту IDN (RFC3490) для кодировок URL-адресов.

По умолчанию при вводе URL-адреса в качестве параметра в формате Юникод часть узла, как для прокси-сервера, так и для прямых подключений, преобразуется в формат IDN. Приложение имеет возможность отключить форматирование узла IDN, задав параметр **Интернета \_ \_ IDN** . Преобразование узла IDN можно включить только для прямых или прокси-подключений с помощью флага **Internet \_ Flag \_ IDN \_ Direct** или **Internet \_ флаг \_ IDN \_ -прокси** с **\_ параметром Интернета \_ IDN**.

В следующем примере кода показано, как отключить преобразование узла IDN как для прокси-сервера, так и для прямых соединений.

``` syntax
DWORD IDN = 0; 
InternetSetOption( hRequest, 
                   INTERNET_OPTION_IDN,
                   &IDN, 
                   sizeof(DWORD) ); 
```

Если форматирование узла IDN отключено, приложение может указать нужную кодовую страницу, используя **\_ \_ кодовую страницу параметра Интернета**.

В следующем примере кода показано, как задать японскую кодовую страницу.

``` syntax
DWORD CP_SHIFT_JIS = 932;  // ANSI/OEM  Japanese, Shift-JIS
InternetSetOption( hRequest, 
                   INTERNET_OPTION_CODEPAGE,
                   &CP_SHIFT_JIS, 
                   Sizeof(DWORD) ); 
```

Часть пути URL-адреса по умолчанию кодируется в кодировке UTF8, а остальные сегменты URL-адреса, запроса или фрагмента преобразуются в системную кодовую страницу по умолчанию (CP \_ ACP).

В следующем примере показано, как указать кодовую страницу корейского языка для части пути URL-адреса.

``` syntax
DWORD CP_KOREAN = 949;   // ANSI/OEM Korean 
InternetSetOption( hRequest, 
                   INTERNET_OPTION_CODEPAGE_PATH,
                   &CP_KOREAN, 
                   sizeof(DWORD) );
```

В следующей таблице описаны параметры, поддерживающие IDN. Дополнительные сведения см. в разделе ["флаги параметров](option-flags.md) ".



| Параметр                            | Описание                                                                                                                                                                                                                     |
|-----------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_Страница параметров \_ Интернета        | Этот параметр задается в запросе или в обработчике соединения, чтобы указать схему кодировки кодовой страницы для части URL-адреса. Этот параметр игнорируется, если включен IDN.                                                      |
| \_ \_ путь к странице параметров Интернета \_  | Этот параметр задается в запросе, или обработчик соединения включает указанную схему кодировки для части пути URL-адреса. По умолчанию часть пути URL-адреса кодируется в кодировке UTF8.                                         |
| \_ \_ Вспомогательная страница параметра Интернета \_ | Установка этого параметра для запроса или маркера подключения включает указанную схему кодировки для дополнительной части URL-адреса. По умолчанию вспомогательная часть URL-адреса кодируется в системную кодовую страницу по умолчанию (CP \_ ACP). |
| \_параметр Интернета \_ IDN             | Этот параметр можно использовать в запросе или в обработчике соединения для включения или отключения преобразования узла IDN. Если IDN отключены, WinINet использует системную кодовую страницу по умолчанию для кодирования части узла или центра URL-адреса.       |



 

> [!Note]  
> WinINet не поддерживает реализации серверов. Кроме того, его не следует использовать из службы. Для серверных реализаций или служб используйте [службы Microsoft Windows HTTP Services (WinHTTP)](/windows/desktop/WinHttp/winhttp-start-page).

 

 

 