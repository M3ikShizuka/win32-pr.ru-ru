---
title: Асинхронная операция
description: В асинхронном режиме приложение может выполнять любую функцию, которая включает значение контекста в качестве одного из параметров, и может продолжить выполнение других команд или функций, пока приложение ожидает завершения задачи.
ms.assetid: 4b8ade00-deb3-4d9f-9ceb-5ba3296c8c68
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2e494b79b28b9aaf005fc6b1790d0cf84b07ceade6606f03ce03198426ac33d5
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118562096"
---
# <a name="asynchronous-operation"></a>Асинхронная операция

Время, которое требуется приложению для доступа к Интернет-ресурсу, зависит от ряда факторов, таких как используемое подключение, сервера, на котором расположен ресурс, и от количества пользователей, пытающихся получить доступ к ресурсу. Для приложений, которые загружают несколько ресурсов или обрабатывали несколько задач (включая одну или несколько загрузок), ожидание завершения каждого скачивания перед переходом к следующей задаче может оказаться чрезвычайно неэффективным. Чтобы уменьшить количество времени, в течение которого приложение должно ожидать, многие функции WinINet могут работать асинхронно.

В асинхронном режиме приложение может выполнять любую функцию, которая включает значение контекста в качестве одного из параметров, и может продолжить выполнение других команд или функций, пока приложение ожидает завершения задачи. Пока задача завершается, функция обратного вызова состояния, предоставляемая приложением, получает уведомления о ходе выполнения задачи и о ее завершении. В настоящее время функция обратного вызова состояния может вызывать другие функции или выполнять другие обязательные задачи, которые зависят от завершения задачи.

Нет афинити потока обратного вызова при асинхронном вызове WinINet: вызов может начаться из одного потока, но любой другой поток может получить обратный вызов.

-   [Преимущества](#benefits)
-   [Сценарии](#scenarios)
-   [См. также](#related-topics)

## <a name="benefits"></a>Преимущества

Существует несколько преимуществ для работы в асинхронном режиме. Пример.

-   Одновременное скачивание нескольких Интернет ресурсов.

    Можно одновременно подключиться к нескольким интернет ресурсам и скачать их по мере их появления.

-   Повышение производительности приложения.

    Приложение, использующее функции WinINet, асинхронно не ждет завершения запроса, поэтому приложение может выполнять другие задачи, не зависящие от запроса, тем самым улучшая общую производительность приложения.

-   Отслеживайте ход загрузки.

    Функция обратного вызова состояния получает уведомления во время обработки запроса. При необходимости приложение может использовать сведения, предоставляемые этой функцией обратного вызова состояния, чтобы информировать пользователя о ходе выполнения операции или прерывании запросов, выполнение которых занимает слишком много времени.

## <a name="scenarios"></a>Сценарии

Предположим, ваше приложение должно загрузить цены кофе из Довнфалл кофе & чай, а также четвертый сайт кофе и сравнить цены. Четвертый сайт кофе обычно имеет более медленное время ответа, поэтому приложение должно сначала загрузить информацию из Довнфалл кофе & чай.

Разрабатывается две версии приложения. Один работает синхронно, сначала Скачайте цены с сайта Довнфалл кофе & чай, а затем цены с четвертого сайта кофе. Второй работает асинхронно, отправляя запросы на оба сайта и загружая цены, когда они станут доступны.

В следующей таблице показано, что произойдет, если четвертый сайт кофе быстрее в определенный день.



| Событие                                                            | Синхронная версия                        | Асинхронная версия                                     |
|------------------------------------------------------------------|--------------------------------------------|----------------------------------------------------------|
| Начать                                                            | Отправить запрос в Довнфалл кофе &      | Отправка запросов в Довнфалл кофе & чай и четвертый кофе |
| Запрос от асинхронной версии к четвертой кофе завершена | Ожидание                                    | Загрузка цен с четвертого кофе                       |
| Запрос на Довнфаллный чай & кофе завершена                       | Загрузка цен с Довнфалл кофе & чай | Загрузка цен с Довнфалл кофе & чай               |
| После скачивания цен Довнфалл кофе & чай              | Отправить запрос в четвертую кофе              | Сравнение цен                                           |
| Сравнение асинхронной версии завершено                      | Ожидание                                    | Операция завершена                                       |
| Запрос от синхронной версии к четвертой кофе завершена  | Загрузка цен с четвертого кофе         | Недоступно                                                      |
| После скачивания цен четвертой кофе                      | Сравнение цен                             | Недоступно                                                      |
| Сравнение синхронной версии завершено                       | Операция завершена                         | Недоступно                                                      |



 

Другим примером может служить веб-браузер, например Microsoft Internet Explorer. Когда браузер загружает страницу, часто требуется загрузить другие ресурсы, такие как изображения и звуковые файлы. В асинхронном режиме страница и связанные с ней ресурсы могут запрашиваться одновременно и загружаться по мере их появления, а не запрашивать и скачивать страницу и каждый ресурс по одному за раз.

## <a name="related-topics"></a>Связанные разделы

Ниже приведены связанные ссылки.

Учебники

-   [Создание функций обратного вызова состояния](creating-status-callback-functions.md)

Функции, необходимые для настройки асинхронной операции

-   [**интернетопен**](/windows/desktop/api/Wininet/nf-wininet-internetopena)
-   [**интернетсетстатускаллбакк**](/windows/desktop/api/Wininet/nf-wininet-internetsetstatuscallback)

Функции, которые могут использоваться асинхронно

-   [**фтпкреатедиректори**](/windows/desktop/api/Wininet/nf-wininet-ftpcreatedirectorya)
-   [**фтпделетефиле**](/windows/desktop/api/Wininet/nf-wininet-ftpdeletefilea)
-   [**фтпфиндфирстфиле**](/windows/desktop/api/Wininet/nf-wininet-ftpfindfirstfilea)
-   [**фтпжеткуррентдиректори**](/windows/desktop/api/Wininet/nf-wininet-ftpgetcurrentdirectorya)
-   [**фтпжетфиле**](/windows/desktop/api/Wininet/nf-wininet-ftpgetfilea)
-   [**фтпопенфиле**](/windows/desktop/api/Wininet/nf-wininet-ftpopenfilea)
-   [**фтппутфиле**](/windows/desktop/api/Wininet/nf-wininet-ftpputfilea)
-   [**фтпремоведиректори**](/windows/desktop/api/Wininet/nf-wininet-ftpremovedirectorya)
-   [**фтпренамефиле**](/windows/desktop/api/Wininet/nf-wininet-ftprenamefilea)
-   [**фтпсеткуррентдиректори**](/windows/desktop/api/Wininet/nf-wininet-ftpsetcurrentdirectorya)
-   [**гоферфиндфирстфиле**](/windows/desktop/api/Wininet/nf-wininet-gopherfindfirstfilea)
-   [**гоферопенфиле**](/windows/desktop/api/Wininet/nf-wininet-gopheropenfilea)
-   [**хттпендрекуест**](/windows/desktop/api/Wininet/nf-wininet-httpendrequesta)
-   [**хттпопенрекуест**](/windows/desktop/api/Wininet/nf-wininet-httpopenrequesta)
-   [**хттпсендрекуестекс**](/windows/desktop/api/Wininet/nf-wininet-httpsendrequestexa)
-   [**интернетконнект**](/windows/desktop/api/Wininet/nf-wininet-internetconnecta)
-   [**интернетопенурл**](/windows/desktop/api/Wininet/nf-wininet-internetopenurla)
-   [**интернетреадфиликс**](/windows/desktop/api/Wininet/nf-wininet-internetreadfileexa)

> [!Note]  
> Функции [**фтпкреатедиректори**](/windows/desktop/api/Wininet/nf-wininet-ftpcreatedirectorya), [**фтпремоведиректори**](/windows/desktop/api/Wininet/nf-wininet-ftpremovedirectorya), [**фтпсеткуррентдиректори**](/windows/desktop/api/Wininet/nf-wininet-ftpsetcurrentdirectorya), [**фтпжеткуррентдиректори**](/windows/desktop/api/Wininet/nf-wininet-ftpgetcurrentdirectorya), [**FtpDeleteFile**](/windows/desktop/api/Wininet/nf-wininet-ftpdeletefilea)и [**FtpRenameFile**](/windows/desktop/api/Wininet/nf-wininet-ftprenamefilea) используют значение контекста, указанное в вызове функции [**InternetConnect**](/windows/desktop/api/Wininet/nf-wininet-internetconnecta) .

 

> [!Note]  
> WinINet не поддерживает реализации серверов. Кроме того, его не следует использовать из службы. для серверных реализаций или служб используйте [Microsoft Windows HTTP services (WinHTTP)](/windows/desktop/WinHttp/winhttp-start-page).

 

 

 