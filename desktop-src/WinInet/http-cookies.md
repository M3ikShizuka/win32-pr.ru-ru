---
title: Файлы cookie HTTP
description: Файлы cookie HTTP предоставляют серверу механизм для хранения и извлечения сведений о состоянии в системе клиентского приложения.
ms.assetid: c3574592-572f-4fde-adfa-aed3e862f13f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f0ba5b2d3917ea8f140e334f5f78b1bd730908d25506d9023667403410833c80
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118113718"
---
# <a name="http-cookies"></a>Файлы cookie HTTP

Файлы cookie HTTP предоставляют серверу механизм для хранения и извлечения сведений о состоянии в системе клиентского приложения. Этот механизм позволяет веб-приложениям сохранять сведения о выбранных элементах, предпочтениях пользователей, сведения о регистрации и другие сведения, которые можно получить позже.

## <a name="cookie-related-headers"></a>Заголовки Cookie-Related

Есть два заголовка: Set-Cookie и cookie, связанные с файлами cookie. Заголовок Set-Cookie отправляется сервером в ответ на HTTP-запрос, который используется для создания файла cookie в системе пользователя. Заголовок Cookie включается клиентским приложением с HTTP-запросом, отправленным на сервер, если имеется файл cookie с совпадающим доменом и путем.

### <a name="set-cookie-header"></a>Заголовок Set-Cookie

Заголовок ответа Set-Cookie использует следующий формат:

``` syntax
Set-Cookie: <name>=<value>[; <name>=<value>]...
[; expires=<date>][; domain=<domain_name>]
[; path=<some_path>][; secure][; httponly]
```

Одна или несколько строк строки (разделенных точкой с запятой), которые следуют за значением *имени* шаблона, =  должны быть добавлены в заголовок ответа Set-Cookie. Сервер может использовать эти последовательности строк для хранения данных в системе клиента.

Дата истечения срока действия задается в формате срок действия =*Дата*, где *Дата* — Дата истечения срока действия по Гринвичу (GMT). Если дата окончания срока действия не задана, то срок действия файла cookie истекает после завершения сеанса Интернета. В противном случае файл cookie сохраняется в кэше до даты окончания срока действия. Дата должна иметь следующий формат:

*день*, *дд* - *МММ* - *гггг* *чч*:*мм*:*СС* GMT

<dl> <dt>

<span id="DAY"></span><span id="day"></span>*Ежедневные*
</dt> <dd>

День недели (Sun, Пн, вторник, среда, четверг, пятница, Кот).

</dd> <dt>

<span id="DD"></span><span id="dd"></span>*DDL*
</dt> <dd>

День месяца (например, 01 для первого дня месяца).

</dd> <dt>

<span id="MMM"></span><span id="mmm"></span>*МСЕК*
</dt> <dd>

Аббревиатура из трех букв для месяца (Jan, фев, Mar, Апр, Май, июн, Июл, Авг, Sep, Oct, ноя, дек).

</dd> <dt>

<span id="YYYY"></span><span id="yyyy"></span>*ГГГГ*
</dt> <dd>

Год.

</dd> <dt>

<span id="HH"></span><span id="hh"></span>*ФОРМАТЕ*
</dt> <dd>

Значение часа в воинское время (например, 22-10:00 P.M.).

</dd> <dt>

<span id="MM"></span><span id="mm"></span>*ММ*
</dt> <dd>

Значение минуты.

</dd> <dt>

<span id="SS"></span><span id="ss"></span>*НН*
</dt> <dd>

Второе значение в вычитании.

</dd> </dl>

Указание доменного имени с помощью шаблона домен =*доменное \_ имя* является необязательным для постоянных файлов cookie и используется для обозначения конца домена, для которого действителен файл cookie. Файлы cookie сеанса, указывающие домен, отклоняются. Если указанное окончание доменного имени совпадает с запросом, файл cookie пытается сопоставить путь, чтобы определить, следует ли отправлять файл cookie. Например, если доменное имя заканчивается на. microsoft.com, будут проверены запросы к home.microsoft.com и support.microsoft.com, чтобы увидеть, соответствует ли указанный шаблон запросу. Имя домена должно содержать по крайней мере два или три периода, чтобы запретить установку файлов cookie для широко используемых конечных имен доменов, таких как. com,. edu и co.jp. Допустимые доменные имена будут похожи на. microsoft.com,. someschool.edu и. someserver.co.jp. Только узлы в указанном домене могут устанавливать файл cookie для домена.

Задание пути с использованием шаблона Path =*часть \_ path* является необязательным и может использоваться для указания подмножества URL-адресов, для которых действителен файл cookie. Если указан путь, то файл cookie считается допустимым для всех запросов, соответствующих этому пути. Например, если указан путь/ексампле, то запросы с путями/ексамплекоде и code.htm/ексампле/будут совпадать. Если путь не указан, предполагается, что путь является путем к ресурсу, связанному с заголовком Set-Cookie.

Файл cookie также может быть помечен как безопасный, что указывает, что файл cookie может быть отправлен только на HTTPS-серверы.

Наконец, файл cookie можно пометить как HttpOnly (атрибуты не учитывают регистр), чтобы указать, что файл cookie не является сценарным и не должен быть отображен клиентскому приложению по соображениям безопасности. в Windows интернете это означает, что файл cookie нельзя извлечь с помощью функции **интернетжеткукие** .

### <a name="cookie-header"></a>Заголовок файла cookie

Заголовок Cookie включается в любые HTTP-запросы, имеющие файл cookie, домен и путь которого соответствуют запросу. Заголовок Cookie имеет следующий формат:

``` syntax
Cookie: <name>=<value> [;<name>=<value>]...
```

Одна или несколько строковых последовательностей, использующих  = *значение* имени формата, содержат сведения, заданные в файле cookie.

## <a name="generating-cookies"></a>Создание файлов cookie

существует три метода создания файлов cookie для microsoft Internet Explorer: с помощью JScript майкрософт, функций WinINet и сценария CGI. Все методы должны задавать сведения, включенные в заголовок Set-Cookie.

### <a name="generating-a-cookie-using-the-dhtml-object-model"></a>Создание файла cookie с помощью объектной модели DHTML

С помощью объектной модели Dynamic HTML (DHTML) можно задать файлы cookie, вызвав свойство **cookie** объекта документа, как показано в следующем примере.

``` syntax
<SCRIPT language="JavaScript">
<!--
    document.cookie = "SomeValueName = Some_Value";
-->
</SCRIPT>
```

### <a name="generating-a-cookie-using-the-wininet-functions"></a>Создание файла cookie с помощью функций WinInet

Файлы cookie могут создаваться приложениями с помощью функции [**интернетсеткукие**](/windows/desktop/api/Wininet/nf-wininet-internetsetcookiea) . Дополнительные сведения см. [в разделе Задание файла cookie](managing-cookies.md).

### <a name="generating-a-cookie-using-a-cgi-script"></a>Создание файла cookie с помощью сценария CGI

Файлы cookie создаются путем включения заголовка Set-Cookie в составе сценария CGI, входящего в HTTP-ответ на запрос.

В следующем примере показан сценарий CGI, который включает заголовок Set-Cookie с помощью Perl.

``` syntax
print "Set-Cookie:Test=test_value; 
      expires=Sat, 01-Jan-2000 00:00:00 GMT;
      path=/;"
```

> [!Note]  
> WinINet не поддерживает реализации серверов. Кроме того, его не следует использовать из службы. для серверных реализаций или служб используйте [Microsoft Windows HTTP services (WinHTTP)](/windows/desktop/WinHttp/winhttp-start-page).

 

 

 