---
description: В этом разделе содержится список сообщений в интерфейсе поставщика услуг телефонии (ТСПИ).
ms.assetid: 3d8bf980-81d6-49db-954f-af72458365dc
title: Сообщения ТСПИ
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f5772a1ccb0c07f03b2a17348ecf5e4834bb97a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105674255"
---
# <a name="tspi-messages"></a>Сообщения ТСПИ

В этом разделе содержится список сообщений в интерфейсе поставщика услуг телефонии (ТСПИ). Эти сообщения используются для уведомления TAPI о возникновении асинхронных событий, которые могут произойти в рамках поставщика услуг. Поставщик услуг передает эти события в TAPI, вызывая функцию обратного вызова [**линивент**](/windows/win32/api/tspi/nc-tspi-lineevent) или [**фонивент**](/windows/desktop/api/tspi/nc-tspi-phoneevent) , в зависимости от того, сообщает ли поставщик услуг о событии на линии, вызове или телефонном устройстве. Процедура **линивент** для отчетов о событиях, происходящих в строке или вызове, предоставляется поставщику услуг во время открытия строки с помощью функции [**тспи \_ линеопен**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) . Процедура **фонивент** для отчетов о событиях, происходящих на телефоне, предоставляется с помощью функции [**тспи \_ фонеопен**](/windows/win32/api/tspi/nf-tspi-tspi_phoneopen) .

Эти ненавязчивые события отменяются TAPI в том смысле, что они не являются прямым ответом на любой запрос. Эти события отличаются от отчетов о завершении запросов, выполняемых TAPI. Такие события завершения выводятся через функцию обратного вызова [**асинхронного \_ завершения**](/windows/win32/api/tspi/nc-tspi-async_completion) .

Профили параметров для процедур с неиспользуемыми событиями включают параметры, определяющие соответствующий объект, для которого сообщается событие (Телефон, строка или вызов). Идентификация выполняется в виде непрозрачного маркера, точная интерпретация которого не публикуется ТСПИ. TAPI внутренне определяет связь между этими непрозрачными дескрипторами и любыми структурами данных, используемыми для представления устройств.

Профиль параметров для процедур нестрогого события также включает параметр Message, определяющий тип сообщения. Каждый тип сообщений имеет соответствующее определение, которое определяет включаемые дескрипторы, а также другие параметры и их значения. Между сообщениями, отображаемыми на уровне ТСПИ, и на уровне TAPI существует очень строгая корреспонденция. Ниже приведены общие правила корреспонденции.

-   Набор сообщений практически идентичен. Если сообщения совпадают, то на уровне ТСПИ используется одно и то же имя и значение сообщения.
-   Дескрипторы, отображаемые на уровне ТСПИ, являются непрозрачными типами, определенными спецификацией ТСПИ. Эти типы (и их интерпретация) отличаются от этих типов на уровне TAPI, хотя они ссылаются на один класс устройства. Например, когда сообщение TAPI включает в себя обработчик ХЛИНЕ, соответствующее сообщение ТСПИ обычно включает в себя маркер [**хтапилине**](htapiline.md) .
-   Нет *двкаллбаккинстанце* данных, передаваемых обратному вызову.
-   Параметры *dwParam1*, *dwParam2* и *dwParam3* , как правило, ИДЕНТИЧНЫ соответствующим параметрам для сообщения TAPI.
-   Сообщения, ориентированные на строки и вызовы, передаются в другую процедуру обратного вызова, чем сообщения, ориентированные на телефон.

Для каждого сообщения в этом разделе перечислены следующие элементы.

-   Назначение сообщения
-   Процедура обратного вызова, к которой передается сообщение
-   Описание параметров сообщения
-   Необязательные комментарии об использовании сообщения
-   Необязательные ссылки на другие функции, сообщения и структуры данных
-   Необязательные комментарии, сравнивающие это сообщение с интерфейсом TAPI

Некоторые сообщения используются для уведомления TAPI об изменении состояния объекта. Эти сообщения предоставляют маркер непрозрачного объекта TAPI и указывает, какой элемент состояния изменился. Затем TAPI может вызвать соответствующую функцию "Get Status" объекта, чтобы получить полное состояние объекта.

При возникновении события сообщение может быть или не отправлено в TAPI. Для некоторых типов событий, таких как изменение состояния, TAPI указывает набор изменений состояния, в которых он заинтересован. Поставщик услуг должен ограничить события сообщений о состоянии и сообщения об изменении состояния, содержащиеся в этом наборе. Поставщик услуг не должен соответствовать этому ограничению. Иными словами, он может сообщать больше изменений, чем строго требуется. Однако он должен попытаться наблюдать за пределами производительности.

\_Сообщение ответа строки не используется на уровне тспи. Завершение асинхронного запроса сообщается с помощью обратного вызова [**асинхронного \_ завершения**](/windows/win32/api/tspi/nc-tspi-async_completion) .

\_Ответное сообщение для телефона не используется на уровне тспи. Завершение асинхронного запроса сообщается с помощью обратного вызова [**асинхронного \_ завершения**](/windows/win32/api/tspi/nc-tspi-async_completion) .

Дополнительные сведения см. в следующих статьях:

-   [Сообщения устройства ТСПИ Line](tspi-line-device-messages.md)
-   [Сообщения устройства ТСПИ Phone](tspi-phone-device-messages.md)

 

 
