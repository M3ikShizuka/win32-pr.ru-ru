---
description: Состояние сеанса или вызова указывает текущее состояние сеанса, например &\# 0034; предложение&\# 0034; или &\# 0034; connected. &\# 0034; Правильная работа большинства приложений TAPI крайне важна для правильной обработки сведений о состоянии.
ms.assetid: a6a49b77-4e9b-4f23-bfe6-26f26549b18f
title: Состояние
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 88fb9c482fcb9e432b5bfb5d36f77cd09f538086
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105684525"
---
# <a name="state"></a>Состояние

Состояние сеанса или вызова указывает текущее состояние сеанса, например "предложение" или "подключено". Правильная работа большинства приложений TAPI крайне важна для правильной обработки сведений о состоянии. Например, операция ответа может быть выполнена только в предложенном сеансе, но перемещение завершится ошибкой, если сеанс находится в этом состоянии.

Состояние сеанса изменяется в результате событий. События могут быть запрошены или незапрошенными. *Запрашиваемые события* вызываются приложением, управляющим сеансом, например при вызове операции сеанса TAPI. *Незапрошенные события* вызываются коммутатором, телефонной сетью, пользователем нажатием кнопок на локальном телефоне или действиями удаленной стороны.

Каждый раз, когда поставщик услуг обнаруживает изменение состояния сеанса, он сообщает об изменении в TAPI и TAPI выдает уведомление о событии всем приложениям-владельцам и мониторам. Приложение должно соответствующим образом реагировать на эти уведомления. Сведения об управлении событиями, о которых сообщается в приложении, см. в уведомлении о событии в разделе [Инициализация TAPI](tapi-initialization.md) .

Приложение должно всегда обрабатывать уведомления о событиях состояния. Допустимые переходы состояния для одной физической конфигурации могут быть недопустимыми для другой. Например, рассмотрим строку, которая физически завершается как на компьютере, так и на отдельном наборе телефонов, создавая конфигурацию линий сторон между компьютером и набором телефонов. Приложение, работающее на компьютере, может не узнать о действиях телефонного набора. То есть строка может быть использована без уведомления поставщика услуг. Приложение, которое пытается выполнить исходящий вызов, будет выполняться при выделении внешнего вида вызова из TAPI, но это приведет к совместному использованию активного вызова в строке. Некоторая Отправка строки набора DTMF без предварительной проверки на гудок может не привести к предполагаемому (или вежливо) поведению.

Приложение не должно считаться жестким ходом выполнения из одного состояния в другое. События состояния прибывают и пересылаются асинхронно, и уведомления могут быть не получены в прогнозируемом порядке. Таким образом, уведомления о состоянии вызова следует рассматривать как сообщать приложению о новом состоянии вызова, а не о переходах между двумя состояниями.

Эти сведения должны быть предоставлены всем поставщикам услуг телефонии.

* * TAPI 2. x: * *[**линежеткаллстатус**](/windows/win32/api/tapi/nf-tapi-linegetcallstatus), [**линежеткаллинфо**](/windows/win32/api/tapi/nf-tapi-linegetcallinfo), [**строка \_ каллстате**](./line-callstate.md) сообщение, [ \_ константы линекаллстате](./linecallstate--constants.md)

**TAPI 3. x: **[**иткаллинфо:: Get \_ каллинфолонг**](/windows/desktop/api/tapi3if/nf-tapi3if-itcallinfo-get_callinfolong) (** член CIL \_ Каллид** [**каллинфо \_ Long**](/windows/desktop/api/Tapi3if/ne-tapi3if-callinfo_long)), уведомление [**иткаллстативент**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) , перечислитель [**\_ состояния вызова**](/windows/desktop/api/Tapi3if/ne-tapi3if-call_state)

 

 
