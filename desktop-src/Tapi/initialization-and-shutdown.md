---
description: Чтобы приложение использовало любую из интерфейсов TAPI, поддерживающих 30 дополнительных телефонных функций, ему требуется подключение к TAPI, через которое он может получить сообщения.
ms.assetid: c0211f64-4f73-4348-ae49-9a898d3aa093
title: Инициализация и завершение работы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6831b8cfda84ac564450caec554191198fd4c21f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673413"
---
# <a name="initialization-and-shutdown"></a>Инициализация и завершение работы

Чтобы приложение использовало любой из 30 дополнительных функций телефона TAPI, ему требуется подключение к TAPI, через которое он может получить сообщения. Приложение устанавливает это подключение с помощью функции [**фонеинитиализикс**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) . В этой функции приложение указывает механизм уведомления, по которому TAPI информирует приложение об изменениях в состоянии телефона и асинхронном завершении телефонных функций.

Функция [**фонеинитиализикс**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) возвращает приложению два фрагмента информации: *обработчик приложения* и число телефонных устройств. Маркер приложения представляет использование приложения TAPI. Функции TAPI, использующие дескрипторы телефона, не нуждаются в дескрипторе приложения, так как этот дескриптор является производным от указанного дескриптора телефона.

Второй фрагмент данных, возвращаемых функцией [**фонеинитиализикс**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) , — число телефонных устройств, доступных для TAPI. Телефонные устройства идентифицируются по идентификатору устройства (*идентификатору устройства*). Допустимые идентификаторы устройств находятся в диапазоне от нуля до количества телефонных устройств минус единица. Например, если **фонеинитиализикс** сообщает о наличии двух телефонных устройств в системе, допустимые идентификаторы телефонных устройств: 0 и 1. После завершения работы приложения с помощью функций телефона TAPI вызывает [**фонешутдовн**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown), передавая его обработчику приложения, чтобы завершить использование TAPI. Это позволяет TAPI освобождать все ресурсы, назначенные приложению.

Приложения не должны вызывать [**фонеинитиализикс**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) , не открывая телефон (по крайней мере для мониторинга). Если приложение не отслеживает и не использует какие-либо устройства, оно должно вызывать [**фонешутдовн**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) , чтобы ресурсы памяти, выделенные библиотекой динамической КОМПОНОВКИ (TAPI), могли быть освобождены в случае ненадобности, а сама библиотека может быть выгружена из памяти, пока не потребуется.

Как [**фонеинитиализикс**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) , так и [**фонешутдовн**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) работают синхронно. То есть эти функции возвращают сведения об успешном или неудачном завершении и никогда не возвращают идентификатор асинхронного запроса.

 

 



