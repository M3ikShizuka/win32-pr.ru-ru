---
description: '\_Сообщение КАЛЛСТАТЕ линии TAPI отправляется при изменении состояния указанного вызова.'
ms.assetid: 7b24e3c3-bc69-488b-a698-cf17875bc3c5
title: Сообщение LINE_CALLSTATE (TAPI. h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 90d82dfb5f0d5e306085ecd2d7f29270d19c2c9c101e30ac547fe246b7e6fddb
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120012574"
---
# <a name="line_callstate-message"></a>Строка \_ сообщения каллстате

Сообщение **\_ КАЛЛСТАТЕ линии** TAPI отправляется при изменении состояния указанного вызова. Как правило, несколько таких сообщений получаются в течение времени существования вызова. Приложения получают уведомления о новых входящих вызовах с помощью этого сообщения; новый вызов находится в состоянии *предложения* . Приложение может использовать [**линежеткаллстатус**](/windows/desktop/api/Tapi/nf-tapi-linegetcallstatus) для получения более подробных сведений о текущем состоянии вызова.


```C++
            
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*хдевице* 
</dt> <dd>

Маркер вызова.

</dd> <dt>

*двкаллбаккинстанце* 
</dt> <dd>

Экземпляр обратного вызова, указанный при открытии линии вызова.

</dd> <dt>

*dwParam1* 
</dt> <dd>

Новое состояние вызова. Этот параметр должен быть одной и только одной из следующих [**\_ констант линекаллстате**](linecallstate--constants.md).



| dwParam1                                                                                                                                                                                             | Значение                                                                                                                                                                          |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="LINECALLSTATE_BUSY"></span><span id="linecallstate_busy"></span><dl> <dt>**ЛИНЕКАЛЛСТАТЕ \_ занят**</dt> </dl>                         | *dwParam2* содержит сведения о режиме занятости. Этот параметр использует одну из [**\_ констант линебусимоде**](linebusymode--constants.md).<br/>                          |
| <span id="LINECALLSTATE_CONNECTED"></span><span id="linecallstate_connected"></span><dl> <dt>**ЛИНЕКАЛЛСТАТЕ \_ подключен**</dt> </dl>          | *dwParam2* содержит сведения о режиме подключения. Этот параметр использует одну из [**\_ констант линеконнектедмоде**](lineconnectedmode--constants.md).<br/>           |
| <span id="LINECALLSTATE_DIALTONE"></span><span id="linecallstate_dialtone"></span><dl> <dt>**ЛИНЕКАЛЛСТАТЕ \_ диалтоне**</dt> </dl>             | *dwParam2* содержит сведения о тоновом режиме. Этот параметр использует одну из [**\_ констант линедиалтонемоде**](linedialtonemode--constants.md).<br/>             |
| <span id="LINECALLSTATE_OFFERING"></span><span id="linecallstate_offering"></span><dl> <dt>**\_предложение линекаллстате**</dt> </dl>             | *dwParam2* содержит сведения о режиме подключения. Этот параметр использует одну из [**\_ констант линеофферингмоде**](lineofferingmode--constants.md).<br/>             |
| <span id="LINECALLSTATE_SPECIALINFO"></span><span id="linecallstate_specialinfo"></span><dl> <dt>**ЛИНЕКАЛЛСТАТЕ \_ спеЦиалинфо**</dt> </dl>    | *dwParam2* содержит сведения о режиме специальных сведений. Этот параметр использует одну из [**\_ констант линеспеЦиалинфо**](linespecialinfo--constants.md).<br/> |
| <span id="LINECALLSTATE_DISCONNECTED"></span><span id="linecallstate_disconnected"></span><dl> <dt>**ЛИНЕКАЛЛСТАТЕ \_ отключен**</dt> </dl> | *dwParam2* содержит сведения о режиме отключения. Этот параметр использует одну из [**\_ констант линедисконнектмоде**](linedisconnectmode--constants.md).<br/>        |



 

</dd> <dt>

*dwParam2* 
</dt> <dd>

Сведения, зависящие от состояния вызова. См. *dwParam1*.

> [!Note]  
> В случаях, когда подходит *отложенный* ответ, используйте линедисконнектмоде \_ темпфаилуре. Если подходит ответ *добавлен* , используйте линедисконнект \_ blocked. Дополнительные сведения см. в [**разделе \_ константы линедисконнектмоде**](linedisconnectmode--constants.md).

 

Если *dwParam1* является Линекаллстате \_ , *dwParam2* содержит параметр *хконфкалл* родительского вызова конференции, участником которой является субъект *хкалл* . Если вызов, указанный в *dwParam2* , ранее не рассматривался приложением как родительский вызов конференции (*хконфкалл*, приложение должно сделать это в результате этого сообщения. Если приложение не имеет маркера для родительского вызова конференции (так как ранее он назывался [**линедеаллокатекалл**](/windows/desktop/api/Tapi/nf-tapi-linedeallocatecall) на этом маркере), *DwParam2* имеет значение **null**.

</dd> <dt>

*dwParam3* 
</dt> <dd>

Если значение равно нулю, этот параметр указывает на отсутствие изменений в привилегии приложения для вызова.

Если не равен нулю, он указывает привилегию приложения для вызова. Это происходит в следующих ситуациях: (1) при первом присвоении приложению маркера этого вызова; (2), если приложение является целью перенаправления вызова (даже если приложение уже было владельцем вызова). Этот параметр использует одну из следующих [**\_ констант линекаллпривилеже**](linecallprivilege--constants.md).

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Нет возвращаемого значения.

## <a name="remarks"></a>Remarks

Это сообщение отправляется в любое приложение, которое имеет обработчик для вызова. Сообщение **Line \_ каллстате** также уведомляет приложения, которые отслеживают вызовы в строке о существовании и состоянии исходящих вызовов, установленных другими приложениями, или вручную (например, на подключенном телефонном устройстве). Состояние вызова таких вызовов отражает фактическое состояние вызова, которое не является *предложением*. Изучив состояние вызова, приложение может определить, является ли вызов входящим вызовом, на который необходимо ответить.

Сообщение **\_ каллстате строки** с неизвестным состоянием вызова может быть отправлено в приложение мониторинга в результате успешного выполнения [**линемакекалл**](/windows/desktop/api/Tapi/nf-tapi-linemakecall), [**линефорвард**](/windows/desktop/api/Tapi/nf-tapi-lineforward), [**Линеунпарк**](/windows/desktop/api/Tapi/nf-tapi-lineunpark), [**линесетуптрансфер**](/windows/desktop/api/Tapi/nf-tapi-linesetuptransfer), [**линепиккуп**](/windows/desktop/api/Tapi/nf-tapi-linepickup), [**линесетупконференце**](/windows/desktop/api/Tapi/nf-tapi-linesetupconference)или [**linePrepareAddToConference**](/windows/desktop/api/Tapi/nf-tapi-lineprepareaddtoconference) , которые были запрошены другим приложением. В то же время, когда запрашивающее приложение отправило [**\_ ответ строки**](line-reply.md) (успешно) для запрошенной операции, все приложения мониторинга в строке отправляют сообщение **Line \_ каллстате** (неизвестное). В ближайшее время отправляется сообщение **\_ каллстате** , указывающее на фактическое состояние вызова вновь созданного вызова (с использованием сведений, предоставленных поставщиком услуг).

**Строка \_ каллстате** (неизвестная) отправляется в мониторинг приложений только в том случае, если [**линекомплететрансфер**](/windows/desktop/api/Tapi/nf-tapi-linecompletetransfer) приводит к тому, что вызовы разрешаются в трехстороннее конференцию.

Для обеспечения обратной совместимости более старые приложения не ожидают какого-либо конкретного значения в *dwParam2* \_ сообщения линекаллстате. Таким образом, TAPI передает родительский вызов *хконфкалл* в *dwParam2* независимо от версии API приложения, получающего сообщение. В случае вызова конференции, инициированного поставщиком услуг, старое приложение не знает о том, что родительский вызов стал вызовом конференции, если только не проверит другие сведения (например, вызвать [**линежетконфрелатедкаллс**](/windows/desktop/api/Tapi/nf-tapi-linegetconfrelatedcalls)).

Невозможно отключить это сообщение.

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|-------------------------|-----------------------------------------------------------------------------------|
| Версия TAPI<br/> | Требуется TAPI 2,0 или более поздней версии<br/>                                             |
| Заголовок<br/>       | <dl> <dt>TAPI. h</dt> </dl> |



## <a name="see-also"></a>См. также

<dl> <dt>

[**\_ответ строки**](line-reply.md)
</dt> <dt>

[**линекомплететрансфер**](/windows/desktop/api/Tapi/nf-tapi-linecompletetransfer)
</dt> <dt>

[**линедеаллокатекалл**](/windows/desktop/api/Tapi/nf-tapi-linedeallocatecall)
</dt> <dt>

[**линедиалпарамс**](/windows/desktop/api/Tapi/ns-tapi-linedialparams)
</dt> <dt>

[**линефорвард**](/windows/desktop/api/Tapi/nf-tapi-lineforward)
</dt> <dt>

[**линеженератедигитс**](/windows/desktop/api/Tapi/nf-tapi-linegeneratedigits)
</dt> <dt>

[**линежеткаллстатус**](/windows/desktop/api/Tapi/nf-tapi-linegetcallstatus)
</dt> <dt>

[**линежетконфрелатедкаллс**](/windows/desktop/api/Tapi/nf-tapi-linegetconfrelatedcalls)
</dt> <dt>

[**линемакекалл**](/windows/desktop/api/Tapi/nf-tapi-linemakecall)
</dt> <dt>

[**линепиккуп**](/windows/desktop/api/Tapi/nf-tapi-linepickup)
</dt> <dt>

[**линепрепареаддтоконференце**](/windows/desktop/api/Tapi/nf-tapi-lineprepareaddtoconference)
</dt> <dt>

[**линесетуптрансфер**](/windows/desktop/api/Tapi/nf-tapi-linesetuptransfer)
</dt> <dt>

[**линеунпарк**](/windows/desktop/api/Tapi/nf-tapi-lineunpark)
</dt> </dl>

 

 




