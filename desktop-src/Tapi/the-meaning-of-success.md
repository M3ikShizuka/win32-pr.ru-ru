---
description: Когда опертион возвращает значение SUCCESs, функция успешно продвигается до точки, определяемой API в функции по каждой функции.
ms.assetid: e4077d77-dee1-4f1a-a6ee-20ca2f92a1ec
title: Значение успеха
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3ae38aa834b3c60107c0245be2c792703a9c038c6e9b96f982e720bf417af58f
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120126124"
---
# <a name="the-meaning-of-success"></a>Значение успеха

## <a name="tapi-2x"></a>Интерфейс TAPI 2. x

Если операция возвращает индикатор успеха (синхронно по возвращении функции для синхронных операций или асинхронно через [**\_ ответ на строку**](./line-reply.md) или [**\_ ответное**](./phone-reply.md) сообщение по телефону для асинхронных операций), предполагается, что выполняются следующие условия:

-   Функция успешно продвигается до точки, определяемой API на основе функции. После достижения этой точки либо операция полностью завершается, либо она находится в состоянии, что независимые сообщения о состоянии будут сообщать приложению о последующем выполнении.

    Например, реализация [**линемакекалл**](/windows/win32/api/tapi/nf-tapi-linemakecall) поставщика услуг должна возвращать значение Success, а не позднее, когда вызов переходит в состояние продолжения вызова. В идеале поставщик должен сообщать об успешном выполнении как можно скорее, например, когда вызов попадает в состояние гудка звонка (если применимо). После того как в приложение будет возвращен успешный результат, строки \_ каллстате сообщения будут сообщать приложению о ходе выполнения вызова. Поставщики услуг, которые отменяют возврат индикации успеха **линемакекалл** , например до завершения набора номера, должны учитывать, что это означает, что поставщик не имеет недостатков, так как удобство использования на уровне приложения может быть значительно ограничено. Например, пользователь не сможет отменить запрос на настройку вызова, пока не будет выполнен вызов и все цифры были отправлены в коммутатор.

-   Функции, возвращающие сведения (например, [**линежеткаллинфо**](/windows/win32/api/tapi/nf-tapi-linegetcallinfo)), ВОЗвращают успешно, только если запрашиваемые данные доступны для приложения. Функции, возвращающие дескрипторы (для строк или вызовов), могут возвращать значение SUCCESs только после того, как дескриптор является допустимым. Сообщения не должны отправляться по этой строке или вызываться до успешного указания функции, вызвавшей ее создание. Поставщик услуг отвечает за подавление таких сообщений.
-   Функции, которые обеспечивают выполнение определенных постоянных условий (например, [**линемонитордигитс**](/windows/win32/api/tapi/nf-tapi-linemonitordigits)), возвращают результат только после включения условия, а не при повторном удалении условия (например, не после завершения отслеживания всех цифр).
-   Функции управления вызовом (такие как [**линехолд**](/windows/win32/api/tapi/nf-tapi-linehold) или [**линесетуптрансфер**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer), но не [**линемакекалл**](/windows/win32/api/tapi/nf-tapi-linemakecall)) возвращают успешное выполнение после завершения операции. Некоторые телефонные сети не предоставляют подтверждения (положительные или отрицательные) о завершении определенных запросов, выполняемых поставщиками служб. В таких ситуациях поставщик услуг должен принять решение об успешном или неуспешном выполнении запроса. Таким образом, успешное завершение может означать, что поставщик услуг инициировал действия для выполнения запроса, но не обязательно что-то еще. Например, поставщик может не получить подтверждение голосами подтверждающими для своего запроса от коммутатора, хотя он уже отправил в приложение сообщение об успешном выполнении.

## <a name="tapi-3x"></a>Интерфейс TAPI 3. x

Когда операция возвращает индикатор успеха (синхронно по возвращении функции для синхронных операций или асинхронно с вызовом асинхронной процедуры обратного вызова асинхронного [**\_ выполнения**](/windows/win32/api/tspi/nc-tspi-async_completion) ), предполагается, что выполняются следующие условия:

-   Функция успешно продвигается до точки, определенной поставщиком услуг. Поставщик услуг определяет точку на уровне функций. После достижения этого момента операция завершается полностью или находится в состоянии, что последующие независимые сообщения о состоянии будут сообщать приложению о ходе выполнения.
-   Функции, возвращающие сведения (например, [**тспи \_ Линепарк**](/windows/win32/api/tspi/nf-tspi-tspi_linepark) или [**тспи \_ ЛИНЕДЕВСПЕЦИФИК**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific)), возвращают успешно, только если запрашиваемая информация доступна вызывающему объекту. Функции, возвращающие дескрипторы (к открытым строкам, открытым телефонам или вызовам), возвращают дескрипторы немедленно при возврате функции. Как поставщик услуг, так и вызывающий объект должны рассматривать дескрипторы как "еще не действительные", пока не будет указано окончательное значение успешного завершения. Поставщик услуг отвечает за предотвращение любых сообщений обратного вызова в процедуру [**линивент**](/windows/win32/api/tspi/nc-tspi-lineevent) или [**фонивент**](/windows/desktop/api/tspi/nc-tspi-phoneevent) , связанную с этой открытой строкой, открытым телефоном или вызовом до тех пор, пока не появится индикатор успеха. Если итоговый результат является ошибкой, любой возвращаемый обработчик сразу становится недействительным без каких-либо дальнейших действий.
-   Функции, которые поддерживают определенные постоянные условия (например, [**тспи \_ линемонитордигитс**](/windows/win32/api/tspi/nf-tspi-tspi_linemonitordigits)), возвращают результат только после включения условия, а не при повторном удалении условия (например, не при завершении контроля цифр).
-   Функции управления вызовом (такие как [**тспи \_ Линехолд**](/windows/win32/api/tspi/nf-tspi-tspi_linehold) и [**тспи \_ линесетуптрансфер**](/windows/win32/api/tspi/nf-tspi-tspi_linesetuptransfer), но не [**ТСПИ \_ линемакекалл**](/windows/win32/api/tspi/nf-tspi-tspi_linemakecall)) возвращают успешное выполнение после завершения операции. В средах телефонии, не предоставляющих положительных подтверждений этих функций, поставщик услуг вынужден принять оптимальное решение относительно успеха или неудачи функции.
-   Реализация [**тспи \_ линемакекалл**](/windows/win32/api/tspi/nf-tspi-tspi_linemakecall) поставщика услуг должна ВОЗвращать значение Success, а не позднее, когда вызов переходит в состояние *продолжения* вызова. В идеале поставщик указывает на успешное выполнение как можно скорее, например, когда вызов переходит в состояние вызова *диалтоне* (если применимо). Когда в приложение возвращается значение SUCCESs, [**строки \_ каллстате**](/previous-versions/windows/desktop/legacy/ms725219(v=vs.85)) сообщения сообщают вызывающей стороне о ходе вызова. Поставщики услуг, которые отдерживают возврат **тспи \_ линемакекалл** успешного выполнения, например до завершения набора номера, значительно ограничивают гибкость на уровне приложения. Задержка при возврате успеха в **тспи \_ линемакекалл** не позволяет пользователю отменить запрос на настройку вызова, пока не будет выполнен вызов, а все цифры будут отправлены в коммутатор.

 

 
