---
description: Если для передачи информации между TAPI и приложением используются вариабли структуры данных, приложение отвечает за выделение необходимого объема памяти.
ms.assetid: f1e2e864-fa10-4058-ba56-faa0ba7363a1
title: Вариабли структуры данных
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 873fcbaa1e4e3bda772d92ad2de9b1f6258363cd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104266230"
---
# <a name="variably-sized-data-structures"></a>Вариабли структуры данных

Если для передачи информации между TAPI и приложением используются вариабли структуры данных, приложение отвечает за выделение необходимого объема памяти. Объем выделенной памяти должен быть не менее велик для фиксированной части структуры данных и задается приложением в элементе **двтоталсизе** структуры данных. Члены **двуседсизе** и **двнидедсизе** заполняются TAPI. Если **двтоталсизе** меньше размера фиксированной части, возвращается ЛИНИРР/фонирр \_ структуретусмалл. Если функция возвращает значение Success, то все поля в фиксированной части были заполнены. Члены **двуседсизе** и **двнидедсизе** можно сравнивать, чтобы определить, были ли заполнены все переменные части, и сколько пространства потребуется для их заполнения.

Если **двнидедсизе** равен **двуседсизе**, то все фиксированные и переменные части были заполнены. Если **двнидедсизе** больше **двуседсизе**, некоторые переменные части могут быть заполнены, но точно, какие поля вариабли размера заполнены, не определены. Ни одна переменная часть не усекается, а переменные части, которые были бы усечены из-за недостаточного места, выделены, если обе соответствующие части "offset" и "size" имеют нулевое значение. Если они не равны нулю (и ошибки не были возвращены), они указывают смещение и размер допустимых неусеченных данных частей переменной.

Приложение всегда может гарантировать заполнение всех переменных частей путем выделения и указания **двнидедсизе** байтов для структуры и повторного вызова функции Get до тех пор, пока функция не вернет значение Success и **двнидедсизе** равно **двуседсизе**. Это должно произойти во второй раз, за исключением ситуаций состязания, которые приводят к изменению размера переменных частей между вызовами, что должно быть редким событием.

> [!Note]  
> Все текстовые строки, независимо от кодировки, в структурах размера вариабли должны **завершаться нулем в** соответствии с обычными соглашениями об обработке строк C.

 

 

 



