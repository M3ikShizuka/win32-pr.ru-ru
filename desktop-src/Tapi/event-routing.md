---
description: С помощью функции Линесеттерминал приложение может контролировать или подавлять маршрутизацию указанных низкоуровневых событий (обмен между коммутатором и станцией) к устройству.
ms.assetid: 36658d83-0ea4-4f62-b2e5-c0f6d6569d0d
title: Маршрутизация событий
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 13c71d07994090a1e68fcbadd1cd3b686a3de316e4a6fd01cca506fcdbcdbd00
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117763103"
---
# <a name="event-routing"></a>Маршрутизация событий

С помощью функции [**линесеттерминал**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) приложение может контролировать или подавлять маршрутизацию указанных низкоуровневых событий (обмен между коммутатором и станцией) к устройству. При использовании **линесеттерминал** в приложении указывается устройство терминала, на которое направляются эти события (например, линия, адрес или потоковые события потока мультимедиа).

Маршрутизацию различных классов событий можно контролировать по отдельности, что позволяет указывать отдельные терминалы для каждого класса событий. Классы событий включают ламп, кнопки, экран, круг, хуксвитч и поток мультимедиа.

Например, поток мультимедиа вызова (например, голоса) может быть отправлен на любое устройство преобразователя, если поставщик услуг и оборудование способны это сделать. Как правило, *преобразователь* означает то же, что и устройство *хуксвитч* в TAPI, что имеет микрофон и докладчик. События звонка с коммутатора на телефон можно сопоставить с визуальным оповещением на экране компьютера или направить на телефонное устройство. События лампы и события отображения могут быть пропущены или направлены на телефонное устройство (которое кажется обычным телефонным набором). Наконец, нажатие кнопки на телефонном устройстве может быть или не передано в строку. В любом случае такая маршрутизация низкоуровневых сигналов из линии не влияет на работу строки в интерфейсе TAPI, которая всегда сопоставляет низкоуровневые события с их функциональным аналогом. Чтобы определить терминалы, доступные для линейного устройства (и их возможности), изучите возможности линейного устройства с помощью [**линежетдевкапс**](/windows/desktop/api/Tapi/nf-tapi-linegetdevcaps).

Сначала предположим, что приложение подавляет маршрутизацию всех событий (с помощью [**линесеттерминал**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal)), и пользователь выбирает гарнитуру в качестве текущего устройства ввода-вывода. Входящий вызов отправляет сообщение [**Line \_ каллстате**](line-callstate.md) и сообщение [**Line \_ линедевстате**](line-linedevstate.md) с индикатором *звонка* . Так как маршрутизация всех событий подавляется, события кольца не направляются на телефон, поэтому звонок подавляется. Вместо этого приложение уведомляет пользователя с помощью всплывающего диалогового окна и системного звукового сигнала на гарнитуре.

Пользователь решает ответить на вызов. Поскольку текущее устройство ввода-вывода пользователя является гарнитурой, приложение телефонии вызывает [**линесеттерминал**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) во входящем вызове для направления носителя звонка на гарнитуру и ответа на вызов. Приложение может также вызвать **линесеттерминал** , чтобы перенаправить лампу и отобразить события информации в набор телефонных номеров, чтобы он будет вести себя как обычно.

Во втором примере предположим, что входящий вызов уведомляется на компьютере пользователя. Вместо того чтобы выбирать вариант ответа с помощью мыши, пользователь решает просто выбрать телефонную трубку для ответа на звонок. Состояние оффхук на телефоне отправляет в приложение сообщение. Приложение может интерпретировать это состояние как запрос от пользователя, чтобы выбрать телефонную трубку для проведения диалога. Затем приложение вызывает [**линесеттерминал**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) для маршрутизации голоса данных при вызове к набору телефонных номеров.

 

 



