---
description: Понятие адреса является основным для большинства операций связи.
ms.assetid: 32fbd06b-f6f2-4024-b8d5-3d6eef16bca2
title: Адрес
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8c6ad8f03b725a58d564c63f4c5c0d0165eed99a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105674032"
---
# <a name="address"></a>Адрес

Понятие адреса является основным для большинства операций связи. Адрес представляет расположение в сети. Локальное назначение адреса линии или каналу обычно происходит во время установки поставщика услуг, но может быть изменено позже. Подробные сведения об используемых процедурах можно найти в наборе ресурсов операционной системы для поставщиков служб, предоставляемых корпорацией Майкрософт, и в документации поставщика услуг для продуктов сторонних производителей.

Один адрес может совместно использоваться более чем одним устройством. Разные поставщики коммутаторов имеют разные имена для этой концепции, такие как мост адресов, номер каталога с несколькими внешним видом (МАДН) или вид с мостом. Входящий вызов по общему адресу предлагается во всех строках, связанных с адресом. Описание конфигураций, распознаваемых TAPI, см. в разделе [ \_ константы линеаддрессшаринг](./lineaddresssharing--constants.md) .

Сам адрес — это строка, которая определяет расположение в сети. В случае телефонной сети адрес — это телефонный номер, содержащий национальные или международные коды. Если сеть основана на IP, адрес может быть IP-адресом. См. раздел [ \_ константы линеаддресстипе](lineaddresstype--constants.md) для определяемых TAPI типов адресов. Поставщик услуг может определять дополнительные типы адресов.

## <a name="address-related-capabilities-and-messages"></a>Address-Related возможности и сообщения

Разные адреса имеют различные функции, возможности и состояния. Поставщики услуг являются источником такой информации. Возможности запросов устройств и состояния, а также механизмы создания отчетов TAPI предоставляют приложению сведения для управления адресами.

Приложения получают эти сведения путем обработки событий из TAPI или с помощью операций запросов. Это позволяет приложению принимать во внимание такие факторы, как возможность использования определенного адреса, например [приостановки](park-ovr.md).

**Интерфейс TAPI 2. x:** Приложения вызывают функцию [**линежетаддресскапс**](/windows/win32/api/tapi/nf-tapi-linegetaddresscaps) для определения возможностей телефонии каждого адреса, а затем получают эти сведения в структуре данных [**линеаддресскапс**](/windows/win32/api/tapi/ns-tapi-lineaddresscaps) . Аналогичным образом приложение может вызвать [**линежетдевкапс**](/windows/win32/api/tapi/nf-tapi-linegetdevcaps) для устройства линии, чтобы определить количество адресов, назначенных линии, а также другие сведения.

**Интерфейс TAPI 3. x:** Приложения используют [интерфейсы объекта Address](address-object-interfaces.md) для получения сведений о возможностях и событиях адресов.

## <a name="storing-phone-numbers-in-electronic-address-books"></a>Хранение номеров телефонов в электронных адресных книгах

Многие пользователи выбирают для набора людей, факсимильных аппаратов, досок объявлений и других сущностей, выбирая их имена из адресной книги. Фактическое число набора зависит от географического расположения пользователя и способа подключения линейного устройства. Например, Настольный компьютер может иметь доступ к двум линиям, один из которых подключен к УАТС, другой — к центральному офису телефонной компании. При совершении вызова той же стороны может потребоваться использовать разные числа. (Например, чтобы позвонить через УАТС, компьютеру может потребоваться набрать префикс "9", чтобы получить внешнюю линию, или для вызова, сделанного через Центральный офис, может понадобиться другой префикс.) Или пользователь может выполнять вызовы с переносного компьютера и использовать одну статическую адресную книгу даже при вызове из различных расположений или сред телефонии. Возможности преобразования адресов TAPI позволяют пользователю уведомлять компьютер о текущем местоположении и требуемом устройстве для вызова. Затем TAPI обрабатывает все различия в наборе номеров, не запрашивая изменений в адресной книге пользователя. Приложение использует [преобразование адресов](initiate-a-session-ovr.md) для преобразования адреса из [канонического формата адреса](#canonical-addresses) в формат адреса, [доступного для набора](#dialable-addresses) .

Связанный раздел — это обработка международного контроля за ходом вызова, который представляет собой процесс прослушивания звуковых тонов, таких как гудок, Специальные звуки, сигналы занятости и звонканые тона, для определения *состояния* звонка (его прогресса в сети). Так как ритмичность и частота зависят от страны или региона к стране или региону, поставщик услуг должен узнать, какой ход выполнения вызова следует выполнить при выполнении международного исходящего звонка. Поэтому приложения указывают страну назначения или код региона при размещении исходящих вызовов.

## <a name="canonical-addresses"></a>Канонические адреса

Канонический формат адреса должен быть универсальным постоянным номером каталога. По этой причине числа в адресных книгах лучше хранить в каноническом формате.

Следующие сведения касаются того, что считается каноническим для телефонного адреса.

Канонический телефонный адрес — это текстовая строка со следующей структурой:

\+*Каунтрикоде* Пробел \[ **(**_ареакоде_*_)_* пробел \] *субскрибернумбер* \| *имя подадреса*  ^   CRLF...

Компоненты этой структуры описаны в следующей таблице.



Компонент

Значение

\+

Эквивалентно Hex 2B. Указывает, что следующий за ним номер использует канонический формат.

*CountryCode*

Строка размера вариабли, содержащая одну или несколько цифр от 0 до 9 (в шестнадцатеричном формате от 30 до 39 включительно). *Каунтрикоде* отделяется следующим пространством. Он определяет страну или регион, в котором расположен адрес.

Пробел

Только один символ пробела (шестнадцатеричный 20). Он используется для разделения конца *каунтрикоде* части адреса.

*AreaCode*

Строка размера вариабли, содержащая ноль или более цифр от 0 до 9 (в шестнадцатеричном формате от 30 до 39 включительно). *Ареакоде* — это часть адреса кода города, которая является необязательной. Если код города присутствует, перед ним должен стоять только одна открывающая круглая скобка (28), за которой следует только одна правая скобка (29) и один символ пробела (20).

*субскрибернумбер*

Строка размера вариабли, содержащая одну или несколько цифр от 0 до 9 (в шестнадцатеричном формате от 30 до 39 включительно). Кроме того, он может включать и другие символы форматирования, включая любые символы управления наборами, описанные в формате адреса для номеронабирателя:

 

Знак

шестнадцатеричная кодировка

 

! \#<br/> $<br/> \*<br/> ,<br/> ?<br/> @<br/> ABCD<br/> С<br/> T<br/> W<br/> abcd<br/> p<br/> t<br/> w<br/>

21 23<br/> 24<br/> 2а<br/> 2C<br/> 3F<br/> 40<br/> 41-44<br/> 50<br/> 54<br/> 77<br/> 61-64<br/> 70<br/> 74<br/> 79<br/>

 

Номер подписчика не должен содержать открывающую круглую скобку или правую круглую скобку (которая используется только для разделения кода города) и не должна содержать \| символы "", "^" или "CRLF" (которые используются для начала следующих полей). Наиболее часто нецифровые символы в номере подписчика включают только пробелы, точки (".") и дефисы ("-"). Все допустимые нецифровые символы, которые отображаются в номере подписчика, пропускаются из *диалаблестринг* , возвращаемого функцией [**линетранслатеаддресс**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) , но сохраняются в *дисплайаблестринг*.

\|

Hex (7C). Если этот необязательный символ указан, сведения, приведенные после него к следующему + \| ^ CRLF или концу канонической строки адреса, рассматриваются как сведения о подадресе, как и для подадреса ISDN.

*Подадрес*

Строка размера вариабли, содержащая подадрес. Строка отделяется символом + \| ^ CRLF или концом строки адреса. Во время набора номера сведения о подадресе передаются удаленной стороне. Это может быть подадрес ISDN или адрес электронной почты.

^

Hex (5E). Если этот необязательный символ указан, то сведения, следующие за ним до следующей строки CRLF или в конце канонического адреса, рассматриваются как имя ISDN.

*Name*

Строка размера вариабли, обрабатываемая как информация о имени. Имя отделяется символом CRLF или концом канонической строки адреса и может содержать другие разделители. Во время набора номера сведения о имени передаются удаленной стороне.

CRLF

Hex (0D), за которым следует Hex (0A) и являются необязательными. Если он есть, то это означает, что другое каноническое число следует за этим. Он используется для разделения нескольких канонических адресов как части одной строки адреса (обратная мультиплексирование). Например, каноническое представление основного телефонного номера кнопочной формы в корпорации Майкрософт будет следующим:<br/> + 1 (425) 882-8080<br/>



 

## <a name="dialable-addresses"></a>Адреса, которые вы набираете

В качестве формата адреса для набора можно использовать форму, в которой адрес передается поставщику услуг, который обрабатывает телефонные номера. Следующие сведения касаются адресов, подходящих для подключения к телефонной сети.

Поддерживаемый формат номера позволяет указать несколько адресов назначения одновременно. Эта возможность может быть полезной, если поставщик услуг предлагает некоторую форму обратного мультиплексирования, настроив вызовы к каждому из указанных назначений и затем управляя информационным потоком в виде одного потока мультимедиа с высокой пропускной способностью. Приложение воспринимает эту группу вызовов как один вызов, так как он получает только один маркер вызова, представляющий совокупность отдельных телефонных звонков.

Также поддерживается обратная мультиплексирование на уровне приложения. Для этого приложение настроит ряд отдельных вызовов и синхронизирует их потоки мультимедиа.

*Подадресы* — это возможность, предоставляемая на линиях ISDN, которая позволяет использовать больше информации, чем единственный номер телефона, используемый при наборе номера. Эти дополнительные сведения могут указывать конкретное добавочное телефонное расширение для звонка или, в вычислительной среде, определенное приложение для оповещения. Другие параметры могут описывать необходимые аспекты запрошенного подключения, такие как скорость и время.

Если поставщик услуг поддерживает подадресы, это приложение включает его в адрес, переданный в любую операцию, для которой требуется один.

Телефонный адрес, набранный абонентом, содержит сведения об адресации частей и является частью навигации по природе. Любая входная строка, которая не начинается с символа "+", считается недоступной в каноническом формате и, следовательно, должна быть в формате адреса с набором адресов и возвращена приложению без изменений. Адрес, который может быть набран, является текстовой строкой со следующей структурой:

*Диалабленумбер* \| *Подадрес*  ^  *Имя* СИМВОЛ CRLF...

Компоненты этой структуры приведены в следующей таблице.



| Компонент        | Значение                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| *диалабленумбер* | Цифры и модификаторы 0-9 A-D \* \# ,! W w p t t @ $? ; отделяется символом \| ^ CRLF или концом строки адреса с набором. Знак плюса (+) является допустимым символом в строках с поддержкой набора. Он указывает, что номер телефона является полным международным номером. В *диалабленумбер* Обратите внимание на следующие определения:<br/> 0-9 A-D \*\#<br/> Символы, соответствующие разрядам DTMF и/или Pulse.<br/> |
| !                | Hex (21). Указывает, что в строку набора набираемых строк должен быть вставлен хукфлаш (1-секундный onhook, за которым следует 1 половина второго оффхук).                                                                                                                                                                                                                                                                                   |
| P p              | Hex (50) или Hex (70). Указывает, что необходимо использовать импульсный набор для цифр, следующих за ним.                                                                                                                                                                                                                                                                                                                                                |
| T t              | Hex (54) или Hex (74). Указывает, что для цифр после него используется тоновый набор (DTMF).                                                                                                                                                                                                                                                                                                                                          |
| ,                | Hex (27). Указывает, что набор необходимо приостановить. Длительность паузы зависит от устройства и может быть извлечена из возможностей устройства линии. Для более длительных приостановей можно использовать несколько запятых.                                                                                                                                                                                                                                 |
| W w              | Hex (57) или Hex (77). Прописная или строчная W означает, что набор номера должен продолжаться только после того, как будет обнаружен гудок.                                                                                                                                                                                                                                                                                                            |
| @                | Hex (40). Указывает, что при наборе номера следует дождаться ответа на тихий ответ, прежде чем набрать оставшийся адрес. Это означает ожидание хотя бы одного звонка сигнала, за которым следует несколько секунд тишины.                                                                                                                                                                                                                               |
| $                | Hex (24). Указывает, что набор данных для выставления счетов должен дожидаться "сигнала выставления счетов" (например, гудка запроса кредитной карты).                                                                                                                                                                                                                                                                                                              |
| ?                | Hex (3F). Указывает, что пользователь должен получить запрос перед тем, как продолжить набор. Поставщик фактически не выполняет запрос, но наличие "?" заставляет поставщик отклонять строку как недействительную, предупреждая приложение о необходимости разбить его на части и запросить пользователя в промежутке между ними.                                                                                                                           |
| ;                | Hex (3B). Если помещается в конце частично указанной строки адреса с набором, это означает, что сведения о номере неполные, а сведения об адресах будут предоставлены позже. Компонент ";" разрешен только в части *диалабленумбер* адреса.                                                                                                                                                       |
| \|               | Hex (7C) и являются необязательными. При наличии информации, следующей за ней до следующего + \| ^ CRLF, или конца строки адреса, которая может быть набрана, рассматривается как сведения о подадресе (как для подадреса ISDN).                                                                                                                                                                                                                                  |
| *Подадрес*     | Строка размера вариабли, содержащая подадрес. Строка отделяется следующим символом + \| ^ CRLF или концом строки адреса. При наборе номера сведения о подадресе передаются удаленной стороне. Это может быть подадрес ISDN, адрес электронной почты и т. д.                                                                                                                                                                       |
| ^                | Hex (5E) и являются необязательными. При наличии информации, следующей за ней до следующей строки CRLF или конца набора номера, рассматривается как имя ISDN.                                                                                                                                                                                                                                                                                |
| *Name*           | Строка размера вариабли, обрабатываемая как информация о имени. Имя отделяется символом CRLF или концом строки адреса с набором. При наборе номера сведения о имени передаются удаленной стороне.                                                                                                                                                                                                                                                      |
| CRLF             | Hex (0D), за которым следует Hex (0A). Если он есть, этот необязательный символ указывает на то, что еще один номер для набора. Он используется для разделения нескольких адресов, которые могут быть набраны, как часть одной строки адреса (для обратного мультиплексирования).                                                                                                                                                                                           |



 

Преобразование адресов можно использовать для преобразования адреса из канонического формата в формат с набором.

 

