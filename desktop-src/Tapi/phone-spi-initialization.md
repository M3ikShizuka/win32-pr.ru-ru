---
description: В рамках абстракции телефонного устройства, определяемой ТСПИ, TAPI и поставщик услуг должны сначала выполнить базовую инициализацию.
ms.assetid: cd8bb328-fbd0-409c-8471-34ad4c2c8d93
title: Телефон Инициализация SPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 88465e31857ee9ecc3a54f98f98bf6d1d3b50b837d845dbf36af08be0ec78a7c
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120072894"
---
# <a name="phone-spi-initialization"></a>Телефон Инициализация SPI

В рамках абстракции телефонного устройства, определяемой ТСПИ, TAPI и поставщик услуг должны сначала выполнить базовую инициализацию. Эта базовая инициализация выполняется как для линий, так и для половины телефонного интерфейса с помощью одного набора шагов. Первый из этих шагов — согласование версии интерфейса. TAPI выполняет это путем вызова функции [**тспи \_ линенеготиатетспиверсион**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) . Эта функция обычно используется для согласования от имени отдельного устройства. различные линейные устройства в пределах одного поставщика услуг могут действовать в соответствии с различными версиями интерфейса. TAPI передает специальное зарезервированное значение идентификатора устройства, [**инициализирует \_ согласование**](initialize-negotiation.md), чтобы указать, что он выполняет согласование общей версии интерфейса для функций инициализации, влияющих на всех поставщиков служб, как для линий, так и для телефонов.

Результат этого согласования передается в последующие процедуры до тех пор, пока не будет открыто телефонное устройство. В это время телефонное устройство зафиксируется в определенной версии интерфейса. Эта версия интерфейса является неявной до закрытия телефона и не требует передачи дальнейшим функциям, работающим на открытом телефоне.

После согласования общей версии интерфейса TAPI вызывает функцию [**тспи \_ провидеринит**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit) . Эта функция инициализирует поставщик службы, а также предоставляет параметры, необходимые для последующей операции. К этим параметрам относятся следующие.

-   *двперманентпровидерид*: указывает постоянный идентификатор инициализированного поставщика услуг, уникальный в пределах поставщиков служб в этой системе.
-   *двлинедевицеидбасе*: Указывает самый низкий идентификатор устройства для устройств, поддерживаемых этим поставщиком услуг.
-   *двфонедевицеидбасе*: Указывает самый низкий идентификатор устройства для телефонных устройств, поддерживаемых этим поставщиком услуг. Устройства класса телефонных устройств телефонии обозначаются целыми числами, начинающимися с нуля. Этот диапазон идентификаторов является непрерывным по всему диапазону телефонных устройств. Поскольку в одной системе может быть несколько поставщиков услуг, управляющих телефонными устройствами, каждый поставщик услуг получает непрерывную часть общего диапазона. Этот параметр сообщает поставщику службы наименьшее значение в его части диапазона. Поставщик услуг, а не TAPI, отвечает за сопоставление этого диапазона переменных с собственными внутренними идентификаторами устройств. Это дает поставщику поставщика услуг достаточную гибкость при использовании идентификаторов устройств в расширениях для конкретных устройств, если это требуется. Так как поставщик служб знает, какие идентификаторы устройств отображаются в параметрах и структурах данных, определенных интерфейсом TAPI, он может использовать последовательные идентификаторы устройств в параметрах модуля и структурах данных для конкретных устройств.
-   *двнумлинес*: определяет, сколько линий устройства поддерживает этот поставщик услуг.
-   *двнумфонес*: определяет, сколько телефонных устройств поддерживает этот поставщик услуг.
-   *лпфнкомплетионпрок*: Указывает процедуру, с помощью которой поставщик услуг сообщает о завершении всех асинхронных процедур в телефонах и телефонных устройствах.

После [**тспи \_ провидеринит**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit)могут быть выполнены нормальные операции, такие как открытие телефонов.

 

 
