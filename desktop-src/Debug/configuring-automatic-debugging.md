---
description: Пользователи могут настроить автоматическую отладку, чтобы они могли определить, почему система или приложение перестали отвечать на запросы.
ms.assetid: c3c7aa98-c298-452c-b8d0-10a08b4d82a3
title: Настройка автоматической отладки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 990f2f52e6227e4b1a2cf92656794c90fb5d465915a5d888025d0f3b2c438630
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119076508"
---
# <a name="configuring-automatic-debugging"></a>Настройка автоматической отладки

Пользователи могут настроить автоматическую отладку, чтобы они могли определить, почему система или приложение перестали отвечать на запросы.

## <a name="configuring-automatic-debugging-for-system-crashes"></a>Настройка автоматической отладки для сбоев системы

Чтобы настроить конечный компьютер для создания файла аварийного дампа при зависании системы, используйте **системное** приложение на панели управления. Щелкните **Дополнительные параметры системы**, чтобы отобразить диалоговое окно **Свойства системы** . на вкладке **дополнительно** в этом поле щелкните **Параметры** в разделе **запуск и восстановление**, а затем используйте соответствующие параметры восстановления. Кроме того, можно настроить параметры аварийного дампа с помощью следующего раздела реестра:

**HKey \_ \_** \\  \\  \\  \\ **Крашконтрол** управления CurrentControlSet системы локального компьютера

Файл, который можно указать, является файлом аварийного дампа. Его имя по умолчанию — Memory. dmp. Можно выполнить отладку аварийного дампа с помощью отладчика режима ядра, такого как WinDbg или KD. Дополнительные сведения см. в документации, прилагаемой к отладчику.

## <a name="configuring-automatic-debugging-for-application-crashes"></a>Настройка автоматической отладки для сбоев приложений

Когда приложение перестает отвечать (например, после нарушения прав доступа), система автоматически вызывает отладчик, указанный в реестре для отладки по подустранению, идентификатор процесса и обработчик события передаются в отладчик, если Командная строка настроена правильно. В следующей процедуре описывается, как указать отладчик в реестре.

**Настройка отладчика в качестве отладчика неустранимой**

1.  Перейдите к следующему разделу реестра:

    **HKey \_ \_** \\ **программное обеспечение** локального компьютера \\ **Microsoft** \\ **Windows NT** \\ **CurrentVersion** \\ **аедебуг**

2.  Добавьте или измените значение **отладчика** , используя \_ строку reg SZ, которая указывает командную строку для отладчика.

    Строка должна включать полный путь к исполняемому файлу отладчика. Укажите идентификатор процесса и обработчик событий с параметрами "% ld" в командной строке отладчика. Различные отладчики могут иметь собственные синтаксисы параметров для указания этих значений. При вызове отладчика первый "% ld" заменяется ИДЕНТИФИКАТОРом процесса, а вторая "% ld" заменяется на обработчик событий.

    Следующий текст является примером настройки WinDbg в качестве отладчика.

    ``` syntax
    "C:\debuggers\windbg.exe" -p %ld -e %ld -g
    ```

3.  Если вы хотите, чтобы отладчик вызывался без взаимодействия с пользователем, добавьте или измените значение **Auto** , используя \_ строку reg SZ, которая указывает, должна ли система отображать диалоговое окно пользователю перед вызовом отладчика. Строка "1" отключает диалоговое окно; строка "0" включает диалоговое окно.

## <a name="excluding-an-application-from-automatic-debugging"></a>Исключение приложения из автоматической отладки

Следующая процедура описывает, как исключить приложение из автоматической отладки после того, как параметр **Auto** в разделе **аедебуг** был установлен в значение 1.

**Исключение приложения из автоматической отладки**

1.  Перейдите к следующему разделу реестра:

    **HKey \_ \_** \\ **программное обеспечение** локального компьютера \\ **Microsoft** \\ **Windows NT** \\ **CurrentVersion** \\ **аедебуг**

2.  Добавьте значение REG \_ DWORD в подраздел **аутоексклусионлист** , где name — это имя исполняемого файла, а — значение 1. По умолчанию диспетчер окон рабочего стола (Dwm.exe) исключается из автоматической отладки, так как в противном случае может произойти взаимоблокировка системы, если Dwm.exe перестает отвечать (пользователь не увидит интерфейс, отображаемый отладчиком, так как Dwm.exe не отвечает, и Dwm.exe не может завершиться, так как он удерживается отладчиком).

    **Windows Server 2003 и Windows XP:** Подраздел **аутоексклусионлист** недоступен; Поэтому нельзя исключить какие либо приложения, включая Dwm.exe, из автоматической отладки.

Записи реестра **аедебуг** по умолчанию можно представить следующим образом:

```
HKEY_LOCAL_MACHINE
   SOFTWARE
      Microsoft
         Windows NT
            CurrentVersion
               AeDebug
                  Auto = 1
                  AutoExclusionList
                     DWM.exe = 1
```

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Включение отладки с помощью WinDbg](/windows-hardware/drivers/debugger/enabling-postmortem-debugging)
</dt> </dl>

 

 
