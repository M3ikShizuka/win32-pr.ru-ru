---
description: Обработчик завершения гарантирует, что определенный блок кода будет выполняться всякий раз, когда поток управления покидает определенный защищенный текст кода. Обработчик завершения состоит из следующих элементов.
ms.assetid: 899e2939-e028-4be1-9f08-9a79bf97eb37
title: Обработка завершения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b23e2c81465ab9d469d3d5c503c12f5bf1c7a333507d302f3e5639e0158834e8
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119292963"
---
# <a name="termination-handling"></a>Обработка завершения

*Обработчик завершения* гарантирует, что определенный блок кода будет выполняться всякий раз, когда поток управления покидает определенный защищенный текст кода. Обработчик завершения состоит из следующих элементов.

-   Защищенный текст кода
-   Блок кода завершения, который должен быть выполнен, когда поток управления оставляет защищенный текст

Обработчики завершения объявляются в синтаксисе, зависящем от языка. При использовании оптимизирующих компиляторов Microsoft C/C++ они реализуются с помощью **\_ \_ try** и, **\_ \_ наконец**. Дополнительные сведения см. в разделе [синтаксис обработчика](handler-syntax.md).

Защищенный текст кода может быть блоком кода, набором вложенных блоков или целой процедурой или функцией. При каждом выполнении защищенного текста будет выполнен блок кода завершения. Единственным исключением является то, что поток завершается во время выполнения защищенного текста (например, если функция [**ExitThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitthread) или [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) вызывается из защищенного тела).

Блок завершения выполняется, когда поток управления оставляет защищенный текст, независимо от того, завершается ли защищенный текст обычно или аварийно. Защищенный текст считается завершенным нормально при выполнении последней инструкции в блоке, а управление последовательно завершается в блоке завершения. Аварийное завершение происходит, когда поток управления оставляет защищенный текст из-за исключения или из-за оператора управления, такого как **return**, **goto**, **break** или **Continue**. Функцию [**абнормалтерминатион**](abnormaltermination.md) можно вызвать из блока завершения, чтобы определить, завершается ли защищенный текст обычным образом.

 

 
