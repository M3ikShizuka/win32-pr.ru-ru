---
description: Обработчик завершения гарантирует, что определенный блок кода будет выполняться всякий раз, когда поток управления покидает определенный защищенный текст кода. Обработчик завершения состоит из следующих элементов.
ms.assetid: 899e2939-e028-4be1-9f08-9a79bf97eb37
title: Обработка завершения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e926a47a3c0bb4f2cb8a8df350807aee89b49bab
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103895913"
---
# <a name="termination-handling"></a>Обработка завершения

*Обработчик завершения* гарантирует, что определенный блок кода будет выполняться всякий раз, когда поток управления покидает определенный защищенный текст кода. Обработчик завершения состоит из следующих элементов.

-   Защищенный текст кода
-   Блок кода завершения, который должен быть выполнен, когда поток управления оставляет защищенный текст

Обработчики завершения объявляются в синтаксисе, зависящем от языка. При использовании оптимизирующих компиляторов Microsoft C/C++ они реализуются с помощью **\_ \_ try** и, **\_ \_ наконец**. Дополнительные сведения см. в разделе [синтаксис обработчика](handler-syntax.md).

Защищенный текст кода может быть блоком кода, набором вложенных блоков или целой процедурой или функцией. При каждом выполнении защищенного текста будет выполнен блок кода завершения. Единственным исключением является то, что поток завершается во время выполнения защищенного текста (например, если функция [**ExitThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitthread) или [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) вызывается из защищенного тела).

Блок завершения выполняется, когда поток управления оставляет защищенный текст, независимо от того, завершается ли защищенный текст обычно или аварийно. Защищенный текст считается завершенным нормально при выполнении последней инструкции в блоке, а управление последовательно завершается в блоке завершения. Аварийное завершение происходит, когда поток управления оставляет защищенный текст из-за исключения или из-за оператора управления, такого как **return**, **goto**, **break** или **Continue**. Функцию [**абнормалтерминатион**](abnormaltermination.md) можно вызвать из блока завершения, чтобы определить, завершается ли защищенный текст обычным образом.

 

 
