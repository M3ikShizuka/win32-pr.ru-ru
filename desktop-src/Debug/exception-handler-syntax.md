---
description: '\_ \_ \_ \_ Ключевые слова try и Except используются для создания обработчика исключений на основе кадров. В следующем примере показана структура обработчика исключений.'
ms.assetid: 1ea2c7f7-f920-4c72-bc62-4eb5e8d70790
title: Синтаксис Exception-Handler
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 11eff9e6ca5d16a71b416f79a09f46795592a696
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104538309"
---
# <a name="exception-handler-syntax"></a>Синтаксис Exception-Handler

Ключевые слова **\_ \_ try** и **\_ \_ except** используются для создания обработчика исключений на основе кадров. В следующем примере показана структура обработчика исключений.


```C++
__try 
{
    // guarded body of code 
 
} 
__except (filter-expression) 
{ 
    // exception-handler block 
 
}
```



Обратите внимание, что блок **\_ \_ try** и блок обработчика исключений должны иметь фигурные скобки ( {} ). Использование оператора **goto** для перехода в тело блока **\_ \_ try** или в блок обработчика исключений не допускается. Это правило применяется как к обработчикам исключений, так и к обработчикам завершения.

Блок **\_ \_ try** содержит защищенный текст кода, который защищается обработчиком исключений. Функция может иметь любое количество обработчиков исключений, и эти операторы обработки исключений могут быть вложены в одну и ту же функцию или в разные функции. Если в блоке **\_ \_ try** возникает исключение, система получает управление и начинает поиск обработчика исключений. Подробное описание этого поиска см. в разделе [обработка исключений](exception-handling.md).

Обработчик исключений получает только исключения, происходящие в одном потоке. Это означает, что если блок **\_ \_ try** содержит вызов функции [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) или [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) , то исключения, происходящие в новом процессе или потоке, не отправляются в этот обработчик.

Система вычисляет критерий фильтра каждого обработчика исключений, который защищает код, в котором произошло исключение, до тех пор, пока не будет обработано исключение или не будет больше обработчиков. Выражение фильтра должно оцениваться как одно из трех следующих значений.



| Значение                              | Значение                                                                                                                                                                                                                |
|------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **\_обработчик выполнения \_ исключения**    | Система передает управление обработчику исключений, и выполнение продолжится в кадре стека, в котором находится обработчик.                                                                                       |
| **\_Поиск продолжения \_ исключения**    | Система продолжит поиск обработчика.                                                                                                                                                                          |
| **\_продолжение \_ выполнения исключения** | Система останавливает поиск обработчика и возвращает управление в точку, в которой произошло исключение. Если исключение недоступно, это приводит к исключению исключения, которое не может **быть исключено \_ \_** . |



 

Критерий фильтра вычисляется в контексте функции, в которой находится обработчик исключений, несмотря на то, что исключение могло произойти в другой функции. Это означает, что критерий фильтра может получить доступ к локальным переменным функции. Аналогичным образом блок обработчика исключений может обращаться к локальным переменным функции, в которой она находится.

Дополнительные примеры см. в разделе [использование обработчика исключений](using-an-exception-handler.md).

Дополнительные сведения о выражениях фильтров и функциях фильтрации см. в разделе [обработка исключений на основе кадров](frame-based-exception-handling.md).

 

 
