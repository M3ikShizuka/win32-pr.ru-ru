---
description: При возникновении ошибки большинство системных функций возвращают код ошибки, обычно 0, NULL или &\# 8211; 1.
ms.assetid: fd5b0d6e-78cf-4f51-b61d-d32576cd485a
title: Код Last-Error
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dd3f7a202f4ed67105620a7d2688cfa278fbdc127ed942861de0d69517e96620
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119912554"
---
# <a name="last-error-code"></a>Код Last-Error

При возникновении ошибки большинство системных функций возвращают код ошибки, обычно 0, **null** или – 1. Многие системные функции также устанавливают дополнительный код ошибки, который называется *кодом последней ошибки*. Этот код ошибки поддерживается отдельно для каждого выполняющегося потока. Ошибка в одном потоке не перезаписывает код последней ошибки в другом потоке. Любая функция может вызвать функцию [**сетластеррор**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) или [**сетластеррорекс**](/windows/desktop/api/Winuser/nf-winuser-setlasterrorex) , чтобы задать код последней ошибки для текущего потока. Эти функции предназначены в первую очередь для библиотек динамической компоновки (DLL), поэтому они могут предоставлять сведения вызывающему приложению. Обратите внимание, что некоторые функции вызывают **сетластеррор** или **сетластеррорекс** с 0 при успешном выполнении, удаляя код ошибки, заданный самой последней неудачной функцией, а другие — нет.

Приложение может получить код последней ошибки с помощью функции [**GetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror) ; код ошибки может дать дополнительные сведения о том, что именно произошло, чтобы завершить работу функции. Документация по системным функциям будет указывать условия, при которых функция задает код последней ошибки.

Система определяет набор кодов ошибок, которые могут быть установлены в качестве кодов последней ошибки или возвращены этими функциями. Коды ошибок представляют собой 32-битные значения (более значащий бит 31). Бит 29 зарезервирован для кодов ошибок, определяемых приложением; код системной ошибки не имеет этого бита. Если для приложения определены коды ошибок, установите этот бит, чтобы указать, что код ошибки определен приложением, и убедитесь, что коды ошибок не конфликтуют с определенными в системе кодами ошибок. Дополнительные сведения см. в разделе WinError. h и [коды системных ошибок](system-error-codes.md).

 

 
