---
description: Обработчик символов загрузит символы при вызове функции Симинитиализе с параметром Финвадепроцесс, установленным в значение TRUE, или при вызове функции Симлоадмодуликс для указания модуля.
ms.assetid: fae1895e-9fed-45e3-8ecf-4c6cc67a6094
title: Загрузка символов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1459f0fd05b490730739852b77edd29df38c04cbe246699552a53b7e30decf11
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119912376"
---
# <a name="symbol-loading"></a>Загрузка символов

Обработчик символов загрузит символы при вызове функции [**симинитиализе**](/windows/desktop/api/Dbghelp/nf-dbghelp-syminitialize) с параметром *финвадепроцесс* , установленным в **значение true** , или при вызове функции [**симлоадмодуликс**](/windows/desktop/api/Dbghelp/nf-dbghelp-symloadmoduleex) для указания модуля. В любом случае обработчик символов либо загружает символы, либо откладывает загрузку символов, пока символы не запрашиваются, в зависимости от параметров, заданных функцией [**симсетоптионс**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) .

Обработчик символов можно использовать для получения символьной информации для любого модуля. его не нужно связывать с процессом, указанным в вызове [**симинитиализе**](/windows/desktop/api/Dbghelp/nf-dbghelp-syminitialize) . Чтобы использовать произвольный модуль, укажите полный путь к образу модуля в параметре *imageName* . Можно использовать путь к любому исполняемому модулю, который содержит отладочную информацию (.exe, .dll,. drv, .sys,. SCR, .cpl или com). Используйте параметр *басеофдлл* , чтобы указать любой адрес загрузки, а адреса символов будут основываться на этом адресе.

Возможно, не потребуется хранить модуль символов, загруженный с течением времени приложения. Чтобы освободить модуль символов из списка модулей обработчика символов, используйте функцию [**SymUnloadModule64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symunloadmodule) . Эта функция освобождает память, выделенную для модуля символов. Чтобы снова использовать символы для этого модуля, необходимо вызвать функцию [**симлоадмодуликс**](/windows/desktop/api/Dbghelp/nf-dbghelp-symloadmoduleex) , даже если установлен параметр символа отложенной загрузки.

## <a name="diagnosing-symbol-load-problems"></a>Диагностика проблем с загрузкой символов

Чтобы просмотреть все попытки загрузки символов, вызовите [**симсетоптионс**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) с помощью симопт \_ Debug. Это приводит к тому, что DbgHelp вызывает функцию [**OutputDebugString**](/windows/win32/api/debugapi/nf-debugapi-outputdebugstringa) с подробными сведениями о поиске символов, например в каталогах, в которых выполняется поиск, и сообщения об ошибках. Если в коде используется [**SymRegisterCallback64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symregistercallback), DBGHELP будет вызывать функцию обратного вызова вместо вызова **OutputDebugString**. Параметр *актионкоде* имеет значение CBA \_ Debug info, \_ а параметр *каллбаккдата* — строка, которую можно отобразить.

Чтобы обеспечить отображение выходных данных отладки в консоли без изменения исходного кода, \_ перед вызовом функции [**симинитиализе**](/windows/desktop/api/Dbghelp/nf-dbghelp-syminitialize) задайте для переменной среды DBGHELP дбгаут значение, отличное от **null** . Чтобы записать сведения в файл, задайте для \_ переменной среды журнала DBGHELP имя файла журнала, который будет использоваться.

Обратите внимание, что эти функции следует использовать только при необходимости. Они могут замедлить загрузку символов для модулей, содержащих много символов.

 

 
