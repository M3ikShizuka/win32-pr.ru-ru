---
description: Обработка исключений в пользовательском режиме в системе обеспечивает поддержку сложных отладчиков.
ms.assetid: c45a7dc6-e6b2-4fc4-9522-12d96893f4c7
title: Обработка исключений отладчика
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f23595f68de31bb009a0b82d9257453ce7073eb489cc6a5b654ab4553ee60474
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120103914"
---
# <a name="debugger-exception-handling"></a>Обработка исключений отладчика

Обработка исключений в пользовательском режиме в системе обеспечивает поддержку сложных отладчиков. Если выполняется отладка процесса, в котором возникает исключение, система создает событие отладки. Если отладчик использует функцию [**ваитфордебужевент**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent) , событие Debug вызывает возврат этой функции с указателем на структуру [**\_ событий Debug**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) . Эта структура содержит идентификаторы процессов и потоков, которые отладчик может использовать для доступа к записи контекста потока. Структура также содержит структуру [**\_ \_ сведений об отладке исключения**](/windows/win32/api/minwinbase/ns-minwinbase-exception_debug_info) , содержащую копию записи исключения.

Когда система выполняет поиск обработчика исключений, она выполняет две попытки уведомления отладчика процесса. Первая попытка уведомления предоставляет отладчику возможность выполнять обработку исключений точек останова или отдельных шагов. Это называется *первым шансом уведомления*. После этого пользователь может выдавать команды отладчика для управления средой процесса до выполнения любых обработчиков исключений. Вторая попытка уведомления отладчика возникает только в том случае, если системе не удается найти обработчик исключений на основе кадров, обрабатывающий исключение. Это называется *уведомлением о последнем шансе*. Если отладчик не обрабатывает исключение после уведомления о последнем шансе, система завершает отлаживаемый процесс.

При каждой попытке уведомления отладчик использует функцию [**континуедебужевент**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) , чтобы вернуть управление системе. Перед возвратом управления отладчик может выполнить обработку исключения и изменить состояние потока соответствующим образом или отказаться от обработки исключения. С помощью **континуедебужевент** отладчик может указать, что он обработал исключение. в этом случае состояние компьютера восстанавливается и выполнение потока продолжается в момент возникновения исключения. Отладчик может также указать, что он не обрабатывал исключение, что приводит к тому, что система продолжит поиск обработчика исключений.

 

 
