---
description: Извлекает код, определяющий тип возникшего исключения. Функцию можно вызывать только внутри выражения фильтра или блока обработчика исключений обработчика исключений.
ms.assetid: f3c4a9f3-c9ae-4d20-85a7-787cb32278d1
title: Макрос GetExceptionCode
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- GetExceptionCode
api_type:
- NA
api_location: ''
ms.openlocfilehash: 5c1badd5317b5a12eb97ed6418873b5c576f520f4a8106361abb1a6f7c95921e
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118162665"
---
# <a name="getexceptioncode-macro"></a>Макрос GetExceptionCode

Извлекает код, определяющий тип возникшего исключения. Функцию можно вызывать только внутри выражения фильтра или блока обработчика исключений обработчика исключений.

> [!Note]  
> Оптимизирующий компилятор Microsoft C/C++ интерпретирует эту функцию как ключевое слово, а ее использование вне соответствующего синтаксиса обработки исключений приводит к ошибке компилятора.

 

## <a name="syntax"></a>Синтаксис


```C++
DWORD GetExceptionCode(void);
```



## <a name="parameters"></a>Параметры

Этот макрос не имеет параметров.

## <a name="return-value"></a>Возвращаемое значение

Возвращаемое значение определяет тип исключения. В следующей таблице приведены коды исключений, которые могут возникать из-за распространенных ошибок программирования. Эти значения определены в Винбасе. h и WinNT. h.



| Код возврата                                                                                                         | Описание                                                                                                                                                                                                                                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <dt>**\_нарушение прав доступа к исключению \_**</dt> </dl>         | Поток пытается выполнить чтение или запись по виртуальному адресу, для которого у него нет доступа.<br/> Это значение определено как \_ нарушение доступа к состоянию \_ .<br/>                                                                                                                                                 |
| <dl> <dt>**\_ \_ превышены границы массива исключений \_**</dt> </dl>   | Поток пытается получить доступ к элементу массива, который находится вне границ, а базовое оборудование поддерживает проверку границ.<br/> Это значение определено как \_ \_ превышение границ для массива состояния \_ .<br/>                                                                                                                 |
| <dl> <dt>**\_точка останова исключения**</dt> </dl>                | Обнаружена точка останова.<br/> Это значение определено как \_ точка останова состояния.<br/>                                                                                                                                                                                                                             |
| <dl> <dt>**неправильное \_ выравнивание типа данных исключения \_**</dt> </dl>    | Поток пытается прочитать или записать данные, которые неправильно выровнены на оборудовании, не обеспечивающем выравнивание. Например, 16-разрядные значения должны быть согласованы по 2-байтным границам, 32-разрядным значениям на 4-байтовых границах и т. д.<br/> Это значение определено как неправильное \_ выравнивание типа данных \_ .<br/>                    |
| <dl> <dt>**ИСКЛЮЧЕНИЕ \_ ФЛТ \_ Денормализованный \_ операнд**</dt> </dl>    | Один из операндов в операции с плавающей точкой является нормальным. Ненормальное значение — это одно из значений, которое слишком мало для представления в качестве стандартного значения с плавающей точкой.<br/> Это значение определяется как \_ \_ Ненормализованный операнд состояния float \_ .<br/>                                                                                  |
| <dl> <dt>**ИСКЛЮЧЕНИЕ \_ ФЛТ \_ деление \_ на \_ ноль**</dt> </dl>     | Поток пытается разделить значение с плавающей запятой на делитель с плавающей запятой 0 (ноль).<br/> Это значение определяется как состояние \_ float \_ с делением \_ на \_ ноль.<br/>                                                                                                                                               |
| <dl> <dt>**ИСКЛЮЧЕНИЕ, \_ ФЛТ \_ неточный \_ результат**</dt> </dl>      | Результат операции с плавающей запятой не может быть представлен в точности в виде десятичной дроби.<br/> Это значение определяется как \_ неточный результат с плавающей ТОЧКОЙ состояния \_ \_ .<br/>                                                                                                                                                |
| <dl> <dt>**ИСКЛЮЧЕНИЕ \_ ФЛТ \_ Недопустимая \_ операция**</dt> </dl>   | Исключение с плавающей запятой, которое не включено в этот список.<br/> Это значение определено как \_ Недопустимая операция с плавающей ТОЧКОЙ состояния \_ \_ .<br/>                                                                                                                                                                             |
| <dl> <dt>**\_ \_ переполнение ФЛТ исключений**</dt> </dl>             | Экспонента операции с плавающей запятой превышает величину, допустимую соответствующим типом.<br/> Это значение определяется как \_ переполнение с плавающей ТОЧКОЙ состояния \_ .<br/>                                                                                                                                         |
| <dl> <dt>**\_ \_ Проверка стека ФЛТ исключения \_**</dt> </dl>         | В стеке произошло превышение или потеря значимости из-за операции с плавающей запятой.<br/> Это значение определяется как \_ \_ Проверка стека с плавающей точкой состояния \_ .<br/>                                                                                                                                                                 |
| <dl> <dt>**\_ \_ потеря значимости ФЛТ исключений**</dt> </dl>            | Экспонента операции с плавающей запятой меньше величины, допустимой для соответствующего типа.<br/> Это значение определяется как \_ НЕзначимое состояние с плавающей запятой \_ .<br/>                                                                                                                                           |
| <dl> <dt>**\_Страница защиты \_ исключений**</dt> </dl>               | Поток обратился к памяти, выделенной с помощью \_ модификатора Page Guard.<br/> Это значение определено как \_ \_ нарушение страницы состояния защиты \_ .<br/>                                                                                                                                                                          |
| <dl> <dt>**\_Недопустимая \_ инструкция исключения**</dt> </dl>      | Поток пытается выполнить недопустимую инструкцию.<br/> Это значение определено как \_ Недопустимый \_ оператор Status.<br/>                                                                                                                                                                                            |
| <dl> <dt>**ИСКЛЮЧЕНИЕ \_ при \_ \_ возникновении ошибки на странице**</dt> </dl>           | Поток пытается получить доступ к неприсутствующей странице, и системе не удается загрузить страницу. Например, это исключение может возникать, если при выполнении программы по сети теряется сетевое подключение.<br/> Это значение определено как состояние \_ в \_ \_ ошибке страницы.<br/>                                   |
| <dl> <dt>**ИСКЛЮЧЕНИЕ \_ int \_ с делением \_ на \_ ноль**</dt> </dl>     | Поток пытается разделить целочисленное значение на целочисленный делитель 0 (ноль).<br/> Это значение определяется как \_ целочисленное состояние \_ деление \_ на \_ ноль.<br/>                                                                                                                                                         |
| <dl> <dt>**\_ \_ переполнение исключения int**</dt> </dl>             | Результат операции с целочисленным значением создает слишком большое значение, которое должно удерживаться в целевой регистрации. В некоторых случаях это приведет к выполнению наиболее значимого бита результата. Некоторые операции не задают флаг "выполнить".<br/> Это значение определено как \_ переполнение целочисленного состояния \_ .<br/> |
| <dl> <dt>**\_недопустимое \_ Расположение обработки исключения**</dt> </dl>      | Обработчик исключений возвращает недопустимый метод обработки диспетчера исключений. Программисты, использующие высокоуровневый язык, например C, не должны столкнуться с этим исключением.<br/> Это значение определено как состояние " \_ недопустимое \_ расположение".<br/>                                                                      |
| <dl> <dt>**\_Недопустимый \_ маркер исключения**</dt> </dl>           | Поток использовал недопустимый обработчик для объекта ядра (возможно, из-за того, что он был закрыт).<br/> Это значение определено как состояние " \_ Недопустимый \_ Handle".<br/>                                                                                                                                                 |
| <dl> <dt>**исключение \_ НЕпродолжаемого \_ исключения**</dt> </dl> | Поток пытается продолжить выполнение после возникновения исключения, которое не является непрерывным.<br/> Это значение определяется как исключение с \_ НЕпродолжаемым состоянием \_ .<br/>                                                                                                                                                       |
| <dl> <dt>**ИСКЛЮЧЕНИЕ \_ Priv, \_ Инструкция**</dt> </dl>         | Поток пытается выполнить инструкцию с операцией, которая не допускается в текущем режиме компьютера.<br/> Это значение определено как \_ инструкция привилегированного состояния \_ .<br/>                                                                                                                           |
| <dl> <dt>**ИСКЛЮЧЕНИЕ — \_ один \_ шаг**</dt> </dl>              | Ловушка трассировки или другой механизм с одной инструкцией сигнализирует, что выполняется одна инструкция.<br/> Это значение определяется как состояние " \_ один \_ шаг".<br/>                                                                                                                                                           |
| <dl> <dt>**\_переполнение стека исключений \_**</dt> </dl>           | Поток использует стек.<br/> Это значение определено как \_ переполнение стека состояний \_ .<br/>                                                                                                                                                                                                                       |
| <dl> <dt>**\_очистить \_ КОНСОЛИДАЦИю состояния**</dt> </dl>          | Выполнена консолидация кадров.<br/>                                                                                                                                                                                                                                                                         |



 

## <a name="remarks"></a>Remarks

Функцию **GetExceptionCode** можно вызывать только внутри выражения фильтра или блока обработчика исключений обработчика исключений. Критерий фильтра вычисляется, если исключение возникает во время выполнения блока **\_ \_ try** и определяет, выполняется ли блок **\_ \_ except** .

Критерий фильтра может вызывать функцию фильтра. Функция фильтра не может вызвать **GetExceptionCode**. Однако возвращаемое значение **GetExceptionCode** может быть передано в качестве параметра функции фильтра. Возвращаемое значение функции [**жетексцептионинформатион**](getexceptioninformation.md) также может передаваться в качестве параметра функции фильтра. **Жетексцептионинформатион** возвращает указатель на структуру, содержащую сведения о коде исключения.

При наличии вложенных обработчиков каждое выражение фильтра вычисляется до тех пор, пока не будет оцениваться как \_ \_ обработчик исключений или \_ продолжение выполнения исключения \_ . Каждое выражение фильтра может вызывать **GetExceptionCode** для получения кода исключения.

Возвращенный код исключения является кодом, созданным аппаратным исключением, или кодом, указанным в функции [**RaiseException**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-raiseexception) для исключения, созданного программным обеспечением.

При обработке исключения точки останова важно увеличить указатель инструкции в записи контекста, чтобы продолжить выполнение этого исключения.

## <a name="examples"></a>Примеры

Пример см. в разделе [использование обработчика исключений](using-an-exception-handler.md).

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|-------------------------------------|------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows \[Только классические приложения XP\]<br/>          |
| Минимальная версия сервера<br/> | Windows Только для \[ настольных приложений сервера 2003\]<br/> |



## <a name="see-also"></a>См. также

<dl> <dt>

[**жетексцептионинформатион**](getexceptioninformation.md)
</dt> <dt>

[**RaiseException**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-raiseexception)
</dt> <dt>

[Функции структурированной обработки исключений](structured-exception-handling-functions.md)
</dt> <dt>

[Общие сведения об обработке структурированных исключений](structured-exception-handling.md)
</dt> </dl>

 

 
