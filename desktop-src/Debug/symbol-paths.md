---
description: Библиотека DbgHelp использует путь поиска символов для поиска отладочных символов (PDB-и DBG-файлов). Путь поиска может состоять из одного или нескольких элементов пути, разделенных точкой с запятой.
ms.assetid: 3527f589-285b-4cdf-b024-17920971a904
title: Пути к символам
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fddf01dfbb5aedfcdd2d96cdfd5d4fdd10e6d3f71b5c69024917ddac534d3824
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118405904"
---
# <a name="symbol-paths"></a>Пути к символам

Библиотека DbgHelp использует путь поиска символов для поиска отладочных символов (PDB-и DBG-файлов). Путь поиска может состоять из одного или нескольких элементов пути, разделенных точкой с запятой.

## <a name="specifying-search-paths"></a>Указание путей поиска

Чтобы указать, где обработчик символов будет искать файлы символов в каталогах дисков, вызовите функцию [**симсетсеарчпас**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetsearchpath) . Кроме того, можно указать путь поиска символов в параметре *усерсеарчпас* функции [**симинитиализе**](/windows/desktop/api/Dbghelp/nf-dbghelp-syminitialize) .

Параметр *усерсеарчпас* в [**Симинитиализе**](/windows/desktop/api/Dbghelp/nf-dbghelp-syminitialize) и параметр *SearchPath* в [**симсетсеарчпас**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetsearchpath) принимают указатель на строку, завершающуюся нулем, которая указывает путь или последовательность путей, разделенных точкой с запятой. Обработчик символов использует эти пути для поиска файлов символов. Если этот параметр имеет **значение NULL**, обработчик символов выполняет поиск в каталоге, содержащем модуль, для которого выполняется поиск символов. В противном случае, если этот параметр указан как значение, отличное от **null** , обработчик символов сначала ищет пути, заданные приложением, перед поиском в каталоге модуля. Если задать \_ \_ путь к символам NT \_ или \_ \_ \_ \_ переменную среды NT Alt Path, обработчик символов выполняет поиск файлов символов в следующем порядке:

1. \_ \_ \_ Переменная среды Path для символов NT.
2. \_ \_ Переменная среды для альтернативного \_ пути к символам NT \_ .
3. Каталог, содержащий соответствующий модуль.

Чтобы получить пути поиска, вызовите функцию [**симжетсеарчпас**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsearchpath) .

Путь поиска для файлов базы данных программы (PDB) отличается от пути для файлов отладки (dbg). Алгоритм определяется функциональными возможностями библиотеки символов. По умолчанию Microsoft Visual C/C++ создает символы формата Microsoft, отделяет их от изображения и помещает их в отдельный PDB-файл. Как правило, PDB-файл будет находиться в каталоге, содержащем исполняемый образ. Visual C/C++ внедряет абсолютный путь к PDB-файлу в исполняемом образе. Если обработчик символов не может найти PDB-файл в этом расположении или если PDB-файл был перемещен в другой каталог, обработчик символов обнаружит PDB-файл, используя путь поиска, описанный для DBG-файлов.

## <a name="path-element-types"></a>Типы элементов Path

Существует три типа элементов Path.

### <a name="standard-path-element"></a>Стандартный элемент Path

Поиск по стандартному элементу Path осуществляется путем просмотра корня каталога, указанного в элементе Path. Обработчик символов также выполняет поиск в подкаталоге "Symbols", соответствующем расширению файла модуля, для которого ищутся символы. Обычно это "DLL", "exe" или "sys". Наконец, он ищет в подкаталоге «Symbols» каталог с тем же именем, что и у расширения. Например, если элемент пути к символу имеет значение "c: \\ мисимболс" и файл, для которого выполняется поиск символов, имеет значение "boo.dll", поиск выполняется в следующих каталогах.

- c: \\ мисимболс  
- c: \\ мисимболс \\ DLL  
- c: \\ \\ DLL- \\ Библиотека символов мисимболс  

Обработчик символов использует эту логику для поиска по любому элементу пути, который не соответствует критериям, чтобы быть *сервером символов* или *кэшем* (как описано ниже).

### <a name="symbol-server-path-element"></a>Элемент Path сервера символов

Элемент пути *сервера символов* использует специальную технологию, которая может найти символ, который является точным соответствием для рассматриваемого модуля. Дополнительные сведения см. [в разделе Использование SymSrv](using-symsrv.md) .

Обработчик символов обрабатывает элемент Path как сервер символов, если он начинается с текста "SRV \* ".

> [!Note]  
> Если текст "SRV \* " не указан, но фактический элемент пути является хранилищем сервера символов, обработчик символов будет действовать так, как если \* бы был указан "SRV". Обработчик символов выполняет это определение, выполняя поиск файла с именем "pingme.txt" в корневом каталоге указанного пути.

 

### <a name="cache-path-element"></a>Элемент пути кэша

Элемент пути к *кэшу* — это разновидность элемента пути сервера символов.

Этот каталог ищется как любой другой сервер символов. Однако если символ не найден здесь и находится в элементе Path, расположенном в цепочке путей к символам, то символ будет скопирован и сохранен на сервере символов, указанном в этом элементе.

Обработчик символов обрабатывает элемент Path как элемент кэша, если начинается с текста "Cache \* ". Чтобы указать кэш в "c: \\ микаче", используйте элемент пути к символам "Cache \* c: \\ микаче".

## <a name="example-search-path"></a>Пример пути поиска

Чтобы увидеть, как это работает, задайте путь поиска.

`cache*c:\myCache;srv*\\symbols\symbols`

<!-- 
See example from https://docs.microsoft.com/windows-hardware/drivers/debugger/symbol-path
cache*c:\MySymbols;srv*https://msdl.microsoft.com/download/symbols
-->

Ниже приведен список подробных выходных данных обработчика символов при поиске NTDLL. PDB с использованием указанного выше пути поиска.

```
DBGHELP: .\ntdll.pdb - file not found
DBGHELP: .\dll\ntdll.pdb - file not found
DBGHELP: .\symbols\dll\ntdll.pdb - file not found
SYMSRV: c:\myCache\ntdll.pdb\0F7FCF88442F4B0E9FB51DC4A754D9DE2\ntdll.pdb not found
SYMSRV: ntdll.pdb from \\symbols\symbols: 10497024 bytes - copied
DBGHELP: c:\myCache\ntdll.pdb\0F7FCF88442F4B0E9FB51DC4A754D9DE2\ntdll.pdb already cached
DBGHELP: ntdll - private symbols & lines
c:\myCache\ntdll.pdb\0F7FCF88442F4B0E9FB51DC4A754D9DE2\ntdll.pdb
```

Первые три строки выходных данных показывают обработчик символов, обрабатывающий первый элемент пути `.` . Это стандартный элемент пути.

В четвертой строке показан обработчик символов, использующий сервер символов для поиска файла во втором элементе Path, `cache*c:\myCache` который является элементом пути к кэшу.

Пятая строка показывает, что файл находится в третьем элементе Path объекта `srv*\\symbols\symbols` , который является элементом пути сервера символов.

Шестая строка показывает, что файл копируется в кэш.

Последние две строки, открываемые файлом из кэша.
