---
title: Коды ошибок устройства
description: Методы Инвокеактион и Куеристатевариабле возвращают значения HRESULT, которые могут указывать на ошибку устройства (то есть сообщение об ошибке, полученное от устройства, сертифицированного для UPnP).
ms.assetid: 4b18a5d4-f6e8-4670-93dd-ecd012940000
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bfcd92d79897318ae6e45fac918dce6af2fe647b
ms.sourcegitcommit: 773fa6257ead6c74154ad3cf46d21e49adc900aa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/09/2020
ms.locfileid: "104488433"
---
# <a name="device-error-codes"></a>Коды ошибок устройства

Методы [**инвокеактион**](/windows/desktop/api/Upnp/nf-upnp-iupnpservice-invokeaction) и [**куеристатевариабле**](/windows/desktop/api/Upnp/nf-upnp-iupnpservice-querystatevariable) возвращают значения **HRESULT** , которые могут указывать на ошибку устройства (то есть сообщение об ошибке, полученное от устройства, сертифицированного для UPnP). При получении ошибки с устройства метод ([**инвокеактион**](/windows/desktop/api/Upnp/nf-upnp-iupnpservice-invokeaction) или [**куеристатевариабле**](/windows/desktop/api/Upnp/nf-upnp-iupnpservice-querystatevariable)) возвращает значение **HRESULT** , основанное на коде ошибки устройства, как описано в этом разделе. Поскольку преобразование применяется к коду ошибки устройства для получения значения **HRESULT** , код ошибки устройства нельзя считать непосредственно из значения **HRESULT** .

## <a name="conversion-of-a-device-error-code-to-an-hresult"></a>Преобразование кода ошибки устройства в значение HRESULT

Существуют стандартные и нестандартные коды ошибок устройств. Стандартные коды имеют одинаковое значение для всех устройств, сертифицированных с помощью UPnP, и имеют значения менее 600. Нестандартные коды зависят от поставщика и имеют значения от 600 до 899.

Независимо от того, является ли код ошибки устройства стандартным, определяет способ создания значения **HRESULT** :

-   Стандартный код ошибки устройства сопоставлен со значением **HRESULT** .

<!-- -->

-   Нестандартный код ошибки устройства внедряется в значение **HRESULT** путем применения формулы.

Обе эти процедуры можно отменить, чтобы определить код ошибки устройства из определенного значения **HRESULT** .

## <a name="deriving-a-device-error-code-from-an-hresult-value"></a>Получение кода ошибки устройства из значения HRESULT

Если значение **HRESULT** больше или равно значению параметра **UPnP \_ e для \_ \_ конкретного действия \_** (0x80040300) и меньше или равно значению параметра max (0x8004042B) **\_ \_ действия \_ \_ UPnP e** , код ошибки устройства является нестандартным — используйте формулу в следующем разделе, чтобы определить код ошибки. В противном случае код ошибки устройства является стандартным — используйте таблицу в разделе Сопоставление для стандартных кодов ошибок устройства, которая обеспечивает сопоставление значения **HRESULT** с кодом ошибки устройства.

Чтобы получить текстовое описание ошибки после вызова [**иупнпсервице:: инвокеактион**](/windows/desktop/api/Upnp/nf-upnp-iupnpservice-invokeaction), задайте для параметра *пварретвал* пустой массив. После возврата этот параметр будет содержать текстовое описание ошибки, если оно возникло.

### <a name="formula-for-nonstandard-device-error-codes"></a>Формула для кодов ошибок нестандартного устройства

Используйте следующую формулу, **Если \_ предопределенное действие UPnP e с \_ \_ конкретными действиями \_** ≤ **HRESULT** ≤**UPnP e относится к конкретному \_ \_ \_ \_ максимуму**.

Код ошибки устройства = (**HRESULT**  -  **UPnP \_ E \_ , \_ специфичная \_ для действия**) + **\_ \_ \_ Базовая операция с ошибкой**

При замене фактических числовых значений уравнение имеет значение: код ошибки устройства = (**HRESULT** -0x80040300) + 0x0258

### <a name="mapping-for-standard-device-error-codes"></a>Сопоставление стандартных кодов ошибок устройства

Используйте следующее сопоставление, если   <  **\_ \_ \_ \_ базовое действие HRESULT UPnP E относится к конкретному**.



| Значение HRESULT                    | Код ошибки устройства                | Фактическое значение |
|----------------------------------|----------------------------------|--------------|
| \_ \_ недопустимое действие UPnP E \_         | \_неправильное \_ действие           | 401          |
| \_ \_ недопустимые \_ аргументы UPnP E      | Недопустимый аргумент "ошибка" \_ \_              | 402          |
| UPNP \_ E \_ не \_ \_ синхронизировано           | \_Недопустимый \_ последовательный \_ номер ошибки | 403          |
| \_ \_ Недопустимая переменная UPnP E \_       | Ошибка \_ недопустимой \_ переменной         | 404          |
| \_ \_ \_ сбой запроса действия UPnP \_ E | \_ \_ Внутренняя ошибка устройства \_ сбоя   | 501          |



 

## <a name="more-information"></a>Дополнительные сведения

Коды ошибок устройства указываются в [архитектуре UPnP для устройств версии 1,0](https://openconnectivity.org/resources/documents.asp). Константы, упомянутые в этом разделе, определяются в файлах UPnP. h и UPnP. idl.

 

 




