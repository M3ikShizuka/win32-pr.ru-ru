---
title: Как зарегистрировать устройство с помощью узла устройства
description: Можно зарегистрировать работающее устройство или устройство, не выполняющее запуск.
ms.assetid: 40e30881-d5fb-4cf9-8dd7-0d50d2621d5c
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d3be1561d82741ce33e7eb05e63b015d5cb38f52
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104068013"
---
# <a name="how-to-register-a-device-with-the-device-host"></a>Как зарегистрировать устройство с помощью узла устройства

Можно зарегистрировать работающее устройство или устройство, не выполняющее запуск.

## <a name="registering-a-running-device"></a>Регистрация работающего устройства

Устройства регистрируются с помощью интерфейса [**иупнпрегистрар**](/windows/desktop/api/Upnphost/nn-upnphost-iupnpregistrar) . Только администраторы могут регистрировать выполняющиеся устройства. Чтобы зарегистрировать устройство с запущенным объектом управления устройством, приложение должно вызвать [**иупнпрегистрар:: регистерруннингдевице**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerrunningdevice), передав следующее:

-   Текст описания устройства.
-   Указатель **IUnknown** на объект управления устройством.
-   Строка инициализации, которая передается в метод [**иупнпдевицеконтрол:: Initialize**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdevicecontrol-initialize) объекта управления устройством.
-   Расположение каталога ресурсов.
-   Время существования устройства.
-   Параметр идентификатора устройства (выходной параметр), который является возвращаемым значением этого вызова; Указатель на идентификатор устройства возвращается в C++.

## <a name="registering-a-non-running-device"></a>Регистрация неработающего устройства

По умолчанию только администраторы и интерактивные пользователи могут регистрировать устройства, которые не работают. Чтобы зарегистрировать устройство в неработающем объекте управления устройством, приложение использует метод [**иупнпрегистрар:: RegisterDevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerdevice) .

Чтобы программно зарегистрировать устройство в неработающем объекте управления устройством, приложение должно вызвать [**иупнпрегистрар:: RegisterDevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerdevice) и передать ему следующие параметры:

-   Текст описания устройства.
-   Идентификатор ProgID объекта управления устройством.
-   Строка инициализации, которая передается в метод [**иупнпдевицеконтрол:: Initialize**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdevicecontrol-initialize) объекта управления устройством.
-   Идентификатор контейнера.
-   Расположение каталога ресурсов.
-   Время существования устройства.
-   Параметр идентификатора устройства (выходной параметр), который является возвращаемым значением этого вызова; Указатель на идентификатор устройства возвращается в C++.

Регистрация неработающих устройств может быть настроена на сохранение во время загрузки системы (при отмене публикации устройств на этапе завершения работы). Таким образом, если они настроены таким образом, устройства публикуются и объявляются каждый раз при загрузке компьютера.

 

 




