---
description: Диспетчер ресурсов прикрепляется в транзакции, когда она начинает участие в этой конкретной транзакции.
ms.assetid: 9c201699-c00b-4efe-9f30-8d4e182de785
title: Зачислений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 52820af2a7b280bc4740d0309fb627725e648685
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104272472"
---
# <a name="enlistments"></a>Зачислений

Диспетчер ресурсов прикрепляется в транзакции, когда она начинает участие в этой конкретной транзакции. Прикрепление определяет, какие уведомления принимает диспетчер ресурсов. Диспетчер ресурсов создает объект прикрепления, когда он закрепляется в транзакции. Этот объект сообщает KTM, что диспетчер ресурсов (RM) запрашивает уведомления об указанной транзакции.

RM предоставляет структуру [**\_ маски уведомлений**](notification-mask.md) , которая содержит сведения о том, какие уведомления запрашиваются.

## <a name="enlistment-functions"></a>Функции прикрепления

Для зачислений используются следующие функции.



| Функция                                                                          | Описание                                                                                                                                                                                                                                                                                                                                                                                             |
|-----------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**коммиткомплете**](/windows/desktop/api/Ktmw32/nf-ktmw32-commitcomplete)                                          | Указывает, что диспетчер ресурсов (RM) завершил фиксацию транзакции, запрошенной диспетчером транзакций (TM).                                                                                                                                                                                                                                                                        |
| [**креатинлистмент**](/windows/desktop/api/KtmW32/nf-ktmw32-createenlistment)                                      | Создает прикрепление, устанавливает его начальное состояние и открывает в зачислении маркер с указанным доступом.                                                                                                                                                                                                                                                                                          |
| [**жетенлистментрековеринформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation) | Извлекает непрозрачную структуру данных восстановления от KTM. Сведения о восстановлении хранятся в журнале от имени диспетчера ресурсов (RM) путем вызова функции [**сетенлистментрековеринформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation) . После сбоя диспетчер ресурсов может использовать функцию [**жетенлистментрековеринформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation) для получения информации. |
| [**опененлистмент**](/windows/desktop/api/Ktmw32/nf-ktmw32-openenlistment)                                          | Открывает существующий объект прикрепления и возвращает маркер в зачисление.                                                                                                                                                                                                                                                                                                                            |
| [**реадонленлистмент**](/windows/desktop/api/Ktmw32/nf-ktmw32-readonlyenlistment)                                  | Запрашивает преобразование указанного прикрепления в прикрепление только для чтения. Прикрепление, доступное только для чтения, не может участвовать в результатах транзакции и не надежно записано для восстановления.                                                                                                                                                                                                    |
| [**роллбаккенлистмент**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackenlistment)                                  | Выполняет откат указанной транзакции, связанной с зачислением. Эта функция не может быть вызвана для прикрепления только для чтения.                                                                                                                                                                                                                                                                   |
| [**сетенлистментрековеринформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation)      | Задает непрозрачную, определяемую пользователем структуру данных восстановления от KTM. Сведения о восстановлении хранятся в журнале от имени диспетчера ресурсов (RM) путем вызова [**сетенлистментрековеринформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation). После сбоя диспетчер ресурсов может использовать [**жетенлистментрековеринформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation) для получения информации.                  |
| [**синглефасережект**](/windows/desktop/api/Ktmw32/nf-ktmw32-singlephasereject)                                    | Указывает, что диспетчер ресурсов (RM) отказывается от однофазного запроса. Когда диспетчер транзакций (TM) получает этот вызов, он инициирует двухфазной фиксацию и отправляет запрос на подготовку во все прикрепленные RMs.                                                                                                                                                                                       |



 

 

 



