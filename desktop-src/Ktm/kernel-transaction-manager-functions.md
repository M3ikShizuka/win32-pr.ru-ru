---
description: В транзакциях используются следующие функции.
ms.assetid: e9704ea8-e67d-4278-b77e-1d4787224d52
title: Функции диспетчера транзакций ядра
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2ce98208b6ac78795be95b7255e9f263971ad6f08237e75ac0ef661c38a0878a
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119535284"
---
# <a name="kernel-transaction-manager-functions"></a>Функции диспетчера транзакций ядра

В транзакциях используются следующие функции.



| Функция                                                            | Описание                                                                                     |
|---------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
| [**CommitTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-committransaction)                      | Запрашивает фиксацию указанной транзакции.                                           |
| [**коммиттрансактионасинк**](/windows/desktop/api/Ktmw32/nf-ktmw32-committransactionasync)            | Запрашивает фиксацию указанной транзакции.                                           |
| [**CreateTransaction**](/windows/desktop/api/KtmW32/nf-ktmw32-createtransaction)                      | Создает новый объект Transaction.                                                               |
| [**жеттрансактионид**](/windows/desktop/api/Ktmw32/nf-ktmw32-gettransactionid)                        | Получает идентификатор для указанной транзакции.                                                   |
| [**жеттрансактионинформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-gettransactioninformation) | Возвращает запрошенные сведения об указанной транзакции.                              |
| [**опентрансактион**](/windows/desktop/api/Ktmw32/nf-ktmw32-opentransaction)                          | Открывает существующую транзакцию.                                                                  |
| [**роллбакккомплете**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackcomplete)                        | Указывает, что диспетчер ресурсов (RM) успешно завершил откат транзакции. |
| [**RollbackTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbacktransaction)                  | Запросы, для которых была произведена откат указанной транзакции.                                         |
| [**роллбакктрансактионасинк**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbacktransactionasync)        | Запросы, для которых была произведена откат указанной транзакции. Эта функция возвращает асинхронно.   |
| [**сеттрансактионинформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-settransactioninformation)      | Задает сведения о транзакции для указанной транзакции.                                 |



 

Для зачислений используются следующие функции.



| Функция                                                                          | Описание                                                                                                                                                                                                                                                                                                                                                                          |
|-----------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**коммиткомплете**](/windows/desktop/api/Ktmw32/nf-ktmw32-commitcomplete)                                          | Указывает, что RM завершил фиксацию транзакции, запрошенной диспетчером транзакций (TM).                                                                                                                                                                                                                                                                        |
| [**коммитенлистмент**](/windows/desktop/api/KtmW32/nf-ktmw32-commitenlistment)                                      | Фиксирует транзакцию для указанного прикрепления.                                                                                                                                                                                                                                                                                                                                |
| [**жетенлистментид**](/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentid)                                        | Получает идентификатор указанного зачисления.                                                                                                                                                                                                                                                                                                                                         |
| [**креатинлистмент**](/windows/desktop/api/KtmW32/nf-ktmw32-createenlistment)                                      | Создает прикрепление, устанавливает его начальное состояние и открывает в зачислении маркер с указанным доступом.                                                                                                                                                                                                                                                                       |
| [**жетенлистментрековеринформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation) | Извлекает непрозрачную структуру данных восстановления от KTM. Сведения о восстановлении хранятся в журнале от имени RM путем вызова функции [**сетенлистментрековеринформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation) . После сбоя диспетчер ресурсов может использовать функцию [**жетенлистментрековеринформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation) для получения информации. |
| [**опененлистмент**](/windows/desktop/api/Ktmw32/nf-ktmw32-openenlistment)                                          | Открывает существующий объект прикрепления и возвращает маркер в зачисление.                                                                                                                                                                                                                                                                                                         |
| [**препаринлистмент**](/windows/desktop/api/KtmW32/nf-ktmw32-prepareenlistment)                                    | Вызывается старшим TM, чтобы указать, что подготовка предварительной подготовки к работе завершена.                                                                                                                                                                                                                                                                                                   |
| [**препрепаринлистмент**](/windows/desktop/api/KtmW32/nf-ktmw32-preprepareenlistment)                              | Вызывается старшим TM, чтобы указать, что подготовка предварительной подготовки к работе завершена.                                                                                                                                                                                                                                                                                                   |
| [**рековеренлистмент**](/windows/desktop/api/Ktmw32/nf-ktmw32-recoverenlistment)                                    | Восстанавливает состояние прикрепления.                                                                                                                                                                                                                                                                                                                                                      |
| [**реадонленлистмент**](/windows/desktop/api/Ktmw32/nf-ktmw32-readonlyenlistment)                                  | Запрашивает преобразование указанного прикрепления в прикрепление только для чтения. Прикрепление, доступное только для чтения, не может участвовать в результатах транзакции и не надежно записано для восстановления.                                                                                                                                                                                 |
| [**роллбаккенлистмент**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackenlistment)                                  | Выполняет откат указанной транзакции, связанной с зачислением. Эта функция не может быть вызвана для прикрепления только для чтения.                                                                                                                                                                                                                                                |
| [**сетенлистментрековеринформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation)      | Задает непрозрачную, определяемую пользователем структуру данных восстановления от KTM. Сведения о восстановлении хранятся в журнале от имени RM путем вызова [**сетенлистментрековеринформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation). После сбоя диспетчер ресурсов может использовать [**жетенлистментрековеринформатион**](/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation) для получения информации.                  |
| [**синглефасережект**](/windows/desktop/api/Ktmw32/nf-ktmw32-singlephasereject)                                    | Указывает, что RM отказывается от однофазного запроса. Когда TM получает этот вызов, он инициирует двухфазной фиксацию и отправляет запрос на подготовку всем прикрепленным к нему RMs.                                                                                                                                                                                                             |



 

Для работы с диспетчерами ресурсов используются следующие функции.



| Функция                                                                           | Описание                                                                                                                                                      |
|------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**креатересаурцеманажер**](/windows/desktop/api/Ktmw32/nf-ktmw32-createresourcemanager)                             | Создает новый объект RM и связывает RM с диспетчером транзакций (TM).                                                                                  |
| [**жетнотификатионресаурцеманажер**](/windows/desktop/api/KtmW32/nf-ktmw32-getnotificationresourcemanager)           | Запрашивает и получает уведомление для RM. Эта функция используется регистром RM для получения уведомлений при изменении состояния транзакции.                 |
| [**жетнотификатионресаурцеманажерасинк**](/windows/desktop/api/KtmW32/nf-ktmw32-getnotificationresourcemanagerasync) | Запрашивает и получает Асинхронное уведомление для RM. Эта функция используется диспетчером ресурсов для регистрации для получения уведомлений при изменении состояния транзакции. |
| [**опенресаурцеманажер**](/windows/desktop/api/Ktmw32/nf-ktmw32-openresourcemanager)                                 | Открывает существующее RM.                                                                                                                                            |
| [**препарекомплете**](/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete)                                         | Указывает, что RM завершил всю обработку, необходимую для обеспечения успешного выполнения операции фиксации или прерывания для указанной транзакции.           |
| [**препрепарекомплете**](/windows/desktop/api/Ktmw32/nf-ktmw32-prepreparecomplete)                                   | Сигнализирует, что эта служба RM завершила предварительную работу, чтобы другие службы управления правами могли начать работу с подготовительными операциями.                                                |
| [**рековерресаурцеманажер**](/windows/desktop/api/Ktmw32/nf-ktmw32-recoverresourcemanager)                           | Восстанавливает состояние RM из файла журнала.                                                                                                                         |
| [**сетресаурцеманажеркомплетионпорт**](/windows/desktop/api/Ktmw32/nf-ktmw32-setresourcemanagercompletionport)       | Связывает указанный порт завершения ввода-вывода с указанным диспетчером ресурсов. Этот порт получает все уведомления для RM.                                             |



 

С диспетчерами транзакций используются следующие функции.



| Функция                                                                            | Описание                                                                 |
|-------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
| [**креатетрансактионманажер**](/windows/desktop/api/Ktmw32/nf-ktmw32-createtransactionmanager)                        | Создает новый объект TM и возвращает маркер с указанным доступом.     |
| [**жеткуррентклокктрансактионманажер**](/windows/desktop/api/Ktmw32/nf-ktmw32-getcurrentclocktransactionmanager) | Получает значение виртуального часов из TM.                                    |
| [**жеттрансактионманажерид**](/windows/desktop/api/Ktmw32/nf-ktmw32-gettransactionmanagerid)                          | Получает идентификатор для указанного TM.                                 |
| [**опентрансактионманажер**](/windows/desktop/api/Ktmw32/nf-ktmw32-opentransactionmanager)                            | Открывает существующий TM.                                                       |
| [**опентрансактионманажербид**](/windows/desktop/api/Ktmw32/nf-ktmw32-opentransactionmanagerbyid)                    | Открывает существующий TM.                                                       |
| [**рековертрансактионманажер**](/windows/desktop/api/Ktmw32/nf-ktmw32-recovertransactionmanager)                      | Восстанавливает состояние TM из файла журнала.                                    |
| [**ренаметрансактионманажер**](/windows/desktop/api/KtmW32/nf-ktmw32-renametransactionmanager)                        | Переименовывает объект TM.                                                               |
| [**роллфорвардтрансактионманажер**](/windows/desktop/api/KtmW32/nf-ktmw32-rollforwardtransactionmanager)              | Восстанавливает состояние TM из файла журнала до указанного значения виртуального часов. |



 

 

 



