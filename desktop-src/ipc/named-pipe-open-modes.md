---
description: Сервер канала определяет доступ к каналу, перекрытие и режимы записи в параметре Двопенмоде функции Креатенамедпипе. Клиенты канала могут задавать эти открытые режимы для обработки канала с помощью функции CreateFile.
ms.assetid: 88824566-93c7-4941-a4fc-3a7ae9a332a4
title: Режимы открытия именованных каналов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9d7fe3f843a157e69d8b938630e5eb9efa95035960cb6578325be6bddd5d93c5
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119451264"
---
# <a name="named-pipe-open-modes"></a>Режимы открытия именованных каналов

Сервер канала определяет доступ к каналу, перекрытие и режимы записи в параметре *двопенмоде* функции [**креатенамедпипе**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) . Клиенты канала могут задавать эти открытые режимы для обработки канала с помощью функции [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) .

## <a name="access-mode"></a>Режим доступа

Установка режима доступа канала эквивалентна указанию доступа для чтения или записи, связанного с дескрипторами сервера канала. В следующей таблице показано эквивалентное универсальное право доступа для каждого режима доступа, который можно указать с помощью [**креатенамедпипе**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea).



| Режим доступа            | Эквивалент универсального права доступа |
|------------------------|---------------------------------|
| \_входящий доступ к каналу \_  | УНИВЕРСАЛЬНое \_ чтение                   |
| \_исходящий доступ к каналу \_ | УНИВЕРСАЛЬНая \_ запись                  |
| \_дуплексный доступ к каналу \_   | универсальное \_ Чтение \| универсальной \_ записи |



 

Если сервер канала создает канал с входящим доступом по КАНАЛу \_ \_ , он доступен только для чтения для сервера канала и предназначен только для записи для клиента канала. Если сервер канала создает канал с \_ исходящим доступом к каналу \_ , он доступен только для записи для сервера канала и доступен только для чтения для клиента канала. Канал, созданный с помощью \_ дуплексного доступа к каналу \_ , доступен для чтения и записи как для сервера канала, так и для клиента канала.

Клиенты канала, использующие [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) для подключения к именованному каналу, должны указать право доступа в параметре *двдесиредакцесс* , совместимом с режимом доступа, заданным сервером канала. Например, клиент должен указать универсальный \_ доступ на чтение, чтобы открыть маркер для канала, который сервер канала создал с \_ исходящим доступом к каналу \_ . Режимы доступа должны быть одинаковыми для всех экземпляров канала.

Для чтения атрибутов канала, например режима чтения или блокировки, обработчик канала должен иметь \_ \_ право доступа к атрибутам чтения файла. для записи атрибутов канала обработчик канала должен иметь \_ \_ право доступа к атрибутам записи файла. Эти права доступа можно сочетать с универсальным правом доступа, подходящим для канала: УНИВЕРСАЛЬНое \_ Чтение с \_ \_ атрибутами записи файла для канала только для чтения или универсальная \_ запись с \_ атрибутами чтения файла для канала, доступного \_ только для записи. Таким образом, ограничиваются права доступа, что обеспечивает лучшую безопасность канала.

## <a name="overlapped-mode"></a>Режим перекрытия

В режиме OVERLAPPED функции, выполняющие длительные операции чтения, записи и подключения, могут возвращать немедленно. Это позволяет потоку выполнять другие операции во время выполнения длительной операции в фоновом режиме. Чтобы задать режим перекрытия, используйте \_ \_ флаг перекрытия флага файла. Дополнительные сведения см. в разделе [синхронные и перекрывающиеся входные и выходные](synchronous-and-overlapped-input-and-output.md)данные.

Функция [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) позволяет клиенту канала задать режим перекрытия ( \_ Перекрытие флагов файлов \_ ) для дескрипторов канала с помощью параметра *двфлагсандаттрибутес* .

## <a name="write-through-mode"></a>Режим Write-Through

Укажите режим сквозной записи с \_ записью флага файла с \_ \_ помощью. Этот режим влияет только на операции записи для каналов типа Byte между клиентами канала и серверами каналов на разных компьютерах. В режиме сквозной записи функции, которые выполняют запись в именованный канал, не возвращают данные, пока они не передаются по сети и в буфер канала на удаленном компьютере. Режим сквозной записи удобен для приложений, требующих синхронизации при каждой операции записи.

Если режим сквозной записи не включен, система повышает эффективность сетевых операций путем буферизации данных до тех пор, пока не будет накоплено минимальное число байтов или пока не истечет максимальный период времени. Буферизация позволяет системе объединить несколько операций записи в одну сетевую передачу. Это означает, что операция записи может быть успешно завершена после того, как система поместит данные в исходящий буфер, но до того, как система передаст их по сети.

Функция [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) позволяет клиенту канала установить режим сквозной записи ( \_ флаг \_ записи \_ в файл) для дескрипторов канала с помощью параметра *двфлагсандаттрибутес* . Режим сквозной записи для обработчика канала нельзя изменить после создания маркера канала. Режим сквозной записи может отличаться для обработки сервером и клиентом одного и того же экземпляра канала.

Клиент канала может использовать функцию [**сетнамедпипехандлестате**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) для управления числом байтов и периодом ожидания перед передачей для канала, в котором отключен режим сквозной записи. Для канала, доступного только для чтения, обработчик канала должен быть открыт с общими \_ \_ \_ правами доступа к атрибутам чтения и записи файла.

 

 
