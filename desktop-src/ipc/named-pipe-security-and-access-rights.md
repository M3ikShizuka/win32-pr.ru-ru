---
description: При вызове функции Креатенамедпипе можно указать дескриптор безопасности для именованного канала. Дескриптор безопасности управляет доступом к клиентским и серверным концам именованного канала.
ms.assetid: f9ea97c9-9a97-4083-82d8-29ffb8be5a77
title: Безопасность именованного канала и права доступа
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 11cada606d8197ac2f64943aa742bbfd614fa4ef
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105647399"
---
# <a name="named-pipe-security-and-access-rights"></a>Безопасность именованного канала и права доступа

Система безопасности Windows позволяет управлять доступом к именованным каналам. Дополнительные сведения о безопасности см. в разделе [модель управления доступом](/windows/desktop/SecAuthZ/access-control-model).

При вызове функции [**креатенамедпипе**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) можно указать [дескриптор безопасности](/windows/desktop/SecAuthZ/security-descriptors) для именованного канала. Дескриптор безопасности управляет доступом к клиентским и серверным концам именованного канала. Если указано **значение NULL**, именованный канал получает дескриптор безопасности по умолчанию. Списки управления доступом в дескрипторе безопасности по умолчанию для именованного канала предоставляют полный доступ учетной записи LocalSystem, администраторам и владельцу создателя. Они также предоставляют доступ на чтение членам группы "все" и анонимной учетной записи.

Чтобы получить дескриптор безопасности именованного канала, вызовите функцию [**жетсекуритинфо**](/windows/desktop/api/aclapi/nf-aclapi-getsecurityinfo) . Чтобы изменить дескриптор безопасности именованного канала, вызовите функцию [**сетсекуритинфо**](/windows/desktop/api/aclapi/nf-aclapi-setsecurityinfo) .

Когда поток вызывает [**креатенамедпипе**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) для открытия маркера на стороне сервера существующего именованного канала, система выполняет проверку доступа перед возвратом маркера. Проверка доступа сравнивает маркер доступа потока и запрашиваемые [права доступа](/windows/desktop/SecAuthZ/access-rights-and-access-masks) с DACL в дескрипторе безопасности именованного канала. Помимо запрошенных прав доступа, список DACL должен разрешить файлу вызывающего потока \_ создать \_ экземпляр канала, \_ обращающийся к именованному каналу.

Аналогично, когда клиент вызывает функцию [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) или [**каллнамедпипе**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) для подключения к клиентской части именованного канала, система выполняет проверку доступа перед предоставлением доступа клиенту.

Маркер, возвращаемый функцией [**креатенамедпипе**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) , всегда имеет доступ к синхронизации. Он также имеет УНИВЕРСАЛЬНое \_ чтение, универсальную \_ запись или и то, и другое, в зависимости от режима открытия канала. Ниже приведены права доступа для каждого открытого режима.



| Режим открытия                           | Права доступа                                              |
|-------------------------------------|------------------------------------------------------------|
| \_Дуплексный доступ к каналу \_ (0x00000003)   | \_Общий \_ доступ для чтения, \_ Общая \_ запись и синхронизация файлов |
| \_Входящий доступ к каналу \_ (0x00000001)  | Общий файл для \_ \_ чтения и синхронизации                        |
| \_Исходящий доступ к каналу \_ (0x00000002) | \_Общая \_ запись и синхронизация файла                       |



 

\_Общий \_ доступ на чтение файлов для именованного канала объединяет права на чтение данных из канала, чтение атрибутов канала, чтение расширенных атрибутов и чтение списка DACL канала.

ФАЙЛовый \_ \_ доступ на запись для именованного канала объединяет права на запись данных в канал, добавляет к нему данные, записывает атрибуты канала, записывает расширенные атрибуты и считывает список DACL канала. Так как \_ файл \_ для добавления данных и файл \_ создания \_ канала \_ имеют одинаковое определение, так что файл с \_ общей \_ записью предоставляет разрешение на создание канала. Чтобы избежать этой проблемы, используйте индивидуальные права вместо использования \_ обычного файла \_ для записи.

Можно запросить \_ право доступа к системе \_ безопасности системы доступа к объекту именованного канала, если требуется прочитать или записать список SACL объекта. Дополнительные сведения см. в разделе [списки управления доступом (ACL)](/windows/desktop/SecAuthZ/access-control-lists) и [права доступа к спискам SACL](/windows/desktop/SecAuthZ/sacl-access-right).

Чтобы запретить удаленным пользователям или пользователям, использующим разные сеансы служб терминалов, доступ к именованному каналу, используйте идентификатор SID входа в список DACL для канала. Идентификатор безопасности входа в систему используется также в качестве входов в систему. Это идентификатор безопасности, используемый для защиты пространства имен объектов для каждого сеанса. Дополнительные сведения см. [в разделе Получение идентификатора безопасности для входа в C++](/previous-versions//aa446670(v=vs.85)).

 

 
