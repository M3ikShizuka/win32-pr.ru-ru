---
description: Стратегии взаимодействия с несколькими клиентами канала и обслуживания нескольких экземпляров каналов.
ms.assetid: c764bde5-e053-4124-b859-1d2839ada918
title: Экземпляры именованного канала
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 188ec90912132e5cdd972ac2b0a4ab3f4c1f97ebbb7bc35e20b75b04eebbfa15
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118481965"
---
# <a name="named-pipe-instances"></a>Экземпляры именованного канала

Простейший сервер канала создает один экземпляр канала, подключается к одному клиенту, обменивается данными с клиентом, отключается от клиента, закрывает обработчик канала и завершается. Однако чаще сервер канала взаимодействует с несколькими клиентами канала. Сервер канала может использовать один экземпляр канала для подключения с несколькими клиентами канала, подключаясь к каждому клиенту последовательно и отключаясь от него, но производительность будет низкой. Сервер канала должен создать несколько экземпляров канала, чтобы эффективно работать с несколькими клиентами одновременно.

Существует три основные стратегии обслуживания нескольких экземпляров каналов.

-   Создайте отдельный поток для каждого экземпляра канала. Пример многопотокового сервера каналов см. в разделе [многопотоковый сервер каналов](multithreaded-pipe-server.md).
-   Используйте перекрывающиеся операции, указав структуру [**OVERLAPPED**](/windows/desktop/api/minwinbase/ns-minwinbase-overlapped) в функциях [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile)и [**коннектнамедпипе**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) . Пример см. в разделе [сервер именованных каналов с перекрытием операций ввода-вывода](named-pipe-server-using-overlapped-i-o.md).
-   Используйте операции с перекрытием с помощью функций [**реадфиликс**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) и [**вритефиликс**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) , которые указывают подпрограммы завершения, выполняемые после завершения операции. Пример см. в разделе [сервер именованных каналов с помощью подпрограмм завершения](named-pipe-server-using-completion-routines.md).

Многопотоковый сервер каналов проще писать, так как поток для каждого экземпляра обрабатывает обмен данными для одного клиента канала. Система выделяет процессорное время каждому потоку по мере необходимости. Но каждый поток использует системные ресурсы, что является недостатком для сервера канала, который обрабатывает большое количество клиентов.

С помощью однопотокового сервера проще координировать операции, затрагивающие несколько клиентов, и упростить защиту общих ресурсов от одновременного доступа с помощью нескольких клиентов. Сложность однопотокового сервера заключается в том, что ему требуется координация перекрывающихся операций, чтобы выделить процессорное время для обработки одновременных нужд клиентов.

 

 
