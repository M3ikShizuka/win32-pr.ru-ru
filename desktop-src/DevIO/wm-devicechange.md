---
description: Уведомляет приложение об изменении конфигурации оборудования устройства или компьютера.
ms.assetid: b64a3983-ee75-4199-9778-1e5b7cec59e4
title: Сообщение WM_DEVICECHANGE (Winuser.h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: b32936d36e01a34acc9ace512703db7584768e8b51a9fe06a791b2a285ee2add
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119017802"
---
# <a name="wm_devicechange-message"></a>\_Сообщение ДЕВИЦЕЧАНЖЕ WM

Уведомляет приложение об изменении конфигурации оборудования устройства или компьютера.

Окно получает это сообщение через функцию [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)) .

```C++
LRESULT CALLBACK WindowProc(HWND   hwnd,     // handle to window
                            UINT   uMsg,     // WM_DEVICECHANGE
                            WPARAM wParam,   // device-change event
                            LPARAM lParam ); // event-specific data
```

## <a name="parameters"></a>Параметры

<dl> <dt>

*HWND* 
</dt> <dd>

Маркер окна.

</dd> <dt>

*Uiacp* 
</dt> <dd>

Идентификатор **WM \_ девицечанже** .

</dd> <dt>

*wParam* 
</dt> <dd>

Произошедшее событие. Этот параметр может принимать одно из следующих значений из файла заголовка ДБТ. h.

| Значение | Значение |
|-------|---------|
| **[ДБТ \_ девнодес \_ изменен](dbt-devnodes-changed.md)**</br>0x0007 | Устройство было добавлено в систему или удалено из нее. |
| **[ДБТ \_ куеричанжеконфиг](dbt-querychangeconfig.md)**</br>0x0017 | Запрошено разрешение на изменение текущей конфигурации (закрепление или Отстыковка). |
| **[ДБТ \_ конфигчанжед](dbt-configchanged.md)**</br>0x0018 | Текущая конфигурация изменилась из-за закрепления или открепления. |
| **[ДБТ \_ конфигчанжеканцелед](dbt-configchangecanceled.md)**</br>0x0019 | Запрос на изменение текущей конфигурации (закрепления или отстыковки) отменен. |
| **[ДБТ \_ девицеарривал](dbt-devicearrival.md)**</br>0x8000 | Устройство или носитель вставлены и теперь доступны. |
| **[ДБТ \_ девицекуериремове](dbt-devicequeryremove.md)**</br>0x8001 | Запрошено разрешение на удаление устройства или фрагмента носителя. Любое приложение может отклонить этот запрос и отменить удаление. |
| **[ДБТ \_ девицекуериремовефаилед](dbt-devicequeryremovefailed.md)**</br>0x8002 | Запрос на удаление устройства или носителя был отменен. |
| **[ДБТ \_ девицеремовепендинг](dbt-deviceremovepending.md)**</br>0x8003 | Устройство или носитель будет удален. Нельзя запретить. |
| **[ДБТ \_ девицеремовекомплете](dbt-deviceremovecomplete.md)**</br>0x8004 | Устройство или носитель с носителем были удалены. |
| **[ДБТ \_ девицетипеспеЦифик](dbt-devicetypespecific.md)**</br>0x8005 | Произошло событие для конкретного устройства. |
| **[ДБТ \_ CUSTOMEVENT](dbt-customevent.md)**</br>0x8006 | Произошло пользовательское событие. |
| **[ДБТ \_ пользователяопределенные](dbt-userdefined.md)**</br>0xFFFF | Значение этого сообщения определяется пользователем. |

</dd> <dt>

*lParam* 
</dt> <dd>

Указатель на структуру, содержащую данные, относящиеся к конкретному событию. Его формат зависит от значения параметра *wParam* . Дополнительные сведения см. в документации по каждому событию.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Возвращает **значение true** , чтобы предоставить запрос.

Верните **широковещательный \_ запрос \_ Deny** , чтобы отклонить запрос.

## <a name="remarks"></a>Remarks

Для устройств, которые предлагают функции, управляемые программным обеспечением, такие как извлечение и блокировка, система обычно отправляет сообщение [ДБТ \_ девицеремовепендинг](dbt-deviceremovepending.md) , чтобы позволить приложениям и драйверам устройств правильно использовать устройство. Если система принудительно удаляет устройство, оно может не отправить сообщение [ДБТ \_ девицекуериремове](dbt-devicequeryremove.md) перед этим.

## <a name="requirements"></a>Requirements (Требования)

| Требование | Значение |
|-------------------------------------|-------------------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента | Windows XP |
| Минимальная версия сервера | Windows Server 2003|
| Заголовок | <dl> <dt>Winuser. h (включает Windows. h или дбт. h)</dt> </dl> |

## <a name="see-also"></a>См. также

<dl> <dt>

[ДБТ \_ конфигчанжеканцелед](dbt-configchangecanceled.md)
</dt> <dt>

[ДБТ \_ конфигчанжед](dbt-configchanged.md)
</dt> <dt>

[ДБТ \_ CUSTOMEVENT](dbt-customevent.md)
</dt> <dt>

[ДБТ \_ девицеарривал](dbt-devicearrival.md)
</dt> <dt>

[ДБТ \_ девицекуериремове](dbt-devicequeryremove.md)
</dt> <dt>

[ДБТ \_ девицекуериремовефаилед](dbt-devicequeryremovefailed.md)
</dt> <dt>

[ДБТ \_ девицеремовекомплете](dbt-deviceremovecomplete.md)
</dt> <dt>

[ДБТ \_ девицеремовепендинг](dbt-deviceremovepending.md)
</dt> <dt>

[ДБТ \_ девицетипеспеЦифик](dbt-devicetypespecific.md)
</dt> <dt>

[ДБТ \_ девнодес \_ изменен](dbt-devnodes-changed.md)
</dt> <dt>

[ДБТ \_ куеричанжеконфиг](dbt-querychangeconfig.md)
</dt> <dt>

[ДБТ \_ пользователяопределенные](dbt-userdefined.md)
</dt> </dl>
