---
title: Обоснование, кернинг и интервалы
description: начиная с Windows 8 DirectWrite предоставляет ряд функций, позволяющих управлять базовыми типографскими, макетами и пробелами, такими как интервалы между символами, кернинг пар и выравнивание.
ms.assetid: A5397132-0806-4842-8B82-E17925FBBBA9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9fdd82e201429adb62e687021f003d7d5d6bedcd228c3102f448b04d1f079f71
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119632652"
---
# <a name="justification-kerning-and-spacing"></a>Обоснование, кернинг и интервалы

начиная с Windows 8 [DirectWrite](direct-write-portal.md) предоставляет ряд функций, позволяющих управлять базовыми типографскими, макетами и пробелами, такими как интервалы между символами, кернинг пар и выравнивание.

## <a name="character-spacing"></a>Интервалы между символами

Пространство символов, также называемое «отслеживанием», — это интервал между символами в выполнении текста.

Ниже приведен пример отслеживания. Первая строка не применяет отслеживание к тексту. Вторая строка увеличивает интервал между символами, а третья линия уменьшает интервал между символами.

![три примера одного и того же текста без отслеживания, больше пробелов и меньшего расстояния.](images/spacing.png)

начиная с Windows 8 [DirectWrite](direct-write-portal.md) добавляет эти методы, чтобы управлять пространством символов в тексте.

при использовании макета [DirectWrite](direct-write-portal.md) для этой цели можно использовать методы [**IDWriteTextLayout1:: жетчарактерспаЦинг**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextlayout1-getcharacterspacing) и [**IDWriteTextLayout1:: сетчарактерспаЦинг**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextlayout1-setcharacterspacing) .

Используйте метод [**жетчарактерспаЦинг**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextlayout1-getcharacterspacing) для определения текущего интервала между символами и возвращает текущий символ, интервал до и после символа, минимальную ширину аванса и структуру [**\_ \_ диапазона текста дврите**](/windows/win32/api/dwrite/ns-dwrite-dwrite_text_range) , которая содержит сведения о начальной позиции и длине оставшегося текста.

Используйте [**сетчарактерспаЦинг**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextlayout1-setcharacterspacing) в интерфейсе [**DWriteTextLayout1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextlayout1) для применения собственного межзнакового интервала к тексту в макете. Метод **сетчарактерспаЦинг** принимает требуемый объем пространства до и после символа, минимально допустимого предварительного значения и [**\_ \_ диапазона текста дврите**](/windows/win32/api/dwrite/ns-dwrite-dwrite_text_range) , определяющего диапазон для применения интервала.

если используется пользовательский макет, [DirectWrite](direct-write-portal.md) поддерживает задание интервала между символами с помощью [**IDWriteTextAnalyzer1:: аппличарактерспаЦинг**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-applycharacterspacing). Используйте этот метод, если требуется пользовательский макет текста, чтобы иметь расширенный контроль над макетом. Этот метод позволяет предоставить **аппличарактерспаЦинг** с начальным и конечным интервалом, минимальной предварительной шириной, длиной карты кластера, количеством глифов, сопоставлением диапазонов символов и глифами, а также ширину каждого глифа, если используется пользовательский макет. Метод возвращает измененные усовершенствования глифа и перечисление [**\_ \_ смещения глифов дврите**](/windows/win32/api/dwrite/ns-dwrite-dwrite_glyph_offset) с новыми смещениями к источнику каждого глифа.

## <a name="kerning"></a>Кернинга

Кернинг — это контекстная коррекция интервалов между парами или триады букв. Определенные интервалы между наборами символов могут повысить удобочитаемость и улучшить качество текста. Важное различие между кернингом и интервалом между символами заключается в том, что межбуквенные интервалы не зависят от текста, а в некоторых случаях между определенными парами символов, как определено в шрифте, используется кернинг.

Изображение — это пример кернинга. Слово «аватар» в верхней строке будет иметь кернинг, чтобы сделать слово более естественным. Как видно из красной рамки вокруг символов, между первыми четырьмя буквами применяется больше интервалов, а у R в конце — больше пространства. Исходный текст без кернинга находится во второй строке. Кернинг в этом примере делает слово более удобочитаемым и естественным.

![пример того же слова с примененным кернингом и без него.](images/kerning.png)

символ перемещается между парами символов, которые кернингом шрифта хранится в таблице кернинга, а [DirectWrite](direct-write-portal.md) анализирует эту таблицу и возвращает сведения для вас через api-интерфейсы кернинга.

Если вы хотите определить, поддерживает ли шрифт кернинг пар, можно использовать метод [**IDWriteFontFace1:: хаскернингпаирс**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-haskerningpairs) . Этот метод возвращает логическое значение, равное 1, если шрифт поддерживает пары кернинга.

[**IDWriteFontFace1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefontface1) также имеет метод, позволяющий получить доступ к корректировкам пар кернинга для индексов глифов. [**жеткернингпаираджустментс**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-getkerningpairadjustments) позволяет ввести массив индексов глифов, а [DirectWrite](direct-write-portal.md) возвращает массив предварительных корректировок глифов. Если шрифт не поддерживает таблицу кернинга, метод возвращает нули для авансовых корректировок глифов.

если используется макет [DirectWrite](direct-write-portal.md) , в интерфейсе [**IDWriteTextLayout1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextlayout1) есть два метода, которые позволяют задать кернинг пар и узнать больше о кернинге пар в макете. Метод [**сетпаиркернинг**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextlayout1-setpairkerning) принимает логическое представление о том, требуется ли включить кернинг пар и [**\_ \_ диапазон текста дврите**](/windows/win32/api/dwrite/ns-dwrite-dwrite_text_range) , определяющий диапазон текста, к которому он применяется. Если вы хотите узнать, включено ли кернинг пар для текстового диапазона, можно использовать метод [**жетпаиркернинг**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextlayout1-getpairkerning) , который принимает в текущем положении и возвращает логическое значение, соответствующее независимо от того, включено ли кернинг пар, и к текстовому диапазону, к которому применяется параметр кернинга.

## <a name="justification"></a>Обоснование

Обоснование — это процесс выравнивания текста таким образом, чтобы он заполнил все пространство внутри столбца путем увеличения количества символов или кластеров глифов или добавления символов обоснования для достижения одного и того же результата. Как правило, это достигается путем определения места добавления пространства в строку текста и вставки пробелов в эти критические возможности. Эти элементы интервалов могут также различаться в латинском алфавите, поэтому текст выравнивается путем увеличения ширины элементов, а в арабском — с помощью кашиды. Ниже приведен пример арабского и латиницы-скрипта как по ширине, так и по ширине.

![Пример арабского и латиницыного скрипта как по ширине, так и без выравнивания.](images/justification.png)

начиная с Windows 8 [DirectWrite](direct-write-portal.md) имеет ряд методов, позволяющих выровнять текст в приложениях.

В перечислении [**\_ \_ выравнивания текста дврите**](/windows/win32/api/dwrite/ne-dwrite-dwrite_text_alignment) есть дополнительное значение. вы можете использовать метод [**сеттексталигнмент**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-settextalignment) и передайте постоянную константу **\_ \_ выравнивания \_ текста дврите** и [DirectWrite](direct-write-portal.md) выравнивает текст и вставляете соответствующий символ обоснования для скрипта.

Если вы используете пользовательский макет, то можете воспользоваться преимуществами обоснования. [DirectWrite](direct-write-portal.md) имеет три метода в интерфейсе [**IDWriteTextAnalyzer1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalyzer1) , которые можно использовать для добавления обоснования в пользовательский макет.

Первый метод — [**жетжустификатионоппортунитиес**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getjustificationopportunities), который принимает текст, который необходимо выровнять, и возвращает структуру [**\_ \_ возможностей обоснования дврите**](/windows/win32/api/Dwrite_1/ns-dwrite_1-dwrite_justification_opportunity) , которая описывает, где можно добавить символы выравнивания, чтобы выровнять текст.

Вторая функция — [**жустифиглифадванцес**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-justifyglyphadvances), которая выравнивает массив по глифам, чтобы они соответствовали ширине линии. Этот метод принимает структуру [**\_ \_ возможностей обоснования Дврите**](/windows/win32/api/Dwrite_1/ns-dwrite_1-dwrite_justification_opportunity) , которую [**жетжустификатионоппортунитиес**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getjustificationopportunities) создает, а также усовершенствования глифов и смещения глифов. Затем он создает выравнивание по ширине знаков и перечисление [**\_ \_ смещения глифов дврите**](/windows/win32/api/dwrite/ns-dwrite-dwrite_glyph_offset) , которое содержит выровненные смещения глифов.

Третья функция — [**жетжустифиедглифс**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getjustifiedglyphs), которая заполняет новые глифы для сложных скриптов, где обоснование увеличило возможности для глифов. **Жетжустифиедглифс** необходимо вызывать только в том случае, если сценарий содержит конкретный символ обоснования, возвращаемый [**жетскриптпропертиес**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getscriptproperties). Этот метод принимает сведения о шрифте, длине текста, EM-размере глифов, скрипте текста, количестве глифов, кластерной карте, смещении исходного глифа/сдвиге, выравнивании по ширине/смещению глифов и свойствам глифов. Метод возвращает фактическое число глифов, обновленную карту кластеров, обновленные индексы глифов с вставленными глифами обоснования, обновленными смещениями глифов и усовершенствованиями глифов.

 

 