---
title: Метрики текста
description: Чтобы помочь вам в разметке, выборе пользовательского шрифта и других операциях с интенсивным использованием метрик, начиная с Windows 8, DirectWrite имеет ряд новых API-интерфейсов для выражения всех сведений о шрифтах, которые могут потребоваться для разработки приложений Rich Text.
ms.assetid: 9df8c675-6f4d-4de7-916e-7dc51f5f04aa
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 73647ae4521b23afb399a4c66c8b25cdc46ba1b5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "105681700"
---
# <a name="text-metrics"></a>Метрики текста

Чтобы помочь вам в разметке, выборе пользовательского шрифта и других операциях с интенсивным использованием метрик, начиная с Windows 8, [DirectWrite](direct-write-portal.md) имеет ряд новых API-интерфейсов для выражения всех сведений о шрифтах, которые могут потребоваться для разработки приложений Rich Text.

## <a name="panose"></a>PANOSE

PANOSE — это система визуальной классификации для идентификации гарнитур. Классификация PANOSE содержит сведения о семействе, стиле с засечками, весе, пропорции, контрасте, обводке, стиле ARM, X-высоте и т. д. Эти сведения описывают визуальный стиль шрифта. Эти сведения важны, так как шрифты со сходными значениями PANOSE выглядят одинаково. Это очень полезно в ситуациях, когда шрифт недоступен, и приложение должно вернуться к доступному шрифту. Сравнение значений PANOSE для шрифтов позволяет выбрать шрифт, похожий на исходный шрифт.

Чтобы получить доступ к сведениям о PANOSE для шрифта, используйте метод [**жетпаносе**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefont1-getpanose) в интерфейсах [**IDWriteFont1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefont1) и [**IDWriteFontFace1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefontface1) . Этот метод возвращает перечисление [**\_ Panose дврите**](/windows/win32/api/Dwrite_1/ns-dwrite_1-dwrite_panose) , которое содержит все сведения о Panose для этого шрифта.

## <a name="additional-metrics"></a>Дополнительные метрики

Начиная с Windows 8, API [DirectWrite](direct-write-portal.md) также поддерживает ряд новых метрик для выражения полезной информации о шрифтах для приложения. Эти новые метрики включают эти сведения.

-   Метрики левой, правой, верхней и нижней границ прямоугольника.
-   Позиционирование X и Y для надстрочных и подстрочных элементов.
-   Сведения о масштабировании X и Y для элементов надстрочного и подстрочных индексов.
-   Имеет ли шрифт типографские метрики.

Все эти сведения доступны [**через новый метод**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefont1-getmetrics) [**IDWriteFontFace1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefontface1) для интерфейсов и [**IDWriteFont1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefont1) . Этот метод возвращает структуру [**дврите \_ Font \_ METRICS1**](/windows/win32/api/Dwrite_1/ns-dwrite_1-dwrite_font_metrics1) , которая содержит все эти сведения.

## <a name="caret-metrics"></a>Метрики курсора

Чтобы создать приложения для редактирования текста, необходим доступ к сведениям о том, как нарисовать курсор, который осуществляет навигацию по тексту. Начиная с Windows 8, [DirectWrite](direct-write-portal.md) предоставляет метод [**жеткаретметрикс**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-getcaretmetrics) для интерфейсов [**IDWriteFontFace1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefontface1) и [**IDWriteFont1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefont1) для этого сценария. **Жеткаретметрикс** возвращает перечисление [**\_ \_ метрик дврите**](/windows/win32/api/Dwrite_1/ns-dwrite_1-dwrite_caret_metrics) , которое содержит сведения о наклоне и смещении курсора вдоль базового плана.

Эти сведения особенно полезны, если вы хотите, чтобы их курсоры были наклонно выполнены с помощью курсивного текста.

## <a name="monospaced-discoverability"></a>Возможность обнаружения с пробелом

Приложения, позволяющие пользователям писать код компьютера, часто используют шрифты с ограниченными пробелами вместо более традиционных шрифтов. Таким образом, вы можете получить более полный контроль над выбором шрифтов в приложениях, связанных с разработкой, [DirectWrite](direct-write-portal.md) выражает независимо от того, является ли шрифт пробелом через API. Метод [**исмоноспацедфонт**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefont1-ismonospacedfont) в интерфейсе [**IDWriteFontFace1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefontface1) возвращает логическое значение, указывающее, является ли шрифт пробелом.

## <a name="font-name-matching"></a>Сопоставление имен шрифтов

Приложения Rich Text, такие как модули чтения PDF, должны иметь возможность сопоставлять шрифты в своем содержимом с шрифтами в системе, которым требуется доступ к полным именам шрифтов в нескольких форматах. Так что вы можете лучше сопоставлять шрифты, [DirectWrite](direct-write-portal.md) содержит перечисление, которое выражает полные сведения об именовании шрифта во многих форматах.

Используйте перечисление [**\_ \_ \_ идентификаторов информационной строки дврите**](/windows/win32/api/dwrite/ne-dwrite-dwrite_informational_string_id) , чтобы получить полное имя, имя PostScript и имя CID PostScript любого шрифта в системе. Эта информация полезна при необходимости сопоставления шрифтов в приложении с соответствующими шрифтами в локальной системе.

## <a name="glyph-advances"></a>Усовершенствования глифов

Метод **жетглифадванцес** в интерфейсах [**IDWriteFontFace1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefontface1) и [**IDWriteFont1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefont1) принимает количество глифов и индексы, которые необходимы для получения сведений о, а затем возвращает авансы для рассматриваемых глифов.

## <a name="unicode-ranges"></a>Диапазоны Юникода

Приложениям, которым требуется управлять собственным шрифтом, требуется доступ к диапазонам Юникода, поддерживаемым шрифтом. Таким образом, если шрифт codepoint не поддерживается в Юникоде, приложение может выбрать подходящий шрифт, который содержит этот глиф. Без этой информации приложение может использовать шрифт, который не содержит все глифы, необходимые для отображения сведений.

Метод [**жетуникодеранжес**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefont1-getunicoderanges) в интерфейсах [**IDWriteFontFace1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefontface1) и [**IDWriteFont1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefont1) принимает максимальное число диапазонов, переданных клиентом, и возвращает фактические диапазоны, поддерживаемые шрифтом.

## <a name="eudc-font-collection"></a>Коллекция шрифтов EUDC

Используйте метод [**жетеудкфонтколлектион**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefactory1-geteudcfontcollection) в интерфейсе [**IDWriteFactory1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefactory1) для доступа к коллекции шрифтов EUDC. Этот метод работает так же, как [**жетсистемфонтколлектион**](/windows/win32/api/dwrite/nf-dwrite-idwritefactory-getsystemfontcollection), но вместо этого возвращает указатель на коллекцию шрифтов EUDC.

 

 