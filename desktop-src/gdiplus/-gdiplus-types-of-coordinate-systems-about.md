---
description: 'Windows GDI+ использует три координатных пространства: мир, страница и устройство.'
ms.assetid: eb20f5e9-25f5-4f27-8ea5-83f6819425ed
title: Типы систем координат
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e259f43d4fc0d6a74021f3a6125f85652f51ac95
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127462262"
---
# <a name="types-of-coordinate-systems"></a>Типы систем координат

Windows GDI+ использует три координатных пространства: мир, страница и устройство. При выполнении вызова `myGraphics.DrawLine(&myPen, 0, 0, 160, 80)` точки, передаваемые в [**Graphics::D метод равлине**](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inconstpoint__inconstpoint_)) — (0, 0) и (160, 80) — находятся в мировом пространстве координат. прежде чем GDI+ может нарисовать линию на экране, координаты проходят через последовательность преобразований. Одно преобразование преобразует координаты мира в координаты страницы, а другое преобразование преобразует координаты страницы в координаты устройства.

Предположим, что вы хотите работать с системой координат, имеющей свою точку в тексте клиентской области, а не в левом верхнем углу. Предположим, например, что вы хотите, чтобы источник был 100 пикселей от левого края клиентской области и 50 пикселей от верхнего края клиентской области. На следующем рисунке показана такая система координат.

![снимок экрана окна, содержащего метки осей координат](images/aboutgdip05-art01.png)

Выполнив вызов `myGraphics.DrawLine(&myPen, 0, 0, 160, 80)` , вы получите строку, показанную на следующем рисунке.

![снимок экрана предыдущего окна, но со синей линией, расширяющейся по диагонали от начала координат](images/aboutgdip05-art02.png)

Ниже приведены координаты конечных точек линии в трех координатных пространствах.



| Пробел       |  Координаты конечной точки                       |
|--------|-------------------------|
| World  | (от 0 до 0) до (160, 80)     |
| Страница   | (100, 50) в (260, 130) |
| Устройство | (100, 50) в (260, 130) |



 

Обратите внимание, что координатное пространство страницы имеет свой источник в левом верхнем углу клиентской области. Это всегда будет так. Также обратите внимание, что поскольку единицей измерения является пиксель, координаты устройства совпадают с координатами страницы. Если задать для единицы измерения значение, отличное от пикселей (например, дюймы), то координаты устройства будут отличаться от координат на странице.

Преобразование, которое сопоставляет мировые координаты с координатами страницы, называется *мировым преобразованием* и поддерживается [**графическим**](/windows/desktop/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) объектом. В предыдущем примере преобразование «мир» представляет собой единицы перевода 100 в направлении x и 50 единиц по оси y. В следующем примере задается универсальное преобразование **графического** объекта, а затем этот **графический** объект используется для отрисовки линии, показанной на предыдущем рисунке.


```
myGraphics.TranslateTransform(100.0f, 50.0f);

myGraphics.DrawLine(&myPen, 0, 0, 160, 80);
```



Преобразование, которое сопоставляет координаты страницы с координатами устройства, называется *преобразованием «страница*». Класс [**Graphics**](/windows/desktop/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) предоставляет четыре метода для управления и проверки преобразования страницы: [**Graphics:: сетпажеунит**](/windows/desktop/api/Gdiplusgraphics/nf-gdiplusgraphics-graphics-setpageunit), [**Graphics:: Жетпажеунит**](/windows/desktop/api/Gdiplusgraphics/nf-gdiplusgraphics-graphics-getpageunit), [**Graphics:: сетпажескале**](/windows/desktop/api/Gdiplusgraphics/nf-gdiplusgraphics-graphics-setpagescale)и [**Graphics:: жетпажескале**](/windows/desktop/api/Gdiplusgraphics/nf-gdiplusgraphics-graphics-getpagescale). Класс **Graphics** также предоставляет два метода, [**Graphics:: жетдпикс**](/windows/desktop/api/Gdiplusgraphics/nf-gdiplusgraphics-graphics-getdpix) и [**Graphics:: жетдпий**](/windows/desktop/api/Gdiplusgraphics/nf-gdiplusgraphics-graphics-getdpiy), для проверки горизонтальной и вертикальной точек на дюйм устройства вывода.

Для указания единицы измерения можно использовать метод [**Graphics:: сетпажеунит**](/windows/desktop/api/Gdiplusgraphics/nf-gdiplusgraphics-graphics-setpageunit) класса [**Graphics**](/windows/desktop/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) . В следующем примере рисуется линия от (0,0) до (2, 1), где точка (2, 1) имеет значение 2 дюйма справа и 1 дюйм вниз от точки (0, 0).


```
myGraphics.SetPageUnit(UnitInch);

myGraphics.DrawLine(&myPen, 0, 0, 2, 1);
```



> [!Note]
> Если вы не укажете толщину пера при создании пера, в предыдущем примере будет нарисована линия шириной в один дюйм. Можно указать ширину пера во втором аргументе конструктора [**Pen**](/windows/desktop/api/gdipluspen/nl-gdipluspen-pen) :
> <br/><br/>
> `Pen myPen(Color(255, 0, 0, 0), 1/myGraphics.GetDpiX())`.

 

Если предполагается, что устройство вывода имеет 96 точек на дюйм в горизонтальном направлении и 96 точек на дюйм в вертикальном направлении, конечные точки строки в предыдущем примере имеют следующие координаты в трех координатных пространствах:



| Пробел       | Координаты конечной точки                    |
|--------|---------------------|
| World  | (0, 0) на (2, 1)    |
| Страница   | (0, 0) на (2, 1)    |
| Устройство | (0, 0, до (192, 96) |



 

Для получения различных эффектов можно сочетать преобразования «мир» и «страница». Например, предположим, что вы хотите использовать дюйма в качестве единицы измерения и хотите, чтобы источник координат был 2 дюйма от левого края клиентской области и 1/2 дюйма от верхней части клиентской области. В следующем примере настраивается преобразование «мир» и «страница» [**графического**](/windows/desktop/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) объекта, после чего рисуется строка от (0, 0) до (2, 1).


```
myGraphics.TranslateTransform(2.0f, 0.5f);
myGraphics.SetPageUnit(UnitInch);
myGraphics.DrawLine(&myPen, 0, 0, 2, 1);
```



На следующем рисунке показана линия и система координат.

![снимок экрана предыдущего окна, но шире, с осями, расположенными слева, с пометкой по-другому](images/aboutgdip05-art03.png)

Если предполагается, что устройство вывода имеет 96 точек на дюйм в горизонтальном направлении и 96 точек на дюйм в вертикальном направлении, конечные точки строки в предыдущем примере имеют следующие координаты в трех координатных пространствах:



| Пробел       | Координаты конечной точки                        |
|--------|-------------------------|
| World  | (0, 0) на (2, 1)        |
| Страница   | (от 2, 0,5) до (4, 1,5)    |
| Устройство | (192, 48) в (384, 144) |



 

 

 
