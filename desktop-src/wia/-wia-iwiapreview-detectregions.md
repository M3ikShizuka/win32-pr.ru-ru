---
description: 'Вызывает фильтр сегментации драйвера и передает в фильтр нефильтрованное изображение, кэшированное методом Ивиапревиев:: Жетневпревиев.'
ms.assetid: 4ae817b5-7091-432e-b004-0e53ae14fdb2
title: 'Ивиапревиев: метод:D Етектрегионс (WIA. h)'
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- IWiaPreview.DetectRegions
api_type:
- COM
api_location:
- Wia.h
ms.openlocfilehash: 40665d2aae6e1e2dffa4356540afb05d45050492
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263135"
---
# <a name="iwiapreviewdetectregions-method"></a>Ивиапревиев: метод:D Етектрегионс

Вызывает фильтр сегментации драйвера и передает в фильтр нефильтрованное изображение, кэшированное методом [**ивиапревиев:: жетневпревиев**](-wia-iwiapreview-getnewpreview.md) .

## <a name="syntax"></a>Синтаксис


```C++
HRESULT DetectRegions(
  [in] LONG lFlags
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*лфлагс* \[ окне\]
</dt> <dd>

Тип: **Long**

Не используется. Установите нулевое значение (0).

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Тип: **HRESULT**

Этот метод может возвращать одно из этих значений.



| Код возврата                                                                               | Описание                                          |
|-------------------------------------------------------------------------------------------|------------------------------------------------------|
| <dl> <dt>**\_ОК**</dt> </dl>      | Операция прошла успешно.<br/>              |
| <dl> <dt>**E \_ нотимпл**</dt> </dl> | Драйвер не поддерживает сегментацию.<br/> |
| <dl> <dt>**ином**</dt> </dl>  | Стандартный код ошибки COM.<br/>                |



 

## <a name="remarks"></a>Комментарии

Приложение должно вызвать метод [**ивиапревиев:: жетневпревиев**](-wia-iwiapreview-getnewpreview.md) перед вызовом этой функции.

Когда компонент предварительной версии Windows Image (WIA) 2,0 Preview вызывает **ивиапревиев::D етектрегионс**, он вызывает фильтр сегментации драйвера и передает интерфейс [**IWiaItem2**](-wia-iwiaitem2.md) , который ранее был передан [**ивиапревиев:: жетневпревиев**](-wia-iwiapreview-getnewpreview.md). Он также передает внутренне кэшированное изображение в фильтр. Фильтр сегментации использует кэшированный образ для создания дочерних экстентов.

Если приложение изменяет любые свойства интерфейса [**IWiaItem2**](-wia-iwiaitem2.md) после вызова [**Ивиапревиев:: жетневпревиев**](-wia-iwiapreview-getnewpreview.md), исходные свойства необходимо восстановить до того, как приложение вызовет **ивиапревиев::D етектрегионс**. Используйте [**жетпропертистреам**](/windows/desktop/api/wia_xp/nf-wia_xp-iwiapropertystorage-getpropertystream) и [**сетпропертистреам**](/windows/desktop/api/wia_xp/nf-wia_xp-iwiapropertystorage-setpropertystream) для восстановления исходных свойств.

**Ивиапревиев::D етектрегионс** используется для определения подобластей кэшированного изображения. Для каждой обнаруженной вложенной области в интерфейсе [**IWiaItem2**](-wia-iwiaitem2.md) создается новый дочерний элемент WIA 2,0. Для каждого дочернего элемента фильтр сегментации должен задать значения для следующих свойств WIA 2,0: WIA- \_ IP \_ КСПОС, WIA- \_ адресов \_ ИПОС, WIA-пакетов \_ \_ ксекстент и WIA-пакетов \_ \_ екстент. Более расширенный фильтр устанавливает другие свойства WIA 2,0, такие как IP- \_ адреса WIA, \_ деравномерное смещение \_ X и WIA \_ \_ \_ , если драйвер поддерживает отмену наклона. Кспос IP-адресов WIA \_ \_ , WIA-пакетов \_ \_ ИПОС, WIA-пакетов \_ \_ ксекстент и WIA- \_ IP \_ екстент Properties представляют ограничивающий прямоугольник сканируемой области.

Драйвер может не поддерживать сегментацию. Перед вызовом **ивиапревиев::D етектрегионс** приложение обычно проверяет, поддерживает ли драйвер \_ \_ свойство сегментации IP-адресов. Если свойство не реализовано, сегментация не поддерживается и **ивиапревиев::D етектрегионс** завершает работу и возвращает E \_ нотимпл.

Приложение должно очистить дочерние элементы, созданные путем вызова **ивиапревиев::D етектрегионс**. Например, если приложение выполняет дополнительный вызов **ивиапревиев::D етектрегионс** для того же элемента, он должен очистить предыдущие дочерние элементы.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Только для \[ классических приложений Windows Vista\]<br/>                                     |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2008\]<br/>                               |
| Header<br/>                   | <dl> <dt>WIA. h</dt> </dl>   |
| IDL<br/>                      | <dl> <dt>WIA. idl</dt> </dl> |



 

 




