---
title: Реализация модели безопасности Teredo
description: Модель безопасности Teredo основана на технологии платформы фильтрации Windows (WFP), встроенной в Windows Vista. Поэтому рекомендуется, чтобы брандмауэры сторонних производителей использовали WFP для реализации модели безопасности Teredo.
ms.assetid: ee81e5f1-e3e0-440e-a53f-2accced476bc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a39668f8e1c86e0cd5b12056df5eb9a5fd9cd3ee
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103792937"
---
# <a name="implementing-the-teredo-security-model"></a>Реализация модели безопасности Teredo

Модель безопасности Teredo основана на технологии [платформы фильтрации Windows](/windows/desktop/FWP/windows-filtering-platform-start-page) (WFP), встроенной в Windows Vista. Поэтому рекомендуется, чтобы брандмауэры сторонних производителей использовали WFP для реализации модели безопасности [Teredo](about-teredo.md) .

Общая реализация [модели безопасности Teredo](the-teredo-security-model.md) требует следующего:

-   На компьютере должен быть зарегистрирован брандмауэр узла с поддержкой IPv6 в центре безопасности Windows (WSC). В отсутствие брандмауэра на основе узла или самого интерфейса WSC интерфейс Teredo будет недоступен для использования. Это единственное требование для получения запрошенного трафика из Интернета через интерфейс Teredo.
-   Любое приложение, которое получает незапрошенный трафик из Интернета через интерфейс Teredo, должно зарегистрироваться в брандмауэре с поддержкой IPv6, например в [брандмауэре Windows](/previous-versions/windows/desktop/ics/windows-firewall-start-page), прежде чем получать нежелательный трафик.

Адрес Teredo становится неактивным, если трафик не был отправлен или получен через интерфейс Teredo в течение одного часа, а приложения, удовлетворяющие необходимым критериям безопасности для незапрошенного трафика, не запущены или не имеют открытых сокетов прослушивания.

После перезагрузки компьютера или если адрес Teredo теряет свои квалификации, Windows Vista автоматически уточняет адрес и сделает его доступным для использования, как только приложение привязывается к сокетам, поддерживающим IPv6. Важно отметить, что параметр брандмауэра Windows "обход узлов", заданный приложением, чтобы разрешить незапрошенный трафик через Teredo, сохраняется в процессе перезагрузки.

## <a name="firewall-requirements-for-teredo"></a>Требования к брандмауэру для Teredo

Поставщики брандмауэра могут без труда включить поддержку Teredo в своих продуктах и защитить их пользователей, используя возможности платформы фильтрации Windows. Это можно сделать, зарегистрировав брандмауэр с поддержкой IPv6 в центре безопасности Windows, добавляя соответствующие правила в подуровень Teredo WFP и используя встроенные API в Windows для перечисления приложений, которые могут прослушивать незапрошенный трафик через Teredo. В ситуациях, когда приложению не требуется прослушивать запрашиваемый трафик через Teredo, брандмауэры не требуют дополнительных правил, добавленных в WFP. Однако регистрация брандмауэра, поддерживающая IPv6 с помощью центра безопасности Windows, по-прежнему является обязательным требованием сделать адрес Teredo доступным для использования.

Для поддержки этого сценария брандмауэр должен поддерживать IPv6 и быть зарегистрированным в центре безопасности Windows. Кроме того, брандмауэр не должен изменять состояние запуска или запуска службы центра безопасности Windows (всксвк), так как Teredo зависит от сведений о состоянии, предоставленных через API-интерфейсы WSC.

API, используемый для регистрации брандмауэра в WSC, можно получить, обратившись в корпорацию Майкрософт по адресу wscisv@microsoft.com . Для раскрытия этого API в связи с проблемами безопасности требуется соглашение о неразглашении (НЕРАЗГЛАШЕНИИ).

В следующей документации описаны фильтры и исключения, используемые для обеспечения оптимальной совместимости с Teredo.

-   [Реализация фильтров брандмауэра для Teredo](implementing-firewall-filters-for-teredo.md)
-   [Требуемые исключения брандмауэра для Teredo](required-firewall-exceptions-for-teredo.md)
-   [Требуемые исключения платформы фильтрации Windows для Teredo](required-windows-filtering-platform-exceptions-for-teredo.md)

## <a name="firewall-requirements-for-other-ipv6-transition-technologies"></a>Требования к брандмауэру для других технологий туннелирования IPv6

Для поддержки других технологий туннелирования IPv6 (таких как 6to4 и ISATAP) программный брандмауэр узла должен поддерживать обработку трафика IPv6. IP-протокол 41 указывает, что заголовок IPv6 следует за заголовком IPv4. Когда брандмауэр узла встречает протокол 41, он должен распознать, что пакет является инкапсулированным в IPv6 пакетом, и, как следствие, должен правильно обрабатывать пакет и принимать решения Accept/DENY на основе правил IPv6 в его политике.

 

 