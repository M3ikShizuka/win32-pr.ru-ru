---
title: Представления в виде дерева
description: Благодаря представлению в виде дерева пользователи могут просматривать и взаимодействовать с коллекцией объектов, упорядоченной по иерархии, используя один выбор или множественный выбор.
ms.assetid: f0206485-e028-41d8-9be2-5d59f0a0b677
ms.topic: article
ms.date: 10/20/2020
ms.openlocfilehash: b0b5a456673338fec7240bb3b3a11047327239f70675786f26add1bbecdb7211
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118217737"
---
# <a name="tree-views"></a>Представления в виде дерева

> [!NOTE]
> это руководство по проектированию было создано для Windows 7 и не обновлялось для более новых версий Windows. Многие рекомендации по-прежнему применяются в принципе, но презентация и примеры не соответствуют нашим [текущим руководствам по проектированию](/windows/uwp/design/).

Благодаря представлению в виде дерева пользователи могут просматривать и взаимодействовать с коллекцией объектов, упорядоченной по иерархии, используя один выбор или множественный выбор.

В дереве объекты, содержащие данные, называются конечными узлами, а объекты, содержащие другие объекты, называются узлами контейнеров. Один самый верхний узел контейнера называется корневым. Пользователи могут разворачивать и сворачивать узлы контейнеров, нажимая кнопки развертывания «плюс» и «минус».

![снимок экрана представления в виде дерева Проводника Windows ](images/ctrl-tree-views-image1.png)

Типичное представление в виде дерева.

> [!Note]  
> Рекомендации, связанные с [макетом](vis-layout.md) и [меню](cmd-menus.md) , представлены в отдельных статьях.

 

## <a name="is-this-the-right-control"></a>Выбор правильного элемента управления

**Наличие иерархических данных не означает, что необходимо использовать представление в виде дерева.** Очень часто [представление списка](ctrl-list-views.md) — это более простой, но более мощный вариант. Список представлений:

-   Поддержка нескольких различных представлений.
-   Поддерживают сортировку данных по любому столбцу в представлении Details.
-   Поддержка организации данных в группы, образуя иерархию из двух уровней.

**Чтобы использовать представление списка, можно выполнить сведение иерархических данных с помощью следующих методов.**

-   Удалите корневой узел, если он есть, так как он часто необязателен.
-   Используйте группы представлений списков, вкладки, раскрывающиеся [списки](/windows/desktop/uxguide/ctrl-drop)или раскрывающиеся [заголовки](glossary.md) , чтобы заменить контейнеры верхнего уровня.

    ![снимок экрана групп представлений списков, содержащих списки ](images/ctrl-tree-views-image2.png)

    В этом примере группы представления списка используются для контейнеров верхнего уровня.

    ![снимок экрана вкладок, используемых для контейнеров верхнего уровня ](images/ctrl-tree-views-image3.png)

    В этом примере для контейнеров верхнего уровня используются вкладки.

    ![снимок экрана с раскрывающимся списком, используемым в качестве контейнера ](images/ctrl-tree-views-image4.png)

    В этом примере для контейнеров верхнего уровня используется раскрывающийся список.

-   Если связанный элемент управления отображает содержимое выбранного контейнера, этот элемент управления может отображать более низкие уровни иерархии.

    ![снимок экрана области "Оглавление" ](images/ctrl-tree-views-image5.png)

    В этом примере контейнеры низкого уровня отображаются в окне документа.

**Представление в виде дерева необходимо использовать, если требуется отобразить иерархию более чем двух уровней (не включая корневой узел).**

Чтобы решить, является ли древовидное представление верным элементом управления, учитывайте следующие вопросы.

-   **Иерархия данных?** Если нет — используйте другой элемент управления.
-   **Имеет ли иерархия по крайней мере три уровня (не включая корень)?** В противном случае рассмотрите возможность таких альтернатив, как группы представлений списков, вкладки, раскрывающиеся списки или развертываемые заголовки.
-   **Имеются ли у элементов вспомогательные данные?** В этом случае рекомендуется использовать представление списка в режиме подробного представления, чтобы воспользоваться всеми преимуществами вспомогательных данных.
-   **Связаны ли данные более низкого уровня с независимыми подзадачами?** В этом случае рассмотрите возможность отображения информации в связанном элементе управления или в отдельном окне (отображается с помощью [кнопок](ctrl-command-buttons.md) или [ссылок](ctrl-command-links.md)).
-   **Являются ли целевые пользователи дополнительными?** Опытные пользователи более хорошо работают с использованием деревьев. Если ваше приложение предназначено для начинающих пользователей, не используйте представления в виде дерева.
-   **Есть ли у этих элементов единое, естественное иерархическое классификация, знакомое большинству пользователей?** В этом случае данные идеально подходят для представления в виде дерева. Если требуется несколько представлений или сортировка, используйте вместо этого представление списка.
-   **Должны ли пользователи видеть данные более низкого уровня в некоторых случаях, но не во всех сценариях или в некоторых, но не во времени?** В этом случае данные идеально подходят для представления в виде дерева.

> [!Note]  
> Иногда элемент управления, похожий на представление в виде дерева, реализуется с помощью представления списка. В таких случаях примените рекомендации на основе использования, а не в реализации.

 

## <a name="design-concepts"></a>Принципы проектирования

Деревья предназначены для упорядочения данных и упрощения их поиска, однако сложно сделать данные в дереве простыми обнаруживаемыми. При принятии решения о представлениях в виде дерева и их организации учитывайте следующие принципы.

### <a name="predictability-and-discoverability"></a>Предсказуемость и возможность обнаружения

**Представление в виде дерева основано на связях между объектами.** Деревья работают лучше, когда объекты формируют четкое, хорошо известное взаимоисключающую связь, в которой каждый объект сопоставляется с одним простым в определении контейнером.

**Серьезная проблема заключается в том, что объект может находиться на разных узлах.** Например, где пользователи хотят найти устройство, которое воспроизводит музыку, имеет большой жесткий диск и использует USB-порт? возможно, на любом из нескольких различных узлов контейнеров, таких как мультимедиа, служба хранилища, USB и, возможно, в аппаратных ресурсах. Одним из решений является размещение каждого объекта в одном наиболее подходящем контейнере независимо от обстоятельств. другой подход заключается в помещении каждого объекта во все контейнеры, которые применяются. Первый из них повышает простую, чистую иерархию, а вторая обеспечивает возможность обнаружения, в каждой из которых есть свои преимущества и потенциальные проблемы.

**Пользователи могут не полностью разобраться в структуре дерева, но они формируют объектную модель для связей после взаимодействия с деревом в течение определенного момента.** Если такая модель недействительна, она приводит к путанице. например, предположим, что музыкальный проигрыватель можно найти в контейнерах мультимедиа, служба хранилища и USB. Такое размещение улучшает возможности обнаружения. Если пользователь сначала находит устройство в мультимедиа, он может завершиться, так как музыкальные проигрыватели отображаются в контейнере мультимедиа. Затем пользователь будет предполагать, что подобные устройства, например цифровые камеры, будут отображаться в контейнере мультимедиа и будут перепутаться, если это не так.

**Сложность при проектировании дерева заключается в том, чтобы сбалансировать возможность обнаружения с помощью прогнозируемой пользовательской модели, которая позволяет избежать путаницы.**

### <a name="breadth-vs-depth"></a>Охват и глубина

В исследованиях удобства использования видно, что **Пользователи более успешно работают при поиске объектов в дереве, отличном от дерева, которое является глубоким**, поэтому при проектировании дерева предпочтительнее использовать более глубокий уровень. В идеале дерево должно содержать не более четырех уровней (не считая корневого узла), а наиболее часто используемые объекты должны отображаться на первых двух уровнях.

### <a name="other-principles"></a>Другие принципы

-   Когда пользователи ищут, что они ищут, они прекращают поиск. Они не видят, где можно найти другой объект, так как им не нужно. Эти пользователи могут предположить, что первым найденным путем является единственный путь.
-   Пользователи столкнуться с проблемами при поиске объектов в больших и сложных деревьях. Для поиска объектов в таких деревьях пользователи не будут выполнять исчерпывающий поиск по запросу. они останавливаются после того, как они считают, что они тратят разумные усилия. Следовательно, большие и сложные деревья должны быть дополнены другими методами доступа, такими как поиск по словам, индекс или фильтрация.
-   Некоторые программы позволяют пользователям создавать собственные деревья. Хотя такие самостоятельно спроектированные деревья могут быть согласованы с пользовательской моделью, они часто создаются ударил и плохо обслуживаются. Например, хотя файловая система, почтовая программа и список избранного обычно хранят похожие типы информации, пользователям редко приходится упорядочивать их одинаковым образом.

**Если вы выполняете только одно действие...**

Тщательно взвесьте преимущества и недостатки использования представлений в виде дерева. Иерархическая структура данных не означает, что необходимо использовать представление в виде дерева.

## <a name="usage-patterns"></a>Варианты использования

Представления в виде дерева имеют несколько шаблонов использования:



| Использование                           |    Пример                         |
|--------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Представления в виде дерева только с узлами контейнеров**<br/> Пользователи могут просматривать и взаимодействовать с одним контейнером за раз. <br/>                        | Как правило, эти представления дерева имеют связанный элемент управления, который отображает содержимое выбранного контейнера, поэтому пользователи могут одновременно взаимодействовать только с одним контейнером. <br/> ![снимок экрана панели "контейнер" и область "содержимое" ](images/ctrl-tree-views-image6.png)<br/> В этом примере древовидное представление содержит только узлы контейнеров. Содержимое выбранного узла отображается в связанном элементе управления "представление списка".<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Представления в виде дерева с контейнером и конечными узлами**<br/> Пользователи могут просматривать контейнеры и листья и взаимодействовать с ними.<br/>                       | Как правило, эти представления дерева имеют связанный элемент управления, который отображает содержимое выбранного контейнера или конечного объекта. предоставление пользователям возможности взаимодействовать с листьями часто делает все необходимое для поддержки множественного выбора. <br/> ![снимок экрана — панель "представление дерева" и область "содержимое" ](images/ctrl-tree-views-image7.png)<br/> в этом примере древовидное представление содержит как контейнер, так и конечные узлы. поскольку поддерживается множественный выбор, содержимое открытых элементов отображается с помощью [вкладок](ctrl-tabs.md) в связанном элементе управления.<br/> Кроме того, представление в виде дерева может иметь упорядоченный список, где контейнеры — это заголовки, а листья — параметры. <br/> ![снимок экрана представления "дерево" с заголовками и параметрами ](images/ctrl-tree-views-image8.png)<br/> В этом примере дерево оставляет параметры, а контейнеры — категории параметров.<br/> |
| **Представления в виде дерева флажков**<br/> Пользователи могут выбрать любое количество элементов, включая нет.<br/>                                             | Флажки ясно показывают, что возможен выбор нескольких элементов. Используйте этот шаблон дерева, если несколько выборок являются важными или часто используемыми. <br/> ![снимок экрана представления "дерево — представление с флажками" ](images/ctrl-tree-views-image9.png)<br/> В этом примере флажок в иерархическом представлении позволяет включить или отключить выбор компонентов.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **Построители представлений в виде дерева**<br/> Пользователи могут создать дерево, добавив один контейнер или конечный объект за раз и при необходимости задавая порядок.<br/> | Пользователи могут создавать и изменять многие деревья. Некоторые деревья встроены с помощью контекстных меню и перетаскивания (например, папок в проводнике Windows), тогда как другие деревья создаются с помощью специального диалогового окна (например, списка «Избранное» в Windows Internet Explorer). <br/> ![снимок экрана диалогового окна "Избранное" ](images/ctrl-tree-views-image10.png)<br/> В этом примере из Internet Explorer пользователи могут создавать собственный список избранных с помощью диалогового окна.<br/>                                                                                                                                                                                                                                                                                                                                                                                     |
| **Представления в виде дерева с альтернативными методами доступа**<br/> Пользователи могут находить объекты не только с помощью иерархического дерева.<br/>        | Как упоминалось ранее, пользователи столкнуться с проблемами при поиске объектов в больших и сложных деревьях, поэтому такие деревья должны дополняться другими методами доступа, такими как поиск по словам, индекс или фильтрация. <br/> ![снимок экрана: вкладки "содержание", "индекс" и "Избранное" ](images/ctrl-tree-views-image11.png)<br/> в этом примере пользователи также могут получать доступ к данным с помощью оглавления, индекса и избранного. для некоторых пользователей вкладки «индекс» и «поиск» могут оказаться более полезными, чем вкладка «содержание».<br/> ![снимок экрана меню "Пуск" Windows и поля поиска ](images/ctrl-tree-views-image12.png)<br/> в этом примере Windows меню также позволяет пользователям получать доступ к программам, файлам и веб-страницам, вводя часть имени в поле поиска.<br/>                                                                                                             |



 

## <a name="guidelines"></a>Рекомендации

### <a name="presentation"></a>Уровень представления

-   **В контейнере сортировать элементы в логическом порядке.** Сортировать имена в алфавитном порядке, числа в числовом порядке и даты в хронологическом порядке.
-   **Используйте атрибут «всегда показывать выделение** », чтобы пользователи могли легко определить выбранный элемент, даже если у элемента управления нет фокуса ввода.
-   **Если дерево выступает в качестве оглавления, используйте один атрибут Expand, чтобы упростить управление деревом.** Таким образом развертывается только соответствующая часть дерева.
-   **Избегайте представления пустых деревьев.** Если пользователь создает дерево, инициализируйте дерево с инструкциями или элементами примера, которые могут потребоваться пользователям.

    ![снимок экрана списка "Избранное" Internet Explorer ](images/ctrl-tree-views-image13.png)

    В этом примере сначала представлен список с примерами.

-   **Не вынимайте узлы контейнеров в свертываемые, если у пользователей нет причин их сворачивать.** Это приводит к добавлению ненужной сложности.
-   **Если возникает проблема с производительностью загрузки, по умолчанию отображаются только первый и второй контейнеры дерева.** Затем можно загружать дополнительные данные по запросу, когда пользователь расширяет ветви в дереве.
-   **Если пользователь разворачивает или сворачивает контейнер, сделайте это состояние таким образом, чтобы оно вступает в силу при следующем отображении дерева**, если пользователи, скорее всего, не попредпочитают запуск в состоянии по умолчанию. Сохраняемость должна быть в отдельном представлении по дереву для каждого пользователя.
-   **Если контейнеры высокого уровня имеют аналогичное содержимое, рекомендуется использовать визуальные подсказки для их различения.**

    **Неправильно**:

    ![снимок экрана элементов Outlook с разными значками ](images/ctrl-tree-views-image14.png)

    В этом примере папки почтовых ящиков и архивов имеют аналогичное содержимое. После дальнейшего расширения деревьев пользователям очень трудно понять, где они находятся в дереве, что приведет к путанице. Чтобы решить эту проблему, используйте несколько различных значков в различных разделах.

-   **Пересчитать соединительные линии.** Хотя эти линии четко показывают связи между контейнером и конечными узлами, они добавляют визуальную ненужные элементы, не улучшая понимание. В частности, они не помогают, когда узлы близки друг к другу, а также не помогают, если узлы находятся далеко друг от друга, что требуется прокрутка.

    **Правильно:**

    ![снимок экрана с представлением в виде дерева с соединительными линиями ](images/ctrl-tree-views-image15.png)

    **Лучше:**

    ![снимок экрана представления в виде дерева без линий соединения ](images/ctrl-tree-views-image16.png)

    Соединяющие линии очень мало, чтобы помочь в охвате.

### <a name="interaction"></a>Взаимодействие

-   **Попробуйте обеспечить поведение двойного щелчка.** Двойной щелчок должен иметь тот же результат, что и выбор элемента и выполнение команды по умолчанию.
-   **Сделайте двойным щелчком избыточное поведение.** Всегда должна быть Командная кнопка или команда контекстного меню, имеющие такой же результат.
-   Если элемент требует дальнейшего объяснения, **Укажите пояснение в подсказке**.

    ![снимок экрана "Избранное" с подсказкой для одного элемента ](images/ctrl-tree-views-image17.png)

    В этом примере всплывающая подсказка предоставляет дополнительные сведения.

-   **Укажите контекстные меню соответствующих команд.** Такие команды включают вырезание, копирование, вставку, удаление или удаление, переименование и свойства.
-   **При отключении представления в виде дерева также отключите все связанные метки и кнопки команд.**

### <a name="tree-organization"></a>Организация дерева

-   **Используйте естественную иерархическую структуру, знакомую большинству пользователей.**
-   **Если вы не можете использовать такую структуру, попробуйте сбалансировать возможность обнаружения с помощью прогнозируемой пользовательской модели, которая снизит путаницу.**
-   **Чтобы безопасно улучшить обнаружение, поместите элемент в несколько контейнеров в следующих случаях:**
    -   Элемент не связан с другими подобными элементами (так что пользователи не будут путаться с неправильными ассоциациями).
    -   Существует только несколько таких избыточных элементов (так что дерево не будет чрезмерным).
-   **Используйте простейшую иерархическую структуру, которая хорошо работает.** Для этого сделайте следующее:
    -   Разместите наиболее часто используемые объекты на первых двух уровнях дерева (не считая корневого узла) и поместите менее часто используемые объекты дальше по иерархии.
    -   Исключите лишние или объедините избыточные контейнеры промежуточного уровня.
-   **Предпочитать глубину.** В идеале дерево должно содержать не более четырех уровней, а наиболее часто используемые объекты должны отображаться на первых двух уровнях.
-   **Определите, действительно ли нужен корневой узел.** Укажите корневой узел, если пользователям требуется возможность выполнять команды во всем дереве (возможно, с помощью контекстного меню на корневом узле). В противном случае дерево проще и проще использовать без него.
-   **Если дерево имеет альтернативные методы доступа, такие как поиск по словам или индекс, оптимизируйте дерево для просмотра, сосредоточенное на наиболее удобном содержимом.** При использовании альтернативных методов доступа содержимое дерева не должно быть исчерпывающим. Упрощение дерева упрощает для пользователей поиск наиболее полезного содержимого.

### <a name="check-box-tree-views"></a>Представления в виде дерева флажков

-   **Отображение числа выбранных элементов под списком**, особенно если пользователи могут выбрать несколько элементов. Эти отзывы помогают пользователям подтвердить правильность выбора.

    ![снимок экрана с выбранным числом элементов ](images/ctrl-tree-views-image18.png)

    В этом примере число выбранных элементов отображается под деревом. Очевидно, что два элемента не выбраны.

-   При наличии потенциально большого количества элементов, а также при выборе или очистке всех этих команд следует добавить кнопки выделить все и очистить все.
-   **Используйте флажки смешанного состояния, чтобы указать Частичное выделение элементов в контейнере.**

    **Правильно:**

    ![снимок экрана окна с флажками смешанного состояния ](images/ctrl-tree-views-image19.png)

    В этом примере флажки смешанного состояния используются для указания частичного выделения.

## <a name="recommended-sizing-and-spacing"></a>Рекомендуемое изменение размера и расстояния

![снимок экрана с изображением в виде дерева — размер и пространство ](images/ctrl-tree-views-image20.png)

Рекомендуемый размер и пространство для элементов управления иерархического представления.

-   **Выберите ширину представления в виде дерева, чтобы избежать необходимости в горизонтальной прокрутке** большинства элементов при полном развертывании дерева.
-   **Включите дополнительные 30% для поддержки локализации.**
-   **Выберите высоту представления в виде дерева, которая устраняет ненужная вертикальная прокрутка.** Рассмотрите возможность более длинного представления в виде дерева (или даже больше, если имеется доступное пространство), если это уменьшит необходимость вертикальной полосы прокрутки.

    **Неправильно**:

    ![снимок экрана: короткий, узкий элемент управления представления в виде дерева ](images/ctrl-tree-views-image21.png)

    В этом примере представление дерева немного шире и больше не будет избавиться от полос прокрутки в большинстве случаев. В этом конкретном дереве можно открыть только один контейнер.

-   **Если пользователь имеет преимущество над представлением в виде дерева, сделайте представление в виде дерева и его родительского окна изменяемым.** Это позволяет пользователям настраивать размер представления в виде дерева по мере необходимости.

## <a name="labels"></a>Метки

### <a name="control-labels"></a>Метки элементов управления

-   Для всех представлений дерева требуются метки. Напишите метку как слово или фразу, не в виде предложения, заканчивая двоеточием и используя [статический текст](glossary.md).
-   Назначьте уникальный ключ доступа. Рекомендации по назначению см. в разделе [Клавиатура](inter-keyboard.md).
-   Используйте выделение прописных букв, как в предложении.
-   Поместите метку над элементом управления и выровняйте метку по левому краю элемента управления.
-   Для представлений дерева с множественным выбором запишите метку, чтобы было ясно, что возможен выбор нескольких элементов. Метки древовидного представления флажков могут быть менее явными.

    **Неправильно**:

    ![снимок экрана представления в виде дерева с меткой компонентов ](images/ctrl-tree-views-image22.png)

    В этом примере метка не предоставляет сведений о множественном выделении.

    **Лучше:**

    ![снимок экрана представления в виде дерева с меткой "одна или несколько" ](images/ctrl-tree-views-image23.png)

    В этом примере метка четко указывает, что возможен выбор нескольких элементов.

    **Самое**

    ![снимок экрана представления в виде дерева с флажками ](images/ctrl-tree-views-image24.png)

    В этом примере флажки ясно показывают, что множественный выбор возможен, поэтому метка не должна быть явной.

### <a name="data-text"></a>Текст данных

-   Используйте выделение прописных букв, как в предложении.

### <a name="instructional-text"></a>Пояснительный текст

-   Если необходимо добавить пояснительный текст к представлению в виде дерева, добавьте его над меткой. Используйте полные предложения с закрывающими знаками препинания.
-   Используйте выделение прописных букв, как в предложении.
-   Дополнительные пояснения, которые полезны, но не требуются, должны быть короткими. Поместите эти сведения в круглые скобки между меткой и двоеточием после основной инструкции, если она используется вместо метки или под элементом управления.

    ![снимок экрана с описанием ниже представления в виде дерева ](images/ctrl-tree-views-image8.png)

    В этом примере дополнительное объяснение находится под элементом управления.

## <a name="documentation"></a>Документация

При ссылке на представления в виде дерева:

-   Используйте точный текст метки, включая прописную букву, но не включайте символ подчеркивания или двоеточие. Добавьте список слов или иерархический список, если контекст требует различения обычных списков.
-   Для элементов дерева используйте точный текст элемента, включая его прописные буквы.
-   Используйте представления в виде дерева в виде дерева только в программировании и другой технической документации. В любом другом случае используйте List или иерархический список, так как дерево терминов является запутанным для большинства пользователей.
-   Чтобы описать взаимодействие с пользователем, используйте команду выбрать для данных, а затем разверните и сверните для кнопок плюс и минус.
-   По возможности отформатируйте элементы метки и дерева, используя полужирный текст. В противном случае поставьте метку и элементы в кавычки, только если это необходимо для предотвращения путаницы.

Пример. в списке **содержимое** выберите **Структура пользовательского интерфейса**.

При ссылке на флажки в представлении в виде дерева:

-   Используйте точный текст метки, включая регистр букв, и включите слова. Не включайте подчеркивание ключа доступа.
-   Чтобы описать взаимодействие с пользователем, используйте SELECT и Clear.
-   По возможности отформатируйте метку, используя полужирный текст. В противном случае заключите метку в кавычки, только если это необходимо для предотвращения путаницы.

Пример. в списке **элементы для резервного копирования** установите флажок **Мои документы** .

