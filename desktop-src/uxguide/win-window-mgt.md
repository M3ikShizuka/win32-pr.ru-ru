---
title: Управление окнами
description: В этой статье описывается размещение окон по умолчанию при первоначальном отображении на экране, порядок их размещения относительно других окон (Z-порядок), их первоначальный размер и влияние на фокус ввода.
ms.assetid: d81bd71c-6d8f-45a9-82cb-bdb9b8bcbb11
ms.topic: article
ms.date: 10/20/2020
ms.openlocfilehash: b8dc2858b0e3cc3b2a451210a61315c610afc727ac42156d5c4fc5c112135807
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118212167"
---
# <a name="window-management"></a>Управление окнами

> [!NOTE]
> это руководство по проектированию было создано для Windows 7 и не обновлялось для более новых версий Windows. Многие рекомендации по-прежнему применяются в принципе, но презентация и примеры не соответствуют нашим [текущим руководствам по проектированию](/windows/uwp/design/).

В этой статье описывается размещение окон по умолчанию при первоначальном отображении на экране, порядок их размещения относительно других окон ([Z-порядок](glossary.md)), их первоначальный размер и влияние на фокус ввода.

Для следующих правил:

-   Окно верхнего уровня не имеет окна владельца и отображается на панели задач. Примеры: окна приложений. в Windows Vista и более поздних версиях диалоговые окна без окон владельца и страницы свойств также считаются верхним уровнем.
-   Принадлежащее окно имеет окно владелец и не отображается на панели задач. Примеры: модальные диалоговые окна, немодальные диалоговые окна.
-   Инициированное пользователем окно отображается как непосредственный результат действия пользователя. В противном случае запускается программа, инициированная программой или инициированная системой, если она была инициирована корпорацией Майкрософт Windows. Например, диалоговое окно "Параметры" инициируется пользователем, но напоминание о встрече инициирует программа.
-   Контекстное окно — это инициированное пользователем окно, которое имеет строгую связь с объектом, из которого он был запущен. Например, окна, отображаемые контекстными меню или значками области уведомлений, являются контекстными, но окна, отображаемые строками меню, не являются.
-   Активный монитор — это монитор, в котором запущена активная программа.
-   монитор по умолчанию — это один из меню, панели задач и области уведомлений.

## <a name="design-concepts"></a>Принципы проектирования

Управление окнами является одной из самых фундаментальных действий пользователя. до Windows Vista Windows часто затронула небольшие размеры по умолчанию и помещает их в середину экрана. Этот подход хорошо подходит для старых мониторов с низким разрешением, но не для современных видеоаппаратов.

Windows предназначен для поддержки современного видеооборудования, которое часто работает с разрешением, которое значительно выше минимально поддерживаемого разрешения экрана и может иметь несколько мониторов. Это:

-   Дает пользователям возможность полностью воспользоваться своим расширенным оборудованием.
-   Требует от пользователей меньше усилий для перемещения их мыши на большие расстояния.
-   Делает размещение окна более предсказуемым и, следовательно, проще находить.

### <a name="the-minimum-supported-screen-resolution"></a>Минимальное поддерживаемое разрешение экрана

минимальное [эффективное разрешение экрана](glossary.md) , поддерживаемое Windows, составляет 800x600 пикселей. Это означает, что окна фиксированного размера должны отображаться полностью с минимальным разрешением (при резервировании пространства для панели задач), но окна с изменяемым размером можно оптимизировать для эффективного разрешения 1024x768 пикселей при условии, что они работают с минимальным разрешением.

в настоящее время наиболее распространенные разрешения физических мониторов для Windows пк имеют 1024x768 пикселей или больше, нацеливание на 800x600 пикселей позволяет Windows:

-   Хорошо работает со всеми современными аппаратными средствами, включая небольшие ноутбуки.
-   Поддержка параметров высокого DPI (точек на дюйм).
-   Поддержка большего размера шрифтов для специальных возможностей.
-   Поддержка оборудования, используемого на глобальном уровне.

Выбор минимального разрешения для поддержки требует компромиссного баланса. Нацеливание на более высокое разрешение приведет к неоптимальному появлению значительного процента современного оборудования, в то время как нацелено на более низкое разрешение, дизайнеры не смогут воспользоваться всеми преимуществами доступного пространства на экране.

если вы считаете, что целевые пользователи используют значительно более высокие разрешения, чем минимальное Windows, можно разработать программу, чтобы воспользоваться всеми преимуществами дополнительного пространства на экране, используя масштабируемые окна, которые хорошо масштабируются.

## <a name="guidelines"></a>Рекомендации

### <a name="general"></a>Общие сведения

-   **поддерживают минимальное Windows эффективное разрешение 800x600 пикселей.** Для критически важных пользовательских интерфейсов (UI), которые должны работать в защищенном режиме, поддерживают эффективное разрешение 640 пикселей. Заследите за пространством, используемым панелью задач, выполнив резервирование 48 [относительных](glossary.md) вертикальных пикселей для окон, отображаемых на панели задач.
-   **Оптимизируйте макеты окон с изменяемыми размерами для эффективного разрешения 1024x768 пикселей.** Автоматическое изменение размера этих окон для более низких разрешений экрана.
-   **Обязательно протестируйте Windows в 96 dpi (100 процента) в 800x600 пикселях, 120 dpi (125 процента) на 1024x768 пикселей и 144 dpi (150 процента) на 1200x900 точках.** Проверьте наличие проблем макета, таких как обрезка элементов управления, текст и окна, а также растяжение значков и растровых изображений.
-   **Для программ с сенсорным и мобильным вариантами использования Оптимизируйте для 120 dpi.** Экраны с высоким разрешением в настоящее время являются наиболее распространенными на сенсорных и мобильных ПК.
-   Размеры **окон с изменяемыми размерами больше не должны показывать глиф изменения размера** в правом нижнем углу, так как:
    -   Размеры всех сторон и границ окна изменяются, а не только в правом нижнем углу.
    -   Для этого глифу требуется строка состояния, но многие окна с изменяемым размером не предоставляют строки состояния.
    -   Размеры окон с изменяемыми размерами и указатели изменения размера более эффективны при взаимодействии, что размер окна может изменяться, чем глиф изменения размера.

### <a name="title-bar-controls"></a>Элементы управления "заголовок окна"

Используйте элементы управления "заголовок окна", как показано ниже.

-   **Выхода.** Все первичные и вторичные окна со стандартной рамкой окна должны иметь кнопку Закрыть в строке заголовка. Нажатие кнопки Закрыть приведет к отмене или закрытию окна.

![снимок экрана диалогового окна с кнопкой "без закрытия" ](images/win-window-mgt-image1.png)

В этом примере диалоговое окно не содержит кнопку «Закрыть» в строке заголовка.

-   **Свести к минимуму.** Для всех основных окон и длительно выполняющихся немодальных вторичных окон (например, диалоговых окон хода выполнения) должна быть кнопка сворачивания. Нажатие кнопки минимизировать сокращает окно до кнопки на панели задач. Следовательно, для окон, которые могут быть сведены, требуется значок заголовка окна.
-   **Развернуть или восстановить.** Все окна с изменяемыми размерами должны иметь кнопку Развернуть/восстановить. При нажатии кнопки Развернуть отображается окно с наибольшим размером, которое в большинстве окон является полноэкранным. в то время как при нажатии кнопки Восстановить окно отображается предыдущий размер окна. Тем не менее, некоторые окна не имеют смысла использовать полноэкранный режим, поэтому эти окна должны максимально увеличиться до наиболее удобного размера.

### <a name="window-size"></a>Размер окна

-   **Выберите размер окна по умолчанию, подходящий для его содержимого.** Не бойтесь использовать крупные размеры окна, если вы можете эффективно использовать пространство.
-   **Используйте окна с изменяемыми размерами везде, где это удобно, чтобы избежать полос прокрутки и усеченных данных.** Windows с динамическим содержимым и списками лучше всего от окон с изменяемыми размерами.
-   **Для текстовых документов рекомендуется использовать максимальную длину строки в 65 символов** , чтобы облегчить чтение текста. (Символы включают буквы, знаки препинания и пробелы.)
-   Окна фиксированного размера:
    -   **Должен быть полностью видимым и иметь размер для размещения в рабочей области.**
-   Размеры окон с изменяемыми размерами:
    -   **Может быть оптимизирован для более высоких разрешений, но при отображении на экране в соответствии с фактическим разрешением экрана их размер не изменяется.**
    -   **Для поэтапного увеличения размера окна необходимо отображать постепенно больше информации.** Убедитесь, что по крайней мере одна часть окна или элемент управления имеют изменяемое содержимое.
    -   **Следует избегать использования восстановленных по умолчанию размеров, развернутых или близких к развернутым.** Вместо этого выберите размер по умолчанию, который обычно наиболее удобен, без полноэкранного режима. Предположим, что пользователи будут развернут окно, а не изменять размер, чтобы сделать его полноэкранным.
    -   **Следует установить минимальный размер окна, если ниже приведен размер содержимого, который больше не может использоваться.** Для элементов управления с изменяемыми размерами Задайте минимальный размер элементов для минимального размера, например минимальную ширину функциональных столбцов в представлениях списка.
    -   **Следует изменить презентацию, если это сделает содержимое пригодным для использования с меньшими размерами.**

![снимок экрана кнопок проигрывателя мультимедиа ](images/win-window-mgt-image2.png)

в этом примере проигрыватель Windows Media изменяет свой формат, когда окно оказывается слишком маленьким для стандартного формата.

### <a name="window-location"></a>Расположение окна

-   **В следующих рекомендациях "центрирование" означает смещение вертикального смещения в верхней части монитора, а не в середине.** Установите 45 процентов между верхней границей монитора/владельца и верхней границей окна, а 55% от нижней части монитора/владельца и нижней части окна. Это необходимо сделать, так как глаз естественным образом смещен в верхнюю часть экрана.

    ![Рисунок окна, размещенного немного выше центра ](images/win-window-mgt-image3.png)

    "Центрирование" означает смещение вертикального смещения в верхней части монитора.

-   **Если окно является контекстным, всегда отображать его рядом с объектом, из которого он был запущен.** Разместите его не так, чтобы исходный объект не покрывается окном.

    -   Если это возможно, при помощи мыши, то, когда это допустимо, оно смещается вниз и вправо.

    ![Рисунок контекстного окна, размещенного справа от объекта ](images/win-window-mgt-image4.png)

    Показывать контекстные окна рядом с объектом, из которого он был запущен.

    ![Рисунок окна области уведомлений ](images/win-window-mgt-image5.png)

    Windows, запускаемые из области уведомлений, отображаются рядом с областью уведомлений.

-   При отображении с помощью пера, если возможно, поместите его так, чтобы он не был охвачен рукой пользователя. Для правых пользователей отобразите слева. в противном случае справа отобразится.

    ![Рисунок размещается в контекстном окне слева от объекта ](images/win-window-mgt-image6.png)

    При использовании пера также можно отображать контекстные окна, чтобы они не покрыты рукой пользователя.

-   **Разработчики:** Вы можете различать события мыши и события пера с помощью API [жетмессажеекстраинфо](../tablet/system-events-and-mouse-messages.md) . Вы можете определить [правой или левой](/previous-versions/ms819495(v=msdn.10)) пользователя с помощью API [системпараметерсинфо](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa) с SPI \_ жетменудропалигнмент.
-   **Размещение диалоговых окон хода выполнения в правом нижнем углу активного монитора.**

    ![Рисунок индикатора выполнения в правом нижнем углу ](images/win-window-mgt-image7.png)

    Размещение диалоговых окон хода выполнения в правом нижнем углу.

-   **Если окно не связано с текущим контекстом или действием пользователя, разместите его вне текущего положения указателя.** Это предотвращает случайное взаимодействие.
-   **Если окно является приложением или документом верхнего уровня, то его источник всегда следует разкаскадировать в левом верхнем углу монитора.** При создании активной программой используйте активный монитор. в противном случае используйте монитор по умолчанию.

    ![Рисунок трех окон, каскадных в верхнем левом углу ](images/win-window-mgt-image8.png)

    Каскадное расположение окон приложения или документа, расположенного в левом верхнем углу монитора.

-   **Если окно является служебной программой верхнего уровня, всегда отображать его в центре монитора.** При создании активной программой используйте активный монитор. в противном случае используйте монитор по умолчанию.

    ![Рисунок окна служебной программы, расположенный в центре монитора ](images/win-window-mgt-image9.png)

    Центрировать окна служебной программы верхнего уровня.

-   **Если окно является владельцем окна, оно изначально отображается в центре окна, расположенного на экране владельца.** Для последующего отображения рассмотрите возможность отображения его в последнем расположении (относительно окна "владелец"), если это может быть более удобным.

    ![Рисунок собственного окна, расположенного в центре окна по владельцу ](images/win-window-mgt-image10.png)

    Начальное центрирование окон поверх окна владельца.

-   **Для немодальных диалоговых окон всегда сначала отображаются в верхней части окна владельца, чтобы облегчить их поиск.** Однако если пользователь активирует окно "владелец", которое может скрывать немодальное диалоговое окно.

    ![Рисунок немодального диалогового окна над окном "владелец" ](images/win-window-mgt-image11.png)

    Отображать немодальные диалоговые окна поверх окна владельца, чтобы упростить их поиск.

-   **При необходимости измените исходное расположение так, чтобы все окно отображалось в целевом мониторе.** Если размер окна с изменяемым размером больше целевого монитора, сократите его до размера.

### <a name="window-order-z-order"></a>Порядок окон (Z-порядок)

-   **Всегда помещайте собственные окна поверх окна владельца.** Никогда не размещайте собственные окна в своих окнах-владельцах, так как пользователи, скорее всего, не увидят их.
-   **Выбор порядка по Z для пользователей. Когда пользователь выбирает окно, переводите в начало Z-последовательности только те окна, которые связаны с этим экземпляром программы (окном и любым владельцем или владельцем окна).** Не меняйте порядок других окон, например независимых экземпляров одной и той же программы.

### <a name="window-activation"></a>Активация окна

-   **Выбор состояния окна "в отношении пользователей". Если в существующем окне требуется обратить внимание, кнопка панели задач три раза, чтобы привлечь внимание и оставить его выделенным, но не выполнять никаких других действий.** Не восстанавливайте и не активизируйте окно. Не используйте звуковые эффекты. Вместо этого Позвольте пользователям активировать окно, когда они будут готовы.
    -   **Исключение:** Если окно не отображается на панели задач, переведите его в верхнюю часть всех остальных окон, а вместо него заголовку окна Flash.
-   При **восстановлении основного окна также должны восстанавливаться все вторичные** окна, даже если эти вторичные окна имеют собственную кнопку панели задач. При восстановлении помещайте вторичные окна поверх основного окна.

### <a name="input-focus"></a>Фокус ввода

-   **Windows, отображаемые действиями, инициированными пользователем, должны принимать фокус ввода, но только в том случае, если окно отображается немедленно** (в течение 5 секунд). После отрисовки окно может получить фокус ввода один раз.
    -   Если окно отображается медленно (более 5 секунд), пользователи, скорее всего, будут выполнять другую задачу в ожидании. Фокус на этот момент будет неудобством, особенно если делать это более одного раза.
-   **Windows, которые не отображаются и не отображаются в результате действия, инициированного системой, не должны принимать фокус ввода.** Вместо этого выведите на экран верх без фокуса и Позвольте пользователям активировать их, когда они будут готовы.
    -   **Исключение:** Диспетчер учетных данных.

### <a name="persistence"></a>Сохраняемость

-   **При повторном отображении окна рекомендуется отображать его в том же состоянии, что и последний доступ.** При закрытии сохраните используемый монитор, размер окна, расположение и состояние (развернуто и Restore). При повторном отображении восстановите сохраненный размер окна, расположение и состояние с помощью соответствующего монитора. Кроме того, можно сделать так, чтобы эти атрибуты сохранялись в разных экземплярах программы для каждого пользователя. **Исключения:**
    -   Не сохраняйте и не устанавливайте эти атрибуты для Windows, когда их использование является более вероятной, чтобы пользователи могли начать работу полностью.
    -   для программ, которые, скорее всего, будут использоваться на технология планшетного и сенсорного ввода Windows компьютерах, сохраните два состояния Windows для альбомных и портретных режимов. Дополнительные сведения см. в разделе [Разработка для различных размеров экрана](/previous-versions/windows/desktop/ms695587(v=vs.85)).
-   **Если текущая конфигурация монитора не разрешает отобразить окно, используя его Последнее состояние:**
    -   Попробуйте отобразить окно, используя последний монитор.
    -   Если окно больше, чем монитор, при необходимости измените размер окна.
    -   Переместите расположение в верхний левый угол, чтобы оно поместилось в мониторе по мере необходимости.
    -   Если описанные выше действия не помогут устранить проблему, вернитесь к рекомендациям по размещению окон по умолчанию. Рекомендуется восстановить предыдущий размер, если это возможно.

 

 