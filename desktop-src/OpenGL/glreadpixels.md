---
title: Функция Глреадпикселс (GL. h)
description: Функция Глреадпикселс считывает блок пикселей из буфера кадров.
ms.assetid: 41fbad5c-b8ca-456d-bbfc-b48c176e15b0
keywords:
- Функция Глреадпикселс OpenGL
topic_type:
- apiref
api_name:
- glReadPixels
api_location:
- opengl32.dll
api_type:
- DllExport
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: a853d67be282227168da4b90f4fdd47a49d2d212
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "104414788"
---
# <a name="glreadpixels-function"></a>Функция Глреадпикселс

Функция **глреадпикселс** считывает блок пикселей из буфера кадров.

## <a name="syntax"></a>Синтаксис


```C++
void WINAPI glReadPixels(
   GLint   x,
   GLint   y,
   GLsizei width,
   GLsizei height,
   GLenum  format,
   GLenum  type,
   GLvoid  *pixels
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*x* 
</dt> <dd>

Координата окна *x* первого пикселя, считанного из буфера кадров. Вместе с координатой *y* указывает расположение левого нижнего угла прямоугольного блока пикселей.

</dd> <dt>

*y* 
</dt> <dd>

Координаты окна *y* первого пикселя, считанного из буфера кадров. Вместе с координатой *x* указывает расположение левого нижнего угла прямоугольного блока пикселей.

</dd> <dt>

*width* 
</dt> <dd>

Ширина прямоугольника в пикселях.

</dd> <dt>

*height* 
</dt> <dd>

Высота прямоугольника в пикселях. Параметры *Width* и *Height* значения "1" соответствуют одному пикселю.

</dd> <dt>

*format* 
</dt> <dd>

Формат точечных данных. Допустимы следующие символьные значения:



| Значение                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Значение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="GL_COLOR_INDEX"></span><span id="gl_color_index"></span><dl> <dt>**\_индекс цвета \_ GL**</dt> </dl>                                                                                                                                                                                                                                                                                                               | Цветовые индексы считываются из буферов цветов, выбранных параметром [**глреадбуффер**](glreadbuffer.md). Каждый индекс преобразуется в фиксированную точку, сдвигаются влево или вправо, в зависимости от значения и знака \_ \_ сдвига в ГК и добавления к \_ смещению индекса GL \_ . Если \_ цвет карты GL \_ имеет значение «GL \_ », индексы заменяются их сопоставлениями в таблице « \_ пиксельная схема в 1- \_ я» \_ \_ \_ .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="GL_STENCIL_INDEX"></span><span id="gl_stencil_index"></span><dl> <dt>**\_индекс трафарета GL \_**</dt> </dl>                                                                                                                                                                                                                                                                                                         | Значения трафарета считываются из буфера шаблона. Каждый индекс преобразуется в фиксированную точку, сдвигаются влево или вправо, в зависимости от значения и знака \_ \_ сдвига в ГК и добавления к \_ смещению индекса GL \_ . Если \_ \_ для набора элементов схемы GL задано значение «GL \_ », индексы заменяются их сопоставлениями в таблице « \_ 1 пиксельная \_ схема» в «s» \_ \_ \_ .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span id="GL_DEPTH_COMPONENT"></span><span id="gl_depth_component"></span><dl> <dt>**\_компонент глубины \_ GL**</dt> </dl>                                                                                                                                                                                                                                                                                                   | Значения глубины считываются из буфера глубины. Каждый компонент преобразуется в плавающую точку таким, что минимальное значение глубины сопоставляется с 0,0, а максимальное значение сопоставляется с 1,0. Затем каждый компонент умножается на \_ \_ шкалу глубины GL, добавляется к \_ смещению по глубине GL \_ и, наконец, в диапазон \[ 0, 1 \] .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span id="GL_RED__GL_GREEN__GL_BLUE__GL_ALPHA__GL_RGB__GL_RGBA__GL_BGR_EXT__GL_BGRA_EXT__GL_LUMINANCE__GL_LUMINANCE_ALPHA"></span><span id="gl_red__gl_green__gl_blue__gl_alpha__gl_rgb__gl_rgba__gl_bgr_ext__gl_bgra_ext__gl_luminance__gl_luminance_alpha"></span><dl> <dt>**красный, зеленый GL, GL, синий, GL ( \_ \_ \_ \_ альфа) \_ , \_ \_ \_ \_ \_ \_ \_ GL, латиница, \_ ГК, GL, BGR, GL, BGRA, GL, зеленая, латиница**</dt> </dl> | Обработка различается в зависимости от того, хранят ли буферы цветов цветовые индексы или компоненты цвета RGBA. Если сохраняются цветовые индексы, они считываются из буферов цветов, выбранных параметром [**глреадбуффер**](glreadbuffer.md). Каждый индекс преобразуется в фиксированную точку, сдвигаются влево или вправо, в зависимости от значения и знака \_ \_ сдвига в ГК и добавления к \_ смещению индекса GL \_ . Затем индексы заменяются значениями красного, зеленого, синего и альфа-канала, полученными при индексировании в главной \_ точке с \_ \_ i \_ по \_ R, в главной точке с i по \_ \_ \_ \_ \_ G, в виде \_ \_ схемы пикселей \_ i \_ на \_ B и в \_ \_ \_ \_ \_ виде таблицы. Если компоненты цвета RGBA хранятся в буферах цветов, они считываются из буферов цветов, выбранного **глреадбуффер**. Каждый компонент цвета преобразуется в плавающую точку таким, что нулевая интенсивность сопоставляется с 0,0, а полная интенсивность сопоставляется с 1,0. Затем каждый компонент умножается на \_ \_ линейку c и добавляется к \_ смещению в ГК \_ , где c — \_ красное, зеленая, GL, \_ \_ синяя и GL ( \_ альфа). Каждый компонент копируется в диапазон \[ 0, 1 \] . Наконец, если \_ в качестве \_ цвета карты GL используется \_ значение GL true, каждый компонент цвета c заменяется его сопоставлением в таблице GL \_ пиксель \_ Map \_ c \_ на \_ c, где c — \_ красный, зеленый, GL, \_ \_ синий и GL \_ Alpha. Каждый компонент масштабируется до размера соответствующей таблицы перед выполнением уточняющего запроса. Наконец, ненужные данные отбрасываются. Например, \_ красный зеленый цвет отклоняет компоненты зеленого, синего и альфа-канала, а в формате \_ RGB — только компонент Alpha. \_Светимость GL вычисляет одно значение компонента в виде суммы красного, зеленого и синего компонентов, а \_ светимость "Цветовая \_ составляющая" имеет одинаковое значение, сохраняя альфа-канал в качестве второго значения.<br/> |



 

</dd> <dt>

*type* 
</dt> <dd>

Тип данных пикселя. Должно иметь одно из следующих значений.



| Тип                | Маска индекса | Преобразование компонентов |
|---------------------|------------|----------------------|
| \_байт без знака GL \_  | 281        | (281) *c*             |
| \_байт GL            | 271        | \[(271) *c*-1 \] /2     |
| \_точечный рисунок GL          | 1          | 1                    |
| \_ \_ сокращенный формат GL без знака | 2 61       | (2 61) *c*            |
| \_Краткая GL           | 2 51       | \[(2 51) *c* 1 \] /2     |
| \_целое число без знака GL \_\_ | 2 1       | (2 1) *c*            |
| тип в GL \_             | 2 1      | \[(2 1) *c* 1 \] /2     |
| с \_ плавающей запятой           | нет       | *c*                  |



 

</dd> <dt>

*зависим* 
</dt> <dd>

Возвращает данные пикселя.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Эта функция не возвращает значение.

## <a name="error-codes"></a>Коды ошибок

Функция [**глжетеррор**](glgeterror.md) может получить следующие коды ошибок.



| Имя                                                                                                  | Значение                                                                                                                               |
|-------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <dt>**\_недействительное \_ перечисление GL**</dt> </dl>      | *Формат* или *тип* не является допустимым значением.<br/>                                                                              |
| <dl> <dt>**\_недопустимое \_ значение GL**</dt> </dl>     | Либо *Ширина* , либо *Высота* были отрицательными.<br/>                                                                                   |
| <dl> <dt>**\_Недопустимая \_ Операция GL**</dt> </dl> | *Format* был \_ \_ индексом цвета GL, а цветовые буферы — как компоненты цвета RGBA или BGRA.<br/>                                 |
| <dl> <dt>**\_Недопустимая \_ Операция GL**</dt> </dl> | *Format* был \_ индексом трафарета GL \_ , а буфер трафарета не существовал.<br/>                                                          |
| <dl> <dt>**\_Недопустимая \_ Операция GL**</dt> </dl> | *Формат* был \_ \_ компонентом главной глубины, и буфер глубины отсутствует.<br/>                                                          |
| <dl> <dt>**\_Недопустимая \_ Операция GL**</dt> </dl> | Функция была вызвана между вызовом [**глбегин**](glbegin.md) и соответствующим вызовом [**гленд**](glend.md).<br/> |

## <a name="remarks"></a>Комментарии

Функция **глреадпикселс** возвращает данные пикселей из буфера кадров, начиная с пикселя, левый нижний угол которой находится в расположении (*x*, *y*), в память клиента, начиная с *точек* расположения. Несколько параметров управляют обработкой данных пикселей перед их помещением в память клиента. Эти параметры задаются тремя командами: [**глпикселсторе**](glpixelstore-functions.md), [**глпикселтрансфер**](glpixeltransfer.md)и [**глпикселмап**](glpixelmap.md). В этом разделе описаны эффекты в **глреадпикселс** большинства, но не все параметры, указанные в этих трех командах.

Функция **глреадпикселс** возвращает значения из каждого пикселя в левом нижнем углу в (*x* + i, *y* + j) для 0 = i < *ширины* и 0 = j < *высоту*. Этот пиксель называется *i*-й точкой в строке *j* TH. Пиксели возвращаются в порядке строк от нижнего к верхнему, слева направо в каждой строке.

Описанные выше факторы сдвига, масштабирования, смещения и поиска задаются [**глпикселтрансфер**](glpixeltransfer.md). Содержимое таблицы подстановки задается параметром [**глпикселмап**](glpixelmap.md).

Последний шаг включает преобразование индексов или компонентов в правильный формат, как указано в *типе*. Если параметр *Format* имеет значение "индекс цвета GL" \_ или " \_ \_ индекс трафарета GL \_ ", а тип не является *типом* данных "GL" \_ , каждый индекс маскируется со значением маски, указанным в следующей таблице. Если *тип* — GL \_ с плавающей запятой, то каждый целочисленный индекс преобразуется в формат с плавающей запятой одиночной точности.

Если *форматом* является Red GL, зеленый, GL, голубой, GL (латиница), GL, GL, BGR, GL, GL, GL \_ \_ \_ \_ \_ \_ \_ \_ \_ \_ \_ или \_ альфа-фактор главной линии, \_ а *тип* — не \_ "GL", то каждый компонент умножается на множитель, показанный в предыдущей таблице. Если тип — GL \_ float, то каждый компонент передается как (или преобразуется в формат с плавающей запятой клиента с одиночной точностью, если он отличается от используемого OpenGL).

Возвращаемые значения помещаются в память следующим образом. Если *форматом* является \_ индекс цвета GL \_ , \_ индекс трафарета GL, \_ \_ компонент глубины GL \_ , \_ красное \_ выделено зеленое, зеленая, GL, GL \_ \_ или GL \_ , то возвращается одно значение, а данные для *i*-го пикселя в строке *j* TH помещаются в расположение (*j* ) с *шириной*  +  *i*. \_В GL RGB и GL \_ BGR \_ ext возвращены три значения: GL \_ RGBA и GL \_ BGRA \_ , а также внешний набор строк, а \_ светимость GL \_ возвращает два значения для каждого пикселя, со всеми значениями, соответствующими одному пикселю, занимающие непрерывное пространство в *пикселях*. Параметры хранилища, заданные с помощью [**глпикселсторе**](glpixelstore-functions.md), такие как «пакет GL для \_ \_ замены \_ байтов и \_ пакет GL \_ ЛСБ \_ », влияют на способ записи данных в память. Описание см. в разделе [**глпикселсторе**](glpixelstore-functions.md) .

Значения пикселей, которые находятся за пределами окна, подключенного к текущему контексту OpenGL, не определены.

Если возникает ошибка, содержимое *пикселей* не изменяется.

Следующая функция получает сведения, связанные с **глреадпикселс**:

[**глжет**](glgetbooleanv--glgetdoublev--glgetfloatv--glgetintegerv.md) с аргументом \_ в \_ режиме индекса GL

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-----------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                              |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                                    |
| Заголовок<br/>                   | <dl> <dt>GL. h</dt> </dl>         |
| Библиотека<br/>                  | <dl> <dt>Opengl32. lib</dt> </dl> |
| DLL<br/>                      | <dl> <dt>Opengl32.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**глбегин**](glbegin.md)
</dt> <dt>

[**глкопипикселс**](glcopypixels.md)
</dt> <dt>

[**глдравпикселс**](gldrawpixels.md)
</dt> <dt>

[**гленд**](glend.md)
</dt> <dt>

[**глпикселмап**](glpixelmap.md)
</dt> <dt>

[**глпикселсторе**](glpixelstore-functions.md)
</dt> <dt>

[**глпикселтрансфер**](glpixeltransfer.md)
</dt> <dt>

[**глреадбуффер**](glreadbuffer.md)
</dt> </dl>

 

 





