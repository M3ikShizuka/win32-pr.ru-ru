---
title: Функции контекста отрисовки
description: Пять функций ВГЛ управляют контекстами отрисовки, как описано в следующей таблице.
ms.assetid: e03ec03d-2a85-49de-a2be-fe81a5ec5f7f
keywords:
- Функции ВГЛ, контексты отрисовки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ad8d3a8ea0333154d3145711829ab23e262fa485
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103987843"
---
# <a name="rendering-context-functions"></a>Функции контекста отрисовки

Пять функций ВГЛ управляют контекстами отрисовки, как описано в следующей таблице.



| Функция ВГЛ                                         | Описание                                                                                  |
|------------------------------------------------------|----------------------------------------------------------------------------------------------|
| [**вглкреатеконтекст**](/windows/desktop/api/wingdi/nf-wingdi-wglcreatecontext)         | Создает новый контекст визуализации.                                                             |
| [**вглмакекуррент**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent)             | Задает текущий контекст отрисовки потока.                                                   |
| [**вглжеткуррентконтекст**](/windows/desktop/api/wingdi/nf-wingdi-wglgetcurrentcontext) | Получает маркер текущего контекста отрисовки потока.                                    |
| [**вглжеткуррентдк**](/windows/desktop/api/wingdi/nf-wingdi-wglgetcurrentdc)           | Получает маркер для контекста устройства, связанного с текущим контекстом отрисовки потока. |
| [**вглделетеконтекст**](/windows/desktop/api/wingdi/nf-wingdi-wgldeletecontext)         | Удаляет контекст визуализации.                                                                 |



 

Функция [**вглкреатеконтекст**](/windows/desktop/api/wingdi/nf-wingdi-wglcreatecontext) принимает в качестве параметра обработчик контекста устройства и возвращает маркер контекста отрисовки. Созданный контекст отрисовки подходит для рисования на устройстве, на которое ссылается обработчик контекста устройства. В частности, его формат пикселей совпадает с форматом пикселей контекста устройства. После создания контекста подготовки к просмотру можно освободить или удалить контекст устройства. Дополнительные сведения о создании, получении, освобождении и уничтожении контекста устройства см. в разделе контексты [устройств](/windows/desktop/gdi/device-contexts) .

> [!Note]  
> Контекст устройства, отправляемый в [**вглкреатеконтекст**](/windows/desktop/api/wingdi/nf-wingdi-wglcreatecontext) , должен быть контекстом отображаемого устройства, контекстом устройства памяти или контекстом устройства цветового принтера, использующего четыре или более бита на пиксель. Контекст устройства не может быть контекстом устройства монохромного принтера.

 

Функция [**вглмакекуррент**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent) принимает маркер контекста отрисовки и контекст устройства обрабатывает как параметры. Все последующие вызовы OpenGL, произведенные потоком, выполняются через этот контекст визуализации и отображаются на устройстве, на которое ссылается этот контекст устройства. Контекст устройства не должен совпадать с тем, который передается в **вглкреатеконтекст** при создании контекста визуализации, но должен находиться на том же устройстве и иметь тот же формат пикселей. Вызов **вглмакекуррент** создает связь между переданным контекстом отрисовки и контекстом устройства. Невозможно освободить или удалить контекст устройства, связанный с текущим контекстом отрисовки, до тех пор, пока не станет текущим контекстом отрисовки.

Когда поток имеет текущий контекст отрисовки, он может выполнять вызовы графических модулей OpenGL. Все вызовы должны проходить через контекст отрисовки. Ничего не происходит при вызове графических элементов OpenGL из потока, в котором отсутствует текущий контекст отрисовки.

Функция [**вглжеткуррентконтекст**](/windows/desktop/api/wingdi/nf-wingdi-wglgetcurrentcontext) не принимает параметров и возвращает маркер текущего контекста отрисовки вызывающего потока. Если поток не имеет текущего контекста отрисовки, возвращается значение **null**.

При получении маркера для контекста устройства, связанного с текущим контекстом отрисовки потока путем вызова [**вглжеткуррентдк**](/windows/desktop/api/wingdi/nf-wingdi-wglgetcurrentdc), Ассоциация создается при внесении текущего контекста отрисовки.

Можно разорвать связь между текущим контекстом отрисовки и потоком, вызвав [**вглмакекуррент**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent) с одним из двух дескрипторов:

-   Маркер контекста отрисовки **null**
-   Маркер, отличный от первоначально вызванного

После вызова [**вглмакекуррент**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent) с параметром Handle для обработки контекста отрисовки, установленным в **значение NULL**, вызывающий поток не имеет текущего контекста отрисовки. Контекст отрисовки освобождается из своего соединения с потоком, и завершается связь контекста отрисовки с контекстом устройства. OpenGL очищает все команды рисования и может освободить некоторые ресурсы. Прорисовка OpenGL не будет выполняться до следующего вызова **вглмакекуррент**, так как поток может не вызывать графические изображения OpenGL до тех пор, пока не вернет текущий контекст визуализации.

Второй способ разрыва связи между контекстом отрисовки и потоком заключается в вызове **вглмакекуррент** с другим контекстом визуализации. После такого вызова вызывающий поток имеет новый текущий контекст отрисовки, бывший текущий контекст отрисовки освобождается от своего соединения с потоком, а предыдущий текущий контекст отрисовки заканчивается контекстом устройства.

Функция [**вглделетеконтекст**](/windows/desktop/api/wingdi/nf-wingdi-wgldeletecontext) принимает один параметр — маркер для удаляемого контекста подготовки к просмотру. Перед вызовом **вглделетеконтекст** сделайте контекст визуализации неактуальным, вызвав [**вглмакекуррент**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent), и удалите или освободите контекст связанного устройства, вызвав [делетедк](/windows/desktop/api/wingdi/nf-wingdi-deletedc) или [релеаседк](/windows/desktop/api/winuser/nf-winuser-releasedc) соответственно.

Если поток удаляет контекст отрисовки, который является текущим контекстом визуализации другого потока, возникает ошибка. Однако если контекст визуализации является текущим контекстом отрисовки вызывающего потока, **вглделетеконтекст** очищает все команды рисования OpenGL и делает контекст визуализации неактуальным перед удалением. В этом случае, полагается на **вглделетеконтекст** , чтобы сделать контекст подготовки к просмотру неактуальным, программист должен удалить или освободить контекст связанного устройства.

 

 