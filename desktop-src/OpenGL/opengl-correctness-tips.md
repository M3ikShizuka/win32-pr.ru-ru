---
title: Советы по правильности OpenGL
description: Советы по правильности OpenGL
ms.assetid: 48397fbf-823d-4ea0-adfd-2c639e20e38f
keywords:
- OpenGL, советы по исправлению
- OpenGL, рекомендации
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5294d2e989591216ea8cf66aa380933718776f2d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104410812"
---
# <a name="opengl-correctness-tips"></a>Советы по правильности OpenGL

Следуйте приведенным ниже рекомендациям, чтобы создать приложения OpenGL, которые выполняются так, как вам нужно.

-   Поведение при возникновении ошибки в части реализации OpenGL может измениться в будущем выпуске OpenGL. Семантика ошибок OpenGL может измениться в будущих редакциях.
-   Используйте матрицу проекции, чтобы свернуть всю геометрию в одну плоскость. Если используется матрица моделвиев, то функции OpenGL, которые работают в координатах глаз (таких как освещение и определенные приложением обтравочные плоскости), могут завершиться ошибкой.
-   Не вносите существенные изменения в одну матрицу. Например, не следует анимировать вращение, постоянно вызывая [**глротате**](glrotate.md) с инкрементным углом. Вместо этого используйте [**гллоадидентити**](glloadidentity.md) для инициализации заданной матрицы для каждого кадра, а затем вызовите **глротате** с требуемым полным углом для этого кадра.
-   Ожидает несколько проходов через базу данных отрисовки для создания одних и тех же фрагментов пикселей, только если это поведение гарантировано правилами расхождения, установленными для совместимой реализации OpenGL. В противном случае несколько проходов могут формировать различные наборы фрагментов.
-   Не следует выводить сообщения об ошибках во время определения списка отображаемых данных. Команды в списке Отображение выводят ошибки только при выполнении списка.
-   Чтобы оптимизировать операцию в буфере глубины, разместите ближайшую плоскость фрустум в той мере, насколько это возможно.
-   Вызовите [**глфлуш**](glflush.md) для принудительного выполнения всех предыдущих команд OpenGL. Не подсчитайте значение для [**глжет**](glgetbooleanv--glgetdoublev--glgetfloatv--glgetintegerv.md) или [**глисенаблед**](glisenabled.md) , чтобы очистить поток отрисовки. Команды запроса сбрасываются как часть потока, что требуется для возврата допустимых данных, но не обязательно завершать все ожидающие выполнения команды отрисовки.
-   Отключите дизеринг при подготовке изображений с отснятым смешением (например, при вызове [**глкопипикселс**](glcopypixels.md) ).
-   Используйте весь диапазон буфера накопления. Например, при накоплении четырех изображений каждый из них масштабируется по одному кварталу по мере накопления.
-   Чтобы получить точную двухмерную растрирование, аккуратно укажите ортогональную проекцию и вершины примитивов, которые должны быть растровыми. Укажите ортогональную проекцию с целыми координатами, как показано в следующем примере.

    ``` syntax
    gluOrtho2D(0, width, 0, height); 
    ```

    Параметры *Width* и *Height* являются размерами окна просмотра. Учитывая эту матрицу проекции, поместите вершины многоугольников и изображения пикселей в целочисленные координаты, чтобы выполнить прогнозируемый растрирование. Например, [глректи](glrect-functions.md)(0, 0, 1, 1) надежно заполняет нижний левый пиксел окна просмотра, а [glRasterPos2i](glrasterpos-functions.md)(0, 0) надежно размещает немасштабное изображение в левом нижнем пикселе окна просмотра. Однако вершины точек, вершины линий и точечных рисунков должны размещаться в половинных целых местах. Например, линия, нарисованная от (*x* (1), 0,5) до (*x* (2), 0,5), будет надежно отображена в нижней строке пикселей в окне просмотра, а точка, нарисованная в (0,5, 0,5), будет надежно заполнять тот же пиксель, что и глректи (0, 0, 1, 1).

    Оптимальный компромисс, позволяющий указывать все примитивы в целых позициях, сохраняя при этом гарантированно предсказуемую растрирование, — перевод *x* и *y* на 0,375, как показано в следующем примере кода. Такой перевод обеспечивает безотносительное расположение изображений многоугольников и пикселов, а также перемещение вершин линий, достаточно близкого к пикселным центрам.

    ``` syntax
    glViewport(0, 0, width, height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity( );
    gluOrtho2D(0, width, 0, height);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity( );
    glTranslatef(0.375, 0.375, 0.0);
    /* render all primitives at integer positions */
    ```

-   Избегайте использования отрицательных *координат вершин и отрицательных* координат текстуры в *q* . OpenGL может не отсекать такие координаты правильно и может привести к ошибкам интерполяции при заливке примитивов, определенных такими координатами.

 

 




