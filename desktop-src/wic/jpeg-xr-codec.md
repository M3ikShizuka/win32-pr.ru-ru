---
description: Собственный кодек XR JPEG доступен через компонент Windows Imaging Component (WIC). Формат JPEG XR, который поддерживает кодек, предназначен для бытовой цифровой фотографии.
ms.assetid: CB8D1A5F-B544-462E-8927-F45512CED873
title: Общие сведения о коде XR JPEG
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f32ffa397667b325d4e49eadf4d8ce42d49e8a88
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105702783"
---
# <a name="jpeg-xr-codec-overview"></a>Общие сведения о коде XR JPEG

Собственный кодек XR JPEG доступен через компонент Windows Imaging Component (WIC). Формат JPEG XR, который поддерживает кодек, предназначен для бытовой цифровой фотографии.

Формат JPEG XR может добиться удвоенной эффективности сжатия исходного формата JPEG с менее заметными артефактами сжатия. К функциям JPEG XR относятся:

-   Поддержка монохромных изображений, RGB, CMYK и n-канального изображения
-   8-, 16-и 32-разрядные форматы целых чисел
-   Высокий динамический диапазон, форматы с широкими охватами, использующие значения цвета с фиксированной точкой или с плавающей запятой
-   Прогрессивное декодирование
-   Шифрование с потерей или без потерь с использованием того же алгоритма сжатия
-   Поддержка декодирования интересующих регионов в больших изображениях

Формат JPEG XR определяется в следующих документах стандартов:

-   ITU-T T. 832: *информационная технология — JPEG XR Image система кодирования — спецификация кодирования изображения*
-   ISO/IEC 29199-2:2010: *информационные технологии — система кодирования изображений JPEG XR — часть 2. Спецификация кодирования изображения*

Стандарт JPEG XR Standard в основном основан на [фотографическом формате HD](hdphoto-format-overview.md) , но существуют некоторые различия между двумя форматами. В Windows 8 кодек HD Photo был обновлен для поддержки JPEG XR. Теперь кодировщик всегда выводит двоичный поток, соответствующий XR JPEG. Декодер может декодировать изображения JPEG XR и HD Photo.

В кодеке XR JPEG были внесены существенные улучшения производительности по отношению к графическому кодеку HD. Например, улучшено декодирование изображений с подразрешением, например создание эскизов, а также декодирование изображений с низким разрешением. Рекомендуется использовать формат JPEG XR вместо формата фотографии HD.

## <a name="codec-information"></a>Сведения о кодека



|                     |                                                                         |
|---------------------|-------------------------------------------------------------------------|
| Расширение имени файла | "жкср" и "формате WDP"                                                         |
| Идентификатор GUID контейнера      | **GUID \_ контаинерформатвмп**                                            |
| GUID декодера        | **\_ВИКВМПДЕКОДЕР CLSID**                                                |
| GUID кодировщика        | **\_ВИКВМПЕНКОДЕР CLSID**                                                |
| Поддержка профилей     | Кодировщик и декодер поддерживают до основного профиля и до уровня 128. |



 

## <a name="codec-features"></a>Функции кодеков

### <a name="high-dynamic-range"></a>Высокий динамический диапазон

JPEG XR поддерживает высокодинамические изображения диапазонов с плавающей запятой или цвета с фиксированной точкой. В этих цветовых форматах числовой диапазон пикселей больше видимого диапазона, поэтому можно настроить цвета выше или ниже видимого диапазона на промежуточных этапах обработки.

-   Фиксированная точка: в представлении с фиксированной запятой 0 представляет черный, а 1,0 — максимальную насыщенность. Кодек JPEG XR поддерживает 16-разрядные и 32-разрядные форматы с фиксированной запятой. Для 16-разрядной версии 1,0 = 0x2000h, которая предоставляет 13 бит для видимого диапазона \[ 0... 1 \] . Общий диапазон составляет от – 4,0 до + 3,999 и сопоставляется линейно. Для 32-bit, 1,0 = 0x01000000h видимым диапазоном является 24 бита, а общий диапазон — от – 128 до + 127,999.
-   С плавающей запятой: в представлении с плавающей запятой 0 представляет черный, а 1,0 — максимальную насыщенность. Кодек JPEG XR поддерживает 16-разрядные и 32-разрядные форматы с плавающей запятой.

### <a name="tiles"></a>Плитки

Фрейм можно секционировать на прямоугольные подобласти, называемые *плитками*. Плитка — это область изображения, содержащая прямоугольные массивы макроблоккс. Плитки позволяют декодировать регионы изображения без обработки всего изображения.

Во время кодирования выберите число плиток, задав свойства **хоризонталтилеслицес** и **вертикалтилеслицес** . Минимальный размер плитки — 16 × 16 пикселей. Кодировщик корректирует количество плиток, чтобы поддерживать это ограничение. Существует дополнительная нагрузка на хранилище и обработку, связанная с каждой плиткой, поэтому следует учитывать количество плиток, необходимых для конкретных сценариев.

### <a name="image-stream-output"></a>Выходные данные потока изображений

Стандарт JPEG-XR определяет две части файла JPEG-XR:

-   Поток битов образа, определенный в тексте стандарта.
-   Контейнер изображения. Файл содержит метаданные EXIF и XMP и определяется в приложении A из стандарта.

Можно и в стандартном случае внедрять поток изображения в контейнер файлов другого типа. Кодировщик поддерживает режим только потоковой передачи, который выводит поток битов необработанного изображения без контейнера изображения. Приложение может хранить битовый поток в каком бы то ни было другом формате контейнера.

Чтобы включить режим «только потоковая передача», установите свойство **стреамонли** .

### <a name="image-quality-settings"></a>Параметры качества изображения

Несколько свойств кодека управляют качеством выходного изображения из кодировщика.

-   [Имажекуалити](#imagequality) — это свойство, которое является общим для кодеков WIC. Он задает качество изображения как одно значение с плавающей запятой от 0,0 до 1,0.
-   Свойства [Quality](#image-quality-settings), [перекрытия](#overlap)и [подвыборки](#subsampling) обеспечивают больший контроль над параметрами качества.

Чтобы использовать свойства " [качество](#image-quality-settings)", " [Перекрытие](#overlap)" и " [подвыборка](#subsampling) ", задайте для свойства [усекодекоптионс](#usecodecoptions) значение **Variant \_ true**.

Если [усекодекоптионс](#usecodecoptions) имеет значение **Variant \_ false** (по умолчанию используется **вариант \_ false** ), кодировщик использует свойство [имажекуалити](#imagequality) . Кодировщик сопоставляет значение Имажекуалити с [качеством](#image-quality-settings), [перекрытием](#overlap)и [подвыборкой](#subsampling) с помощью таблицы подстановки.

Кодировщик не поддерживает свойство **компрессионкуалити** .

### <a name="compressed-domain-transcode"></a>Сжатый перекодированный домен

Кодек JPEG XR может выполнять определенные преобразования изображений без фактического декодирования сжатых данных и их повторной кодировки. Операции со сжатыми доменами очень эффективны и позволяют избежать дополнительной потери качества, типичной при расшифровке и повторном кодировании сжатого с потерей изображения.

Поддерживаются следующие операции со сжатыми доменами:

-   Обрезать область изображения.
-   Поворот или отражение изображения.
-   Отбросить данные частоты, чтобы создать файл изображения меньшего размера.
-   Реорганизовать изображение между пространственным и частотным порядком.

Кодировщик XR JPEG использует сжатое перекодирование домена, если это возможно, если исходный образ является JPEG-изображением XR. Когда кодировщик выполняет операцию со сжатым доменом, он игнорирует следующие свойства кодека: [алфакуалити](#alphaquality), [имажекуалити](#imagequality), [интерлеаведалфа](#interleavedalpha), [](#lossless)[Перекрытие](#overlap)без потери [качества](#image-quality-settings). Если свойства [хоризонталтилеслицес](/windows) и [вертикалтилеслицес](/windows) существуют, их необходимо присвоить нулю. Нельзя изменить размер плитки изображения в составе сжатого домена.

В приведенном ниже списке описывается выполнение преобразований изображений.

-   Чтобы обрезать изображение, задайте нужный регион в параметре [**викрект**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapframeencode-writesource) метода **вритесаурце** .
-   Чтобы повернуть или перевернуть изображение, установите свойство [битмаптрансформ](#bitmaptransform) .
-   Чтобы отменить данные частоты в изображении, установите свойство [имажедатадискард](#imagedatadiscard) . Чтобы отбросить данные частоты в альфа-канале, установите свойство [алфадатадискард](#alphadatadiscard) . При отклонении данных частоты уменьшается размер закодированного файла и может снизиться разрешение.
-   Чтобы изменить организацию изображения между частотой и пространственной сортировкой, задайте свойство [фрекуенциордеринг](/windows) .

Чтобы отключить сжатый перекодировку домена и заставить кодировщик повторно закодировать образ, присвойте параметру [усекодекоптионс](#usecodecoptions) **значение Variant \_ true** и присвойте параметру [компресседдомаинтранскоде](#compresseddomaintranscode) значение **Variant \_ false**.

## <a name="encoder-options"></a>Параметры кодировщика

Чтобы задать свойства кодировки, используйте интерфейс [**IPropertyBag2**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa768192(v=vs.85)) . Дополнительные сведения см. в разделе [Общие сведения о кодировке](-wic-creating-encoder.md).

В следующем списке указаны параметры кодировщика.

-   [алфадатадискард](#alphadatadiscard)
-   [алфакуалити](#alphaquality)
-   [битмаптрансформ](#bitmaptransform)
-   [компресседдомаинтранскоде](#compresseddomaintranscode)
-   [фрекуенциордер](#frequencyorder)
-   [хоризонталтилеслицес](#horizontaltileslices)
-   [игнореоверлап](#ignoreoverlap)
-   [имажедатадискард](#imagedatadiscard)
-   [ImageQuality](#imagequality)
-   [интерлеаведалфа](#interleavedalpha)
-   [Lossless](#lossless)
-   [Перекрытие](#overlap)
-   [прогрессивемоде](#progressivemode)
-   [Качество](#image-quality-settings)
-   [стреамонли](#streamonly)
-   [Подвыборка](#subsampling)
-   [усекодекоптионс](#usecodecoptions)
-   [вертикалтилеслицес](#verticaltileslices)

### <a name="alphadatadiscard"></a>алфадатадискард

Задает объем данных альфа-частоты, которые должны быть удалены во время перекодирования сжатого домена.



| Тип данных | VARTYPE     | Диапазон | Значение по умолчанию |
|-----------|-------------|-------|---------|
| **учар** | **VT \_ UI1** | 0 – 4   | Нет    |



 

Это свойство применяется, только если свойство [компресседдомаинтранскоде](#compresseddomaintranscode) имеет значение **Variant \_ true** , а изображение содержит плоский альфа-канал или альфа-канал с чередованием; в противном случае он игнорируется.

Для изображений, содержащих плоский альфа-канал, допустимы следующие значения.



| Значение | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|-------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0     | Данные частоты изображения не удаляются.                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 1     | Флексбитс отклоняется. Это произвольно сокращает качество плоского альфа-канала для перекодированного изображения. , без изменения эффективного разрешения. Точное уменьшение размера и качества файла зависит от множества факторов и не может быть точно указано.                                                                                                                                                                                           |
| 2     | Полоса данных высокой тактовой частоты отбрасывается, включая флексбитс. Это эффективно сокращает разрешение плоского альфа-канала на коэффициент 4 в обоих измерениях. Фактические размеры перекодированного изображения остаются неизменными, но изображение теряет все детали в каждом блоке 4x4 пикселей альфа-канала. Как правило, это значение следует задавать, только если свойство [имажедатадискард](#imagedatadiscard) имеет то же значение.                            |
| 3     | Полосы данных с высокой и низкой тактовой частотой отбрасываются, включая флексбитс. Это ффективели уменьшает разрешение плоского альфа-канала на коэффициент 16 в обоих измерениях. Фактические размеры перекодированного изображения остаются неизменными, но изображение теряет все детали в каждой 16x16 макроблокк пикселов альфа-канала. Как правило, это значение следует задавать, только если свойство [имажедатадискард](#imagedatadiscard) имеет то же значение. |
| 4     | Полностью удаляется альфа-канал. Формат пикселей перекодированного изображения изменяется в соответствии с удалением альфа-канала.                                                                                                                                                                                                                                                                                                                                |



 

Для образов, содержащих альфа-канал с чередованием, допустимо следующее значение.



| Значение | Описание                                                                                                                                 |
|-------|---------------------------------------------------------------------------------------------------------------------------------------------|
| 4     | Полностью удаляется альфа-канал. Формат пикселей перекодированного изображения изменяется в соответствии с удалением альфа-канала. |



 

Для Alpha с чередованием, если это свойство не имеет значение 4, альфа-канал обрабатывается так же, как данные изображения, в соответствии со значением свойства [имажедатадискард](#imagedatadiscard) .

### <a name="alphaquality"></a>алфакуалити

Задает качество сжатия для изображения плоского альфа-канала.



| Тип данных | VARTYPE     | Диапазон | Значение по умолчанию |
|-----------|-------------|-------|---------|
| **учар** | **VT \_ UI1** | 1 – 255 | 1       |



 

Это свойство применяется, если изображение имеет альфа-канал, а свойство [интерлеаведалфа](#interleavedalpha) имеет значение **Variant \_ false**. Значение 1 означает режим без потерь. Увеличение значений приводит к увеличению коэффициента сжатия и более низкому качеству изображения.

### <a name="bitmaptransform"></a>битмаптрансформ

Указывает, будет ли изображение повернуто или отражено при декодировании.



| Тип данных | VARTYPE     | Диапазон                                                                     | Значение по умолчанию                       |
|-----------|-------------|---------------------------------------------------------------------------|-------------------------------|
| **учар** | **VT \_ UI1** | [**викбитмаптрансформоптионс**](/windows/desktop/api/Wincodec/ne-wincodec-wicbitmaptransformoptions) | **WICBitmapTransformRotate0** |



 

### <a name="compresseddomaintranscode"></a>компресседдомаинтранскоде

Включает или отключает перекодирование сжатого домена.



| Тип данных         | VARTYPE      | Значение по умолчанию           |
|-------------------|--------------|-------------------|
| **VARIANT \_ bool** | **Логическое значение VT \_** | **ВАРИАНТ \_ true** |



 

Чтобы отключить сжатые операции домена, задайте для этого свойства значение **Variant \_ false**.

### <a name="frequencyorder"></a>фрекуенциордер

Включает кодирование в порядке частот. Реализации устройств кодировщиков JPEG XR могут организовывать файл в пространственном порядке, чтобы уменьшить объем памяти, необходимый для кодирования.



| Тип данных         | VARTYPE      | Значение по умолчанию           |
|-------------------|--------------|-------------------|
| **VARIANT \_ bool** | **Логическое значение VT \_** | **ВАРИАНТ \_ true** |



 

-   **Вариант \_ TRUE**: порядок частот. Данные с наименьшей частотой отображаются в файле первыми, а содержимое изображения группируются по частоте, а не к пространственной ориентации. Упорядочение файла по частоте обеспечивает лучшую производительность при декодировании на основе частоты.
-   **Вариант \_ FALSE**: пространственный порядок. Пространственный порядок сокращает объем памяти, необходимый для кодирования

Рекомендуется использовать частотный порядок, если нет причин, связанных с производительностью или конкретными приложениями, для использования пространственного порядка.

### <a name="horizontaltileslices"></a>хоризонталтилеслицес

Задает количество горизонтальных плиток.



| Тип данных  | VARTYPE     | Диапазон  | Значение по умолчанию                      |
|------------|-------------|--------|------------------------------|
| **USHORT** | **VT \_ UI2** | 0 — 4095 | (ширина изображения — 1)  >> 8 |



 

Значение — это число горизонтальных делений; то есть числом горизонтальных плиток — 1.

### <a name="ignoreoverlap"></a>игнореоверлап

Указывает, как кодировщик обрабатывает границы плиток во время перекодирования сжатого домена.



| Тип данных         | VARTYPE      | Значение по умолчанию            |
|-------------------|--------------|--------------------|
| **VARIANT \_ bool** | **Логическое значение VT \_** | **ВАРИАНТ \_ false** |



 

Это свойство применяется только в том случае, если для свойства [компресседдомаинтранскоде](#compresseddomaintranscode) задано значение **Variant \_ true** , а в подобласти выполняется перекодировка только одной или нескольких плиток.

Операция по умолчанию для перекодировки региона заключается в том, чтобы расширить запрошенную область, включив в нее окружающие Пиксели, необходимые для перекрытия границ области. Если для этого свойства задано значение **Variant \_ true**, кодек игнорирует окружающие пикселы и извлекаются только выбранные плитка или плитки. Если исходное изображение не является мозаичным или если запрошенная область содержит частичные плитки, этот параметр игнорируется.

### <a name="imagedatadiscard"></a>имажедатадискард

Задает объем данных частоты образа, которые должны быть удалены во время перекодирования сжатого домена.



| Тип данных | VARTYPE     | Диапазон | Значение по умолчанию |
|-----------|-------------|-------|---------|
| **учар** | **VT \_ UI1** | 0 – 3   | 0       |



 

Это свойство применяется только в том случае, если свойство [компресседдомаинтранскоде](#compresseddomaintranscode) имеет значение **Variant \_ true**; в противном случае оно игнорируется.



| Значение | Описание                                                                                                                                                                                                                                                                                                                                                                                                       |
|-------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0     | Данные частоты изображения не удаляются.                                                                                                                                                                                                                                                                                                                                                                             |
| 1     | Флексбитс отклоняется. Это произвольно сокращает качество перекодированного изображения без изменения эффективного разрешения изображения. Точное уменьшение размера и качества файла зависит от множества факторов и не может быть точно указано. Это значение возвращает ошибку, указанную для альфа-канала с чередованием.                                                                                |
| 2     | Полоса данных высокой тактовой частоты отбрасывается, включая флексбитс. Это уменьшает разрешение перекодированного изображения с помощью коэффициента 4 в обоих измерениях. Фактические размеры перекодированного изображения остаются неизменными, но изображение теряет все детали в каждом блоке 4x4 пикселей. Таким образом, перекодированный образ должен быть downsampled соответствующим образом при его декодировании.                             |
| 3     | Полосы данных с высокой и низкой тактовой частотой отбрасываются, включая флексбитс. Это уменьшает разрешение перекодированного изображения с помощью коэффициента 16 в обоих измерениях. Фактические размеры перекодированного изображения остаются неизменными, но изображение теряет все детали в каждой 16x16 макроблокк пикселей. Таким образом, перекодированный образ должен быть downsampled соответствующим образом при его декодировании. |



 

Если изображение содержит альфа-канал с чередованием, значение [имажедатадискард](#imagedatadiscard) применяется к альфа-каналу, если только свойство [алфадатадискард](#alphadatadiscard) не имеет значение 4. в этом случае альфа-канал отбрасывается.

Для плоского альфа-канала данные частоты, которые отбрасываются, управляются свойством [алфадатадискард](#alphadatadiscard) .

### <a name="imagequality"></a>ImageQuality

Задает качество изображения.



| Тип данных | VARTYPE    | Диапазон | Значение по умолчанию |
|-----------|------------|-------|---------|
| **FLOAT** | **VT \_ R4** | от 0 до 1,0 | 0,9     |



 

Уровень 1,0 обеспечивает сжатие с математическим коэффициентом потери данных.

Уровень 0,0 является самым низким значением качества.

### <a name="interleavedalpha"></a>интерлеаведалфа

Указывает, кодировать альфа-или плоскую альфа-канал с чередованием.



| Тип данных         | VARTYPE      | Значение по умолчанию            |
|-------------------|--------------|--------------------|
| **VARIANT \_ bool** | **Логическое значение VT \_** | **ВАРИАНТ \_ false** |



 

-   **Вариант \_ TRUE**: альфа-канал с чередованием. Сведения о альфа-канале кодируются как дополнительный канал с чередованием, без корреляции с каналами содержимого изображения. Этот режим удобен для декодирования альфа-канала одновременно с изображением при потоковой передаче изображения.
-   ВАРИАНТ \_ false: плоский альфа. Плоский альфа-канал кодируется как отдельное изображение. Данные изображения и альфа-канал декодированы независимо друг от друга. При необходимости можно задать уровень качества альфа-канала, задав свойство [алфакуалити](#alphaquality) .

Альфа-канал с чередованием поддерживается только для определенных форматов пикселей RGB. Плоская альфа-версия поддерживается для любого формата изображения, определяющего альфа-канал.

### <a name="lossless"></a>Lossless

Включает сжатие потерь.



| Тип данных         | VARTYPE      | Значение по умолчанию        |
|-------------------|--------------|----------------|
| **VARIANT \_ bool** | **Логическое значение VT \_** | ВАРИАНТ \_ false |



 

Если значение является **вариантным \_ true**, кодировщик использует сжатие без потерь. Если задано **\_ значение true**, это свойство переопределяет свойство [имажекуалити](#imagequality) .

### <a name="overlap"></a>Перекрытие

Задает уровень фильтрации перекрытия. При фильтрации наложения коэффициенты преобразования применяются для границ блока и макроблокк. Это может сократить количество блокирующих артефактов.



| Тип данных | VARTYPE     | Диапазон | Значение по умолчанию |
|-----------|-------------|-------|---------|
| **учар** | **VT \_ UI1** | 0 – 4   | 1       |



 



| Значение | Описание                                   |
|-------|-----------------------------------------------|
| 0     | Без перекрытия.                                   |
| 1     | Один уровень перекрытия, мягкое мозаичное разбиение. (по умолчанию). |
| 2     | Два уровня перекрытия, мягкое мозаичное разбиение.           |
| 3     | Один уровень перекрытия, жесткое разбиение             |
| 4     | Два уровня перекрытия, жесткое разбиение.           |



 

Определения:

-   Один уровень перекрытия: закодированные значения для блоков 4x4 изменяются на основе соседних блоков.
-   Два уровня перекрытия: применяется первый уровень перекрытия. Кроме того, закодированные значения 16x16 макроблоккс изменяются на основе соседних макроблоккс.
-   Мягкое разбиение: Фильтрация наложения применяется к границам плиток.
-   Жесткое разбиение: Фильтрация наложения не применяется к границам плиток. Сложные плитки могут представлять некоторые визуальные артефакты, а также границы плиток.

Если задать это свойство, также установите для [усекодекоптионс](#usecodecoptions) значение **Variant \_ true**.

### <a name="progressivemode"></a>прогрессивемоде

Включает или отключает прогрессивную кодировку.



| Тип данных         | VARTYPE      | Значение по умолчанию            |
|-------------------|--------------|--------------------|
| **VARIANT \_ bool** | **Логическое значение VT \_** | **ВАРИАНТ \_ false** |



 



| Значение              | Описание                |
|--------------------|----------------------------|
| **ВАРИАНТ \_ true**  | Последовательный режим (по умолчанию). |
| **ВАРИАНТ \_ false** | Прогрессивный режим.          |



 

### <a name="quality"></a>Качество

Задает качество сжатия.



| Тип данных | VARTYPE     | Диапазон | Значение по умолчанию |
|-----------|-------------|-------|---------|
| **учар** | **VT \_ UI1** | 1 – 255 | 1       |



 

Значение 1 означает режим без потерь. Увеличение значений приводит к увеличению коэффициента сжатия и более низкому качеству изображения.

Если задать это свойство, также установите для [усекодекоптионс](#usecodecoptions) значение **Variant \_ true**.

### <a name="streamonly"></a>стреамонли

Включает или отключает режим "только потоковая передача".



| Тип данных         | VARTYPE      | Значение по умолчанию            |
|-------------------|--------------|--------------------|
| **VARIANT \_ bool** | **Логическое значение VT \_** | **ВАРИАНТ \_ false** |



 



| Значение              | Описание                                                            |
|--------------------|------------------------------------------------------------------------|
| **ВАРИАНТ \_ true**  | Кодировщик выводит поток необработанных изображений без метаданных.             |
| **ВАРИАНТ \_ false** | Кодировщик выводит формат контейнера (поток изображений и метаданные). |



 

### <a name="subsampling"></a>Подвыборка

Задает подвыборку чрома. Это свойство применяется только к изображениям RGB.



| Тип данных | VARTYPE     | Диапазон | Значение по умолчанию                                                  |
|-----------|-------------|-------|----------------------------------------------------------|
| **учар** | **VT \_ UI1** | 0 – 3   | 3, если [имажекуалити](#imagequality) > 0,8; в противном случае 1 |



 



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Значение</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>3</td>
<td>Кодировка 4:4:4. Сохраняет полное разрешение чрома.</td>
</tr>
<tr class="even">
<td>2</td>
<td>Кодировка 4:2:2. Разрешение чрома — 1/2 для разрешения освещенности.</td>
</tr>
<tr class="odd">
<td>1</td>
<td>Кодировка 4:2:0. Разрешение чрома — 1/4 для разрешения освещенности.</td>
</tr>
<tr class="even">
<td>0</td>
<td>Кодирование 4:0:0. Отменяет все значения чрома и сохраняет только светимость.
<blockquote>
[!Note]<br />
Этот режим не рекомендуется, поскольку кодек использует немного измененное определение светимости для повышения производительности. Вместо этого лучше преобразовать изображение в монохромную перед кодированием.
</blockquote>
<br/></td>
</tr>
</tbody>
</table>



 

4:2:2 и 4:2:0 сохраняют сведения о освещенности за счет сведений о цвете.

Если задать это свойство, также установите для [усекодекоптионс](#usecodecoptions) значение **Variant \_ true**.

### <a name="usecodecoptions"></a>усекодекоптионс

Указывает, следует ли использовать свойства [Quality](#image-quality-settings), [перекрытия](#overlap)и [подвыборки](#subsampling) вместо универсального свойства [имажекуалити](#imagequality) .



| Тип данных         | VARTYPE      | Значение по умолчанию            |
|-------------------|--------------|--------------------|
| **VARIANT \_ bool** | **Логическое значение VT \_** | **ВАРИАНТ \_ false** |



 

### <a name="verticaltileslices"></a>вертикалтилеслицес

Задает количество горизонтальных плиток.



| Тип данных  | VARTYPE     | Диапазон  | Значение по умолчанию                       |
|------------|-------------|--------|-------------------------------|
| **USHORT** | **VT \_ UI2** | 0 — 4095 | (высота изображения – 1)  >> 8 |



 

Значение — это число вертикальных подразделений; то есть число вертикальных плиток — 1.

## <a name="supported-color-formats"></a>Поддерживаемые форматы цвета

Дополнительные сведения об этих форматах см. в разделе [собственные форматы пикселей](-wic-codec-native-pixel-formats.md).

-   **Форматы целых чисел RGB**
    -   GUID \_ WICPixelFormat24bppRGB
    -   GUID \_ WICPixelFormat24bppBGR
    -   GUID \_ WICPixelFormat32bppBGR
    -   GUID \_ WICPixelFormat48bppRGB
    -   GUID \_ WICPixelFormat32bppBGRA
    -   GUID \_ WICPixelFormat64bppRGBA
    -   GUID \_ WICPixelFormat32bppPBGRA
    -   GUID \_ WICPixelFormat64bppPRGBA
-   **Форматы RGB с фиксированной запятой**
    -   GUID \_ WICPixelFormat48bppRGBFixedPoint
    -   GUID \_ WICPixelFormat64bppRGBFixedPoint
    -   GUID \_ WICPixelFormat96bppRGBFixedPoint
    -   GUID \_ WICPixelFormat128bppRGBFixedPoint
    -   GUID \_ WICPixelFormat128bppRGBAFixedPoint
-   **Форматы RGB с плавающей запятой**
    -   GUID \_ WICPixelFormat48bppRGBHalf
    -   GUID \_ WICPixelFormat64bppRGBHalf
    -   GUID \_ WICPixelFormat128bppRGBFloat
    -   GUID \_ WICPixelFormat64bppRGBAFixedPoint
    -   GUID \_ WICPixelFormat64bppRGBAHalf
    -   GUID \_ WICPixelFormat128bppRGBAFloat
    -   GUID \_ WICPixelFormat128bppPRGBAFloat
-   **Форматы в градациях серого**
    -   GUID \_ WICPixelFormat8bppGray
    -   GUID \_ WICPixelFormat16bppGray
    -   GUID \_ WICPixelFormat16bppGrayFixedPoint
    -   GUID \_ WICPixelFormat16bppGrayHalf
    -   GUID \_ WICPixelFormat32bppGrayFixedPoint
    -   GUID \_ WICPixelFormat32bppGrayFloat
-   **Упакованные форматы**
    -   GUID \_ WICPixelFormat16bppBGR555
    -   GUID \_ WICPixelFormat16bppBGR565
    -   GUID \_ WICPixelFormat32bppBGR101010
    -   GUID \_ WICPixelFormat32bppRGBE
-   **Форматы CMYK**
    -   GUID \_ WICPixelFormat40bppCMYKAlpha
    -   GUID \_ WICPixelFormat64bppCMYK
    -   GUID \_ WICPixelFormat80bppCMYKAlpha
-   **Форматы N-Channel**
    -   GUID \_ WICPixelFormat32bpp4Channels
    -   GUID \_ WICPixelFormat40bpp5Channels
    -   GUID \_ WICPixelFormat48bpp6Channels
    -   GUID \_ WICPixelFormat56bpp7Channels
    -   GUID \_ WICPixelFormat64bpp8Channels
    -   GUID \_ WICPixelFormat32bpp3ChannelsAlpha
    -   GUID \_ WICPixelFormat40bpp4ChannelsAlpha
    -   GUID \_ WICPixelFormat48bpp5ChannelsAlpha
    -   GUID \_ WICPixelFormat56bpp6ChannelsAlpha
    -   GUID \_ WICPixelFormat64bpp7ChannelsAlpha
    -   GUID \_ WICPixelFormat72bpp8ChannelsAlpha
    -   GUID \_ WICPixelFormat48bpp3Channels
    -   GUID \_ WICPixelFormat64bpp4Channels
    -   GUID \_ WICPixelFormat80bpp5Channels
    -   GUID \_ WICPixelFormat96bpp6Channels
    -   GUID \_ WICPixelFormat128bpp8Channels
    -   GUID \_ WICPixelFormat64bpp3ChannelsAlpha
    -   GUID \_ WICPixelFormat80bpp4ChannelsAlpha
    -   GUID \_ WICPixelFormat96bpp5ChannelsAlpha
    -   GUID \_ WICPixelFormat112bpp6ChannelsAlpha
    -   GUID \_ WICPixelFormat128bpp7ChannelsAlpha
    -   GUID \_ WICPixelFormat144bpp8ChannelsAlpha

 

 
