---
description: При установке кодека необходимо зарегистрировать его в реестре. Также необходимо убедиться в том, что кэш эскизов обновляется в случае, если на компьютере уже есть изображения в вашем формате.
ms.assetid: 7aec54cb-40ac-495c-99d9-9c397b740b21
title: Установка и регистрация кодека
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cdc13a2d937e82eae3517b9b20440f4acbb10b16af3fa0b872eb0ddd6c2a8d6a
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118965183"
---
# <a name="codec-installation-and-registration"></a>Установка и регистрация кодека

При установке кодека необходимо зарегистрировать его в реестре. Также необходимо убедиться в том, что кэш эскизов обновляется в случае, если на компьютере уже есть изображения в вашем формате.

Этот раздел состоит из следующих подразделов.

-   [Регистрация кодека](#registering-a-codec)
-   [Обновление кэша эскизов при установке кодека](#updating-the-thumbnail-cache-when-installing-your-codec)
-   [Предоставление пользователям доступ к WIC-Enabled кодеку](#making-your-wic-enabled-codec-available-to-users)
-   [Связанные темы](#related-topics)

## <a name="registering-a-codec"></a>Регистрация кодека

При регистрации кодека на самом деле регистрируются два компонента: кодировщик и декодер. Кроме того, необходимо создать записи реестра для регистрации формата контейнера с помощью обработчиков метаданных для форматов метаданных, поддерживаемых форматом изображения.

В следующих разделах описываются записи реестра, необходимые для регистрации кодека:

[Общие записи реестра](-wic-generalregentries.md)

[Записи реестра, относящиеся к кодировщику](-wic-encoderregentries.md)

[Записи реестра для отдельных декодеров](-wic-decoderregentries.md)

[интеграция с Windows фотоальбома и обозревателем Windows](-wic-integrationregentries.md)

## <a name="updating-the-thumbnail-cache-when-installing-your-codec"></a>Обновление кэша эскизов при установке кодека

При установке кодека установщику необходимо вызвать следующую функцию после записи ее записей реестра.


```C++
SHChangeNotify(SHCNE_ASSOCCHANGED, SHCNF_IDLIST, NULL, NULL)
```



этот вызов уведомляет Windows о доступности новой информации о сопоставлении файлов. Если образы в вашем формате уже существуют на компьютере, в кэше эскизов будут содержаться эскизы по умолчанию, так как при первом получении изображений декодер не был доступен для извлечения эскизов. при уведомлении Windows о доступности нового сопоставления файлов кэш эскизов удаляет все пустые эскизы и извлекает фактические эскизы из файлов, которые теперь можно декодировать.

## <a name="making-your-wic-enabled-codec-available-to-users"></a>Предоставление пользователям доступ к WIC-Enabled кодеку

Если вы являетесь производителем камеры, вы можете отправить необработанные кодеки в поле с камерами. Вы также можете разместить кодеки на странице загрузки вашего веб-узла. Тем не менее, если пользователь получает файл изображения в вашем формате из другого источника, такого как дружественный, Бизнес-связь или другой веб-сайт, он может не узнать, куда получить кодек для декодирования.

из-за этой проблемы Windows предлагает более простой способ найти кодек и загрузить его на компьютер, начиная с Windows Vista. если фотоальбом Windows распознает расширение имени файла как формат изображения, а кодек для этого формата не установлен, в диалоговом окне появляется сообщение о том, что фотография не может быть отображена, и спрашивает, требуется ли пользователю загружать программное обеспечение, необходимое для его отображения. Когда пользователь принимает сообщение, отображается веб-сайт, размещенный в корпорации Майкрософт, со ссылкой на сайт загрузки производителя кодека. (При необходимости можно запросить, чтобы пользователи перезагружались непосредственно на сайт загрузки.)

если требуется, чтобы расширения имен файлов формата изображений распознавались фотоальбомом Windows, чтобы пользователи могли направляться на сайт загрузки, необходимо выполнить следующие действия.

1.  Укажите сайт загрузки для своего кодека. (У вас может быть отдельная страница для каждого созданного кодека или одна страница, которая предоставляет загружаемые файлы для всех кодеков.)

    Сайт загрузки должен быть локализованным и удобным для поиска с помощью модели камеры.

2.  Предоставьте корпорации Майкрософт список расширений для форматов изображений, а также URL-адреса сайтов для скачивания.

необходимо сообщить корпорации майкрософт о расширениях для всех новых кодеков, разрабатываемых в будущем, и любых изменениях url-адресов сайтов загрузки, чтобы новые сведения можно было добавить в коллекцию фотографий Windows.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

**Зрения**
</dt> <dt>

[Реализация Ивикметадатаблокквритер](-wic-imp-iwicmetadatablockwriter.md)
</dt> <dt>

[Заключение (написание WIC-Enabled КОДЕка)](-wic-howtowriteacodec-conclusion.md)
</dt> <dt>

[Написание WIC-Enabled КОДЕка](-wic-howtowriteacodec.md)
</dt> <dt>

[Windows Общие сведения о компонентах обработки изображений](-wic-about-windows-imaging-codec.md)
</dt> </dl>

 

 



