---
description: В этом разделе описывается прогрессивное декодирование и использование прогрессивного декодирования в приложениях.
ms.assetid: d22c2c59-0fa1-4452-93f1-dbf151033714
title: Обзор прогрессивного декодирования
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 568b9708802b082a880f358b969d9dd4beb1e481
ms.sourcegitcommit: 099ecdda1e83618b844387405da0db0ebda93a65
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2021
ms.locfileid: "111443675"
---
# <a name="progressive-decoding-overview"></a><span data-ttu-id="b7f7c-103">Обзор прогрессивного декодирования</span><span class="sxs-lookup"><span data-stu-id="b7f7c-103">Progressive Decoding Overview</span></span>

<span data-ttu-id="b7f7c-104">В этом разделе описывается прогрессивное декодирование и использование прогрессивного декодирования в приложениях.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-104">This topic introduces progressive decoding and how to use progressive decoding in applications.</span></span> <span data-ttu-id="b7f7c-105">Кроме того, здесь приводятся рекомендации по созданию кодеков, поддерживающих прогрессивное декодирование.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-105">It also provides guidelines for creating codecs that support progressive decoding.</span></span>

<span data-ttu-id="b7f7c-106">В этом разделе содержатся следующие подразделы.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-106">This topic contains the following sections.</span></span>

-   [<span data-ttu-id="b7f7c-107">Введение</span><span class="sxs-lookup"><span data-stu-id="b7f7c-107">Introduction</span></span>](#introduction)
-   [<span data-ttu-id="b7f7c-108">Что такое прогрессивное декодирование?</span><span class="sxs-lookup"><span data-stu-id="b7f7c-108">What is Progressive Decoding?</span></span>](#what-is-progressive-decoding)
-   [<span data-ttu-id="b7f7c-109">Поддержка прогрессивного декодирования в Windows 7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-109">Progressive Decoding Support in Windows 7</span></span>](#progressive-decoding-support-in-windows-7)
-   [<span data-ttu-id="b7f7c-110">Прогрессивное декодирование JPEG</span><span class="sxs-lookup"><span data-stu-id="b7f7c-110">JPEG Progressive Decoding</span></span>](#jpeg-progressive-decoding)
-   [<span data-ttu-id="b7f7c-111">Прогрессивное декодирование PNG/GIF</span><span class="sxs-lookup"><span data-stu-id="b7f7c-111">PNG/GIF Progressive Decoding</span></span>](#pnggif-progressive-decoding)
    -   [<span data-ttu-id="b7f7c-112">Прогрессивное декодирование PNG</span><span class="sxs-lookup"><span data-stu-id="b7f7c-112">PNG Progressive Decoding</span></span>](#png-progressive-decoding)
    -   [<span data-ttu-id="b7f7c-113">Прогрессивное декодирование GIF</span><span class="sxs-lookup"><span data-stu-id="b7f7c-113">GIF Progressive Decoding</span></span>](#gif-progressive-decoding)
-   [<span data-ttu-id="b7f7c-114">Прогрессивное декодирование в приложениях</span><span class="sxs-lookup"><span data-stu-id="b7f7c-114">Progressive Decoding in Applications</span></span>](#progressive-decoding-in-applications)
-   [<span data-ttu-id="b7f7c-115">Поддержка пользовательского кодека для прогрессивного декодирования</span><span class="sxs-lookup"><span data-stu-id="b7f7c-115">Custom Codec Support for Progressive Decoding</span></span>](#custom-codec-support-for-progressive-decoding)
-   [<span data-ttu-id="b7f7c-116">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="b7f7c-116">Related topics</span></span>](#related-topics)

## <a name="introduction"></a><span data-ttu-id="b7f7c-117">Введение</span><span class="sxs-lookup"><span data-stu-id="b7f7c-117">Introduction</span></span>

<span data-ttu-id="b7f7c-118">Прогрессивное декодирование обеспечивает возможность постепенного декодирования и отрисовки фрагментов изображения до завершения загрузки всего изображения.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-118">Progressive decoding provides the ability to incrementally decode and render portions of an image before the entire image has finished downloading.</span></span> <span data-ttu-id="b7f7c-119">Эта функция значительно повышает удобство работы пользователя при просмотре изображений из Интернета, поскольку пользователю не нужно ждать загрузки всего образа перед началом декодирования.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-119">This feature greatly improves the user's experience when viewing images from the Internet, because the user does not have to wait for the entire image to download before decoding can begin.</span></span> <span data-ttu-id="b7f7c-120">Пользователи могут увидеть предварительный просмотр образа с доступными данными до загрузки всего образа.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-120">Users are able to see an image preview with available data long before the entire image is downloaded.</span></span> <span data-ttu-id="b7f7c-121">Эта функция необходима для любого приложения, используемого для просмотра изображений из Интернета или из источников данных с ограниченной пропускной способностью.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-121">This feature is essential for any application used to view images from the Internet or from data sources with limited bandwidth.</span></span>

<span data-ttu-id="b7f7c-122">Компонент Windows Imaging Component (WIC) в Windows 7 поддерживает прогрессивное декодирование популярных форматов изображений, таких как JPEG, PNG и GIF.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-122">The Windows Imaging Component (WIC) in Windows 7 supports progressive decoding of popular image formats such as JPEG, PNG, and GIF.</span></span> <span data-ttu-id="b7f7c-123">WIC также поддерживает все кодеки, не относящиеся к компоненту WIC, которые реализуют прогрессивное декодирование.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-123">WIC also supports any WIC-enabled non-Microsoft codecs that implement progressive decoding.</span></span> <span data-ttu-id="b7f7c-124">Прогрессивная кодировка не поддерживается в текущем выпуске WIC.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-124">Progressive encoding is not supported in the current release of WIC.</span></span> <span data-ttu-id="b7f7c-125">В этом разделе описывается прогрессивное декодирование в Windows 7 и процедура включения прогрессивного декодирования в приложениях.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-125">This topic outlines progressive decoding in Windows 7 and the procedure for enabling progressive decoding in your applications.</span></span>

## <a name="what-is-progressive-decoding"></a><span data-ttu-id="b7f7c-126">Что такое прогрессивное декодирование?</span><span class="sxs-lookup"><span data-stu-id="b7f7c-126">What is Progressive Decoding?</span></span>

<span data-ttu-id="b7f7c-127">Прогрессивное декодирование — это возможность постепенного декодирования фрагментов изображения из неполного файла изображения.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-127">Progressive decoding is the ability to incrementally decode portions of an image from an incomplete image file.</span></span> <span data-ttu-id="b7f7c-128">Перед началом декодирования для традиционного декодирования требуется полный файл образа.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-128">Traditional decoding requires a complete image file before decoding can begin.</span></span> <span data-ttu-id="b7f7c-129">Прогрессивное декодирование начинается после завершения загрузки последовательного уровня образа.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-129">Progressive decoding starts after a progressive level of an image has finished downloading.</span></span> <span data-ttu-id="b7f7c-130">Декодер выполняет декодирование на текущем последовательном уровне образа.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-130">The decoder performs a decoding pass on the image's current progressive level.</span></span> <span data-ttu-id="b7f7c-131">Затем он выполняет несколько проходов декодирования образа по мере загрузки каждого последовательного уровня.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-131">It then performs multiple decoding passes on the image as each progressive level is downloaded.</span></span> <span data-ttu-id="b7f7c-132">Каждый проход декодирования показывает больше изображений, пока образ не будет полностью скачан и декодирован.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-132">Each decoding pass reveals more of the image until the image is fully downloaded and decoded.</span></span> <span data-ttu-id="b7f7c-133">Число проходов, необходимых для декодирования полного образа, зависит от формата файла изображения и процесса кодирования, используемого для создания образа.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-133">The number of passes required to decode a full image depends on the image file format and the encoding process used to create the image.</span></span>

<span data-ttu-id="b7f7c-134">Образы должны быть специально закодированы для реализации прогрессивного декодирования, но не все форматы изображений поддерживают его.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-134">Images must be specifically encoded to implement progressive decoding, but not all image formats support it.</span></span> <span data-ttu-id="b7f7c-135">В следующем списке перечислены требования для использования прогрессивной декодирования.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-135">The following list summarizes the requirements for using progressive decoding.</span></span>

-   <span data-ttu-id="b7f7c-136">Файл изображения должен поддерживать прогрессивное декодирование.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-136">The image file must support progressive decoding.</span></span> <span data-ttu-id="b7f7c-137">Большинство форматов изображений не поддерживают прогрессивное декодирование, хотя в популярных форматах изображений — JPEG, PNG и GIF.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-137">Most image formats do not support progressive decoding, although the popular image formats JPEG, PNG, and GIF do.</span></span>
-   <span data-ttu-id="b7f7c-138">Файл изображения должен быть закодирован в виде последовательного изображения.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-138">The image file must be encoded as a progressive image.</span></span> <span data-ttu-id="b7f7c-139">Файлы изображений, которые не были созданы с помощью последовательной кодировки изображений, не могут реализовывать прогрессивное декодирование, даже если формат файла в противном случае будет поддерживать его.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-139">Image files that were not created with the progressive image encoding cannot implement progressive decoding, even where the file format would otherwise support it.</span></span>
-   <span data-ttu-id="b7f7c-140">Должен быть доступен кодек, поддерживающий прогрессивное декодирование.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-140">A codec that supports progressive decoding must be available.</span></span> <span data-ttu-id="b7f7c-141">Если кодек не поддерживает прогрессивное декодирование, изображение, закодированное как прогрессивное изображение, будет декодировано как традиционное изображение.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-141">If a codec does not support progressive decoding, an image encoded as a progressive image will be decoded as a traditional image.</span></span>

## <a name="progressive-decoding-support-in-windows-7"></a><span data-ttu-id="b7f7c-142">Поддержка прогрессивного декодирования в Windows 7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-142">Progressive Decoding Support in Windows 7</span></span>

<span data-ttu-id="b7f7c-143">Windows 7 предоставляет встроенные кодеки, поддерживающие прогрессивное декодирование форматов изображений JPEG, PNG и GIF.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-143">Windows 7 provides built-in codecs that support progressive decoding for JPEG, PNG, and GIF image formats.</span></span> <span data-ttu-id="b7f7c-144">Каждый из этих кодеков Windows 7 выполняет несколько проходов декодирования изображения.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-144">Each of these Windows 7 codecs perform multiple decoding passes on an image.</span></span> <span data-ttu-id="b7f7c-145">Каждый этап соответствует определенному уровню и части декодированного изображения, что в конечном итоге приведет к полному декодированию изображения.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-145">Each pass corresponds to a particular level and portion of the image that is decoded, eventually leading to a fully decoded image.</span></span>

<span data-ttu-id="b7f7c-146">Каждый формат изображения обрабатывает прогрессивное декодирование другим способом.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-146">Each image format handles progressive decoding in a different manner.</span></span> <span data-ttu-id="b7f7c-147">В следующей таблице приведены сведения о количестве последовательных уровней и методе декодирования, поддерживаемом прогрессивными форматами декодирования Windows 7.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-147">The following table provides information about the number of progressive levels and the decoding method supported by the Windows 7 progressive decoding formats.</span></span> 

| <span data-ttu-id="b7f7c-148">Формат образа</span><span class="sxs-lookup"><span data-stu-id="b7f7c-148">Image Format</span></span> | <span data-ttu-id="b7f7c-149">Число поддерживаемых последовательных уровней</span><span class="sxs-lookup"><span data-stu-id="b7f7c-149">Number of progressive levels supported</span></span> | <span data-ttu-id="b7f7c-150">Прогрессивный метод декодирования</span><span class="sxs-lookup"><span data-stu-id="b7f7c-150">Progressive decoding method</span></span> |
|--------------|----------------------------------------|-----------------------------|
| <span data-ttu-id="b7f7c-151">JPEG</span><span class="sxs-lookup"><span data-stu-id="b7f7c-151">JPEG</span></span>         | <span data-ttu-id="b7f7c-152">Определяется изображением</span><span class="sxs-lookup"><span data-stu-id="b7f7c-152">Defined by Image</span></span>                       | <span data-ttu-id="b7f7c-153">Увеличение разрешения</span><span class="sxs-lookup"><span data-stu-id="b7f7c-153">Increasing resolution</span></span>       |
| <span data-ttu-id="b7f7c-154">PNG</span><span class="sxs-lookup"><span data-stu-id="b7f7c-154">PNG</span></span>          | <span data-ttu-id="b7f7c-155">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-155">7</span></span>                                      | <span data-ttu-id="b7f7c-156">Чередование</span><span class="sxs-lookup"><span data-stu-id="b7f7c-156">Interlacing</span></span>                 |
| <span data-ttu-id="b7f7c-157">GIF</span><span class="sxs-lookup"><span data-stu-id="b7f7c-157">GIF</span></span>          | <span data-ttu-id="b7f7c-158">4</span><span class="sxs-lookup"><span data-stu-id="b7f7c-158">4</span></span>                                      | <span data-ttu-id="b7f7c-159">Чередование</span><span class="sxs-lookup"><span data-stu-id="b7f7c-159">Interlacing</span></span>                 |



 

<span data-ttu-id="b7f7c-160">Кроме того, прогрессивное декодирование можно реализовать в кодеках, предоставив поддержку последовательных интерфейсов и методов.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-160">In addition, progressive decoding can be implemented in codecs by providing support for progressive interfaces and methods.</span></span> <span data-ttu-id="b7f7c-161">Если прогрессивное декодирование не поддерживается в кодека, то при вызове этих методов должны возвращаться соответствующие сообщения об ошибках.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-161">If progressive decoding is not supported in a codec, then appropriate error messages should be returned if these methods are called.</span></span>

## <a name="jpeg-progressive-decoding"></a><span data-ttu-id="b7f7c-162">Прогрессивное декодирование JPEG</span><span class="sxs-lookup"><span data-stu-id="b7f7c-162">JPEG Progressive Decoding</span></span>

<span data-ttu-id="b7f7c-163">Прогрессивное декодирование JPEG представляет данные изображений с более высоким разрешением для каждого уровня, пока не будет доступно изображение с полным разрешением.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-163">JPEG progressive decoding presents image data at increasingly higher resolutions for each level, until the full-resolution image is available.</span></span> <span data-ttu-id="b7f7c-164">Каждый уровень образа настроен для предоставления другого уровня разрешения.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-164">Each level of the image is set to provide a different resolution level.</span></span> <span data-ttu-id="b7f7c-165">По мере появления более последовательных уровней изображение отображается с более высоким разрешением, пока не будет устранен полный образ разрешения.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-165">As more progressive levels become available, the image is displayed at higher resolutions, until the full resolution image is resolved.</span></span>

<span data-ttu-id="b7f7c-166">Количество доступных уровней и набор разрешений на каждом уровне полностью зависят от закодированного JPEG.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-166">The number of available levels and the resolution set at each level depends entirely on the encoded JPEG.</span></span> <span data-ttu-id="b7f7c-167">На следующих двух изображениях показан пример прогрессивного декодирования JPEG на двух последовательных уровнях.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-167">The following two images show an example of JPEG progressive decoding at two progressive levels.</span></span>

![примеры прогрессивной декодирования JPEG](graphics/Progressive_JPEG_Comparison.jpg)

<span data-ttu-id="b7f7c-169">Изображение слева декодировано в последовательном уровне 0.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-169">The image on the left is decoded at progressive level 0.</span></span> <span data-ttu-id="b7f7c-170">Изображение справа полностью декодировано после пяти последовательных уровней.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-170">The image on right is fully decoded after five progressive levels.</span></span>

## <a name="pnggif-progressive-decoding"></a><span data-ttu-id="b7f7c-171">Прогрессивное декодирование PNG/GIF</span><span class="sxs-lookup"><span data-stu-id="b7f7c-171">PNG/GIF Progressive Decoding</span></span>

<span data-ttu-id="b7f7c-172">В прогрессивном декодировании PNG и GIF используется последовательный метод декодирования с чередованием.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-172">Both PNG and GIF progressive decoding use an interlaced progressive decoding method.</span></span> <span data-ttu-id="b7f7c-173">Процесс декодирования для обоих форматов очень похож.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-173">The decoding process for both formats is very similar.</span></span>

### <a name="png-progressive-decoding"></a><span data-ttu-id="b7f7c-174">Прогрессивное декодирование PNG</span><span class="sxs-lookup"><span data-stu-id="b7f7c-174">PNG Progressive Decoding</span></span>

<span data-ttu-id="b7f7c-175">Файлы изображений PNG предоставляют семь последовательных уровней для декодирования, как описано в спецификации PNG.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-175">PNG image files provide seven progressive levels for decoding, as described in the PNG specification.</span></span> <span data-ttu-id="b7f7c-176">Прогрессивное декодирование PNG реализуется путем декодирования определенного шаблона пикселей на каждом проходе декодера.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-176">PNG progressive decoding is implemented by decoding a specified pattern of pixels on each pass of the decoder.</span></span> <span data-ttu-id="b7f7c-177">Шаблон в следующей таблице из спецификации PNG реплицируется для всего образа.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-177">The pattern in the following table from the PNG specification is replicated over the entire image.</span></span> <span data-ttu-id="b7f7c-178">Каждое число представляет последовательный уровень, в котором будет декодироваться соответствующий пиксель.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-178">Each number represents the progressive level in which the corresponding pixel will be decoded.</span></span>



|  &nbsp;  |  &nbsp;   |  &nbsp;   |  &nbsp;   |   &nbsp;  |  &nbsp;   |  &nbsp;   | &nbsp;    |
|-----|-----|-----|-----|-----|-----|-----|-----|
| <span data-ttu-id="b7f7c-179">1</span><span class="sxs-lookup"><span data-stu-id="b7f7c-179">1</span></span>   | <span data-ttu-id="b7f7c-180">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-180">6</span></span>   | <span data-ttu-id="b7f7c-181">4</span><span class="sxs-lookup"><span data-stu-id="b7f7c-181">4</span></span>   | <span data-ttu-id="b7f7c-182">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-182">6</span></span>   | <span data-ttu-id="b7f7c-183">2</span><span class="sxs-lookup"><span data-stu-id="b7f7c-183">2</span></span>   | <span data-ttu-id="b7f7c-184">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-184">6</span></span>   | <span data-ttu-id="b7f7c-185">4</span><span class="sxs-lookup"><span data-stu-id="b7f7c-185">4</span></span>   | <span data-ttu-id="b7f7c-186">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-186">6</span></span>   |
| <span data-ttu-id="b7f7c-187">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-187">7</span></span>   | <span data-ttu-id="b7f7c-188">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-188">7</span></span>   | <span data-ttu-id="b7f7c-189">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-189">7</span></span>   | <span data-ttu-id="b7f7c-190">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-190">7</span></span>   | <span data-ttu-id="b7f7c-191">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-191">7</span></span>   | <span data-ttu-id="b7f7c-192">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-192">7</span></span>   | <span data-ttu-id="b7f7c-193">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-193">7</span></span>   | <span data-ttu-id="b7f7c-194">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-194">7</span></span>   |
| <span data-ttu-id="b7f7c-195">5</span><span class="sxs-lookup"><span data-stu-id="b7f7c-195">5</span></span>   | <span data-ttu-id="b7f7c-196">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-196">6</span></span>   | <span data-ttu-id="b7f7c-197">5</span><span class="sxs-lookup"><span data-stu-id="b7f7c-197">5</span></span>   | <span data-ttu-id="b7f7c-198">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-198">6</span></span>   | <span data-ttu-id="b7f7c-199">5</span><span class="sxs-lookup"><span data-stu-id="b7f7c-199">5</span></span>   | <span data-ttu-id="b7f7c-200">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-200">6</span></span>   | <span data-ttu-id="b7f7c-201">5</span><span class="sxs-lookup"><span data-stu-id="b7f7c-201">5</span></span>   | <span data-ttu-id="b7f7c-202">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-202">6</span></span>   |
| <span data-ttu-id="b7f7c-203">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-203">7</span></span>   | <span data-ttu-id="b7f7c-204">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-204">7</span></span>   | <span data-ttu-id="b7f7c-205">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-205">7</span></span>   | <span data-ttu-id="b7f7c-206">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-206">7</span></span>   | <span data-ttu-id="b7f7c-207">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-207">7</span></span>   | <span data-ttu-id="b7f7c-208">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-208">7</span></span>   | <span data-ttu-id="b7f7c-209">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-209">7</span></span>   | <span data-ttu-id="b7f7c-210">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-210">7</span></span>   |
| <span data-ttu-id="b7f7c-211">3</span><span class="sxs-lookup"><span data-stu-id="b7f7c-211">3</span></span>   | <span data-ttu-id="b7f7c-212">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-212">6</span></span>   | <span data-ttu-id="b7f7c-213">4</span><span class="sxs-lookup"><span data-stu-id="b7f7c-213">4</span></span>   | <span data-ttu-id="b7f7c-214">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-214">6</span></span>   | <span data-ttu-id="b7f7c-215">3</span><span class="sxs-lookup"><span data-stu-id="b7f7c-215">3</span></span>   | <span data-ttu-id="b7f7c-216">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-216">6</span></span>   | <span data-ttu-id="b7f7c-217">4</span><span class="sxs-lookup"><span data-stu-id="b7f7c-217">4</span></span>   | <span data-ttu-id="b7f7c-218">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-218">6</span></span>   |
| <span data-ttu-id="b7f7c-219">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-219">7</span></span>   | <span data-ttu-id="b7f7c-220">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-220">7</span></span>   | <span data-ttu-id="b7f7c-221">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-221">7</span></span>   | <span data-ttu-id="b7f7c-222">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-222">7</span></span>   | <span data-ttu-id="b7f7c-223">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-223">7</span></span>   | <span data-ttu-id="b7f7c-224">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-224">7</span></span>   | <span data-ttu-id="b7f7c-225">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-225">7</span></span>   | <span data-ttu-id="b7f7c-226">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-226">7</span></span>   |
| <span data-ttu-id="b7f7c-227">5</span><span class="sxs-lookup"><span data-stu-id="b7f7c-227">5</span></span>   | <span data-ttu-id="b7f7c-228">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-228">6</span></span>   | <span data-ttu-id="b7f7c-229">5</span><span class="sxs-lookup"><span data-stu-id="b7f7c-229">5</span></span>   | <span data-ttu-id="b7f7c-230">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-230">6</span></span>   | <span data-ttu-id="b7f7c-231">5</span><span class="sxs-lookup"><span data-stu-id="b7f7c-231">5</span></span>   | <span data-ttu-id="b7f7c-232">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-232">6</span></span>   | <span data-ttu-id="b7f7c-233">5</span><span class="sxs-lookup"><span data-stu-id="b7f7c-233">5</span></span>   | <span data-ttu-id="b7f7c-234">6</span><span class="sxs-lookup"><span data-stu-id="b7f7c-234">6</span></span>   |
| <span data-ttu-id="b7f7c-235">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-235">7</span></span>   | <span data-ttu-id="b7f7c-236">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-236">7</span></span>   | <span data-ttu-id="b7f7c-237">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-237">7</span></span>   | <span data-ttu-id="b7f7c-238">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-238">7</span></span>   | <span data-ttu-id="b7f7c-239">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-239">7</span></span>   | <span data-ttu-id="b7f7c-240">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-240">7</span></span>   | <span data-ttu-id="b7f7c-241">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-241">7</span></span>   | <span data-ttu-id="b7f7c-242">7</span><span class="sxs-lookup"><span data-stu-id="b7f7c-242">7</span></span>   |



 

<span data-ttu-id="b7f7c-243">Из приведенной выше таблицы можно определить Пиксели, которые будут декодированы при каждом прохождении декодера.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-243">From the table above, you can determine the pixels that will be decoded with each pass of the decoder.</span></span> <span data-ttu-id="b7f7c-244">В отличие от кодека GIF-файла Windows 7, кодек PNG Windows 7 реплицирует самый левый доступный пиксель на строке просмотра для заполнения пустых пикселов.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-244">Unlike the Windows 7 GIF codec, the Windows 7 PNG codec replicates the left-most available pixel on a scan line to populate empty pixels.</span></span>

<span data-ttu-id="b7f7c-245">На следующих изображениях показан пример последовательного декодирования для Windows 7 PNG на трех последовательных уровнях.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-245">The following images show an example of the Windows 7 PNG progressive decoding codec at three progressive levels.</span></span>

![примеры прогрессивной декодирования PNG](graphics/PNG_Progressive_Comparison.jpg)

<span data-ttu-id="b7f7c-247">Изображение в верхнем левом углу показывает, что изображение в формате PNG декодировано в последовательном уровне 0.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-247">The image at the top left shows a PNG image decoded at progressive level 0.</span></span> <span data-ttu-id="b7f7c-248">В правом верхнем углу изображено то же изображение в формате PNG, декодированное в последовательном уровне 3.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-248">The top-right image shows the same PNG image decoded at progressive level 3.</span></span> <span data-ttu-id="b7f7c-249">В нижней части изображения показано полное декодированное изображение после 7 последовательных уровней.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-249">The bottom image shows the same image fully decoded after 7 progressive levels.</span></span>

### <a name="gif-progressive-decoding"></a><span data-ttu-id="b7f7c-250">Прогрессивное декодирование GIF</span><span class="sxs-lookup"><span data-stu-id="b7f7c-250">GIF Progressive Decoding</span></span>

<span data-ttu-id="b7f7c-251">Файлы изображений в формате GIF предоставляют четыре последовательных уровня для декодирования, как описано в спецификации GIF.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-251">GIF image files provide four progressive levels for decoding, as described in the GIF specification.</span></span> <span data-ttu-id="b7f7c-252">Каждый проход заполняет определенные строки в изображении, создавая полный образ после четвертого прохода.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-252">Each pass populates certain rows within an image, producing a full image after the fourth pass.</span></span> <span data-ttu-id="b7f7c-253">В следующей таблице из спецификации GIF показано, какие строки проверки декодированы при каждом прохождении декодера.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-253">The following table from the GIF specification shows which scan lines are decoded by each pass of the decoder.</span></span> 

| <span data-ttu-id="b7f7c-254">Номер уровня/номер этапа</span><span class="sxs-lookup"><span data-stu-id="b7f7c-254">Level number/ pass number</span></span> | <span data-ttu-id="b7f7c-255">Заполненные строки сканирования</span><span class="sxs-lookup"><span data-stu-id="b7f7c-255">Scan lines populated</span></span>   | <span data-ttu-id="b7f7c-256">Начало строки сканирования</span><span class="sxs-lookup"><span data-stu-id="b7f7c-256">Starting scan line</span></span> |
|---------------------------|------------------------|--------------------|
| <span data-ttu-id="b7f7c-257">1</span><span class="sxs-lookup"><span data-stu-id="b7f7c-257">1</span></span>                         | <span data-ttu-id="b7f7c-258">Каждая восьмая строка сканирования</span><span class="sxs-lookup"><span data-stu-id="b7f7c-258">Every eighth scan line</span></span> | <span data-ttu-id="b7f7c-259">0</span><span class="sxs-lookup"><span data-stu-id="b7f7c-259">0</span></span>                  |
| <span data-ttu-id="b7f7c-260">2</span><span class="sxs-lookup"><span data-stu-id="b7f7c-260">2</span></span>                         | <span data-ttu-id="b7f7c-261">Каждая восьмая строка сканирования</span><span class="sxs-lookup"><span data-stu-id="b7f7c-261">Every eighth scan line</span></span> | <span data-ttu-id="b7f7c-262">4</span><span class="sxs-lookup"><span data-stu-id="b7f7c-262">4</span></span>                  |
| <span data-ttu-id="b7f7c-263">3</span><span class="sxs-lookup"><span data-stu-id="b7f7c-263">3</span></span>                         | <span data-ttu-id="b7f7c-264">Каждая четвертая строка сканирования</span><span class="sxs-lookup"><span data-stu-id="b7f7c-264">Every fourth scan line</span></span> | <span data-ttu-id="b7f7c-265">2</span><span class="sxs-lookup"><span data-stu-id="b7f7c-265">2</span></span>                  |
| <span data-ttu-id="b7f7c-266">4</span><span class="sxs-lookup"><span data-stu-id="b7f7c-266">4</span></span>                         | <span data-ttu-id="b7f7c-267">Каждая вторая строка сканирования</span><span class="sxs-lookup"><span data-stu-id="b7f7c-267">Every second scan line</span></span> | <span data-ttu-id="b7f7c-268">1</span><span class="sxs-lookup"><span data-stu-id="b7f7c-268">1</span></span>                  |



 

<span data-ttu-id="b7f7c-269">Несмотря на то, что кодеки могут указывать содержимое пустых пикселей на любом конкретном уровне, кодек GIF в Windows заполняет пустые строки, копируя заполненные строки просмотра над пустой строкой просмотра.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-269">Although codecs can specify the content of empty pixels at any particular level, the Windows GIF codec populates empty scan lines by replicating populated scan lines above the empty scan line.</span></span>

## <a name="progressive-decoding-in-applications"></a><span data-ttu-id="b7f7c-270">Прогрессивное декодирование в приложениях</span><span class="sxs-lookup"><span data-stu-id="b7f7c-270">Progressive Decoding in Applications</span></span>

<span data-ttu-id="b7f7c-271">Основной прогрессивный интерфейс декодирования — это интерфейс [**ивикпрогрессивелевелконтрол**](/windows/desktop/api/Wincodec/nn-wincodec-iwicprogressivelevelcontrol) .</span><span class="sxs-lookup"><span data-stu-id="b7f7c-271">The main progressive decoding interface is the [**IWICProgressiveLevelControl**](/windows/desktop/api/Wincodec/nn-wincodec-iwicprogressivelevelcontrol) interface.</span></span> <span data-ttu-id="b7f7c-272">Чтобы получить ссылку на интерфейс, запросите кадр изображения ([**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode)) для **ивикпрогрессивелевелконтрол**.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-272">To obtain a reference to the interface, query an image frame ([**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode)) for **IWICProgressiveLevelControl**.</span></span> <span data-ttu-id="b7f7c-273">Затем к прогрессивным методам можно получить доступ из интерфейса.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-273">Progressive methods can then be accessed from the interface.</span></span>

<span data-ttu-id="b7f7c-274">В приведенном ниже коде приведен пример использования прогрессивного декодирования в приложениях.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-274">The code below provides an example for using progressive decoding in applications.</span></span>


```
IWICProgressiveLevelControl *pProgressive = NULL;

HRESULT hr = (pBitmapFrame->QueryInterface(
   IID_IWICProgressiveLevelControl, 
   (void**) &pProgressive));
                
if (SUCCEEDED(hr))
{
   for (UINT uCurrentLevel = 0; SUCCEEDED(hr); uCurrentLevel++)
   {
      hr = pProgressive->SetCurrentLevel(uCurrentLevel);
               if (WINCODEC_ERR_INVALIDPROGRESSIVELEVEL == hr)
      {
         // No more levels
         break;
      }

      if (SUCCEEDED(hr))
      {
         // Output the current level
         hr = pBitmapFrame->CopyPixels(...);
      }                      
   }
}

if (pProgressive)
{
   pProgressive->Release();
}
```



<span data-ttu-id="b7f7c-275">Приведенный выше код предоставляет базовые функции, необходимые для реализации прогрессивного декодирования в большинстве приложений.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-275">The preceding code provides the basic functionality necessary for implementing progressive decoding in most applications.</span></span> <span data-ttu-id="b7f7c-276">С помощью кода можно получить доступ к последовательным уровням, так как данные в точках изображения становятся доступными.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-276">Using the code, progressive levels can be accessed as image pixel data becomes available.</span></span> <span data-ttu-id="b7f7c-277">Функция [**сеткуррентлевел**](/windows/desktop/api/Wincodec/nf-wincodec-iwicprogressivelevelcontrol-setcurrentlevel) блокирует выполнение до тех пор, пока не будет запрошен уровень.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-277">The [**SetCurrentLevel**](/windows/desktop/api/Wincodec/nf-wincodec-iwicprogressivelevelcontrol-setcurrentlevel) function blocks execution until the level being requested is available.</span></span>

## <a name="custom-codec-support-for-progressive-decoding"></a><span data-ttu-id="b7f7c-278">Поддержка пользовательского кодека для прогрессивного декодирования</span><span class="sxs-lookup"><span data-stu-id="b7f7c-278">Custom Codec Support for Progressive Decoding</span></span>

<span data-ttu-id="b7f7c-279">Разработчики кодеков могут выбрать реализацию [**ивикпрогрессивелевелконтрол**](/windows/desktop/api/Wincodec/nn-wincodec-iwicprogressivelevelcontrol) , если форматы изображений поддерживают прогрессивное декодирование.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-279">Codec developers may choose to implement the [**IWICProgressiveLevelControl**](/windows/desktop/api/Wincodec/nn-wincodec-iwicprogressivelevelcontrol) if their image formats support progressive decoding.</span></span> <span data-ttu-id="b7f7c-280">Поддержка прогрессивного декодирования не является требованием для обнаружения и арбитража с помощью WIC.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-280">Support for progressive decoding is not a requirement for discovery and arbitration by WIC.</span></span> <span data-ttu-id="b7f7c-281">Однако прогрессивное декодирование значительно улучшает взаимодействие с пользователем, и по возможности следует рассматривать реализацию.</span><span class="sxs-lookup"><span data-stu-id="b7f7c-281">However, progressive decoding greatly enhances the user experience, and implementation should be considered if possible.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b7f7c-282">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="b7f7c-282">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="b7f7c-283">**Зрения**</span><span class="sxs-lookup"><span data-stu-id="b7f7c-283">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="b7f7c-284">Общие сведения о компоненте создания образов Windows</span><span class="sxs-lookup"><span data-stu-id="b7f7c-284">Windows Imaging Component Overview</span></span>](-wic-about-windows-imaging-codec.md)
</dt> <dt>

<span data-ttu-id="b7f7c-285">**Другие ресурсы**</span><span class="sxs-lookup"><span data-stu-id="b7f7c-285">**Other Resources**</span></span>
</dt> <dt>

[<span data-ttu-id="b7f7c-286">Цифровое сжатие и программирование Continuous-Tone по-прежнему образами — требования и рекомендации</span><span class="sxs-lookup"><span data-stu-id="b7f7c-286">Digital Compression and Coding of Continuous-Tone Still Images - Requirements and Guidelines</span></span>](https://www.w3.org/Graphics/JPEG/itu-t81.pdf)
</dt> <dt>

[<span data-ttu-id="b7f7c-287">Формат обмена файлами JPEG</span><span class="sxs-lookup"><span data-stu-id="b7f7c-287">JPEG File Interchange Format</span></span>](https://www.w3.org/Graphics/JPEG/jfif3.pdf)
</dt> <dt>

[<span data-ttu-id="b7f7c-288">Спецификация GIF89a</span><span class="sxs-lookup"><span data-stu-id="b7f7c-288">GIF89a Specification</span></span>](https://www.w3.org/Graphics/GIF/spec-gif89a.txt)
</dt> <dt>

[<span data-ttu-id="b7f7c-289">Спецификация и расширения Portable Network Graphics (PNG)</span><span class="sxs-lookup"><span data-stu-id="b7f7c-289">Portable Network Graphics (PNG) Specification and Extensions</span></span>](http://www.libpng.org/pub/png/spec/)
</dt> </dl>

 

 



