---
description: в этом разделе содержатся сведения о коде встроенного фото HD, доступном через компонент Windows imaging (WIC).
ms.assetid: C73752AB-3D6E-4D92-9FDE-CB68B6A9743C
title: Общие сведения о формате фото HD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 772c295051186069dd7be1a3efa3bfbb4e6ea919b2ab9fbe77ffd52cad1676a1
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119881954"
---
# <a name="hd-photo-format-overview"></a>Общие сведения о формате фото HD

в этом разделе содержатся сведения о коде встроенного фото HD, доступном через компонент Windows imaging (WIC).

> [!IMPORTANT]
>
> Формат Фото HD является предварительно стандартной реализацией формата JPEG XR. Формат JPEG XR был полностью реализован в Windows 8. Дополнительные сведения см. в [обзоре кодека XR JPEG](jpeg-xr-codec.md) .

 

В этом разделе содержатся следующие подразделы.

-   [Удостоверение кодека](#codec-identity)
-   [Кодирование](#encoding)
    -   [Параметры кодировщика](#encoder-options)
-   [Декодирование](#decoding)
    -   [Поддержка Ивикбитмапсаурцетрансформ](#iwicbitmapsourcetransform-support)

## <a name="codec-identity"></a>Удостоверение кодека

В следующей таблице приведены сведения об идентификации кодека.



|   Компонент            | Описание                                                                     |
|------------------------|---------------------------------------------------------------------------------|
| Формальные имена         | фото HD, фото Windows мультимедиа                                                   |
| Расширения имени файла | формате WDP                                                                             |
| тип MIME              | Image/vnd. МС-фото                                                              |
| Подписи файлов      | Первые четыре байта: 0x4949bc00 (версия 0; предварительный выпуск), 0x4949bc01 (версия 1,0). |



 

В следующей таблице перечислены идентификаторы GUID, используемые для распознавания компонентов собственного фотокодека HD.



| Компонент        | Понятное имя            | GUID                                |
|------------------|--------------------------|-------------------------------------|
| Формат контейнера | GUID \_ контаинерформатвмп | 57a37caa-367A-4540-916bf183c5093a4b |
| Показан          | \_ВИКВМПДЕКОДЕР CLSID     | a26cec36-234c-4950-ae16e34aace71d0d |
| Кодировщик          | \_ВИКВМПЕНКОДЕР CLSID     | ac4ce3cb-e1c1-44cd-82155a1665509ec2 |



 

## <a name="encoding"></a>Кодирование

API кодирования WIC разработан как независимый от кодека, а кодировка изображений для кодеков с поддержкой WIC практически одинакова. Дополнительные сведения о кодировании изображений с помощью API WIC см. в разделе [Общие сведения о кодировке](-wic-creating-encoder.md).

### <a name="encoder-options"></a>Параметры кодировщика

Кодеки с поддержкой WIC отличаются на уровне параметров кодировки. Параметры кодировщика соответствуют возможностям кодировщика изображений, и каждый кодек машинного кода поддерживает набор этих вариантов кодировщика. Параметры кодировщика могут быть базовыми вариантами, поддерживаемыми для всех кодов, включенных с помощью WIC (хотя и не всегда поддерживаемых), или параметров, относящихся к кодекам. Для управления этими параметрами кодировки в процессе кодирования компонент WIC использует интерфейс [**IPropertyBag2**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa768192(v=vs.85)) . Дополнительные сведения об использовании интерфейса **IPropertyBag2** для кодирования WIC см. в разделе [Общие сведения о кодировке](-wic-creating-encoder.md).

В коде фотокодирования HD используются как базовые параметры WIC, так и несколько параметров кодировки HD Photo. В следующей таблице перечислены параметры кодировщика, поддерживаемые собственным фото кодеком HD.

Основные параметры кодировщика WIC

| Имя свойства | VARTYPE | Диапазон значений: | Значение по умолчанию |
|---------------|---------|-------------|---------------|
| [ImageQuality](#imagequality-option) | VT \_ R4 | 0 — 1,0 | 0,9 |
| [Lossless](#lossless-option) | Логическое значение VT \_ | **true**, **false** | **FALSE** |
| [битмаптрансформ](#bitmaptransform-option) | VT \_ UI1 | [**викбитмаптрансформоптионс**](/windows/desktop/api/Wincodec/ne-wincodec-wicbitmaptransformoptions) |   [**WICBitmapTransformRotate0**](/windows/desktop/api/Wincodec/ne-wincodec-wicbitmaptransformoptions) |

Параметры кодировщика для фотографий HD

| Имя свойства | VARTYPE | Диапазон значений: | Значение по умолчанию |
|---------------|---------|-------------|---------------|
| [усекодекоптионс](#usecodecoptions-option) | Логическое значение VT \_ | **true**, **false** | **FALSE** |
| [Качество](#quality-option) | VT \_ UI1 | 1 - 255 | 10 |
| [Перекрытие](#overlap-option) | VT \_ UI1 | 0 - 2 | 1 |
| [Подвыборка](#subsampling-option) | VT \_ UI1 | 0–3 | 3, если Имажекуалити > 0,8; в противном случае 1; |
| [хоризонталтилеслицес](#horizontaltileslices-verticaltileslices-options) | VT \_ UI2 | 0 - 4095 | (ширина изображения — 1)  >> 8 |
| [вертикалтилеслицес](#horizontaltileslices-verticaltileslices-options) | VT \_ UI2 | 0 - 4095 | (высота изображения – 1)  >> 8 |
| [фрекуенциордер](#frequencyorder-option) | Логическое значение VT \_ | **true**, **false** | **TRUE** |
| [интерлеаведалфа](#interleavedalpha-option) | Логическое значение VT \_ | **true**, **false** | **FALSE** |
| [алфакуалити](#alphaquality-option) | VT \_ UI1 | 1 - 255 | 1 |
| [компресседдомаинтранскоде](#compresseddomaintranscode-option) | Логическое значение VT \_ | **true**, **false** | **TRUE** |
| [имажедатадискард](#imagedatadiscard-option) | VT \_ UI1 | 0–3 | 0 |
| [алфадатадискард](#alphadatadiscard-option) | VT \_ UI1 | 0 - 4 | Не используется. |
| [игнореоверлап](#ignoreoverlap-option) | Логическое значение VT \_ | **true**, **false** | **FALSE** |


Если в списке параметров [**IPropertyBag2**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa768192(v=vs.85)) есть параметр кодировщика, который не поддерживается кодеком, он игнорируется.

### <a name="imagequality-option"></a>Имажекуалити, параметр

Задает нужную точность изображения. 0,0 указывает наименьшую возможную точность, а 1,0 — наивысшую достоверность. Для формата изображения фотографии в формате HD значение 1,0 приводит к сжатию с помощью математических потерь.

Значение по умолчанию — 0,9.

### <a name="compressionquality-option"></a>Компрессионкуалити, параметр

Задает требуемое качество сжатия. 0,0 указывает, что доступна эффективная схема сжатия. Как правило, эта схема обеспечивает более быструю кодировку, но больше выходных данных. Значение 1,0 указывает наиболее эффективную доступную схему сжатия, которая обычно создает более длинную кодировку, но меньше выходных данных.

Фото HD не поддерживает этот параметр кодировщика. Это значение игнорируется, если оно есть в списке параметров [**IPropertyBag2**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa768192(v=vs.85)) .

### <a name="lossless-option"></a>Параметр без потерь

Указывает, следует ли использовать режим сжатия потерь. Для формата изображения фотографии HD это значение переопределяет значение параметра [имажекуалити](#imagequality-option) .

Значение по умолчанию — **FALSE**.

### <a name="bitmaptransform-option"></a>Битмаптрансформ, параметр

Указывает способ преобразования изображения во время декодирования изображения. Для этого параметра необходимо задать одно из значений перечисления [**викбитмаптрансформоптионс**](/windows/desktop/api/Wincodec/ne-wincodec-wicbitmaptransformoptions) .

Значение по умолчанию — [**викбитмаптрансформоптионс:: WICBitmapTransformRotate0**](/windows/desktop/api/Wincodec/ne-wincodec-wicbitmaptransformoptions).

### <a name="usecodecoptions-option"></a>Усекодекоптионс, параметр

Если значением является вариант \_ true, то параметры [качества](#quality-option), [перекрытия](#overlap-option)и [подвыборки](#subsampling-option) вместо значения параметра.

Значение по умолчанию — **FALSE**.

### <a name="quality-option"></a>Параметр Quality

Задает качество сжатия для изображения. Значение 1 означает режим без потерь. Увеличение значений приводит к увеличению коэффициента сжатия и более низкому качеству изображения.

Значение по умолчанию — 10.

### <a name="overlap-option"></a>Параметр перекрытия

Задает уровень обработки перекрытия.

В следующей таблице перечислены доступные уровни обработки перекрытия.



| Значение | Описание                                                                                                                                                                                 |
|-------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0     | Обработка перекрытия выключена.                                                                                                                                                           |
| 1     | Включен один уровень обработки перекрытия, который изменяет закодированные значения 4x4 на основе значений соседних блоков.                                                                       |
| 2     | Включена обработка двух уровней перекрытия. В дополнение к обработке на первом уровне закодированные значения для блоков макросов 16x16 изменяются на основе значений соседних блоков макросов. |



 

Значение по умолчанию — 1.

### <a name="subsampling-option"></a>Параметр подвыборки

Указывает дополнительное сжатие в пространстве чрома. Таким образом, можно сохранить детали освещенности за счет сведений о цвете. Этот параметр применяется только к изображениям RGB.

В следующей таблице перечислены доступные параметры подвыборки.



| Значение | Описание                                                                                                                                                                                                                                                                                 |
|-------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 3     | 4:4:4. кодирование сохраняет полное разрешение чрома.                                                                                                                                                                                                                                            |
| 2     | 4:2:2. кодировка сокращает разрешение чрома до 1/2 с разрешением освещенности.                                                                                                                                                                                                                      |
| 1     | 4:2:0. кодировка сокращает разрешение чрома до 1/4 с разрешением освещенности.                                                                                                                                                                                                                      |
| 0     | 4:0:0. кодировка отбрасывает все содержимое чрома и сохраняет только светимость. Поскольку кодек использует немного измененное определение светимости для повышения производительности, перед кодированием рекомендуется преобразовать изображение RGB в монохромный режим, а не использовать этот чрома. |



 

Значение по умолчанию — 3, если [имажекуалити](#imagequality-option) > 0,8; в противном случае 1.

### <a name="horizontaltileslices-verticaltileslices-options"></a>Хоризонталтилеслицес, параметры Вертикалтилеслицес

Укажите горизонтальное и вертикальное мозаичное заполнение изображения перед выполнением кодирования сжатия для оптимальной производительности области декодирования. Разделив изображение на прямоугольные плитки во время кодирования, можно декодировать области изображения без обработки всего потока сжатых данных. Значение по умолчанию 0 указывает на отсутствие подразделений, поэтому все изображение рассматривается как одна плитка. Значение 1 для каждого параметра создает одно горизонтальное и вертикальное деление, фактически разделив изображение на четыре изображения одинакового размера. Максимальное значение 4095 для каждого параметра разделяет изображение на строки мозаики 4096 с 4096 плиток на строку. Иными словами, значения параметров равны числу горизонтальных и вертикальных плиток (соответственно) минус 1. Размер плитки не может быть меньше 16 пикселей по ширине или высоте, поэтому кодировщик фотокодирования HD может настроить этот параметр для сохранения требуемого минимального размера плитки. Поскольку существуют затраты на хранение и обработку, связанные с каждой плиткой, следует тщательно выбирать эти значения для удовлетворения конкретного сценария.

[Хоризонталтилеслицес](/windows): значение по умолчанию — (ширина изображения — 1)  >> 8.

[Вертикалтилеслицес](/windows): значение по умолчанию — (высота изображения – 1)  >> 8.

### <a name="frequencyorder-option"></a>Фрекуенциордер, параметр

Указывает, что образ должен быть закодирован в порядке частот. Данные с наименьшей частотой отображаются в файле первыми, а содержимое изображения группируются по частоте, а не к пространственной ориентации. Упорядочение файла по частоте обеспечивает наилучшую производительность для декодирования на основе частоты, поэтому мы рекомендуем его использовать. Реализации устройств с фото-кодировщиком HD могут организовывать файл в пространственном порядке, чтобы уменьшить объем памяти, необходимый во время кодирования.

Значение по умолчанию — **true** , и мы рекомендуем, чтобы приложения и устройства всегда использовали частоту, если нет причин, связанных с производительностью или конкретными приложениями для использования пространственного порядка.

### <a name="interleavedalpha-option"></a>Интерлеаведалфа, параметр

Если задать для этого параметра **значение true** , кодек будет кодировать информацию о альфа-канале как дополнительный канал с чередованием, без корреляции каналов содержимого изображения. Этот режим удобен, если необходимо одновременно декодировать альфа-канал с изображением в сценарии потоковой передачи.

Установка этого параметра в **значение false** приводит к преобразованию плоского альфа-канала в виде отдельного изображения с собственным необязательным значением качества. Используя плоский альфа-канал, можно декодировать данные изображения и альфа-канал независимо друг от друга. Альфа-каналы с чередованием поддерживаются только для определенных форматов пикселей RGB. Плоский альфа-канал можно связать с любым форматом изображения, который определяет альфа-канал.

Значение по умолчанию — **FALSE**.

### <a name="alphaquality-option"></a>Алфакуалити, параметр

Задает качество сжатия для изображения плоского альфа-канала. Значение 1 задает режим без потерь. Увеличение значений приводит к увеличению коэффициента сжатия и более низкому качеству изображения.

Значение по умолчанию — 1.

### <a name="compresseddomaintranscode-option"></a>Компресседдомаинтранскоде, параметр

С помощью фотографии HD можно выполнять ряд операций преобразования файлов без необходимости декодирования сжатых данных и их повторной кодировки в конечном файле. Операции со сжатыми доменами очень эффективны и позволяют избежать дополнительной потери качества, типичной при расшифровке и повторном кодировании сжатого с потерей изображения.

Поддерживаются следующие операции со сжатыми доменами:

-   Обрезать область изображения.
-   Выполните преобразование «вращение/перелистывание».
-   Отбросить данные частоты (что позволяет создать файл изображения меньшего размера).
-   Реорганизация изображения между пространственный и частотным последовательным порядком.

Кодировщик фотографий HD выполняет операцию перекодирования сжатого домена при кодировании изображения HD с помощью фотодекодера HD в качестве источника изображения. В зависимости от выбранных параметров кодирования кодек по возможности использует операцию со сжатым доменом. Если приложение выбирает явное запрещение всех операций перекодирования сжатого домена, следует присвоить параметру *Усекодекоптионс* **значение true** , а параметру *компресседдомаинтранскоде* — **значение false**.

Когда кодек выполняет операцию со сжатым доменом, разрешены только определенные параметры кодировщика и свойства.

-   Основные параметры кодировщика [имажекуалити](#imagequality-option), [Компрессионкуалити](/windows) и [без потерь](#lossless-option) игнорируются.
-   Параметры кодировщика для фотографий в формате [](#quality-option)HD, [Перекрытие](#overlap-option), [интерлеаведалфа](#interleavedalpha-option) и [алфакуалити](#alphaquality-option) игнорируются.
-   При наличии параметров [хоризонталтилеслицес](/windows) и [вертикалтилеслицес](/windows) должно быть присвоено нулевое значение. Размер плитки изображения нельзя изменить в составе сжатого домена.
-   Можно изменить организацию образа между частотой и пространственной сортировкой, указав соответствующее значение параметров [фрекуенциордеринг](/windows) .
-   Поворот кардинала и (или) горизонтальную или вертикальную операцию отражения можно выполнить на основе значения, указанного в параметре кодировщика [битмаптрансформ](#bitmaptransform-option) .
-   Изображение можно обрезать, указав нужный регион с помощью параметра [**викрект**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapframeencode-writesource) метода кодировщика **вритесаурце** .
-   Данные изображения и (или) Alpha можно отменять, указывая соответствующие значения в параметрах [имажедатадискард](#imagedatadiscard-option) и/или [алфадатадискард](#alphadatadiscard-option) , уменьшая размер закодированного файла и эффективно уменьшая разрешение нового образа.

Значение по умолчанию — **true** , и мы рекомендуем, чтобы приложения и устройства всегда использовали частоту, если только для использования пространственного порядка не заданы определенные причины производительности или приложения.

### <a name="imagedatadiscard-option"></a>Имажедатадискард, параметр

Этот параметр допустим только в том случае, если параметр [компресседдомаинтранскоде](#compresseddomaintranscode-option) имеет **значение true**. в противном случае он игнорируется. [Имажедатадискард](#imagedatadiscard-option) указывает объем данных образа, которые должны быть удалены во время перекодирования сжатого домена. Если образ содержит альфа-канал с чередованием, эти данные отменяются также и в альфа-канал, за исключением, как описано далее в этом разделе.

Допустимы следующие значения.



| Значение | Описание                                                                                                                                                                                                                                                                                                                                                                                                                  |
|-------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0     | Данные частоты изображения не удаляются.                                                                                                                                                                                                                                                                                                                                                                                        |
| 1     | Флексбитс отбрасываются, что делает случайное сокращение качества перекодированного изображения без изменения эффективного разрешения изображения. Точное уменьшение размера файла или определенного снижения качества зависит от множества факторов и не может быть указано или предсказано. Это валуеретурнс ошибку, если указать ее для альфа-канала с чередованием.                                                    |
| 2     | Полоса данных частоты Хигхпасс отбрасывается (которая также включает Флексбитс), эффективно уменьшая разрешение перекодированного изображения на 4-факторный в обоих измерениях. Фактические размеры перекодированного изображения остаются неизменными, но все детали в каждом блоке 4x4 пикселей теряются. Таким образом, при декодировании изображения следует отключать выборку при его декодировании.                            |
| 3     | Полосы данных с частотой Хигхпасс и Ловпасс отбрасываются (которая также включает Флексбитс), эффективно уменьшая разрешение кодированного изображения с помощью коэффициента 16 в обоих измерениях. Фактические размеры перекодированного изображения остаются неизменными, но все данные в каждой 16x16 макроблокк пикселов теряются. Таким образом, при декодировании изображения следует отключать выборку при его декодировании. |



 

Значение по умолчанию — 0.

### <a name="alphadatadiscard-option"></a>Алфадатадискард, параметр

Этот параметр допустим только в том случае, если свойство [компресседдомаинтранскоде](#compresseddomaintranscode-option) имеет **значение true** , а изображение содержит либо плоский, либо чередующийся альфа-канал. в противном случае он игнорируется. Он задает объем данных альфа-частоты, которые должны быть удалены во время перекодирования сжатого домена. Для плоского альфа-канала разрешены следующие значения.



| Значение | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|-------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0     | Данные частоты изображения не удаляются.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 1     | Флексбитс отбрасываются, что делает случайное уменьшение качества плоского альфа-канала для перекодированного изображения без изменения эффективного разрешения. Точное уменьшение размера файла или определенного снижения качества зависит от множества факторов и не может быть указано или предсказано.                                                                                                                                                                                                                                                |
| 2     | Полоса данных частоты Хигхпасс отбрасывается (которая также включает Флексбитс), что эффективно уменьшает разрешение перекодированного альфа-канала плоского изображения на коэффициент 4 в обоих измерениях. Фактические размеры перекодированного изображения остаются неизменными, но изображение теряет все данные плоского альфа-канала в каждом блоке 4x4 пикселей. Таким образом, при декодировании перекодированный образ следует выдавать в меньшую выборку. Как правило, это значение следует задавать только при задании значения Имажедатадискард пропертито. |
| 3     | Полосы данных с частотой Хигхпасс и Ловпасс отбрасываются (которая также включает Флексбитс), эффективно уменьшая разрешение кодированного изображения с помощью коэффициента 16 в обоих измерениях. Фактические размеры перекодированного изображения остаются неизменными, но изображение теряет все детали в каждой 16x16 макроблокк пикселей. Таким образом, при декодировании перекодированный образ следует выдавать в меньшую выборку. Как правило, это значение следует задавать, только если для свойства Имажедатадискард задано то же значение.               |
| 4     | Альфа-канал полностью отклонен. Формат пикселей перекодированного изображения изменяется в соответствии с удалением альфа-канала.                                                                                                                                                                                                                                                                                                                                                                                                               |



 

Для изображений, содержащих чередующиеся альфа-каналы, если это свойство не имеет значение 4, альфа-канал обрабатывается так же, как и данные изображения, в соответствии со значением свойства Имажедатадискард. Если это свойство имеет значение 4, альфа-канал с чередованием полностью удаляется, а формат пикселей перекодированного изображения соответствующим образом изменяется.

Нет значения по умолчанию.

### <a name="ignoreoverlap-option"></a>Игнореоверлап, параметр

Этот параметр является допустимым только в том случае, если свойство [компресседдомаинтранскоде](#compresseddomaintranscode-option) имеет **значение true** и требуется перекодировать ровно одну или несколько плиток. Операция по умолчанию для перекодировки региона (или декодирования) заключается в том, чтобы развернуть запрошенную область, чтобы включить окружающие Пиксели, необходимые для перекрытия границ области. Если для этого параметра задано значение **true**, окружающие пикселы пропускаются и извлекаются только выбранные плитка или плитки. Опять же, это требует, чтобы запрошенный регион точно совпадал с координатами одного или нескольких плиток. Если исходное изображение не является мозаичным или если запрошенная область указывает какие-либо частичные плитки, этот параметр игнорируется.

Значение по умолчанию — **FALSE**.

## <a name="decoding"></a>Декодирование

Интерфейс API декодирования WIC разработан как независимый от кодека, а декодирование изображений для кодеков, поддерживающих WIC, по сути является одинаковым. Дополнительные сведения о декодировании изображений см. в разделе [Общие сведения о декодировании](-wic-creating-decoder.md). Дополнительные сведения об использовании декодированных данных изображения см. в разделе [Обзор источников точечных рисунков](-wic-bitmapsources.md).

### <a name="iwicbitmapsourcetransform-support"></a>Поддержка Ивикбитмапсаурцетрансформ

В дополнение к интерфейсам, которые должны быть кодеками с поддержкой WIC, собственный фотодекодер HD также поддерживает [**ивикбитмапсаурцетрансформ**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform). Интерфейс **ивикбитмапсаурцетрансформ** предоставляет дополнительный параметр для декодирования потока битов образа. Вместо простого возврата полного образа с помощью [**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode)интерфейс **ивикбитмапсаурцетрансформ** включает следующие параметры декодера.

-   Декодирование прямоугольной подобласти изображения.
-   Декодирование до более низкого разрешения
-   Декодирование в другой формат пикселей
-   Выполнить преобразование (вращение/перелистывание) при декодировании

Собственный фотокодек HD обеспечивает следующий уровень поддержки для интерфейса [**ивикбитмапсаурцетрансформ**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform) .

### <a name="doessupporttransform"></a>доессуппорттрансформ

Собственная реализация поддерживает все преобразования [**викбитмаптрансформоптионс**](/windows/desktop/api/Wincodec/ne-wincodec-wicbitmaptransformoptions) .

### <a name="getclosestsize"></a>жетклосестсизе

Для запросов, которые меньше 1/2 измерения исходного изображения в обоих измерениях, Фото HD возвращает следующий самый крупный целочисленный размер изображения, равномерно кратный коэффициенту 2. Для всех остальных запрошенных размеров Фото HD возвращает исходные размеры изображения.

### <a name="getclosestpixelformat"></a>жетклосестпикселформат

Фото HD Возвращает формат пикселей закодированного изображения.

### <a name="copypixels"></a>CopyPixels

Фото HD принимает любой запрошенный регион, указанный параметром [**викрект**](/windows/desktop/api/Wincodec/ns-wincodec-wicrect) , и возвращает эту часть изображения.

Параметры *уивидс* и *уихеигхт* должны задавать измерения, возвращаемые функцией [**жетклосестсизе**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsourcetransform-getclosestsize) . Любые другие значения возвращают ошибку.

Параметр *пгуиддстформат* должен указывать формат пикселей, возвращаемый функцией [**жетклосестпикселформат**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsourcetransform-getclosestpixelformat) . Любое другое значение возвращает ошибку.

Фото HD принимает любое допустимое значение для параметра *дсттрансформ* . Обратите внимание, что значения, разрешенные компонентом WIC для этого параметра, отличаются от значений, используемых Фото HD для тега метаданных преобразования.

 

 
