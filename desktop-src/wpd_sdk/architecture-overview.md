---
description: Общие сведения об архитектуре
ms.assetid: ff20d83a-e9cd-46e9-95f7-3ebdf791e667
title: Общие сведения об архитектуре
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 76eafce326655a4d9386d37c02df9ef0ab2b9772b5e87eedaff40a19383b2cec
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119590473"
---
# <a name="architecture-overview"></a>Общие сведения об архитектуре

Архитектура WPD может быть разделена на три процесса. В этих процессах используются три основных компонента WPD: API, сериализатор и драйвер. На следующем рисунке показаны процессы и компоненты, составляющие архитектуру WPD.

![Иллюстрация, демонстрирующая компоненты API, сериализатора и драйверов для WPD](images/wpd-overview-figure1.gif)

## <a name="the-wpd-application-programming-interface"></a>Прикладной программный интерфейс WPD

API-интерфейс WPD реализован как внутрипроцессный сервер COM. API использует стандартные API-интерфейсы Microsoft Win32 для связи с соответствующим драйвером WPD. компонент, именуемый сериализатором WPD, используется как объектами API, так и драйвером для упаковки или распаковки параметров в буферы Windows driver Foundation (вдф) — среда выполнения платформы драйвера режима пользователя (UMDF).

## <a name="the-wpd-serializer"></a>Сериализатор WPD

Сериализатор WPD реализован как внутрипроцессный COM-сервер. API-интерфейс WPD использует сериализатор для упаковки команд и параметров в буферы сообщений, отправляемые драйверу. Драйвер использует сериализатор для распаковки этих буферов сообщений для обработки. Драйвер также использует сериализатор для упаковки данных и параметров в буферы ответов, возвращаемые в API-интерфейс WPD, а API-интерфейс WPD использует сериализатор для распаковки этих буферов ответа, чтобы вернуться к вызывающим объектам.

## <a name="wpd-driver"></a>Драйвер WPD

драйвер WPD реализован как стандартный драйвер Windows driver Foundation (вдф)-среда выполнения платформы драйвера режима пользователя (UMDF). Драйверы WPD размещаются с помощью UMDF в отдельном процессе, называемом узлом драйверов.

Драйвер получает сообщения от отражателя UMDF (это не показано на схеме, так как получение буферов не имеет значения для драйвера. Дополнительные сведения см. в документации по UMDF. Драйвер реализует обработчик управляющего кода ввода-вывода (ИОКЛ), специфический для WPD, для обработки сообщений WPD, полученных API-интерфейсом WPD. Драйвер использует сериализатор WPD для распаковки команд и параметров из этих буферов сообщений и для упаковки ответа в буфер возврата.

Драйверы WPD могут взаимодействовать с устройствами посредством драйвера режима ядра, обычно доступ к которым осуществляется с помощью файловых операций Win32 (CreateFile, ReadFile, WriteFile и т. д.). Для общих шин Корпорация Майкрософт предоставит стандартные драйверы ядра для поставщиков, которые позволят поставщикам поставлять решение драйверов только для пользовательского режима. кроме того, для устройств с протоколом MTP и служба хранилища класса (MSC) корпорация майкрософт предоставит драйверы классов WPD.

дополнительные сведения о драйверах WPD см. в документации по драйверу Windows Portable devices (Windows driver Kit).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**Общие сведения о приложении**](application-overview.md)
</dt> </dl>

 

 



