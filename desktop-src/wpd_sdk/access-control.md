---
description: Контроль доступа
ms.assetid: d17137f9-b206-4ced-82e5-96a7d927c89b
title: Управление доступом (API-интерфейс WPD)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 83caa01b08409afd196ea0507cb47986928a1d947b6ff7907640e4f9bd5b390f
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119657914"
---
# <a name="access-control-wpd-api"></a>Управление доступом (API-интерфейс WPD)

WDM (WDM) поддерживает запрещение доступа к устройствам через списки управления доступом (acl) на узлах устройств самонастраивающийся (PnP). Это означает, что поставщики и сетевые администраторы могут ограничить доступ к любому типу устройства. Когда приложение открывает обработчик для драйвера с помощью вызова [**ипортабледевице:: Open**](/windows/desktop/api/PortableDeviceApi/nf-portabledeviceapi-iportabledevice-open), диспетчер ввода-вывода драйвера проверяет, имеет ли данный пользователь необходимый доступ, и аналогично проверяет, когда ioctl отправляются драйверу из этого обработчика.

Например, администратор сети может ограничить гостевые пользователи доступом только для чтения для портативных устройств, в то время как они могут предоставить пользователям, прошедшим проверку подлинности, доступ на чтение и запись. В этом случае это означает, что если гостевая виртуальная машина выдала команду WPD, которая требует доступа на чтение и запись (например, удаление объекта); в этом случае произойдет отказ в доступе, тогда как если пользователь, прошедший проверку подлинности, выпустил ту же команду, он будет успешным.

Записи групповая политика для управления доступом к съемным и портативным устройствам на самом деле не являются простым способом для администраторов применять списки ACL узла устройства PnP к целому классу устройств за раз (например, при применении параметра "запретить доступ на запись для портативных устройств" групповая политика списки ACL для всех устройств типа WPD, чтобы запретить доступ на запись).

## <a name="io-control-codes-in-wpd"></a>Управляющие коды ввода-вывода в WPD

Приложения WPD взаимодействуют с драйверами, открывая дескрипторы устройств и отправляя управляющие коды ввода-вывода (IOCTL). Эти IOCTL состоят из четырех разделов:

1.  Тип устройства
2.  Код функции
3.  Buffer, метод
4.  Тип доступа

Четвертый раздел, тип доступа, задает конкретные требования к доступу для заданной команды. Диспетчер ввода-вывода драйвера использует эти данные для выполнения проверки списка управления доступом (ACL).

Поэтому, если запрос IOCTL был определен как:


```C++
    #define MY_READ_IOCTL CTL_CODE(FILE_DEVICE_X, CONTROL_FUNCTION_Y, METHOD_BUFFERED, FILE_READ_ACCESS)
```



Диспетчер ввода-вывода драйвера проверяет, имеет ли владелец маркера устройства доступ на чтение к устройству при отправке этого сообщения.

И, если запрос IOCTL был определен как:


```C++
    #define MY_READWRITE_IOCTL CTL_CODE(FILE_DEVICE_X, CONTROL_FUNCTION_Z, METHOD_BUFFERED, (FILE_READ_ACCESS | FILE_WRITE_ACCESS))
```



Диспетчер ввода-вывода драйвера проверяет, имеет ли владелец маркера устройства доступ на чтение и запись к устройству при отправке этого сообщения.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**Общие сведения о приложении**](application-overview.md)
</dt> <dt>

[**Ипортабледевице:: Open**](/windows/desktop/api/PortableDeviceApi/nf-portabledeviceapi-iportabledevice-open)
</dt> <dt>

[**Ипортабледевице:: Сендкомманд**](/windows/desktop/api/PortableDeviceApi/nf-portabledeviceapi-iportabledevice-sendcommand)
</dt> </dl>

 

 



