---
title: диспетчер окон рабочего стола
description: диспетчер окон рабочего стола
ms.assetid: 79250d49-dad5-46c6-892d-b92dac14b417
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4fca8550134ba0c1cdafe0bd5c349061ef900a9e
ms.sourcegitcommit: 95685061d5b0333bbf9e6ebd208dde8190f97005
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2021
ms.locfileid: "108103902"
---
# <a name="the-desktop-window-manager"></a>диспетчер окон рабочего стола

До выхода Windows Vista программа Windows будет нарисоваться непосредственно на экране. Иными словами, программа будет записывать данные непосредственно в буфер памяти, показанный видеоадаптером. Этот подход может вызвать визуальные артефакты, если окно неправильно перерисовывается. Например, если пользователь перетаскивает одно окно поверх другого окна, и окно под ним не перерисовывается достаточно быстро, то самое верхнее окно может оставить свой след:

![снимок экрана, на котором показаны перерисовки артефактов.](images/graphics04.png)

Эта ошибка возникает из-за того, что Windows Paint работает в той же области памяти. При перетаскивании окна сверху окно должно быть перерисовано. Если перерисовка выполняется слишком долго, это приводит к тому, что артефакты показаны на предыдущем изображении.

Windows Vista фундаментально изменила внешний вид Windows, представляя диспетчер окон рабочего стола (DWM). Когда DWM включен, окно больше не рисуется непосредственно в буфере экрана. Вместо этого каждое окно рисуется в буфере памяти экрана, также называемом заданной *областью*. Затем DWM перекомбинирует эти поверхности на экран.

![Схема, показывающая, как DWM комбинирует Рабочий стол.](images/graphics05.png)

DWM предоставляет несколько преимуществ по сравнению со старой архитектурой графики.

-   Меньшее количество перерисовок сообщений. Когда окно ограничено другим окном, это окно не нуждается в перерисовке.
-   Сокращенные артефакты. Ранее перетаскивание окна может создать визуальные артефакты, как описано выше.
-   Визуальные эффекты. Так как DWM отвечает за композицию экрана, он может отображать полупрозрачные и размытые области окна.
-   Автоматическое масштабирование для высокого DPI. Хотя масштабирование не является идеальным способом для управления высоким разрешением, он является приемлемым вариантом для более старых приложений, которые не предназначены для настройки с высоким разрешением. (Мы вернемся к этому разделу позже, в разделе [dpi и Device-Independent пикселей](dpi-and-device-independent-pixels.md).)
-   Альтернативные представления. DWM может использовать поверхностные области различными способами. Например, DWM — это технология, предназначенная для эргономичного пролистывания окон, эскизов и анимированных переходов.

Однако обратите внимание, что не гарантируется, что DWM будет включен. Графическая карта может не поддерживать системные требования DWM, и пользователи могут отключить DWM с помощью панели управления " **Свойства системы** ". Это означает, что программа не должна полагаться на поведение DWM в перерисовки. Протестируйте программу с помощью DWM Disabled, чтобы убедиться, что она правильно перерисовывается.

## <a name="next"></a>Следующая

[Режим сохраняемости и режим интерпретации](retained-mode-versus-immediate-mode.md)

 

 




