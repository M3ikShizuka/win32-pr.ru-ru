---
Title: WinMain описание точки входа приложения: WinMain: точка входа приложения MS. AssetID: 389da5d4-d0f9-4339-be6c-0f4fecc59316 MS. Topic: статья MS. Date: 05/31/2018
---

# <a name="winmain-the-application-entry-point"></a>WinMain: точка входа приложения

Каждая программа Windows включает функцию точки входа, которая называется **WinMain** или **wWinMain**. Ниже приведена сигнатура для **wWinMain**.


```C++
int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PWSTR pCmdLine, int nCmdShow);
```



Четыре параметра:

-   *HINSTANCE* называется «обработчиком» экземпляра или «обработчиком» для модуля. Операционная система использует это значение для задания исполняемого файла (EXE) при его загрузке в память. Этот экземпляр необходим для определенных функций Windows, например для загрузки значков или точечных рисунков.
-   *хпревинстанце* не имеет смысла. Он использовался в 16-разрядной версии Windows, но теперь всегда равен нулю.
-   *пкмдлине* содержит аргументы командной строки в виде строки Юникода.
-   *нкмдшов* — это флаг, который определяет, будет ли главное окно приложения отображаться в обычном режиме, развернуто или отображаться обычным образом.

Функция возвращает значение **типа int** . Возвращаемое значение не используется операционной системой, но можно использовать возвращаемое значение для передачи кода состояния другой программе, которую вы пишете.

**WinAPI** — это соглашение о вызовах. *Соглашение о вызовах* определяет, как функция получает параметры от вызывающего. Например, он определяет порядок, в котором параметры отображаются в стеке. Просто убедитесь, что вы объявили функцию **wWinMain** , как показано ниже.

Функция **WinMain** идентична функции **wWinMain**, за исключением того, что аргументы командной строки передаются как строка ANSI. Предпочтительнее использовать версию Юникода. Функцию ANSI **WinMain** можно использовать, даже если вы компилируете программу в Юникоде. Чтобы получить копию аргументов командной строки в Юникоде, вызовите функцию [**GetCommandLine**](/windows/desktop/api/processenv/nf-processenv-getcommandlinea) . Эта функция возвращает все аргументы в одной строке. Если вы хотите, чтобы аргументы были в виде массива в стиле *argv*, передайте эту строку в [**коммандлинетоаргвв**](/windows/desktop/api/shellapi/nf-shellapi-commandlinetoargvw).

Как компилятор узнает, что следует вызвать **wWinMain** вместо стандартной функции **Main** ? В действительности библиотека времени выполнения Microsoft C (CRT) предоставляет реализацию **Main** , которая вызывает **WinMain** или **wWinMain**.

> [!Note]  
> CRT выполняет некоторую дополнительную работу внутри **Main**. Например, все статические инициализаторы вызываются до **wWinMain**. Несмотря на то, что компоновщик может использовать другую функцию точки входа, используйте значение по умолчанию при компоновке с CRT. В противном случае код инициализации CRT будет пропущен с непредсказуемыми результатами. (Например, глобальные объекты не будут инициализированы должным образом.)

 

Ниже приведена пустая функция **WinMain** .


```C++
INT WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    PSTR lpCmdLine, INT nCmdShow)
{
    return 0;
}
```



Теперь, когда у вас есть точка входа и вы понимаете некоторые основные термины по терминологии и программированию, можно приступать к созданию полной программы Window.

## <a name="next"></a>Следующая

[Модуль 1. Ваша первая программа Windows](your-first-windows-program.md).

 

 
