---
title: WinMain точка входа приложения
description: каждая программа Windows включает функцию точки входа, которая называется WinMain или wWinMain.
ms.assetid: 389da5d4-d0f9-4339-be6c-0f4fecc59316
ms.topic: article
ms.date: 09/10/2021
ms.openlocfilehash: 590dee4b9871853812f48f22b5cce568257cca16
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127144505"
---
# <a name="winmain-the-application-entry-point"></a>WinMain: точка входа приложения

каждая программа Windows включает функцию точки входа, которая называется **WinMain** или **wWinMain**. Ниже приведена сигнатура для **wWinMain**.


```C++
int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PWSTR pCmdLine, int nCmdShow);
```



Вот эти четыре параметра:

-   *HINSTANCE* называется «обработчиком» экземпляра или «обработчиком» для модуля. Операционная система использует это значение для задания исполняемого файла (EXE) при его загрузке в память. этот экземпляр необходим для определенных функций Windows, например для загрузки значков или растровых изображений.
-   *хпревинстанце* не имеет смысла. он использовался в 16-разрядной Windows, но теперь всегда равен нулю.
-   *пкмдлине* содержит аргументы командной строки в виде строки Юникода.
-   *нкмдшов* — это флаг, который определяет, будет ли главное окно приложения отображаться в обычном режиме, развернуто или отображаться обычным образом.

Функция возвращает значение **типа int** . Возвращаемое значение не используется операционной системой, но можно использовать возвращаемое значение для передачи кода состояния другой программе, которую вы пишете.

**WinAPI** — это соглашение о вызовах. *Соглашение о вызовах* определяет, как функция получает параметры от вызывающего. Например, он определяет порядок, в котором параметры отображаются в стеке. Просто убедитесь, что вы объявили функцию **wWinMain** , как показано ниже.

Функция **WinMain** идентична функции **wWinMain**, за исключением того, что аргументы командной строки передаются как строка ANSI. Предпочтительнее использовать версию Юникода. Функцию ANSI **WinMain** можно использовать, даже если вы компилируете программу в Юникоде. Чтобы получить копию аргументов командной строки в Юникоде, вызовите функцию [**GetCommandLine**](/windows/desktop/api/processenv/nf-processenv-getcommandlinea) . Эта функция возвращает все аргументы в одной строке. Если вы хотите, чтобы аргументы были в виде массива в стиле *argv*, передайте эту строку в [**коммандлинетоаргвв**](/windows/desktop/api/shellapi/nf-shellapi-commandlinetoargvw).

Как компилятор узнает, что следует вызвать **wWinMain** вместо стандартной функции **Main** ? В действительности библиотека времени выполнения Microsoft C (CRT) предоставляет реализацию **Main** , которая вызывает **WinMain** или **wWinMain**.

> [!Note]  
> CRT выполняет некоторую дополнительную работу внутри **Main**. Например, все статические инициализаторы вызываются до **wWinMain**. Несмотря на то, что компоновщик может использовать другую функцию точки входа, используйте значение по умолчанию при компоновке с CRT. В противном случае код инициализации CRT будет пропущен с непредсказуемыми результатами. (Например, глобальные объекты не будут инициализированы должным образом.)

 

Ниже приведена пустая функция **WinMain** .


```C++
INT WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    PSTR lpCmdLine, INT nCmdShow)
{
    return 0;
}
```



Теперь, когда у вас есть точка входа и вы понимаете некоторые основные термины по терминологии и программированию, можно приступать к созданию полной программы Window.

## <a name="next"></a>Следующий

[Модуль 1. первая программа Windows](your-first-windows-program.md).

 

 
