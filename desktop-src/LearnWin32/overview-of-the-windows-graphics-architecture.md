---
title: обзор архитектуры графики Windows
description: Описание API графики C++/COM в Windows.
ms.assetid: 9654b18b-d615-455d-a92a-6fc2ccda469e
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4f45ba44f54b947d923b888d51080ff0335119a1
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127144565"
---
# <a name="overview-of-the-windows-graphics-architecture"></a>обзор архитектуры графики Windows

Windows предоставляет несколько api-интерфейсов C++/COM для графики. Эти API показаны на следующей схеме.

![Схема, на которой показаны API графических интерфейсов Windows.](images/graphics01.png)

-   Интерфейс графических устройств (GDI) — это исходный графический интерфейс для Windows. интерфейс GDI впервые был написан для 16-разрядных Windows, а затем был обновлен для 32-разрядных и 64-разрядных Windows.
-   GDI+ было введено в Windows XP в качестве последователей в GDI. доступ к библиотеке GDI+ осуществляется с помощью набора классов C++, которые заключают плоские функции C. платформа .NET Framework также предоставляет управляемую версию GDI+ в пространстве имен **System. Drawing** .
-   Direct3D поддерживает трехмерную графику.
-   Direct2D — это современный API для двухмерной графики, последовательный и GDI, и GDI+.
-   DirectWrite — это разметка текста и подсистема растрирования. Для рисования растрового текста можно использовать GDI или Direct2D.
-   Графическая инфраструктура DirectX (DXGI) выполняет низкоуровневые задачи, такие как показ кадров для выходных данных. Большинство приложений не используют DXGI напрямую. Вместо этого он служит промежуточным слоем между графическим драйвером и Direct3D.

Direct2D и DirectWrite появились в Windows 7. они также доступны для Windows Vista и Windows Server 2008 через обновление платформы. дополнительные сведения см. в [статье обновление платформы для Windows Vista](../win7ip/platform-update-for-windows-vista-portal.md).

Direct2D является фокусом этого модуля. хотя GDI и GDI+ по прежнему поддерживаются в Windows, для новых программ рекомендуется использовать Direct2D и DirectWrite. В некоторых случаях сочетание технологий может оказаться более практичным. в таких ситуациях Direct2D и DirectWrite предназначены для взаимодействия с GDI.

В следующих разделах описаны некоторые преимущества Direct2D.

### <a name="hardware-acceleration"></a>Аппаратное ускорение

Термин *аппаратное ускорение* означает графические вычисления, выполняемые графическим процессором (GPU), а не ЦП. Современные графические процессоры в высокой степени оптимизированы для типов вычислений, используемых при отрисовке графики. Как правило, большую часть этой работы, которая перемещается из ЦП в GPU, лучше.

Хотя GDI поддерживает аппаратное ускорение для определенных операций, многие операции GDI привязаны к ЦП. Direct2D размещается поверх Direct3D и использует все преимущества аппаратного ускорения, обеспечиваемого GPU. Если GPU не поддерживает функции, необходимые для Direct2D, то Direct2D возвращается к визуализации программного обеспечения. в целом, в большинстве случаев Direct2D выполняет интерфейс GDI и GDI+.

### <a name="transparency-and-anti-aliasing"></a>Прозрачность и сглаживание

Direct2D поддерживает полностью альфа-смешение с аппаратным ускорением (прозрачность).

В GDI предусмотрена ограниченная поддержка альфа-смешения. Большинство функций GDI не поддерживают альфа-смешение, хотя GDI поддерживает альфа-смешение во время операции BitBlt. GDI+ поддерживает прозрачность, но альфа-смешение выполняется цп, поэтому не имеет смысла использовать аппаратное ускорение.

Альфа-смешение с аппаратным ускорением также обеспечивает сглаживание. *Присвоение псевдонимов* является артефактом, вызванным выборкой непрерывной функции. Например, при преобразовании кривой линии в Пиксели псевдоним может привести к неровному виду. \[ 3 \] любая методика, которая сокращает количество артефактов, вызванных псевдонимами, считается формой сглаживания. В графике Сглаживание выполняется путем смешения краев с фоном. Например, вот круг, рисуемый GDI, и тот же круг, нарисованный Direct2D.

![Иллюстрация приемов сглаживания в Direct2D.](images/graphics02.png)

На следующем рисунке показаны подробные сведения о каждом кружке.

![сведения о предыдущем изображении.](images/graphics03.png)

Круг, рисуемый GDI (слева), состоит из черных пикселов, которые представляют собой приблизительную кривую. Круг, рисуемый Direct2D (справа), использует смешивание для создания гладкой кривой.

GDI не поддерживает сглаживание при рисовании геометрических объектов (линий и кривых). GDI может нарисовать сглаженный текст с помощью технологии ClearType; но в противном случае текст GDI также имеет псевдоним. Псевдонимы особенно заметны для текста, поскольку неровные линии нарушают структуру шрифта, делая текст менее удобочитаемым. хотя GDI+ поддерживает сглаживание, оно применяется цп, поэтому производительность не настолько хороша, как Direct2D.

### <a name="vector-graphics"></a>Векторная графика

Direct2D поддерживает *векторную графику*. В векторной графике математические формулы используются для представления линий и кривых. Эти формулы не зависят от разрешения экрана, поэтому их можно масштабировать до произвольных измерений. Векторная графика особенно полезна, когда изображение необходимо масштабировать для поддержки различных размеров монитора или разрешений экрана.

## <a name="next"></a>Следующий

[диспетчер окон рабочего стола](the-desktop-window-manager.md)

 

 
