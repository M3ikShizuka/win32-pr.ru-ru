---
description: Библиотека автономных разделов реестра используется для изменения куста реестра за пределами активного системного реестра.
ms.assetid: 61db2804-1b67-473f-8dd7-6be6c6a7184e
title: Сведения о библиотеке автономных разделов реестра
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e5c2aecf71e8e42ad96c018bb613d7aac9a4a867bb301671e9553f1768a4ce44
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118956183"
---
# <a name="about-the-offline-registry-library"></a>Сведения о библиотеке автономных разделов реестра

Библиотека автономных разделов реестра используется для изменения куста реестра за пределами активного системного реестра.

Библиотека автономных разделов реестра предназначена для сценариев обновления реестра, таких как обслуживание образа операционной системы. Функции автономного реестра предоставляют следующие возможности, недоступные в стандартных функциях реестра:

-   Функции автономного реестра можно использовать для изменения куста реестра в любом поддерживаемом формате реестра. стандартные функции реестра могут вносить изменения только в активный куст реестра, а изменения должны быть совместимы с версией Windows, работающей в системе.
-   Для автономной библиотеки реестра требуется только доступ на чтение для открытия файла куста реестра и доступа на запись для сохранения файла. Никакие другие проверки доступа к объектам в Hive не выполняются, что позволяет изменять Hive с правами обычного пользователя. При использовании стандартных функций реестра Загрузка Hive в активный реестр является привилегированной операцией, которая требует административного доступа.

Автономные функции реестра не следует использовать в качестве замены для функций системного реестра по следующим причинам.

-   Невозможно совместно использовать кусты реестра между процессами с помощью функций автономного реестра.
-   Функции автономного реестра используют простую блокировку, что может привести к серьезному снижению производительности для многопоточных приложений.
-   Изменения, внесенные в автономные функции реестра, не сохраняются до тех пор, пока не будет вызвана функция [**орсавехиве**](orsavehive.md) .

Приложения не должны использовать автономные функции реестра для обхода требований безопасности системного реестра. Чтобы загрузить Hive, приложение, работающее без специальных привилегий, необходимых функции [реглоадкэй](/windows/win32/api/winreg/nf-winreg-regloadkeya) , может использовать функцию [реглоадаппкэй](/windows/win32/api/winreg/nf-winreg-regloadappkeya) .

**Windows Server 2003 и Windows XP:** Функция [реглоадаппкэй](/windows/win32/api/winreg/nf-winreg-regloadappkeya) не поддерживается.

*Автономный куст реестра* — это куст реестра, который был загружен в память с помощью функций автономного реестра. Чтобы создать пустой куст автономного реестра, используйте функцию [**оркреатехиве**](orcreatehive.md) . Чтобы изменить существующий куст реестра, используйте функцию [регсавекэй](/windows/win32/api/winreg/nf-winreg-regsavekeya) или [регсавекэйекс](/windows/win32/api/winreg/nf-winreg-regsavekeyexa) , чтобы сохранить куст из активного системного реестра в файл, а затем с помощью функции [**оропенхиве**](oropenhive.md) открыть файл.

Функции [**оркреатехиве**](orcreatehive.md) и [**оропенхиве**](oropenhive.md) возвращают маркер корневого ключа куста реестра вне сети. Этот маркер может использоваться как обработчик любого другого ключа в автономном кусте реестра, за исключением следующих исключений: функции [**оркреатекэй**](orcreatekey.md) и [**оропенкэй**](oropenkey.md) нельзя использовать для возврата маркера в корневой раздел. Функция [**орклосекэй**](orclosekey.md) не может использоваться для закрытия корневого ключа; Функция [**орделетекэй**](ordeletekey.md) не может использоваться для удаления корневого ключа. Во всех этих случаях функция завершается ошибкой с **\_ недопустимым \_ параметром**.

Используйте функцию [**оркреатекэй**](orcreatekey.md) , чтобы добавить ключи в куст реестра Open offline и функцию [**орсетвалуе**](orsetvalue.md) , чтобы задать значения ключей. Библиотека автономных разделов реестра поддерживает другие основные операции с реестром, такие как перечисление, извлечение и удаление ключей и значений, а также задание ключевых атрибутов, таких как поведение безопасности и виртуализации. Список функций см. в разделе [функции библиотеки автономного реестра](offline-registry-library-functions.md).

Чтобы сохранить изменения, внесенные в открытый куст автономного реестра, используйте функцию [**орсавехиве**](orsavehive.md) , чтобы сохранить куст в файл. (Изменения не сохраняются, если не вызывается **орсавехиве** .) После сохранения куста используйте функцию [**орклосехиве**](orclosehive.md) , чтобы закрыть куст и свободные ресурсы, связанные с ним.

Куст автономного реестра проверяется только в том случае, если он открыт с помощью функции [**оропенхиве**](oropenhive.md) . Если куст поврежден, операция просто завершается ошибкой. попытка восстановить куст реестра не выполняется. Проверки доступа к объектам в Hive не выполняются до тех пор, пока куст не будет загружен в активный реестр с помощью функции [реглоадкэй](/windows/win32/api/winreg/nf-winreg-regloadkeya) .

Функции автономного реестра не поддерживают [Стандартные ключи](../sysinfo/predefined-keys.md).

Все строки имени ключа и значения, передаваемые в автономные функции реестра, должны быть в Юникоде.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Функции библиотеки автономного реестра \_](offline-registry-library-functions.md)
</dt> </dl>

 

 
