---
description: Преобразует указанную исходную строку в строку в Юникоде, используя 8-разрядную кодовую страницу формата преобразования Юникода (UTF-8).
ms.assetid: 2871a81b-74f9-462e-9e5c-c59d06bb6841
title: Функция RtlUTF8ToUnicodeN (WDM. h)
ms.topic: reference
ms.date: 02/21/2019
topic_type:
- APIRef
- kbSyntax
api_name:
- RtlUTF8ToUnicodeN
api_type:
- DllExport
api_location:
- Ntdll.dll
ms.openlocfilehash: 8b3de7192a9a26d367fc0b6ad231fbc046514ec6
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104262578"
---
# <a name="rtlutf8tounicoden-function"></a>Функция RtlUTF8ToUnicodeN

Преобразует указанную исходную строку в строку в Юникоде, используя 8-разрядную кодовую страницу формата преобразования Юникода (UTF-8).

## <a name="syntax"></a>Синтаксис


```C++
NTSTATUS WINAPI RtlUTF8ToUnicodeN(
  _Out_     PWSTR  UnicodeStringDestination,
  _In_      ULONG  UnicodeStringMaxByteCount,
  _Out_opt_ PULONG UnicodeStringActualByteCount,
  _In_      PCCH   UTF8StringSource,
  _In_      ULONG  UTF8StringByteCount
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*Уникодестрингдестинатион* \[ заполняет\]
</dt> <dd>

Указатель на выделенный вызывающим объектом буфер, который получает переведенную строку.

</dd> <dt>

*Уникодестрингмаксбитекаунт* \[ окне\]
</dt> <dd>

Максимальное число байтов, которое должно быть записано на *уникодестрингдестинатион*. Если это значение приводит к усечению переведенной строки, **RtlUTF8ToUnicodeN** возвращает состояние ошибки.

</dd> <dt>

*Уникодестрингактуалбитекаунт* \[ out, необязательно\]
</dt> <dd>

Указатель на переменную, выделенную вызывающим объектом, которая получает длину переведенной строки в байтах. Этот параметр является необязательным и может иметь **значение NULL**. Если строка усекается, возвращаемое число подсчитывает фактическое число усеченных строк.

</dd> <dt>

*UTF8StringSource* \[ окне\]
</dt> <dd>

Указатель на строку для перевода.

</dd> <dt>

*UTF8StringByteCount* \[ окне\]
</dt> <dd>

Размер строки в байтах в *UTF8StringSource*.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

**RtlUTF8ToUnicodeN** возвращает одно из следующих значений NTSTATUS:



| Код возврата                                                                                                  | Описание                                                                                                     |
|--------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------|
| <dl> <dt>**СОСТОЯНИЕ " \_ успешно"**</dt> </dl>               | Строка преобразована в Юникод.<br/>                                                                 |
| <dl> <dt>**СОСТОЯНИЕ \_ \_ \_ несопоставленных**</dt> </dl>     | Обнаружен и заменен Недопустимый входной символ. Это состояние считается состоянием успеха.<br/> |
| <dl> <dt>**\_Недопустимый \_ параметр Status**</dt> </dl>    | Оба указателя на *уникодестрингдестинатион* и *Уникодестрингактуалбитекаунт* имеют **значение NULL**.<br/>       |
| <dl> <dt>**СОСТОЯНИЕ " \_ Недопустимый \_ параметр \_ 4"**</dt> </dl> | *UTF8StringSource* имеет **значение NULL**.<br/>                                                                 |
| <dl> <dt>**\_БУФЕР состояния \_ слишком \_ мал**</dt> </dl>    | *Уникодестрингдестинатион* был усечен.<br/>                                                            |



 

## <a name="remarks"></a>Комментарии

Хотя *уникодестрингактуалбитекаунт* является необязательным и может иметь **значение NULL**, вызывающие объекты должны предоставлять для него хранилище, так как полученная длина может использоваться для определения успешности преобразования.

Если выходные данные усекаются и обнаружен недопустимый входной символ, функция возвращает буфер состояния, что \_ \_ Ошибка слишком \_ мала.

Если *уникодестрингдестинатион* имеет значение **null** , функция возвратит требуемое число байтов для размещения переведенной строки без усечения в *уникодестрингактуалбитекаунт*.

**RtlUTF8ToUnicodeN** не изменяет исходную строку, если только указатели *уникодестрингдестинатион* и *UTF8StringSource* не эквивалентны. Возвращенная строка Юникода не оканчивается нулем.

Вызывающие объекты **RtlUTF8ToUnicodeN** должны выполняться на уровне подготовки к уровню IRQL < \_ .

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|--------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | \[Только классические приложения Windows 7\]<br/>                                           |
| Минимальная версия сервера<br/> | Только классические приложения Windows Server 2008 R2 \[\]<br/>                              |
| Header<br/>                   | <dl> <dt>WDM. h</dt> </dl>     |
| DLL<br/>                      | <dl> <dt>Ntdll.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**RtlUnicodeToUTF8N**](rtlunicodetoutf8n.md)
</dt> </dl>

 

 




