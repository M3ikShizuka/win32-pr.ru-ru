---
title: Архитектура подключаемых модулей
description: Биометрические единицы предоставляют платформе возможности устройства через стандартный интерфейс, который состоит из датчиков, подсистемы и адаптеров хранилища.
ms.assetid: d2835413-70a3-45fa-93e2-3fe78097554f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 52e43af9c0ea5a8db57cc0e0970b5625b1ba118f
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104488017"
---
# <a name="plug-in-architecture"></a>Архитектура подключаемых модулей

Биометрические устройства изготовлены в широком спектре типов и конфигураций. Биометрическая платформа Windows устраняет эти разнообразные возможности, предоставляя расширяемую архитектуру, позволяющую сторонним разработчикам создавать пользовательские подключаемые компоненты. Основной компонент — это программный объект, называемый биометрической единицей. Биометрические единицы предоставляют платформе возможности устройства через стандартный интерфейс, который состоит из датчиков, подсистемы и адаптеров хранилища. Биометрические единицы и их составные компоненты обсуждаются в следующих разделах.

## <a name="biometric-unit"></a>Биометрическая единица

Центральным компонентом подключаемой архитектуры биометрическая платформа Windows является биометрическая единица, программный объект, предоставляющий возможности биометрического устройства платформе через стандартный интерфейс.

С каждым биометрической единицей связан один физический датчик. Датчик захватывает биометрические данные и может также в зависимости от возможностей оборудования выполнять другие биометрические операции, такие как сопоставление шаблонов и хранение. Датчикам, которые не поддерживают встроенное сопоставление или хранение, требуются дополнительные программные модули для выполнения этих функций. Дополнительные сведения см. в разделе [адаптеры](/previous-versions//dd401508(v=vs.85)).

На следующем рисунке показано, как данные проходят через биометрическую единицу. По сути, поток данных формирует тип конвейера. Начальными входными данными для конвейера является биометрический пример, захваченный физическим датчиком. Подсистема пытается сопоставить образец с шаблонами, которые уже существуют в хранилище шаблонов, или, если совпадений не найдено, создает новый шаблон на основе повторяющихся физических выборок и сохраняет шаблон в хранилище.

![данные, передаваемые через биометрический модуль](images/biometricunit-dataflow.png)

## <a name="biometric-unit-life-cycle"></a>Жизненный цикл биометрического модуля

### <a name="creation"></a>Создание

Когда служба биометрической службы Windows запускается или получает уведомление об оборудовании от диспетчера самонастраивающийся, оно проверяет наличие оборудования, поддерживающего хорошо известный GUID интерфейса \_ девинтерфаце \_ биометрического \_ средства чтения (E2B5183A-99EA-4cc3-AD6B-80CA8D715B80). Для каждого обнаруженного биометрического устройства:

-   Открывает обработчик для устройства.
-   Запрашивает возможности устройства с помощью интерфейса управления биометрических драйверов Windows.
-   Открывает раздел реестра устройства и пытается нахождение сведений о связанных подключаемых модулях адаптера.
-   Открывает раздел реестра биометрической службы Windows и выполняет поиск сведений обо всех глобальных подключаемых модулях, которые должны переопределять значения, указанные на предыдущем шаге.
-   Создает биометрическую единицу для представления устройства и передает модуль поставщику биометрической службы.

### <a name="configuration"></a>Конфигурация

После того как биометрический поставщик (BSP) принимает биометрическую единицу, он настраивает единицу и назначает ее пулу датчиков. Дополнительные сведения см. в разделе [Пулы датчиков](sensor-pools.md). Единица настраивается путем загрузки соответствующих адаптеров, подключения к хранилищу шаблонов и, возможно, изменения режима работы. Биометрический модуль можно настроить для работы в одном из двух режимов:

-   В базовом режиме единица выступает в качестве простого устройства записи. Он не использует встроенную обработку или хранение, но полностью зависит от программных адаптеров для дополнительной поддержки. Он должен иметь возможность создавать образцы в стандартном формате. Например, средства чтения отпечатков пальцев должны создавать образцы, соответствующие стандарту ANSI ИНЦИТС 381-2004. Целью базового режима является поддержка взаимодействия между компонентами разных поставщиков.
-   В расширенном режиме биометрический единица использует функции интегрированной обработки и хранения. Он должен предоставлять стандартные интерфейсы, но может создавать и обрабатывать образцы в любом нужном формате.

Когда биометрическое устройство перемещается из одного пула датчиков в другой, его адаптеры выгружаются и перестраиваются для нового пула датчиков. Удостоверение биометрического модуля остается постоянным; изменяются только аппаратная конфигурация и подключаемые модули адаптера.

### <a name="shut-down"></a>Завершение работы

Когда биометрическая служба Windows завершает работу или когда диспетчер самонастраивающийся уведомляет об удалении единицы, служба удаляет все биометрические единицы.

## <a name="adapters"></a>Адаптеры

Программные компоненты подключаемых модулей, называемые адаптерами, подключают биометрическую единицу к базовому оборудованию и предоставляют функции, которые могут отсутствовать на оборудовании датчика. Существует три типа адаптеров, которые можно создать.

-   Адаптер датчика создает оболочку для биометрического устройства и предоставляет стандартный интерфейс для настройки датчика, отслеживания образцов и управления передачей биометрических данных механизму обработки.
-   Адаптер подсистемы создает Биометрические шаблоны из захваченных примеров, сопоставляет примеры с существующими шаблонами и шаблоны индексов.
-   Адаптер хранилища управляет шаблонами баз данных.

Адаптеры можно загружать и выгружать во время выполнения. Это позволяет биометрической службе Windows динамически перенастроить биометрическую единицу, подключив ее к другому набору адаптеров.

Наконец, каждый из интерфейсов датчиков, обработчиков и адаптеров хранилища предоставляет два метода, **контролунит** и **контролунитпривилежед**, которые позволяют клиентским приложениям получать доступ к пользовательским адаптерам, определенным поставщиком. Это позволяет поставщику определить практически неограниченный набор управляющих операций для устройства. Кроме того, при выборе функции для реализации поставщик может сделать некоторые операции управления доступными непривилегированным пользователям, одновременно запретив другим операциям привилегированных пользователей.

Дополнительные сведения о создании адаптеров см. в разделе [Создание подключаемых модулей адаптера](creating-adapter-plug-ins.md).

## <a name="adapter-performance-requirements"></a>Требования к производительности адаптера

Так как цель — это быстрый ответ в целом, производительность адаптера не указывается с точки зрения ограничений по времени для конкретных подпрограмм. Вместо этого для общего взаимодействия с пользователем указывается производительность в виде набора требований.

Существует два требования:

-   Взаимодействие между пользователем и операционной системой, включающей в себя биометрию, должно завершиться в течение двух секунд. Этот интервал измеряет время начала и окончания, которое пользователь воспринимает на момент касания или считывания датчика до тех пор, пока на экране устройства не появится что-то заметно. (Например, во время разблокировки не должно быть более двух секунд между тем, что пользователь касается датчика отпечатков пальцев и экраном блокировки, подтверждающий личность пользователя.)
-   Для первоначального отображения плиток с учетными данными на экране входа или блокировки мы разрешают немного больше времени (три секунды, максимум), но мы по-прежнему предпочтительнее, а не позже. В частности, плитка Bio должна быть видима на экране в течение трех секунд с внешнего вида панели блокировки или входа.

Эти числа не являются произвольными. Многочисленные исследования показали, что человек, существ, получит все, что происходит в течение интервала в два секунды, как часть "Now". Если событие A и событие B происходят в течение двух секунд, то люди воспринимают эти события как одновременные. Если события разделены более чем на три секунды, пользователи думают о задержке — они считают, что что-то «занимает слишком много времени». Так что это проблема прикован человека психологии.

 

 