---
title: О Трацелоггинг
description: Трацелоггинг — это новая трассировка событий Windows 10 для приложений пользовательского режима и драйверов режима ядра.
ms.assetid: 8C6A9E91-98F9-4D6B-A937-A22BA7CEB1E4
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a6c2b1ca72385a51df1e0cd82f3e91c198f15b5d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103890764"
---
# <a name="about-tracelogging"></a>О Трацелоггинг

Трацелоггинг — это новая трассировка событий Windows 10 для приложений пользовательского режима и драйверов режима ядра. Трацелоггинг — это формат для самостоятельного описания трассировки событий Windows (ETW). Трацелоггинг строится на трассировке событий Windows (ETW) и предоставляет упрощенный способ инструментирования кода.

Трацелоггинг предлагает простоту препроцессора трассировки программного обеспечения Windows (WPP) с дополнительным преимуществом, позволяющим включать структурированные данные с событиями, возможность корреляции событий и все, без необходимости отдельного XML-файла манифеста инструментирования. События — это самостоятельное описание, которое означает, что двоичный файл, содержащий манифест инструментирования, не требуется регистрировать в системе, чтобы использовать API-интерфейсы Data Trace (TDH) для декодирования и отображения событий.

Трассировка событий для Windows (ETW) появилась в Windows 2000 и обновлена в Windows Vista. Трацелоггинг построены поверх API ETW Windows Vista. Поставщики могут использовать технологию Трацелоггинг и по-прежнему работают в Windows Vista. Для управления поставщиками Трацелоггинг можно использовать существующие контроллеры (с использованием Windows Вистаапис).

Трацелоггинг также совместим с существующими инструментами. Поставщики, использующие ETW на основе манифеста, по-прежнему поддерживаются. Не нужно преобразовывать поставщики ETW на основе манифеста в поставщики Трацелоггинг, если вы не хотите воспользоваться преимуществами Трацелоггинг. Также поддерживается трассировка WPP.

Трацелоггинг строится на основе ETW, но вносит несколько важных усовершенствований:

-   Трассировка события так же проста, как вызов API.
-   События являются самоописывающими и не нуждаются в дополнительных двоичных файлах, содержащих скомпилированный манифест события для интерпретации события. Все метаданные о событии записываются в событие.
-   Действия внутри одного процесса можно легко выразить с помощью событий запуска и остановки.
-   Трацелоггинг совместим с существующей поддержкой инструментирования. Новые API ETW продолжат поддерживать старые поставщики. Вы можете вкладывать новые интерфейсы API ETW в стратегические сценарии, оставляя старые точки инструментирования.
-   Трацелоггинг предлагает один и тот же API трассировки событий для Windows 10, Xbox One и Windows 10 Mobile.
-   Интерфейсы API Трацелоггинг доступны на языках C, C++, .NET и среда выполнения Windows.

## <a name="api-high-level-overview"></a>Высокоуровневый обзор API

Существует три отдельных API Трацелоггинг, предназначенных для разных аудиторов разработчиков. Каждый API разработан для удовлетворения различных наборов требований, соответствующих целевой аудитории этого API.

Для разработчиков WinRT:

-   [**LoggingChannel**](/uwp/api/Windows.Foundation.Diagnostics.LoggingChannel) был расширен в Windows 10 для записи в журнал событий трассировки событий Windows (ETW) без необходимости манифеста.
-   [**Логгингактивити**](/windows/win32/api/traceloggingactivity/nl-traceloggingactivity-traceloggingactivity) был расширен в Windows 10 для предоставления методов запуска и отмены действия, которые обеспечивают управление форматом и содержимым событий запуска и завершения. Кроме того, действия могут быть вложенными.

Для разработчиков C/C++:

-   Трацелоггингпровидер. h содержит наиболее эффективный API, однако этот API плохо подходит для использования в динамических сценариях (сценариях), таких как JavaScript. Этот API можно использовать в пользовательском режиме и в коде режима ядра.

Для разработчиков управляемого кода (Microsoft .NET Framework):

-   Класс [EventSource](/dotnet/api/system.diagnostics.tracing.eventsource) , поставляемый с предыдущими версиями платформа .NET Framework уже поддерживал запись событий ETW — автоматическое создание манифеста и Встраивание манифеста в поток событий. Однако разработчику по-прежнему пришлось отследить манифест для декодирования событий (если не работает сценарий, в котором поддерживался встроенный манифест). Трацелоггинг позволяет полностью устранять манифест.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Сведения о трассировке событий](/windows/desktop/ETW/about-event-tracing)
</dt> </dl>

 

 