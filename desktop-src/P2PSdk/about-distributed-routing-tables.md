---
description: Таблица распределенной маршрутизации (DRT) существует в виде сетки сооперационных узлов, где каждый узел является экземпляром приложения с помощью API-интерфейса DRT.
ms.assetid: 257ad7ea-636b-45f2-b514-4a213939d107
title: Сведения о таблицах распределенной маршрутизации
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2dfca9f81cc609d97584ef5a11f999722c696858
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103909800"
---
# <a name="about-distributed-routing-tables"></a>Сведения о таблицах распределенной маршрутизации

Таблица распределенной маршрутизации (DRT) существует в виде сетки сооперационных узлов, где каждый узел является экземпляром приложения с помощью API-интерфейса DRT. Узлы, публикующие ключи, несут ответственность за помощь другим узлам в публикации и разрешении ключей. Узлы также могут участвовать в «разрешении», что не требует от них помощь одноранговым узлам. Протокол DRT выполняется через транспорт UDP/IPv6.

Узел, который публикует ключ, создает и поддерживает локальную таблицу маршрутизации других узлов в сети. Эта таблица маршрутизации оптимизирована таким образом, что узел может быстро найти конкретный ключ в сети, находя ключ непосредственно в локальной таблице маршрутизации, или запросив другие узлы, которые публикуют ключи, расположенные ближе к целевому. Это действие повторяется до тех пор, пока требуемый ключ не будет найден или узел не определит, что такого ключа не существует.

Ключи DRT — это 256-разрядные целые числа без знака. Замыкание между ключами определяется числовым различием между ними. Пространства ключей DRT считается циклическим. Например, первое возможное значение ключа и Последнее возможное значение ключа считаются соседями.

В Secure DRT узлы необходимы для проверки подлинности публикуемых ключей. Механизм, с помощью которого узлы проходят проверку подлинности ключей с помощью API-интерфейса DRT при инициализации DRT. Это можно сделать, выбрав поставщик безопасности для DRT. Поставщик безопасности — это модуль, который может создавать маркеры, используемые для проверки подлинности ключей, и проверять маркеры, созданные другими узлами. Он должен реализовывать интерфейс поставщика безопасности, который определен в этой документации. В составе DRT Windows 7 поставляется два полностью реализованных поставщика безопасности, которые можно использовать для создания приложений Windows.

Во время инициализации приложение должно также предоставить экземпляр DRT с поставщиком начальной загрузки. Поставщик начальной загрузки — это модуль, который может получать сетевые конечные точки узлов, уже имеющихся в сетке DRT, и вызывается службой DRT при установке нового узла. Как и модуль поставщика безопасности, поставщик начальной загрузки должен реализовать хорошо определенный интерфейс. В составе DRT Windows 7 входит два полностью реализованных поставщика начальной загрузки.

DRT считает непосредственные соседние ключи специальными. Пять ближайших к числу ключей меньше, а пять ближайших ключей больше, чем опубликованный ключ, что называется конечным набором. Объект DRT сообщает об изменениях в конечном наборе ключа через API-интерфейс DRT.

## <a name="drt-life-cycle-and-state-transitions"></a>Жизненный цикл DRT и переходы состояний

Приложение может инициализировать локальный экземпляр DRT с помощью функции [**дртопен**](/windows/desktop/api/drt/nf-drt-drtopen) . Эта функция запускает процесс начальной загрузки, в котором API DRT вызывает поставщик начальной загрузки для изучения ключей и сетевых конечных точек других узлов, уже участвующих в DRT. Если поставщик начальной загрузки успешно находит по крайней мере один другой узел, то DRT переходит в \_ активное состояние DRT. В этом состоянии приложение может искать ключи, опубликованные другими узлами, а также публиковать ключи, которые можно разрешить. Если поставщику начальной загрузки не удается успешно выполнить обнаружение других узлов, то DRT переходит в \_ автономное состояние DRT. DRT останется в \_ отдельном состоянии DRT и будет периодически пытаться выполнить загрузку, чтобы нахождение узлов и переходить в \_ состояние DRT Active.

Узел может переходить к этим состояниям из DRT \_ Active.

| Состояние жизненного цикла | Условия                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_только DRT       | Локальный узел не обнаружил других узлов в DRT. В этом состоянии узел продолжит прослушивать другие узлы в DRT.<br/> Если другой узел присоединяется к DRT, локальный узел переходит в \_ состояние DRT Active. Если сеть не работает, она будет переведена в DRT \_ без \_ сети. В случае серьезной ошибки в DRT узел переходит в \_ состояние сбоя DRT.<br/> |
| DRT \_ нет \_ сети | Когда узел теряет подключение к сети, он переходит в состояние DRT \_ No \_ Network. На этом этапе приложение может ожидать восстановления сетевого подключения и может закрыть DRT.<br/>                                                                                                                                                                                                                    |
| \_сбой DRT     | В локальном узле произошла серьезная ошибка. Например, если на локальном компьютере заканчивается физическая память.<br/> Когда узел переходит в это состояние, приложение должно вызвать API [**дртклосе**](/windows/desktop/api/drt/nf-drt-drtclose) , устранить проблему и повторно инициализировать DRT с [**дртопен**](/windows/desktop/api/drt/nf-drt-drtopen).<br/>                                                                                                   |



 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Использование API таблиц распределенной маршрутизации](using-the-distributed-routing-table-api.md)
</dt> <dt>

[Справочник по распределенной маршрутизации API таблиц](distributed-routing-table-api-reference.md)
</dt> </dl>

 

 




