---
description: Файлы конфигурации одноранговых узлов и групп можно импортировать и экспортировать из одной конечной точки в другую с помощью функций импорта и экспорта Identity, расположенных в API Identity Manager и группирования.
ms.assetid: 876d9c57-15f6-4f5e-8035-792e15f8035e
title: Импорт и экспорт конфигурации удостоверений и групп
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a356f2747e3c8276446568b6f82bcbd773b14af8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103813825"
---
# <a name="identity-and-group-configuration-import-and-export"></a>Импорт и экспорт конфигурации удостоверений и групп

Файлы конфигурации одноранговых узлов и групп можно импортировать и экспортировать из одной конечной точки в другую с помощью функций импорта и экспорта Identity, расположенных в API Identity Manager и группирования. Эти функции полезны, так как позволяют пользователю быстро и удобно экспортировать удостоверения и сведения о конфигурации группы с одного компьютера на другой.

## <a name="importing-and-exporting-peer-identity-data"></a>Импорт и экспорт данных удостоверений однорангового узла

Данные идентификации однорангового узла экспортируются путем вызова [**пиридентитекспорт**](/windows/desktop/api/P2P/nf-p2p-peeridentityexport) с именем удостоверения для экспорта и пароля, используемого для шифрования связанных учетных данных. Эта функция возвращает XML-строку, содержащую имя удостоверения однорангового узла, и зашифрованные учетные данные для этого конкретного удостоверения, которые затем можно передать на другой компьютер с помощью внешнего механизма передачи, такого как электронная почта. В следующем примере показан формат XML-строки:

``` syntax
<PEERIDENTITYEXPORT VERSION="1.0">
   <PEERNAME>
     <!-- UTF-8 encoded peer name of the identity -->
   </PEERNAME>
   <DATA xmlns:dt="urn:schemas-microsoft-com:datatypes" dt:dt="bin.base64">
      <!-- base64 encoded / PFX encoded and encrypted IDC with the private key -->
   </DATA>
</PEERIDENTITYEXPORT>
```

Экспортированные данные удостоверений можно получить путем вызова [**пиридентитимпорт**](/windows/desktop/api/P2P/nf-p2p-peeridentityimport)и передачи строки XML с паролем, предоставленным в предыдущем вызове функции [**пиридентитекспорт**](/windows/desktop/api/P2P/nf-p2p-peeridentityexport). Эта функция возвращает имя однорангового узла импортированного удостоверения. Импортированное имя удостоверения и учетные данные можно использовать так же, как имя удостоверения, возвращаемое [**пиренумидентитиес**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities) или [**пиридентитикреате**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate).

> [!Note]  
> При вызове [**пиридентитекспорт**](/windows/desktop/api/P2P/nf-p2p-peeridentityexport)приложение или пользователь API должен предоставить надежный пароль достаточной длины. Это важно, так как импортированные данные удостоверения содержат закрытый ключ для удостоверения.

 

## <a name="importing-and-exporting-a-group-identity-configuration"></a>Импорт и экспорт конфигурации удостоверения группы

Одноранговая группировка позволяет одноранговому узлу экспортировать данные конфигурации группы из одной конечной точки в другую с помощью конкретных API импорта и экспорта. Для импорта данных конфигурации идентификатор однорангового узла, выполняющего импорт (и ранее выполняющий экспорт), должен присутствовать на компьютере, на котором будут импортированы данные конфигурации. Это удостоверение можно получить, экспортировав и импортировав его с помощью методов, указанных в предыдущем разделе этой статьи: [Импорт и экспорт данных удостоверений однорангового узла](#importing-and-exporting-peer-identity-data).

Данные конфигурации группы содержат все сведения об удостоверении, которые необходимо присоединить к группе из новой конечной точки. В частности, данные конфигурации содержат цепочку ГМК, имя однорангового узла, имя облака, область и набор флагов, относящихся к PNRP. Для удостоверения, владеющего группой, закрытый ключ для группы включается в сведения о конфигурации группы.

> [!Note]  
> При вызове [**пирграупекспортконфиг**](/windows/desktop/api/P2P/nf-p2p-peergroupexportconfig)пользователь приложения или API должен предоставить надежный пароль достаточной длины. Это важно, так как импортированные данные удостоверения содержат закрытый ключ для группы.

 

Чтобы экспортировать текущую конфигурацию одноранговой группы, вызовите [**пирграупекспортконфиг**](/windows/desktop/api/P2P/nf-p2p-peergroupexportconfig), передав в нее маркер (полученный предыдущим вызовом [**пирграупжоин**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin), [**пирграупопен**](/windows/desktop/api/P2P/nf-p2p-peergroupopen)или [**пирграупкреате**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate)) и пароль, используемый для шифрования и защиты файла конфигурации. Эта функция возвращает XML-строку, которая содержит конфигурацию в формате следующего примера, который затем можно записать в файл и передать на другой компьютер с помощью внешнего механизма передачи, такого как электронная почта.

``` syntax
<PEERGROUPCONFIG VERSION="1.0">
  <IDENTITYPEERNAME>
    <!-- UTF-8 encoded peer name of the identity -->
  </IDENTITYPEERNAME>
  <GROUPPEERNAME>
    <!-- UTF-8 encoded peer name of the group -->
  </GROUPPEERNAME>
  <CLOUDNAME>
    <!-- UTF-8 encoded Unicode name of the cloud -->
  </CLOUDNAME>
  <SCOPE>
    <!-- UTF-8 encoded Unicode name of the scope: global, site-local, link-local -->
  </SCOPE>
  <CLOUDFLAGS>
    <!-- A DWORD that contains cloud-specific settings, represented as a string -->
  </CLOUDFLAGS>
  <GMC xmlns:dt="urn:schemas-microsoft-com:datatypes" dt:dt="bin.base64">
    <!-- base64/PKCS7 encoded GMC chain -->
  </GMC>
</PEERGROUPCONFIG>
```

После получения конфигурации группы в виде XML-строки эту группу можно импортировать, вызвав [**пирграупимпортконфиг**](/windows/desktop/api/P2P/nf-p2p-peergroupimportconfig) с XML-строкой конфигурации и заданным паролем для [**пирграупекспортконфиг**](/windows/desktop/api/P2P/nf-p2p-peergroupexportconfig). Эта функция возвращает имя удостоверения и имя однорангового узла, которые затем можно передать в [**пирграупопен**](/windows/desktop/api/P2P/nf-p2p-peergroupopen) и соединение с установленной группой.

 

 



