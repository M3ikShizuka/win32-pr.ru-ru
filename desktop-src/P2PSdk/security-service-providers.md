---
description: Интерфейс поставщика услуг безопасности (SSPI) предоставляет универсальный промышленно-стандартный интерфейс для защищенных распределенных приложений.
ms.assetid: c3cebb9d-9094-493f-96d3-763a0c282dfb
title: Поставщики услуг безопасности
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2121940337d0f4e06c53981cf30f0125180c466
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127461614"
---
# <a name="security-service-providers"></a>Поставщики услуг безопасности

Интерфейс поставщика услуг безопасности (SSPI) предоставляет универсальный промышленно-стандартный интерфейс для защищенных распределенных приложений. API-интерфейс одноранговых диаграмм предоставляет приложениям возможность защиты ссылок в графе путем указания поставщика службы безопасности (SSP), который является библиотекой DLL, реализующей интерфейс SSPI. Приложение указывает SSP при создании графа с помощью [**пирграфкреате**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).

Дополнительные сведения о создании собственного поставщика общих служб см. в справочной документации по SSPI в списке [справочников по графике](graphing-reference-links.md).

## <a name="programming-considerations-for-implementing-an-ssp"></a>Рекомендации по программированию для реализации поставщика общих служб

Будьте внимательны при вызове приложения из поставщика общих служб. Следующие рекомендации относятся к обратным вызовам SSP:

-   Возвращаемые обратные вызовы не должны занимать много времени, так как они вызываются во время согласования соединения. Если соединение установлено слишком долго, соединение может быть удалено.
-   API одноранговых диаграмм динамически корректирует значения времени ожидания соединения в зависимости от фактической нагрузки системы. Наименьшее значение времени ожидания — 20 секунд.
-   Чтобы избежать потенциальных ситуаций взаимоблокировки, приложение не должно получать доступ к базе данных одноранговых диаграмм из обратного вызова. Если приложению требуются сведения из базы данных Graph, приложение может кэшировать необходимую информацию, а затем ссылаться на кэш из обратного вызова. Кэширование также может помочь уменьшить время подключения.

При вызове точек входа SSPI Инфраструктура одноранговых диаграмм требует определенные значения для конкретных параметров пяти (5) функций. Вы не можете изменить эти значения параметров для SSP, и поставщик общих служб может либо проигнорировать значения для этих пяти параметров, либо правильно обработать их. В следующем списке указаны указанные параметры и необходимые значения.

-   [**AcquireCredentialsHandle**](graphing-reference-links.md)

    Укажите один (1) для параметра *пвжеткэйаргумент* . Указывает **значение NULL** для параметров *псзпринЦипал*, *пвлогонид* и *пжеткэйфн* .

-   [**InitializeSecurityContext**](graphing-reference-links.md)

    Укажите следующие флаги для параметра *фконтекстрек* : **ISC \_ req \_ взаимная \_ Проверка подлинности \| ISC \_ Заявка для \_ конфиденциальной \| \_ \_ \| \_ \_ \_ \| \_ \_ \| \_ \_ \_** информации ISC req Integrity

-   [**AcceptSecurityContext**](graphing-reference-links.md)

    Укажите следующие флаги для параметра *фконтекстрек* : **ASC \_ req \_ взаимная \_ Проверка подлинности ASC req \| \_ \_ \| \_ Integrity ASC требования \_ целостность \| ASC req. \_ \_ \_ определение \| ASC \_ req \_ Stream \| ASC \_ требования \_ выделить \_ память**.

-   [**енкриптмессаже**](graphing-reference-links.md)

    Укажите ноль (0) для параметров *фкоп* и *мессажесекно* .

-   [**декриптмессаже**](graphing-reference-links.md)

    Укажите ноль (0) для параметра *мессажесекно* и **значение NULL** для параметра *пфкоп* .

При вызове [**енкриптмессаже**](graphing-reference-links.md)в структуру **секбуффердеск** передается четыре буфера. В следующей таблице указывается порядок передачи буферов.

| Структура, относящаяся к поставщику общих служб         | Описание                                                                                                                                                                                                       |
|--------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **\_заголовок потока \_ pvbuffer**  | Содержит данные заголовка безопасности. Размер буфера заголовков получается путем вызова [**QueryContextAttributes**](graphing-reference-links.md) и указания атрибута **\_ \_ \_ Размер потока SECPKG attr** .  |
| **\_данные pvbuffer**            | Содержит обычное текстовое сообщение для шифрования.                                                                                                                                                                  |
| **\_трейлер потока \_ pvbuffer** | Содержит данные трейлеров безопасности. Размер буфера заголовков получается путем вызова [**QueryContextAttributes**](graphing-reference-links.md) и указания атрибута **\_ \_ \_ Размер потока SECPKG attr** . |
| **PVBUFFER \_ пусто**           | Не инициализировано. Размер этого буфера равен нулю (0).                                                                                                                                                             |



 

При вызове [**декриптмессаже**](graphing-reference-links.md)API-интерфейс одноранговых диаграмм передает ровно четыре структуры **pvbuffer** . Первый буфер **pvbuffer \_ данные** и содержит зашифрованное сообщение. Оставшиеся буферы используются для вывода и имеют тип **pvbuffer \_ Empty**.

Поставщику общих служб требуется поддержка шифрования и расшифровки пользовательских буферов данных размером 16 КБ и выше в одном вызове.

 

 



