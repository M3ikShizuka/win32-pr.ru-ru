---
description: Протокол PNRP использует функцию Всанспиоктл для получения уведомлений об изменениях следующего.
ms.assetid: e5509be1-5294-4696-ab5b-fa2217ae0956
title: PNRP и Всанспиоктл
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c2cc07415fb483e75af8d836274d45a2c53f205e3aae15f893f909d2363c0d15
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119553314"
---
# <a name="pnrp-and-wsanspioctl"></a>PNRP и Всанспиоктл

PNRP использует функцию [**всанспиоктл**](winsock-nsp-reference-links.md) для получения уведомлений об изменениях следующих:

-   Список сетевых облаков
-   Доступность результатов запроса разрешения имен

Первый вызов [**всалукупсервицебегин**](winsock-nsp-reference-links.md) определяет тип информации, о которой уведомляется клиент. клиент может получать уведомления с помощью Windows сообщения, подпрограммы завершения, обработчика для объекта всаевент или порта. Дополнительные сведения о параметрах и настройке параметра *лпкомплетион* см. в разделе **всанспиоктл**.

Чтобы продолжить получать уведомления после вызова [**всалукупсервиценекст**](winsock-nsp-reference-links.md), приложение должно вызвать **всанспиоктл** еще раз.

Функция [**всалукупсервиценекст**](winsock-nsp-reference-links.md) блокируется, даже если вызывается **всанспиоктл** . Перед вызовом **всалукупсервиценекст** приложение должно подождать, пока оно не получит уведомление, если блокировка является проблемой.

При вызове этой функции параметры должны иметь следующие значения:

<dl> <dt>

<span id="hLookup"></span><span id="hlookup"></span><span id="HLOOKUP"></span>*Функции*
</dt> <dd>

Указывает маркер, возвращаемый [**всалукупсервицебегин**](winsock-nsp-reference-links.md) .

</dd> <dt>

<span id="dwControlCode"></span><span id="dwcontrolcode"></span><span id="DWCONTROLCODE"></span>*двконтролкоде*
</dt> <dd>

Должен быть **\_ NSP \_ уведомления о \_ смене SIO**.

</dd> <dt>

<span id="lpvInBuffer"></span><span id="lpvinbuffer"></span><span id="LPVINBUFFER"></span>*лпвинбуффер*
</dt> <dd>

Должен иметь **значение NULL**.

</dd> <dt>

<span id="cbInBuffer"></span><span id="cbinbuffer"></span><span id="CBINBUFFER"></span>*кбинбуффер*
</dt> <dd>

Должен быть равен нулю (0).

</dd> <dt>

<span id="lpvOutBuffer"></span><span id="lpvoutbuffer"></span><span id="LPVOUTBUFFER"></span>*лпваутбуффер*
</dt> <dd>

Должен иметь **значение NULL**.

</dd> <dt>

<span id="cbOutBuffer"></span><span id="cboutbuffer"></span><span id="CBOUTBUFFER"></span>*кбаутбуффер*
</dt> <dd>

Должен быть равен нулю (0).

</dd> <dt>

<span id="lpcbBytesReturned"></span><span id="lpcbbytesreturned"></span><span id="LPCBBYTESRETURNED"></span>*лпкббитесретурнед*
</dt> <dd>

Должен иметь **значение NULL**.

</dd> <dt>

<span id="lpCompletion"></span><span id="lpcompletion"></span><span id="LPCOMPLETION"></span>*лпкомплетион*
</dt> <dd>

Указывает либо **значение NULL** , либо указатель на структуру [**всакомплетион**](winsock-nsp-reference-links.md) .

</dd> </dl>

После получения уведомления вызовите [**всалукупсервиценекст**](winsock-nsp-reference-links.md) один раз, чтобы получить результаты.

Чтобы завершить поиск, вызовите [**всалукупсервицеенд**](winsock-nsp-reference-links.md).

## <a name="resolution-notifications"></a>Уведомления о разрешении

Клиент может получать уведомления каждый раз, когда добавляется запись разрешения имен. Затем клиент вызывает [**всалукупсервиценекст**](winsock-nsp-reference-links.md) для получения данных о разрешении.

Если клиент не использует этот метод, вызов [**всалукупсервиценекст**](winsock-nsp-reference-links.md) можно заблокировать до наступления указанного времени ожидания.

## <a name="cloud-list-notifications"></a>Уведомления в облачном списке

Клиент может получать уведомления каждый раз, когда имеется изменение в наборе облаков.

Функция [**всалукупсервиценекст**](winsock-nsp-reference-links.md) возвращает **WSA \_ E \_ \_** в качестве разделителя множеств. Клиентское приложение должно перечислить существующие облака до тех пор, пока не будет возвращено это сообщение, а затем использовать схему уведомлений для получения последующих изменений по мере их появления. Клиентское приложение также может вызывать **всалукупсервиценекст**, но вызов блокируется до тех пор, пока не произойдет изменение.

Функция [**всалукупсервиценекст**](winsock-nsp-reference-links.md) возвращает облако в структуре **всакуерисет** . В элементе **дваутпутфлагс** возвращается один из следующих флагов.



| Значение               | Описание                                             |
|---------------------|---------------------------------------------------------|
| Результат \_ \_ добавлен   | Добавляется возвращаемое облако.                    |
| Результат \_ \_ изменен | Возвращаемое облако изменилось.                  |
| Результат \_ \_ удален | Возвращенное облако удалено и является недопустимым. |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[PNRP и Всалукупсервицебегин](pnrp-and-wsalookupservicebegin.md)
</dt> <dt>

[PNRP и Всалукупсервицеенд](pnrp-and-wsalookupserviceend.md)
</dt> <dt>

[PNRP и ВСАКУЕРИСЕТ](pnrp-and-wsaqueryset.md)
</dt> <dt>

[Коды ошибок PNRP NSP](pnrp-nsp-error-codes.md)
</dt> <dt>

[**всанспиоктл**](winsock-nsp-reference-links.md)
</dt> <dt>

**всалукупсервицебегин**
</dt> <dt>

**всалукупсервицеенд**
</dt> <dt>

**всакуерисет**
</dt> </dl>

 

 



