---
title: Разделы реестра и записи для Интернет-магазина типа 1
description: Разделы реестра и записи для Интернет-магазина типа 1
ms.assetid: cf25a004-e0c3-407c-8704-54be3601528b
keywords:
- Интернет-магазины проигрывателя Windows Media в Интернете, реестр
- Интернет-магазины, реестр
- Тип 1 Интернет-магазины, реестр
- реестр, тип 1 Интернет-магазины
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1329ad69e91ebce41b258d1e148403f62caceb96
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2020
ms.locfileid: "105681586"
---
# <a name="registry-keys-and-entries-for-a-type-1-online-store"></a>Разделы реестра и записи для Интернет-магазина типа 1

Чтобы сделать Интернет-магазин типа 1 доступным в проигрывателе Windows Media, поставщик Интернет-магазина должен создать следующие подразделы и записи реестра на компьютере пользователя.


```C++
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MediaPlayer\Subscriptions\keyName]
"Capabilities"=dword:flags
"SubscriptionObjectGUID"=clsid
"FriendlyName"=friendlyName

[HKEY_CLASSES_ROOT\AppID\appid]
@=pluginName
"DllSurrogate"=""

[HKEY_CLASSES_ROOT\CLSID\clsid]
@=className
"AppID"="appid"

[HKEY_CLASSES_ROOT\CLSID\clsid\InprocServer32]
@=moduleName
"ThreadingModel"="threading"
```



> [!Note]  
> Установка значения Дллсуррогате в пустую строку указывает, что среда выполнения COM загрузит подключаемый модуль интернет-магазина в суррогатную библиотеку DLL по умолчанию dllhost.exe.

 

В предыдущем синтаксисе реестра символы курсивом являются заполнителями для имен и глобально уникальных идентификаторов (GUID), характерных для Интернет-магазина. В следующей таблице описаны эти заполнители.



| Заполнитель    | Описание                                                                                                                                                                                                                                                                                                                     |
|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| *keyName*      | Строка, согласованная между корпорацией Майкрософт и Интернет-магазином. Эта строка уникально идентифицирует Интернет-магазин. Пример: "Proseware"<br/>                                                                                                                                                                                   |
| *flags*        | Побитовое **или** для одного или нескольких флагов возможностей подключаемых модулей. Эти флаги определяют, должен ли проигрыватель Windows Media вызывать определенные методы [ивмпконтентпартнер](/previous-versions/windows/desktop/api/contentpartner/nn-contentpartner-iwmpcontentpartner). Дополнительные сведения о поддерживаемых флагах см. в таблице флагов возможностей подключаемых модулей, которые следуют за этой таблицей. Пример: 00000058<br/> |
| *этому*        | Идентификатор GUID, который является идентификатором класса (CLSID) для класса, реализующего **ивмпконтентпартнер** в подключаемом модуле Интернет-магазина. Этот GUID должен быть в формате реестра, заполненном фигурными скобками. Формат: {XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}<br/>                                                                  |
| *FriendlyName* | Понятное имя Интернет-магазина. Пример: "Proseware Music Service"<br/>                                                                                                                                                                                                                                              |
| *appid*        | Идентификатор GUID, который является идентификатором приложения (AppID) для подключаемого модуля интернет-магазина. Этот GUID должен быть в формате реестра, заполненном фигурными скобками. Формат: {XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}<br/>                                                                                                                |
| *pluginName*   | Имя подключаемого модуля интернет-магазина. Пример: "подключаемый модуль партнера по содержимому Proseware"<br/>                                                                                                                                                                                                                                   |
| *className*    | Имя класса, реализующего **ивмпконтентпартнер** в подключаемом модуле Интернет-магазина. Пример: "Кпросеварепартнер"<br/>                                                                                                                                                                                              |
| *moduleName*   | Полный путь к библиотеке DLL, которая реализует подключаемый модуль интернет-магазина. Пример: "C: \\ Program Files \\ Proseware \\ProsewarePartner.dll"<br/>                                                                                                                                                                         |
| *Threading*    | Тип подразделения, в котором выполняется подключаемый модуль. "ThreadingModel" = "апартамент" указывает, что подключаемый модуль запускается в однопотоковом подразделении (STA). "ThreadingModel" = "Free" указывает, что подключаемый модуль запускается в многопоточном апартаменте (MTA).                                                                                     |



 

В следующей таблице описаны флаги возможностей подключаемых модулей.



| Флаг                                    | Значение | Описание                                                                                                                                                                                                                                                                 |
|-----------------------------------------|-------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_баккграундпроцессинг ограничения \_ подписки | 0x8   | Проигрыватель Windows Media должен вызвать [ивмпконтентпартнер:: notify](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartner-notify) , чтобы сообщить подключаемому модулю о необходимости запуска и прекращения фоновой обработки.                                                                                                     |
| \_девицеаваилабле ограничения \_ подписки      | 0x10  | Проигрыватель Windows Media должен вызывать [ивмпконтентпартнер:: упдатедевице](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartner-updatedevice).                                                                                                                                                                   |
| \_ограничение подписки \_ — \_ контентпартнер   | 0x40  | Информирует проигрыватель Windows Media, что подключаемый модуль реализует интерфейс **ивмпконтентпартнер** . Все подключаемые модули Интернет-магазина типа 1 должны устанавливать этот флаг.                                                                                                                         |
| \_алтлогин ограничения \_ подписки             | 0x80  | Информирует проигрыватель Windows Media, что подключаемый модуль поддерживает альтернативное имя входа. Если подключаемый модуль поддерживает альтернативное имя входа, проигрыватель Windows Media Получает альтернативный URL-адрес и заголовок для входа путем вызова [ивмпконтентпартнер:: GetItemInfo](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartner-getiteminfo). |



 

**Записи реестра для разработки и тестирования**

После начала разработки Интернет-магазина Корпорация Майкрософт предоставляет два ключа: тестовый ключ и рабочий ключ. На этапе разработки и тестирования Интернет-магазин будет отображаться в проигрывателе Windows Media только в том случае, если ваш тестовый ключ или рабочий ключ находится в реестре на компьютере пользователя. Дополнительные сведения о тестовых и производственных ключах см. в статье [ключи тестирования и производства для Интернет-магазина типа 1](test-and-production-keys-for-a-type-1-online-store.md).

Поместите свой тестовый или рабочий ключ в следующее место в реестре.


```C++
[HKEY_CURRENT_USER\Software\Microsoft\MediaPlayer\Services]
"TestParameter" = "key1;key2;...;keyN"
```



Обратите внимание, что значение записи реестра Тестпараметер может указывать несколько тестовых или рабочих ключей. Например, предположим, что у Proseware есть тестовый ключ "1234", а Contoso — тестовый ключ "2345". Следующая запись реестра указывает, что хранилища тестов для Proseware и Contoso будут отображаться в проигрывателе Windows Media.


```C++
[HKEY_CURRENT_USER\Software\Microsoft\MediaPlayer\Services]
"TestParameter" = "1234;2345"
```



**Запись реестра Активесервице**

Когда пользователь активирует Интернет-магазин, проигрыватель Windows Media записывает в реестр сведения, определяющие активное Интернет-магазин. Проигрыватель Windows Media помещает сведения в следующем расположении в реестре на компьютере пользователя.


```C++
[HKEY_CURRENT_USER\Software\Microsoft\MediaPlayer\Subscriptions]
"ActiveService"=serviceInfo
```



В приведенном выше синтаксисе реестра *serviceInfo* — это заполнитель для строки, содержащей описательные сведения об активном Интернет-магазине.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Справочные материалы по интернет-магазинам типа 1**](reference-for-type-1-online-stores.md)
</dt> </dl>

 

 





