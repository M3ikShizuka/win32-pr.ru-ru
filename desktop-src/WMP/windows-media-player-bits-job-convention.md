---
title: Соглашение о задании BITS проигрывателя Windows Media
description: Проигрыватель Windows Media может автоматически скачивать и добавлять цифровые мультимедийные элементы в библиотеку, если используется фоновая интеллектуальная служба передачи (BITS).
ms.assetid: 643faba7-9af2-4292-8d92-e321d7690a5b
keywords:
- Интернет-магазины проигрывателя Windows Media, фоновая интеллектуальная служба передачи (BITS)
- Интернет-магазины, фоновая интеллектуальная служба передачи (BITS)
- Тип 2 Интернет-магазинов, фоновая интеллектуальная служба передачи (BITS)
- Фоновая интеллектуальная служба передачи (BITS)
- БИТ (фоновая интеллектуальная служба передачи)
- Интернет-магазины проигрывателя Windows Media, соглашение о заданиях BITS
- Интернет-магазины, соглашение о заданиях BITS
- Тип 2 Интернет-магазинов, соглашение о задании BITS
- Соглашение о задании BITS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 85278593ce151f46370ca491ccac8e1645f9bb70
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104260977"
---
# <a name="windows-media-player-bits-job-convention"></a>Соглашение о задании BITS проигрывателя Windows Media

Проигрыватель Windows Media может автоматически скачивать и добавлять цифровые мультимедийные элементы в библиотеку, если используется [Фоновая интеллектуальная служба передачи (BITS)](/windows/desktop/Bits/background-intelligent-transfer-service-portal). Чтобы воспользоваться этой функцией, необходимо добавить задание в очередь передачи BITS и вызвать **использованием метода ibackgroundcopyjob:: SetDescription**, указав строку описания, которая использует правильный формат.

> [!Note]  
> В этом разделе описываются функции, предназначенные для использования в Интернет-магазинах. Использование этой функции вне контекста Интернет-магазина не поддерживается.

 

## <a name="syntax"></a>Синтаксис

``` syntax
::WMP_JOB:1:serviceId:Provider:AlbumArtist:AlbumTitle:TrackNumber:Title:Duration:Rating
```

## <a name="parameters"></a>Параметры

<dl> <dt>

<span id="serviceId"></span><span id="serviceid"></span><span id="SERVICEID"></span>*serviceId*
</dt> <dd>

Генерируемое случайным образом 32-разрядное значение, используемое проигрывателем Windows Media для обнаружения службы.

</dd> <dt>

<span id="Provider"></span><span id="provider"></span><span id="PROVIDER"></span>*Поставщики*
</dt> <dd>

Имя поставщика. Это значение должно совпадать с допустимым именем ключа Интернет-магазина.

</dd> <dt>

<span id="AlbumArtist"></span><span id="albumartist"></span><span id="ALBUMARTIST"></span>*албумартист*
</dt> <dd>

Имя основного исполнителя для альбома.

</dd> <dt>

<span id="AlbumTitle"></span><span id="albumtitle"></span><span id="ALBUMTITLE"></span>*албумтитле*
</dt> <dd>

Название альбома.

</dd> <dt>

<span id="TrackNumber"></span><span id="tracknumber"></span><span id="TRACKNUMBER"></span>*траккнумбер*
</dt> <dd>

Номер записи компакт-диска.

</dd> <dt>

<span id="Title"></span><span id="title"></span><span id="TITLE"></span>*Титуль*
</dt> <dd>

Заголовок содержимого.

</dd> <dt>

<span id="Duration"></span><span id="duration"></span><span id="DURATION"></span>*Длитель*
</dt> <dd>

Длительность содержимого.

</dd> <dt>

<span id="Rating"></span><span id="rating"></span><span id="RATING"></span>*Звездочк*
</dt> <dd>

Оценка содержимого.

</dd> </dl>

## <a name="remarks"></a>Комментарии

Когда проигрыватель Windows Media 10 или более поздней версии использует BITS для загрузки содержимого, он перечисляет задания в очереди передачи и проверяет строку описания для каждого задания. Если строка описания соответствует ожидаемому соглашению, проигрыватель Windows Media загрузит содержимое.

Необходимо добавить только один файл цифрового мультимедиа для скачивания в каждое задание BITS.

После запуска задания BITS с использованием этого соглашения необходимо разрешить проигрывателю Windows Media завершить задание. Проигрыватель Windows Media также удалит задание из очереди BITS, переместит скачанный файл в расположение, где сохраняется музыкальная музыка, и добавит скачанный файл в библиотеку.

Параметр *serviceId* должен содержать ненулевое 32-разрядное значение. Для создания этого значения рекомендуется использовать функцию [**CryptGenRandom**](/windows/desktop/api/wincrypt/nf-wincrypt-cryptgenrandom) .

Имя файла, указанное с помощью параметра *LocalName* **использованием метода ibackgroundcopyjob:: AddFile** , должно иметь расширение. WMA,. WMV,. mp3 или. ASF.

Остальные параметры предназначены для хранения значений метаданных, связанных с содержимым. Эти значения можно получить на веб-странице Интернет-магазина с помощью **довнлоадитем. getItemInfo**. Правильную коллекцию загрузки можно получить, вызвав **довнлоадманажер. жетдовнлоадколлектион** и указав *serviceId* в качестве параметра *CollectionID* .

Проигрыватель Windows Media периодически проверяет очередь BITS во время работы проигрывателя. Чтобы проигрыватель Windows Media проверял очередь BITS для заданий скачивания, необходимо создать значение в следующем подразделе реестра:

**HKEY \_ текущее \_ пользовательское \\ программное обеспечение \\ \\ службы Microsoft MediaPlayer \\**

Значение должно быть создано следующим образом.



| Имя                | Тип      | Описание                                                                                                                                                                                                          |
|---------------------|-----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **рефрешдовнлоад** | **DWORD** | Указывает, должен ли проигрыватель Windows Media проверять очередь BITS для загрузки заданий. Если значение равно нулю, проигрыватель не будет проверять очередь BITS. Проигрыватель должен проверить очередь, если значение не равно нулю. |



 

Можно использовать следующий альтернативный синтаксис для добавления заданий BITS, которые не удается завершить проигрывателем Windows Media, но для которого он просто отображает сведения о состоянии:

``` syntax
::WMP_STATUS:1:serviceId:Provider:AlbumArtist:AlbumTitle:TrackNumber:Title:Duration:Rating
```

При использовании предыдущего синтаксиса необходимо написать код для завершения загрузки BITS, организации содержимого на компьютере пользователя и добавления содержимого в библиотеку при необходимости.

## <a name="related-topics"></a>См. также

<dl> <dt>

[CryptGenRandom](/windows/desktop/api/wincrypt/nf-wincrypt-cryptgenrandom)
</dt> <dt>

[**Довнлоадитем. getItemInfo**](downloaditem-getiteminfo.md)
</dt> <dt>

[**Довнлоадманажер. Жетдовнлоадколлектион**](downloadmanager-getdownloadcollection.md)
</dt> <dt>

[**Справочные материалы по интернет-магазинам типа 2**](reference-for-type-2-online-stores.md)
</dt> </dl>

 

 