---
title: проигрыватель Windows Media Соглашение о задании BITS
description: проигрыватель Windows Media может автоматически скачивать и добавлять цифровые мультимедийные элементы в библиотеку, если используется фоновая интеллектуальная служба передачи (BITS).
ms.assetid: 643faba7-9af2-4292-8d92-e321d7690a5b
keywords:
- проигрыватель Windows Media интернет-магазинов, фоновая интеллектуальная служба передачи (BITS)
- Интернет-магазины, фоновая интеллектуальная служба передачи (BITS)
- Тип 2 Интернет-магазинов, фоновая интеллектуальная служба передачи (BITS)
- Фоновая интеллектуальная служба передачи (BITS)
- БИТ (фоновая интеллектуальная служба передачи)
- проигрыватель Windows Media интернет-магазинов, соглашение о заданиях BITS
- Интернет-магазины, соглашение о заданиях BITS
- Тип 2 Интернет-магазинов, соглашение о задании BITS
- Соглашение о задании BITS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 85278593ce151f46370ca491ccac8e1645f9bb70
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127066644"
---
# <a name="windows-media-player-bits-job-convention"></a>проигрыватель Windows Media Соглашение о задании BITS

проигрыватель Windows Media может автоматически скачивать и добавлять цифровые мультимедийные элементы в библиотеку, если используется [фоновая интеллектуальная служба передачи (BITS)](/windows/desktop/Bits/background-intelligent-transfer-service-portal). Чтобы воспользоваться этой функцией, необходимо добавить задание в очередь передачи BITS и вызвать **использованием метода ibackgroundcopyjob:: SetDescription**, указав строку описания, которая использует правильный формат.

> [!Note]  
> В этом разделе описываются функции, предназначенные для использования в Интернет-магазинах. Использование этой функции вне контекста Интернет-магазина не поддерживается.

 

## <a name="syntax"></a>Синтаксис

``` syntax
::WMP_JOB:1:serviceId:Provider:AlbumArtist:AlbumTitle:TrackNumber:Title:Duration:Rating
```

## <a name="parameters"></a>Параметры

<dl> <dt>

<span id="serviceId"></span><span id="serviceid"></span><span id="SERVICEID"></span>*serviceId*
</dt> <dd>

генерируемое случайным образом 32-разрядное значение, которое проигрыватель Windows Media использует для обнаружения службы.

</dd> <dt>

<span id="Provider"></span><span id="provider"></span><span id="PROVIDER"></span>*Поставщики*
</dt> <dd>

Имя поставщика. Это значение должно совпадать с допустимым именем ключа Интернет-магазина.

</dd> <dt>

<span id="AlbumArtist"></span><span id="albumartist"></span><span id="ALBUMARTIST"></span>*албумартист*
</dt> <dd>

Имя основного исполнителя для альбома.

</dd> <dt>

<span id="AlbumTitle"></span><span id="albumtitle"></span><span id="ALBUMTITLE"></span>*албумтитле*
</dt> <dd>

Название альбома.

</dd> <dt>

<span id="TrackNumber"></span><span id="tracknumber"></span><span id="TRACKNUMBER"></span>*траккнумбер*
</dt> <dd>

Номер записи компакт-диска.

</dd> <dt>

<span id="Title"></span><span id="title"></span><span id="TITLE"></span>*Титуль*
</dt> <dd>

Заголовок содержимого.

</dd> <dt>

<span id="Duration"></span><span id="duration"></span><span id="DURATION"></span>*Длитель*
</dt> <dd>

Длительность содержимого.

</dd> <dt>

<span id="Rating"></span><span id="rating"></span><span id="RATING"></span>*Звездочк*
</dt> <dd>

Оценка содержимого.

</dd> </dl>

## <a name="remarks"></a>Remarks

если проигрыватель Windows Media 10 или более поздней версии использует BITS для загрузки содержимого, он перечисляет задания в очереди передачи и проверяет строку описания для каждого задания. если строка описания соответствует ожидаемому соглашению, проигрыватель Windows Media скачивает содержимое.

Необходимо добавить только один файл цифрового мультимедиа для скачивания в каждое задание BITS.

после запуска задания BITS с использованием этого соглашения необходимо разрешить проигрыватель Windows Media завершить задание. проигрыватель Windows Media также удалит задание из очереди BITS, переместит скачанный файл в расположение, где сохраняется музыкальная музыка, и добавьте скачанный файл в библиотеку.

Параметр *serviceId* должен содержать ненулевое 32-разрядное значение. Для создания этого значения рекомендуется использовать функцию [**CryptGenRandom**](/windows/desktop/api/wincrypt/nf-wincrypt-cryptgenrandom) .

Имя файла, указанное с помощью параметра *LocalName* **использованием метода ibackgroundcopyjob:: AddFile** , должно иметь расширение wma, WMV, .mp3 или ASF.

Остальные параметры предназначены для хранения значений метаданных, связанных с содержимым. Эти значения можно получить на веб-странице Интернет-магазина с помощью **довнлоадитем. getItemInfo**. Правильную коллекцию загрузки можно получить, вызвав **довнлоадманажер. жетдовнлоадколлектион** и указав *serviceId* в качестве параметра *CollectionID* .

проигрыватель Windows Media периодически проверяет очередь BITS во время работы проигрывателя. чтобы убедиться, что проигрыватель Windows Media проверяет очередь BITS для загрузки заданий, необходимо создать значение в следующем подразделе реестра:

**HKEY \_ текущее \_ пользовательское \\ программное обеспечение \\ \\ службы Microsoft MediaPlayer \\**

Значение должно быть создано следующим образом.



| Имя                | Тип      | Описание                                                                                                                                                                                                          |
|---------------------|-----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **рефрешдовнлоад** | **DWORD** | указывает, следует ли проигрыватель Windows Media проверять очередь BITS для загрузки заданий. Если значение равно нулю, проигрыватель не будет проверять очередь BITS. Проигрыватель должен проверить очередь, если значение не равно нулю. |



 

вы можете использовать следующий альтернативный синтаксис для добавления заданий BITS, которые проигрыватель Windows Media не завершены, но для которых он просто отображает сведения о состоянии:

``` syntax
::WMP_STATUS:1:serviceId:Provider:AlbumArtist:AlbumTitle:TrackNumber:Title:Duration:Rating
```

При использовании предыдущего синтаксиса необходимо написать код для завершения загрузки BITS, организации содержимого на компьютере пользователя и добавления содержимого в библиотеку при необходимости.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[CryptGenRandom](/windows/desktop/api/wincrypt/nf-wincrypt-cryptgenrandom)
</dt> <dt>

[**Довнлоадитем. getItemInfo**](downloaditem-getiteminfo.md)
</dt> <dt>

[**Довнлоадманажер. Жетдовнлоадколлектион**](downloadmanager-getdownloadcollection.md)
</dt> <dt>

[**Справочные материалы по интернет-магазинам типа 2**](reference-for-type-2-online-stores.md)
</dt> </dl>

 

 