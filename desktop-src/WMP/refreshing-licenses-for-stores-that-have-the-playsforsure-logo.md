---
title: Обновление лицензий для магазинов, имеющих логотип Плайсфорсуре
description: Обновление лицензий для магазинов, имеющих логотип Плайсфорсуре
ms.assetid: d08d6b6e-937e-4dec-b7ca-376cdad069f9
keywords:
- Интернет-магазины проигрывателя Windows Media, обновление лицензий
- Интернет-магазины, обновление лицензий
- Интернет-магазины проигрывателя Windows Media, обновление лицензий
- Интернет-магазины, обновление лицензий
- Интернет-магазины проигрывателя Windows Media, логотип Плайсфорсуре
- Интернет-магазины, логотип Плайсфорсуре
- Обновление лицензий
- лицензии, обновление
- плайсфорсуре
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 42e48a3ddfd2b0670e3720f7c71587d0330a69a7
ms.sourcegitcommit: 3e70ae762629e244028b437420ed50b5850db4e3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/20/2020
ms.locfileid: "104133523"
---
# <a name="refreshing-licenses-for-stores-that-have-the-playsforsure-logo"></a>Обновление лицензий для магазинов, имеющих логотип Плайсфорсуре

Некоторые Интернет-Музыкальные магазины имеют логотип Плайсфорсуре, но не интегрированы с проигрывателем Windows Media 11. Эти магазины должны предоставить документ ServiceInfo и упрощенный компонент, чтобы проигрыватель Windows Media 11 мог получать и обновлять лицензии для их содержимого.

В следующем примере показано, как работает процесс обновления лицензий.

1.  Пользователь получает 50 музыкальных дорожек из Интернет-магазина proseware. Каждая запись — это файл с расширением WMA. Вместе с дорожками пользователь получает лицензии для воспроизведения дорожек.
2.  Пользователь копирует дорожки 50 на новый компьютер с установленным проигрывателем Windows Media 11 и добавляет записи в библиотеку проигрывателя Windows Media.
3.  Через некоторое время модуль обновления лицензий (ЛРМ), входящий в состав проигрывателя Windows Media 11, проверяет метаданные в 50 дорожек и определяет, что Proseware является поставщиком содержимого.
    > [!Note]  
    > Проигрыватель Windows Media может опознать поставщик содержимого, проверив атрибут **контентдистрибутор** в файле мультимедиа. Если Интернет-магазин с логотипом Плайсфорсуре предоставляет файл мультимедиа, который использует Windows Media Digital Rights Management (WMDRM), Интернет-магазин должен поместить атрибут **контентдистрибутор** в файл мультимедиа. Дополнительные сведения см. в разделе Добавление атрибута распространителя содержимого в пакет SDK проигрывателя Windows Media.

     

4.  ЛРМ ищет URL-адрес документа ServiceInfo Proseware, скачивает документ и проверяет элемент **Install** документа на получение URL-адреса пакета, который лрм может использовать для установки компонента proseware. ЛРМ устанавливает и загружает компонент.
5.  Для каждой из 50 дорожек ЛРМ вызывает метод [ивмпсубскриптионсервице:: алловплай](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowplay) компонента proseware. Метод **алловплай** помещает лицензию для отдельной записи на новом компьютере и возвращает **значение true** в параметре *пфалловплай* .
    > [!Note]  
    > Компонент Proseware должен предоставить все лицензии, необходимые для воспроизведения отдельной записи. То есть при необходимости компонент должен предоставить как корневую, так и конечную лицензию.

     

    При первом вызове метода **алловплай** компонент Proseware должен отобразить диалоговое окно, чтобы убедиться, что текущий пользователь имеет учетную запись Proseware и имеет право на воспроизведение этой записи. При последующих вызовах **алловплай** компонент может использовать учетные данные, полученные при первом вызове, чтобы убедиться, что пользователь имеет право воспроизводить оставшиеся дорожки.

Компонент, записываемый в Интернет-магазин, должен реализовать метод **алловплай** интерфейса **ивмпсубскриптионсервице** . Компонент должен возвращать E \_ нотимпл из каждого из трех других методов: **алловкдбурн**, **алловпдатрансфер** и **стартбаккграундпроцессинг**. Кроме того, компонент должен присвоить параметру реестра **capabilities** значение 1; то есть \_ \_ должен быть установлен флаг возможностей алловплай подписки, и все остальные флаги возможностей должны быть сняты. Дополнительные сведения о регистрации компонента см. в разделе [разделы реестра и записи для Интернет-магазина типа 2](registry-keys-and-entries-for-a-type-2-online-store.md).

Сведения о создании компонента, реализующего интерфейс **ивмпсубскриптионсервице** , см. в разделе [Создание подключаемого модуля для Интернет-магазина типа 2](building-the-plug-in-for-a-type-2-online-store.md).

Сведения о предоставлении корпорации Майкрософт документа ServiceInfo см. в статье отправка электронной почты группе виртуальных служб проигрывателя Windows Media. Адрес электронной почты группы: mpsvctm@microsoft.com .

Техническое руководство по использованию различных пакетов SDK для Windows Media для создания службы, предлагающей лицензированное цифровое содержимое, можно найти в [центре разработчиков Microsoft Windows Media Center](https://msdn.microsoft.com/windowsmedia/default.aspx) и выполнить поиск по запросу "Создание Интернет-магазина Windows Media 10 с подпиской".

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Документ ServiceInfo**](serviceinfo-document.md)
</dt> <dt>

[**Интернет-магазины проигрывателя Windows Media**](windows-media-player-online-stores.md)
</dt> </dl>

 

 




