---
title: Управление именем входа
description: Управление именем входа
ms.assetid: 5cafcd3a-e819-4524-b7a9-580ff36fc4f8
keywords:
- проигрыватель Windows Media интернет-магазинов, управление именами входа
- Интернет-магазины, Управление именами входа
- Тип 1 Интернет-магазины, Управление именами входа
- проигрыватель Windows Media интернет-магазинов, имен входа
- Интернет-магазины, имена входа
- Тип 1 Интернет-магазины, имена для входа
- проигрыватель Windows Media интернет-магазинов, стандартный процесс входа
- Интерактивные магазины, Стандартный процесс входа
- Тип 1 Интернет-магазины, Стандартный процесс входа
- проигрыватель Windows Media интернет-магазинов, процесс выхода
- Интернет-магазины, процесс выхода
- Тип 1 Интернет-магазины, процесс выхода
- Стандартный процесс входа
- процесс выхода
- имена входа
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 633042692ab9193f46ab83415df13237d3a279e8
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "126967550"
---
# <a name="managing-login"></a>Управление именем входа

проигрыватель Windows Media поддерживает различные методы входа пользователя в интернет-магазин типа 1. Проигрыватель предоставляет стандартное диалоговое окно входа, но Интернет-магазин может предоставить веб-страницу, которая служит альтернативой стандартному диалоговому окну.

пользователь может инициировать попытку входа, взаимодействуя с проигрыватель Windows Media пользовательским интерфейсом или путем взаимодействия со страницей обнаружения, предоставляемой интернет-магазином. Если пользователь инициирует попытку входа, взаимодействуя со страницей обнаружения, сценарий на странице обнаружения вызывает [внешний метод. аттемптлогин](external-attemptlogin.md) .

Состояние входа пользователя сохраняется в Интернет-магазине. при изменении состояния входа пользователя или при неудачной попытке входа в систему подключаемый модуль интернет-магазина оповещает проигрыватель Windows Media путем вызова [ивмпконтентпартнеркаллбакк:: Notify](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartnercallback-notify), передав вмпкнлогинстатечанже в параметре *типа* . Проигрыватель передает уведомление на страницу обнаружения, вызывая событие [External. онлогинчанже](external-onloginchange-event.md) .

Вызов **онлогинчанже** не обязательно означает, что состояние входа пользователя изменилось; Это может означать, что попытка входа завершилась ошибкой. Чтобы определить состояние входа пользователя, обработчик событий **онлогинчанже** может проверить свойство [External. усерлогжедин](external-userloggedin.md) .

В следующих разделах описывается стандартный процесс входа в систему, альтернативный процесс входа в систему и процесс выхода из нее.

## <a name="standard-log-in"></a>Стандартный вход

Стандартный процесс входа состоит из следующих этапов.

1.  пользователь инициирует попытку входа, взаимодействуя с проигрыватель Windows Media пользовательским интерфейсом или путем взаимодействия со страницей обнаружения.
2.  проигрыватель Windows Media отображается диалоговое окно, предлагающее пользователю ввести имя пользователя и пароль.
3.  когда пользователь нажимает кнопку " **вход** " в диалоговом окне, проигрыватель Windows Media вызывает [ивмпконтентпартнер:: Login](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartner-login), который реализуется подключаемым модулем интернет-магазина.
4.  Подключаемый модуль взаимодействует с Интернет-магазином и либо успешно, либо не может войти в систему пользователя.
5.  если вход в систему выполнен успешно, подключаемый модуль уведомляет проигрыватель Windows Media, вызывая метод **ивмпконтентпартнеркаллбакк:: Notify**, передающий вариант \_ TRUE в члене **булвал** параметра *пконтекст* . если попытка входа завершается неудачей, подключаемый модуль уведомляет проигрыватель Windows Media, вызывая **ивмпконтентпартнеркаллбакк:: Notify**, передавая 32-разрядное значение в члене **улвал** параметра *пконтекст* . Затем проигрыватель передает это 32-разрядное значение в [ивмпконтентпартнер:: GetItemInfo](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartner-getiteminfo) , чтобы получить URL-адрес веб-страницы, которая может справиться со сбоем.

## <a name="alternative-login"></a>Альтернативное имя для входа

если флаг подписки \_ \_ алтлогин установлен в записи реестра **Capabilities** для подключаемого модуля интернет-магазина, проигрыватель Windows Media не использует стандартное диалоговое окно входа. вместо этого проигрыватель Windows Media вызывает метод **ивмпконтентпартнер:: GetItemInfo** , чтобы получить URL-адрес веб-страницы, выполняющей процесс входа в систему. Дополнительные сведения о записи реестра **capabilities** см. в разделе [разделы реестра и записи для Интернет-магазина типа 1](registry-keys-and-entries-for-a-type-1-online-store.md).

Игрок вызывает **GetItemInfo** дважды: после передачи g \_ сзитеминфо \_ алтлогинурл для получения URL-адреса веб-страницы входа и после передачи g \_ сзитеминфо \_ алтлогинкаптион для получения заголовка окна, в котором размещена веб-страница. Когда **GetItemInfo** возвращает URL-адрес веб-страницы входа в систему, он может указать размер окна входа, добавив в URL-адрес следующую строку параметра:

? Длгкс =*ширина*&длги =*Высота*

В строке параметра *Width* и *Height* — ширина и высота окна в пикселях. Например, **GetItemInfo** может вернуть следующую строку, чтобы указать, что AltLogin.htm должны отображаться в окне с шириной 800 пикселей и высотой 400 пикселей.


```C++
https://proseware.com/AltLogin.htm?DlgX=800&DlgY=400
```



Альтернативный процесс входа состоит из следующих этапов.

1.  пользователь инициирует попытку входа, взаимодействуя с проигрыватель Windows Media пользовательским интерфейсом или путем взаимодействия со страницей обнаружения.
2.  проигрыватель Windows Media открывает модальное окно, в котором отображается веб-страница входа, предоставляемая интернет-магазином.
3.  Веб-страница взаимодействует с Интернет-магазином и либо завершается успешно, либо не может войти в систему пользователя.
4.  Если попытка входа завершается, веб-страница уведомляет подключаемый модуль интерактивного хранилища, вызывая [External. SendMessage](external-sendmessage.md), что приводит к вызову [Ивмпконтентпартнер:: SendMessage](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartner-sendmessage). Подключаемый модуль интернет-магазина определяет, что попытка входа прошла успешно, проверив параметры, переданные в **ивмпконтентпартнер:: SendMessage**. эти параметры не обрабатываются проигрыватель Windows Media; они имеют значение только в Интернет-магазине. Подключаемый модуль вызывает **ивмпконтентпартнеркаллбакк:: notify**, передавая вариант \_ true в члене **булвал** параметра *пконтекст* . В случае сбоя входа в Интернет-магазин должен определить, как помочь пользователю. Одна из возможных вариантов — отобразить новую веб-страницу в модальном окне, где размещена альтернативная веб-страница входа в систему.

## <a name="log-out"></a>Выйдите из системы.

Процесс выхода состоит из следующих шагов.

1.  пользователь инициирует попытку выхода из процесса, взаимодействуя с проигрыватель Windows Media пользовательским интерфейсом или путем взаимодействия со страницей обнаружения.
2.  проигрыватель Windows Media вызывает метод [ивмпконтентпартнер:: Logout](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartner-logout), который реализуется подключаемым модулем интернет-магазина.
3.  Подключаемый модуль взаимодействует с Интернет-магазином и либо завершается успешно, либо не может выполнить выход пользователя из системы.
4.  если попытки выхода из системы завершаются успешно, подключаемый модуль оповещает проигрыватель Windows Media, вызывая метод **ивмпконтентпартнеркаллбакк:: Notify**, передающий вариант \_ FALSE в члене **булвал** параметра *пконтекст* .

Если попытка входа или выхода выполнена успешно, подключаемый модуль интернет-магазина вызывает **ивмпконтентпартнеркаллбакк:: notify**, передав вмпкнлогинстатечанже в параметре *типа* . Подключаемый модуль использует параметр *пконтекст* для указания текущего состояния входа пользователя. Если подключаемый модуль устанавливает *пконтекст* -> **булвал** в вариант \_ true, пользователь входит в систему. Если подключаемый модуль устанавливает *пконтекст* -> **булвал** в вариант \_ false, пользователь выходит из системы. Обратите внимание, что *пконтекст* не указывает на успех или неудачу попытки; Вместо этого он указывает на текущее состояние входа пользователя.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**External. Аттемптлогин**](external-attemptlogin.md)
</dt> <dt>

[**Внешнее событие Онлогинчанже**](external-onloginchange-event.md)
</dt> <dt>

[**External. Усерлогжедин**](external-userloggedin.md)
</dt> <dt>

[**Ивмпконтентпартнер:: login**](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartner-login)
</dt> <dt>

[**Ивмпконтентпартнер:: Logout**](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartner-logout)
</dt> <dt>

[**Справка по программированию для Интернет-магазинов типа 1**](programming-guide-for-type-1-online-stores.md)
</dt> </dl>

 

 




