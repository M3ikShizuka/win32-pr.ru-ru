---
title: Приобретение мультимедийного содержимого
description: Приобретение мультимедийного содержимого
ms.assetid: df4a3152-f9e3-4a97-b021-6d5e8de9c184
keywords:
- Интернет-магазины проигрывателя Windows Media, приобретение мультимедийного содержимого
- Интернет-магазины, приобретение мультимедийного содержимого
- Тип 1 Интернет-магазины, приобретение мультимедийного содержимого
- Интернет-магазины проигрывателя Windows Media, покупки мультимедийного содержимого
- Интернет-магазины, покупки содержимого мультимедиа
- Тип 1 Интернет-магазины, покупки мультимедийного содержимого
- мультимедийное содержимое, приобретение
- приобретение мультимедийного содержимого
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e420f1dce607e1c596c48490d10bbe8a2a5a5f61
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2020
ms.locfileid: "103987177"
---
# <a name="purchasing-media-content"></a>Приобретение мультимедийного содержимого

Когда проигрыватель Windows Media отображает музыкальное содержимое в представлении дерева библиотеки, Пользовательский интерфейс включает элементы, которые пользователь может щелкнуть для приобретения содержимого. Например, пользователь может нажать кнопку, чтобы купить отдельную песню или купить весь альбом.

Если активный Интернет-магазин является магазином типа 1, проигрыватель Windows Media имеет доступ к дорожкам, альбомам и прейскурантам в каталоге интернет-магазина. Цены в каталоге представляют собой строки с форматом, понятным только в Интернет-магазине. Проигрыватель Windows Media не интерпретирует строки цен; они просто отображаются в элементах пользовательского интерфейса, таких как кнопки покупки.

Когда проигрыватель Windows Media настраивает покупку для набора элементов мультимедиа, он передает идентификаторы и цены элементов мультимедиа подключаемому модулю партнера по содержимому, вызывая [ивмпконтентпартнер:: канбуйсилент](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartner-canbuysilent). На этом этапе подключаемый модуль может проверять цены, предоставляемые проигрывателем. Это цены, которые пользователь должен оплатить. то есть цены, которые проигрыватель отображает пользователю. На основе идентификаторов носителей и цен, предоставляемых проигрывателем, подключаемый модуль вычисляет общую цену, которая возвращается проигрывателю в параметре *бстртоталприце* . Цены, которые проигрыватель передает в **канбуйсилент** , предоставляют подключаемый модуль с информацией, но они не отключают от подключаемого модуля возврата определенной общей цены. Подключаемый модуль может вычислить общую цену по мере ее погонки.

Помимо расчета общей цены покупки, **канбуйсилент** определяет, может ли пурчаце продолжать работу автоматически. то есть без отображения диалогового окна. Если **канбуйсилент** возвращает **true**, проигрыватель Windows Media просто изменяет текст на кнопке "Купить", чтобы пользователю было предложено подтвердить покупку. Если **канбуйсилент** возвращает **значение false**, проигрыватель Windows Media отображает диалоговое окно, предлагающее пользователю подтвердить покупку. Диалоговое окно предоставляет пользователю информацию, которая суммирует данные о приобретении, например число альбомов, число отдельных дорожек и общую цену (возвращенную подключаемым модулем).

После того как пользователь подтвердит покупку, игрок вызывает [ивмпконтентпартнер::](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartner-buy)Purchase. Этот вызов метода предоставляет подключаемый модуль с тем же списком контейнеров содержимого, что и **канбуйсилент**. При вызове функции " **купить**" проигрыватель Windows Media также предоставляет файл cookie (просто значение **DWORD** , уникальное для сеанса), который подключаемый модуль может использовать для распознавания транзакции. По завершении транзакции подключаемый модуль должен вызвать [ивмпконтентпартнеркаллбакк:: буйкомплете](/previous-versions/windows/desktop/api/contentpartner/nf-contentpartner-iwmpcontentpartnercallback-buycomplete), передав исходное значение файла cookie для параметра *двбуйкукие* , чтобы уведомить игрока о завершении транзакции.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Справка по программированию для Интернет-магазинов типа 1**](programming-guide-for-type-1-online-stores.md)
</dt> </dl>

 

 




