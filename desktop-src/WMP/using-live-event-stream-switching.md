---
title: Использование динамического переключения потока событий
description: Использование динамического переключения потока событий
ms.assetid: fa8af007-2db6-438f-9551-8e748bb79ef4
keywords:
- Списки воспроизведения метафайлов Windows Media, динамическое переключение потоков событий
- списки воспроизведения, динамическое переключение потоков событий
- списки воспроизведения метафайлов, динамическое переключение потоков событий
- Списки воспроизведения метафайлов Windows Media, переключение потока событий
- списки воспроизведения, переключение потоков событий
- списки воспроизведения метафайлов, переключение потоков событий
- Списки воспроизведения метафайлов Windows Media, вставка рекламы
- списки воспроизведения, вставка рекламы
- списки воспроизведения метафайлов, вставка рекламы
- Проигрыватель Windows Media, динамическое переключение потоков событий
- Проигрыватель Windows Media, переключение потока событий
- Проигрыватель Windows Media, вставка рекламы
- Динамическое переключение потоков событий
- Переключение потока событий
- Вставка рекламы
ms.topic: article
ms.date: 05/31/2018
topic_type:
- kbArticle
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: fd5c586e0f1ef2b36913dee822e461daeffbfcbf
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104252979"
---
# <a name="using-live-event-stream-switching"></a>Использование динамического переключения потока событий

Потоковая передача мультимедиа также может управляться путем взаимодействия команд сценариев, внедренных в поток мультимедиа, с элементами метафайлов Windows Media в списке воспроизведения метафайлов.

Событие — это конкретный тип команды сценария, внедренной в поток мультимедиа или файл мультимедиа. Когда элемент управления проигрывателя Windows Media получает команду сценария, он обрабатывает событие, как определено элементом **event** в списке воспроизведения метафайла. Проигрыватель Windows Media переключается из текущего потока, который подготавливается к просмотру, и визуализирует содержимое, на которое ссылается элемент **события** списка воспроизведения метафайлов. Элемент **event** обычно используется в реальном производстве.

Элемент **события** похож на элемент **entry** , но каждый из них обрабатывает воспроизведение потоков и файлов мультимедиа по-разному. Элемент **entry** используется для создания списков воспроизведения. Поток или файл мультимедиа, на который ссылается элемент **entry** , начинает воспроизводиться, когда завершается поток или файл мультимедиа, на который ссылается Предыдущая **запись** . Поток, на который ссылается **событие** , играет роль только при получении определенной команды сценария. Например, когда проигрыватель Windows Media получает команду сценария со строкой типа "EVENT" и командную строку "Адлинк", она ищет в списке воспроизведения следующие элементы.


```XML
<EVENT NAME="Adlink" WHENDONE="RESUME"> 
    <ENTRY HREF=mms://www.proseware.com/adlink.wma />
</EVENT>

```



Проигрыватель Windows Media переключается из активного потока для воспроизведения потока или файла мультимедиа, содержащегося в **событии**, в данном случае адлинк. WMA. Код `WHENDONE="RESUME"` указывает проигрывателю Windows Media возобновить воспроизведение предыдущего потока при завершении адлинк. WMA.

> [!Note]  
> Сбой при обработке каждого события, внедренного в поток мультимедиа или файл мультимедиа, может привести к непредвиденным результатам.

 

Если вы хотите использовать динамическое переключение потока событий, необходимо включить один элемент **события** в список воспроизведения, чтобы обрабатывалась каждая команда сценария события, встроенная в мультимедийные потоки или файлы мультимедиа в списке воспроизведения. Перед созданием списка воспроизведения необходимо ознакомиться с подробными сведениями о том, какие команды сценария внедряются в мультимедийное содержимое. Если имеется команда скрипта событий, которую проигрыватель Windows Media будет игнорировать, включите элемент **события** в список воспроизведения для обработки события, но сослаться на фиктивный URL-адрес в обработчике событий.

## <a name="ad-insertion"></a>Вставка рекламы

Этот метод можно использовать для вставки рекламы. Например, во время интерактивного Интернет-вещания шариковой игры можно отправить команду в начале каждого коммерческого перерыва, который указывает каждому клиенту (проигрывателю Windows Media), что требуется воспроизвести коммерческие списки в списке воспроизведения. Когда клиенты завершат воспроизведение коммерческих презентаций, список воспроизведения дает каждому клиенту возможность вернуться в вещание. Содержимое носителя **событий** будет отображаться только в том случае, если доступ к потоковой передаче мультимедиа рассылается в виде внедренных сценариев с соответствующим именем **события** .

Возможности, характерные для переключения **событий** , наилучшим образом приводятся в пользу, чтобы сравнить, как рекламные материалы достигают посетителей через стандартную, беспроводную трансляцию с тем, как рекламные материалы могут достичь посетителей с помощью технологий Windows Media. Исторически рекламные объявления могли бы приблизительно быть нацелены на средства просмотра, используя данные рейтинга в качестве основных критериев. Реклама, отправленная с помощью технологий Windows Media, может быть нацелена непосредственно на целевой пользователь, так как **события** и списки воспроизведения можно создавать на лету на основе вводимых пользователем данных. Дополнительные сведения см. в разделе [Персонализация доставки мультимедиа](personalizing-media-delivery.md).

Вы также можете использовать списки воспроизведения метафайлов для показа специальной графики, аудио и текста для рекламы. Элемент **баннера** можно использовать как дочерний элемент **события** для отображения изображения рекламного сообщения. Элемент **баннера** предоставляет путь и файл, содержащий рисунки для баннера. Можно также указать ссылку на сайт или файл с помощью дочернего элемента **мореинфо** . URL-адрес в элементе **мореинфо** может предоставить ссылку на еще больше объявлений в Интернете. В следующем примере демонстрируется использование этих элементов.

Пример кода


```XML
<BANNER HREF="SomePath\2.gif">
    <ABSTRACT>Read This Ad and Buy.</ABSTRACT>
    <MOREINFO HREF="https://www.proseware.com" />
</BANNER>

```



В следующем примере показано, как вставить объявление AD. wma в поток широковещательного одноадресного потока обстоятельства, когда клиент получает **событие** команды сценария с атрибутом **Name** , имеющим значение "время ожидания". **Клиентскип** имеет значение No, чтобы не допустить пропуска потокового объявления. В этом примере потоковая реклама должна быть воспроизведена перед возвратом в исходный поток. После завершения рекламы клиент возобновляет воспроизведение исходного потока.

Пример кода


```XML
<ASX VERSION="3.0">
    <ENTRY>
        <REF HREF="mms://proseware.com/BallGame" />
    </ENTRY>
    <EVENT NAME="Time-Out" WHENDONE="RESUME">
        <ENTRY>
            <REF HREF = "mms://proseware.com/Advert.wma" 
                CLIENTSKIP = "NO" />
       </ENTRY>
    </EVENT>
</ASX>

```



## <a name="related-topics"></a>См. также

<dl> <dt>

[**Списки воспроизведения метафайлов**](metafile-playlists.md)
</dt> <dt>

[**Использование списков воспроизведения метафайлов**](using-metafile-playlists.md)
</dt> <dt>

[**Справочник по элементам метафайлов Windows Media**](windows-media-metafile-elements-reference.md)
</dt> <dt>

[**Путеводитель по метафайлу Windows Media**](windows-media-metafile-guide.md)
</dt> </dl>

 

 




