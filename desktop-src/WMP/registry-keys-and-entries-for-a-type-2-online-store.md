---
title: Разделы реестра и записи для Интернет-магазина типа 2
description: Разделы реестра и записи для Интернет-магазина типа 2
ms.assetid: 17dff940-3884-488a-9016-29bb47c51caf
keywords:
- Интернет-магазины проигрывателя Windows Media в Интернете, реестр
- Интернет-магазины, реестр
- Тип 2 Интернет-магазинов, реестр
- реестр, тип 2 Интернет-магазинов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 685a26514730e7c370c698cbc9c64c29366c35ee
ms.sourcegitcommit: ad672d3a10192c5ccac619ad2524407109266e93
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/25/2020
ms.locfileid: "104133567"
---
# <a name="registry-keys-and-entries-for-a-type-2-online-store"></a>Разделы реестра и записи для Интернет-магазина типа 2

> [!Note]  
> В этом разделе описываются функции, предназначенные для использования в Интернет-магазинах. Использование этой функции вне контекста Интернет-магазина не поддерживается.

 

Чтобы сделать Интернет-магазин типа 2 доступным в проигрывателе Windows Media, поставщик Интернет-магазина должен создать следующие подразделы и записи реестра на компьютере пользователя.


```C++
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MediaPlayer\Subscriptions\keyName]
"Capabilities"=dword:flags
"SubscriptionObjectGUID"=clsid
"FriendlyName"=friendlyName

[HKEY_CLASSES_ROOT\CLSID\clsid]
@=className

[HKEY_CLASSES_ROOT\CLSID\clsid\InprocServer32]
@=moduleName
"ThreadingModel"="Apartment"
```



В предыдущем синтаксисе реестра символы курсивом являются заполнителями для имен и глобально уникальных идентификаторов (GUID), характерных для Интернет-магазина. В следующей таблице описаны эти заполнители.



| Заполнитель    | Описание                                                                                                                                                                                                                                                                                                                                                                                            |
|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| *keyName*      | Строка, согласованная между корпорацией Майкрософт и Интернет-магазином. Эта строка уникально идентифицирует Интернет-магазин. Пример: "Proseware"<br/>                                                                                                                                                                                                                                                          |
| *flags*        | Побитовое **или** для одного или нескольких флагов возможностей подключаемых модулей. Эти флаги определяют, должен ли проигрыватель Windows Media вызывать определенные методы [ивмпсубскриптионсервице](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice) и [IWMPSubscriptionService2](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice2). Дополнительные сведения о поддерживаемых флагах см. в таблице флагов возможностей подключаемых модулей, которые следуют за этой таблицей. Пример: 00000037<br/> |
| *этому*        | Идентификатор GUID, который является идентификатором класса (CLSID) для класса, реализующего **ивмпсубскриптионсервице** в подключаемом модуле Интернет-магазина. Этот GUID должен быть в формате реестра, заполненном фигурными скобками. Формат: {XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}<br/>                                                                                                                                    |
| *FriendlyName* | Понятное имя Интернет-магазина. Пример: "Proseware Music Service"<br/>                                                                                                                                                                                                                                                                                                                     |
| *pluginName*   | Имя подключаемого модуля интернет-магазина. Пример: "подключаемый модуль службы Proseware"<br/>                                                                                                                                                                                                                                                                                                                  |
| *className*    | Имя класса, реализующего **ивмпсубскриптионсервице** в подключаемом модуле Интернет-магазина. Пример: "Кпросеваресервице"<br/>                                                                                                                                                                                                                                                                |
| *moduleName*   | Полный путь к библиотеке DLL, которая реализует подключаемый модуль интернет-магазина. Пример: "C: \\ Program Files \\ Proseware \\ProsewareService.dll"<br/>                                                                                                                                                                                                                                                |



 

В следующей таблице описаны флаги возможностей подключаемых модулей.



| Флаг                                    | Значение | Описание                                                                                                                                                                                                                        |
|-----------------------------------------|-------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_алловплай ограничения \_ подписки            | 0X1   | Проигрыватель Windows Media должен вызывать [ивмпсубскриптионсервице:: алловплай](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowplay).                                                                                                                      |
| \_алловкдбурн ограничения \_ подписки          | 0X2   | Проигрыватель Windows Media должен вызывать [ивмпсубскриптионсервице:: алловкдбурн](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowcdburn).                                                                                                                  |
| \_алловпдатрансфер ограничения \_ подписки     | 0X4   | Проигрыватель Windows Media должен вызывать [ивмпсубскриптионсервице:: алловпдатрансфер](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowpdatransfer).                                                                                                        |
| \_баккграундпроцессинг ограничения \_ подписки | 0X8   | Проигрыватель Windows Media должен вызывать [ивмпсубскриптионсервице:: стартбаккграундпроцессинг](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-startbackgroundprocessing).                                                                                      |
| \_девицеаваилабле ограничения \_ подписки      | 0X10  | Проигрыватель Windows Media должен вызвать [IWMPSubscriptionService2::D евицеаваилабле](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-deviceavailable).                                                                                                        |
| \_препарефорсинк ограничения \_ подписки       | 0X20  | Проигрыватель Windows Media должен вызвать [IWMPSubscriptionService2::P репарефорсинк](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-prepareforsync).                                                                                                          |
| ПОДПИСКА \_ v1 с \_ ограничениями                  | 0XF   | По умолчанию. Это значение используется, если ни один из них не зарегистрирован. Это эквивалентно объединению ПОДПИСок \_ \_ алловплай, \_ алловкдбурн Cap \_ , ограничения подписки \_ \_ алловпдатрансфер и \_ ограничения подписки \_ баккграундпроцессинг. |



 

**Записи реестра для разработки и тестирования**

После начала разработки Интернет-магазина Корпорация Майкрософт предоставляет два ключа: тестовый ключ и рабочий ключ. На этапе разработки и тестирования Интернет-магазин будет отображаться в проигрывателе Windows Media только в том случае, если ваш тестовый ключ или рабочий ключ находится в реестре на компьютере пользователя. Дополнительные сведения о тестовых и производственных ключах см. в разделе [тестирование и производство ключей для Интернет-магазина типа 2](test-and-production-keys-for-a-type-2-online-store.md).

Поместите свой тестовый или рабочий ключ в следующее место в реестре.


```C++
[HKEY_CURRENT_USER\Software\Microsoft\MediaPlayer\Services]
"TestParameter" = "key1;key2;...;keyN"
```



Обратите внимание, что значение записи реестра Тестпараметер может указывать несколько тестовых или рабочих ключей. Например, предположим, что у Proseware есть тестовый ключ "1234", а Contoso — тестовый ключ "2345". Следующая запись реестра указывает, что хранилища тестов для Proseware и Contoso будут отображаться в проигрывателе Windows Media.


```C++
[HKEY_CURRENT_USER\Software\Microsoft\MediaPlayer\Services]
"TestParameter" = "1234;2345"
```



**Запись реестра Активесервице**

Когда пользователь активирует Интернет-магазин, проигрыватель Windows Media записывает в реестр сведения, определяющие активное Интернет-магазин. Проигрыватель Windows Media помещает сведения в следующем расположении в реестре на компьютере пользователя.


```C++
[HKEY_CURRENT_USER\Software\Microsoft\MediaPlayer\Subscriptions]
"ActiveService"=serviceInfo
```



В приведенном выше синтаксисе реестра *serviceInfo* — это заполнитель для строки, содержащей описательные сведения об активном Интернет-магазине.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Справочные материалы по интернет-магазинам типа 2**](reference-for-type-2-online-stores.md)
</dt> </dl>

 

 





