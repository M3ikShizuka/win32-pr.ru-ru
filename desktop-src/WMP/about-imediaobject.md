---
title: О Имедиаобжект
description: О Имедиаобжект
ms.assetid: c483f74a-efd8-4a9f-a719-686099755e63
keywords:
- подключаемые модули проигрыватель Windows Media, интерфейсы
- подключаемые модули, интерфейсы
- подключаемые модули обработки цифровых сигналов, интерфейсы
- Подключаемые модули DSP, интерфейсы
- интерфейсы, подключаемые модули DSP
- подключаемые модули проигрыватель Windows Media, интерфейс имедиаобжект
- подключаемые модули, интерфейс Имедиаобжект
- подключаемые модули обработки цифровых сигналов, интерфейс Имедиаобжект
- Подключаемые модули DSP, интерфейс Имедиаобжект
- Интерфейс Имедиаобжект
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2dbf44a527d61d924045a4bcceded5d90bb174fef608e3b7667338e99aa1efe9
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118583911"
---
# <a name="about-imediaobject"></a>О Имедиаобжект

Интерфейс **имедиаобжект** является необходимым интерфейсом для дмос. **имедиаобжект** содержит методы, используемые подключаемым модулем проигрыватель Windows Media DSP для получения данных из проигрыватель Windows Media, обработки данных и возврата обработанных данных в проигрыватель Windows Media. полную документацию по интерфейсу **имедиаобжект** см. в разделе DirectShow Windows SDK.

Методы **имедиаобжект** можно классифицировать следующим образом:

## <a name="methods-that-handle-format-negotiation"></a>Методы, обрабатывающие согласование формата

это методы, проигрыватель Windows Media вызовы для получения сведений о форматах данных, поддерживаемых подключаемым модулем. Эти способы включают перечисленные ниже.

-   **жетинпутмакслатенци**
-   **жетинпутсизеинфо**
-   **жетинпутстреаминфо**
-   **жетинпуттипе**
-   **жетаутпутсизеинфо**
-   **жетаутпутстреаминфо**
-   **жетаутпуттипе**
-   **жетстреамкаунт**
-   **сетинпутмакслатенци**
-   **сетинпуттипе**
-   **сетаутпуттипе**

некоторые из этих методов, например **жетинпуттипе** и **сетинпуттипе**, используют DMO структуру **\_ \_ типа мультимедиа** для описания формата данных, используемых потоком. когда проигрыватель Windows Media вызывает эти методы, он предоставляет указатель на DMO структуру **\_ \_ типа мультимедиа** . если метод, например **сетинпуттипе** , указывает сведения о типе мультимедиа, подключаемый модуль должен скопировать структуру **типа DMO \_ media \_** в переменную-член и проверить его члены данных, чтобы определить тип данных, которые проигрыватель Windows Media будут предоставляться во входном буфере. если метод, например **жетинпуттипе** , получает сведения о типе мультимедиа, подключаемый модуль должен скопировать адрес переменной-члена, содержащей структуру **DMOного \_ \_ типа мультимедиа** , в указатель, предоставленный проигрыватель Windows Media в списке параметров.

проигрыватель Windows Media в основном использует два члена структуры **\_ \_ типа мультимедиа DMO** :

-   **мажортипе**: глобальный уникальный идентификатор (GUID), указывающий общую категорию носителя, например аудио или видео.
-   **подтип**— идентификатор GUID, указывающий более подробное описание носителя, например звук PCM.

эти идентификаторы guid можно найти в заголовке с именем uuids. h, который входит в состав Windows SDK.

такие методы, как **жетинпутсизеинфо** , предоставляют сведения для проигрыватель Windows Media о том, какой объем памяти необходим для выделения буферов обработки. такие методы, как **жетстреамкаунт** и **жетаутпутстреаминфо** , предоставляют сведения для проигрыватель Windows Media о числе и символах потоков, поддерживаемых подключаемым модулем DSP.

**Жетинпутмакслатенци** и **сетинпутмакслатенци** реализуются дмос в особых случаях. проигрыватель Windows Media Подключаемые модули DSP должны возвращать E \_ нотимпл.

## <a name="methods-that-specify-or-retrieve-state-information"></a>Методы, указывающие или получающие сведения о состоянии

это методы, проигрыватель Windows Media вызовы для получения или задания значений, связанных с текущим состоянием подключаемого модуля. Эти способы включают перечисленные ниже.

-   **жетинпуткурренттипе**
-   **жетинпутстатус**
-   **жетаутпуткурренттипе**

**жетинпуткурренттипе** и **жетаутпуткурренттипе** используют структуру **\_ \_ типа мультимедиа DMO** для возврата сведений проигрыватель Windows Media о типах носителей, ранее заданных для входных и выходных потоков. **жетинпутстатус** возвращает флаг, сообщающий проигрыватель Windows Media, может ли подключаемый модуль DSP принимать входные данные.

## <a name="methods-that-handle-buffering-and-processing-data"></a>Методы, обрабатывающие буферизацию и обработку данных

это методы, проигрыватель Windows Media вызовы для инициации различных процессов, которые выполняет подключаемый модуль для обработки цифровых сигналов. Эти способы включают перечисленные ниже.

-   **аллокатестреамингресаурцес**
-   **Разрыв**
-   **Очистка**
-   **фристреамингресаурцес**
-   **Блокировка**
-   **ProcessInput**
-   **ProcessOutput**

проигрыватель Windows Media вызывает **аллокатестреамингресаурцес** и **фристреамингресаурцес** , чтобы предоставить подключаемый модуль DSP с возможностью настройки или освобождения дополнительных буферов, которые могут потребоваться подключаемому модулю для внутренней обработки.

проигрыватель Windows Media подключаемые модули DSP не требуют использования метода **прекращения** DMO.

проигрыватель Windows Media вызывает **flush** , чтобы направить подключаемый модуль DSP на сброс всех внутренних буферизованных данных. Подключаемый модуль должен освободить все ссылки на интерфейсы **имедиабуффер** , очистить все значения, указывающие метку времени или длину выборки для буфера мультимедиа, и повторно инициализировать все внутренние состояния, зависящие от содержимого примера носителя.

проигрыватель Windows Media вызывает метод ProcessInput для передачи указателя на интерфейс **имедиабуффер** подключаемому модулю DSP. этот интерфейс предоставляет доступ к входному буферу, выделенному проигрыватель Windows Media для предоставления данных подключаемому модулю. затем проигрыватель Windows Media вызывает **ProcessOutput** для передачи указателя на интерфейс **имедиабуффер** , который предоставляет доступ к выходному буферу, выделенному проигрыватель Windows Media, для получения обработанных данных из подключаемого модуля DSP.

Интерфейс **имедиаобжект** включает метод с именем **Lock**. этот метод предназначен для получения или освобождения блокировки DMO для сохранения сериализации DMO при выполнении нескольких операций. Версия **имедиаобжект:: Lock** в коде мастера переопределяет реализацию **блокировки** в библиотеке ATL. поскольку проигрыватель Windows Media сериализует вызовы, выполненные в интерфейсе DMO подключаемого модуля DSP, реализация **блокировки** просто возвращает значение S \_ ок. дополнительные сведения о создании многопоточных DMO см. в разделе DirectShow Windows SDK.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**Требуемые интерфейсы**](required-interfaces.md)
</dt> </dl>

 

 




