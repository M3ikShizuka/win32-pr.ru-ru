---
title: О Имедиаобжект
description: О Имедиаобжект
ms.assetid: c483f74a-efd8-4a9f-a719-686099755e63
keywords:
- Подключаемые модули проигрывателя Windows Media, интерфейсы
- подключаемые модули, интерфейсы
- подключаемые модули обработки цифровых сигналов, интерфейсы
- Подключаемые модули DSP, интерфейсы
- интерфейсы, подключаемые модули DSP
- Подключаемые модули проигрывателя Windows Media, интерфейс Имедиаобжект
- подключаемые модули, интерфейс Имедиаобжект
- подключаемые модули обработки цифровых сигналов, интерфейс Имедиаобжект
- Подключаемые модули DSP, интерфейс Имедиаобжект
- Интерфейс Имедиаобжект
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cfbbecd749242b67bc5c8f36b3c7a2c0a5fbe461
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103773583"
---
# <a name="about-imediaobject"></a>О Имедиаобжект

Интерфейс **имедиаобжект** является необходимым интерфейсом для дмос. **Имедиаобжект** содержит методы, используемые подключаемым модулем DSP Windows Media Player для получения данных из проигрывателя Windows Media, обработки данных и возврата обработанных данных в проигрыватель Windows Media. Полную документацию по интерфейсу **имедиаобжект** см. в разделе «DirectShow» Windows SDK.

Методы **имедиаобжект** можно классифицировать следующим образом:

## <a name="methods-that-handle-format-negotiation"></a>Методы, обрабатывающие согласование формата

Это методы, которые вызываются проигрывателем Windows Media для получения сведений о форматах данных, поддерживаемых подключаемым модулем. Эти способы включают перечисленные ниже.

-   **жетинпутмакслатенци**
-   **жетинпутсизеинфо**
-   **жетинпутстреаминфо**
-   **жетинпуттипе**
-   **жетаутпутсизеинфо**
-   **жетаутпутстреаминфо**
-   **жетаутпуттипе**
-   **жетстреамкаунт**
-   **сетинпутмакслатенци**
-   **сетинпуттипе**
-   **сетаутпуттипе**

Некоторые из этих методов, например **жетинпуттипе** и **сетинпуттипе**, используют структуру **\_ \_ типа мультимедиа DMO** для описания формата данных, используемых потоком. Когда проигрыватель Windows Media вызывает эти методы, он предоставляет указатель на структуру **\_ \_ типа мультимедиа DMO** . Если метод, например **сетинпуттипе** , указывает сведения о типе мультимедиа, подключаемый модуль должен скопировать структуру **\_ \_ типа мультимедиа DMO** в переменную-член и проверить его члены данных, чтобы определить тип данных, которые проигрыватель Windows Media будет предоставлять во входном буфере. Если метод, например **жетинпуттипе** , получает сведения о типе мультимедиа, подключаемый модуль должен скопировать адрес переменной-члена, содержащей структуру **\_ \_ типа мультимедиа DMO** , в указатель, предоставленный проигрывателем Windows Media в списке параметров.

Проигрыватель Windows Media в основном использует два члена структуры **\_ \_ типа мультимедиа DMO** :

-   **мажортипе**: глобальный уникальный идентификатор (GUID), указывающий общую категорию носителя, например аудио или видео.
-   **подтип**— идентификатор GUID, указывающий более подробное описание носителя, например звук PCM.

Эти идентификаторы GUID можно найти в заголовке с именем UUIDs. h, который входит в состав Windows SDK.

Такие методы, как **жетинпутсизеинфо** , предоставляют сведения для проигрывателя Windows Media о том, сколько памяти требуется для выделения буферов обработки. Такие методы, как **жетстреамкаунт** и **жетаутпутстреаминфо** , предоставляют сведения проигрывателю Windows Media о количестве и символе потоков, поддерживаемых подключаемым модулем DSP.

**Жетинпутмакслатенци** и **сетинпутмакслатенци** реализуются дмос в особых случаях. Подключаемые модули DSP проигрывателя Windows Media должны возвращать E \_ нотимпл.

## <a name="methods-that-specify-or-retrieve-state-information"></a>Методы, указывающие или получающие сведения о состоянии

Это методы, которые вызываются проигрывателем Windows Media для получения или задания значений, связанных с текущим состоянием подключаемого модуля. Эти способы включают перечисленные ниже.

-   **жетинпуткурренттипе**
-   **жетинпутстатус**
-   **жетаутпуткурренттипе**

**Жетинпуткурренттипе** и **жетаутпуткурренттипе** используют структуру **\_ \_ типа мультимедиа DMO** для возврата сведений в проигрыватель Windows Media о типах носителей, ранее заданных для входных и выходных потоков. **Жетинпутстатус** Возвращает флаг, который указывает проигрывателю Windows Media, может ли подключаемый модуль DSP принимать входные данные.

## <a name="methods-that-handle-buffering-and-processing-data"></a>Методы, обрабатывающие буферизацию и обработку данных

Это методы, которые вызываются проигрывателем Windows Media для инициации различных процессов, выполняемых подключаемым модулем для обработки цифровых сигналов. Эти способы включают перечисленные ниже.

-   **аллокатестреамингресаурцес**
-   **Разрыв**
-   **Очистка**
-   **фристреамингресаурцес**
-   **Блокировка**
-   **ProcessInput**
-   **ProcessOutput**

Проигрыватель Windows Media вызывает **аллокатестреамингресаурцес** и **фристреамингресаурцес** для предоставления подключаемого модуля DSP с возможностью настройки или освобождения дополнительных буферов, которые могут потребоваться подключаемому модулю для внутренней обработки.

Подключаемым модулям DSP в проигрывателе Windows Media не требуется использовать метод **прекращения поддержки** DMO.

Проигрыватель Windows Media вызывает **Сброс** , чтобы направить подключаемый модуль DSP на диск всех внутренних буферизованных данных. Подключаемый модуль должен освободить все ссылки на интерфейсы **имедиабуффер** , очистить все значения, указывающие метку времени или длину выборки для буфера мультимедиа, и повторно инициализировать все внутренние состояния, зависящие от содержимого примера носителя.

Проигрыватель Windows Media вызывает метод ProcessInput для передачи указателя на интерфейс **имедиабуффер** подключаемому модулю DSP. Этот интерфейс предоставляет доступ к входному буферу, выделенному проигрывателем Windows Media для предоставления данных подключаемому модулю. Проигрыватель Windows Media в дальнейшем вызывает **ProcessOutput** для передачи указателя на интерфейс **имедиабуффер** , который предоставляет доступ к выходному буферу, выделенному проигрывателем Windows Media для получения обработанных данных из подключаемого модуля DSP.

Интерфейс **имедиаобжект** включает метод с именем **Lock**. Этот метод предназначен для получения или освобождения блокировки DMO для сохранения сериализации объектов DMO при выполнении нескольких операций. Версия **имедиаобжект:: Lock** в коде мастера переопределяет реализацию **блокировки** в библиотеке ATL. Так как проигрыватель Windows Media сериализует вызовы, выполненные в интерфейсе DMO подключаемого модуля DSP, реализация **блокировки** просто возвращает значение S \_ ОК. Дополнительные сведения о создании многопоточных DMO см. в разделе «DirectShow» Windows SDK.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Требуемые интерфейсы**](required-interfaces.md)
</dt> </dl>

 

 




