---
title: Реализация отрисовки
description: Реализация отрисовки
ms.assetid: 9b3a64f6-6803-457c-8e63-e8a799089e18
keywords:
- визуализации, события с превышением времени
- Пользовательские визуализации, события с превышением времени
- визуализации, функция Render
- Пользовательские визуализации, функция Render
- визуализации, функция Рендервиндов
- Пользовательские визуализации, функция Рендервиндов
- Функция Render, параметры
- Функция Рендервиндов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 99db0a96a07c361d18de579fb0235befa11838c8
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2020
ms.locfileid: "104069573"
---
# <a name="implementing-render"></a>Реализация отрисовки

Самый простой способ представить программирование визуализации — создать обработчик для события с превышением времени. Через определенные интервалы проигрыватель Windows Media создает моментальный снимок воспроизводимых звуковых данных и предоставляет данные моментального снимка загруженной в данный момент визуализации. Это аналогично программированию на основе событий и является частью модели программирования Microsoft Windows. Написание кода и ожидание его вызова с помощью определенного события.

Если код является реализацией функции [ивмпеффектс:: Render](/previous-versions/windows/desktop/api/effects/nf-effects-iwmpeffects-render) для отрисовки в режиме без окон, он получает следующие параметры:

*тимедлевел*

Это структура, определяющая звуковые данные, которые будет анализировать ваш код. Структура состоит из двух массивов. Первый массив основан на сведениях о частоте и содержит моментальный снимок спектра звука, разделенного на части 1024. Каждая ячейка массива содержит значение от 0 до 255. Первая ячейка начинается с 20 Гц, а последняя — в 22050 Гц. Массив является двумя размерами для представления стерео аудио. Второй массив основан на сведениях о звуковой волны и соответствует питанию звука, где, в большей степени, это большее значение. Массив форм-волнового сигнала — это детализированный моментальный снимок последних 1024 срезов звукового питания, которые потребовались через небольшие интервалы времени. Этот массив также является двумя размерами для представления стерео аудио.

*HDC*

Это обработчик Microsoft Windows для контекста устройства. Это позволяет опознать поверхность рисования в Windows. Его не нужно создавать, нужно просто использовать его для конкретных вызовов функций рисования.

*ПЕРЕТАСКИВАЕМЫЕ*

Это прямоугольник Microsoft Windows, который определяет размер поверхности рисования. Это простой прямоугольник с четырьмя свойствами: **слева**, **справа**, **сверху** и **снизу**. Фактические значения предоставляются проигрывателем Windows Media, что позволяет определить, каким образом пользователь или Обложка определяет размер окна, на котором будет проводиться рисование. Он также определяет расположение в HDC, на котором ожидается отрисовка результата.

Если код является реализацией функции **IWMPEffects2:: рендервиндовед** для отрисовки в окне, он получает следующие параметры:

*тимедлевел*

Это те же сведения, которые получает функция **Render** .

*фрекуиредрендер*

Параметр *фрекуиредрендер* информирует вас, что визуализация должна перерисовываться, например, когда на него перетаскивается другое окно. Если это значение равно false, можно спокойно пропустить код отрисовки, если текущий элемент мультимедиа остановлен или приостановлен. Это позволяет избежать необязательного использования циклов ЦП.

Образец подключаемого модуля, созданный мастером подключаемых модулей, не предоставляет пользовательскую реализацию для **рендервиндовед**. Вместо этого пример кода подключаемого модуля получает контекст устройства из родительского окна, предоставляемого проигрывателем Windows Media в [IWMPEffects2:: Create](/previous-versions/windows/desktop/api/effects/nf-effects-iwmpeffects2-create), затем получает размеры родительского окна в виде структуры Rect, а затем вызывает метод для **отрисовки** с использованием контекста устройства, Rect и указателя на уровень времени из **рендервиндовед**.

В следующих разделах содержатся дополнительные сведения о реализации **отрисовки**.

-   [Использование уровней времени](using-timed-levels.md)
-   [Использование контекстов устройств](using-device-contexts.md)
-   [Использование прямоугольников](using-rectangles.md)
-   [Пример кода рендеринга](sample-render-code.md)

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Реализация кода**](implementing-your-code.md)
</dt> </dl>

 

 




