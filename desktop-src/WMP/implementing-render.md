---
title: Реализация отрисовки
description: Реализация отрисовки
ms.assetid: 9b3a64f6-6803-457c-8e63-e8a799089e18
keywords:
- визуализации, события с превышением времени
- Пользовательские визуализации, события с превышением времени
- визуализации, функция Render
- Пользовательские визуализации, функция Render
- визуализации, функция Рендервиндов
- Пользовательские визуализации, функция Рендервиндов
- Функция Render, параметры
- Функция Рендервиндов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 99db0a96a07c361d18de579fb0235befa11838c8
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127249631"
---
# <a name="implementing-render"></a>Реализация отрисовки

Самый простой способ представить программирование визуализации — создать обработчик для события с превышением времени. в определенные интервалы проигрыватель Windows Media создает моментальный снимок воспроизводимых звуковых данных и предоставляет данные моментального снимка загруженной в данный момент визуализации. Это похоже на программирование на основе событий и является частью модели программирования Microsoft Windows. Написание кода и ожидание его вызова с помощью определенного события.

Если код является реализацией функции [ивмпеффектс:: Render](/previous-versions/windows/desktop/api/effects/nf-effects-iwmpeffects-render) для отрисовки в режиме без окон, он получает следующие параметры:

*тимедлевел*

Это структура, определяющая звуковые данные, которые будет анализировать ваш код. Структура состоит из двух массивов. Первый массив основан на сведениях о частоте и содержит моментальный снимок спектра звука, разделенного на части 1024. Каждая ячейка массива содержит значение от 0 до 255. Первая ячейка начинается с 20 Гц, а последняя — в 22050 Гц. Массив является двумя размерами для представления стерео аудио. Второй массив основан на сведениях о звуковой волны и соответствует питанию звука, где, в большей степени, это большее значение. Массив форм-волнового сигнала — это детализированный моментальный снимок последних 1024 срезов звукового питания, которые потребовались через небольшие интервалы времени. Этот массив также является двумя размерами для представления стерео аудио.

*HDC*

это Windowsный обработчик Microsoft для контекста устройства. Это позволяет выбрать поверхность рисования для Windows. Его не нужно создавать, нужно просто использовать его для конкретных вызовов функций рисования.

*ПЕРЕТАСКИВАЕМЫЕ*

это прямоугольник Microsoft Windows, определяющий размер поверхности рисования. Это простой прямоугольник с четырьмя свойствами: **слева**, **справа**, **сверху** и **снизу**. фактические значения предоставляются проигрыватель Windows Media, чтобы можно было определить, каким образом пользователь или обложка определяет размер окна, на котором будет проводиться рисование. Он также определяет расположение в HDC, на котором ожидается отрисовка результата.

Если код является реализацией функции **IWMPEffects2:: рендервиндовед** для отрисовки в окне, он получает следующие параметры:

*тимедлевел*

Это те же сведения, которые получает функция **Render** .

*фрекуиредрендер*

Параметр *фрекуиредрендер* информирует вас, что визуализация должна перерисовываться, например, когда на него перетаскивается другое окно. Если это значение равно false, можно спокойно пропустить код отрисовки, если текущий элемент мультимедиа остановлен или приостановлен. Это позволяет избежать необязательного использования циклов ЦП.

Образец подключаемого модуля, созданный мастером подключаемых модулей, не предоставляет пользовательскую реализацию для **рендервиндовед**. вместо этого пример кода подключаемого модуля получает контекст устройства из родительского окна, предоставленного проигрыватель Windows Media в [IWMPEffects2:: Create](/previous-versions/windows/desktop/api/effects/nf-effects-iwmpeffects2-create), затем получает размеры родительского окна в виде структуры RECT, а затем вызывает метод с помощью для **отрисовки** с использованием контекста устройства, RECT и указателя на уровень времени из **рендервиндовед**.

В следующих разделах содержатся дополнительные сведения о реализации **отрисовки**.

-   [Использование уровней времени](using-timed-levels.md)
-   [Использование контекстов устройств](using-device-contexts.md)
-   [Использование прямоугольников](using-rectangles.md)
-   [Пример кода рендеринга](sample-render-code.md)

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**Реализация кода**](implementing-your-code.md)
</dt> </dl>

 

 




