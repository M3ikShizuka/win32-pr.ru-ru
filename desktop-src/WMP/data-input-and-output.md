---
title: Ввод и вывод данных
description: Ввод и вывод данных
ms.assetid: a03b5327-65df-4cb9-a639-1e943ac28bfc
keywords:
- Подключаемые модули проигрывателя Windows Media, ввод и вывод данных
- подключаемые модули, входные и выходные данные
- подключаемые модули обработки цифровых сигналов, ввод и вывод данных
- Подключаемые модули DSP, входные и выходные данные
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 39f66946dc796337d1f1e638cfe3828b3cbfbb6e
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104132954"
---
# <a name="data-input-and-output"></a>Ввод и вывод данных

Проигрыватель Windows Media обеспечивает воспроизведение аудио-или видео-данных в подключаемые модули DSP через входной буфер, выделенный проигрывателем Windows Media. Подключаемые модули DSP возвращают обработанные данные в проигрыватель Windows Media через выходной буфер, который также выделяется проигрывателем Windows Media Player. Проигрыватель Windows Media управляет процессом передачи данных между собой и подключаемым модулем DSP путем вызова методов, реализованных подключаемым модулем. Для подключаемого модуля, который выступает в качестве объекта мультимедиа DirectX (DMO), этот процесс работает следующим образом:

1.  Проигрыватель Windows Media вызывает **имедиаобжект::P роцессинпут**, передавая указатель на объект **имедиабуффер** подключаемому модулю DSP.
2.  Подключаемый модуль DSP хранит счетчик ссылок на объект входного буфера. Подключаемый модуль DSP возвращает соответствующее **значение HRESULT** успешного или неуспешного выполнения.
3.  Проигрыватель Windows Media вызывает **имедиаобжект::P роцессаутпут**, передавая указатель на массив **\_ выходных \_ данных структур \_ буферов объектов DMO** (которые содержат буферы вывода) в подключаемый модуль DSP.
4.  Подключаемый модуль DSP обрабатывает данные во входном буфере, а затем копирует их в соответствующий выходной буфер. Подключаемый модуль DSP освобождает счетчик ссылок на объект входного буфера, когда все данные в буфере обрабатывались. Затем подключаемый модуль DSP возвращает соответствующее **значение HRESULT** Success или failure.
5.  Проигрыватель Windows Media визуализирует содержимое в выходном буфере.

Для подключаемого модуля, выполняющего функции преобразования Media Foundation (MFT), процесс работает следующим образом:

-   Проигрыватель Windows Media вызывает **имфтрансформ::P роцессинпут**, передавая указатель на объект интерфейса **имфсампле** подключаемому модулю DSP.
    1.  Подключаемый модуль DSP хранит счетчик ссылок в интерфейсе **имфсампле** . Подключаемый модуль DSP возвращает соответствующее **значение HRESULT** успешного или неуспешного выполнения.
    2.  Проигрыватель Windows Media вызывает **имфтрансформ::P роцессаутпут**, передавая указатель на массив **\_ \_ \_ буферов выходных данных MFT** (которые содержат буферы вывода) в подключаемый модуль DSP.
    3.  Подключаемый модуль DSP обрабатывает данные во входном буфере, а затем копирует их в соответствующий выходной буфер. Подключаемый модуль DSP освобождает счетчик ссылок на объект входного буфера, когда все данные в буфере обрабатывались. Затем подключаемый модуль DSP возвращает соответствующее **значение HRESULT** Success или failure.
    4.  Проигрыватель Windows Media визуализирует содержимое в выходном буфере.

Этот процесс повторяется постоянно, пока подключаемый модуль включен и проигрыватель Windows Media имеет содержимое для подготовки к просмотру.

> [!Note]  
> Не записывайте код, который записывает данные во входной буфер или считывает данные из выходного буфера. Неправильное обращение к буферам данных может привести к непредвиденным результатам.

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Обзор подключаемого модуля DSP**](dsp-plug-in-developer-overview.md)
</dt> </dl>

 

 




