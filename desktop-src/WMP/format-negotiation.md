---
title: Формат согласования
description: Формат согласования
ms.assetid: 7847d4e3-1250-4c35-88e1-52d61bf1553f
keywords:
- Подключаемые модули проигрывателя Windows Media, формат согласования
- подключаемые модули, формат согласования
- подключаемые модули обработки цифровых сигналов, согласование формата
- Подключаемые модули DSP, форматирование согласования
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dbc805b18d3e2be081e4f85bcc5ed42aded06853
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "105691330"
---
# <a name="format-negotiation"></a>Формат согласования

Для проигрывателя Windows Media и подключаемого модуля DSP для совместного использования данных обе программы должны согласовать формат обрабатываемых данных. Подключаемый модуль DSP реализует методы, которые вызываются проигрывателем для определения форматов, поддерживаемых подключаемым модулем. Подключаемый модуль также реализует методы, которые вызываются проигрывателем для задания текущего формата.

Если подключаемый модуль выступает в роли объекта мультимедиа Дирексткс (DMO), проигрыватель Windows Media обнаруживает и устанавливает форматы мультимедиа путем вызова методов интерфейса **имедиаобжект** . Например, проигрыватель вызывает **имедиаобжект:: жетинпуттипе** подключаемого модуля, чтобы получить список всех входных форматов, поддерживаемых подключаемым модулем. Подключаемые модули DMO используют структуру **\_ \_ типа мультимедиа DMO** для организации сведений, указывающих формат мультимедиа. Дополнительные сведения о том, как подключаемые модули DMO и формат согласования с проигрывателем, см. в разделе [About имедиаобжект](about-imediaobject.md).

Если подключаемый модуль выступает в качестве Media Foundation преобразования (MFT), проигрыватель Windows Media обнаруживает и устанавливает форматы мультимедиа путем вызова методов интерфейса **имфтрансформ** . Например, проигрыватель вызывает **имфтрансформ:: жетинпутаваилаблетипе** подключаемого модуля, чтобы получить список всех входных форматов, поддерживаемых подключаемым модулем. Подключаемые модули MFT и проигрыватель используют интерфейс **имфмедиатипе** для Организации и обмена сведениями о формате.

Проигрыватель Windows Media будет использовать подключаемый модуль DSP для аудио, только если подключаемый модуль поддерживает ту же глубину, что и воспроизводимый цифровой звук. Например, если цифровой звук имеет 20-битное значение, подключаемый модуль должен быть написан для обработки 20-разрядного звука. Подключаемые модули DSP для аудио компакт-дисков должны поддерживать 20-разрядную обработку.

Во время согласования формата многоканального содержимого на компьютере, настроенном для использования со стерео динамиками, проигрыватель Windows Media сначала пытается подключиться к подключаемому модулю DSP аудиоподсистемы, используя существующий формат входных и выходных данных, вызвав **имедиаобжект:: сетинпуттипе** и **Имедиаобжект:: сетаутпуттипе**. После первоначального согласования проигрыватель перечисляет форматы, поддерживаемые подключаемым модулем, и пытается согласовать оптимальное сочетание форматов для проигрывателя и подключаемого модуля. Если подключаемый модуль принимает стерео аудио (определяется структурой **вавеформатекс** ) в качестве входного формата во время первоначального согласования, а затем принимает только многоканальный звук (определенный структурой **Вавеформатекстенсибле** ), проигрыватель предоставит многоканальный звук в качестве входного формата для подключаемого модуля. Такое поведение во время согласования формата доступно для использования в операционной системе Microsoft Windows XP. В последующих версиях он может быть изменен или недоступен.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Обзор подключаемого модуля DSP**](dsp-plug-in-developer-overview.md)
</dt> </dl>

 

 




