---
title: Bluetooth и ВСАКУЕРИСЕТ для Set Service
description: Использование структуры ВСАКУЕРИСЕТ с функцией Всасетсервице для регистрации или удаления экземпляров службы в пространстве имен Bluetooth (NS \_ БС).
ms.assetid: e582156d-a298-4d9b-8ed1-4c558fa4f203
keywords:
- Bluetooth и ВСАКУЕРИСЕТ для Set Service Bluetooth
- ВСАКУЕРИСЕТ Bluetooth для Set Service
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 64a632cad2c813856367d4565bc69e0d4baf2eba
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103987594"
---
# <a name="bluetooth-and-wsaqueryset-for-set-service"></a>Bluetooth и ВСАКУЕРИСЕТ для Set Service

Bluetooth использует структуру [**всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) для упрощения обнаружения устройств и служб в пространстве имен Bluetooth, NS \_ БС.

Функция [**всасетсервице**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea) использует структуру [**всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) для регистрации или удаления экземпляров службы в пространстве имен Bluetooth. В следующей таблице перечислены значения элементов в структуре **всакуерисет** .

| Член                      | Обязательное значение (входные данные)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Выходные данные                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **двсизе**                  | Необходимо задать значение **sizeof**([**всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)). Используется в качестве механизма управления версиями.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **дваутпутфлагс**           | Не используется.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **лпсзсервицеинстанценаме** | Необязательный, но рекомендуется включать. Используется для создания атрибута ServiceName Bluetooth.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **лпсервицеклассид**        | Обязательный. Идентификатор GUID, соответствующий классу службы. Это значение должно соответствовать идентификатору GUID из документа номеров, назначенных Bluetooth для известных профилей, или уникально сформированного приложением UUID для приложений, которые не основаны на профиле. Используется для создания последовательности атрибута Сервицеклассидлист с этим элементом в качестве единственного элемента.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **лпверсион**               | Не используется.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **лпсзкоммент**             | Необязательный элемент. Используется для создания атрибута "Bluetooth ServiceDescription".                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **двнамеспаце**             | Пространство имен, в котором ограничена служба. Должен быть \_ БС NS.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **лпнспровидерид**          | Не требуется.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **лпсзконтекст**             | Не используется.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **двнумберофпротоколс**     | Не используется.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **лпафппротоколс**          | Не используется.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **лпсзкуеристринг**         | Не используется.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **двнумберофксаддрс**       | Число регистрируемых адресов. Должен иметь значение 1.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **лпксабуффер**             | Требуется, если **лпблоб** не заполнен необработанным потоком SDP. Указатель на структуру [**\_ сведений ксаддр**](/windows/desktop/api/nspapi/ns-nspapi-csaddr_info) с элементом **локаладдр. Лпсоккаддр** , указывающим на [**SOCKADDR \_ БС**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) , где сервер прослушивает соединения. Функцию [**жетсоккнаме**](/windows/desktop/api/winsock/nf-winsock-getsockname) можно использовать для возврата структуры **SOCKADDR \_ БС** для привязанного сокета. Сведения в члене **лпксабуффер** используются системой для создания атрибута Bluetooth протоколдескрипторлист SDP. Протокол и порт, указанные в **лпксабуффер** , должны быть уникальными (не зарегистрированы ранее) и использоваться для индексации записи для последующих вызовов для удаления. Используется для создания атрибута Протоколдескрипторлист Bluetooth записи SDP. | Нет.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **лпблоб**                  | Необязательный элемент. Указатель на структуру [**большого двоичного объекта**](/windows/desktop/api/nspapi/ns-nspapi-blob) , указывающий на структуру [**\_ \_ службы БС Set**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) , которая позволяет клиенту предоставить структуру, относящуюся к интерфейсу Bluetooth, которая содержит двоичную запись SDP, созданную приложением. Если **лпблоб** предоставляется функции [**всасетсервице**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea) , все остальные элементы структуры [**Всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) , за исключением **двсизе** и **двнамеспаце** , игнорируются. Дополнительные сведения см. в разделе [Bluetooth и большой двоичный объект](bluetooth-and-blob.md) . В большинстве случаев необходимо отправить двоичную запись SDP, так как ограниченное число атрибутов SDP можно преобразовать из структуры **всакуерисет** , а строки преобразуются только в кодировку UTF-8 по умолчанию.           | Если в входных данных были предоставлены необязательные структуры [**\_ \_ службы**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) [**BLOB-объектов**](/windows/desktop/api/nspapi/ns-nspapi-blob) и БС, а также версия ulong и значения обработчика, которые должны указываться в **БС \_ Set \_ Service**, версия обновится, чтобы она содержала \_ \_ значение версии SDP БС для поставщика сокетов Bluetooth Windows, а также предоставленный обработчик, который необходимо для последующего удаления записи. |



 

> [!Note]  
> Чтобы удалить службу, единственными обязательными элементами в структуре [**\_ \_ службы Set БС**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) являются члены **псдпверсион** и **прекордхандле** .

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Bluetooth и ВСАКУЕРИСЕТ для запроса устройства](bluetooth-and-wsaqueryset-for-device-inquiry.md)
</dt> <dt>

[Bluetooth и ВСАКУЕРИСЕТ для запроса на обслуживание](bluetooth-and-wsaqueryset-for-service-inquiry.md)
</dt> <dt>

[Bluetooth и большой двоичный объект](bluetooth-and-blob.md)
</dt> <dt>

[Bluetooth и Всасетсервице](bluetooth-and-wsasetservice.md)
</dt> <dt>

[**ОБЪЕКТЕ**](/windows/desktop/api/nspapi/ns-nspapi-blob)
</dt> <dt>

[**\_Служба настройки \_ БС**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service)
</dt> <dt>

[**\_сведения о ксаддр**](/windows/desktop/api/nspapi/ns-nspapi-csaddr_info)
</dt> <dt>

[**жетсоккнаме**](/windows/desktop/api/winsock/nf-winsock-getsockname)
</dt> <dt>

[**SOCKADDR \_ БС**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth)
</dt> <dt>

[**всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)
</dt> <dt>

[Сокеты Windows](/windows/desktop/WinSock/windows-sockets-start-page-2)
</dt> </dl>

 

 