---
title: Функции Direct3D 11
description: Руководство по программированию содержит сведения об использовании программируемого конвейера Direct3D 11 для создания трехмерной графики реального времени для игр, а также для научных и настольных приложений.
ms.assetid: ee4dae04-1a52-4587-87c1-006abb687a91
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 82b6ec64e315275ca6faaf513d04f996609615a2
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "126963825"
---
# <a name="direct3d-11-features"></a>Функции Direct3D 11

Руководство по программированию содержит сведения об использовании программируемого конвейера Direct3D 11 для создания трехмерной графики реального времени для игр, а также для научных и настольных приложений.

-   [Вычисление шейдера](#compute-shader)
-   [Связывание динамического шейдера](#dynamic-shader-linking)
-   [Многопоточность](#multithreading)
-   [Тесселяции](#tessellation)
-   [Полный список функций](#full-listing-of-features)
-   [Функции, добавленные в предыдущих выпусках](#features-added-in-previous-releases)
-   [Связанные темы](#related-topics)

## <a name="compute-shader"></a>Вычисление шейдера

Вычислительный шейдер — это программируемый шейдер, предназначенный для параллельной обработки данных общего назначения. Иными словами, шейдеры вычислений позволяют использовать графический процессор в качестве параллельного процессора общего назначения. Вычисление шейдера похоже на другие программируемые построители текстур (вершина, пиксельные и геометрические), способные получить доступ к входным и выходным данным. Технология вычислений с шейдером также называется технологией DirectCompute. Вычисление шейдера интегрировано в Direct3D и доступно через устройство Direct3D. Он может напрямую обмениваться ресурсами памяти с графическими шейдерами с помощью устройства Direct3D. Однако он не подключен напрямую к другим этапам шейдера.

Шейдер вычислений предназначен для массовых приложений, выполняющих вычисления на интерактивных тарифах, когда затраты на переход между API (и связанным программным стеком) и ЦП занимают слишком много ресурсов.

У шейдера вычислений есть собственный набор состояний. В шейдере вычислений не обязательно наличие принудительного сопоставления 1-1 для входных записей (например, шейдер вершин) или выходных записей (например, шейдер пикселей). Некоторые функции шейдера графики поддерживаются, но другие были удалены, поэтому можно добавлять новые функции для работы с шейдером вычислений.

Для поддержки функций, относящихся к шейдеру вычислений, теперь доступны несколько новых типов ресурсов, таких как буферы чтения и записи, текстуры и структурированные буферы.

Дополнительные сведения см. в разделе [Общие сведения о COMPUTE Shader](direct3d-11-advanced-stages-compute-shader.md) .

## <a name="dynamic-shader-linking"></a>Связывание динамического шейдера

Системы отрисовки должны работать с значительной сложностью при управлении шейдерами, в то же время предоставляя возможность оптимизировать код шейдера. Это еще более сложная задача, поскольку шейдеры должны поддерживать множество различных материалов в отображаемой сцене для различных конфигураций оборудования. Чтобы решить эту проблему, разработчики шейдеров часто применяют один из двух общих подходов. Они либо создали полнофункциональные геометрические шейдеры общего назначения, которые можно использовать в самых разных элементах сцены, которые выдают некоторую производительность для гибкости или создали отдельные шейдеры для каждого потока геометрии, типа материала или сочетания типов освещения.

Эти крупные шейдеры общего назначения обрабатывают эту проблему путем повторной компиляции того же шейдера с различными определениями препроцессора, и последний метод использует для достижения того же результата функцию повышения уровня. Развертывание перестановки шейдеров часто было проблемой для разработчиков, которые теперь должны управлять тысячами различных перестановок шейдеров в игре и в рамках конвейера активов.

Direct3D 11 и Shader Model 5 предоставляют объектно-ориентированные конструкции языка и обеспечивают поддержку среды выполнения для связывания шейдеров, чтобы помочь разработчикам программировать.

Дополнительные сведения см. в разделе [Динамическая компоновка](/windows/desktop/direct3dhlsl/overviews-direct3d-11-hlsl-dynamic-linking) .

## <a name="multithreading"></a>Многопоточность

Многие графические приложения привязаны к ЦП из-за дорогостоящих действий, таких как обход графа сцены, сортировка объектов и моделирование физических ресурсов. Поскольку многоядерные системы становятся все более доступными, Direct3D 11 улучшена поддержка многопоточности для обеспечения эффективного взаимодействия между несколькими потоками ЦП и интерфейсами API D3D11 Graphics.

Direct3D 11 обеспечивает следующие функциональные возможности для поддержки многопоточности.

-   Параллельные объекты создаются в отдельных потоках. Благодаря этому функции точки входа, создающие объекты, могут создавать объекты в свободной потоке. Например, приложение теперь может компилировать шейдер или загружать текстуру в одном потоке при отрисовке на другом.
-   Списки команд можно создавать в нескольких потоках — список команд — записанная последовательность графических команд. С помощью Direct3D 11 можно создавать списки команд в нескольких потоках ЦП, что позволяет выполнять параллельный обход базы данных сцены или потоковой обработки в нескольких обсуждениях. Это освобождает основной поток отрисовки для отправки буферов команд на оборудование.

Дополнительные сведения см. в разделе [многопоточность](overviews-direct3d-11-render-multi-thread.md) .

## <a name="tessellation"></a>Тесселяция

Тесселяцию можно использовать для визуализации одной модели с различными уровнями детализации. При таком подходе создается более геометрическая модель, которая зависит от уровня детализации, необходимой для сцены. Тесселяцию можно использовать в сцене, где уровень детализации допускает более низкую геометрическую модель, что сокращает потребность в пропускной способности памяти, потребляемой во время подготовки к просмотру.

В Direct3D тесселяция реализуется на GPU, чтобы вычислить гладкую изогнутую поверхность от грубого (менее подробного) входного исправления. Каждый (четырехъядерный или треугольниковый) фрагмент исправлений делится на небольшие треугольные лица, которые более приближены к желаемой области.

Сведения о реализации тесселяции в графическом конвейере см. в разделе [Общие сведения о тесселяции](direct3d-11-advanced-stages-tessellation.md).

## <a name="full-listing-of-features"></a>Полный список функций

Это полный список функций Direct3D 11.

-   Вы можете запустить Direct3D 11 на [оборудовании нижнего](overviews-direct3d-11-devices-downlevel.md) уровня, задающего [уровень функций](overviews-direct3d-11-devices-downlevel-intro.md) при создании устройства.
-   Тесселяцию можно выполнить (см. раздел [Общие сведения о тесселяции](direct3d-11-advanced-stages-tessellation.md)), используя следующие типы шейдеров:

    -   Шейдер поверхности
    -   Шейдер доменов

-   Direct3D 11 поддерживает многопоточность (см. [многопоточность](overviews-direct3d-11-render-multi-thread.md)).

    -   Потоковый ресурс/шейдер/создание объекта
    -   Создание многопоточного списка экранов

-   Direct3D 11 расширяет шейдеры следующими функциями (см. [модель шейдера 5](/windows/desktop/direct3dhlsl/overviews-direct3d-11-hlsl)).

    -   Ресурсы с адресацией — текстуры, буферы констант и пробы
    -   Дополнительные типы ресурсов, например буферы чтения и записи и текстуры (см. раздел [новые типы ресурсов](direct3d-11-advanced-stages-cs-resources.md)).
    -   Подпрограмм
    -   Вычислительный шейдер (см. [Общие сведения о вычислении шейдера](direct3d-11-advanced-stages-compute-shader.md)) — шейдер, который ускоряет вычисления путем деления пространства проблем между несколькими программными потоками или группами потоков, а также совместного использования данных между регистрами шейдеров для значительного сокращения объема данных, необходимых для ввода в шейдер. Алгоритмы, которые могут значительно улучшить вычислительные шейдеры, включают обработку, анимацию, физику и искусственный интеллект.
    -   Шейдер геометрии (см. раздел [функции шейдера Geometry](/windows/desktop/direct3dhlsl/overviews-direct3d-11-hlsl-gs-features))

        -   Создание экземпляров. позволяет шейдеру Geometry выводить максимум 1024 вершин или любое сочетание экземпляров и вершин до 1024 (максимум 32 экземпляров 32 вершин).

    -   Построитель текстуры

        -   Покрытие в качестве входных данных PS
        -   Программируемая интерполяция входных данных. шейдер пикселей может оценивать атрибуты в пикселях в любом месте сетки с несколькими образцами.
        -   Центроид выборка атрибутов должен соблюдать следующие правила.

            -   Если охвачены все примеры в примитиве, то атрибут вычисляется в пикселном центре независимо от того, имеется ли образец образца в центре пикселей.
            -   В противном случае атрибут вычисляется в первом охваченном примере, то есть пример с наименьшим индексом среди всех индексов выборки. В этом случае пример покрытия определяется после применения логической операции AND к покрытию и состояния средства прорисовки образца маски.
            -   Если ни один из примеров не охватывает (например, на вспомогательных точках, которые выполняются с границами примитива для заполнения меток пикселей 2x2), атрибут вычисляется одним из следующих способов:

                -   Если состояние средства прорисовки выборки маски является подмножеством образцов в пикселе, первый пример, покрываемый состоянием средства отображения кода выборки маски, — это точка оценки.
                -   В противном случае в условиях полной выборки маски точка в точках является точкой оценки.

-   Direct3D 11 расширяет текстуры (см. [Общие сведения о текстурах](overviews-direct3d-11-resources-textures.md)) со следующими функциями.

    -   Gather4

        -   Поддержка текстур с несколькими компонентами — укажите канал для загрузки.
        -   Поддержка программируемых смещений

    -   Потоковая передача

        -   Текстурные срезы для ограничения предварительной загрузки WDDM

    -   пределы для текстур 16 КБ
    -   Требовать 8 бит субтексел и MIP точность для фильтрации текстур
    -   Новые форматы сжатия текстур (1 новый формат LDR и 1 новый формат HDR)

-   Direct3D 11 поддерживает консервативный Одепс. Этот алгоритм позволяет шейдеру пикселей сравнивать значение глубины попикселя шейдера пикселей с помощью средства программной прорисовки. Результат позволяет выполнять операции отбора с ранней глубиной, сохраняя при этом возможность вывода Одепс из шейдера пикселей.
-   Direct3D 11 поддерживает большой объем памяти

    -   Разрешить ресурсы > 4 ГБ
    -   Не используйте 32-разрядные индексы ресурсов, но больше ресурсов

-   Direct3D 11 поддерживает улучшения потокового вывода

    -   Исходящий потоковый выход
    -   Увеличить число выходных данных потока до 4
    -   Изменение всех буферов вывода потока на несколько элементов

-   Direct3D 11 поддерживает модель шейдера 5 (см. [модель шейдера 5](/windows/desktop/direct3dhlsl/d3d11-graphics-reference-sm5))

    -   Double с указанием нормы
    -   Инструкция SET разрядов счетчика
    -   Найти первую поразрядную инструкцию SET
    -   Обработка в процессе выполнения и переполнения
    -   Побитовые инструкции по реверсированию для Ффтс
    -   Встроенная функция условного переключения
    -   Resinfo: для буферов
    -   Обратная точность с сокращенной точностью
    -   Инструкции по преобразованию шейдеров — FP16 в FP32 и наоборот
    -   Структурированный буфер — новый тип буфера, содержащий структурированные элементы.

-   Direct3D 11 поддерживает представления "глубина" или "набор элементов только для чтения"

    -   Отключает запись в часть, доступную только для чтения, позволяет использовать текстуру в качестве входных данных и для отбора по глубине

-   Direct3D 11 поддерживает Рисование косвенных Direct3D 10. реализует Дравауто, который принимает содержимое (сгенерированное графическим процессором) и визуализирует его (на GPU). Direct3D 11 обобщает Дравауто, чтобы его можно было вызывать с помощью шейдера вычислений с использованием Дравинстанцед и Дравиндексединстанцед.
-   Direct3D 11 поддерживает различные функции

    -   Окна просмотра с плавающей запятой
    -   Фиксация mipmapности по ресурсам
    -   Смещение глубины. Этот алгоритм обновляет поведение смещения глубины, используя состояние средства отображения программы-прорисовки. В результате исключаются сценарии, в которых вычисленный сдвиг может быть равен NaN.
    -   Ограничения ресурсов. индексы ресурсов по-прежнему должны быть <= 32 бит, но ресурсы могут быть больше 4 ГБ.
    -   Точность средства программной прорисовки
    -   Требования к MSAA
    -   Счетчики сокращены
    -   1-разрядный формат и фильтр текста удалены

## <a name="features-added-in-previous-releases"></a>Функции, добавленные в предыдущих выпусках

Список функций, добавленных в предыдущих выпусках, см. в следующих разделах:

-   [новые возможности пакета SDK для 2009 Windows 7 и Direct3D 11](dx11-whats-new.md)
-   [Новые возможности Direct3D 11 (ознакомительная техническая версия) за Ноябрь 2008](dx11-08nov-whats-new.md)

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Новые возможности Direct3D 11](dx-graphics-overviews-introduction.md)
</dt> </dl>

 

 