---
title: Технология Direct3D 11,3 консервативная растрирование
description: Консервативная растрирование добавляет некоторую степень уверенности в отрисовку пикселей, что полезно для алгоритмов обнаружения столкновений.
ms.assetid: 83F223C0-9282-4149-86CF-471B88829F76
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 003cb7e31c1380943318b34f9308f6b5e72d6e51
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104260981"
---
# <a name="direct3d-113-conservative-rasterization"></a>Технология Direct3D 11,3 консервативная растрирование

Консервативная растрирование добавляет некоторую степень уверенности в отрисовку пикселей, что полезно для алгоритмов обнаружения столкновений.

-   [Обзор](#overview)
-   [Взаимодействие с конвейером](#interactions-with-the-pipeline)
-   [Сведения о реализации](#implementation-details)
-   [Сводка по API](#api-summary)
-   [См. также](#related-topics)

## <a name="overview"></a>Обзор

Консервативная растрирование означает, что все пиксели, которые по крайней мере частично охвачены визуализированным примитивом, растрируются, то есть вызывается шейдер пикселей. Нормальным поведением является выборка, которая не используется, если включена консервативная растрирование.

Консервативная растрирование полезна в ряде ситуаций, в том числе для обеспечения достаточной уверенности в обнаружении столкновений, перекрытияного отбора и обнаружения видимости.

Например, на следующем рисунке показан зеленый треугольник, отображаемый с использованием консервативной растрирования. Область Браун называется «областью неопределенности» — регион, в котором ошибки округления и другие проблемы приводят некоторой неопределенности к точным измерениям треугольника. Красные треугольники на каждой вершине показывают, как рассчитывается область неопределенности. Крупные серые квадраты показывают Пиксели, которые будут отображены. Розовые квадраты показывают Пиксели, отображаемые с помощью "верхнего левого правила", которые воспроизводятся как край треугольника, пересекающий границу пикселов. Могут воздержаться ложные срабатывания (набор пикселей, который не должен быть), который система обычно, но не всегда исключает.

![Отображение верхнего левого правила](images/conservative-rasterization-0.png)

## <a name="interactions-with-the-pipeline"></a>Взаимодействие с конвейером

Дополнительные сведения о том, как консервативная растрирование взаимодействует с графическим конвейером, см. в разделе [D3D12 консервативная растрирование](/windows/desktop/direct3d12/conservative-rasterization).

## <a name="implementation-details"></a>Сведения о реализации

Тип растрирования, поддерживаемый Direct3D 12, иногда называется «неоцененной экономией». Также существует понятие "неполная оценка консервативной растеризации", что означает, что только пикселы, полностью охваченные визуализированным примитивом, растрируются. Некоторая консервативная информация о растрировании доступна через шейдер пикселей за счет использования данных о покрытии, а в качестве режима растрирования доступен только неоцененная консервативная растрирование.

Если какая-либо часть примитива перекрывает пиксел, то этот пиксель считается охваченным и затем растрируются. Когда край или угол примитива попадают вдоль края или угла пикселя, применение "верхнего левого правила" зависит от реализации. Однако для реализаций, поддерживающих дегенерирование треугольников, вырожденный треугольник на границе или углу должен охватывать по крайней мере один пиксель.

Консервативные реализации растрирования могут различаться на разных устройствах и выдавать ложные срабатывания, то есть они могут неправильно решить, что пикселы охвачены. Это может произойти из-за сведений, относящихся к реализации, таких как примитивное увеличение или привязка ошибок, присущих координатам вершин с фиксированной точкой, которые используются при растрировании. Причина ложного срабатывания (по отношению к координатам вершин с фиксированной точкой) является допустимой, так как требуется определенное количество ложных положительных результатов, чтобы реализация выполняла оценку покрытия для вершин с привязкой к ним (т. е. координаты вершин, преобразованные из 16,8 плавающей запятой в фиксированную точку с плавающей запятой), но учитывают покрытие, полученное исходными координатами

Консервативные реализации растрирования не создают ложные отрицательные значения относительно координат вершин с плавающей запятой для вырожденных примитивов после привязки: Если какая-либо часть примитива пересекается с любой частью пикселя, то этот пиксель будет растрирования.

Треугольники, которые выявляются вырожденными (повторяющимися индексами в буфере индексов или коллинеарности в трехмерной области), или становятся вырожденными после преобразования с фиксированной запятой (в средствах формирования программной прорисовки), могут быть или не изменяться. Оба являются допустимыми поведениями. Дегенерация треугольников должна считаться обратной стороной, поэтому если для приложения требуется определенное поведение, оно может использовать исключение обратной стороны или тест для внешнего доступа. Вырожденные треугольники используют значения, присвоенные вершине 0 для всех интерполяций значений.

В дополнение к тому, что оборудование не поддерживает эту функцию, существует три уровня поддержки оборудования.

-   Уровень 1 поддерживает области неопределенности 1/2 пикселей и не создает отправку после привязки. Это удобно для мозаичной отрисовки, текстуры Atlas, создания светлых карт и теневых карт в виде точек.
-   На уровне 2 добавляются дегенерация после привязки и 1/256 неопределенности. Также добавлена поддержка ускорения алгоритма на основе ЦП (например, вокселизатион).
-   На уровне 3 добавляется 1/512 областей неопределенности, внутреннее покрытие ввода и поддержка перекрытияного отбора. Покрытие ввода добавляет новое значение `SV_InnerCoverage` в язык штриховки высокого уровня (HLSL). Это 32-разрядное скалярное целое число, которое может быть задано для входных данных в шейдер пикселей, а также представляет собой неоцененную информацию о растрирования (то есть, гарантируется ли полностью покрытая точка).

## <a name="api-summary"></a>Сводные данные API

Следующие методы, структуры, перечисления и вспомогательные классы ссылаются на консервативную растрирование:

-   [**D3D11 \_ Средство программной ПРОРИСОВКи \_ DESC2**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_rasterizer_desc2) : структура, содержащая описание средства программной прорисовки, с указанием вспомогательного класса CD3D12 средства программной \_ прорисовки \_ для создания описаний средства растеризации.
-   [**D3D11 \_ КОНСЕРВАТИВНый \_ \_ режим растрирования**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_conservative_rasterization_mode) : перечисление значений для режима (включено или выключено).
-   [**D3D11 \_ FEATURE \_ Data \_ D3D11 \_ OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2) : структура, содержащая уровень поддержки.
-   [**D3D11 \_ КОНСЕРВАТИВНый \_ \_ уровень растрирования**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_conservative_rasterization_tier) : перечислимые значения для каждого уровня поддержки оборудования.
-   [**ID3D11Device:: чеккфеатуресуппорт**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-checkfeaturesupport) : метод для доступа к поддерживаемым функциям.

## <a name="related-topics"></a>См. также
* [Функции Direct3D 11,3](direct3d-11-3-features.md)