---
title: Переход на Direct3D 11
description: В этом разделе приводятся сведения о переходе на Direct3D 11 из более ранней версии Direct3D.
ms.assetid: 3ec8b5c2-01e6-4fbe-ada7-43898db63bbe
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 83ade0a0d32d3f8b5c07e6653955c0c407c8fa8f
ms.sourcegitcommit: ae73f4dd3cf5a3c6a1ea7d191ca32a5b01f6686b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/08/2020
ms.locfileid: "104339460"
---
# <a name="migrating-to-direct3d-11"></a>Переход на Direct3D 11

В этом разделе приводятся сведения о переходе на Direct3D 11 из более ранней версии Direct3D.

-   [Direct3D 9 – Direct3D 11](#direct3d-9-to-direct3d-11)
-   [Direct3D 10 до Direct3D 11](#direct3d-10-to-direct3d-11)
    -   [Перечисления и определение](#enumerations-and-defines)
    -   [Структуры](#structures)
    -   [Интерфейсы](#interfaces)
    -   [Другие связанные технологии](#other-related-technologies)
-   [Direct3D 10,1 до Direct3D 11](#direct3d-101-to-direct3d-11)
    -   [Перечисления и определение](#enumerations-and-defines)
    -   [Структуры](#structures)
    -   [Интерфейсы](#interfaces)
-   [Новые возможности Direct3D 11](#new-features-for-direct3d-11)
-   [Новые возможности DirectX 11,1](#new-features-for-directx-111)
-   [Новые возможности DirectX 11,2](#new-features-for-directx-112)
-   [См. также](#related-topics)

## <a name="direct3d-9-to-direct3d-11"></a>Direct3D 9 – Direct3D 11

API Direct3D 11 основан на усовершенствованиях инфраструктуры, сделанных в Direct3D 10 и 10,1. Перенос с Direct3D 9 на Direct3D 11 аналогичен переходу с Direct3D 9 на Direct3D 10. Ниже приведены основные проблемы, связанные с этими усилиями.

-   Удаление всех фиксированных конвейеров функций в пользу программируемых шейдеров, созданных исключительно в HLSL (скомпилированных с помощью D3DCompiler, а не D3DX9).
-   Управление состоянием на основе неизменяемых объектов, а не отдельных переключателей состояния.
-   Обновление в соответствии с строгой компоновкой входных макетов буфера вершин и сигнатур шейдеров.
-   Связывание представлений ресурсов шейдера со всеми ресурсами текстуры.
-   Сопоставление всего содержимого изображения с \_ форматом DXGI, включая удаление всех 16-разрядных цветовых форматов (5/5/5/1, 5/6/5, 4/4/4/4), удаление всех 24-разрядных цветовых форматов (8/8/8) и ограничение порядка цветов RGB.
-   Разбиение использования состояния глобальной константы в несколько небольших, более эффективных обновленных буферов констант.

Дополнительные сведения о переходе с Direct3D 9 на Direct3D 10 см. [в статье вопросы Direct3D 9 и Direct3D 10](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-d3d9-to-d3d10-considerations).

## <a name="direct3d-10-to-direct3d-11"></a>Direct3D 10 до Direct3D 11

Преобразование программ, написанных для использования API Direct3D 10 или 10,1, является прямым процессом, так как Direct3D 11 является расширением существующего API. Только одно небольшое исключение (отмеченное ниже — Монохромная Фильтрация текста), все методы и функции Direct3D 10/10.1 доступны в Direct3D 11. В приведенной ниже структуре описаны различия между двумя API-интерфейсами для обновления существующего кода. Ниже приведены основные отличия.

-   Операции отрисовки (прорисовка, состояние и т. д.) больше не являются частью интерфейса устройства, а являются частью нового интерфейса Девицеконтекст, а также методами Map/unrender и Device Query.
-   В Direct3D 11 включены все улучшения и изменения, внесенные между Direct3D 10,0 и 10,1.

### <a name="enumerations-and-defines"></a>Перечисления и определение



| Direct3D 10                            | Direct3D 11                                                                                                                                                                                                                                                                                                                                                                                                                  |
|----------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_Формат DXGI                           | [**DXGI \_ Определен формат**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format)нескольких новых форматов DXGI.<br/>                                                                                                                                                                                                                                                                                                                                |
| D3D10 \_ создать \_ \_ Переключение устройства \_ на \_ ссылку | [**D3D11 \_ Создание \_ \_ коммутатора устройства \_ для \_ ссылки**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_create_device_flag)на функцию Switch-to-ref не поддерживается Direct3D 11.<br/>                                                                                                                                                                                                                                                                        |
| \_Тип драйвера \_ D3D10                    | [**D3D \_ \_Тип драйвера**](/windows/desktop/api/D3DCommon/ne-d3dcommon-d3d_driver_type)Обратите внимание, что идентификаторы перечисления в [**\_ \_ типе драйвера D3D**](/windows/desktop/api/D3DCommon/ne-d3dcommon-d3d_driver_type) были переопределены из идентификаторов в [**\_ \_ типе драйвера D3D10**](/windows/desktop/api/d3d10misc/ne-d3d10misc-d3d10_driver_type). Поэтому следует использовать идентификаторы перечисления вместо литеральных чисел.<br/> [**D3D \_ \_Тип драйвера**](/windows/desktop/api/D3DCommon/ne-d3dcommon-d3d_driver_type) определен в D3Dcommon. h.<br/> |
| \_ \_ Флаг прочих ресурсов \_ D3D10            | [**D3D11 \_ \_ \_ Флаг прочих ресурсов**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag)Обратите внимание, что многие из этих флагов были переопределены, поэтому не забудьте использовать идентификаторы перечисления вместо литеральных чисел.<br/>                                                                                                                                                                                                                                |
| \_Фильтр D3D10                          | [**D3D11 \_ ФИЛЬТР**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_filter)Обратите внимание на то, что фильтрация текста D3D10 \_ Filter \_ Text \_ 1BIT была удалена из Direct3D 11. См. DirectWrite.<br/>                                                                                                                                                                                                                                                                            |
| \_Счетчик D3D11                         | [**D3D11 \_ Обратите**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_counter)внимание, что счетчики, независимые от поставщика, были удалены для Direct3D 11, так как они были редко поддерживаются.<br/>                                                                                                                                                                                                                                                                          |
| D3D10 \_ x                               | D3D11 \_ x многие перечисления и определения одинаковы, имеют больше ограничений или имеют дополнительные значения.<br/>                                                                                                                                                                                                                                                                                                               |



 

### <a name="structures"></a>Структуры



| Direct3D 10                              | Direct3D 11                                                                                                                                                 |
|------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_ \_ Запись объявления D3D10 \_            | [**D3D11 \_ Так \_ что \_ запись объявления**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_so_declaration_entry)добавляет Stream.<br/>                                                                  |
| D3D10 \_ Blend, \_ DESC                       | [**D3D11 \_ СМЕШАТЬ \_ DESC**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_blend_desc)Примечание. Эта структура значительно изменилась с 10 до 10,1, чтобы обеспечить состояние смешения для каждого целевого объекта прорисовки<br/> |
| D3D10 \_ буфер \_ DESC                      | [**D3D11 \_ В БУФЕРе \_ DESC**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_buffer_desc)добавляется структуребитестриде для использования с ресурсами шейдера вычислений<br/>                                 |
| \_Представление ресурсов шейдера D3D10 ( \_ \_ \_ DESC)      | [**D3D11 \_ Примечание к \_ \_ представлению \_ ресурсов шейдера**](/windows/desktop/api/d3d11/ns-d3d11-d3d11_shader_resource_view_desc)в этой структуре добавлены дополнительные члены объединения для 10,1<br/>    |
| \_ \_ Представление набора элементов глубины D3D10, \_ \_ DESC        | [**D3D11 \_ \_ \_ Представление трафарета \_ глубины**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_depth_stencil_view_desc)содержит новый элемент flags.<br/>                                                |
| \_ \_ \_ Статистика конвейера данных D3D10 запросов \_ | [**D3D11 \_ \_ \_ \_ Статистика конвейера данных запросов**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_query_data_pipeline_statistics)добавляет несколько новых счетчиков этапа шейдера.<br/>                  |
| D3D10 \_ x                                 | D3D11 \_ x. Многие структуры идентичны двум интерфейсам API.<br/>                                                                                     |



 

### <a name="interfaces"></a>Интерфейсы



| Direct3D 10        | Direct3D 11                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ID3D10Device       | [**ID3D11Device**](/windows/desktop/api/D3D11/nn-d3d11-id3d11device) и [ **ссылку ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)<br/> Интерфейс устройства был разбит на эти две части. Для быстрого переноса можно использовать [**ID3D11Device:: жетиммедиатеконтекст**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-getimmediatecontext).<br/> Методы "ID3D10Device:: Жеттекстфилтерсизе" и "Сеттекстфилерсизе" больше не существуют. См. DirectWrite.<br/> Создание \* шейдера принимает дополнительный необязательный параметр для [**ID3D11ClassLinkage**](/windows/desktop/api/D3D11/nn-d3d11-id3d11classlinkage).<br/> \*Сетшадер и \* Shader принимают дополнительные необязательные параметры для [**ID3D11ClassInstance**](/windows/desktop/api/D3D11/nn-d3d11-id3d11classinstance).<br/> [**Креатежеометришадервисстреамаутпут**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-creategeometryshaderwithstreamoutput) принимает массив и подсчитывает количество шагов в нескольких шагах вывода потока.<br/> Предельное значение параметра Нументриес для [**креатежеометришадервисстреамаутпут**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-creategeometryshaderwithstreamoutput) увеличилось до D3D11 \_ , \_ поэтому \_ число потоков \* D3D11 \_ , поэтому \_ \_ число компонентов вывода \_ в Direct3D 11.<br/> |
| ID3D10Buffer       | [**ID3D11Buffer**](/windows/desktop/api/D3D11/nn-d3d11-id3d11buffer)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ID3D10SwitchToRef  | [**ID3D11SwitchToRef**](/windows/desktop/api/D3D11SDKLayers/nn-d3d11sdklayers-id3d11switchtoref) Функция Switch-to-ref не поддерживается в Direct3D 11.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ID3D10Texture1D    | [**ID3D11Texture1D**](/windows/desktop/api/D3D11/nn-d3d11-id3d11texture1d)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ID3D10Texture2D    | [**ID3D11Texture2D**](/windows/desktop/api/D3D11/nn-d3d11-id3d11texture2d)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ID3D10Texture3D    | [**ID3D11Texture3D**](/windows/desktop/api/D3D11/nn-d3d11-id3d11texture3d) Методы Map и unfrom были перемещены в [**ссылку ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext), а все методы карт [**используют \_ сопоставленный D3D11 \_ подресурс**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_mapped_subresource) , а не void \* \* .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ID3D10Asynchronous | [**ID3D11Asynchronous**](/windows/desktop/api/D3D11/nn-d3d11-id3d11asynchronous) Begin, End и GetData были перемещены в [**ссылку ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ID3D10x            | ID3D11x. Многие интерфейсы идентичны двум интерфейсам API.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |



 

### <a name="other-related-technologies"></a>Другие связанные технологии



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>решение 10/10.1</th>
<th>11 решение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Интерфейсы API отражения HLSL (D3D10Compile *, D3DX10Compile*) и шейдер</td>
<td>D3DCompiler (см. D3DCompiler. h)
<blockquote>
[!Note]<br />
Для приложений Магазина Windows API- <a href="/windows/desktop/direct3dhlsl/dx-graphics-d3dcompiler-reference">интерфейсы D3DCompiler</a> поддерживаются только для разработки, но не для развертывания.
</blockquote>
<br/></td>
</tr>
<tr class="even">
<td>Эффекты 10</td>
<td><a href="https://github.com/Microsoft/FX11">Эффекты 11</a> доступны в качестве общего источника в сети.
<blockquote>
[!Note]<br />
Это решение не подходит для приложений Магазина Windows, так как оно требует использования <a href="/windows/desktop/direct3dhlsl/dx-graphics-d3dcompiler-reference">API-интерфейсов D3DCompiler</a> во время выполнения (развертывание).
</blockquote>
<br/></td>
</tr>
<tr class="odd">
<td>D3DX9/D3DX10 Math</td>
<td><a href="/windows/desktop/dxmath/directxmath-portal">DirectXMath</a></td>
</tr>
<tr class="even">
<td>D3DX10</td>
<td>D3DX11 в устаревшей версии пакета SDK DirectX <a href="https://github.com/Microsoft/DirectXTex">директкстекс</a>, <a href="https://github.com/Microsoft/DirectXTK">директкстк</a>и <a href="https://github.com/Microsoft/DirectXMesh">директксмеш</a> предлагают альтернативы многим технологиям в устаревших библиотеках D3DX10 и D3DX11.<br/> <a href="/windows/desktop/Direct2D/direct2d-portal">Direct2D</a> и <a href="/windows/desktop/DirectWrite/direct-write-portal">DirectWrite</a> предлагают высококачественную поддержку для отрисовки линий и шрифтов в стиле.<br/></td>
</tr>
</tbody>
</table>



 

Сведения о устаревшем пакете SDK DirectX см. в разделе [где находится пакет DirectX SDK?](/windows/desktop/directx-sdk--august-2009-).

## <a name="direct3d-101-to-direct3d-11"></a>Direct3D 10,1 до Direct3D 11

Direct3D 10,1 является расширением интерфейса Direct3D 10, а все функции Direct3D 10,1 доступны в Direct3D 11. Большая часть переноса с 10,1 на 11 уже решена выше, чем с 10 до 11.

### <a name="enumerations-and-defines"></a>Перечисления и определение



| Direct3D 10,1          | Direct3D 11                                                                                                                                                                                                                                                                                                                                                                                                                     |
|------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| D3D10 \_ функция \_ level1 | [**D3D \_ \_Уровень компонентов**](/windows/desktop/api/D3DCommon/ne-d3dcommon-d3d_feature_level), идентичный, но определенный в D3DCommon. h, а также дополнение D3D \_ \_ уровня возможностей \_ 11 \_ 0 для 11 классов, а также с уровнем D3D уровня \_ \_ \_ 9 \_ 1, D3D на \_ \_ уровне функции \_ 9 \_ 2 и D3D \_ уровня функций \_ \_ 9 \_ 3 для 10level9<br/> (D3D10 \_ Уровень компонентов 9 \_ \_ \_ 1, D3D10 \_ \_ уровня Feature \_ 9 \_ 2 и D3D10 \_ \_ уровня \_ 9 \_ 3 были также добавлены для 10,1 в D3D10 \_ 1. h).<br/> |



 

### <a name="structures"></a>Структуры



| Direct3D 10,1                        | Direct3D 11                                                                                                                   |
|--------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| D3D10 \_ Blend \_ DESC1                  | [**D3D11 \_ BLEND \_ DESC**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_blend_desc)11 версия идентична 10,1.<br/>                                 |
| \_ \_ \_ DESC1 представления ресурсов шейдера \_ D3D10 | [**D3D11 \_ \_ \_ Представление \_ ресурсов шейдера**](/windows/desktop/api/d3d11/ns-d3d11-d3d11_shader_resource_view_desc)версия 11 равна версии 10,1.<br/> |



 

### <a name="interfaces"></a>Интерфейсы



| Direct3D 10,1             | Direct3D 11                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|---------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ID3D10Device1             | [**ID3D11Device**](/windows/desktop/api/D3D11/nn-d3d11-id3d11device) и [ **ссылку ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)<br/> Интерфейс устройства был разбит на эти две части. Для быстрого переноса можно использовать [**ID3D11Device:: жетиммедиатеконтекст**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-getimmediatecontext).<br/> Методы "ID3D10Device:: Жеттекстфилтерсизе" и "Сеттекстфилерсизе" больше не существуют. См. DirectWrite.<br/> Создание \* шейдера принимает дополнительный необязательный параметр для [**ID3D11ClassLinkage**](/windows/desktop/api/D3D11/nn-d3d11-id3d11classlinkage).<br/> \*Сетшадер и \* Shader принимают дополнительные необязательные параметры для [**ID3D11ClassInstance**](/windows/desktop/api/D3D11/nn-d3d11-id3d11classinstance).<br/> [**Креатежеометришадервисстреамаутпут**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-creategeometryshaderwithstreamoutput) принимает массив и подсчитывает количество шагов в нескольких шагах вывода потока.<br/> Предельное значение параметра Нументриес для [**креатежеометришадервисстреамаутпут**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-creategeometryshaderwithstreamoutput) увеличилось до D3D11 \_ , \_ поэтому \_ число потоков \* D3D11 \_ , поэтому \_ \_ число компонентов вывода \_ в Direct3D 11.<br/> |
| ID3D10BlendState1         | [**ID3D11BlendState**](/windows/desktop/api/D3D11/nn-d3d11-id3d11blendstate)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ID3D10ShaderResourceView1 | [**ID3D11ShaderResourceView**](/windows/desktop/api/D3D11/nn-d3d11-id3d11shaderresourceview)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |



 

## <a name="new-features-for-direct3d-11"></a>Новые возможности Direct3D 11

После обновления кода для использования API Direct3D 11 необходимо учитывать множество [новых возможностей](direct3d-11-features.md) .

-   Многопоточная визуализация с помощью списков команд и нескольких контекстов
-   Реализация расширенных алгоритмов с помощью COMPUTE Shader (с использованием профилей шейдера 4,0, 4,1 или 5,0)
-   Новые функции оборудования класса 11:
    -   Модель шейдера HLSL 5,0
    -   Динамическая компоновка шейдера
    -   Тесселяция через поверхности и шейдеры доменов
    -   Новые форматы блочного сжатия: BC6H для HDR-изображений, BC7 для стандартных изображений более высокого качества
-   Использование [технологии 10level9](overviews-direct3d-11-devices-downlevel.md) для отрисовки во многих моделях шейдеров 2,0 и shader Model 3,0 с помощью API DIrect3D 11 для поддержки низкоуровневых видеоаппаратных устройств в Windows Vista и Windows 7.
-   Использование устройства деформации программной отрисовки.

## <a name="new-features-for-directx-111"></a>Новые возможности DirectX 11,1

В Windows 8 включены дополнительные усовершенствования графики DirectX, которые следует учитывать при реализации кода DirectX Graphics, который включает в себя [Direct3D 11,1](direct3d-11-features.md), [DXGI 1,2](/windows/desktop/direct3ddxgi/dxgi-1-2-improvements), [модель видеодрайверов Windows (WDDM) 1,2](/windows-hardware/drivers/display/wddm-in-windows-8), оборудование [уровня компонентов](overviews-direct3d-11-devices-downlevel-intro.md) 11,1, Direct2Dи устройств и другие улучшения.

Частичная поддержка [Direct3D 11,1](direct3d-11-features.md) доступна в Windows 7, а также с помощью [обновления платформы для Windows 7](/windows/desktop/direct3darticles/platform-update-for-windows-7), которое доступно в [обновлении платформы для Windows 7](https://support.microsoft.com/kb/2670838).

## <a name="new-features-for-directx-112"></a>Новые возможности DirectX 11,2

Windows 8.1 включает [Direct3D 11,2](direct3d-11-2-features.md), [DXGI 1,3](/windows/desktop/direct3ddxgi/dxgi-1-3-improvements)и другие улучшения.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Руководство по программированию для Direct3D 11](dx-graphics-overviews.md)
</dt> <dt>

[Эффекты (Direct3D 11)](d3d11-graphics-programming-guide-effects.md)
</dt> </dl>

