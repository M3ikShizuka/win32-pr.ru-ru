---
title: Использование данных функций Direct3D 11 с дополнительными уровнями функций Direct3D
description: Узнайте, как проверить поддержку устройств для дополнительных функций, включая функции, которые были добавлены в последние версии Windows.
ms.assetid: 91D9706A-47C5-4220-8AC7-167095E74F74
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1dcc770812281ea89e8ebb68065aa68a00e1887d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104338084"
---
# <a name="using-direct3d-11-feature-data-to-supplement-direct3d-feature-levels"></a>Использование данных функций Direct3D 11 с дополнительными уровнями функций Direct3D

Узнайте, как проверить поддержку устройств для дополнительных функций, включая функции, которые были добавлены в последние версии Windows.

[Уровни функций Direct3D](overviews-direct3d-11-devices-downlevel-intro.md) указывают четко определенные наборы функций GPU, которые примерно соответствуют разным поколениям графического оборудования. Это значительно упрощает задачу проверки оборудования капаибилитиес, а также обеспечивает единообразную работу на широком массиве различных устройств.

Чтобы учесть некоторую дисперсию в различных аппаратных реализациях, включая устаревшее оборудование, мобильное оборудование и современное оборудование, некоторые функции считаются необязательными. Поддержку этих функций можно определить путем вызова [**ID3D11Device:: чеккфеатуресуппорт**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-checkfeaturesupport) и предоставления соответствующей \_ структуры данных о компоненте D3D11 \_ \_ \* . В этом разделе описываются различные функции Direct3D 11, как некоторые из них работают вместе и как можно избежать проверки каждой отдельной необязательной функции.

## <a name="how-to-check-for-optional-feature-support"></a>Как проверить поддержку дополнительных компонентов

Вызовите метод [**ID3D11Device:: чеккфеатуресуппорт**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-checkfeaturesupport), указав структуру, которая представляет необязательный компонент, который вы хотите использовать. Если метод возвращает значение **S \_**, это означает, что вы используете версию среды выполнения Direct3D, которая поддерживает дополнительный компонент. Если он возвращает **E \_ INVALIDARG**, это означает, что вы используете версию среды выполнения Direct3D 11 из до добавления дополнительного компонента. Это означает, что дополнительный компонент недоступен вместе с другими дополнительными функциями, появившимися в той же версии Direct3D 11 или более поздней версии.

## <a name="can-i-minimize-the-work-required-for-feature-support-checks"></a>Можно ли максимально ограничить работу, необходимую для проверки поддержки функций?

В дополнение к правильной среде выполнения Direct3D 11 (обычно связанной с версией Windows) графический драйвер также должен быть достаточно последним для поддержки дополнительного компонента. Спецификации WDDM нуждаются в поддержке дополнительных функций, если оборудование может их поддерживать. Поэтому, когда графический драйвер поддерживает одну из дополнительных функций, которые были добавлены в определенную версию Windows, обычно это означает, что графический драйвер поддерживает другие компоненты, добавленные в этой версии Windows. Например, если драйвер устройства поддерживает тени на уровне функций 9, значит драйвер устройства имеет значение не ниже WDDM 1,2.

**Примечание**    . Если устройство Microsoft Direct3D поддерживает [уровень компонентов](overviews-direct3d-11-devices-downlevel-intro.md) 11,1, то все дополнительные функции, указанные в [**\_ \_ \_ \_ параметрах D3D11 Data Feature D3D11**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options) , поддерживаются автоматически, за исключением **SAD4ShaderInstructions** и **екстендеддаублесшадеринструктионс**.

Среда выполнения всегда устанавливает следующие группы элементов одинаково. То есть все значения в группировании имеют **значение true** или **false** вместе:

-   **Дискардаписсинбидривер** и **флагсфорупдатеандкописинбидривер**
-   **Клеарвиев**, **копивисоверлап**, **константбуфферпартиалупдате**, **константбуффероффсеттинг** и **MapNoOverwriteOnDynamicConstantBuffer**
-   **Мапнувервритеондинамикбуфферсрв** и **мултисамплертввисфорцедсамплекаунтоне**

**Параметры 11,2 ([**\_ функция D3D11 \_ D3D11 \_ OPTIONS1**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_feature)).** дополнительные функции, указываемые этим полем, являются независимыми и должны проверяться по отдельности.

### <a name="feature-support-on-windows-rt-81-and-windows-phone-81-devices"></a>Поддержка функций на устройствах Windows RT 8,1 и Windows Phone 8,1

Устройства планшета Windows RT поддерживают различные уровни функций и дополнительные функции, оптимизированы для снижения энергопотребления и используют интегрированную графику вместо дискретных GPU. Приложения Магазина Windows для устройств ARM должны поддерживать уровень компонентов 9,1. Приложения DirectX для Windows RT должны воспользоваться преимуществами дополнительных функций, которые могут сэкономить электроэнергию и циклы, например простой способ создания экземпляров, если они доступны.

Windows Phone 8 мобильных устройств поддерживают функции уровня 9,3 с конкретными дополнительными функциями. См. раздел [уровень функций Direct3D 9 \_ 3 для Windows Phone 8](/previous-versions/windows/apps/jj714085(v=vs.105)).

## <a name="what-are-the-direct3d-11-optional-features"></a>Что такое дополнительные функции Direct3D 11?

В оставшейся части этой статьи описываются дополнительные функции, доступные в Direct3D 11,2. Компоненты описаны в хронологическом порядке, когда они были добавлены, чтобы можно было понять, какие функции относятся к разным версиям Direct3D 11.

## <a name="optional-compute-shader-support-for-feature-level-10"></a>Необязательная поддержка шейдера вычислений для уровня компонентов 10

Для устройств уровня "Feature" 10 доступна следующая функция:

**[**D3D11 \_ FEATURE \_ Data \_ D3D10 \_ X \_ \_ Параметры оборудования**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d10_x_hardware_options):** если это **так**, устройство поддерживает шейдеры вычислений. Сюда входит поддержка необработанных и структурированных буферов.

Если устройство с уровнем 10 \_ 0 или 10 \_ 1 поддерживает эту функцию, устройство не гарантирует поддержку шейдера вычислений 4,1. Приложения должны быть готовы к вычислению шейдера COMPUTE 4,0, если [**ID3D11Device:: креатекомпутешадер**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createcomputeshader) создает исключение с программой compute Shader 4,1.

## <a name="optional-capabilities-for-feature-level-9"></a>Дополнительные возможности для уровня функции 9

Для уровня Feature 9, начиная с Windows 8, добавляются следующие функции.

**[**\_ \_ \_ \_ Параметры d3d9 данных о функциях D3D11**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d9_options):** обозначает поддержку для перетекания текстурную адресацию с текстурами, не имеющими питания 2. Если это поддерживается, то \_ \_ \_ \_ с такими текстурами можно использовать D3D11 текстурный режим адресации.

**[**D3D11 \_ Feature \_ Data \_ d3d9 \_ \_ Поддержка теневой копии**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d9_shadow_support):** указывает поддержку для пробных образцов в 4,0 модели шейдеров с уровнем "9 x" на уровне компонентов \_ . Он используется для глубокого тестирования в шейдерах пикселей, что обеспечивает поддержку распространенных методов, таких как теневое сопоставление и наборы элементов.

Для устройств уровня Feature 9, начиная с Windows 8.1, добавлен следующий компонент:

**[**D3D11 \_ \_ данных функций \_ d3d9 \_ . \_ \_ Поддержка простого создания экземпляров**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d9_simple_instancing_support):** указывает поддержку простых возможностей создания экземпляров, которые могут быть доступны на оборудовании DirectX 9. Простой способ создания экземпляров означает, что все члены **инстанцедатастепрате** [**\_ элемента ввода D3D11 \_ \_ DESC**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_input_element_desc) Structures, используемые для определения макета ввода, должны быть равны 1. Устройства, поддерживающие уровень компонентов 9,3 или выше, уже включают полную поддержку создания экземпляров.

## <a name="optional-floating-point-precision-support-for-shader-programs"></a>Необязательная поддержка точности с плавающей запятой для программ шейдера

**[**\_ \_ \_ \_ \_ \_ Поддержка min для шейдера данных о функциях D3D11**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_shader_min_precision_support).** поля в этой структуре указывают длину чисел с плавающей запятой, если минимальная точность включена, или 0, если поддерживается только полная 32-разрядная точность с плавающей точкой.

Для устройств уровня Feature 9 минимальная точность для шейдера вершин может отличаться от шейдера пикселей. Точность шейдера вершин указывается в поле **аллосершадерстажесминпреЦисион** .

**[**D3D11 \_ данных о компонентах \_ \_**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_doubles).** устройства уровня Feature 11 могут поддерживать вычисление двойной точности в программах Shader Model 5,0. Поддержка вычислений двойной точности в шейдере означает, что плавающие числа можно преобразовать в Double в программе COMPUTE Shader, предоставляя преимущества вычислений с более высокой точностью в пределах каждого прохода шейдера. Перед записью в выходной буфер необходимо преобразовать числа двойной точности обратно в число с плавающей запятой. Обратите внимание, что деление двойной точности не обязательно поддерживается.

## <a name="additional-capabilities-for-direct3d-112"></a>Дополнительные возможности для Direct3D 11,2

В Direct3D 11,2 добавлены четыре новых дополнительных компонента, которые могут поддерживаться устройствами Direct3D 11. Эти функции находятся в структуре [**D3D11 \_ \_ данных функций \_ D3D11 \_ OPTIONS1**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options1) .

**Тиледресаурцестиер:** Обозначает поддержку мозаичных ресурсов и указывает поддерживаемый уровень уровня.

**Минмаксфилтеринг:** Указывает поддержку параметров фильтрации \_ \_ минимума \_ \* и D3D11 фильтра D3D11 \_ \_ \_ \* , которые сравнивают результат фильтрации с минимальным (или максимальным) значением. См. раздел [**D3D11 \_ Filter**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_filter).

**Клеарвиевалсосуппортсдепсонлиформатс:** Обозначает поддержку для очистки представлений ресурсов буфера глубины.

**Мапондефаултбуфферс:** Указывает поддержку сопоставления целевых буферов прорисовки, созданных с флагом **\_ использования D3D11 \_ по умолчанию** .

## <a name="tile-based-rendering"></a>Рендеринг на плитках

**[**\_ \_ \_ \_ Сведения об архитектуре данных компонента D3D11**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_architecture_info):** указывает, должны ли графические устройства отменять команды рендеринга и выполнять рендеринг на плитках по умолчанию. Это можно использовать в качестве подсказки для оптимизации подсистемы обработки графики.

## <a name="optional-features-for-development-and-debugging"></a>Дополнительные функции для разработки и отладки

**D3D11 \_ \_ \_ Параметры D3D11 данных \_ ::D искардаписсинбидривер.** вы можете отслеживать этот элемент во время разработки, чтобы исключить устаревшие драйверы на оборудовании, где в противном случае [**дискардвиев**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-discardview) и [**дискардресаурце**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-discardresource) могли бы быть полезными.

**[**\_ \_ \_ \_ Поддержка маркеров данных компонентов D3D11**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_marker_support).** поддерживается, если оборудование и драйвер поддерживают отметку данных для профилирования GPU.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Устройства](overviews-direct3d-11-devices.md)
</dt> </dl>

 

 