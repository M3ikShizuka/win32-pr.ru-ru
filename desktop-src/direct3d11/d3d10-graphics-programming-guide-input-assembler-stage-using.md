---
title: Использование System-Generated значений
description: Значения, формируемые системой, создаются этапом IA (на основе пользовательской семантики ввода) для обеспечения определенной эффективности операций шейдера.
ms.assetid: eed1e377-4b0e-4958-b6d4-945b2a952ad8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ccdc723d335fd78277051099ec05b43ed954174d
ms.sourcegitcommit: ca37395fd832e798375e81142b97cffcffabf184
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2021
ms.locfileid: "110335208"
---
# <a name="using-system-generated-values"></a>Использование System-Generated значений

Значения, формируемые системой, создаются этапом IA (на основе пользовательской [семантики](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-semantics)ввода) для обеспечения определенной эффективности операций шейдера.

Присоединив данные, такие как идентификатор экземпляра (видимые для VS), идентификатор вершины (видимый для VS) или идентификатор примитива (видимый для GS/PS), последующий этап шейдера может искать эти системные значения для оптимизации обработки на этом этапе. Например, этап VS может искать идентификатор экземпляра для получения дополнительных данных по вершинам шейдера или выполнения других операций. этапы GS и PS могут использовать примитивный идентификатор для получения данных одного примитива таким же образом.

-   [VertexID](#vertexid)
-   [примитивеид](#primitiveid)
-   [InstanceID](#instanceid)
-   [Пример](#example)
-   [См. также](#related-topics)

## <a name="vertexid"></a>VertexID

Идентификатор вершины используется каждым этапом шейдера для идентификации каждой вершины. Это 32-разрядное целое число без знака, значение по умолчанию — 0. Он назначается вершине, когда примитив обрабатывается этапом IA. Присоедините семантику идентификатора вершины к объявлению ввода шейдера, чтобы сообщить этапу IA о создании идентификатора для каждой вершины.

IA добавит в каждую вершину идентификатор вершины для использования в стадиях шейдера. Для каждого вызова Draw идентификатор вершины увеличивается на 1. При индексированных вызовах метода рисования счетчик сбрасывается обратно в начальное значение. Для [**ссылку ID3D11DeviceContext::D равиндексед**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) и [**ссылку ID3D11DeviceContext::D равиндексединстанцед**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexedinstanced)идентификатор вершины представляет значение индекса. Если идентификатор вершины переполняется (превышает 2 ³ ² – 1), он переносится в 0.

Для всех примитивных типов вершины имеют идентификатор вершины, связанный с ними (независимо от соседства).

## <a name="primitiveid"></a>PrimitiveID

Каждый этап шейдера использует примитивный идентификатор для идентификации каждого примитива. Это 32-разрядное целое число без знака, значение по умолчанию — 0. Он назначается примитиву, когда примитив обрабатывается стадией IA. Чтобы сообщить этапу IA о создании примитивного идентификатора, присоедините семантику примитивного идентификатора к объявлению ввода шейдера.

На этапе IA будет добавлен примитивный идентификатор для каждого примитива для использования шейдером geometry или на этапе построителя текстуры (в зависимости от первого этапа, активного после этапа IA). Для каждого поиндексированного вызова Draw идентификатор примитива увеличивается на 1, однако при каждом запуске нового экземпляра примитивный идентификатор сбрасывается в 0. Все остальные вызовы Draw не изменяют значение идентификатора экземпляра. Если идентификатор экземпляра переполняется (превышает 2 ³ ² – 1), он переносится в 0.

На этапе шейдера пикселей не предусмотрены отдельные входные данные для примитивного идентификатора; Однако все входные шейдеры пикселей, в которых указан примитивный идентификатор, используют постоянный режим интерполяции.

Автоматическое создание примитивного идентификатора для смежных примитивов не поддерживается. Для примитивных типов с соседкой, например с лентой треугольника с соседкой, примитивный идентификатор поддерживается только для внутренних примитивов (несмежных примитивов), как и набор примитивов в полосковой ленте без соседей.

## <a name="instanceid"></a>InstanceID

Идентификатор экземпляра используется каждым этапом шейдера для идентификации экземпляра геометрии, который обрабатывается в данный момент. Это 32-разрядное целое число без знака, значение по умолчанию — 0.

На этапе IA в каждую вершину будет добавлен идентификатор экземпляра, если в объявлении ввода шейдера вершин содержится семантика идентификатора экземпляра. Для каждого поиндексированного вызова Draw идентификатор экземпляра увеличивается на 1. Все остальные вызовы Draw не изменяют значение идентификатора экземпляра. Если идентификатор экземпляра переполняется (превышает 2 ³ ² – 1), он переносится в 0.

## <a name="example"></a>Пример

На следующем рисунке показано, как системные значения присоединяются к полосковой полосе треугольника на стадии IA.

![иллюстрация системных значений для экземпляров полосы треугольников](images/d3d10-ia-example.png)

В таблицах ниже показаны системные значения, созданные для обоих экземпляров одной и той же полосы треугольников. Первый экземпляр (экземпляр U) показан синим цветом, второй экземпляр (экземпляр V) — зеленым. Сплошными линиями соединяются вершины в примитивах, штриховыми — смежные вершины.

В следующих таблицах показаны созданные системой значения для экземпляра U.



| Данные вершин    | C,U | D,U | E,U | F,U | G,U | H,U | I,U | J,U | K,U | L,U |
|----------------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|
| **VertexID**   | 0   | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   |
| **InstanceID** | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   |



 



|                 | Значение    | Значение    | Значение    |
|-----------------|-----|-----|-----|
| **примитивеид** | 0   | 1   | 2   |
| **InstanceID**  | 0   | 0   | 0   |



 

В следующих таблицах показаны созданные системой значения для экземпляра V.



| Данные вершин    | C,V | D,V | E,V | F,V | G,V | H,V | I,V | J,V | K,V | L,V |
|----------------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|
| **VertexID**   | 0   | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   |
| **InstanceID** | 1   | 1   | 1   | 1   | 1   | 1   | 1   | 1   | 1   | 1   |



 



|                 |Значение     | Значение    |  Значение   |
|-----------------|-----|-----|-----|
| **примитивеид** | 0   | 1   | 2   |
| **InstanceID**  | 1   | 1   | 1   |



 

Входной ассемблер создает идентификаторы (вершину, примитив и экземпляр); Кроме того, обратите внимание, что каждому экземпляру присваивается уникальный идентификатор экземпляра. Данные заканчиваются полосой вырезать, которая отделяет каждый экземпляр ленты треугольника.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Этап ввода-ассемблера](d3d10-graphics-programming-guide-input-assembler-stage.md)
</dt> </dl>

 

 