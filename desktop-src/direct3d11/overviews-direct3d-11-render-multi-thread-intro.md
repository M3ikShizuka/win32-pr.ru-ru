---
title: Вводные сведения о многопоточности в Direct3D 11
description: Многопоточность разработана для повышения производительности за счет выполнения работы с использованием одного или нескольких потоков одновременно.
ms.assetid: b4bef1e4-8d34-455c-8aed-01af974c66c8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 527b78d8b29a507247c8eb067c20739004ace687
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104337561"
---
# <a name="introduction-to-multithreading-in-direct3d-11"></a>Вводные сведения о многопоточности в Direct3D 11

Многопоточность разработана для повышения производительности за счет выполнения работы с использованием одного или нескольких потоков одновременно.

В прошлом это было сделано за счет создания одного основного потока для подготовки к просмотру и одного или нескольких потоков для выполнения подготовительной работы, такой как создание, Загрузка, обработка и т. д. Однако при встроенной синхронизации в Direct3D 11 Цель многопоточности состоит в том, чтобы использовать все циклы ЦП и GPU, не требуя от процессора ожидания другого процессора (в частности, не выполняя его, так как это напрямую влияет на частоту кадров). Таким образом, можно создать большую часть работы, сохранив при этом оптимальную частоту кадров. Понятие одного кадра для отрисовки больше не требуется, так как API реализует синхронизацию.

Для многопоточности требуется определенная форма синхронизации. Например, если несколько потоков, выполняемых в приложении, должны иметь доступ к контексту одного устройства ([**ссылку ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)), это приложение должно использовать некоторый механизм синхронизации, например критические разделы, для синхронизации доступа к этому контексту устройства. Это обусловлено тем, что обработка команд отрисовки (обычно выполняется на GPU) и создание команд отрисовки (обычно выполняется в ЦП посредством создания объектов, загрузки данных, изменения состояния, обработки данных) часто используют те же ресурсы (текстуры, шейдеры, состояние конвейера и т. д.). Для организации работы между несколькими потоками требуется синхронизация, чтобы предотвратить изменение или чтение одного потока данных, изменяемых другим потоком.

Хотя использование контекста устройства ([**ссылку ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)) не является потокобезопасным, использование устройства Direct3D 11 ([**ID3D11Device**](/windows/desktop/api/D3D11/nn-d3d11-id3d11device)) является потокобезопасным. Так как каждый **ссылку ID3D11DeviceContext** является однопотоковым, только один поток может вызвать **ссылку ID3D11DeviceContext** за раз. Если несколько потоков должны иметь доступ к одному **ссылку ID3D11DeviceContext**, они должны использовать какой-либо механизм синхронизации, например критические разделы, для синхронизации доступа к этому **ссылку ID3D11DeviceContext**. Однако нескольким потокам не требуется использовать критические разделы или примитивы синхронизации для доступа к одному **ID3D11Device**. Таким образом, если приложение использует **ID3D11Device** для создания объектов ресурсов, это приложение не обязано использовать синхронизацию для одновременного создания нескольких объектов ресурсов.

Поддержка многопоточности разделяет API на две различные функциональные области:

-   [Создание объектов с использованием многопоточности](overviews-direct3d-11-render-multi-thread-create.md)
-   [Немедленное и отложенное отображение](overviews-direct3d-11-render-multi-thread-render.md)

Производительность многопоточности зависит от поддержки драйверов. [Инструкции. Проверка наличия поддержки драйверов](overviews-direct3d-11-render-multi-thread-support.md) содержит дополнительные сведения о запросах к драйверу и о том, что означают результаты.

Direct3D 11 был разработан с нуля, чтобы поддерживать многопоточность. В Direct3D 10 реализована ограниченная поддержка многопоточности с помощью [потокобезопасного уровня](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-api-features-layers). На этой странице перечислены различия в поведении между двумя версиями DirectX: [различия в потоках между версиями Direct3D](overviews-direct3d-11-render-multi-thread-differences.md).

## <a name="multithreading-and-dxgi"></a>Многопоточность и DXGI

Только один поток за раз должен использовать непосредственный контекст. Однако приложение также должно использовать тот же поток для операций с графической инфраструктурой Microsoft DirectX (DXGI), особенно когда приложение выполняет вызовы метода [**идксгисвапчаин::P**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-present) повторной отправки.

> [!Note]  
> Недопустимо использовать непосредственный контекст параллельно с большинством функций интерфейса DXGI. В пакетах SDK для DirectX за Март 2009 и более поздних версий единственными функциями DXGI являются [**AddRef**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-addref), [**Release**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-release)и [**QueryInterface**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).

 

Дополнительные сведения об использовании DXGI с несколькими потоками см. в разделе [вопросы многопоточности](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Многопоточность](overviews-direct3d-11-render-multi-thread.md)
</dt> </dl>

 

 