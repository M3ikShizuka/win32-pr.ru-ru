---
title: Немедленное и отложенное отображение
description: 'Direct3D 11 поддерживает два типа отрисовки: немедленное и отложенное. Оба метода реализуются с помощью интерфейса ссылку ID3D11DeviceContext.'
ms.assetid: 8991be9f-c882-4752-9048-704fe4ae1725
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8740a957ec4b7f2edacb4b753c7f68230494b10cf33721ef6c2d869de334517b
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117912936"
---
# <a name="immediate-and-deferred-rendering"></a>Немедленное и отложенное отображение

Direct3D 11 поддерживает два типа отрисовки: немедленное и отложенное. Оба метода реализуются с помощью интерфейса [**ссылку ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext) .

## <a name="immediate-rendering"></a>Немедленное отображение

Немедленное отображение означает вызов API-интерфейсов отрисовки или команд с устройства, который помещает команды в буфер для выполнения на GPU. Используйте непосредственный контекст для подготовки к просмотру, задания состояния конвейера и воспроизведения списка команд.

Создайте непосредственный контекст с помощью [**D3D11CreateDevice**](/windows/desktop/api/D3D11/nf-d3d11-d3d11createdevice) или [**D3D11CreateDeviceAndSwapChain**](/windows/desktop/api/D3D11/nf-d3d11-d3d11createdeviceandswapchain).

## <a name="deferred-rendering"></a>Отложенная отрисовка

Отложенная визуализация записывает графические команды в буфер команд, чтобы их можно было воспроизводить в другое время. Используйте отложенный контекст для записи команд (отрисовка, а также параметра состояния) в список команд. Отложенная визуализация — это новая концепция Direct3D 11; Отложенная отрисовка разработана для поддержки отрисовки в одном потоке при записи команд для отрисовки в дополнительных потоках. Такая параллельная Многопотоковая стратегия позволяет разбивать сложные сцены на параллельные задачи. Дополнительные сведения о визуализации сложных сцен см. в разделе [многопроходная визуализация](overviews-direct3d-11-render-multipass.md).

Создайте отложенный контекст с помощью [**ID3D11Device:: креатедеферредконтекст**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdeferredcontext).

Direct3D создает издержки на подготовку к просмотру при постановке команд в буфер команд. В отличие от этого, [список команд](overviews-direct3d-11-render-multi-thread-command-list.md) выполняется гораздо эффективнее во время воспроизведения. Чтобы использовать список команд, записывайте команды подготовки к просмотру с отложенным контекстом и воспроизводите их обратно с помощью непосредственных контекстов.

В одном потоке можно создать только один список команд. Однако можно одновременно создавать и использовать несколько отложенных контекстов, каждый из которых находится в отдельном потоке. Затем можно использовать эти несколько отложенных контекстов для одновременного создания нескольких списков команд.

Нельзя одновременно воспроизвести несколько списков команд в непосредственных контекстах.

Чтобы определить, является ли контекст устройства медленным или отложенным контекстом, вызовите метод [**ссылку ID3D11DeviceContext:: GetType**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gettype).

Метод [**ссылку ID3D11DeviceContext:: Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) поддерживается только в отложенном контексте для динамических ресурсов ([**\_ \_ Динамическое использование D3D11**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_usage)), в котором первый вызов в списке команд является [**D3D11ной \_ \_ записью \_ отмены Map**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_map). **D3D11 \_ \_Запись Map \_ без \_ перезаписи** поддерживается в последующих вызовах, если они доступны для данного типа ресурса.

Запросы в отложенном контексте ограничены созданием данных и рисованием в предикате. Нельзя вызвать [**ссылку ID3D11DeviceContext:: GetData**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-getdata) в отложенном контексте для получения данных о запросе; метод **GetData** можно вызвать только в непосредственных контекстах для получения данных о запросе. Можно задать предикат отрисовки (тип запроса), вызвав [**D3D11DeviceContext:: сетпредикатион**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-setpredication) , чтобы использовать результаты запроса на GPU. Данные запроса можно создавать с помощью вызовов [**ссылку ID3D11DeviceContext:: Begin**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-begin) и [**ссылку ID3D11DeviceContext:: end**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-end). Однако данные запроса будут недоступны до тех пор, пока не будет вызван метод [**ссылку ID3D11DeviceContext:: вызова элемента executecommandlist**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-executecommandlist) в непосредственных контекстах для отправки списка отложенных команд контекста. Затем данные запроса обрабатываются графическим процессором.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Многопоточность](overviews-direct3d-11-render-multi-thread.md)
</dt> </dl>

 

 




