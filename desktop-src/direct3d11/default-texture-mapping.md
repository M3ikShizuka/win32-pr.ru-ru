---
title: Сопоставление текстур по умолчанию
description: Использование сопоставления текстур по умолчанию сокращает время копирования и использования памяти при совместном использовании данных изображений между GPU и ЦП.
ms.assetid: 77AF4BFA-09B5-4181-9408-002764F2A923
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f203c7590c3673d30315250b2b4ce2663e48c9c3
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104410958"
---
# <a name="default-texture-mapping"></a>Сопоставление текстур по умолчанию

Использование сопоставления текстур по умолчанию сокращает время копирования и использования памяти при совместном использовании данных изображений между GPU и ЦП. Однако его следует использовать только в конкретных ситуациях. Стандартный макет свиззле позволяет избежать копирования или группирующие данных в нескольких макетах.

-   [Обзор](#overview)
-   [API-интерфейсы D3D 11.3](#d3d113-apis)
-   [См. также](#related-topics)

## <a name="overview"></a>Обзор

Сопоставление текстур по умолчанию не должно быть первым выбором для разработчиков. Разработчики должны сначала выполнять код на отдельном языке GPU (т. е. не иметь доступа к ЦП для большинства текстур и передавать их с помощью [**CopySubresourceRegion1**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-copysubresourceregion1)). Но в некоторых случаях ЦП и GPU могут часто взаимодействовать в одних и тех же данных, что позволяет использовать текстуры по умолчанию для экономии энергии или для ускорения определенной архитектуры на определенных адаптерах или архитектурах. Приложения должны обнаружить эти случаи и оптимизировать ненужные копии.

В D3D 11.3 текстуры, созданные с помощью \_ макета текстуры D3D11, \_ \_ не определены (один элемент перечисления [**с \_ \_ макетом текстуры D3D11**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) ), а доступ ЦП не наиболее эффективен для частой отрисовки и выборки GPU. При тестировании производительности эти текстуры должны сравниваться с \_ \_ макетом текстуры D3D11 \_ , который не ОПРЕДЕЛЕН с помощью ЦП, и D3D11, \_ \_ Макет текстуры \_ размером 64 КБ \_ \_ , Стандартный свиззле с доступом к ЦП и D3D11 \_ \_ строки макета текстуры \_ \_ .

Использование \_ макета текстуры \_ D3D11 \_ undefine с доступом к ЦП позволяет методам [**вритетосубресаурце**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource), [**реадфромсубресаурце**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource), [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) (исключая доступ приложения к указателю) и отменять [**сопоставление**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap); но может пожертвовать производительность доступа GPU. Использование \_ макета текстуры \_ D3D11 \_ 64k \_ Standard \_ свиззле с доступом к ЦП позволяет **вритетосубресаурце**, **реадфромсубресаурце**, **Map** (который возвращает допустимый указатель на приложение) и **отменить сопоставление**. Это также может пожертвовать эффективность доступа GPU, чем D3D11ный \_ \_ Макет текстуры, не \_ определенный с помощью доступа ЦП.

Как правило, приложения должны создавать большую часть текстур как доступную только GPU, а структура текстуры D3D11 не \_ \_ \_ определена.

Ранее для функции сопоставления текстур по умолчанию был только один стандартизированный макет для многомерных данных: «линейная», также известная как «строка-основная». Приложения должны избегать использования \_ динамических текстур промежуточного хранения и использования, \_ если доступна схема по умолчанию. В \_ динамических текстурах для промежуточного использования и использования \_ используются линейные макеты.

D3D 11.3 (и D3D12) представляют собой стандартный многомерный макет данных. Это делается для того, чтобы несколько единиц обработки работали с одними и теми же данными без копирования данных или группирующие данных между несколькими макетами. Стандартизированный макет позволяет повысить эффективность благодаря сетевым эффектам и позволяет использовать алгоритмы для сокращенного использования определенного шаблона.

Обратите внимание, что этот стандарт свиззле является аппаратной функцией и может не поддерживаться всеми GPU.

## <a name="d3d113-apis"></a>API-интерфейсы D3D 11.3

В отличие от D3D12, D3D 11.3 не поддерживает сопоставление текстур по умолчанию, поэтому необходимо запросить [**данные о \_ функциях D3D11 \_ \_ D3D11 \_ OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2). Кроме того, необходимо запросить Стандартный свиззле, вызвав [**ID3D11Device:: чеккфеатуресуппорт**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-checkfeaturesupport) и установив флажок `StandardSwizzle64KBSupported` **D3D11 \_ Feature \_ Data \_ D3D11 \_ OPTIONS2**.

Следующие API сопоставлены текстурные карты:

Перечисления

-   [**D3D11 \_ \_Макет текстуры**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) . управляет шаблоном свиззле текстур по умолчанию и включает поддержку карт для текстур по умолчанию.
-   [**D3D11 \_ Функция**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_feature) : ссылается на [**D3D11 \_ Feature \_ Data \_ D3D11 \_ OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).
-   [**D3D11 \_ \_ \_ Флаг копирования плитки**](/windows/desktop/api/D3D11_2/ne-d3d11_2-d3d11_tile_copy_flag) : содержит флаги для копирования ресурсов свиззлед мозаичного заполнения в линейные буферы и из них.

Структуры

-   [**D3D11 \_ TEXTURE2D \_ DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture2d_desc1) : описывает двухмерную текстуру. Обратите внимание \_ на \_ вспомогательную структуру CD3D11 TEXTURE2D DESC1.
-   [**D3D11 \_ TEXTURE3D \_ DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture3d_desc1) : описывает трехмерную текстуру. Обратите внимание \_ на \_ вспомогательную структуру CD3D11 TEXTURE3D DESC1.

Методы

-   [**ID3D11Device3:: CreateTexture2D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture2d1) : создает массив двумерных текстур.
-   [**ID3D11Device3:: CreateTexture3D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture3d1) : создает одну трехмерную текстуру.
-   [**ID3D11Device3:: вритетосубресаурце**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource) : копирует данные в \_ \_ текстуру использования по умолчанию D3D11, которая была сопоставлена с помощью [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).
-   [**ID3D11Device3:: реадфромсубресаурце**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource) : копирует данные из \_ \_ текстуры использования по умолчанию D3D11, которая была сопоставлена с помощью [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).
-   [**Ссылку ID3D11DeviceContext:: Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) : получает указатель на данные, содержащиеся во вложенном ресурсе, и запрещает доступ GPU к этому подресурсу.
-   [**Ссылку ID3D11DeviceContext::**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap) unpointer: делает указатель на ресурс недействительным и повторно включает доступ GPU к этому ресурсу.
-   [**ID3D11Texture2D1:: GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture2d1-getdesc1) : получает свойства ресурса двухмерной текстуры.
-   [**ID3D11Texture3D1:: GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture3d1-getdesc1) : получает свойства ресурса трехмерной текстуры.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Функции Direct3D 11,3](direct3d-11-3-features.md)
</dt> </dl>

 

 




