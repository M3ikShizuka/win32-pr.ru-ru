---
title: Синтаксис потока Out
description: Шейдер геометрии с потоком out объявляется с определенным синтаксисом.
ms.assetid: 58cf6503-0dde-4c88-837d-ae0e0eda17d5
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 535ea78d1b2109e343f01800b3a3d5e1bf6efaba
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104996763"
---
# <a name="stream-out-syntax"></a>Синтаксис потока Out

Шейдер геометрии с потоком out объявляется с определенным синтаксисом. В этом разделе описывается синтаксис. В среде выполнения Effect этот синтаксис будет преобразован в вызов [**ID3D11Device:: креатежеометришадервисстреамаутпут**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-creategeometryshaderwithstreamoutput).

## <a name="construct-syntax"></a>Синтаксис конструкции


```
[ StreamingShaderVar = ] ConstructGSWithSO( ShaderVar, "OutputDecl0" )
```





| Имя                   | Описание                                                                                                                                                                                                                |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **стреамингшадервар** | Необязательный параметр. Строка АСЦИ, однозначно определяющая имя переменной шейдера Geometry с выходом из потоков. Это необязательно, так как Конструктгсвиссо можно разместить непосредственно в вызове Сетжеометришадер или Биндинтерфацес. |
| **шадервар**          | Переменная шейдера geometry или Вершинный шейдер.                                                                                                                                                                               |
| **OutputDecl0**        | Строка, определяющая потоки вывода шейдера в потоке 0. Синтаксис см. ниже.                                                                                                                                 |



 

Этот синтаксис был определен в \_ файлах FX 4 \_ 0. Обратите внимание, что в GS \_ 4 \_ 0 и VS \_ x есть только один поток данных. Полученный шейдер будет выводить один поток как в поток, так и в блок средства прорисовки.


```
[ StreamingShaderVar = ] ConstructGSWithSO( ShaderVar, "OutputDecl0", "OutputDecl1", "OutputDecl2", 
"OutputDecl3", RasterizedStream )
```





| Имя                   | Описание                                                                                                                                                                                                                |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **стреамингшадервар** | Необязательный параметр. Строка АСЦИ, однозначно определяющая имя переменной шейдера Geometry с выходом из потоков. Это необязательно, так как Конструктгсвиссо можно разместить непосредственно в вызове Сетжеометришадер или Биндинтерфацес. |
| **шадервар**          | Переменная шейдера geometry или Вершинный шейдер.                                                                                                                                                                               |
| **OutputDecl0**        | Строка, определяющая потоки вывода шейдера в потоке 0. Синтаксис см. ниже.                                                                                                                                 |
| **OutputDecl1**        | Строка, определяющая потоки вывода шейдера в потоке 1. Синтаксис см. ниже.                                                                                                                                 |
| **OutputDecl2**        | Строка, определяющая потоки вывода шейдера в потоке 2. Синтаксис см. ниже.                                                                                                                                 |
| **OutputDecl3**        | Строка, определяющая выходные данные шейдера в потоке 3. Синтаксис см. ниже.                                                                                                                                 |
| **растеризедстреам**   | Целое число, указывающее, какой поток будет отправлен в средство программной прорисовки.                                                                                                                                                         |



 

Обратите внимание, что \_ \_ шейдеры GS 5 0 могут определять до четырех потоков данных. Полученный шейдер выводит один поток в потоковую единицу для каждого объявления вывода, отличного от **null** , и один поток, являющийся единицей средства прорисовки.

## <a name="stream-out-declaration-syntax"></a>Синтаксис объявления Stream out


```
" [ Buffer: ] Semantic[ SemanticIndex ] [ .Mask ]; [ ... ; ] ... [ ... ;]"
```





| Имя              | Описание                                                                                           |
|-------------------|-------------------------------------------------------------------------------------------------------|
| **Буфер**        | Необязательный параметр. Целое число, 0 <= buffer < 4, определяющее потоковый буфер, к которому будет переходить значение. |
| **Семантическ**      | Строка вместе с СемантиЦиндекс, указывающая значение для вывода.                                 |
| **семантиЦиндекс** | Необязательный параметр. Индекс, связанный с семантикой.                                                         |
| **Mask**          | Необязательный параметр. Маска компонента, указывающая, какие компоненты значения следует выводить.                       |



 

Существует одна специальная семантика с меткой "$SKIP", которая указывает на пустую семантику, что приводит к несенсорной записи соответствующей памяти в выходном буфере потока. Семантическая $SKIP не может иметь СемантиЦиндекс, но может иметь маску.

Все выходные объявления потока могут иметь **значение NULL**.

## <a name="example"></a>Например, .


```
struct GSOutput
{
int4 Pos : Position;
int4 Color : Color;
int4 Texcoord : Texcoord;
};

[maxvertexcount(1)]
void gsBase (inout PointStream<GSOutput> OutputStream, inout PointStream<GSOutput> OutputStream1)
{
GSOutput output;
output.Pos = int4(1,2,3,4);
output.Color = int4(5,6,7,8);
output.Texcoord = int4(9,10,11,12);
OutputStream.Append(output);

output.Pos = int4(1,2,3,4);
    output.Color = int4(5,6,7,8);
output.Texcoord = int4(9,10,11,12);
OutputStream1.Append(output);
};


GeometryShader pGSComp = CompileShader(gs_5_0, gsBase());
GeometryShader pGSwSO = ConstructGSWithSO(pGSComp, "0:Position.xy; 1:Position.zw; 2:Color.xy", 
                                                   "3:Texcoord.xyzw; 3:$SKIP.x;", NULL, NULL, 1);

// The following two passes perform the same operation
technique11 SOPoints
{
    pass 
    {
        SetGeometryShader(ConstructGSWithSO(pGSComp, "0:Position.xy; 1:Position.zw; 2:Color.xy", 
                                                     "3:Texcoord.xyzw; 3:$SKIP.x;", NULL, NULL, 1));
    }
    pass 
    {
        SetGeometryShader(pGSwSO);
    }
}
```



## <a name="related-topics"></a>См. также

<dl> <dt>

[Эффекты (Direct3D 11)](d3d11-graphics-programming-guide-effects.md)
</dt> </dl>

 

 




