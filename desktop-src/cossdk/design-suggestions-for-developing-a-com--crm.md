---
description: Предложения по проектированию для разработки COM+ CRM
ms.assetid: dde1b978-6d35-4a75-91fd-69dfcc6c43d2
title: Предложения по проектированию для разработки COM+ CRM
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8dcdb59f0ea23fb6879300d0bacec7df12970d81
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127264515"
---
# <a name="design-suggestions-for-developing-a-com-crm"></a>Предложения по проектированию для разработки COM+ CRM

Ниже приведены рекомендуемые шаги для разработки COM+ CRM.

1.  Перед началом разработки задайте для параметра время ожидания транзакции значение 0 (с помощью средства администрирования "службы компонентов"). установите флаг реестра VTRACE1 (см. [раздел реестр COM+ CRM Параметры](com--crm-registry-settings.md)), чтобы просмотреть предупреждения и сообщения об ошибках crm в отладочной трассировке.
2.  Определите, какой набор интерфейсов необходимо использовать, структурированных (вариантов) или неструктурированных. (См. раздел [интерфейсы COM+ CRM](com--crm-interfaces.md).) это будет зависеть от языка, используемого для разработки CRM, например Microsoft Visual C++ или Microsoft Visual Basic.
3.  Сначала Разрабатывайте рабочую роль CRM. Определите сведения, необходимые в записях журнала. Определите требуемые типы записей журнала и их формат.
4.  отладочный компенсатор crm предоставляется в составе примеров crm (в Windows SDK). Это можно временно использовать при отладке работника CRM вместо реального компенсатора CRM.
5.  Когда Рабочая роль CRM работает правильно, разрабатывайте реальный компенсатор CRM и заменяйте Этот компенсатор в реальном CRM.
6.  Может быть желательно, чтобы изначально не протестировать случай восстановления. Если да, то перед запуском этого серверного приложения CRM удалите файл журнала CRM для серверного приложения CRM.

## <a name="considerations"></a>Рекомендации

1.  **Запишите заранее.** Рабочий компонент CRM должен записаться заранее; то есть он должен записать запись в журнал, указывающую, что будет выполнено действие до фактического выполнения этого действия. Кроме того, эта запись журнала должна быть принудительно преобразована на диск после записи и до выполнения действия.
2.  **Изоляция**. CRM не применяет изоляцию. Проект CRM должен обеспечивать изоляцию между несколькими клиентами в отдельных транзакциях, а также учитывать случай перед восстановлением.
3.  **Выполняется восстановление.** Рабочая роль CRM должна работать с кодом ошибки "выполняется восстановление". Дополнительные сведения об этом коде ошибки см. [в разделе Устранение неполадок com+ CRM](troubleshooting-the-com--crm.md) .
4.  **Обработка ошибок.** Рабочая роль CRM должна справиться с тем, что транзакция была прервана раньше, чем ожидалось. См. раздел [Обработка ошибок в com+ CRM](error-handling-in-the-com--crm.md).
5.  **Время восстановления.** Компенсатор CRM должен быть спроектирован для быстрого восстановления, чтобы не ждать, пока новая работа приложения сервера CRM не подерживается.
6.  **Идемпотентность.** Возможно, компенсатор CRM снова получит одну и ту же запись журнала, чтобы отменить или повторить действие, которое уже было отменено или отменено. Действия, которые может выполнить компенсатор CRM, должны быть идемпотентными, что часто означает, что коды ошибок, возвращаемые этими действиями, следует игнорировать.
7.  **Инициация восстановления.** Восстановление серверного приложения CRM выполняется при запуске этого серверного приложения CRM. Однако автоматический запуск серверного приложения CRM отсутствует. Разработчик приложения должен определить, как следует инициировать запуск и восстановление.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Основные понятия о компенсации диспетчер ресурсов COM+](com--compensating-resource-manager-concepts.md)
</dt> </dl>

 

 



