---
description: Существуют особые соображения, касающиеся настройки безопасности на основе ролей и проверки подлинности для библиотечных приложений.
ms.assetid: 1117ac64-653d-4640-97cd-f37b0949dc57
title: Настройка безопасности для библиотечных приложений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8f0d8b3993a00512c20409f1f029b7402d5f9ace97984cbe9757453b5672125f
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118548911"
---
# <a name="configuring-security-for-library-applications"></a>Настройка безопасности для библиотечных приложений

Существуют особые соображения, касающиеся настройки безопасности на основе ролей и проверки подлинности для библиотечных приложений.

## <a name="enabling-or-disabling-authentication"></a>Включение или отключение проверки подлинности

Один из факторов, которые следует учитывать, заключается в том, что вызывающие объекты приложения библиотеки должны подвергаться проверкам безопасности на уровне процесса хост-процесса, то есть включать или отключать проверку подлинности.

Например, если приложение библиотеки будет размещено в браузере, может потребоваться получить обратные вызовы, не прошедшие проверку подлинности. Чтобы решить эту необходимость, можно отключить проверку подлинности, чтобы ведущий процесс не выполнял проверку безопасности для вызывающих объектов приложения библиотеки. При отключении проверки подлинности приложение библиотеки эффективно проходит проверку подлинности — все вызовы будут выполнены успешно. Вызывающие объекты приложения библиотеки не подчиняются проверкам безопасности ведущего процесса. По сути, приложение библиотеки помечается как "не прошедшие проверку подлинности", а проверки безопасности пропускаются для вызовов к приложению библиотеки.

Сведения о том, как включить или отключить проверку подлинности, см. в разделе Включение проверки подлинности [для библиотечного приложения](enabling-authentication-for-a-library-application.md).

## <a name="enforcing-role-checks"></a>Принудительная проверка ролей

Другое решение заключается в том, должно ли приложение библиотеки использовать [безопасность на основе ролей](role-based-security-administration.md). Если используется безопасность на основе ролей, для выполнения проверок доступа необходимо использовать безопасность на уровне компонентов. Роли, назначенные приложению библиотеки, не отражаются в дескрипторе безопасности процесса. Единственной авторизацией, которую может контролировать приложение библиотеки, является уровень компонента. Дополнительные сведения о безопасности на уровне компонентов см. в разделе [границы безопасности](security-boundaries.md).

Сведения о настройке безопасности на уровне компонентов см. в разделе [Настройка уровня безопасности для проверок доступа](setting-a-security-level-for-access-checks.md).

## <a name="configuration-scenarios"></a>Сценарии настройки

Чтобы лучше разобраться в последствиях принятия решения о том, следует ли приложению библиотеки использовать безопасность на основе ролей и следует ли выполнять проверку подлинности приложения библиотеки, учитывайте следующие сценарии.

-   **Проверка подлинности включена, и используется безопасность на основе ролей.** В этом сценарии проверки безопасности выполняются ведущим процессом, а некоторым вызывающим объектам отказано в доступе на уровне процесса. Кроме того, проверка ролей выполняется на уровне приложения библиотеки, поэтому некоторым вызывающим объектам, которые делают его через проверку безопасности на уровне процесса, запрещается доступ к приложению библиотеки при проверке членства в роли. Это обычный сценарий для приложения библиотеки COM+, использующего безопасность на основе ролей.

    На следующем рисунке показан сценарий, в котором включена проверка подлинности и используется проверка ролей.

    ![Схема, показывающая процесс проверки подлинности в хост-процессе.](images/18004ed7-e95e-4c66-9e17-f163cdeefd71.png)

-   **Проверка подлинности включена, а безопасность на основе ролей не используется.** В этом сценарии проверки безопасности выполняются на уровне процесса, но членство в роли не проверяется на уровне приложения библиотеки. Таким образом, любой вызывающий объект приложения библиотеки, который делает его с помощью проверки безопасности на уровне процесса, получает доступ к приложению библиотеки, так как членство в роли не проверяется. Такая ситуация возникает, когда приложение COM, которое не использует безопасность на основе ролей, переносится в приложение библиотеки COM+.

    На следующем рисунке показан сценарий, в котором включена проверка подлинности, а проверка роли не используется.

    ![Схема, показывающая проверку подлинности на уровне процесса для библиотечного приложения в рамках процесса узла.](images/3e5a64c6-39a9-4ff7-b084-8396fe779210.png)

-   **Проверка подлинности отключена, и используется безопасность на основе ролей.** В этом сценарии проверки безопасности выполняются на уровне процесса, но вызывающие объекты приложения библиотеки не проходят проверку подлинности. По сути, вызывающие приложения библиотеки будут исключены из проверки безопасности на уровне процесса. Поскольку проверка ролей включена, членство в роли только определяет, кому предоставляется доступ к приложению библиотеки. Этот сценарий может быть уместным, если проверка безопасности, которая будет выполнена ведущим процессом, является слишком ограничивающей, но необходимо иметь некоторые ограничения на доступ к приложению библиотеки или к определенным интерфейсам или методам. Этот сценарий позволяет эффективно отключать безопасность процессов и по-прежнему иметь соответствующие проверки доступа на уровне, используя безопасность на основе ролей.

    Сценарий, в котором отключена проверка подлинности и используется проверка роли, показан на следующем рисунке.

    ![Схема, отображающая "Проверка членства в роли" в приложении библиотеки в процессе узла.](images/e0cc604c-ba86-4087-9a74-1b6fdce8d69a.png)

-   **Проверка подлинности отключена, а безопасность на основе ролей не используется.** В этом сценарии проверки безопасности по-прежнему выполняются на уровне процесса, но, как в предыдущем сценарии, вызывающие объекты приложения библиотеки всегда проходят эту проверку безопасности. Так как проверка роли также отключена, членство в роли не проверяется на уровне приложения библиотеки. По сути, любой пользователь может вызвать приложение библиотеки. этот сценарий следует выбирать, если COM-объекту требуется получить непроверенные обратные вызовы, как это может быть в случае с элементом управления ActiveX, размещенным в Internet Explorer и с оснасткой консоли управления (mmc). Конечно, этот COM-объект должен быть доверенным для правильной работы при получении вызовов без проверки подлинности. Например, он не должен обращаться к произвольным файлам от имени своих вызывающих объектов.

    Сценарий, в котором отключена проверка подлинности, а проверка роли не используется, показана на следующем рисунке.

    ![Схема, на которой показаны вызовы приложения библиотеки, не прошедшие проверку подлинности в процессе узла.](images/df3c9a02-52dd-4e07-a5f1-76cef0dab5cb.png)

После принятия решения о включении или отключении проверки подлинности для приложения библиотеки COM+ см. пошаговые инструкции по отключению (или включению) проверки подлинности с помощью средства администрирования "службы компонентов" в статье Включение проверки подлинности для [библиотечного приложения](enabling-authentication-for-a-library-application.md) . Если приложение библиотеки будет использовать безопасность на основе ролей, см. раздел [Настройка безопасности Role-Based](configuring-role-based-security.md).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Безопасность библиотечных приложений](library-application-security.md)
</dt> </dl>

 

 



