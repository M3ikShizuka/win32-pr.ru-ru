---
description: Запуск и восстановление COM+ CRM
ms.assetid: dee1f2df-dfe0-44c3-830b-871690e513e9
title: Запуск и восстановление COM+ CRM
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0a0e631e2e5ecef1621705c9af74aa48898d733b
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127457813"
---
# <a name="com-crm-startup-and-recovery"></a>Запуск и восстановление COM+ CRM

Если для серверного приложения установлен флажок **Включить компенсирующие диспетчеры ресурсов** (с помощью средства администрирования "службы компонентов" на вкладке " **Дополнительно** " страницы свойств приложения COM+), при первом запуске создается файл журнала CRM, который будет использоваться всеми крмс в этом процессе серверного приложения. (Подробные инструкции по настройке CRM см. в разделе [Настройка компонентов COM+ CRM](configuring-com--crm-components.md).)

Имя файла журнала CRM, созданного для серверного приложения, основано на идентификаторе AppId (GUID) серверного приложения, а файл журнала CRM помещается в тот же каталог, что и файл журнала DTC (обычно это каталог% SystemRoot% \\ WinNT \\ system32 \\ дтклог). Файлы журналов CRM имеют расширение крмлог.

> [!Note]  
> Может потребоваться изменить расположение файла журнала CRM по умолчанию по соображениям производительности (для файла журнала DTC на диске, отличном от диска, на котором находится файл журнала CRM) или, возможно, из-за использования CRM в кластерной среде. Расположение файлов журнала CRM можно изменить с помощью пакета SDK администрирования COM+. Имя свойства — Крмлогфиле, и оно существует в объекте коллекции [**приложений**](applications.md) .

 

Когда запускается серверное приложение (с поддержкой CRM) и обнаруживает, что файл журнала CRM для этого серверного приложения уже существует, он выполняет восстановление в этом файле журнала CRM. *Восстановление* — это процесс выполнения любых транзакций, которые были прерваны сбоем, и включает в себя инфраструктуру CRM, считывающую файл журнала CRM для всех транзакций, которые не были полностью завершены. Если обнаруживается, он связывается с DTC для определения результата транзакции. Затем он создает компенсатор CRM и передает при необходимости уведомления о фиксации или прерывании вместе со связанными записями журнала.

Подготовка уведомлений CRM во время восстановления не принимается. Компенсатор CRM имеет флаг, позволяющий определить, вызывается ли он во время нормальной работы или при восстановлении.

Восстановление, как правило, найдет незавершенные транзакции только в случае аварийного завершения работы серверного приложения из-за сбоя процесса серверного приложения или сбоя компьютера. Если серверному приложению разрешено нормальное завершение работы из-за истечения времени ожидания простоя или ручного завершения работы с помощью средства администрирования "службы компонентов", файл журнала будет очищен.

Запуск серверного приложения CRM для восстановления не инициируется автоматически. Для запуска приложения сервера CRM, где требуется восстановление, необходимо выполнить некоторое внешнее действие. Как правило, в этом серверном приложении создается компонент.

## <a name="related-topics"></a>Связанные разделы

<dl> <dt>

[Основные понятия о компенсации диспетчер ресурсов COM+](com--compensating-resource-manager-concepts.md)
</dt> <dt>

[Операционный процесс COM+ CRM](com--crm-operating-process.md)
</dt> </dl>

 

 



