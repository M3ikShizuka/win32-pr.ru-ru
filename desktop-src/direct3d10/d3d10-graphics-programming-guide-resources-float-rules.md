---
description: Direct3D 10 поддерживает несколько различных представлений с плавающей запятой. Все вычисления с плавающей запятой работают в определенном подмножестве поведения IEEE 754 32-bit с плавающей запятой.
ms.assetid: 57221d13-8993-4db3-b1a0-88bdcf6f0167
title: Правила точки Ффлоатинг (Direct3D 10)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6909d037b11f9098bb3e0dbad0f1846b79b513e8
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105701198"
---
# <a name="floating-point-rules-direct3d-10"></a>Правила с плавающей точкой (Direct3D 10)

Direct3D 10 поддерживает несколько различных представлений с плавающей запятой. Все вычисления с плавающей запятой работают в определенном подмножестве поведения IEEE 754 32-bit с плавающей запятой.

-   [32-разрядные правила Floating-Point](#32-bit-floating-point-rules)
    -   [Принятые правила IEEE-754](#honored-ieee-754-rules)
    -   [Отклонения или дополнительные требования из правил IEEE-754](#deviations-or-additional-requirements-from-ieee-754-rules)
-   [16-разрядные правила Floating-Point](#16-bit-floating-point-rules)
-   [11-разрядные и 10-разрядные правила Floating-Point](#11-bit-and-10-bit-floating-point-rules)
-   [См. также](#related-topics)

## <a name="32-bit-floating-point-rules"></a>32-разрядные правила Floating-Point

Существует два набора правил: тех, что соответствуют стандарту IEEE-754, и тех, что отклоняются от него.

### <a name="honored-ieee-754-rules"></a>Принятые правила IEEE-754

Некоторые из этих правил безальтернативны, если стандарт IEEE-754 предоставляет несколько вариантов.

-   При делении на ноль получается положительное или отрицательное бесконечное число, за исключением деления нуля на ноль, в результате которого получается не число.
-   Результатом логарифма положительного или отрицательного нуля является отрицательное бесконечное число. Результатом логарифма отрицательного значения (отличного от отрицательного нуля) является не число.
-   Результатом извлечения обратного квадратного корня (rsq) или квадратного корня (sqrt) из отрицательного числа является не число. Исключение — отрицательный ноль; результатом sqrt(-0) является -0, а результатом rsq(-0) — отрицательное бесконечное число.
-   Разностью двух бесконечных чисел является не число.
-   Отношением между положительным или отрицательным бесконечным числом и вторым таким же числом является не число.
-   (+/-) INF \* 0 = NaN
-   Результатом любой операции между не числом и любым значением является не число.
-   Сравнения EQ, GT, GE, LT и LE, в которых один или оба операнда являются не числами, возвращают **FALSE**.
-   В сравнениях знак нуля игнорируется (то есть положительный ноль равен отрицательному).
-   Сравнение NE, в котором один или оба операнда являются не числами, возвращает **TRUE**.
-   Сравнение любого значения, не являющегося не числом, с положительным или отрицательным бесконечным числом возвращает верный результат.

### <a name="deviations-or-additional-requirements-from-ieee-754-rules"></a>Отклонения или дополнительные требования из правил IEEE-754

-   По условиям стандарта IEEE-754, результатом операций с плавающей точкой должно быть представляемое значение, ближайшее к бесконечно точному результату, известное как округление к ближайшему четному числу. При этом Direct3D 10 определяет более слабое требование: 32-разрядные операции с плавающей запятой создают результат, который находится в одной единице (1 ULP) с бесконечным точным результатом. Это означает, что, например, оборудованию позволено усекать результаты до 32-разрядного формата, вместо того чтобы округлять их к ближайшему четному числу, так как это привело бы к ошибке в пределах одной ULP.
-   Исключения, биты состояния и ловушки с плавающей точкой не поддерживаются.
-   Денормализованные числа приводятся к нулю с сохранением знака при вводе и выводе любой математической операции с плавающей точкой. Исключения выполняются для любой операции ввода-вывода или перемещения данных, которая не манипулирует данными.
-   Состояния, содержащие значения с плавающей запятой, такие как окна просмотра Миндепс/MaxDepth, значения BorderColor и т. д., могут быть предоставлены в виде значений для денормы, а также могут или не сбрасываться перед использованием оборудованием.
-   Операции минимизации или максимизации сбрасывают денормализованные числа для сравнения, но результат в виде денормализованного числа может не быть сброшен.
-   При вводе NaN для операции всегда создается значение NaN на выходе, однако точный шаблон NaN не должен оставаться неизменным (если только операция не является инструкцией перемещения RAW, которая не изменяет данные вообще).
-   Операции min или Max, для которых только один операнд равен NaN, возвращают другой операнд в качестве результата (вопреки правилам сравнения выше). Это новое правило IEEE (IEEE 754R), требуемое в Direct3D 10.
-   Еще одно новое правило IEEE 754R: min (-0, + 0) = = min (+ 0,-0) = =-0, and Max (-0, + 0) = = max (+ 0,-0) = = + 0, который учитывает знак, в отличие от правил сравнения для нуля со знаком (см. выше). Direct3D 10 рекомендует здесь поведение IEEE 754R, но оно не будет применено. результат сравнения нулей может быть зависеть от порядка параметров, используя сравнение, которое игнорирует знаки.
-   x \* 1.0 f всегда приводит к x (за исключением очистки с очисткой).
-   x/1,0f всегда выдает x (за исключением сброса к денормализованному числу).
-   x +/ -0,0f всегда выдает x (за исключением сброса к денормализованному числу). Но -0 + 0 = +0.
-   Совмещенные операции (например, mad, dp3) выдают не менее точные результаты, чем худшее возможное последовательное упорядочение вычисления несовмещенного расширения операции. Обратите внимание, что определение наихудшего возможного упорядочивания в целях допустимости не является фиксированным определением для данной операции с плавким предохранителем; Это зависит от конкретных значений входных данных. Отдельные шаги в несигнальном развертывании допускаются 1 ULP (или для любых инструкций, которые Direct3D 10 вызывают с более строгим отклонением, чем 1 ULP, допускаются более строгие допуска).
-   Совмещенные операции следуют тем же правилам относительно не чисел, что и несовмещенные операции.
-   Умножьте и разделите каждый из них на 32-разрядном уровне точности с плавающей запятой (точность до 1 ULP).

## <a name="16-bit-floating-point-rules"></a>16-разрядные правила Floating-Point

Direct3D 10 также поддерживает 16-разрядные представления чисел с плавающей запятой.

Формат:

-   1 бит знака (s) в положении старшего разряда;
-   5 битов смещенного порядка (e);
-   10 дробных битов (f) с дополнительным скрытым битом.

Значение float16 (v) соответствует следующим правилам.

-   если e == 31 и f != 0, то v — не число независимо от s;
-   Если e = = 31 и f = = 0, то v = (-1) s \* бесконечность (бесконечность со знаком)
-   Если значение e находится в диапазоне от 0 до 31, то v = (-1) s \* 2 (e-15) \* (1. f)
-   Если e = = 0 и f! = 0, то v = (-1) s \* 2 (e-14) \* (0. f) (денормализованные числа)
-   Если e = = 0 и f = = 0, то v = (-1) s \* 0 (ноль со знаком)

32-разрядные правила с плавающей запятой также содержат 16-разрядные числа с плавающей запятой, скорректированные для побитового макета, описанного выше. Но есть следующие исключения:

-   Точность. Несовмещенные операции над 16-разрядными числами с плавающей точкой выдают результат в виде представляемого значения, ближайшего к бесконечно точному результату (согласно IEEE-754, округление к ближайшему четному числу применяется к 16-разрядным значениям). 32-разрядные правила с плавающей точкой придерживаются допуска в 1 ULP, 16-разрядные правила с плавающей точкой придерживаются допуска в 0,5 ULP для несовмещенных операций и 0,6 ULP для совмещенных операций.
-   16-разрядные числа с плавающей тачкой сохраняют денормализованные значения.

## <a name="11-bit-and-10-bit-floating-point-rules"></a>11-разрядные и 10-разрядные правила Floating-Point

Direct3D 10 также поддерживает 11-разрядные и 10-разрядные форматы с плавающей запятой.

Формат:

-   бит знака отсутствует;
-   5 битов смещенного порядка (e);
-   6 дробных битов (f) в 11-разрядном формате, 5 дробных битов (f) в 10-разрядном формате с дополнительным скрытом битом в обоих случаях.

Значение float11/float10 (v) соответствует следующим правилам:

-   если e == 31 и f != 0, то v — не число;
-   если e == 31 и f == 0, то v = положительная бесконечность
-   Если значение e находится в диапазоне от 0 до 31, то v = 2 (e-15) \* (1. f)
-   Если e = = 0 и f! = 0, то v = \* 2 (e-14) \* (0. f) (денормализованные числа)
-   если e == 0 и f == 0, то v = 0 (ноль)

32-разрядные правила с плавающей запятой также содержат 11-битные и 10-разрядные числа с плавающей запятой, скорректированные для битовой структуры, описанной выше. Исключения:

-   Точность. 32-разрядные правила с плавающей точкой придерживаются допуска в 0,5 ULP.
-   10/11-разрядные числа с плавающей тачкой сохраняют денормализованные значения.
-   Любая операция, которая может привести к числу меньше нуля, передается в ноль.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Ресурсы (Direct3D 10)](d3d10-graphics-programming-guide-resources.md)
</dt> </dl>

 

 



