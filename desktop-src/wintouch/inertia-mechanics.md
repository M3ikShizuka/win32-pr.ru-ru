---
title: Механика инерции
description: Механика инерции
ms.assetid: 188b6936-b36e-4e57-9118-8b61ed134c17
keywords:
- Windows Сенсорный ввод, инерция
- Windows Сенсорный ввод, плавная анимация
- Windows Сенсорный ввод, эластичное поле
- инерция, механика
- инерция, основы вычислений
- Обзор инерции, физическое представление
- инерция, плавная анимация
- инерция, эластичное поле
- Плавная анимация
- Эластичное поле
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: be79b27900c6921c972710e7e922ab42b834afc1
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127458477"
---
# <a name="inertia-mechanics"></a>Механика инерции

инерция используется для выполнения вычислений при анимации перемещения объектов и обеспечения поддержки универсального удобства в приложениях, включающих Windows Touch. В этом разделе показаны следующие функции, включенные инерцией.

-   Краткий обзор инерции физика.
-   Плавная анимация объектов с использованием свойств скорости и замедления.
-   Плавная анимация объекта с помощью свойства смещения.
-   Переход от краев экрана с помощью эластичных границ.

## <a name="inertia-physics-overview"></a>Обзор инерции

Обработчик инерции использует простую модель физики, которая включает в себя расположение, значение замедления и начальную скорость. Время используется в качестве динамического ввода для модели, чтобы определить текущую позицию удаляемого объекта. На следующей диаграмме и в формуле показано физическое моделирование, используемое для вычисления позиций объекта.

![Иллюстрация, показывающая диаграмму и формулу, используемую для вычисления позиций объектов](images/velocity.png)

В формуле, используемой для вычисления текущей позицией (x), начальная скорость (v) умножается на затраченное время (t) и уменьшается на коэффициент замедления (d) раз в квадрат. Это приводит к плавному замедлению объектов. На предыдущем рисунке в первоначальной (крайней левой) части кривой объект быстро перемещается, так как его текущая скорость является начальной скоростью. В финальной (крайней правой) части кривой объект полностью остановлен, так как его скорость равна 0. Вычисление скорости объектов для скорости x, y и ротации используют эту формулу для вычислений.

Для обработчика инерции используется относительное расстояние. Если вы хотите использовать экранные координаты, передавайте координаты экрана процессору манипуляции (или инерции); Если вы хотите использовать абсолютные координаты, передавайте их в процессор, который вы используете. Независимо от используемых значений, обработчик манипуляции будет использовать такты миллисекунд для обработки времени. Эти значения можно передавать непосредственно в обработчик инерции с помощью метода [**процесстиме**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-processtime) или с помощью отметки времени по умолчанию с помощью вызовов [**Process**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-process).

## <a name="smooth-object-animation-using-the-velocity-and-deceleration-properties"></a>Плавная анимация объектов с использованием свойств скорости и замедления

Плавную анимацию можно включить, напрямую взаимодействуя с моделью физикы, задав значения скорости и замедления в интерфейсе процессора инерции, а затем вызывая [**процесс**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-process). Вызывающий **процесс** вызывает обработку объектов, которые, в свою очередь, должны вызывать обновления пользовательского интерфейса. Значения скорости объекта, передаваемые обработчику инерции, обычно берутся из обработчика манипуляций после завершения. Значение замедления будет зависеть от того, как долго требуется анимировать объект и какие единицы используются для вычислений. Поскольку значения зависят от, иногда необходимо масштабировать скорость ввода от процессора маниплатион и использовать произвольные значения для замедления. Следующие значения являются типичными для различных сценариев, в которых передаются значения центипиксел из свойств x и y структуры [**таучинпут**](/windows/win32/api/winuser/ns-winuser-touchinput) в обработчик манипуляции.



| Сценарий    | Property Set                                                                       | Значение замедления | Типичное масштабирование ввода скорости                                  | Примечания                                                                                 |
|-------------|------------------------------------------------------------------------------------|--------------------|-----------------------------------------------------------------|---------------------------------------------------------------------------------------|
| Перевод | [**DesiredDeceleration**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-get_desireddeceleration)               | 0,003 f             | Нет.                                                           | Использование этого значения приводит к увеличению расстояния при использовании сенсорного ввода.    |
| Перевод | [**DesiredDeceleration**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-get_desireddeceleration)               | 0,001 f             | 1/20 начальная скорость для сенсорных входных данных, нет для входов мыши | Использование этого значения позволяет анимировать вторую, заданную обычную входную скорость.      |
| Перевод | [**DesiredDeceleration**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-get_desireddeceleration)               | 0,5 f               | None                                                            | использование этого значения дает естественную возможность анимации на больших Windows сенсорных экранах.   |
| Поворот    | [**десиредангулардецелератион**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-get_desiredangulardeceleration) | 0.000015 f          | Радианы преобразуются в градусы.                                   | Использование этого значения приводит к длительным анимациям вращения при использовании сенсорного ввода.      |
| Поворот    | [**десиредангулардецелератион**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-get_desiredangulardeceleration) | намерено f           | коэффициент поворота 1/40th для сенсорных входных данных, нет для входных данных мыши   | Это значение в радианах, поэтому необходимо использовать очень небольшие значения замедления и скорости. |
| Поворот    | [**десиредангулардецелератион**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-get_desiredangulardeceleration) | 0.000005 f          | None                                                            | это значение имеет естественное поведение в больших Windows сенсорных экранах.                        |



 

## <a name="smooth-object-animation-using-the-desired-displacement-property"></a>Плавная анимация объекта с использованием свойства требуемого смещения

В некоторых случаях не нужно использовать входные данные пользователя для смещения объекта, но по-прежнему требуется плавно анимировать объект на экране. В этом случае можно использовать свойства смещения в обработчике инерции, чтобы процессор рассчитывал начальную скорость перемещения объекта по экрану.

## <a name="controlling-object-position-using-elastic-bounds"></a>Управление положением объекта с помощью эластичных границ

Когда объект перемещается по экрану, обычно он останавливается, прежде чем он будет находиться за пределами точки зрения пользователя. Обработчик инерции обеспечивает эту функциональность с помощью свойств границ и эластичных полей. На следующем рисунке показаны различные свойства границ и полей в типичном приложении.

![снимок экрана, отображающий свойства границ и эластичных полей](images/elastic-illustrated.png)

Вы устанавливаете левое, верхнее, правое и нижнее границы и эластичные поля для приложения, и обработчик инерции будет поддерживать поддержание элементов пользовательского интерфейса в пределах границ. Когда объект достигает эластичного поля, он замедляет работу, пока не достигнет границы. Он никогда не покидает это поле во время инерции, но по-прежнему будет перемещаться, пока компонент перпендикулярного инерции объекта не зазамедляется до 0. На рисунке окружность перемещается к левой границе эластичности. Сплошная стрелка показывает направление манипуляции; сплошной кружок — это начальное расположение объекта; сплошная стрелка — это изменения, сделанные до того, как окружность достигнет эластичного поля; Пунктирная стрелка показывает, где обработчик инерции обрабатывает окружность после попадания в поле. а пунктирные круги показывают, где останавливается объект.

> [!Note]  
> Установка свойств поля приведет к перемещению границ наружу. Например, если верхняя граница имеет значение 50, а затем для поля верхнее эластичное поле задано значение 10, то верхняя граница фактически станет 40.

 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Обработка инерции в неуправляемом коде](handling-inertia-in-unmanaged-code.md)
</dt> <dt>

[Инерция](getting-started-with-inertia.md)
</dt> <dt>

[Манипуляции](getting-started-with-manipulations.md)
</dt> </dl>

 

 




