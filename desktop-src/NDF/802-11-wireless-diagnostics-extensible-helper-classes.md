---
title: Расширяемые вспомогательные классы диагностики беспроводной сети 802,11
description: Встроенная инфраструктура диагностики беспроводной связи имеет две точки расширения. Родительский вспомогательный метод Класспурпосеревисед Native WiFi (РНВФ) расширяемый вспомогательный метод Классдиагносес проблемы, связанные с расширениями подключения 802,11.
ms.assetid: b54f836d-4fae-4e71-bf7b-af5a6e9e615c
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2bde49561c68044157c9d518571b8241c49dcf25
ms.sourcegitcommit: 3e70ae762629e244028b437420ed50b5850db4e3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/20/2020
ms.locfileid: "104533017"
---
# <a name="80211-wireless-diagnostics-extensible-helper-classes"></a>Расширяемые вспомогательные классы диагностики беспроводной сети 802,11

Встроенная инфраструктура диагностики беспроводной связи имеет две точки расширения.

| Родительский вспомогательный класс                                | Назначение                                                           |
|----------------------------------------------------|-------------------------------------------------------------------|
| Пересмотрен собственный расширяемый вспомогательный класс WiFi (РНВФ) | Диагностика проблем, связанных с расширениями подключения 802,11.       |
| Расширяемый вспомогательный класс L2Security                 | Диагностика проблем, связанных с расширениями протокола безопасности уровня 2. |



 

> [!Note]  
> Сторонний вспомогательный класс должен зарегистрироваться в обоих родительских вспомогательных классах, чтобы гарантировать вызов стороннего класса. Дополнительные сведения о регистрации см. в разделе [Регистрация расширений вспомогательного класса ndf](registering-ndf-helper-class-extensions.md).

 

## <a name="rnwf-extensible-helper-class"></a>Расширяемый вспомогательный класс РНВФ

Имя родительского класса вспомогательных классов

``` syntax
Parent = L"RNWF Extensible Helper Class";
```

Пересмотренный расширяемый вспомогательный класс WiFi (РНВФ) является родительским для сторонних вспомогательных классов, которые позволяют диагностировать проблемы, связанные с расширенными протоколами 802,11, используемыми встроенным WiFi.

Двумя ключевыми атрибутами, предоставляемыми вспомогательным классом РНВФ, являются идентификаторы GUID интерфейса, где возникла ошибка, и контекст соединения.

-   GUID интерфейса: этот атрибут называется "идентификатор интерфейса" и имеет тип **по \_ GUID**.

-   Контекст подключения: этот атрибут называется Network ID и имеет тип в \_ строке октета \_ . Эта строка фактически является буфером \_ \_ структуры идентификатора беспроводной сети IHV вдиаг, \_ определенной в вланихв. h. Эта структура определяется следующим образом.

    ``` syntax
#define WDIAG_IHV_WLAN_ID_FLAG_SECURITY_ENABLED               0x00000001
    typedef
    struct _WDIAG_IHV_WLAN_ID
    {
        WCHAR                        strProfileName [MS_MAX_PROFILE_NAME_LENGTH];
        DOT11_SSID                   Ssid;
        DOT11_BSS_TYPE               BssType;
        DWORD                        dwFlags;           // Flags defined above
        DWORD                        dwReasonCode;      // Set only when an applicable reason code is available
    }
    WDIAG_IHV_WLAN_ID, *PWDIAG_IHV_WLAN_ID;
    ```

> [!Note]  
> **Вдиаг \_ \_Флаг идентификатора беспроводной сети IHV, \_ \_ \_ \_ Включенный параметр безопасность** — это единственное возможное значение **dwFlags** .

 

Атрибут сопоставления для вспомогательного класса стороннего производителя должен совпадать с ИДЕНТИФИКАТОРом службы соответствующего программного модуля. Это также то же имя, что и сторонние лица, регистрируемые в реестре. Диагностика беспроводных сетей будет запрашивать идентификатор службы во время беспроводного сеанса, в котором возникла эта ошибка. Информация будет возвращена NDF, который определит, имеется ли сторонний вспомогательный класс, а затем вызвать его.

В следующей таблице перечислены атрибуты, соответствующие расширенному вспомогательному классу РНВФ.



| Имя          | Тип    | Значение                         |
|---------------|---------|-------------------------------|
| диагностиксид | REG \_ SZ | \[\_Строка GUID \_ диагностиксид |



 

## <a name="l2security-extensible-helper-class"></a>Расширяемый вспомогательный класс L2Security

Имя родительского класса вспомогательных классов

``` syntax
Parent = L"Extensible L2Sec Helper Class";
```

Расширяемый вспомогательный класс уровня 2 безопасности (L2Security) является родительским для сторонних вспомогательных классов, которые позволяют диагностировать проблемы, связанные с соответствующими службами и программными модулями, которые заменяют функции безопасности уровня 2.

Двумя ключевыми атрибутами, предоставляемыми вспомогательным классом уровня 2, является идентификатор GUID интерфейса, где возникла ошибка, и контекст соединения.

-   GUID интерфейса: этот атрибут называется "идентификатор интерфейса" и имеет тип **по \_ GUID**.

-   Контекст подключения: этот атрибут называется Network ID и имеет тип в \_ строке октета \_ . Эта строка фактически является буфером \_ \_ структуры идентификатора беспроводной сети IHV вдиаг, \_ определенной в вланихв. h. Эта структура определяется следующим образом.

    ``` syntax
#define WDIAG_IHV_WLAN_ID_FLAG_SECURITY_ENABLED               0x00000001
    typedef
    struct _WDIAG_IHV_WLAN_ID
    {
        WCHAR                        strProfileName [MS_MAX_PROFILE_NAME_LENGTH];
        DOT11_SSID                   Ssid;
        DOT11_BSS_TYPE               BssType;
        DWORD                        dwFlags;           // Flags defined above
        DWORD                        dwReasonCode;      // Set only when an applicable reason code is available
    }
    WDIAG_IHV_WLAN_ID, *PWDIAG_IHV_WLAN_ID;
    ```

> [!Note]  
> **Вдиаг \_ \_Флаг идентификатора беспроводной сети IHV, \_ \_ \_ \_ Включенный параметр безопасность** — это единственное возможное значение **dwFlags** .

 

Атрибут сопоставления для вспомогательного класса стороннего производителя должен совпадать с ИДЕНТИФИКАТОРом службы соответствующего программного модуля. Это также то же имя, что и сторонние лица, регистрируемые в реестре. Диагностика беспроводных сетей будет запрашивать идентификатор службы во время беспроводного сеанса, в котором возникла эта ошибка. Информация будет возвращена NDF, который определит, имеется ли сторонний вспомогательный класс, а затем вызвать его.

В следующей таблице перечислены атрибуты, соответствующие расширенному вспомогательному классу уровня 2 безопасности.



| Имя          | Тип    | Значение                         |
|---------------|---------|-------------------------------|
| диагностиксид | REG \_ SZ | \[\_Строка GUID \_ диагностиксид |



 

## <a name="matching-attributes"></a>Сопоставление атрибутов

**диагностиксид**

802,11. Диагностика беспроводных сетей будет запрашивать *диагностиксид* из основной собственной службы Wi-Fi, чтобы узнать, установлены ли сторонние расширения беспроводной связи или модули безопасности, участвующие в подключении. После этого диагностика беспроводной сети предоставит эти данные этим вспомогательным классам сторонних поставщиков, используя *диагностиксид* в качестве соответствующего атрибута. Любые вспомогательные классы сторонних разработчиков должны включаться в и устанавливаться вместе с соответствующим пакетом драйверов. *Диагностиксид* будет ОПРЕДЕЛЕН в INF-файле минипорта как раздел реестра в директиве [аддрег](https://msdn.microsoft.com/library/ms794514.aspx) .

``` syntax
HKR,Ndi\IHVExtensions, DiagnosticsID,0, "<Diagnostics ID GUID>"
```

Этот ключ определяет идентификатор вспомогательного класса беспроводной связи для программного модуля стороннего производителя. Этот ключ является необязательным для платформы расширяемости, но он необходим, если реализация включает в себя вспомогательный класс беспроводных сетей, который подключается к NDF и может диагностировать проблемы подключения, связанные с модулями беспроводных сетей и безопасности РНВФ. Вспомогательные классы диагностики MS WLAN запрашивают этот идентификатор из службы автоматической настройки беспроводной сети при установке модулей IHV и предоставляют этот идентификатор в качестве ссылки или сопоставления атрибута NDF во время сеанса диагностики, чтобы NDF мог вызвать соответствующий сторонний вспомогательный класс беспроводных сетей при необходимости.

**\[\_Строка GUID \_ диагностиксид\]**

Это значение должно быть строкой из всех прописных букв. Например, "{12345678-9ABC-DEF0-1234-56789ABCDEF0}".

## <a name="scope-of-80211-wireless-diagnostics-helper-classes"></a>Область действия вспомогательных классов диагностики беспроводной сети 802,11

802,11. вспомогательные классы диагностики беспроводной связи в настоящее время диагностировать Беспроводные проблемы в следующих областях.

-   Все проблемы с подключением 802,11, включая сопоставление 802,11, 802,11, 802,11 параметры безопасности, связанные с стандартом 802,11, & протоколы, изначально поддерживаемые в операционной системе, и проблемы с производительностью.
-   Проблемы безопасности уровня 2 в отношении конфигураций 802.1 x и любых проблем, связанных с проверкой подлинности уровня 2, с помощью методов, изначально поддерживаемых в Windows Vista и Windows Server 2008.
-   Конфигурация не соответствует параметрам профиля между клиентом и точкой доступа или сетевой инфраструктурой и службами.

802,11. вспомогательные классы диагностики беспроводной связи в настоящее время не выполняют диагностику беспроводных проблем в следующих областях.

-   Проблемы, относящиеся к сторонним расширениям 802,11, включая любые параметры профиля или драйвера, связанные с этими расширениями.
-   Проблемы, связанные с методами EAP сторонних производителей.
-   Проблемы с драйвером минипорта беспроводной сети.
-   Любой протокол безопасности 802,11 и 2, а также проблемы, связанные со стандартами, которые изначально не поддерживаются.
-   Проблемы на уровне системы или компонентов, которые могут повлиять на беспроводное подключение, такие как управление питанием, нехватка дискового пространства, состояние памяти и проблемы с оборудованием.

Кроме того, 802,11 Диагностика беспроводных сетей не анализирует случаи [**состояние highutilization**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-highutilization) . Выявленные проблемы производительности беспроводных сетей будут проанализированы и передаваться в качестве случаев [**ловхеалс**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-lowhealth) .

 

 




