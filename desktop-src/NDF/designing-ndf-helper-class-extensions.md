---
title: Проектирование расширений вспомогательных классов NDF
description: Этот раздел предназначен для предоставления общих рекомендаций в процессе разработки расширения вспомогательного класса.
ms.assetid: f5dbd198-7d22-4e7e-830e-6753e9f4d6c8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 474a9f4ade01fe98a8db30568aa6a7c4978156d2c791747353071f020af27605
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119802364"
---
# <a name="designing-ndf-helper-class-extensions"></a>Проектирование расширений вспомогательных классов NDF

Этот раздел предназначен для предоставления общих рекомендаций в процессе разработки расширения вспомогательного класса. Рекомендации в этом разделе применимы ко всем вспомогательным расширениям классов. дополнительные сведения см. в разделе [Windowsная платформа для расширяемого вспомогательного класса платформы фильтрации](windows-filtering-platform-extensible-helper-class.md) и [расширяемые вспомогательные классы диагностики беспроводных сетей 802,11](802-11-wireless-diagnostics-extensible-helper-classes.md).

## <a name="extending-ndf-functionality"></a>Расширение функциональности NDF

Windows Vista и более поздние версии поставляются с различными уже реализованными вспомогательными классами, которые могут диагностировать и устранять широкий спектр проблем. Однако иногда сторонние разработчики могут расширить эти вспомогательные классы для диагностики и устранения проблем, связанных с конкретными продуктами и реализациями.

Следующие вспомогательные классы Microsoft NDF являются расширяемыми.

-   [Платформа фильтрации Windows](windows-filtering-platform-extensible-helper-class.md)
-   [Безопасность беспроводных сетей](802-11-wireless-diagnostics-extensible-helper-classes.md)

## <a name="implementing-a-helper-class-extension"></a>Реализация расширения вспомогательного класса

Корпорация Майкрософт поставляет два интерфейса, которые можно использовать для разработки расширений классов поддержки NDF.

Интерфейс [**инетдиагхелперинфо**](/windows/desktop/api/ndhelper/nn-ndhelper-inetdiaghelperinfo) вызывается ndf для проверки наличия всех необходимых сведений и выбора правильного вспомогательного класса. Это достигается с помощью метода [**жетаттрибутеинфо**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelperinfo-getattributeinfo) .

Интерфейс [**инетдиагхелпер**](/windows/desktop/api/ndhelper/nn-ndhelper-inetdiaghelper) вызывается ndf для большинства действий, происходящих во время процедуры диагностики. Некоторые из его методов являются обязательными, но другие являются необязательными для конкретных применений.

К необходимым методам относятся [**Initialize**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-initialize) и [**жетдиагностиксинфо**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-getdiagnosticsinfo). NDF вызывает метод **Initialize** для отправки параметров ключей в расширение вспомогательного класса для инициализации его состояния экземпляра. **Жетдиагностиксинфо** предоставляет оценку того, как долго может пройти диагностика и требуется ли олицетворение исходного контекста пользователя.

Другой метод, [**ловхеалс**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-lowhealth), вызывается для диагностики сетевого компонента, соответствующего вспомогательному классу. Метод [**Cancel**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-cancel) вызывается, когда ndf определяет текущую диагностику или восстановление, которые должны быть остановлены. [**Очистка**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-cleanup) позволяет ndf освобождать ресурсы ndf, которые использовали расширение вспомогательного класса с момента вызова метода [**Initialize**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-initialize) .

Дополнительные сведения о дополнительных методах см. в разделе [**инетдиагхелпер**](/windows/desktop/api/ndhelper/nn-ndhelper-inetdiaghelper).

Расширения классов модуля поддержки NDF используются для диагностики и устранения проблем подключения, связанных с конкретным приложением или компонентом. Они также проверяют успешность или сбой попытки разрешения.

Разработчики, которые рассматривают реализацию расширения вспомогательного класса, должны выполнять следующие задачи.

-   Выявление пользовательских сценариев, в которых полезны операции диагностики и восстановления.
-   Предоставление решений для часто встречающихся проблем с подключением.
-   Если требуется расширение вспомогательного класса, определите модель работоспособности компонента, используемую для представления состояния работоспособности компонента в NDF.

## <a name="identify-user-scenarios"></a>Поиск пользовательских сценариев

Тестирование и использование приложения может уже предоставить шаблоны, которые расширение вспомогательного класса может диагностировать и, возможно, восстановить. Разработчики приложений могут использовать эти данные для определения наиболее важных проблем с подключением к адресу и для определения пользовательских сценариев, в которых вероятнее всего возникают проблемы с подключением.

Определить основную причину каждой проблемы крайне важно в этой части процесса. Это может потребовать всестороннего исследования, но поможет вам создать программное обеспечение, которое будет гораздо проще для пользователей и администраторов. Если основная причина не определена, то становится трудной или невозможной предложить разрешение проблемы с помощью расширения вспомогательного класса.

## <a name="provide-resolutions"></a>Предоставление решений

После того как группа разработчиков определит основные причины проблем, связанных с их программным обеспечением, следующим шагом будет определение соответствующих действий по устранению проблемы, чтобы помочь пользователю максимально эффективно решить проблему.

Не все разрешения требует создания расширения вспомогательного класса или автоматического действия. В некоторых случаях Группа может определить, что наилучшим решением для устранения основной причины является исправление или обновление компонента, предоставление дополнительного содержимого справки для компонента или разработка других стратегий, предоставляющих лучшие долгосрочные решения.

Для проблем, когда автоматизированное действие является идеальным, создание расширения вспомогательного класса NDF часто является отличным решением.

Расширения вспомогательных классов возвращают сведения о основных причинах и сведения об исправлении пользователям с помощью NDF. Строки, используемые для описания основных причин и сведений об исправлении, должны быть простыми и простыми для понимания нетехническим пользователем. Дополнительные сведения об этих строках см. в разделе [рекомендации по пользовательскому интерфейсу для расширений классов модуля поддержки ndf](user-interface-guidelines-for-ndf-helper-class-extensions.md).

## <a name="define-a-component-health-model"></a>Определение модели работоспособности компонента

Разработчики программного обеспечения должны определить уровни "работоспособности", связанные с управляемостью проблем с сетью. Модель работоспособности, используемая для разработки вспомогательных классов, определяет только два уровня работоспособности: работоспособность и неработоспособность. Эти уровни можно также применять к расширениям классов поддержки NDF.

Работоспособный компонент указывает на отсутствие проблем. Компонент может считаться неработоспособным из-за собственных проблем или из-за проблем, возникающих в других компонентах, от которых он зависит.



| Термин                                                                                                                             | Описание                                                                                                                      |
|----------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------|
| <span id="LowHealth"></span><span id="lowhealth"></span><span id="LOWHEALTH"></span>ловхеалс<br/>                         | Это состояние указывает на неприемлемый уровень сбоев от этого компонента и на то, что компонент является проблемой.<br/>    |
| <span id="LowHealth_Below"></span><span id="lowhealth_below"></span><span id="LOWHEALTH_BELOW"></span>Ловхеалс ниже<br/> | Это состояние указывает на неприемлемый уровень сбоев от компонента локального компьютера, от которого зависит этот компонент.<br/> |



 

Когда выполняется диагностика с помощью NDF, расширение вспомогательного класса запрашивает ряд вопросов для определения состояния работоспособности. Если расширение реагирует на неработоспособность, то NDF запрашивает уточнение вопросов, пытается диагностировать проблему, ее расположение и место, где будет выглядеть следующее. Каждый вспомогательный класс должен иметь возможность ответить на вопрос низкого уровня работоспособности, чтобы лучше направить соответствующие диагностические действия.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Windows Расширяемый вспомогательный класс платформы фильтрации](windows-filtering-platform-extensible-helper-class.md)
</dt> <dt>

[Расширяемые вспомогательные классы диагностики беспроводной сети 802,11](802-11-wireless-diagnostics-extensible-helper-classes.md)
</dt> </dl>

 

 





