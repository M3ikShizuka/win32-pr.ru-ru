---
title: Регистрация приложения агента SNMP
description: Помимо операций диспетчера SNMP, API-интерфейс WinSNMP версии 2,0 также поддерживает операции агента SNMP.
ms.assetid: 473560b5-4611-410e-aeae-764c9c76e765
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1c3415e511639c7cbbc18455ed93be74e11414c1f442797c8b72f7456092757c
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119009132"
---
# <a name="registering-an-snmp-agent-application"></a>Регистрация приложения агента SNMP

Помимо операций диспетчера SNMP, API-интерфейс WinSNMP версии 2,0 также поддерживает операции агента SNMP.

Чтобы зарегистрировать приложение WinSNMP в качестве агента SNMP, приложение может вызвать функцию [**снмплистен**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmplisten) . Эта функция информирует реализацию Microsoft WinSNMP о том, что сущность SNMP будет действовать в роли агента SNMP. Приложение также может вызвать **снмплистен** , чтобы сообщить о реализации, когда она больше не будет действовать как агент.

Если приложение вызывает функцию [**снмплистен**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmplisten) и передает значение снмпапи \_ On в параметре *лстатус* , выполняются следующие действия.

1.  Сущность, которая будет работать в роли агента SNMP, привязывается к назначенному ему порту и прослушивает входящие запросы SNMP-сообщений.
2.  Агент использует логику конкретного приложения для обработки каждого SNMP-запроса.
3.  Агент формирует соответствующие ответы на каждый запрос.
4.  Агент передает ответ запрашивающей сущности, вызывая функцию [**снмпсендмсг**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpsendmsg) . Когда агент вызывает **снмпсендмсг**, он задает адрес агента в параметре *срцентити* и адрес сущности удаленного диспетчера в параметре *дстентити* . (Эти значения являются обратными значениями сущности агента, полученной в этих параметрах при вызове функции [**снмпреквмсг**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmprecvmsg) для получения SNMP-запроса.)

Дополнительные сведения о приложениях и агентах управления SNMP см. в разделе [About SNMP](about-snmp.md).

 

 




