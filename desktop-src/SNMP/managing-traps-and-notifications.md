---
title: Управление ловушками и уведомлениями
description: Для получения ловушек и уведомлений приложение WinSNMP должно быть зарегистрировано, вызвав функцию Снмпрегистер с параметром СНМПАПИ \_ On. Приложение может отменить регистрацию и отключить ловушки и уведомления, вызвав функцию с параметром СНМПАПИ \_ Off.
ms.assetid: 2bccba35-bf5c-4e5c-94e4-59980f2b9776
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 51e3a2d9fed1f7c34dd8191550d1dbc68ed984e5
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103888868"
---
# <a name="managing-traps-and-notifications"></a>Управление ловушками и уведомлениями

Для получения ловушек и уведомлений приложение WinSNMP должно быть зарегистрировано, вызвав функцию [**снмпрегистер**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpregister) с параметром снмпапи \_ On. Приложение может отменить регистрацию и отключить ловушки и уведомления, вызвав функцию с параметром СНМПАПИ \_ Off.

Если приложение вызывает **снмпрегистер**, доступны несколько параметров. Приложение может регистрироваться или отменять регистрацию для следующих ловушек и уведомлений:

-   Один тип ловушки или уведомления
-   Все ловушки и уведомления
-   Все источники запросов на ловушки и уведомления
-   Ловушки и уведомления из всех сущностей управления
-   Ловушки и уведомления для каждого контекста

Чтобы зарегистрировать и получить предопределенную ловушку или тип уведомления, приложение должно определить идентификатор объекта (структуру [**смиоид**](/windows/desktop/api/Winsnmp/ns-winsnmp-smioid) ) для каждого предопределенного типа. Структура должна содержать последовательность сопоставления шаблонов для типа ловушки или уведомления. RFC 1907, «база данных управления для версии 2 протокола простого сетевого управления (SNMPv2)», определяет идентификаторы объектов Trap и Notification.

Чтобы получить необработанные данные и уведомления о ловушках для сеанса WinSNMP, приложение WinSNMP должно вызвать функцию [**снмпреквмсг**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmprecvmsg) с помощью обработчика сеанса, возвращенного функцией [**снмпкреатесессион**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpcreatesession) .

Дополнительные сведения см. в разделе [Отправка SNMP-сообщений](sending-snmp-messages.md) и [Получение сообщений SNMP](receiving-snmp-messages.md). Дополнительные сведения о выделении и освобождении ресурсов для ловушек и уведомлений см. в разделе [выделение объектов WinSNMP Memory](allocating-winsnmp-memory-objects.md).

 

 




