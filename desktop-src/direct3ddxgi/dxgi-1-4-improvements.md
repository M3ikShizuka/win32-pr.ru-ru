---
description: Следующие функции были добавлены или изменены в графической инфраструктуре Microsoft DirectX (DXGI) 1,4, в основном, для поддержки Direct3D 12.
ms.assetid: DEA901EA-B0F9-41D9-802C-ED1D6A7888E0
title: Усовершенствования DXGI 1,4
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 24e9a8a48dd026248afac7c1a7df23a99176adef
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104072179"
---
# <a name="dxgi-14-improvements"></a>Усовершенствования DXGI 1,4

Следующие функции были добавлены или изменены в графической инфраструктуре Microsoft DirectX (DXGI) 1,4, в основном, для поддержки Direct3D 12.

## <a name="cheaper-adapter-enumeration"></a>Более дешевое перечисление адаптеров

Для Direct3D 12 больше невозможно вернуться с устройства в [**идксгиадаптер**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) , который использовался для его создания. Кроме того, больше невозможно предоставить подпрограмму \_ типа драйвера D3D \_ \_ в [**D3D12CreateDevice**](/windows/win32/api/d3d12/nf-d3d12-d3d12createdevice). Чтобы упростить разработку, можно использовать [**IDXGIFactory4**](/windows/win32/api/DXGI1_4/nn-dxgi1_4-idxgifactory4) для решения этих проблем. [**IDXGIFactory4:: енумадаптербилуид**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgifactory4-enumadapterbyluid) (разработанный для связывания с [**ID3D12Device:: жетадаптерлуид**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-getadapterluid)) позволяет приложению получать сведения о адаптере, в котором было создано устройство Direct3D 12. [**IDXGIFactory4:: енумварпадаптер**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgifactory4-enumwarpadapter) предоставляет адаптер, который можно предоставить **D3D12CreateDevice** для использования модуля подготовки отчетов.

## <a name="video-memory-budget-tracking"></a>Отслеживание бюджета видеопамяти

Разработчикам приложений рекомендуется использовать систему резервирования видеопамяти, чтобы информировать ОС о объеме физической видеопамяти, который приложение не может переключиться.

Объем физической памяти, доступной для процесса, называется "бюджет видеопамяти". Бюджет может заметно изменяться в фоновом режиме и выходом из спящего режима; и при переключении пользователя на другое приложение оно будет заметно меняться. Приложение может получать уведомления при изменении бюджета и опрашивать как текущий, так и потребляемый в данный момент объем памяти. Если приложение не остается в пределах своего бюджета, процесс будет периодически заморожен, чтобы другие приложения выполнялись и (или) API-интерфейсы создания возвращали ошибку. Интерфейс [**IDXGIAdapter3**](/windows/win32/api/dxgi1_4/nn-dxgi1_4-idxgiadapter3) предоставляет методы, относящиеся к этой функции, в частности [**куеривидеомеморинфо**](/windows/win32/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-queryvideomemoryinfo) и [**регистервидеомеморибуджетчанженотификатионевент**](/windows/win32/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-registervideomemorybudgetchangenotificationevent).

Дополнительные сведения см. в разделе по Direct3D 12 в [местонахождение](../direct3d12/residency.md).

## <a name="direct3d-12-swapchain-changes"></a>Изменения имеющуюся цепочку буферов Direct3D 12

Некоторые из существующих функций Direct3D 11 имеющуюся цепочку буферов были признаны устаревшими для достижения снижения нагрузки на производительность в Direct3D 12. В то время как другие изменения были сделаны в соответствии с концепциями Direct3D 12 или обеспечивают лучшую поддержку функций Direct3D 12.

**Идентификатор инвариантного буфера обмена**

В Direct3D 11 приложения могут вызывать метод «вызывали [**буфер**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer)» (0,... ) только один раз. Каждый вызов [**предоставляет**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-present) неявно измененный идентификатор ресурса возвращенного интерфейса. Direct3D 12 больше не поддерживает неявное изменение удостоверения ресурса из-за ненужных ресурсов ЦП и структуры гибкого дескриптора ресурса. В результате приложение должно вручную вызвать метод «@ **buffer** » для каждого буфера, созданного с помощью имеющуюся цепочку буферов. Приложение должно вручную подготовиться к следующему буферу в последовательности после вызова метода **Present**. Приложениям рекомендуется создавать кэш дескрипторов **для каждого буфера**, вместо того чтобы повторно создавать множество объектов.

**Поддержка нескольких адаптеров**

При создании имеющуюся цепочку буферов на адаптере с несколькими GPU эти буферы создаются на узле 1, и поддерживается только одна очередь команд. [**ResizeBuffers1**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgiswapchain3-resizebuffers1) позволяет приложениям создавать буферы на разных узлах, позволяя использовать разные очереди команд для каждой из них. Эти возможности позволяют использовать альтернативные методы отрисовки кадров (АФР) с имеющуюся цепочку буферов. Ознакомьтесь с [системами с несколькими адаптерами](../direct3d12/multi-engine.md).

**Прочее**

-   Объект очереди команд должен быть передан методам [**креатесвапчаин**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-createswapchain) вместо объекта устройства Direct3D 12.
-   Поддерживаются только следующие два эффекта перестановки перелистывания моделей: <dl> Отразить отправку при отработке \_ \_ \_ \_ отказа DXGI должно быть предпочтительнее, когда приложения полностью визуализируются по буферу обмена перед представлением или заинтересованы в поддержке сценариев с несколькими адаптерами.  
    \_ \_ \_ Последовательный экран с отражением эффектов подкачки \_ должен использоваться приложениями, которые полагаются на оптимизацию частичной презентации или регулярно читаются из ранее представленных задних буферов.  
    </dl>
-   [**SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate) no longer exclusively owns the display, so user-initiated operating system elements can seamlessly appear in front of application output. Volume settings is an example of this.

## <a name="related-topics"></a>См. также

[Уровни функций оборудования Direct3D 12](../direct3d12/hardware-feature-levels.md)

[Руководством по программированию для DXGI](dx-graphics-dxgi-overviews.md)
