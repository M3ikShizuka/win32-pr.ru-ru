---
title: Использование API виртуализации удаленный рабочий стол
description: Разработчики могут использовать этот API для настройки логики, которую RDCB использует для определения наилучшего назначения для входящего клиентского подключения.
ms.assetid: b25eb87e-dac4-49ce-890e-b39c7e9e3408
ms.tgt_platform: multiple
keywords:
- службы удаленных рабочих столов службы удаленных рабочих столов с помощью API виртуализации
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7075c3a0cfcabc2df0dcb8438b7de5a748eb2b0340e26bf3d1e51afdb182f81e
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119423634"
---
# <a name="using-the-remote-desktop-virtualization-api"></a>Использование API виртуализации удаленный рабочий стол

Служба роли каталога сеансов служб терминалов позволяет серверам терминалов хранить сведения о пользователях и сеансах в базе данных, называемой каталогом сеансов. Когда пользователь подключается к серверу терминалов в ферме, каталог сеансов служб терминалов определяет, имеется ли у пользователя сеанс, запущенный на сервере терминалов, и, если это так, он перенаправляет пользователя на этот сервер терминалов.

в Windows Server 2008 служба роли каталога сеансов служб терминалов была развернута и переименована в посредник сеансов служб терминалов (посредник сеансов ts). В дополнение к сохранению каталога существующих сеансов посредник сеансов служб терминалов также может выполнять входящие подключения через Broker. Когда посредник сеансов служб терминалов получает входящее подключение от пользователя, он проверяет свою базу данных, чтобы определить, есть ли у пользователя сеанс на сервере терминалов. В этом случае посредник сеансов служб терминалов перенаправляет соединение на тот же сервер терминалов. Если нет, посредник сеансов служб терминалов определяет, какой сервер терминалов имеет наименьшее число подключений, и перенаправляет подключение к этому серверу.

начиная с Windows Server 2008 корпорация майкрософт также выпустила общедоступный прикладной программный интерфейс (API) для мониторинга и взаимодействия с сеансами на серверах терминалов. Этот API описан в [справочнике по подключаемому модулю компонента Подключение к удаленному рабочему столу Broker](/windows/desktop/TermServ/terminal-services-virtualization-api-reference). С помощью этого API разработчики могут создавать настраиваемые подключаемые модули политики, переопределяющие стандартную логику перенаправления посредника сеансов служб терминалов. Настраиваемые подключаемые модули могут перенаправлять сеансы на серверы терминалов, а также виртуальные машины, виртуальные рабочие столы, блейд-серверы и физические рабочие столы.

в Windows Server 2008 R2 архитектура подключение к удаленному рабочему столу брокера (RDCB) (ранее известная как посредник сеансов служб терминалов) была расширена для поддержки подключений к виртуальным машинам. Новая архитектура поддерживает управление сеансами для виртуальных машин с помощью API виртуализации удаленный рабочий стол. Разработчики могут использовать этот API для настройки логики, которую RDCB использует для определения наилучшего назначения для входящего клиентского подключения.

Удаленный рабочий стол API виртуализации предоставляет разработчикам несколько преимуществ:

-   Интерфейсы для работы с физическими серверами терминалов похожи на те, которые используются для работы с виртуальными машинами.
-   Разработчики могут заменить стандартную логику перенаправления или ее часть. Разработчики могут создавать код, который поставляется вместе с продуктом, и не должен писать все с нуля.
-   На управляющем сервере или в пределах сеанса не требуется дополнительный агент управления.
-   подключаемые модули посредника сеансов служб терминалов, разработанные для использования с Windows Server 2008, по-прежнему поддерживаются.
-   API также позволяет разработчикам создавать пользовательские интерфейсы для администрирования как серверов удаленный рабочий стол сеансов, так и узлов сеансов удаленных рабочих столов (ранее известных как "серверы терминалов") и виртуальных машин.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Справочник по API виртуализации удаленный рабочий стол](terminal-services-virtualization-api-reference.md)
</dt> <dt>

[Справочник по подключаемому модулю компонента подключение к удаленному рабочему столу Broker](/windows/desktop/TermServ/terminal-services-virtualization-api-reference)
</dt> </dl>

 

 