---
title: Серверное приложение виртуального канала
description: Серверный модуль приложения, использующего виртуальные каналы, должен быть приложением пользовательского режима, выполняющимся в сеансе клиента на сервере узла сеансов удаленный рабочий стол (узел сеансов удаленных рабочих столов). Обратите внимание, что необходимо предоставить метод для запуска серверного приложения.
ms.assetid: b593df5d-5e22-46c6-8f59-9e3fdfe765ad
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d63a758f4860a0ab606f18c4a5086d305b1f627475bf7bab588648cea8aabd41
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119423569"
---
# <a name="virtual-channel-server-application"></a>Серверное приложение виртуального канала

Серверный модуль приложения, использующего виртуальные каналы, должен быть приложением пользовательского режима, выполняющимся в сеансе клиента на сервере узла сеансов удаленный рабочий стол (узел сеансов удаленных рабочих столов). Обратите внимание, что необходимо предоставить метод для запуска серверного приложения. Это можно сделать несколькими способами. Например, можно использовать сценарий входа в систему или программу или сценарий в папке Startup. Пользователи также могут запустить приложение.

Необходимо сохранить имя серверного приложения виртуального канала в реестре, добавив подраздел в следующем расположении:

**HKey \_ \_** \\  \\  \\ **Управление** \\  \\ **надстройками** сервера терминалов в системе локального компьютера CurrentControlSet

Дополнительные сведения о подразделе см. в разделе [наблюдение за подключениями и отсоединениями сеансов](monitoring-session-connections-and-disconnections.md).

Серверное приложение может вызвать функцию [**втсвиртуалчаннелопен**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsvirtualchannelopen) , чтобы открыть маркер для виртуального канала. Затем приложение может использовать этот обработчик в любой из следующих функций.

<dl> <dt>

[**втсвиртуалчаннелклосе**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsvirtualchannelclose)
</dt> <dd>

Закрывает открытый маркер виртуального канала.

</dd> <dt>

[**втсвиртуалчаннелпуржеинпут**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsvirtualchannelpurgeinput)
</dt> <dd>

Удаляет все входные данные из очереди, отправленные клиентом на сервер в определенном виртуальном канале.

> [!Note]  
> В настоящее время эта функция не используется службы удаленных рабочих столов.

 

</dd> <dt>

[**втсвиртуалчаннелпуржеаутпут**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsvirtualchannelpurgeoutput)
</dt> <dd>

Удаляет все выходные данные в очереди, отправленные с сервера клиенту по определенному виртуальному каналу.

> [!Note]  
> В настоящее время эта функция не используется службы удаленных рабочих столов.

 

</dd> <dt>

[**втсвиртуалчаннелкуери**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsvirtualchannelquery)
</dt> <dd>

Возвращает сведения об указанном виртуальном канале.

</dd> <dt>

[**втсвиртуалчаннелреад**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsvirtualchannelread)
</dt> <dd>

Считывает данные с конца виртуального канала на сервере.

</dd> <dt>

[**втсвиртуалчаннелврите**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsvirtualchannelwrite)
</dt> <dd>

Записывает данные на серверный конец виртуального канала.

</dd> </dl>

 

 




