---
title: службы удаленных рабочих столов администрирования
description: Службы удаленных рабочих столов API позволяет перечислять и управлять серверами узлов сеансов удаленный рабочий стол, сеансами клиентов и процессами.
ms.assetid: 85a9ed9d-79d6-4011-93a4-00847c689747
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e763a652335c85931225746334bc21db0e6e086d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "105672343"
---
# <a name="remote-desktop-services-administration"></a>службы удаленных рабочих столов администрирования

Службы удаленных рабочих столов API позволяет перечислять и управлять серверами узлов сеансов удаленный рабочий стол, сеансами клиентов и процессами.

Чтобы получить имена всех серверов узлов сеансов удаленных рабочих столов в домене, вызовите функцию [**нетсерверенум**](/windows/desktop/api/lmserver/nf-lmserver-netserverenum) для перечисления серверов типа ТЕРМИНАЛСЕРВЕР типа SV \_ \_ . Чтобы открыть обработчик для конкретного сервера узла сеансов удаленных рабочих столов, передайте имя сервера в вызове функции [**втсопенсервер**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsopenservera) . Завершив использование этого маркера, выпустите его, вызвав функцию [**втсклосесервер**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtscloseserver) .

Вы можете использовать маркер, возвращенный **втсопенсервер** , для выполнения следующих операций на сервере.



| Функция                                                         | Операция                                                                                                                                                                                                         |
|------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**втсдисконнектсессион**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsdisconnectsession)             | Отключает клиента от указанного сеанса. Сеанс остается активным, и пользователь может снова войти в систему для подключения к тому же сеансу.                                                                         |
| [**втсенумератесессионс**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsenumeratesessionsa)             | Возвращает список сеансов на указанном сервере узла сеансов удаленных рабочих столов.                                                                                                                                               |
| [**втсенумератепроцессес**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsenumerateprocessesa)           | Возвращает список процессов на указанном сервере узла сеансов удаленных рабочих столов.                                                                                                                                              |
| [**втслогоффсессион**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtslogoffsession)                     | Выходит из указанного сеанса.                                                                                                                                                                                   |
| [**втскуерисессионинформатион**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsquerysessioninformationa) | Возвращает сведения о указанном сеансе на указанном сервере узла сеансов удаленных рабочих столов.                                                                                                                          |
| [**втссендмессаже**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea)                         | Отображает окно сообщения на экране клиента в указанном сеансе.                                                                                                                                                 |
| [**втсшутдовнсистем**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsshutdownsystem)                   | Завершает работу и при необходимости перезапускает указанный сервер узла сеансов удаленных рабочих столов.                                                                                                                                            |
| [**втстерминатепроцесс**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsterminateprocess)               | Завершает указанный процесс на указанном сервере узла сеансов удаленных рабочих столов.                                                                                                                                             |
| [**втсвиртуалчаннелопен**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsvirtualchannelopen)           | Открывает обработчик для указанного виртуального канала на сервере. Дополнительные сведения о виртуальных каналах см. [в статье использование службы удаленных рабочих столов виртуальных каналов](using-terminal-services-virtual-channels.md). |
| [**втсваитсистемевент**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtswaitsystemevent)                 | Ожидает события, например создание сеанса клиента или вход пользователя на сервер узла сеансов удаленных рабочих столов.                                                                                                  |



 

Некоторые из этих функций выделяют буферы для возвращения сведений вызывающему объекту. Завершив использование буфера, освободите его, вызвав функцию [**втсфримемори**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsfreememory) .

 

 