---
title: Включение трассировки EAPHost
description: Может помочь пользователям найти основные причины проблем, возникающих в процессе проверки подлинности EAP. Отладочная информация может включать вызовы API, выполненные внутренние вызовы функций и выполненные переходы состояния.
ms.assetid: 5f401101-59aa-4ee8-825a-0b998489eed9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5fdee8a5516b218e51f0151e1964885789560d82
ms.sourcegitcommit: db89157e3be911fdce2e543e99faa31fb2403bc8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/18/2020
ms.locfileid: "104070896"
---
# <a name="enabling-eaphost-tracing"></a>Включение трассировки EAPHost

Журналы трассировки, содержащие отладочную информацию, могут помочь пользователям найти основные причины проблем, возникающих в процессе проверки подлинности EAP. Отладочная информация может включать вызовы API, выполненные внутренние вызовы функций и выполненные переходы состояния.

Трассировку можно включить как на стороне клиента, так и на стороне средства проверки подлинности. Трассировку также можно включить для вызовов интерфейсов API [службы маршрутизации и удаленного доступа (RRAS)](/windows/desktop/RRAS/routing-start-page) . Дополнительные сведения см. в разделе [Трассировка в службе маршрутизации и удаленного доступа](#tracing-on-the-routing-and-remote-access-service).

> [!Note]  
> Журналы трассировки доступны только на английском языке.

 

Когда трассировка EAPHost включена, данные журнала хранятся в ETL-файле в указанном пользователем расположении. Если во время проверки подлинности EAP возникают ошибки, то трассировка создает ETL-файл, который можно отправить в корпорацию Майкрософт поддержка Developer для анализа основных причин. Партнеры, имеющие доступ к общим папкам, символам и трацеформат файлам Microsoft Windows, могут преобразовать ETL-файлы в обычный текстовый файл с помощью средства **Tracerpt** .

Сбои сервера политики сети (NPS) не фиксируются в журналах EAPHost. Если вы пытаетесь устранить сбой NPS, просмотрите ИАССАМ. LOG и [иаснап. Файлы журнала](https://go.microsoft.com/fwlink/p/?linkid=84108) .

## <a name="tracing-on-the-client"></a>Трассировка на клиенте

Чтобы включить трассировку на стороне клиента, выполните следующие действия.

1.  Откройте окно командной строки с повышенными привилегиями.
2.  Выполните следующую команду: **Logman** **Start Trace** **еафостпир** **-o** **. \\ Еафостпир. ETL** **-p** **{5F31090B-D990-4e91-B16D-46121D0255AA} 0x4000ffff 0** **— ETS**
3.  Воспроизведите сценарий, который требуется отслеживать.
4.  Выполните следующую команду: **Logman** **останавливают** **еафостпир** **-ETS**
5.  Преобразуйте ETL-файл в текст с помощью следующей команды **: Tracerpt еафостпир. ETL** **-pdb** **&lt; &gt; пдбпас** **-TP** **&lt; трацемессажефилесдиректорипас &gt;** **/o** **EapHostPeer.txt**
    > [!Note]  
    > Если у вас нет доступа к средству Tracerpt, Избегайте последнего шага и отправьте ETL-файл в Microsoft поддержка Developer.

     

## <a name="tracing-on-the-authenticator"></a>Трассировка для средства проверки подлинности

Чтобы включить трассировку на стороне средства проверки подлинности, выполните следующие действия.

1.  Откройте окно командной строки с повышенными привилегиями.
2.  Выполните следующую команду: **Logman** **Start Trace** **еафостауср** **-o** **. \\ Еафостауср. ETL** **-p** **{F6578502-DF4E-4a67-9661-E3A2F05D1D9B} 0x4000ffff 0** **— ETS**
3.  Воспроизведите сценарий, который требуется отслеживать.
4.  Выполните следующую команду: **Logman** **останавливают** **еафостауср** **-ETS**
5.  Преобразуйте ETL-файл в текст с помощью следующей команды **: Tracerpt еафостауср. ETL** **-pdb** **&lt; &gt; пдбпас** **-TP** **&lt; трацемессажефилесдиректорипас &gt;** **/o** **EapHostAuthr.txt**
    > [!Note]  
    > Если у вас нет доступа к средству Tracerpt, Избегайте последнего шага и отправляйте ETL-файл в Microsoft поддержка Developer.

     

## <a name="event-tracing"></a>Трассировка событий

В Windows 7 и более поздних версиях Windows EapHost предоставляет трассировку на основе событий для средства проверки подлинности и однорангового узла. Преимущество трассировки на основе событий заключается в том, что для просмотра сообщений трассировки не нужны файлы символов. Чтобы включить трассировку событий, выполните следующие действия.

1.  Откройте **евентвиевер**.
2.  Критические сообщения EapHost регистрируются в папке: " \\ Административные события для пользовательских представлений"
3.  В журнал заносятся некритические сообщения: "приложения и службы \\ Microsoft \\ Windows \\ EapHost
4.  Сообщения о событиях типа "аналитика" и "Отладка" можно просматривать по тому же пути, выбрав пункт **Показать аналитические и отладочные журналы** в меню **вид** в заголовке окна.

## <a name="tracing-on-the-routing-and-remote-access-service"></a>Трассировка в службе маршрутизации и удаленного доступа

Чтобы включить трассировку RRAS, выполните следующие действия.

1.  Откройте окно командной строки с повышенными привилегиями.
2.  Выполните следующую команду: **netsh** **RAS** **Set** **tr** **\* *_ _* EN** .
3.  Открыть **\\ трассировку% systemroot%** для просмотра трассировок RAS

Чтобы отключить трассировку RRAS, выполните следующие действия.

1.  Откройте окно командной строки с повышенными привилегиями.
2.  Выполните следующую команду: **netsh** **RAS** **Set** **tr** **\* *_ _* DIS**

Дополнительные сведения см. в разделе [команды netsh](/previous-versions/windows/it-pro/windows-server-2003/cc779693(v=ws.10)).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Использование EAPHost](using-eap-host.md)
</dt> <dt>

[Служба маршрутизации и удаленного доступа (RRAS)](/windows/desktop/RRAS/routing-start-page)
</dt> </dl>

 

 