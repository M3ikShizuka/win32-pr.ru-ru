---
title: Последовательность вызовов API-интерфейса для запрашивающих сторон
description: Сведения о последовательности вызовов API-интерфейса для запрашивающих сторон. См. Обзор последовательности вызовов и Просмотр дополнительных доступных ресурсов.
ms.assetid: 83276783-aee5-43ac-982d-1144df982a7d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 49c93afea6dbf4c3220bbeaec4f6278eb3d0b756
ms.sourcegitcommit: b0ebdefc3dcd5c04bede94091833aa1015a2f95c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "103987900"
---
# <a name="supplicant-api-call-sequence"></a>Последовательность вызовов API-интерфейса для запрашивающих сторон

В этом разделе содержится конкретная последовательность вызовов для API-интерфейса запрашивающего устройства.

## <a name="supplicant-api-call-sequence-overview"></a>Обзор последовательности вызовов API-интерфейса для запрашивающих сторон

Когда запрашивающий объект получает пакет EAP от поставщика, например точку доступа, обычно возникает следующий поток вызова API-интерфейса.

-   Приложение вызывает [**еафостпирбегинсессион**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerbeginsession) с данными конфигурации EAPHost и данными пользователя. Успешный вызов возвращает обработчик **сеанса \_ EAP \_** .
-   Каждый пакет, полученный с помощью запрашивающего устройства, обрабатывается вызовом [**еафостпирпроцессрецеиведпаккет**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket). Затем запрашивающий объект вызывает функцию, соответствующую коду действия, возвращаемому функцией.
-   Если код действия — **еафостпирреспонсесенд**, то запрашивающий объект вызывает [**еафостпиржетсендпаккет**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetsendpacket) , чтобы получить ответ, отправляемый в средство проверки подлинности.
-   Если во время сеанса код действия, возвращенный в качестве запрашивающего, является **еафостпирреспонсереспонд**, он указывает на доступность атрибутов EAP. Затем этот запрашивающий объект вызывает [**еафостпиржетреспонсеаттрибутес**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresponseattributes) , чтобы получить их. Эти атрибуты содержат дополнительные данные, используемые в процессе проверки подлинности. После того как запрашивающая сторона завершит обработку атрибутов, он вызывает [**еафостпирсетреспонсеаттрибутес**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetresponseattributes) , который обновляет данные. Эта функция возвращает код действия, который определяет следующее действие вызывающего устройства.
-   Если код действия **еафостпирреспонсеинвокеуи** , он создает диалоговое окно пользовательского интерфейса для получения интерактивных данных от пользователя, таких как учетные данные или сведения об удостоверении. См. сведения о взаимодействии пользователей с потоком вызовов API для запрашивающих сторон.
-   Если код действия — **еафостпирреспонсересулт**, это означает, что результаты сеанса проверки подлинности доступны для данного запрашивающего устройства. Затем этот запрашивающий объект вызывает [**еафостпиржетресулт**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresult) для получения результатов. Независимо от того, указывают ли результаты на успех или сбой, запрашивающий объект вызывает [**еафостпирендсессион**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerendsession). В случае сбоя можно выполнить повторную проверку подлинности, открыв другой сеанс с EAPHost и предоставив новое удостоверение, или повторить попытку проверки подлинности с исходным удостоверением.

## <a name="user-interaction-with-the-supplicant-api-call-flow"></a>Взаимодействие пользователя с потоком вызовов API-интерфейса для запрашивающих сторон

В некоторых случаях для продолжения процесса проверки подлинности запрашивающему пользователю необходимо получить сведения от пользователя.

В следующем списке показана последовательность вызовов в пользовательском интерфейсе и процессе вызова EAPHost, необходимых для включения интерактивного ввода.

1.  Запрашивающий объект получает контекст текущего пользовательского интерфейса путем вызова [**еафостпиржетуиконтекст**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetuicontext).
2.  Затем запрашивающий объект отправляет данные контекста пользовательского интерфейса в процесс запрашивающего пользователя.
    > [!Note]  
    > Процесс пользовательского интерфейса, который обычно собирает пользовательский интерфейс или обрабатывает интерактивный пользовательский интерфейс, отделен от процесса запрашивающего устройства. Разделение этих двух процессов не является требованием EAPHost, но это имеет преимущество, позволяя процессу пользовательского интерфейса взаимодействовать с рабочим столом.

     

3.  Если запрашивающая сторона хочет отобразить пользовательский интерфейс самостоятельно, он вызывает функцию [**еафостпиркуеринтерактивеуиинпутфиелдс**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) , чтобы получить поля ввода для вызова интерактивных компонентов пользовательского интерфейса. В противном случае он следует традиционной модели вызова интерактивного пользовательского интерфейса метода путем вызова [ **еафостпиринвокеинтерактивеуи**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui)
    > [!Note]  
    > Если [**возвращается \_ \_ \_ \_ \_ \_ неподдерживаемая операция метода протокола EAPHOST EAP E**](eap-related-error-and-information-constants.md) , то он должен следовать традиционной модели вызова интерактивного пользовательского интерфейса метода с помощью вызова [**еафостпиринвокеинтерактивеуи**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui). При возникновении ошибки [**еафостпиркуеринтерактивеуиинпутфиелдс**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) вернет код возврата, отличный от **null**.

     

4.  Указывает, вызывает ли запрашивающий объект [**еафостпиркуеринтерактивеуиинпутфиелдс**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) или [**еафостпиринвокеинтерактивеуи**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui) , что процесс пользовательского интерфейса передает существующие данные контекста и загружает Eappcfg.dll. Для накопления новых данных вызывается соответствующий пользовательский интерфейс. Новые данные контекста пользовательского интерфейса, которые теперь могут содержать ввод данных пользователем, копируются, а старые данные контекста освобождаются с помощью вызова [**еаппирфримемори**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeerfreememory).
5.  Процесс пользовательского интерфейса возвращает новый контекст данных запрашивающему сторона, который вызывает [**еафостпирсетуиконтекст**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetuicontext) , чтобы задать его.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Последовательность вызовов API однорангового метода](peer-method-api-call-sequence.md)
</dt> <dt>

[Последовательность вызовов API метода средства проверки подлинности](authenticator-method-api-call-sequence.md)
</dt> <dt>

[Последовательность вызовов EAPHost](about-eaphost-call-sequences.md)
</dt> <dt>

[EAPHost отправителей запросов](eaphost-supplicants.md)
</dt> </dl>

 

 




