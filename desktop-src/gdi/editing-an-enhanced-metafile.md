---
description: Чтобы изменить изображение, хранящееся в расширенном метафайле, приложение должно выполнить задачи, описанные в следующей процедуре.
ms.assetid: 19d9c523-cff8-47e1-bbf2-16d8991dac3b
title: Редактирование расширенного метафайла
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a052be915d966d90a0189376de7e1ff6e27831ebc9c44a0ff6af266b37fa65f9
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120015584"
---
# <a name="editing-an-enhanced-metafile"></a>Редактирование расширенного метафайла

Чтобы изменить изображение, хранящееся в расширенном метафайле, приложение должно выполнить задачи, описанные в следующей процедуре.

**Изменение изображения, хранящегося в расширенном метафайле**

1.  Используйте проверку попадания для захвата координат курсора и получения позиции объекта (линии, дуги, прямоугольника, эллипса, многоугольника или неравномерные фигуры), которую пользователь хочет изменить.
2.  Преобразуйте эти координаты в логические (или в мир) единицы.
3.  Вызовите функцию [**енуменхметафиле**](/windows/desktop/api/Wingdi/nf-wingdi-enumenhmetafile) и изучите каждую запись метафайла.
4.  Определить, соответствует ли заданная запись функции рисования GDI.
5.  Если это так, определите, соответствуют ли координаты, хранящиеся в записи, с линией, дугой, эллипс или другим графическим элементом, пересекающим координаты, заданные пользователем.
6.  При поиске записи, которая соответствует выходным данным, которые пользователь хочет изменить, удалите объект на экране, соответствующий исходной записи.
7.  Удалите соответствующую запись из метафайла, сохранив указатель в его расположении.
8.  Разрешение пользователю перерисовки или замены объекта.
9.  Преобразуйте функции GDI, используемые для рисования нового объекта, в одну или несколько записей расширенных метафайлов.
10. Храните эти записи в расширенном метафайле.

 

 



