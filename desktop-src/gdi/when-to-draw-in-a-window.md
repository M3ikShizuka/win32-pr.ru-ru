---
description: 'Приложение рисует в окне в любое время: при первом создании окна, при изменении размера окна при перемещении окна из другого окна, при свертывании или развертывании окна, при отображении данных из открытого файла и при прокрутке, изменении или выделении части отображаемых данных.'
ms.assetid: 4b5d6842-5707-4884-a55a-e09e342cea46
title: Когда следует рисовать в окне
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 832f219ad15fa919715b0f6892b73686237e1c3681e298106db3cefc4a8c3ec0
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119468094"
---
# <a name="when-to-draw-in-a-window"></a>Когда следует рисовать в окне

Приложение рисует в окне в любое время: при первом создании окна, при изменении размера окна при перемещении окна из другого окна, при свертывании или развертывании окна, при отображении данных из открытого файла и при прокрутке, изменении или выделении части отображаемых данных.

Система управляет такими действиями, как перемещение и изменение размера окна. Если действие влияет на содержимое окна, система помечает затронутую часть окна как готовую к обновлению и, при следующей возможности, отправляет сообщение [**WM \_ Paint**](wm-paint.md) в процедуру окна окна. Сообщение является сигналом для приложения, чтобы определить, что необходимо обновить, и выполнить необходимую прорисовку.

Некоторыми действиями управляет приложение, например отображение открытых файлов и выбор отображаемых данных. Для этих действий приложение может отмечать для обновления части окна, затронутой действием, что вызывает отправку сообщения [**WM \_ Paint**](wm-paint.md) при следующей возможности. Если действие требует немедленного отзыва, приложение может рисовать во время выполнения действия, не дожидаясь, когда **WM \_ Paint**. Например, типичное приложение выделяет область, которую пользователь выбирает, вместо того, чтобы ждать следующего сообщения **WM \_ Paint** , чтобы обновить область.

Во всех случаях приложение может рисовать в окне сразу после его создания. Чтобы рисовать в окне, приложение должно сначала получить маркер для контекста устройства отображения для окна. В идеале приложение выполняет большинство операций рисования во время обработки сообщений [**WM \_ Paint**](wm-paint.md) . В этом случае приложение получает контекст отображаемого устройства, вызывая функцию [**бегинпаинт**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) . Если приложение рисуется в любое другое время, например в [**WinMain**](/windows/win32/api/winbase/nf-winbase-winmain) или во время обработки клавиатуры или сообщения мыши, оно вызывает функцию [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) или [**жетдцекс**](/windows/desktop/api/Winuser/nf-winuser-getdcex) , чтобы получить контроллер домена для дисплея.

 

 
