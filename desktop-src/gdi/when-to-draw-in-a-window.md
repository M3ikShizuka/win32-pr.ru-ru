---
description: 'Приложение рисует в окне в любое время: при первом создании окна, при изменении размера окна при перемещении окна из другого окна, при свертывании или развертывании окна, при отображении данных из открытого файла и при прокрутке, изменении или выделении части отображаемых данных.'
ms.assetid: 4b5d6842-5707-4884-a55a-e09e342cea46
title: Когда следует рисовать в окне
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 42c8c157de5a591be5ad1a6ad3e319cf83220e77
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104345135"
---
# <a name="when-to-draw-in-a-window"></a>Когда следует рисовать в окне

Приложение рисует в окне в любое время: при первом создании окна, при изменении размера окна при перемещении окна из другого окна, при свертывании или развертывании окна, при отображении данных из открытого файла и при прокрутке, изменении или выделении части отображаемых данных.

Система управляет такими действиями, как перемещение и изменение размера окна. Если действие влияет на содержимое окна, система помечает затронутую часть окна как готовую к обновлению и, при следующей возможности, отправляет сообщение [**WM \_ Paint**](wm-paint.md) в процедуру окна окна. Сообщение является сигналом для приложения, чтобы определить, что необходимо обновить, и выполнить необходимую прорисовку.

Некоторыми действиями управляет приложение, например отображение открытых файлов и выбор отображаемых данных. Для этих действий приложение может отмечать для обновления части окна, затронутой действием, что вызывает отправку сообщения [**WM \_ Paint**](wm-paint.md) при следующей возможности. Если действие требует немедленного отзыва, приложение может рисовать во время выполнения действия, не дожидаясь, когда **WM \_ Paint**. Например, типичное приложение выделяет область, которую пользователь выбирает, вместо того, чтобы ждать следующего сообщения **WM \_ Paint** , чтобы обновить область.

Во всех случаях приложение может рисовать в окне сразу после его создания. Чтобы рисовать в окне, приложение должно сначала получить маркер для контекста устройства отображения для окна. В идеале приложение выполняет большинство операций рисования во время обработки сообщений [**WM \_ Paint**](wm-paint.md) . В этом случае приложение получает контекст отображаемого устройства, вызывая функцию [**бегинпаинт**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) . Если приложение рисуется в любое другое время, например в [**WinMain**](/windows/win32/api/winbase/nf-winbase-winmain) или во время обработки клавиатуры или сообщения мыши, оно вызывает функцию [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) или [**жетдцекс**](/windows/desktop/api/Winuser/nf-winuser-getdcex) , чтобы получить контроллер домена для дисплея.

 

 
