---
description: Сглаживание Microsoft ClearType — это метод сглаживания, улучшающий разрешение экрана с помощью традиционных сглаживания.
ms.assetid: b9896934-1e4f-4ae1-922a-ef30e0edf94f
title: Сглаживание ClearType
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bcc8444c1e1b594559f9c5b7f96529a0db00b20c6a10e560bc1dcb4574e079d0
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117888103"
---
# <a name="cleartype-antialiasing"></a>Сглаживание ClearType

Сглаживание Microsoft ClearType — это метод сглаживания, улучшающий разрешение экрана с помощью традиционных сглаживания. Это значительно повышает удобочитаемость на цветных ЖК-мониторах с помощью цифрового интерфейса, такого как ноутбуки и высококачественные дисплеи с плоским настольным ПК. Удобочитаемость на экранах CRT также немного улучшена.

Однако технология ClearType зависит от ориентации и порядка полос LCD. В настоящее время технология ClearType реализована только для LCDs с вертикальными полосами, которые упорядочиваются по RGB. В частности, это влияет на Планшетные ПК, где дисплей может быть ориентирован в любом направлении, а также на экраны, которые можно включить в книжную ориентацию.

Допускается сглаживание ClearType:

-   Для 16-, 24-и 32-разрядного цвета (отключено для 256 цветов или меньше)
-   Для экрана DC и DC памяти (не для контроллера домена)
-   Для шрифтов TrueType и шрифтов OpenType с контурами TrueType

Сглаживание ClearType отключено:

-   В разделе клиент сервера терминалов
-   Для точечных шрифтов, векторных шрифтов, шрифтов устройства, типа 1 шрифтов или шрифтов OpenType PostScript без контуров TrueType
-   Если шрифт настраивает внедренные точечные рисунки, только для тех размеров шрифтов, которые содержат внедренные точечные рисунки.

Чтобы активировать сглаживание ClearType, вызовите [**системпараметерсинфо**](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa) один раз, чтобы включить смягчение шрифтов, а затем еще раз, чтобы установить тип сглаживания Fe \_ фонтсмусингклеартипе, как показано в следующем примере кода:


```C++
SystemParametersInfo(SPI_SETFONTSMOOTHING,
                     TRUE,
                     0,
                     SPIF_UPDATEINIFILE | SPIF_SENDCHANGE);
SystemParametersInfo(SPI_SETFONTSMOOTHINGTYPE,
                     0,
                     (PVOID)FE_FONTSMOOTHINGCLEARTYPE,
                     SPIF_UPDATEINIFILE | SPIF_SENDCHANGE); 
```



Можно настроить внешний вид текста, изменив значение контрастности, используемое в алгоритме ClearType. Значение по умолчанию — 1 400, но оно может быть любым значением от 1 000 до 2 200. В зависимости от устройства дисплея и от чувствительности пользователя к цвету, более высокое или низкое значение контрастности может повысить удобочитаемость. Чтобы изменить контрастность, вызовите [**системпараметерсинфо**](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa) с SPI \_ сетфонтсмусингконтраст. Следующий код задает значение контраста равным 1 600.


```C++
SystemParametersInfo(SPI_SETFONTSMOOTHINGCONTRAST,
                     0,
                     (PVOID)1600,
                     SPIF_UPDATEINIFILE | SPIF_SENDCHANGE); 
```



Для обеспечения совместимости приложений следует учитывать следующие сведения.

-   Отрисовка текста с помощью технологии ClearType немного медленнее, чем при стандартном сглаживание.
-   Приложения не должны использовать XOR для показа выбранного текста. Приложения должны задать цвет фона и повторно отобразить выделенный текст.
-   Приложения не должны закрашивать один и тот же текст поверх самого себя в прозрачном режиме. Если это происходит, то граничные Пиксели с сглаженными цветами будут объединяться с самим собой, а не с цветом фона. Это приводит к затемнению и цвету краев.
-   Приложения не должны закрашивать текст путем рисования отдельных символов в непрозрачном режиме, так как границы символа могут обрезаться следующим символом. Это происходит потому, что символ, сглаженный с помощью ClearType, может иметь отрицательную ширину или с, где обычный символ имеет положительную или с. Только ширина символа в B гарантирована одинакова. Аналогично, приложения должны быть внимательны, если сглаженный текст находится рядом с несглаженным текстом.
-   Если приложение визуализирует текст, а затем манипулирует точечным рисунком, необходимо отключить сглаживание шрифтов, установив для элемента **лфкуалити** структуры [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) значение нонантиалиасед \_ Quality. Например, игра может добавить эффект тени к растровому изображению или текст, отображаемый в растровом изображении, можно масштабировать для создания сумбвиев.
-   Если пользователь работает в книжной ориентации (то есть чередование ведется горизонтально), сглаживание ClearType должно быть отключено.

Параметр *фдвкуалити* в [**CreateFont**](/windows/desktop/api/Wingdi/nf-wingdi-createfonta) и член **ЛФКУАЛИТИ** [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) принимают \_ флаг качества CLEARTYPE. Растрирование шрифтов, созданных с помощью этого флага, будет использовать средство прорисовки ClearType. Этот флаг не влияет на предыдущие версии операционной системы.

 

 
