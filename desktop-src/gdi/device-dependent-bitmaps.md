---
description: Точечные рисунки, зависящие от устройства (Ддбс), описаны с помощью одной структуры, структурной БИТОВой карты.
ms.assetid: 63ff9cd6-cd07-4085-b166-268e4d9b7aad
title: Device-Dependent растровые изображения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 92a3de2c59509c71b38f9981df330b3b28effa26
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104155643"
---
# <a name="device-dependent-bitmaps"></a>Device-Dependent растровые изображения

Точечные рисунки, зависящие от устройства (Ддбс), описаны с помощью одной структуры, структурной [**битовой карты**](/windows/win32/api/wingdi/ns-wingdi-bitmap) . Члены этой структуры задают ширину и высоту прямоугольной области в пикселях; ширина массива, которая сопоставляет записи из палитры устройств с пикселями; и цветовой формат устройства с точки зрения цветовых плоскостей и битов на пиксель. Приложение может получить цветовой формат устройства, вызвав функцию [**жетдевицекапс**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) и указав соответствующие константы. Обратите внимание, что DDB не содержит значений цветов. Вместо этого цвета находятся в формате, зависящем от устройства. Дополнительные сведения см. [в разделе цвет в точечных рисунках](color-in-bitmaps.md). Так как каждое устройство может иметь собственный набор цветов, на другом устройстве может не отображаться свойство DDB, созданное для одного устройства.

Чтобы использовать DDB в контексте устройства, у него должна быть цветовая организация контекста этого устройства. Таким же показателем, как правило, является *совместимый точечный рисунок* , который обычно имеет более высокую производительность GDI, чем DIB. Например, чтобы создать точечный рисунок для видеопамяти, лучше использовать совместимый точечный рисунок с тем же цветовым форматом, что и основной дисплей. В видеопамяти отображение изображения в точечный рисунок и отображение его на экране выполняется значительно быстрее, чем на поверхности системной памяти или непосредственно из DIB.

Помимо повышения производительности GDI, совместимые точечные рисунки используются для записи изображений (см. раздел [запись образа](capturing-an-image.md) ) и создания точечных рисунков во время выполнения для меню см. в разделе "Создание точечного рисунка" раздела (см. раздел [Использование меню](../menurc/using-menus.md) ).

Чтобы перенести точечный рисунок между устройствами с разными цветовыми организациями, используйте [**жетдибитс**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) для преобразования совместимого точечного рисунка в DIB и вызовите [**сетдибитс**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) или [**стретчдибитс**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) , чтобы отобразить DIB на втором устройстве.

Существует два типа Ддбс: удаленно и не могут быть удалены. Удаленное значение DDB — это точечный рисунок, который система удаляет, если точечный рисунок не выбран в контроллере домена, а также в случае нехватки системной памяти. Функция [**креатедискардаблебитмап**](/windows/desktop/api/Wingdi/nf-wingdi-creatediscardablebitmap) создает отброшенные точечные рисунки. Функции [**креатебитмап**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**креатекомпатиблебитмап**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap)и [**креатебитмапиндирект**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect) создают неудаляемые точечные рисунки.

Приложение может создать DDB из DIB, инициализируя необходимые структуры и вызывая функцию [**креатедибитмап**](/windows/desktop/api/Wingdi/nf-wingdi-createdibitmap) . Указание КБМ \_ init в вызове **креатедибитмап** эквивалентно вызову функции [**креатекомпатиблебитмап**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) для создания DDB в формате устройства и последующего вызова функции [**СЕТДИБИТС**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) для преобразования битов DIB в DDB. Чтобы определить, поддерживает ли устройство функцию **сетдибитс** , вызовите функцию [**жетдевицекапс**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , указав в \_ \_ качестве флага растеркапс битовую карту RC di.

 

 
