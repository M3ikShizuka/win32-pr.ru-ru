---
description: Некоторые функции Font и Text-Output имеют параметр, указывающий длину строки вывода текста. Типичным примером является параметр Кчтекст объекта Дравтекстекс.
ms.assetid: 695fd0f9-abd4-4666-acad-2c409624ddc6
title: Указание длины текстовой строки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2c120026d1b65170b6fe35bc65400280f6f1ffa5
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127567643"
---
# <a name="specifying-length-of-text-output-string"></a>Указание длины текстовой строки

Некоторые функции Font и Text-Output имеют параметр, указывающий длину строки вывода текста. Типичным примером является параметр *кчтекст* объекта [**дравтекстекс**](/windows/desktop/api/Winuser/nf-winuser-drawtextexa).

Каждая из этих функций имеет как версию ANSI, так и версию Юникода (например, [**дравтекстекса**](/windows/desktop/api/Winuser/nf-winuser-drawtextexa) и **дравтекстексв** соответственно). Для версии каждой функции в формате ANSI длина указывается в виде числа БАЙТОВ, а для функции Юникода она указывается в виде числа слов.

Это традиционно обдумать как «число символов». Это, как правило, точная для многих языков, включая английский, но в целом он неточен. В строках "ANSI" [символы в однобайтовых](../intl/single-byte-character-sets.md) кодовых страницах занимают один байтов, но большинство символов в кодовых страницах [DBCS](../intl/double-byte-character-sets.md) принимают два байта. Аналогичным образом, большинство заданных в Юникоде символов находятся на основной многоязыковой плоскости (BMP), а их представления UTF-16 — в одном СЛОВе, но дополнительные символы представлены в Юникоде символами "" суррогатов "", которым требуется два слова.

Каждая из этих функций имеет длину. Для версии каждой функции в формате ANSI длина указывается как длина количества байт строки, не включая признак конца **null** . Для функции Юникода счетчик длины — это число байтов, разделенное на sizeof (WCHAR), равное 2, не включая признак конца **null** . Число символов — это количество символов, которые могут не совпадать с длиной строки. В некоторых случаях символы принимают более одного БАЙТа для ANSI (например, символ [DBCS](../intl/double-byte-character-sets.md) ) и более одного слова для Юникода (например, символы-заместители). Кроме того, число глифов может не равняться числу символов, поскольку несколько символов могут быть совмещены для создания одного глифа. Счетчик длины — это объем данных. Число символов — это количество единиц, обработанных как одна сущность. Символы отрисовывается. Например, в Юникоде можно использовать строку длиной 3, которая состоит из двух символов, что приводит к отображению 1 глифа. Однако, как правило, большая длина строки в Юникоде, число символов и количество визуализированных глифов равны.

\_Для получения длины строки можно использовать ткслен (). Для ANSI функция \_ ткслен () возвращает число байтов. Для Юникода функция \_ ткслен () возвращает число вчарс (т. е. слов).

Специальные символы обработки, такие как знаки табуляции и мягкие дефисы, не всегда рисуются, могут повлиять на рисуемые выходные данные. Они включаются в число строк и количество символов, но могут быть не представлены непосредственно отображаемым глифом.

Некоторые из этих функций позволяют вызывающему объекту указать длину как-1, чтобы указать, что строка завершается нулем; в этом случае функция вычислит число символов автоматически. Не все функции предлагают эту возможность. Это значение задается для каждой функции по функциям; см. документацию по отдельным функциям.

 

 
