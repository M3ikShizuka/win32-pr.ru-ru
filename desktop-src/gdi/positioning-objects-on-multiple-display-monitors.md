---
description: Окно или меню, расположенное на более чем одном мониторе, вызывает визуальное прерывание для средства просмотра. Чтобы избежать этой проблемы, система отображает меню и новые и развернутые окна на одном мониторе. В следующей таблице показано, как выбран монитор.
ms.assetid: 9316c8dd-c9b7-49e2-a987-5949a87b0cfc
title: Размещение объектов на нескольких мониторах монитора
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6eb6581fbed64b6a8ac83e29410e9758c6dea7b2d145958c57fa187abf34985c
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119602734"
---
# <a name="positioning-objects-on-multiple-display-monitors"></a>Размещение объектов на нескольких мониторах монитора

Окно или меню, расположенное на более чем одном мониторе, вызывает визуальное прерывание для средства просмотра. Чтобы избежать этой проблемы, система отображает меню и новые и развернутые окна на одном мониторе. В следующей таблице показано, как выбран монитор.



| Объект         | Расположение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| window         | [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa)(ex) отображает окно на мониторе, который содержит самую большую часть окна. Разворачивает монитор, который содержит самую большую часть окна до его сворачивания.<br/> Сочетание клавиш ALT + TAB отображает окно на мониторе с активным в данный момент окном.<br/>                                                                                                                                          |
| собственное окно   | на том же мониторе, что и его владелец.                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| служат        | Отображается на мониторе, содержащем самую крупную часть соответствующего пункта меню.                                                                                                                                                                                                                                                                                                                                                                                                          |
| контекстное меню   | Отображается на мониторе, где произошло Правое нажатие.                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| раскрывающийся список | Отображается на мониторе, содержащем прямоугольник поля со списком.                                                                                                                                                                                                                                                                                                                                                                                                                           |
| диалоговое окно     | Отображается на мониторе окна, которому он принадлежит. Если он определен с помощью центермаусе в DS \_ , он отображается на мониторе с помощью мыши.<br/> Если у него нет владельца, а активное окно и диалоговое окно находятся в одном приложении, то диалоговое окно отображается на мониторе текущего активного окна.<br/> Если в диалоговом окне нет владельца, а активное окно не находится в том же приложении, что и диалоговое окно, то диалоговое окно отображается на основном мониторе.<br/> |
| окно сообщения    | Отображается на мониторе окна, которому он принадлежит.                                                                                                                                                                                                                                                                                                                                                                                                                                             |



 

Если окно находится на двух мониторах и один из мониторов перемещается, система позиционирует окно на монитор, который содержит самую большую часть исходного окна.

Приложение также, как правило, должно располагать объекты. Например, может потребоваться создать окно на том же мониторе, что и другое окно.

**Размещение объекта в системе с несколькими мониторами**

1.  Определите соответствующий монитор.
2.  Получение координат монитора.
3.  Разместите объект с помощью координат.

Как правило, объект размещается на основном мониторе или на мониторе, на котором уже есть объект. Чтобы указать монитор для заданной точки, прямоугольника или окна, используйте [**мониторфромпоинт**](/windows/desktop/api/Winuser/nf-winuser-monitorfrompoint), [**мониторфромрект**](/windows/desktop/api/Winuser/nf-winuser-monitorfromrect)и [**мониторфромвиндов**](/windows/desktop/api/Winuser/nf-winuser-monitorfromwindow).

Чтобы получить координаты для монитора, используйте [**жетмониторинфо**](/windows/desktop/api/Winuser/nf-winuser-getmonitorinfoa), который предоставляет как рабочую область, так и весь прямоугольник монитора. Обратите внимание, что SM \_ кксскрин и SM \_ цискрин всегда относятся к основному монитору, а не к монитору, на котором отображается приложение. Кроме того, Избегайте использования SM \_ ксксвиртуалскрин, так как в этом случае окно будет центрировано на виртуальном экране, а не на мониторе.

Для центрирования диалоговых окон в рабочей области окна используйте \_ стиль центра DS. Для центрирования диалогового окна в окне приложения используйте [**жетвиндоврект**](/windows/win32/api/winuser/nf-winuser-getwindowrect). Windows автоматически ограничивают меню и диалоговые окна монитором. Однако может существовать проблема для пользовательских меню, настраиваемых раскрывающихся списков, настраиваемых палитр инструментов и положения сохраненного приложения.

Пример правильного расположения объектов см. [в разделе Размещение объектов при настройке нескольких дисплеев](positioning-objects-on-a-multiple-display-setup.md).

С помощью SM \_ кксскрин и SM \_ цискрин, чтобы определить расположение панели инструментов для рабочего стола приложения (также называемой *панель приложений*), ограничит панель приложений до основного монитора. Чтобы разрешить панель приложений на любом крае любого монитора, используйте соответствующие системные метрики для вычисления краев мониторов. Кроме того, используйте макросы **Get \_ X \_ lParam** и **Get \_ Y \_** для извлечения координат, в противном случае знак координат может быть неверным. Эти макросы включены в Виндовскс. h.

Размер полноэкранного окна должен меняться по мере перемещения между мониторами с разными разрешениями. Для этого приложение должно проверить, в каком окне оно находится, использовать [**мониторфромвиндов**](/windows/desktop/api/Winuser/nf-winuser-monitorfromwindow) или [**мониторфромпоинт**](/windows/desktop/api/Winuser/nf-winuser-monitorfrompoint) , а затем использовать [**жетмониторинфо**](/windows/desktop/api/Winuser/nf-winuser-getmonitorinfoa) для получения размера монитора. В качестве альтернативы можно использовать **хмонитор** из функции DirectX **директдравенумератикс** . Затем используйте [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos) для позиционирования и изменения размера окна, чтобы охватить монитор.

Развернутое окно не охватывает панель задач с свойством "Always On Top". однако полноэкранное окно охватывает панель задач (например, в Microsoft PowerPoint демонстрации и игры).

Чтобы сохранить и впоследствии восстановить расположение окна при выходе из приложения, используйте функции [**жетвиндовплацемент**](/windows/win32/api/winuser/nf-winuser-getwindowplacement) и [**сетвиндовплацемент**](/windows/win32/api/winuser/nf-winuser-setwindowplacement) . Однако убедитесь, что она все еще действительна, прежде чем использовать ее, так как монитор мог быть перемещен или удален из системы. Приложение отображает окно на основном мониторе, если **хмонитор** окна является недопустимым.

Система пытается запустить приложение на мониторе, который содержит ярлык. Таким образом, одним из способов размещения приложения является его ярлык на нужном мониторе.

Если вы используете [**ShellExecute**](/windows/win32/api/shellapi/nf-shellapi-shellexecutea) или [**ShellExecuteEx**](/windows/win32/api/shellapi/nf-shellapi-shellexecuteexa) , предоставьте *HWND* , чтобы система открывала все новые окна на том же мониторе, что и вызывающее приложение.

Обратите внимание, что значения для структуры [**минмаксинфо**](/windows/win32/api/winuser/ns-winuser-minmaxinfo) немного изменены для системы с несколькими мониторами.

 

 
