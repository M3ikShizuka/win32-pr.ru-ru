---
description: Режимы сопоставления описаны в следующей таблице.
ms.assetid: 02bc45d1-2921-48bc-a066-2314765b6531
title: Режимы сопоставления и переводы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 219bfe2f587ef9bc66f53d6f08404a0448180512
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263671"
---
# <a name="mapping-modes-and-translations"></a>Режимы сопоставления и переводы

Режимы сопоставления описаны в следующей таблице.



| Режим сопоставления    | Описание                                                                                                                                                                                                                                                                                                                |
|-----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ММ \_ анизотропная | Каждая единица в пространстве страницы сопоставляется с заданной приложением единицей в пространстве устройства. Ось может быть равномерно масштабирована (например, круг, рисуемый в мировом пространстве, может выглядеть эллипсом при отображении на конкретном устройстве). Ориентация оси также определяется приложением.                  |
| \_ХИЕНГЛИШ мм   | Каждая единица в пространстве страницы сопоставляется с 0,001 дюйма в пространстве устройства. Значение x увеличивается слева направо. Значение y увеличивается от нижнего к верхнему.                                                                                                                                                                 |
| \_HIMETRIC мм    | Каждая единица в пространстве страницы сопоставляется с 0,01 миллиметра в пространстве устройства. Значение x увеличивается слева направо. Значение y увеличивается от нижнего к верхнему.                                                                                                                                                            |
| \_ИСОТРОПИК мм   | Каждая единица в пространстве страницы сопоставляется с определяемой приложением единицей в пространстве устройства. Оси всегда равномерно масштабируются. Ориентация осей может быть задана приложением.                                                                                                                                     |
| \_ЛОЕНГЛИШ мм   | Каждая единица в пространстве страницы сопоставляется с 0,01 дюйма в пространстве устройства. Значение x увеличивается слева направо. Значение y увеличивается от нижнего к верхнему.                                                                                                                                                                  |
| \_ЛОМЕТРИК мм    | Каждая единица в пространстве страницы сопоставляется с 0,1 миллиметра в пространстве устройства. Значение x увеличивается слева направо. Значение y увеличивается от нижнего к верхнему.                                                                                                                                                             |
| ММ, \_ текст        | Каждая единица в пространстве страницы сопоставляется с одним пикселем; то есть масштабирование не выполняется. Если перевод не действует (по умолчанию), пространство страницы в \_ режиме сопоставления текста mm эквивалентно физическому пространству устройства. Значение x увеличивается слева направо. Значение y увеличивается сверху вниз. |
| ММ \_ твипов       | Каждая единица в пространстве страницы сопоставлена одной двадцати точки принтера (1/1440 дюйма). Значение x увеличивается слева направо. Значение y увеличивается от нижнего к верхнему.                                                                                                                                           |



 

Чтобы задать режим сопоставления, вызовите функцию [**сетмапмоде**](/windows/desktop/api/Wingdi/nf-wingdi-setmapmode) . Получите текущий режим сопоставления контроллера домена, вызвав функцию [**жетмапмоде**](/windows/desktop/api/Wingdi/nf-wingdi-getmapmode) .

Преобразование «страница-место» для преобразования «место на устройстве» состоит из значений, вычисленных на основе точек, заданных в окне и области просмотра. В этом контексте окно относится к логической системе координат пространства страницы, а область просмотра — к системе координат устройства. Окно и область просмотра состоят из источника, горизонтального («х») экстента и вертикального («y»)). Параметры окна расположены в логических координатах. окно просмотра в координатах устройства (в пикселях). Система объединяет исходные значения и экстенты из окна и окна просмотра для создания преобразования. Это означает, что каждое окно и область просмотра задают половину факторов, необходимых для определения преобразования, используемого для распределения точек на странице в пространстве на устройстве. Таким образом, система сопоставляет исходное окно с исходным окном просмотра и экстентами окна с экстентами области просмотра, как показано на следующем рисунке.

![Иллюстрация, демонстрирующая происхождение окна в пространстве страницы и точку зрения в пространстве устройства](images/cstrn-15.png)

Область окна и окно просмотра устанавливают отношение или коэффициент масштабирования, используемый в пространстве между страницами и преобразованиями пространства на устройстве. Для шести стандартных режимов сопоставления (MM \_ хиенглиш, mm \_ ЛОЕНГЛИШ, mm \_ HIMETRIC, MM \_ лометрик, mm \_ Text и мм \_ твипов) экстенты задаются системой при вызове [**сетмапмоде**](/windows/desktop/api/Wingdi/nf-wingdi-setmapmode) . Их нельзя изменить. В двух других режимах сопоставления (в параметре MM \_ исотропик и в \_ анизотропии) необходимо указать экстенты. Это делается путем вызова **сетмапмоде** для установки соответствующего режима и последующего вызова функций [**сетвиндовекстекс**](/windows/desktop/api/Wingdi/nf-wingdi-setwindowextex) и [**сетвиевпортекстекс**](/windows/desktop/api/Wingdi/nf-wingdi-setviewportextex) для указания экстентов. В \_ режиме СОПОСТАВЛЕНИЯ mm исотропик важно вызвать метод **сетвиндовекстекс** перед вызовом **сетвиевпортекстекс**.

Исходные окна и окно просмотра устанавливают преобразование, используемое в пространстве между страницами, в преобразования пространства на устройстве. Задайте начальные значения окон и окна просмотра с помощью функций [**сетвиндоворжекс**](/windows/desktop/api/Wingdi/nf-wingdi-setwindoworgex) и [**сетвиевпорторжекс**](/windows/desktop/api/Wingdi/nf-wingdi-setviewportorgex) . Источники не зависят от экстентов, и приложение может задать их независимо от текущего режима сопоставления. Изменение режима сопоставления не влияет на текущие исходные значения (хотя это может повлиять на экстенты). Источники указываются в абсолютных единицах, которые не влияют на текущий режим сопоставления. Чтобы изменить источники, используйте функции [**оффсетвиндоворжекс**](/windows/desktop/api/Wingdi/nf-wingdi-offsetwindoworgex) и [**оффсетвиевпорторжекс**](/windows/desktop/api/Wingdi/nf-wingdi-offsetviewportorgex) .

В следующей формуле показана формула, связанная с преобразованием точки из места на странице в пространство устройства.

``` syntax
Dx = ((Lx - WOx) * VEx / WEx) + VOx 
```

Используются следующие переменные.

``` syntax
Dx     x value in device units 
Lx     x value in logical units (also known as page space units) 
WOx     window x origin 
VOx     viewport x origin 
WEx     window x-extent 
VEx     viewport x-extent 
```

То же уравнение с y-заменой x преобразует точку y компонентоф.

Формула сначала Смещает точку от ее начала координат. Это значение, которое больше не смещено от источника, затем масштабируется в целевую систему координат по отношению к экстентам. Наконец, масштабированное значение смещается на исходную точку назначения до окончательного сопоставления.

Функции [**лптодп**](/windows/desktop/api/Wingdi/nf-wingdi-lptodp) и [**дптолп**](/windows/desktop/api/Wingdi/nf-wingdi-dptolp) можно использовать для преобразования логических точек в точки устройств и из точек устройств в логические точки соответственно.

 

 



