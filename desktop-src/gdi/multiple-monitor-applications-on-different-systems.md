---
description: Чтобы несколько приложений монитораваре работали как в системах с поддержкой нескольких мониторов, так и без нее, свяжите приложение с Мултимон. h.
ms.assetid: 8667305e-ca76-49cb-878e-07814431e6db
title: Несколько мониторных приложений в разных системах
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ec5d470861136ac9362d986b8647c86abee7021b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104984924"
---
# <a name="multiple-monitor-applications-on-different-systems"></a>Несколько мониторных приложений в разных системах

Чтобы несколько приложений монитораваре работали как в системах с поддержкой нескольких мониторов, так и без нее, свяжите приложение с Мултимон. h. Также необходимо определить \_ \_ заглушки компиляции мултимон в точно одном файле C. Если система не поддерживает несколько мониторов, она возвращает значения по умолчанию из [**жетсистемметрикс**](/windows/win32/api/winuser/nf-winuser-getsystemmetrics) , а функции нескольких мониторов работают так, как если бы одно отображение. В системах с несколькими мониторами приложение будет работать нормально.

Так как отрицательные координаты могут легко происходить в системе с различными мониторами, необходимо получить координаты, Упакованные в lParam, с помощью макросов **Get \_ X \_ lParam** и **Get \_ Y \_ lParam** .

Не используйте отрицательные координаты или координаты, превышающие SM \_ кксскрин и SM \_ цискрин, чтобы скрыть окно. Окна, которые используют эти ограничения для скрытия, могут отображаться на другом мониторе. Точно так же не используйте эти ограничения для отображения окна, так как это может привести к привязке окна к основному монитору. Для этих проблем лучше проанализировать существующие приложения. Однако можно избежать проблем в существующих приложениях, запустив приложение на основном мониторе или сохранив основной монитор в левом верхнем углу виртуального экрана.

Обратите внимание, что SM \_ кксмакстракк и SM \_ цимакстракк определены для настольных систем, а не только для одного монитора. Может потребоваться переопределение Windows, использующих эти ограничения.

Родительское или связанное окно может находиться не на том же мониторе, что и дочернее окно. Чтобы перейти к монитору окна, приложения должны использовать функцию [**мониторфромвиндов**](/windows/desktop/api/Winuser/nf-winuser-monitorfromwindow) .

Чтобы экранная заставка отображалась на всех мониторах, свяжите ее с последней версией Скрнсаве. lib. В противном случае экранная заставка может отображаться только на основном мониторе, а другие мониторы остаются нетронутыми. Экранные заставки, связанные с последней версией Скрнсаве. lib, будут работать как в одной системе, так и на нескольких мониторах. Для использования различных экранных заставок на каждом мониторе используйте функции нескольких мониторов, чтобы отдельно управлять каждым монитором.

Устройства ввода, которые доставляют координаты в систему в абсолютных координатах, таких как планшеты, имеют ограниченный ввод курсора на основной монитор. Чтобы переключить входной планшет между мониторами, ознакомьтесь с инструкциями от изготовителя оборудования.

Чтобы связать входные данные мыши, отправленные в абсолютных координатах, ко всему виртуальному экрану, используйте [**входную**](/windows/win32/api/winuser/ns-winuser-input) структуру с маусивентф \_ Absolute и маусивентф \_ виртуалдесктоп.

Функция [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) хорошо работает для нескольких систем мониторинга. Однако функции [**маскблт**](/windows/desktop/api/Wingdi/nf-wingdi-maskblt), [**плгблт**](/windows/desktop/api/Wingdi/nf-wingdi-plgblt), [**стретчблт**](/windows/desktop/api/Wingdi/nf-wingdi-stretchblt)и [**транспарентблт**](/windows/desktop/api/WinGdi/nf-wingdi-transparentblt) завершатся ошибкой, если контексты исходного и конечного устройств отличаются.

 

 
