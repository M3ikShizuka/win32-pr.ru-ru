---
description: Приложение может получать метрики шрифта для физического шрифта только после выбора шрифта в контексте устройства.
ms.assetid: 3eaabc8b-e244-4b65-918b-a20043afa535
title: Устройства и единицы проектирования
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9fb52a671727a2fa84d5514b469be5bd320f3318
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103898429"
---
# <a name="device-vs-design-units"></a>Устройства и единицы проектирования

Приложение может получать метрики шрифта для физического шрифта только после выбора шрифта в контексте устройства. При выборе шрифта в контексте устройства он масштабируется для устройства. Метрики шрифта, характерные для устройства, называются единицами устройства.

Переносимые метрики в шрифтах называются единицами проектирования. Для применения к указанному устройству единицы проектирования необходимо преобразовать в единицы устройства. Используйте следующую формулу для преобразования единиц проектирования в единицы устройства.

*Девицеунитс* = (*десигнунитс* / *унитсперем*) \* (*PointSize*/72) \* *девицересолутион*

Переменные в этой формуле имеют следующие значения.



| Переменная           | Описание                                                                                                                                                                |
|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| *девицеунитс*      | Указывает метрику шрифта *десигнунитс* , преобразованную в единицы устройства. Это значение указывается в тех же единицах, что и значение, указанное для *девицересолутион*.                          |
| *десигнунитс*      | Указывает метрику шрифта для преобразования в единицы устройства. Это значение может быть любой метрикой шрифта, включая ширину символа или значение Ascend для всего шрифта. |
| *унитсперем*       | Задает размер квадрата EM для шрифта.                                                                                                                                 |
| *PointSize*        | Задает размер шрифта в пунктах. (Одна точка равна 1/72 дюйма.)                                                                                                 |
| *девицересолутион* | Указывает число единиц устройства (в пикселях) на дюйм. Типичные значения могут быть 300 для лазерного принтера или 96 для экрана VGA.                                                |



 

Эта формула не должна использоваться для преобразования единиц устройства обратно в единицы проектирования. Единицы устройства всегда округляются до ближайшего пикселя. Распространенная ошибка округления может стать очень большой, особенно если приложение работает с размерами экрана.

Чтобы запросить единицы проектирования, создайте логический шрифт, высота которого указана как *унитсперем*. Приложения могут извлекать значение для *унитсперем* путем вызова функции [**EnumFontFamilies**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontfamiliesa) и проверки элемента **нтмсизим** структуры [**невтекстметрик**](/windows/win32/api/wingdi/ns-wingdi-newtextmetrica) .

 

 



