---
description: Расширенный метафайл — это массив записей.
ms.assetid: af3261c7-2113-4777-97c0-504f23022550
title: Расширенные записи метафайлов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 506ca77dda1bd90fc04b692dbbd98bc06f4da44c5fc6f8edb0fd17cbd3e94c96
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119038022"
---
# <a name="enhanced-metafile-records"></a>Расширенные записи метафайлов

Расширенный метафайл — это массив записей. Запись метафайла — это [**енхметарекорд**](/windows/win32/api/wingdi/ns-wingdi-enhmetarecord) структура переменной длины. В начале каждой записи расширенного метафайла используется структура [**EMR**](/windows/win32/api/wingdi/ns-wingdi-emr) , которая содержит два члена. Первый элемент, Итипе, определяет тип записи, то есть функцию GDI, параметры которой содержатся в записи. Так как структуры имеют переменную length, другой элемент, Нсизе, содержит размер записи. Сразу после элемента Нсизе остаются оставшиеся параметры функции GDI (если таковые имеются). Оставшаяся часть структуры содержит дополнительные данные, зависящие от типа записи.

Первая запись в расширенном метафайле всегда является структурой [**енхметахеадер**](/windows/win32/api/wingdi/ns-wingdi-enhmetaheader) , которая является заголовком расширенного метафайла. В заголовке указываются следующие сведения:

-   Размер метафайла (в байтах)
-   Размеры рамки изображения в единицах устройства
-   Размеры рамки изображения в единицах с 01 миллиметрами
-   Число записей в метафайле
-   Смещение к необязательному текстовому описанию
-   Размер дополнительной палитры
-   Разрешение исходного устройства в пикселях
-   Разрешение исходного устройства в миллиметрах

Необязательное текстовое описание может следовать за записью заголовка. Текстовое описание описывает изображение и имя автора. Необязательная палитра определяет цвета, используемые для создания расширенного метафайла. Оставшиеся записи обозначают функции GDI, используемые для создания изображения. Следующие шестнадцатеричные выходные данные соответствуют записи, формируемой для вызова функции [**сетмапмоде**](/windows/desktop/api/Wingdi/nf-wingdi-setmapmode) .


```C++
00000011 0000000C 00000004 
```



Значение 0x00000011 указывает тип записи (соответствует \_ константе СЕТМАПМОДЕ EMR, определенной в файле вингди. h). Значение 0x0000000C указывает длину записи в байтах. Значение 0x00000004 определяет режим сопоставления (соответствует \_ константе mm лоенглиш, определенной в функции [**сетмапмоде**](/windows/desktop/api/Wingdi/nf-wingdi-setmapmode) ).

Список дополнительных типов записей см. в разделе [структуры метафайлов](metafile-structures.md).

 

 



