---
description: Система отправляет \_ сообщение WM нкпаинт в окно всякий раз, когда часть неклиентской области окна, например строка заголовка, строка меню или рамка окна, должна быть обновлена.
ms.assetid: e4dc61f3-6a9f-4ed4-8685-62eb4ceb85f1
title: Неклиентская область
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c51da31709f5bd9326cc0d05a9e37e2df78bfbb4
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127469382"
---
# <a name="nonclient-area"></a>Неклиентская область

Система отправляет сообщение [**WM \_ нкпаинт**](wm-ncpaint.md) в окно всякий раз, когда часть неклиентской области окна, например строка заголовка, строка меню или рамка окна, должна быть обновлена. Система также может отсылать другие сообщения, чтобы направлять окно для обновления части его клиентской области. Например, когда окно станет активным или неактивным, оно отправляет сообщение [**WM \_ нкактивате**](../winmsg/wm-ncactivate.md) , чтобы обновить заголовок окна. Как правило, обработка этих сообщений для стандартных окон не рекомендуется, так как приложение должно иметь возможность рисовать все необходимые части неклиентской области для окна. По этой причине большинство приложений передают эти сообщения [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) для обработки по умолчанию.

Приложение, которое создает пользовательские области, не являющиеся клиентскими, должно обрабатывать эти сообщения. При этом приложение должно использовать контекст устройства окна для выполнения рисования в окне. *Контекст устройства Window* позволяет приложению рисовать во всех частях окна, включая неклиентскую область. Приложение получает контекст устройства окна с помощью функции [**жетвиндовдк**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc) или [**жетдцекс**](/windows/desktop/api/Winuser/nf-winuser-getdcex) и, когда рисование завершено, должно освободить контекст окна устройства с помощью функции [**релеаседк**](/windows/desktop/api/Winuser/nf-winuser-releasedc) .

Система поддерживает регион обновления для неклиентской области. Когда приложение получает сообщение [**WM \_ нкпаинт**](wm-ncpaint.md) , параметр *wParam* содержит маркер для региона, определяющего размеры области обновления. Приложение может использовать этот маркер для объединения области обновления с областью отсечения для контекста устройства окна. Система не будет автоматически объединять область обновления при получении контекста устройства окна, если приложение не использует [**жетдцекс**](/windows/desktop/api/Winuser/nf-winuser-getdcex) и не задает как маркер региона, так и флаг дккс \_ интерсектргн. Если приложение не объединяет область обновления, то обрезаются только операции рисования, которые в противном случае выходят за пределы окна. Приложение не несет ответственности за очистку региона обновления, независимо от того, использует ли он регион.

Если приложение обрабатывает сообщение [**WM \_ нкактивате**](../winmsg/wm-ncactivate.md) , после его обработки должно возвращаться **значение true** , чтобы система занаправляла изменение активного окна. Если окно свернется, когда приложение получает сообщение **WM \_ нкактивате** , оно должно передавать сообщение в [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca). В таких случаях функция по умолчанию перерисовывает метку для значка.

 

 
