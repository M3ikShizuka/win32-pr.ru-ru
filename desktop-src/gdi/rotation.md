---
description: Многие приложения САПР предоставляют функции, поворачивающие объекты, отображаемые в клиентской области.
ms.assetid: 85d8fe2c-5ad9-4e98-b6ff-ca0a78abeee5
title: Поворот
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 17be42f2826cbad09333b2c37b607dc50c7c9d0c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104986000"
---
# <a name="rotation"></a>Поворот

Многие приложения САПР предоставляют функции, поворачивающие объекты, отображаемые в клиентской области. Приложения, которые включают возможности вращения, используют функцию [**сетворлдтрансформ**](/windows/desktop/api/Wingdi/nf-wingdi-setworldtransform) , чтобы установить соответствующее преобразование пространства на страницу. Эта функция получает указатель на структуру [**XForm**](/windows/win32/api/wingdi/ns-wingdi-xform) , содержащую соответствующие значения. Члены eM11, eM12, eM21 и eM22 для XFORM указывают соответственно, косинус, синус, отрицательный синус и косинус угла поворота.

Когда происходит *вращение* , точки, составляющие объект, поворачиваются по отношению к источнику пространства координат. На следующем рисунке показан прямоугольник с 20 на 20 единиц, повернутый на 30 градусов при копировании из универсального пространства в пространство координат страницы.

![Иллюстрация, демонстрирующая два пространства координат; у каждого есть прямоугольник в другом расположении и с другим поворотом.](images/cstrn-11.png)

На предыдущем рисунке каждая точка в прямоугольнике была повернута на 30 градусов по отношению к источнику пространства координат.

Следующий алгоритм выполняет вычисление новой координаты x (x) для точки (x, y), которая поворачивается углом A относительно начала координат пространства.

``` syntax
x' = (x * cos A) - (y * sin A) 
```

Следующий алгоритм выполняет вычисление координаты y (y) для точки (x, y), которая поворачивается углом A относительно начала координат.

``` syntax
y' = (x * sin A) + (y * cos A) 
```

Два преобразования вращения можно объединить в матрицу 2-2, как показано ниже.

``` syntax
|x' y'| == |x y| * | cos A   sin A| 
                   |-sin A   cos A| 
```

Матрица размером 2 на 2, которая вызвала вращение, содержит следующие значения.

``` syntax
| .8660    .5000| 
|-.5000    .8660| 
```

## <a name="rotation-algorithm-derivation"></a>Наследование алгоритма вращения

Алгоритмы вращения основаны на сложения тригонометрических функций, теорема о том, что тригонометрическая сумма двух углов (a1 и a2) может быть выражена в виде тригонометрических функции двух углов.

``` syntax
sin(A1 + A2) = (sin A1 * cos A2) + (cos A1 * sin A2) 
cos(A1 + A2) = (cos A1 * cos A2) - (sin A1 * sin A2) 
```

На следующем рисунке показана точка p, повернутая против часовой стрелки, в новую позицию p. Кроме того, в нем показаны два треугольника, образованные линией, нарисованной от источника пространства координат до каждой точки, и линия, нарисованная из каждой точки через ось x.

![Схема, показывающая происхождение, p и p, и два треугольника](images/cstrn-12.png)

С помощью тригонометрии Координата x точки p можно получить, умножив длину гипотенузы h на косинус a1.

``` syntax
x = h * cos A1 
```

Координату y точки p можно получить, умножив длину гипотенузы h на синус a1.

``` syntax
y = h * sin A1 
```

Аналогичным образом можно получить координату x точки p ", умножив длину гипотенузы h на косинус (a1 + a2).

``` syntax
x' = h * cos (A1 + A2) 
```

Наконец, координату y точки p "можно получить, умножив длину гипотенузы h на синус (a1 + a2).

``` syntax
y' = h * sin (A1 + A2) 
```

Используя сложение теорема, предыдущие алгоритмы становятся следующими:

``` syntax
x' = (h * cos A1 * cos A2) - (h * sin A1 * sin A2) 
y' = (h * cos A1 * sin A2) + (h * sin A1 * cos A2) 
```

Алгоритмы вращения для заданной точки, повернутые по углу a2, можно получить, заменив x для каждого вхождения (h \* COS a1) и заменив y для каждого вхождения (h \* Sin a1).

``` syntax
x' = (x * cos A2) - (y * sin A2) 
y' = (x * sin A2) + (y * cos A2) 
```

 

 



