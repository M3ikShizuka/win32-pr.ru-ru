---
description: Типы заголовков битовых карт
ms.assetid: 6df4655a-f707-4893-b6e6-f7e4d7f67b4e
title: Типы заголовков битовых карт
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5910b0fb5be1166e807db1f3362186a206abc2b7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103898457"
---
# <a name="bitmap-header-types"></a>Типы заголовков битовых карт

Точечный рисунок имеет четыре основных типа заголовков:

-   [**битмапкорехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader)
-   [**битмапинфохеадер**](/previous-versions//dd183376(v=vs.85))
-   [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)
-   [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header)

Четыре типа заголовков точечных рисунков отличаются элементом **size** , который является первым **DWORD** в каждой из структур.

Структура [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) является расширенной структурой [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header) , которая является расширенной структурой [**битмапинфохеадер**](/previous-versions//dd183376(v=vs.85)) . Однако **битмапинфохеадер** и [**битмапкорехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) имеют только элемент **size** , общий с другими структурами заголовков битовой карты.

Форматы [**битмапкорехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) и [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header) были заменены форматами [**битмапинфохеадер**](/previous-versions//dd183376(v=vs.85)) и [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) соответственно. Форматы **битмапкорехеадер** и **BITMAPV4HEADER** представлены для полноты и обратной совместимости.

Формат DIB приведен ниже (Дополнительные сведения см. в разделе [точечный рисунок](bitmap-storage.md) ).

-   Структура [**битмапфилехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader)
-   Структура [**битмапкорехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader), [**битмапинфохеадер**](/previous-versions//dd183376(v=vs.85)), [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)или [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) .
-   Необязательная таблица цветов, представляющая собой набор структур [**ргбкуад**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) или набор структур [**ргбтрипле**](/windows/win32/api/wingdi/ns-wingdi-rgbtriple) .
-   данные точечного рисунка
-   необязательные данные профиля

Таблица цветов описывает, как значения пикселей соответствуют значениям цвета RGB. RGB — это модель для описания цветов, создаваемых источником освещения.

*Данные профиля* — это либо имя файла профиля (связанный профиль), либо фактические биты профиля (встроенный профиль). Формат файла помещает данные профиля в конец файла. Данные профиля помещаются сразу после таблицы цветов (если она есть). Однако если функция получает упакованный DIB, данные профиля поступают после битов растрового изображения, как в формате файла.

Данные профиля будут существовать только для структур [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) , в которых **bV5CSType** \_ связан профиль или \_ внедренный профиль. Для функций, получающих Упакованные рисунки DIB, данные профиля поступают после растровых данных.

Устройство палеттизед — это любое устройство, которое использует палитры для назначения цветов. Классический пример устройства палеттизед — это дисплей с 8-разрядной глубиной цвета (256 цветов). Для назначения цветов точечному рисунку в этом режиме используется небольшая таблица цветов. Цвета в точечном рисунке присваиваются ближайшему цвету в палитре, используемой устройством. Устройство палеттизед не создает оптимальную палитру для отображения растрового изображения. Он просто использует все, что находится в текущей палитре. Приложения несут ответственность за создание палитры и ее выбор в системе. В общем, 16-, 24-и 32-разрядные точечные рисунки не содержат таблицы цветов (то есть оптимальные палитры для точечного рисунка); в этом случае приложение отвечает за создание оптимальной палитры. Однако точечные рисунки 16-, 24-и 32-бит могут содержать такие оптимальные таблицы цветов для отображения на устройствах палеттизед. в этом случае приложению нужно просто создать палитру на основе таблицы цветов, представленной в файле точечного рисунка.

Точечные рисунки, имеющие размер 1, 4 или 8 бит/с, должны иметь таблицу цветов с максимальным размером в зависимости от разряда. Максимальный размер точечных рисунков (1, 4 и 8 бит/с) составляет от 2 до степени числа бит. Таким словами, точечный рисунок размером 1 бит имеет не более двух цветов, а точечный рисунок размером 4 бит имеет максимум 16 цветов, а битовое изображение размером 8 бит — 256.

Точечные рисунки 16-, 24-или 32-бит не нуждаются в таблицах цветов, но они могут указывать цвета для устройств палеттизед. Если на 16-, 24-или 32-битовом точечном рисунке имеется таблица цветов, то элемент **биклрусед** указывает размер таблицы цветов, а таблица цветов должна иметь в ней много цветов. Если **биклрусед** равен нулю, таблица цветов отсутствует.

Красные, зеленые и синие битовые маски для \_ битовых рисунков бизнес-аналитики сразу следуют за структурами [**битмапинфохеадер**](/previous-versions//dd183376(v=vs.85)), [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)и [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) . Структуры **BITMAPV4HEADER** и **BITMAPV5HEADER** содержат дополнительные элементы для красной, зеленой и синей масок, как показано ниже.



| Член        | Значение                                                                                                                        |
|---------------|--------------------------------------------------------------------------------------------------------------------------------|
| **редмаск**   | Цветовая маска, указывающая красный компонент каждого пикселя, допустимая, только если для элемента **сжатия** задано значение BI \_ битовых полей.   |
| **гринмаск** | Цветовая маска, указывающая зеленый компонент каждого пикселя, допустимая, только если для элемента **сжатия** задано значение BI \_ битовых полей. |
| **блуемаск**  | Цветовая маска, указывающая синий компонент каждого пикселя, допустимая, только если для элемента **сжатия** задано значение BI \_ битовых полей.  |



 

Если **бикомпрессион** член [**БИТМАПИНФОХЕАДЕР**](/previous-versions//dd183376(v=vs.85)) имеет значение BI \_ битовых полей и функция получает аргумент типа **лпбитмапинфо**, то цветовая маска будет сразу следовать за заголовком. Таблица цветов, если она есть, будет соответствовать цветовой маске. Точечные рисунки [**битмапкорехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) не поддерживают цветовые маски.

По умолчанию данные битовой карты в своем формате находятся снизу вверх. Снизу вверх означает, что первая строка сканирования в данных точечного рисунка является последней отображаемой строкой. Например, 0-<sup>й</sup> пиксель строки 0-<sup>го</sup> сканирования с точечным рисунком размером 10 пикселей на 10 пикселей будет иметь 0-<sup>й</sup> пиксель строки<sup>с 9 битами</sup> отображаемого или печатного изображения. Растровые изображения в формате с кодировкой длины (RLE) и точечные рисунки [**битмапкорехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) не могут быть битовыми рисунками сверху вниз. Строки просмотра выводятся в виде **DWORD** , за исключением точечных рисунков, сжатых с помощью RLE. Они должны быть дополнены для ширины строки сканирования в байтах, которые не делятся на четыре, за исключением сжатых битов RLE. Например, точечный рисунок размером 10 х 10 пикселей будет содержать два байта для заполнения в конце каждой строки развертки.

 

 
