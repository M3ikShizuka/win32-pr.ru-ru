---
description: '**WM_SETREDRAW** сообщение отправляется в окно, чтобы разрешить перерисовку изменений в этом окне или предотвратить перерисовку изменений в этом окне.'
ms.assetid: 0085a55e-7bf6-4eb6-a649-832b685db1cc
title: Сообщение WM_SETREDRAW (Winuser. h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 1232833fc4465e2341541a0036af47fdd3b53393
ms.sourcegitcommit: e5d6fb49928cc8cea4ec77dce03b740d40076348
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/10/2021
ms.locfileid: "113593460"
---
# <a name="wm_setredraw-message"></a>Сообщение WM_SETREDRAW

Вы отправляете сообщение **WM \_ сетредрав** в окно, чтобы разрешить перерисовку изменений в этом окне или предотвратить перерисовку изменений в этом окне.

Чтобы отправить это сообщение, вызовите функцию [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) со следующими параметрами.

```C++
SendMessage(
  (HWND) hWnd,
  WM_SETREDRAW,
  (WPARAM) wParam,
  (LPARAM) lParam
);
```

## <a name="parameters"></a>Параметры

`wParam`

Состояние перерисовки. Если этот параметр имеет **значение true**, то после изменения содержимое можно перерисовать. Если этот параметр имеет **значение false**, то после изменения содержимое не может быть перерисовано.

`lParam`

Этот параметр не используется.

## <a name="return-value"></a>Возвращаемое значение

Приложение должно вернуть значение 0, если оно обрабатывает это сообщение.

## <a name="remarks"></a>Комментарии

Это сообщение может быть полезно, если приложение должно добавить несколько элементов в список. Приложение может вызвать это сообщение с параметром *wParam* , имеющим значение **false**, добавить элементы, а затем снова вызвать сообщение, указав для параметра *wParam* значение **true**. Наконец, приложение может вызвать [**редраввиндов**](/windows/win32/api/Winuser/nf-winuser-redrawwindow)(*HWND*, **null**, **null**, РДВ \_ Erase \| РДВ \_ Frame \| РДВ \_ делает недействительным \| РДВ \_ аллчилдрен), чтобы перерисовать список.

> [!NOTE] 
> Следует использовать [**редраввиндов**](/windows/win32/api/Winuser/nf-winuser-redrawwindow) с заданными флагами вместо [**инвалидатерект**](/windows/win32/api/Winuser/nf-winuser-invalidaterect), поскольку первый из них необходим для некоторых элементов управления, у которых есть неклиентская область, или иметь стили окна, которые приводят к тому, что они получают неклиентскую область (например, **WS_THICKFRAME**, **WS_BORDER** или **WS_EX_CLIENTEDGE**). Если у элемента управления нет области, неклиентской, то **редраввиндов** с этими флагами будет выполнять только столько же, сколько и **инвалидатерект** .

Передача **WM_SETREDRAW** сообщения в функцию **дефвиндовпрок** удаляет стиль **WS_VISIBLE** из окна, если параметр *wParam* имеет значение **false**. Хотя содержимое окна остается видимым на экране, функция [**исвиндоввисибле**](/windows/win32/api/winuser/nf-winuser-iswindowvisible) возвращает **значение false** при вызове в окне в этом состоянии. 

Передача **WM_SETREDRAW** сообщения в функцию **дефвиндовпрок** добавляет к окну стиль **WS_VISIBLE** , если он не задан, если для параметра *wParam* задано значение **true**. Если приложение отправляет **WM_SETREDRAW** сообщение с параметром *wParam* , установленным в **значение true** , в скрытом окне, окно станет видимым. 

**Windows 10 и более поздних версий; Windows Server 2016 и более поздних версий**. Система устанавливает свойство с именем *сиссетредрав* в окне, в ходе которого оконная процедура передает **WM_SETREDRAW** сообщения **дефвиндовпрок**. Чтобы получить значение свойства, если оно доступно, можно использовать функцию " [**предл**](/windows/win32/api/Winuser/nf-winuser-getpropa) ". Функция **prop** возвращает ненулевое значение, если перерисовка отключена. Свойство **prop** возвращает нуль, если перерисовка включена, или если не существует свойства окна. 

## <a name="requirements"></a>Требования

| Требование | Значение |
|-|-|
| Минимальная версия клиента | Windows 2000 Professional \[только классические приложения\] |
| Минимальная версия сервера | Windows 2000 Server \[только классические приложения\] |
| Заголовок | <dl><dt>Winuser. h (включает Windows. h)</dt></dl> |

## <a name="see-also"></a>См. также

* [Общие сведения о рисовании и рисовании](painting-and-drawing.md)
* [Рисование и рисование сообщений](painting-and-drawing-messages.md)
* [редраввиндов](/windows/win32/api/Winuser/nf-winuser-redrawwindow)
