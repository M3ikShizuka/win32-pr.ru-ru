---
title: Определение и заполнение куч дескрипторов
description: Типы кучи дескрипторов, которые могут быть заданы в списке команд, — это те, которые содержат дескрипторы, для которых можно использовать таблицы (не более одного одновременно).
ms.assetid: F0FF3D7C-1DAC-48C3-B47D-0378BE369F37
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b3e2fcb7143b097709cb7a3c98669a7d20331bfa9553f4eac5f2cf45a1a90797
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120119454"
---
# <a name="setting-and-populating-descriptor-heaps"></a>Определение и заполнение куч дескрипторов

Типы кучи дескрипторов, которые могут быть заданы в списке команд, — это те, которые содержат дескрипторы, для которых можно использовать таблицы (не более одного одновременно).

-   [Задание куч дескриптора](#setting-and-populating-descriptor-heaps)
-   [Заполнение куч дескрипторов](#populating-descriptor-heaps)
-   [Связанные темы](#related-topics)

## <a name="setting-descriptor-heaps"></a>Задание куч дескриптора

В списке команд можно задать следующие типы кучи дескрипторов:

``` syntax
D3D12_DESCRIPTOR_HEAP_TYPE_CBV_SRV_UAV
D3D12_DESCRIPTOR_HEAP_TYPE_SAMPLER
```

Кучи, заданные в списке команд, также должны быть созданы как шейдеры видимыми. Существует три типа списка команд: DIRECT, пакет и ВЫЧИСЛЕНие.

После того как куча дескрипторов задана в списке команд, последующие вызовы, определяющие таблицы дескрипторов, ссылаются на текущую кучу дескрипторов. Состояние таблицы дескриптора не определено в начале списка команд, и после изменения куч дескриптора в списке команд. Избыточная установка одной и той же кучи дескрипторов не приводит к тому, что параметры таблицы дескрипторов не будут определены.

В пакете, напротив, кучу дескрипторов можно задать только один раз (избыточные вызовы, устанавливающие одну и ту же кучу дважды, не создают ошибку); в противном случае поведение не определено. Заданные кучи дескрипторов должны соответствовать состоянию, когда любой список команд вызывает пакет; в противном случае поведение не определено. Это позволяет пакетам наследовать и изменять параметры таблицы дескрипторов в списке команд. В пакетах, которые не изменяют таблицы дескрипторов (наследуют их), не нужно задавать кучу дескрипторов и просто наследовать из списка вызывающей команды.

Если заданы кучи дескрипторов (с помощью [**ID3D12GraphicsCommandList:: сетдескрипторхеапс**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setdescriptorheaps)), все используемые кучи задаются в одном вызове (и все ранее установленные кучи отменяются вызовом). В вызове можно задать не более одной кучи для каждого типа, указанного выше.

## <a name="populating-descriptor-heaps"></a>Заполнение куч дескрипторов

После того как приложение создало кучу дескрипторов, оно может использовать методы на устройстве для создания дескрипторов непосредственно в куче или копирования дескрипторов из одного места в другое.

Начальное содержимое памяти кучи дескрипторов не определено, поэтому необходимо, чтобы графический процессор или драйвер, ссылающийся на неинициализированную память для подготовки к просмотру, мог вызвать неопределенные результаты, такие как сброс устройства.

Если приложение настраивает кучу дескрипторов как видимую для ЦП, то ЦП может вызывать методы для создания дескрипторов в куче и копирования из места (в том числе между кучами) в немедленный, свободный потоковый способ. Если куча настроена как SHADER_VISIBLE, чтение ЦП не разрешено.



## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Кучи дескрипторов](descriptor-heaps.md)
</dt> </dl>

 

 




