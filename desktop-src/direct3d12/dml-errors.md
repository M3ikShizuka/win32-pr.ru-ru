---
title: Обработка ошибок и удаление устройств в Директмл
description: В этом разделе описывается отладка Директмлного устройства и другие условия возникновения ошибок.
ms.custom: Windows 10 May 2019 Update
ms.localizationpriority: high
ms.topic: article
ms.date: 04/19/2019
ms.openlocfilehash: b4567558b8b75685db16796e921f3daf35b849a1
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/23/2019
ms.locfileid: "104548972"
---
# <a name="handling-errors-and-device-removal-in-directml"></a>Обработка ошибок и удаление устройств в Директмл

## <a name="device-removal"></a>Удаление устройства

При возникновении неустранимой ошибки устройство Директмл может войти в состояние "удалено с устройства". Неустранимые ошибки, вызывающие удаление устройства, включают недопустимое использование API (для методов, которые не возвращают [**HRESULT**](/windows/desktop/com/structure-of-com-error-codes)), ошибки драйвера, аппаратного сбоя или нехватки памяти (гонки).

При удалении устройства Директмл все вызовы методов на устройстве и каждый объект, созданный этим устройством, становятся недоступными для операций. Для методов, возвращающих [**значение HRESULT**](/windows/desktop/com/structure-of-com-error-codes), возвращается [**DXGI_ERROR_DEVICE_REMOVED**](/windows/desktop/direct3ddxgi/dxgi-error) код ошибки. Вы можете использовать метод [ **идмлдевице:: жетдевицеремоведреасон**](/windows/desktop/api/directml/nf-directml-idmldevice-getdeviceremovedreason) , чтобы проверить, удалено ли устройство директмл, и получить более подробный код ошибки.

Восстановление после удаления устройства невозможно, за исключением выпуска затронутого устройства и всех его дочерних элементов, а затем повторного создания устройства Директмл с нуля.

Удаление устройства с базовым устройством Direct3D 12 также приводит к удалению устройства Директмл. Однако обратное неверно. Удаление устройства Директмл может привести к тому, что базовое устройство Direct3D 12 не будет удалено.

## <a name="debugging-directml-device-removal-and-other-errors"></a>Отладка устройства Директмл-удаление и другие ошибки

Наиболее распространенной причиной ошибок Директмл является недопустимое использование API. Недопустимое использование API может привести к **E_INVALIDARG** коду ошибки HRESULT или в результате удаления устройства.

Мы настоятельно рекомендуем включить [уровень отладки директмл](dml-debug-layer.md) во время разработки, чтобы перехватить и отладить такие ошибки. Уровень отладки Директмл выполняет расширенную проверку параметров метода и использования API, а также выдает отладочные сообщения отладки, которые помогут вам выполнить отладку.

## <a name="see-also"></a>См. также раздел

* [Использование слоя отладки Директмл](dml-debug-layer.md)
