---
title: Использование дескрипторов непосредственно в корневой подписи
description: Приложения могут добавлять дескрипторы непосредственно в корневую подпись, чтобы избежать необходимости проходить через кучу дескрипторов.
ms.assetid: 033E3D8F-3003-42F7-BF77-68A7D62802E5
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd97a7d68f5c9b51b6d15d3b71c6e30d04bb36e5
ms.sourcegitcommit: 83afb2f3e9e5d37f3f5a11e975515e9ed8b044ff
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2020
ms.locfileid: "104549030"
---
# <a name="using-descriptors-directly-in-the-root-signature"></a>Использование дескрипторов непосредственно в корневой подписи

Приложения могут добавлять дескрипторы непосредственно в корневую подпись, чтобы избежать необходимости проходить через кучу дескрипторов. Эти дескрипторы занимают много пространства в корневой подписи (см. раздел ограничения корневых подписей), поэтому приложения должны использовать их с осторожностью.

В качестве примера использования можно поместить представления постоянного буфера (CBV), которые изменяются на рисование в корневом макете таким образом, чтобы пространство кучи дескриптора не выделилось приложением на Draw (и сохранить указатель на таблицу дескрипторов в новом месте в куче дескрипторов). Поместив что-либо в корневую подпись, приложение просто переводит ответственность за управление версиями в драйвер, но это инфраструктура, которая у них уже есть.

Для отрисовки, использующей очень незначительное число ресурсов, использование таблицы или кучи дескрипторов может быть ненужным, если все необходимые дескрипторы можно поместить непосредственно в корневую подпись.

В корневой сигнатуре поддерживаются только следующие типы дескрипторов:
- КБВС.
- Представления ресурсов шейдера (СРВС)/Унордеред Access Views (Уавс) буферных ресурсов, в которых формат SRV/UAV содержит только 32-разрядные компоненты FLOAT/UINT/Синт (преобразование формата отсутствует).
- СРВС структуры ускорения райтраЦинг в локальных и глобальных корневых сигнатурах. 

Уавс в корне не может иметь связанные с ними счетчики. Дескрипторы в корневой подписи отображаются каждый как отдельные отдельные дескрипторы, &mdash; которые они не могут динамически индексировать.

``` syntax
struct SceneData
{
   uint foo;
   float bar[2];
   int moo;
};
ConstantBuffer<SceneData> mySceneData : register(b6);
```

В приведенном выше примере `mySceneData` не может быть объявлен как массив, как в `cbuffer mySceneData[2]` случае, если он будет сопоставлен с дескриптором в корневой сигнатуре, так как индексирование в псевдонимах не поддерживается в корневой подписи. Приложение может определить отдельные отдельные буферы констант и определить их каждый как отдельную запись в корневой подписи при необходимости. Обратите внимание, что в `mySceneData` приведенном выше примере имеется массив `bar[2]` . Динамическое индексирование в буфере константы является допустимым. дескриптор в корневой подписи ведет себя так же, как и тот же дескриптор, при доступе через кучу дескрипторов. Это отличается от констант встраивания непосредственно в корневой сигнатуре, которая также выглядит как буфер констант, за исключением того, что динамическое индексирование внутри встроенных констант не разрешено `bar[2]` .

Следующие интерфейсы API (из интерфейса [**ID3D12GraphicsCommandList**](/windows/win32/api/d3d12/nn-d3d12-id3d12graphicscommandlist) ) предназначены для установки дескрипторов непосредственно в корневой подписи:

-   [**сеткомпутерутконстантбуффервиев**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setcomputerootconstantbufferview)
-   [**сетграфиксрутконстантбуффервиев**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setgraphicsrootconstantbufferview)
-   [**сеткомпутерутшадерресаурцевиев**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setcomputerootshaderresourceview)
-   [**сетграфиксрутшадерресаурцевиев**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setgraphicsrootshaderresourceview)
-   [**сеткомпутерутунордередакцессвиев**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setcomputerootunorderedaccessview)
-   [**сетграфиксрутунордередакцессвиев**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setgraphicsrootunorderedaccessview)

> [!Note]  
> В Direct3D 12 нет концепции "корневого массива дескрипторов". Массивы дескрипторов поддерживаются только в кучах дескрипторов.

## <a name="related-topics"></a>Связанные темы

[Корневые подписи](root-signatures.md)
