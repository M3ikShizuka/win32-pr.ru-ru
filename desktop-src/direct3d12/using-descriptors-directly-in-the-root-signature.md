---
title: Использование дескрипторов непосредственно в корневой подписи
description: Чтобы избежать необходимости проходить через кучу дескрипторов, можно разместить дескриптор непосредственно в корневой подписи.
ms.assetid: 033E3D8F-3003-42F7-BF77-68A7D62802E5
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a3f32b423b017477e66ea3ae32eee509ec455d85
ms.sourcegitcommit: 0dec0044816af3f2b2e6403659e1cf11138c90cd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/13/2021
ms.locfileid: "121813228"
---
# <a name="using-descriptors-directly-in-the-root-signature"></a>Использование дескрипторов непосредственно в корневой подписи

Чтобы избежать необходимости проходить через кучу дескрипторов, можно разместить дескриптор непосредственно в корневой подписи. Эти дескрипторы занимают много пространства в корневой подписи (см. раздел [ограничения корневых подписей](./root-signature-limits.md)), поэтому рекомендуется использовать их с осторожностью.

В качестве примера использования можно поместить в корневой макет представление постоянного буфера (CBV), изменяющееся на рисование. Таким образом, пространство кучи дескриптора не должно выделяться приложением на Draw (и сохраняет указатель на таблицу дескрипторов в новом месте в куче дескрипторов). Поместив что-либо в корневую подпись, приложение просто переводит ответственность за управление версиями в драйвер; но это инфраструктура, которая уже есть у драйверов.

Для отрисовки, использующей очень незначительное количество ресурсов, использование таблицы или кучи дескриптора может быть ненужным, если все необходимые дескрипторы можно поместить непосредственно в корневую подпись.

Это единственные Типы дескрипторов, поддерживаемые в корневой подписи.

- Представление буфера констант (КБВС).
- Представления ресурсов шейдера (СРВС)/неупорядоченные представления доступа (Уавс) буферных ресурсов, в которых преобразование формата не требуется (нетипизированные буферы). Некоторые примеры нетипизированных буферов, которые можно привязать к корневым дескрипторам, `StructuredBuffer<type>` включают `RWStructuredBuffer<type>` , `ByteAddressBuffer` и `RWByteAddressBuffer` . Типизированные буферы, такие как `Buffer<uint>` и, `Buffer<float2>` не могут.
- СРВС структуры ускорения райтраЦинг в локальных и глобальных корневых сигнатурах. 

С UAV в корне не могут сопоставлены счетчики. Дескрипторы в корневой подписи отображаются каждый как отдельные отдельные дескрипторы, &mdash; которые они не могут динамически индексировать.

``` syntax
struct SceneData
{
   uint foo;
   float bar[2];
   int moo;
};
ConstantBuffer<SceneData> mySceneData : register(b6);
```

В приведенном выше примере `mySceneData` не может быть объявлен как массив, как в `cbuffer mySceneData[2]` случае, если он будет сопоставлен с дескриптором в корневой сигнатуре. Это обусловлено тем, что индексирование в дескрипторах не поддерживается в корневой подписи. При необходимости можно определить отдельные отдельные буферы констант и определить их каждую как отдельную запись в корневой подписи. Обратите внимание, что в `mySceneData` приведенном выше примере имеется массив `bar[2]` . Динамическое индексирование в буфере константы является допустимым, &mdash; так как дескриптор в корневой подписи работает так же, как и тот же дескриптор, что и при доступе через кучу дескрипторов. Это отличается от констант встраивания непосредственно в корневую сигнатуру, которая также выглядит как буфер констант, за исключением того, что динамическое индексирование внутри встроенных констант не разрешено, поэтому `bar[2]` было бы запрещено.

Эти API-интерфейсы (из интерфейса [**ID3D12GraphicsCommandList**](/windows/win32/api/d3d12/nn-d3d12-id3d12graphicscommandlist) ) предназначены для установки дескрипторов непосредственно в корневой подписи.

-   [**SetComputeRootConstantBufferView**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setcomputerootconstantbufferview)
-   [**SetGraphicsRootConstantBufferView**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setgraphicsrootconstantbufferview)
-   [**SetComputeRootShaderResourceView**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setcomputerootshaderresourceview)
-   [**SetGraphicsRootShaderResourceView**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setgraphicsrootshaderresourceview)
-   [**SetComputeRootUnorderedAccessView**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setcomputerootunorderedaccessview)
-   [**SetGraphicsRootUnorderedAccessView**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setgraphicsrootunorderedaccessview)

> [!NOTE]  
> В Direct3D 12 нет концепции *корневого массива дескрипторов* . Массивы дескрипторов поддерживаются только в кучах дескрипторов.

## <a name="related-topics"></a>Связанные темы

* [Корневые подписи](root-signatures.md)