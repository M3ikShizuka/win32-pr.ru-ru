---
title: Счетчики потокового вывода
description: Потоковая передача данных — это способность GPU записывать вершины в буфер. Счетчики потокового вывода отслеживают ход выполнения.
ms.assetid: 7342DA09-25E9-4154-83BA-B03ADBB8B671
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 00cc3d78314b5c9130f69c65ebc5fa056d51d7305135025ecf2e4329ecbe6350
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118989474"
---
# <a name="stream-output-counters"></a>Счетчики потокового вывода

Потоковая передача данных — это способность GPU записывать вершины в буфер. Счетчики потокового вывода отслеживают ход выполнения.

-   [Различия в потоковых счетчиках с Direct3D 11 до Direct3D 12](#differences-in-stream-counters-from-direct3d-11-to-direct3d-12)
-   [буфферфилледсизе](#bufferfilledsize)
-   [Связанные темы](#related-topics)

## <a name="differences-in-stream-counters-from-direct3d-11-to-direct3d-12"></a>Различия в потоковых счетчиках с Direct3D 11 до Direct3D 12

Как часть процесса потокового вывода, GPU должен изучить текущее расположение в буфере, в который он записывается. В Direct3D 11 память для хранения этого расположения выделяется драйвером, и единственный способ управления этим значением — с помощью метода **сосеттаржетс** . В Direct3D 12 приложения выделяют память для хранения текущего расположения. Для работы с этим значением не существует специальных способов, и приложения могут считывать и записывать значение с помощью ЦП или GPU.

## <a name="bufferfilledsize"></a>буфферфилледсизе

Приложение отвечает за выделение хранилища для 32-разрядного количества, именуемого *буфферфилледсизе*. Содержит число байтов данных в буфере потока вывода. Это хранилище можно разместить в том же или другом ресурсе, в котором содержатся выходные данные потока. Доступ к этому значению осуществляется с помощью GPU на стадии потокового вывода, чтобы определить, куда добавлять новые данные вершин в буфер. Кроме того, доступ к этому значению осуществляется с помощью графического процессора, чтобы определить, когда произошло переполнение.

См. структуру [**D3D12 \_ потока \_ OUTPUT \_**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_stream_output_desc).

Слой отладки будет проверять следующее в [**ID3D12GraphicsCommandList:: сосеттаржетс**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-sosettargets):

-   *Буфферфилледсизе* попадает в диапазон, подразумеваемый {*оффсетинбитес*, *сизеинбитес*}, если указан ресурс, отличный от NULL.
-   *Буфферфилледсизеоффсетинбитес* является кратным 4.
-   *Буфферфилледсизеоффсетинбитес* находится в диапазоне содержащего ресурса.
-   Указанный ресурс является буфером.

Среда выполнения не будет проверять тип кучи, связанный с выходным буфером потока, поскольку выходной поток поддерживается во всех типах кучи.

Корневые подписи должны указывать, будет ли использоваться выходной поток, используя флаги флагов [**\_ корневой \_ подписи \_ D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_root_signature_flags) .

\_Флаг корневой \_ подписи D3D12 \_ \_ позволяет \_ \_ указать выходные данные потока для корневых подписей, созданных в HLSL, так же, как и другие флаги.

[**Креатеграфикспипелинестате**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-creategraphicspipelinestate) завершится ошибкой, если шейдер геометрии содержит потоковый выход, но у корневой подписи нет \_ установленного флага корневой \_ сигнатуры D3D12 " \_ \_ Разрешить \_ выходной поток" \_ .

Если ресурс используется в качестве целевого объекта вывода потока, используемые ресурсы должны находиться в \_ состоянии D3D12 ресурсов \_ \_ потока состояния \_ . Это относится как к данным вершин, так и к *буфферфилледсизе* (которые могут находиться в одном или разных ресурсах).

Нет специальных интерфейсов API для задания смещения буфера вывода потока, так как приложения могут записывать данные в *буфферфилледсизе* с помощью ЦП или GPU напрямую.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Счетчики и запросы](counters-and-queries.md)
</dt> </dl>

 

 




