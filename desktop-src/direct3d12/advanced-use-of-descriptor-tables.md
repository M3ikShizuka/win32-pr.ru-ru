---
title: Расширенное использование таблиц дескрипторов
description: В следующих разделах приводятся сведения о расширенном использовании таблиц дескрипторов.
ms.assetid: BB0CA29C-65CB-48B1-8351-EE13CC470B54
ms.date: 05/31/2018
ms.localizationpriority: high
ms.topic: article
ms.openlocfilehash: 79dad6914cff07726c2d40ed2ee27cccb6a0cf1e
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "74105025"
---
# <a name="advanced-use-of-descriptor-tables"></a>Расширенное использование таблиц дескрипторов

В следующих разделах приводятся сведения о расширенном использовании таблиц дескрипторов.

-   [Изменение записей таблицы дескрипторов между вызовами отрисовки](#changing-descriptor-table-entries-between-rendering-calls)
-   [Индексация вне границ](#out-of-bounds-indexing)
-   [Производные шейдеры и разные индексы](#shader-derivatives-and-divergent-indexing)
-   [Связанные темы](#related-topics)

## <a name="changing-descriptor-table-entries-between-rendering-calls"></a>Изменение записей таблицы дескрипторов между вызовами отрисовки

После того как списки команд, которые задают таблицы дескрипторов, были отправлены в очередь для выполнения, приложение не должно отменять загрузку ЦП частями кучи дескрипторов, на которые может ссылаться графический процессор, до тех пор, пока приложению не известно, что GPU завершило использовать ссылки.

Завершение работы можно определить с помощью ограниченных границ, используя границы API для отслеживания хода выполнения GPU или более грубых механизмов, таких как ожидание, чтобы увидеть, что отрисовка была отправлена для отображения, что подходит для приложения. Если приложение знает, что к нему будет обращаться только подмножество региона, к которому обращается таблица дескрипторов (скажем, из-за управления потоком в шейдере), другие дескрипторы без ссылок по-прежнему можно изменять. Если приложению необходимо переключаться между разными таблицами дескрипторов между вызовами отрисовки, существует несколько подходов, которые может выбрать приложение.

-   Управление версиями таблицы дескрипторов: создание (или повторное использование) отдельной таблицы дескрипторов для каждой уникальной коллекции описательов, на которые будет ссылаться список команд. При редактировании и повторном использовании ранее заполненных областей в кучах дескрипторов приложения должны сначала убедиться, что GPU завершил использование любой части кучи дескрипторов, которая будет перезапущена.
-   Динамическое индексирование. приложения могут упорядочивать объекты, которые зависят от рисования или диспетчеризации (или даже могут изменяться в рамках рисования) в диапазоне кучи дескрипторов, определять таблицу дескрипторов, охватывающую все из них, и из шейдера использовать динамическую индексацию таблицы во время выполнения шейдера для выбора используемого объекта.
-   Размещение дескрипторов в корневой подписи напрямую. Таким образом можно управлять только очень небольшим числом дескрипторов, так как пространство корневых подписей ограничено.

Следствием использования управления версиями таблицы дескриптора является то, что память дескриптора из кучи дескрипторов должна быть записана с помощью каждого уникального набора дескрипторов, на которые ссылается графический конвейер, для каждого списка команд, который может быть выполнен, помещен в очередь на выполнение или записывается в любое заданное время.

D3D12 оставляет за собой ответственность за управление версиями в приложении для типов объектов, управляемых с помощью куч дескрипторов и таблиц дескрипторов. Одно из преимуществ этого заключается в том, что приложения могут выбрать повторное использование содержимого таблицы дескрипторов как можно скорее, а не всегда определяя новую версию таблицы дескрипторов для каждого отправляемого списка команд. Корневая подпись — это пространство, которое драйвер D3D12 автоматически версии.

Возможность привязки нескольких таблиц дескрипторов к корневой подписи (и, таким образом, к конвейеру) за раз позволяет приложениям группировать и переключать наборы ссылок дескрипторов по различным частотам при необходимости. Например, приложение может использовать небольшое число (возможно, только одно) больших статических таблиц дескрипторов, которые меняются редко или в каких регионах память кучи дескрипторов заполняется по мере необходимости, используя динамическое индексирование шейдера для выбора текстур. В то же время приложение может поддерживать другой класс ресурсов, где набор, на который ссылается каждый вызов Draw, переключается из ЦП с помощью метода управления версиями таблиц дескрипторов.

## <a name="out-of-bounds-indexing"></a>Индексация вне границ

Индексация недопустимых границ любой таблицы дескрипторов из шейдера приводит к значительному неопределенному доступу к памяти, включая возможность считывания произвольной памяти в процессе, как если бы это дескриптор состояния оборудования, и его работа с следствием аппаратного обеспечения. Это может привести к сбросу устройства, но не приведет к сбою Windows.

## <a name="shader-derivatives-and-divergent-indexing"></a>Производные шейдеры и разные индексы

Если вызовы шейдера пикселей, которые выполняются в отметке 2x2 (для поддержки производных вычислений), выбирают разные индексы текстуры для выборки из таблицы дескрипторов, а если выбранная конфигурация и текстура для любого заданного пикселя требует вычисления Лод из производной координаты текстуры, то процесс вычисления Лод и выбор текстуры выполняется аппаратно независимо для каждого уточняющего запроса в формате 2x2. , что влияет на производительность.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Таблицы дескрипторов](descriptor-tables.md)
</dt> </dl>

 

 




