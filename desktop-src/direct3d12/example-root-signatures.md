---
title: Пример корневых подписей
description: В следующем разделе показано, какие корневые подписи имеют разный уровень сложности от Empty до полного заполнения.
ms.assetid: 493D35C9-2A90-4688-BD7E-74B9EB2B4E72
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 19d09d355cc1c96d77670c5536400f0b3f93c097
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "74104260"
---
# <a name="example-root-signatures"></a>Пример корневых подписей

В следующем разделе показано, какие корневые подписи имеют разный уровень сложности от Empty до полного заполнения.

-   [Пустая корневая подпись](#an-empty-root-signature)
-   [Одна константа](#one-constant)
-   [Добавление представления буфера корневой константы](#adding-a-root-constant-buffer-view)
-   [Таблицы дескрипторов привязки](#binding-descriptor-tables)
-   [Более сложная корневая подпись](#a-more-complex-root-signature)
-   [Представления ресурсов потокового шейдера](#streaming-shader-resource-views)
-   [Связанные темы](#related-topics)

## <a name="an-empty-root-signature"></a>Пустая корневая подпись

![пустая корневая сигнатура не имеет привязок](images/root-tables-0.png)

Пустая корневая подпись вряд ли будет полезной, но ее можно использовать в тривиальных проходах с использованием только входного ассемблера, а также минимальных шейдеров вершин и пикселей, которые не обращаются ни к каким дескрипторам. Кроме того, доступна стадия Blend, Целевая цель отрисовки и этапы глубины трафаретов, даже с пустой корневой сигнатурой.

## <a name="one-constant"></a>Одна константа

![одна корневая константа](images/root-tables-constant.png)

Слот привязки API, в котором корневой аргумент для этого параметра будет привязан в списке команд время записи. Число слотов привязки API является неявным в зависимости от порядка параметров в корневой сигнатуре (первый всегда равен нулю). Слот привязки HLSL, где шейдер увидит параметр root, отображается. Тип ("uint" в приведенном выше примере) неизвестен оборудованию, но является просто комментарием на изображении, оборудование просто увидит единственный DWORD в качестве содержимого.

Для привязки константы к времени записи списка команд используется следующая команда:

``` syntax
pCmdList->SetComputeRoot32BitConstant(0,seed); // 0 is the parameter index, seed is used by the shaders
```

## <a name="adding-a-root-constant-buffer-view"></a>Добавление представления буфера корневой константы

![Добавляет представление буфера константы в корневую подпись](images/root-tables-cbv.png)

В этом примере показаны две корневые константы и представление буфера корневых констант (CBV), которое наследует затраты на два слота DWORD.

Для привязки представления буфера констант используйте следующую команду. Обратите внимание, что первый параметр (2) — это слот, показанный на изображении. Обычно массив констант настраивается, а затем становится доступным для шейдеров в B0 в виде CBV.

``` syntax
pCmdList->SetGraphicsRootConstantBufferView(2,GPUVAForCurrDynamicConstants);
```

## <a name="binding-descriptor-tables"></a>Таблицы дескрипторов привязки

![Добавляет таблицы дескрипторов в корневую подпись](images/root-tables-2.png)

В этом примере показано использование двух таблиц дескрипторов. одно объявление таблицы из пяти дескрипторов, которое будет доступно во время выполнения в \_ КУЧЕ CBV SRV \_ UAV, и другое объявление таблицы из двух дескрипторов, которые будут отображаться во время выполнения в куче дескрипторов образцов.

Для привязки таблиц дескрипторов при записи списка команд.

``` syntax
pCmdList->SetComputeRootDescriptorTable(1, handleToCurrentMaterialDataInHeap);
pCmdList->SetComputeRootDescriptorTable(2, handleToCurrentMaterialDataInSamplerHeap);
```

Еще одна функция корневой сигнатуры — это корневая константа float4, которая имеет четыре DWORD в размере. Следующая команда привязывает только средние два DWORD из четырех.

``` syntax
pCmdList->SetComputeRoot32BitConstants(0,2,myFloat2Array,1);  // 2 constants starting at offset 1 (middle 2 values in float4)
```

## <a name="a-more-complex-root-signature"></a>Более сложная корневая подпись

![сложная корневая подпись с множеством элементов](images/root-tables-3.png)

В этом примере показана плотная корневая подпись с большинством типов записей. Две таблицы дескрипторов (в слотах 3 и 6) включают массивы неограниченного размера. Нагрузка здесь заключается в том, что приложение поддерживает только касание допустимых дескрипторов в куче. Для неограниченных или очень больших массивов требуется аппаратный уровень 2 +, поддерживающий привязку ресурсов.

Существует два статических пробных (связанных, не требующих корневых слотов подписи).

В слоте 9 UAV U4 и UAV U5 объявляются в одном и том же смещении таблицы дескрипторов. При использовании дескриптора псевдонима один дескриптор в памяти будет отображаться как U4 и U5 в шейдерах HLSL. В этом случае шейдер должен быть скомпилирован с использованием \_ ресурсов шейдера D3D10 \_ , а также параметра \_ \_ или `/res_may_alias` в FXC. Дескрипторы с псевдонимами позволяют привязывать один дескриптор к нескольким точкам привязки без внесения каких либо изменений в шейдер.

## <a name="streaming-shader-resource-views"></a>Представления ресурсов потокового шейдера

![представления ресурсов потокового шейдера в этой корневой подписи](images/root-tables-4.png)

Эта корневая подпись иллюстрирует ситуацию, когда все СРВС передаются в поток и из одного большого массива. Во время выполнения таблица дескрипторов может быть задана один раз при установке корневой подписи. Затем все операции чтения текстур выполняются путем индексации в массив через константы, поступающие через первые несколько корневых аргументов. Требуется только одна куча дескрипторов, и она обновляется только в том случае, если текстуры передаются в потоки или из свободных слотов дескрипторов.

Смещения дескрипторов в большой куче определяются шейдерами с помощью констант в представлениях буфера констант. Например, если для шейдера задан идентификатор материала, он может индексировать в один большой массив с помощью константы для доступа к требуемому дескриптору (который ссылается на требуемую текстуру).

Для этого сценария требуется оборудование с привязкой ресурсов партнеров +.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Уровни оборудования привязки ресурсов](hardware-support.md)
</dt> <dt>

[Привязка ресурсов в HLSL](resource-binding-in-hlsl.md)
</dt> <dt>

[Корневые подписи](root-signatures.md)
</dt> </dl>

 

 




