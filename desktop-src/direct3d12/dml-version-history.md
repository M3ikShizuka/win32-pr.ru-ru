---
title: Журнал версий DirectML
description: Директмл распространяется как системный компонент Windows 10 и доступен как часть операционной системы Windows 10 (ОС) в Windows 10, версия 1903 (10,0; Сборка 18362) и более поздние версии.
ms.localizationpriority: high
ms.topic: article
ms.date: 11/05/2020
ms.openlocfilehash: f5e0a478b2d4c6728a1cd53388ba09af8e5bbc0e
ms.sourcegitcommit: 8e1f04c7e3c5c850071bac8d173f9441aab0dfed
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2021
ms.locfileid: "107803940"
---
# <a name="directml-version-history"></a>Журнал версий DirectML

Директмл распространяется как системный компонент Windows 10 и доступен как часть операционной системы Windows 10 (ОС) в Windows 10, версия 1903 (10,0; Сборка 18362) и более поздние версии.

Начиная с Директмл версии 1.4.0, Директмл также доступен в виде автономного распространяемого пакета (см [. Microsoft. AI. директмл](https://www.nuget.org/packages/Microsoft.AI.DirectML/)), который полезен для приложений, которые хотят использовать фиксированную версию директмл или при работе в более старых версиях Windows 10.

Директмл соответствует соглашениям об [семантическом управлении версиями](https://semver.org/) . Это значит, что номера версий соответствуют форме `major.minor.patch` . В первом выпуске Директмл есть версия 1.0.0.

## <a name="version-table"></a>Таблица версий

|Версия Директмл|Поддерживаемый уровень компонентов (см. [Журнал уровня функций директмл](./dml-feature-level-history.md))|DML_TARGET_VERSION|Первый доступ в|Первый доступный в (распространяемый)|
|-|-|-|-|-|-|
|1.5.0|DML_FEATURE_LEVEL_3_1|`0x3100`|Недоступно|[Директмл — 1.5.0](https://www.nuget.org/packages/Microsoft.AI.DirectML/1.5.0)|
|1.4.0<sup>1</sup>|DML_FEATURE_LEVEL_3_0|`0x3000`|Недоступно|[Директмл — 1.4.0](https://www.nuget.org/packages/Microsoft.AI.DirectML/1.4.0)|
|1.1.0|DML_FEATURE_LEVEL_2_0|`0x2000`|Windows 10, версия 2004 (10,0; Сборка 19041) (обновление Windows 10 может 2020). Так называемый "20H1".|Недоступно|
|1.0.0|DML_FEATURE_LEVEL_1_0|`0x1000`|Windows 10, версия 1903 (10,0; Сборка 18362) (обновление Windows 10 может 2019). Так называемый "19H1".|Недоступно|

<sup>1</sup> 1.2.0 и 1.3.0 промежуточные выпуски директмл не были широко доступны.

## <a name="selecting-a-directml-target-version"></a>Выбор целевой версии Директмл

Для удобства некоторые функции в `DirectML.h` файле заголовка объявляются условно на основе значения `DML_TARGET_VERSION` макроса. Установив `DML_TARGET_VERSION` для макроса определенные значения, можно исключить части `DirectML.h` из приложения.

Это может быть полезно, если вы используете более новую копию `DirectML.h` , но вы используете более раннюю версию двоичного файла директмл, так как гарантируется, что любая попытка использовать компоненты, выходящие за рамки выбранного целевого уровня, не будет компилироваться. Этот механизм аналогичен `NTDDI_VERSION` макросу (см. [макросы для условных объявлений](../winprog/using-the-windows-headers.md#macros-for-conditional-declarations)).

Ниже приведены допустимые значения для `DML_TARGET_VERSION` макроса.

|DML_TARGET_VERSION|Действие|
|-|-|
|`0x3000`|Все функции, которым требуется версия Директмл более поздней, чем **1.4.0** , исключаются из `DirectML.h` .|
|`0x2000`|Все функции, которым требуется версия Директмл более поздней, чем **1.1.0** , исключаются из `DirectML.h` .|
|`0x1000`|Все функции, для которых требуется версия Директмл новее **1.0.0** , исключаются из `DirectML.h` .|
|*Не задано*|Целевая версия выбирается автоматически. Дополнительные сведения см. далее.|

Если `DML_TARGET_VERSION` параметр не установлен, он выбирается автоматически следующим.

* Если `DML_TARGET_VERSION_USE_LATEST` макрос определен, выбирается последняя целевая версия.
* В противном случае целевая версия выбирается в зависимости от значения `NTDDI_VERSION` макроса.
  *  `NTDDI_WIN10_19H1` результатом является Целевая версия `0x1000` .
  *  `NTDDI_WIN10_VB` результатом является Целевая версия `0x2000` .
  *  Если `NTDDI_VERSION` параметр не определен, выбирается последняя целевая версия (как если `DML_TARGET_VERSION_USE_LATEST` бы была указана).

### <a name="example"></a>Пример

Рассмотрим приложение, использующее версию 10.0.19041.0 (Windows 10, версия 2004) пакета средств разработки программного обеспечения (SDK) для Windows. В таблице выше версия Директмл, которая соответствует этому параметру, — 1.1.0, а соответствующий `DML_TARGET_VERSION` — `0x2000` .

Если не задать `DML_TARGET_VERSION` ни `NTDDI_VERSION` макрос, ни, выбранная Целевая версия будет по умолчанию `0x2000` иметь значение, а все в `DirectML.h` будет доступно для использования.

Если вы хотите, чтобы приложение могло работать в Windows 10, версия 1903 (10,0; Сборка 18362), то можно было бы `#define DML_TARGET_VERSION 0x1000` исключить все содержимое в `DirectML.h` , которое не поддерживается директмл версии 1.0.0. Это гарантирует, что любая попытка использовать функциональные возможности, для которых требуется более поздняя версия, не будет компилироваться.

## <a name="directml-version-versus-feature-level"></a>Версия Директмл и уровень компонентов

Версия Директмл (например, 1.0.0 или 1.4.0) описывает определенный выпуск Директмл, включая соответствующий `DirectML.h` файл заголовка и `.lib` файл.

Уровень компонентов (например, `DML_FEATURE_LEVEL_1_0` или `DML_FEATURE_LEVEL_2_0` ) описывает возможность базовой реализации API, которая может отличаться от `DirectML.h` используемой версии.

Например, приложение, создающее новый пакет SDK, но работающее в более старой версии Windows, может (в среде выполнения) увидеть более низкий поддерживаемый уровень функций, даже если он скомпилирован для последнего пакета SDK.

## <a name="see-also"></a>См. также раздел

* [Журнал уровня компонентов DirectML](./dml-feature-level-history.md)
* [Перечисление DML_FEATURE_LEVEL](/windows/win32/api/directml/ne-directml-dml_feature_level)
* [Распространяемый пакет Microsoft. AI. Директмл](https://www.nuget.org/packages/Microsoft.AI.DirectML/)