---
title: Использование констант непосредственно в корневой подписи
description: Приложения могут определять корневые константы в корневой подписи, каждый из которых является набором 32-разрядных значений. Они отображаются на высоком уровне (HLSL) в виде буфера констант. Обратите внимание, что постоянные буферы по историческим причинам просматриваются как наборы 4x32 значений.
ms.assetid: F9A2640F-D1FA-481C-BDF1-B15372E3C512
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0a3cd3980bede72d6e2f4b163abe11b249970eb7
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127567970"
---
# <a name="using-constants-directly-in-the-root-signature"></a>Использование констант непосредственно в корневой подписи

Приложения могут определять корневые константы в корневой подписи, каждый из которых является набором 32-разрядных значений. Они отображаются на высоком уровне (HLSL) в виде буфера констант. Обратите внимание, что постоянные буферы по историческим причинам просматриваются как наборы 4x32 значений.

Каждый набор пользовательских констант рассматривается как скалярный массив из 32-битных значений, динамически индексируемых и доступных только для чтения из шейдера. За пределами границ индексирование заданного набора корневых констант приводит к неопределенным результатам. В HLSL можно предоставить определения структуры данных для пользовательских констант, чтобы предоставить их типам. Например, если корневая подпись определяет набор из 4 корневых констант, HLSL может накладывать на них следующую структуру.

``` syntax
struct DrawConstants
{
    uint foo;
    float2 bar;
    int moo;
};
ConstantBuffer<DrawConstants> myDrawConstants : register(b1, space0);
```

Массивы не допускаются в буферах констант, которые сопоставляются с корневыми константами, так как динамическое индексирование в корневом пространстве подписи не поддерживается. Например, недопустимо наличие записи в буфере константы, например `float myArray[2];` . Буфер констант, сопоставленный с корневыми константами, не может быть массивом. Таким образом, не допускается соотнесение с `cbuffer myCBArray[2]` корневыми константами.

Константы могут быть частично заданы. Например, если корневая подпись определяет 4 32-битные значения в *руттаблебиндслот* 2, то любое подмножество четырех констант может быть задано за раз (остальные остаются неизменными). Это может быть полезно в пакетах, которые наследуют состояние корневой подписи и могут частично изменить его.

При задании констант следует соблюдать осторожность в структуре буфера констант, ожидаемой шейдером. Возможно, константы заполнены `vec4` границами, например. Чтобы проверить ожидаемый макет, проверьте сведения о отражении в шейдере HLSL.

Следующие API-интерфейсы (из интерфейса [**ID3D12GraphicsCommandList**](/windows/desktop/api/d3d12/nn-d3d12-id3d12graphicscommandlist) ) предназначены для непосредственного задания констант в корневой подписи:

-   [**SetGraphicsRoot32BitConstant**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setgraphicsroot32bitconstant)
-   [**SetGraphicsRoot32BitConstants**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setgraphicsroot32bitconstants)
-   [**SetComputeRoot32BitConstant**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setcomputeroot32bitconstant)
-   [**SetComputeRoot32BitConstants**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setcomputeroot32bitconstants)

Кроме того, см. [**структуру \_ \_ констант D3D12 root**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_root_constants) .

## <a name="related-topics"></a>Связанные разделы

<dl> <dt>

[Корневые подписи](root-signatures.md)
</dt> </dl>

 

 




