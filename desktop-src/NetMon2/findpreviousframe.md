---
description: Функция Финдпревиаусфраме находит предыдущий кадр в текущем контексте записи, соответствующий фильтру.
ms.assetid: 16c5b981-a9f4-41e5-bb97-2caa3e9d8512
title: Функция Финдпревиаусфраме (Netmon. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- FindPreviousFrame
api_type:
- DllExport
api_location:
- Nmapi.dll
ms.openlocfilehash: deabf10702ca41c23101c5f60c9459e094e567fe
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "127065026"
---
# <a name="findpreviousframe-function"></a>Функция Финдпревиаусфраме

Функция **финдпревиаусфраме** находит предыдущий кадр в текущем контексте записи, соответствующий фильтру.

## <a name="syntax"></a>Синтаксис


```C++
HFRAME WINAPI FindPreviousFrame(
   HFRAME    hCurrentFrame,
   LPSTR     ProtocolName,
   LPADDRESS DestinationAddress,
   LPADDRESS SourceAddress,
   LPWORD    ProtocolOffset,
   DWORD     OriginalFrameNumber,
   DWORD     LowestFrame
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*хкуррентфраме* 
</dt> <dd>

Обработчик для фрейма.

</dd> <dt>

*ProtocolName* 
</dt> <dd>

Имя протокола, например TCP.

</dd> <dt>

*DestinationAddress* 
</dt> <dd>

Адрес назначения кадра, поиск которого выполняется.

</dd> <dt>

*SourceAddress* 
</dt> <dd>

Исходный адрес кадра, поиск которого выполняется.

</dd> <dt>

*протоколоффсет* 
</dt> <dd>

Указатель на **слово** , получающее смещение протокола.

</dd> <dt>

*оригиналфраменумбер* 
</dt> <dd>

Начальная точка поиска. По умолчанию эта функция ищет в обратном направлении 1 000 кадров от начальной точки *оригиналфраменумбер* . Можно изменить расстояние поиска обратно, добавив эту строку в файл Nmapi.ini, который находится в \\ каталоге сетевой монитор.

МАКСЛУКБАКК =<new lookback distance>

</dd> <dt>

*ловестфраме* 
</dt> <dd>

Наименьший номер кадра в записи, в которой выполняется поиск.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Если функция выполнена успешно, возвращаемое значение является обработчиком предыдущего кадра.

Если функция не выполнена успешно, возвращается значение **null**.

## <a name="remarks"></a>Remarks

Фильтр записи определяется главным образом *ProtocolName*, который является единственным необходимым входным фильтром. Вы можете добавить сведения *дестинатионаддресс* и *саурцеаддресс* , чтобы увеличить скорость записи.

*Протоколоффсет* возвращается вызывающему средству синтаксического анализа, который добавляет этот **DWORD** в указатель, возвращаемый, заблокируя кадр (WITH [ПАРСЕРТЕМПОРАРИЛОККФРАМЕ](parsertemporarylockframe.md)), чтобы получить LPBYTE протокола, для которого выполняется поиск. При возврате ХФРАМЕ, которому был передан фильтр, выдается анализатору. Если средство синтаксического анализа обнаруживает, что кадр не найден, средство синтаксического анализа может передать этот ХФРАМЕ обратно в функцию **финдпревиаусфраме** , чтобы получить следующий кадр. Адреса источника и назначения, которые не являются обязательными, могут быть переданы как **null**. При использовании эти адреса могут иметь тип \_ \_ IP-адреса и т. д., а не только типы Mac.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|--------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                           |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                                 |
| Заголовок<br/>                   | <dl> <dt>Netmon. h</dt> </dl>  |
| Библиотека<br/>                  | <dl> <dt>Нмапи. lib</dt> </dl> |
| DLL<br/>                      | <dl> <dt>Nmapi.dll</dt> </dl> |



 

 




